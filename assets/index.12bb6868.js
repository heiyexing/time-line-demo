var _j=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var OAe=_j((RAe,pv)=>{const wj=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerpolicy&&(i.referrerPolicy=a.referrerpolicy),a.crossorigin==="use-credentials"?i.credentials="include":a.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(a){if(a.ep)return;a.ep=!0;const i=n(a);fetch(a.href,i)}};wj();var Qs=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function kj(e){if(e.__esModule)return e;var t=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(e).forEach(function(n){var r=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,r.get?r:{enumerable:!0,get:function(){return e[n]}})}),t}var _={exports:{}},Mn={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Rm=Symbol.for("react.element"),Ej=Symbol.for("react.portal"),Sj=Symbol.for("react.fragment"),Cj=Symbol.for("react.strict_mode"),Tj=Symbol.for("react.profiler"),Aj=Symbol.for("react.provider"),Oj=Symbol.for("react.context"),Mj=Symbol.for("react.forward_ref"),Rj=Symbol.for("react.suspense"),Pj=Symbol.for("react.memo"),Ij=Symbol.for("react.lazy"),rC=Symbol.iterator;function Lj(e){return e===null||typeof e!="object"?null:(e=rC&&e[rC]||e["@@iterator"],typeof e=="function"?e:null)}var QI={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},JI=Object.assign,eL={};function Pd(e,t,n){this.props=e,this.context=t,this.refs=eL,this.updater=n||QI}Pd.prototype.isReactComponent={};Pd.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Pd.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function tL(){}tL.prototype=Pd.prototype;function h2(e,t,n){this.props=e,this.context=t,this.refs=eL,this.updater=n||QI}var m2=h2.prototype=new tL;m2.constructor=h2;JI(m2,Pd.prototype);m2.isPureReactComponent=!0;var aC=Array.isArray,nL=Object.prototype.hasOwnProperty,g2={current:null},rL={key:!0,ref:!0,__self:!0,__source:!0};function aL(e,t,n){var r,a={},i=null,o=null;if(t!=null)for(r in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(i=""+t.key),t)nL.call(t,r)&&!rL.hasOwnProperty(r)&&(a[r]=t[r]);var s=arguments.length-2;if(s===1)a.children=n;else if(1<s){for(var l=Array(s),u=0;u<s;u++)l[u]=arguments[u+2];a.children=l}if(e&&e.defaultProps)for(r in s=e.defaultProps,s)a[r]===void 0&&(a[r]=s[r]);return{$$typeof:Rm,type:e,key:i,ref:o,props:a,_owner:g2.current}}function Nj(e,t){return{$$typeof:Rm,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function v2(e){return typeof e=="object"&&e!==null&&e.$$typeof===Rm}function Fj(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var iC=/\/+/g;function Qx(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Fj(""+e.key):t.toString(36)}function Ng(e,t,n,r,a){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case Rm:case Ej:o=!0}}if(o)return o=e,a=a(o),e=r===""?"."+Qx(o,0):r,aC(a)?(n="",e!=null&&(n=e.replace(iC,"$&/")+"/"),Ng(a,t,n,"",function(u){return u})):a!=null&&(v2(a)&&(a=Nj(a,n+(!a.key||o&&o.key===a.key?"":(""+a.key).replace(iC,"$&/")+"/")+e)),t.push(a)),1;if(o=0,r=r===""?".":r+":",aC(e))for(var s=0;s<e.length;s++){i=e[s];var l=r+Qx(i,s);o+=Ng(i,t,n,l,a)}else if(l=Lj(e),typeof l=="function")for(e=l.call(e),s=0;!(i=e.next()).done;)i=i.value,l=r+Qx(i,s++),o+=Ng(i,t,n,l,a);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function N0(e,t,n){if(e==null)return e;var r=[],a=0;return Ng(e,r,"","",function(i){return t.call(n,i,a++)}),r}function Dj(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var fi={current:null},Fg={transition:null},Bj={ReactCurrentDispatcher:fi,ReactCurrentBatchConfig:Fg,ReactCurrentOwner:g2};Mn.Children={map:N0,forEach:function(e,t,n){N0(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return N0(e,function(){t++}),t},toArray:function(e){return N0(e,function(t){return t})||[]},only:function(e){if(!v2(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Mn.Component=Pd;Mn.Fragment=Sj;Mn.Profiler=Tj;Mn.PureComponent=h2;Mn.StrictMode=Cj;Mn.Suspense=Rj;Mn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Bj;Mn.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=JI({},e.props),a=e.key,i=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,o=g2.current),t.key!==void 0&&(a=""+t.key),e.type&&e.type.defaultProps)var s=e.type.defaultProps;for(l in t)nL.call(t,l)&&!rL.hasOwnProperty(l)&&(r[l]=t[l]===void 0&&s!==void 0?s[l]:t[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){s=Array(l);for(var u=0;u<l;u++)s[u]=arguments[u+2];r.children=s}return{$$typeof:Rm,type:e.type,key:a,ref:i,props:r,_owner:o}};Mn.createContext=function(e){return e={$$typeof:Oj,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:Aj,_context:e},e.Consumer=e};Mn.createElement=aL;Mn.createFactory=function(e){var t=aL.bind(null,e);return t.type=e,t};Mn.createRef=function(){return{current:null}};Mn.forwardRef=function(e){return{$$typeof:Mj,render:e}};Mn.isValidElement=v2;Mn.lazy=function(e){return{$$typeof:Ij,_payload:{_status:-1,_result:e},_init:Dj}};Mn.memo=function(e,t){return{$$typeof:Pj,type:e,compare:t===void 0?null:t}};Mn.startTransition=function(e){var t=Fg.transition;Fg.transition={};try{e()}finally{Fg.transition=t}};Mn.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};Mn.useCallback=function(e,t){return fi.current.useCallback(e,t)};Mn.useContext=function(e){return fi.current.useContext(e)};Mn.useDebugValue=function(){};Mn.useDeferredValue=function(e){return fi.current.useDeferredValue(e)};Mn.useEffect=function(e,t){return fi.current.useEffect(e,t)};Mn.useId=function(){return fi.current.useId()};Mn.useImperativeHandle=function(e,t,n){return fi.current.useImperativeHandle(e,t,n)};Mn.useInsertionEffect=function(e,t){return fi.current.useInsertionEffect(e,t)};Mn.useLayoutEffect=function(e,t){return fi.current.useLayoutEffect(e,t)};Mn.useMemo=function(e,t){return fi.current.useMemo(e,t)};Mn.useReducer=function(e,t,n){return fi.current.useReducer(e,t,n)};Mn.useRef=function(e){return fi.current.useRef(e)};Mn.useState=function(e){return fi.current.useState(e)};Mn.useSyncExternalStore=function(e,t,n){return fi.current.useSyncExternalStore(e,t,n)};Mn.useTransition=function(){return fi.current.useTransition()};Mn.version="18.2.0";_.exports=Mn;var dr=_.exports,G_={},b2={exports:{}},ji={},iL={exports:{}},oL={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(X,K){var ae=X.length;X.push(K);e:for(;0<ae;){var le=ae-1>>>1,ue=X[le];if(0<a(ue,K))X[le]=K,X[ae]=ue,ae=le;else break e}}function n(X){return X.length===0?null:X[0]}function r(X){if(X.length===0)return null;var K=X[0],ae=X.pop();if(ae!==K){X[0]=ae;e:for(var le=0,ue=X.length,ge=ue>>>1;le<ge;){var be=2*(le+1)-1,ze=X[be],Lt=be+1,Rt=X[Lt];if(0>a(ze,ae))Lt<ue&&0>a(Rt,ze)?(X[le]=Rt,X[Lt]=ae,le=Lt):(X[le]=ze,X[be]=ae,le=be);else if(Lt<ue&&0>a(Rt,ae))X[le]=Rt,X[Lt]=ae,le=Lt;else break e}}return K}function a(X,K){var ae=X.sortIndex-K.sortIndex;return ae!==0?ae:X.id-K.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var o=Date,s=o.now();e.unstable_now=function(){return o.now()-s}}var l=[],u=[],c=1,f=null,d=3,p=!1,h=!1,g=!1,v=typeof setTimeout=="function"?setTimeout:null,b=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate!="undefined"?setImmediate:null;typeof navigator!="undefined"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function x(X){for(var K=n(u);K!==null;){if(K.callback===null)r(u);else if(K.startTime<=X)r(u),K.sortIndex=K.expirationTime,t(l,K);else break;K=n(u)}}function k(X){if(g=!1,x(X),!h)if(n(l)!==null)h=!0,ee(T);else{var K=n(u);K!==null&&re(k,K.startTime-X)}}function T(X,K){h=!1,g&&(g=!1,b(P),P=-1),p=!0;var ae=d;try{for(x(K),f=n(l);f!==null&&(!(f.expirationTime>K)||X&&!S());){var le=f.callback;if(typeof le=="function"){f.callback=null,d=f.priorityLevel;var ue=le(f.expirationTime<=K);K=e.unstable_now(),typeof ue=="function"?f.callback=ue:f===n(l)&&r(l),x(K)}else r(l);f=n(l)}if(f!==null)var ge=!0;else{var be=n(u);be!==null&&re(k,be.startTime-K),ge=!1}return ge}finally{f=null,d=ae,p=!1}}var C=!1,I=null,P=-1,j=5,A=-1;function S(){return!(e.unstable_now()-A<j)}function M(){if(I!==null){var X=e.unstable_now();A=X;var K=!0;try{K=I(!0,X)}finally{K?O():(C=!1,I=null)}}else C=!1}var O;if(typeof y=="function")O=function(){y(M)};else if(typeof MessageChannel!="undefined"){var R=new MessageChannel,G=R.port2;R.port1.onmessage=M,O=function(){G.postMessage(null)}}else O=function(){v(M,0)};function ee(X){I=X,C||(C=!0,O())}function re(X,K){P=v(function(){X(e.unstable_now())},K)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(X){X.callback=null},e.unstable_continueExecution=function(){h||p||(h=!0,ee(T))},e.unstable_forceFrameRate=function(X){0>X||125<X?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):j=0<X?Math.floor(1e3/X):5},e.unstable_getCurrentPriorityLevel=function(){return d},e.unstable_getFirstCallbackNode=function(){return n(l)},e.unstable_next=function(X){switch(d){case 1:case 2:case 3:var K=3;break;default:K=d}var ae=d;d=K;try{return X()}finally{d=ae}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(X,K){switch(X){case 1:case 2:case 3:case 4:case 5:break;default:X=3}var ae=d;d=X;try{return K()}finally{d=ae}},e.unstable_scheduleCallback=function(X,K,ae){var le=e.unstable_now();switch(typeof ae=="object"&&ae!==null?(ae=ae.delay,ae=typeof ae=="number"&&0<ae?le+ae:le):ae=le,X){case 1:var ue=-1;break;case 2:ue=250;break;case 5:ue=1073741823;break;case 4:ue=1e4;break;default:ue=5e3}return ue=ae+ue,X={id:c++,callback:K,priorityLevel:X,startTime:ae,expirationTime:ue,sortIndex:-1},ae>le?(X.sortIndex=ae,t(u,X),n(l)===null&&X===n(u)&&(g?(b(P),P=-1):g=!0,re(k,ae-le))):(X.sortIndex=ue,t(l,X),h||p||(h=!0,ee(T))),X},e.unstable_shouldYield=S,e.unstable_wrapCallback=function(X){var K=d;return function(){var ae=d;d=K;try{return X.apply(this,arguments)}finally{d=ae}}}})(oL);iL.exports=oL;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sL=_.exports,$i=iL.exports;function ot(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var lL=new Set,zh={};function Cc(e,t){cd(e,t),cd(e+"Capture",t)}function cd(e,t){for(zh[e]=t,e=0;e<t.length;e++)lL.add(t[e])}var cl=!(typeof window=="undefined"||typeof window.document=="undefined"||typeof window.document.createElement=="undefined"),H_=Object.prototype.hasOwnProperty,zj=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,oC={},sC={};function Uj(e){return H_.call(sC,e)?!0:H_.call(oC,e)?!1:zj.test(e)?sC[e]=!0:(oC[e]=!0,!1)}function $j(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Vj(e,t,n,r){if(t===null||typeof t=="undefined"||$j(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function di(e,t,n,r,a,i,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=a,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=o}var Ba={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Ba[e]=new di(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Ba[t]=new di(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Ba[e]=new di(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Ba[e]=new di(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Ba[e]=new di(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Ba[e]=new di(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Ba[e]=new di(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Ba[e]=new di(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Ba[e]=new di(e,5,!1,e.toLowerCase(),null,!1,!1)});var y2=/[\-:]([a-z])/g;function x2(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(y2,x2);Ba[t]=new di(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(y2,x2);Ba[t]=new di(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(y2,x2);Ba[t]=new di(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Ba[e]=new di(e,1,!1,e.toLowerCase(),null,!1,!1)});Ba.xlinkHref=new di("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Ba[e]=new di(e,1,!1,e.toLowerCase(),null,!0,!0)});function _2(e,t,n,r){var a=Ba.hasOwnProperty(t)?Ba[t]:null;(a!==null?a.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(Vj(t,n,a,r)&&(n=null),r||a===null?Uj(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):a.mustUseProperty?e[a.propertyName]=n===null?a.type===3?!1:"":n:(t=a.attributeName,r=a.attributeNamespace,n===null?e.removeAttribute(t):(a=a.type,n=a===3||a===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var ml=sL.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,F0=Symbol.for("react.element"),Tf=Symbol.for("react.portal"),Af=Symbol.for("react.fragment"),w2=Symbol.for("react.strict_mode"),W_=Symbol.for("react.profiler"),uL=Symbol.for("react.provider"),cL=Symbol.for("react.context"),k2=Symbol.for("react.forward_ref"),Y_=Symbol.for("react.suspense"),X_=Symbol.for("react.suspense_list"),E2=Symbol.for("react.memo"),Bl=Symbol.for("react.lazy"),fL=Symbol.for("react.offscreen"),lC=Symbol.iterator;function xp(e){return e===null||typeof e!="object"?null:(e=lC&&e[lC]||e["@@iterator"],typeof e=="function"?e:null)}var Fr=Object.assign,Jx;function ah(e){if(Jx===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Jx=t&&t[1]||""}return`
`+Jx+e}var e1=!1;function t1(e,t){if(!e||e1)return"";e1=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var r=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){r=u}e.call(t.prototype)}else{try{throw Error()}catch(u){r=u}e()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var a=u.stack.split(`
`),i=r.stack.split(`
`),o=a.length-1,s=i.length-1;1<=o&&0<=s&&a[o]!==i[s];)s--;for(;1<=o&&0<=s;o--,s--)if(a[o]!==i[s]){if(o!==1||s!==1)do if(o--,s--,0>s||a[o]!==i[s]){var l=`
`+a[o].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}while(1<=o&&0<=s);break}}}finally{e1=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?ah(e):""}function jj(e){switch(e.tag){case 5:return ah(e.type);case 16:return ah("Lazy");case 13:return ah("Suspense");case 19:return ah("SuspenseList");case 0:case 2:case 15:return e=t1(e.type,!1),e;case 11:return e=t1(e.type.render,!1),e;case 1:return e=t1(e.type,!0),e;default:return""}}function Z_(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Af:return"Fragment";case Tf:return"Portal";case W_:return"Profiler";case w2:return"StrictMode";case Y_:return"Suspense";case X_:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case cL:return(e.displayName||"Context")+".Consumer";case uL:return(e._context.displayName||"Context")+".Provider";case k2:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case E2:return t=e.displayName||null,t!==null?t:Z_(e.type)||"Memo";case Bl:t=e._payload,e=e._init;try{return Z_(e(t))}catch{}}return null}function Gj(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Z_(t);case 8:return t===w2?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function du(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function dL(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Hj(e){var t=dL(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n!="undefined"&&typeof n.get=="function"&&typeof n.set=="function"){var a=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function D0(e){e._valueTracker||(e._valueTracker=Hj(e))}function pL(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=dL(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function hv(e){if(e=e||(typeof document!="undefined"?document:void 0),typeof e=="undefined")return null;try{return e.activeElement||e.body}catch{return e.body}}function q_(e,t){var n=t.checked;return Fr({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n!=null?n:e._wrapperState.initialChecked})}function uC(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=du(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function hL(e,t){t=t.checked,t!=null&&_2(e,"checked",t,!1)}function K_(e,t){hL(e,t);var n=du(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Q_(e,t.type,n):t.hasOwnProperty("defaultValue")&&Q_(e,t.type,du(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function cC(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function Q_(e,t,n){(t!=="number"||hv(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var ih=Array.isArray;function Wf(e,t,n,r){if(e=e.options,t){t={};for(var a=0;a<n.length;a++)t["$"+n[a]]=!0;for(n=0;n<e.length;n++)a=t.hasOwnProperty("$"+e[n].value),e[n].selected!==a&&(e[n].selected=a),a&&r&&(e[n].defaultSelected=!0)}else{for(n=""+du(n),t=null,a=0;a<e.length;a++){if(e[a].value===n){e[a].selected=!0,r&&(e[a].defaultSelected=!0);return}t!==null||e[a].disabled||(t=e[a])}t!==null&&(t.selected=!0)}}function J_(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(ot(91));return Fr({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function fC(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(ot(92));if(ih(n)){if(1<n.length)throw Error(ot(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:du(n)}}function mL(e,t){var n=du(t.value),r=du(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function dC(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function gL(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ew(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?gL(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var B0,vL=function(e){return typeof MSApp!="undefined"&&MSApp.execUnsafeLocalFunction?function(t,n,r,a){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,a)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(B0=B0||document.createElement("div"),B0.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=B0.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Uh(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var bh={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Wj=["Webkit","ms","Moz","O"];Object.keys(bh).forEach(function(e){Wj.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),bh[t]=bh[e]})});function bL(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||bh.hasOwnProperty(e)&&bh[e]?(""+t).trim():t+"px"}function yL(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,a=bL(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,a):e[n]=a}}var Yj=Fr({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function tw(e,t){if(t){if(Yj[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(ot(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(ot(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(ot(61))}if(t.style!=null&&typeof t.style!="object")throw Error(ot(62))}}function nw(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var rw=null;function S2(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var aw=null,Yf=null,Xf=null;function pC(e){if(e=Lm(e)){if(typeof aw!="function")throw Error(ot(280));var t=e.stateNode;t&&(t=Ob(t),aw(e.stateNode,e.type,t))}}function xL(e){Yf?Xf?Xf.push(e):Xf=[e]:Yf=e}function _L(){if(Yf){var e=Yf,t=Xf;if(Xf=Yf=null,pC(e),t)for(e=0;e<t.length;e++)pC(t[e])}}function wL(e,t){return e(t)}function kL(){}var n1=!1;function EL(e,t,n){if(n1)return e(t,n);n1=!0;try{return wL(e,t,n)}finally{n1=!1,(Yf!==null||Xf!==null)&&(kL(),_L())}}function $h(e,t){var n=e.stateNode;if(n===null)return null;var r=Ob(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(ot(231,t,typeof n));return n}var iw=!1;if(cl)try{var _p={};Object.defineProperty(_p,"passive",{get:function(){iw=!0}}),window.addEventListener("test",_p,_p),window.removeEventListener("test",_p,_p)}catch{iw=!1}function Xj(e,t,n,r,a,i,o,s,l){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(c){this.onError(c)}}var yh=!1,mv=null,gv=!1,ow=null,Zj={onError:function(e){yh=!0,mv=e}};function qj(e,t,n,r,a,i,o,s,l){yh=!1,mv=null,Xj.apply(Zj,arguments)}function Kj(e,t,n,r,a,i,o,s,l){if(qj.apply(this,arguments),yh){if(yh){var u=mv;yh=!1,mv=null}else throw Error(ot(198));gv||(gv=!0,ow=u)}}function Tc(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function SL(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function hC(e){if(Tc(e)!==e)throw Error(ot(188))}function Qj(e){var t=e.alternate;if(!t){if(t=Tc(e),t===null)throw Error(ot(188));return t!==e?null:e}for(var n=e,r=t;;){var a=n.return;if(a===null)break;var i=a.alternate;if(i===null){if(r=a.return,r!==null){n=r;continue}break}if(a.child===i.child){for(i=a.child;i;){if(i===n)return hC(a),e;if(i===r)return hC(a),t;i=i.sibling}throw Error(ot(188))}if(n.return!==r.return)n=a,r=i;else{for(var o=!1,s=a.child;s;){if(s===n){o=!0,n=a,r=i;break}if(s===r){o=!0,r=a,n=i;break}s=s.sibling}if(!o){for(s=i.child;s;){if(s===n){o=!0,n=i,r=a;break}if(s===r){o=!0,r=i,n=a;break}s=s.sibling}if(!o)throw Error(ot(189))}}if(n.alternate!==r)throw Error(ot(190))}if(n.tag!==3)throw Error(ot(188));return n.stateNode.current===n?e:t}function CL(e){return e=Qj(e),e!==null?TL(e):null}function TL(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=TL(e);if(t!==null)return t;e=e.sibling}return null}var AL=$i.unstable_scheduleCallback,mC=$i.unstable_cancelCallback,Jj=$i.unstable_shouldYield,eG=$i.unstable_requestPaint,Zr=$i.unstable_now,tG=$i.unstable_getCurrentPriorityLevel,C2=$i.unstable_ImmediatePriority,OL=$i.unstable_UserBlockingPriority,vv=$i.unstable_NormalPriority,nG=$i.unstable_LowPriority,ML=$i.unstable_IdlePriority,Sb=null,ks=null;function rG(e){if(ks&&typeof ks.onCommitFiberRoot=="function")try{ks.onCommitFiberRoot(Sb,e,void 0,(e.current.flags&128)===128)}catch{}}var Go=Math.clz32?Math.clz32:oG,aG=Math.log,iG=Math.LN2;function oG(e){return e>>>=0,e===0?32:31-(aG(e)/iG|0)|0}var z0=64,U0=4194304;function oh(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function bv(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,a=e.suspendedLanes,i=e.pingedLanes,o=n&268435455;if(o!==0){var s=o&~a;s!==0?r=oh(s):(i&=o,i!==0&&(r=oh(i)))}else o=n&~a,o!==0?r=oh(o):i!==0&&(r=oh(i));if(r===0)return 0;if(t!==0&&t!==r&&(t&a)===0&&(a=r&-r,i=t&-t,a>=i||a===16&&(i&4194240)!==0))return t;if((r&4)!==0&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-Go(t),a=1<<n,r|=e[n],t&=~a;return r}function sG(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function lG(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,a=e.expirationTimes,i=e.pendingLanes;0<i;){var o=31-Go(i),s=1<<o,l=a[o];l===-1?((s&n)===0||(s&r)!==0)&&(a[o]=sG(s,t)):l<=t&&(e.expiredLanes|=s),i&=~s}}function sw(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function RL(){var e=z0;return z0<<=1,(z0&4194240)===0&&(z0=64),e}function r1(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Pm(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Go(t),e[t]=n}function uG(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var a=31-Go(n),i=1<<a;t[a]=0,r[a]=-1,e[a]=-1,n&=~i}}function T2(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-Go(n),a=1<<r;a&t|e[r]&t&&(e[r]|=t),n&=~a}}var nr=0;function PL(e){return e&=-e,1<e?4<e?(e&268435455)!==0?16:536870912:4:1}var IL,A2,LL,NL,FL,lw=!1,$0=[],nu=null,ru=null,au=null,Vh=new Map,jh=new Map,Vl=[],cG="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function gC(e,t){switch(e){case"focusin":case"focusout":nu=null;break;case"dragenter":case"dragleave":ru=null;break;case"mouseover":case"mouseout":au=null;break;case"pointerover":case"pointerout":Vh.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":jh.delete(t.pointerId)}}function wp(e,t,n,r,a,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[a]},t!==null&&(t=Lm(t),t!==null&&A2(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,a!==null&&t.indexOf(a)===-1&&t.push(a),e)}function fG(e,t,n,r,a){switch(t){case"focusin":return nu=wp(nu,e,t,n,r,a),!0;case"dragenter":return ru=wp(ru,e,t,n,r,a),!0;case"mouseover":return au=wp(au,e,t,n,r,a),!0;case"pointerover":var i=a.pointerId;return Vh.set(i,wp(Vh.get(i)||null,e,t,n,r,a)),!0;case"gotpointercapture":return i=a.pointerId,jh.set(i,wp(jh.get(i)||null,e,t,n,r,a)),!0}return!1}function DL(e){var t=nc(e.target);if(t!==null){var n=Tc(t);if(n!==null){if(t=n.tag,t===13){if(t=SL(n),t!==null){e.blockedOn=t,FL(e.priority,function(){LL(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Dg(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=uw(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);rw=r,n.target.dispatchEvent(r),rw=null}else return t=Lm(n),t!==null&&A2(t),e.blockedOn=n,!1;t.shift()}return!0}function vC(e,t,n){Dg(e)&&n.delete(t)}function dG(){lw=!1,nu!==null&&Dg(nu)&&(nu=null),ru!==null&&Dg(ru)&&(ru=null),au!==null&&Dg(au)&&(au=null),Vh.forEach(vC),jh.forEach(vC)}function kp(e,t){e.blockedOn===t&&(e.blockedOn=null,lw||(lw=!0,$i.unstable_scheduleCallback($i.unstable_NormalPriority,dG)))}function Gh(e){function t(a){return kp(a,e)}if(0<$0.length){kp($0[0],e);for(var n=1;n<$0.length;n++){var r=$0[n];r.blockedOn===e&&(r.blockedOn=null)}}for(nu!==null&&kp(nu,e),ru!==null&&kp(ru,e),au!==null&&kp(au,e),Vh.forEach(t),jh.forEach(t),n=0;n<Vl.length;n++)r=Vl[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<Vl.length&&(n=Vl[0],n.blockedOn===null);)DL(n),n.blockedOn===null&&Vl.shift()}var Zf=ml.ReactCurrentBatchConfig,yv=!0;function pG(e,t,n,r){var a=nr,i=Zf.transition;Zf.transition=null;try{nr=1,O2(e,t,n,r)}finally{nr=a,Zf.transition=i}}function hG(e,t,n,r){var a=nr,i=Zf.transition;Zf.transition=null;try{nr=4,O2(e,t,n,r)}finally{nr=a,Zf.transition=i}}function O2(e,t,n,r){if(yv){var a=uw(e,t,n,r);if(a===null)p1(e,t,r,xv,n),gC(e,r);else if(fG(a,e,t,n,r))r.stopPropagation();else if(gC(e,r),t&4&&-1<cG.indexOf(e)){for(;a!==null;){var i=Lm(a);if(i!==null&&IL(i),i=uw(e,t,n,r),i===null&&p1(e,t,r,xv,n),i===a)break;a=i}a!==null&&r.stopPropagation()}else p1(e,t,r,null,n)}}var xv=null;function uw(e,t,n,r){if(xv=null,e=S2(r),e=nc(e),e!==null)if(t=Tc(e),t===null)e=null;else if(n=t.tag,n===13){if(e=SL(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return xv=e,null}function BL(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(tG()){case C2:return 1;case OL:return 4;case vv:case nG:return 16;case ML:return 536870912;default:return 16}default:return 16}}var Wl=null,M2=null,Bg=null;function zL(){if(Bg)return Bg;var e,t=M2,n=t.length,r,a="value"in Wl?Wl.value:Wl.textContent,i=a.length;for(e=0;e<n&&t[e]===a[e];e++);var o=n-e;for(r=1;r<=o&&t[n-r]===a[i-r];r++);return Bg=a.slice(e,1<r?1-r:void 0)}function zg(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function V0(){return!0}function bC(){return!1}function Gi(e){function t(n,r,a,i,o){this._reactName=n,this._targetInst=a,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var s in e)e.hasOwnProperty(s)&&(n=e[s],this[s]=n?n(i):i[s]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?V0:bC,this.isPropagationStopped=bC,this}return Fr(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=V0)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=V0)},persist:function(){},isPersistent:V0}),t}var Id={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},R2=Gi(Id),Im=Fr({},Id,{view:0,detail:0}),mG=Gi(Im),a1,i1,Ep,Cb=Fr({},Im,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:P2,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Ep&&(Ep&&e.type==="mousemove"?(a1=e.screenX-Ep.screenX,i1=e.screenY-Ep.screenY):i1=a1=0,Ep=e),a1)},movementY:function(e){return"movementY"in e?e.movementY:i1}}),yC=Gi(Cb),gG=Fr({},Cb,{dataTransfer:0}),vG=Gi(gG),bG=Fr({},Im,{relatedTarget:0}),o1=Gi(bG),yG=Fr({},Id,{animationName:0,elapsedTime:0,pseudoElement:0}),xG=Gi(yG),_G=Fr({},Id,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),wG=Gi(_G),kG=Fr({},Id,{data:0}),xC=Gi(kG),EG={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},SG={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},CG={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function TG(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=CG[e])?!!t[e]:!1}function P2(){return TG}var AG=Fr({},Im,{key:function(e){if(e.key){var t=EG[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=zg(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?SG[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:P2,charCode:function(e){return e.type==="keypress"?zg(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?zg(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),OG=Gi(AG),MG=Fr({},Cb,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),_C=Gi(MG),RG=Fr({},Im,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:P2}),PG=Gi(RG),IG=Fr({},Id,{propertyName:0,elapsedTime:0,pseudoElement:0}),LG=Gi(IG),NG=Fr({},Cb,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),FG=Gi(NG),DG=[9,13,27,32],I2=cl&&"CompositionEvent"in window,xh=null;cl&&"documentMode"in document&&(xh=document.documentMode);var BG=cl&&"TextEvent"in window&&!xh,UL=cl&&(!I2||xh&&8<xh&&11>=xh),wC=String.fromCharCode(32),kC=!1;function $L(e,t){switch(e){case"keyup":return DG.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function VL(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Of=!1;function zG(e,t){switch(e){case"compositionend":return VL(t);case"keypress":return t.which!==32?null:(kC=!0,wC);case"textInput":return e=t.data,e===wC&&kC?null:e;default:return null}}function UG(e,t){if(Of)return e==="compositionend"||!I2&&$L(e,t)?(e=zL(),Bg=M2=Wl=null,Of=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return UL&&t.locale!=="ko"?null:t.data;default:return null}}var $G={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function EC(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!$G[e.type]:t==="textarea"}function jL(e,t,n,r){xL(r),t=_v(t,"onChange"),0<t.length&&(n=new R2("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var _h=null,Hh=null;function VG(e){e7(e,0)}function Tb(e){var t=Pf(e);if(pL(t))return e}function jG(e,t){if(e==="change")return t}var GL=!1;if(cl){var s1;if(cl){var l1="oninput"in document;if(!l1){var SC=document.createElement("div");SC.setAttribute("oninput","return;"),l1=typeof SC.oninput=="function"}s1=l1}else s1=!1;GL=s1&&(!document.documentMode||9<document.documentMode)}function CC(){_h&&(_h.detachEvent("onpropertychange",HL),Hh=_h=null)}function HL(e){if(e.propertyName==="value"&&Tb(Hh)){var t=[];jL(t,Hh,e,S2(e)),EL(VG,t)}}function GG(e,t,n){e==="focusin"?(CC(),_h=t,Hh=n,_h.attachEvent("onpropertychange",HL)):e==="focusout"&&CC()}function HG(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Tb(Hh)}function WG(e,t){if(e==="click")return Tb(t)}function YG(e,t){if(e==="input"||e==="change")return Tb(t)}function XG(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Xo=typeof Object.is=="function"?Object.is:XG;function Wh(e,t){if(Xo(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var a=n[r];if(!H_.call(t,a)||!Xo(e[a],t[a]))return!1}return!0}function TC(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function AC(e,t){var n=TC(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=TC(n)}}function WL(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?WL(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function YL(){for(var e=window,t=hv();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=hv(e.document)}return t}function L2(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function ZG(e){var t=YL(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&WL(n.ownerDocument.documentElement,n)){if(r!==null&&L2(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var a=n.textContent.length,i=Math.min(r.start,a);r=r.end===void 0?i:Math.min(r.end,a),!e.extend&&i>r&&(a=r,r=i,i=a),a=AC(n,i);var o=AC(n,r);a&&o&&(e.rangeCount!==1||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(a.node,a.offset),e.removeAllRanges(),i>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var qG=cl&&"documentMode"in document&&11>=document.documentMode,Mf=null,cw=null,wh=null,fw=!1;function OC(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;fw||Mf==null||Mf!==hv(r)||(r=Mf,"selectionStart"in r&&L2(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),wh&&Wh(wh,r)||(wh=r,r=_v(cw,"onSelect"),0<r.length&&(t=new R2("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=Mf)))}function j0(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Rf={animationend:j0("Animation","AnimationEnd"),animationiteration:j0("Animation","AnimationIteration"),animationstart:j0("Animation","AnimationStart"),transitionend:j0("Transition","TransitionEnd")},u1={},XL={};cl&&(XL=document.createElement("div").style,"AnimationEvent"in window||(delete Rf.animationend.animation,delete Rf.animationiteration.animation,delete Rf.animationstart.animation),"TransitionEvent"in window||delete Rf.transitionend.transition);function Ab(e){if(u1[e])return u1[e];if(!Rf[e])return e;var t=Rf[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in XL)return u1[e]=t[n];return e}var ZL=Ab("animationend"),qL=Ab("animationiteration"),KL=Ab("animationstart"),QL=Ab("transitionend"),JL=new Map,MC="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function _u(e,t){JL.set(e,t),Cc(t,[e])}for(var c1=0;c1<MC.length;c1++){var f1=MC[c1],KG=f1.toLowerCase(),QG=f1[0].toUpperCase()+f1.slice(1);_u(KG,"on"+QG)}_u(ZL,"onAnimationEnd");_u(qL,"onAnimationIteration");_u(KL,"onAnimationStart");_u("dblclick","onDoubleClick");_u("focusin","onFocus");_u("focusout","onBlur");_u(QL,"onTransitionEnd");cd("onMouseEnter",["mouseout","mouseover"]);cd("onMouseLeave",["mouseout","mouseover"]);cd("onPointerEnter",["pointerout","pointerover"]);cd("onPointerLeave",["pointerout","pointerover"]);Cc("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Cc("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Cc("onBeforeInput",["compositionend","keypress","textInput","paste"]);Cc("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Cc("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Cc("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var sh="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),JG=new Set("cancel close invalid load scroll toggle".split(" ").concat(sh));function RC(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,Kj(r,t,void 0,e),e.currentTarget=null}function e7(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],a=r.event;r=r.listeners;e:{var i=void 0;if(t)for(var o=r.length-1;0<=o;o--){var s=r[o],l=s.instance,u=s.currentTarget;if(s=s.listener,l!==i&&a.isPropagationStopped())break e;RC(a,s,u),i=l}else for(o=0;o<r.length;o++){if(s=r[o],l=s.instance,u=s.currentTarget,s=s.listener,l!==i&&a.isPropagationStopped())break e;RC(a,s,u),i=l}}}if(gv)throw e=ow,gv=!1,ow=null,e}function br(e,t){var n=t[gw];n===void 0&&(n=t[gw]=new Set);var r=e+"__bubble";n.has(r)||(t7(t,e,2,!1),n.add(r))}function d1(e,t,n){var r=0;t&&(r|=4),t7(n,e,r,t)}var G0="_reactListening"+Math.random().toString(36).slice(2);function Yh(e){if(!e[G0]){e[G0]=!0,lL.forEach(function(n){n!=="selectionchange"&&(JG.has(n)||d1(n,!1,e),d1(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[G0]||(t[G0]=!0,d1("selectionchange",!1,t))}}function t7(e,t,n,r){switch(BL(t)){case 1:var a=pG;break;case 4:a=hG;break;default:a=O2}n=a.bind(null,t,n,e),a=void 0,!iw||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(a=!0),r?a!==void 0?e.addEventListener(t,n,{capture:!0,passive:a}):e.addEventListener(t,n,!0):a!==void 0?e.addEventListener(t,n,{passive:a}):e.addEventListener(t,n,!1)}function p1(e,t,n,r,a){var i=r;if((t&1)===0&&(t&2)===0&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var s=r.stateNode.containerInfo;if(s===a||s.nodeType===8&&s.parentNode===a)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===a||l.nodeType===8&&l.parentNode===a))return;o=o.return}for(;s!==null;){if(o=nc(s),o===null)return;if(l=o.tag,l===5||l===6){r=i=o;continue e}s=s.parentNode}}r=r.return}EL(function(){var u=i,c=S2(n),f=[];e:{var d=JL.get(e);if(d!==void 0){var p=R2,h=e;switch(e){case"keypress":if(zg(n)===0)break e;case"keydown":case"keyup":p=OG;break;case"focusin":h="focus",p=o1;break;case"focusout":h="blur",p=o1;break;case"beforeblur":case"afterblur":p=o1;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=yC;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=vG;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=PG;break;case ZL:case qL:case KL:p=xG;break;case QL:p=LG;break;case"scroll":p=mG;break;case"wheel":p=FG;break;case"copy":case"cut":case"paste":p=wG;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=_C}var g=(t&4)!==0,v=!g&&e==="scroll",b=g?d!==null?d+"Capture":null:d;g=[];for(var y=u,x;y!==null;){x=y;var k=x.stateNode;if(x.tag===5&&k!==null&&(x=k,b!==null&&(k=$h(y,b),k!=null&&g.push(Xh(y,k,x)))),v)break;y=y.return}0<g.length&&(d=new p(d,h,null,n,c),f.push({event:d,listeners:g}))}}if((t&7)===0){e:{if(d=e==="mouseover"||e==="pointerover",p=e==="mouseout"||e==="pointerout",d&&n!==rw&&(h=n.relatedTarget||n.fromElement)&&(nc(h)||h[fl]))break e;if((p||d)&&(d=c.window===c?c:(d=c.ownerDocument)?d.defaultView||d.parentWindow:window,p?(h=n.relatedTarget||n.toElement,p=u,h=h?nc(h):null,h!==null&&(v=Tc(h),h!==v||h.tag!==5&&h.tag!==6)&&(h=null)):(p=null,h=u),p!==h)){if(g=yC,k="onMouseLeave",b="onMouseEnter",y="mouse",(e==="pointerout"||e==="pointerover")&&(g=_C,k="onPointerLeave",b="onPointerEnter",y="pointer"),v=p==null?d:Pf(p),x=h==null?d:Pf(h),d=new g(k,y+"leave",p,n,c),d.target=v,d.relatedTarget=x,k=null,nc(c)===u&&(g=new g(b,y+"enter",h,n,c),g.target=x,g.relatedTarget=v,k=g),v=k,p&&h)t:{for(g=p,b=h,y=0,x=g;x;x=nf(x))y++;for(x=0,k=b;k;k=nf(k))x++;for(;0<y-x;)g=nf(g),y--;for(;0<x-y;)b=nf(b),x--;for(;y--;){if(g===b||b!==null&&g===b.alternate)break t;g=nf(g),b=nf(b)}g=null}else g=null;p!==null&&PC(f,d,p,g,!1),h!==null&&v!==null&&PC(f,v,h,g,!0)}}e:{if(d=u?Pf(u):window,p=d.nodeName&&d.nodeName.toLowerCase(),p==="select"||p==="input"&&d.type==="file")var T=jG;else if(EC(d))if(GL)T=YG;else{T=HG;var C=GG}else(p=d.nodeName)&&p.toLowerCase()==="input"&&(d.type==="checkbox"||d.type==="radio")&&(T=WG);if(T&&(T=T(e,u))){jL(f,T,n,c);break e}C&&C(e,d,u),e==="focusout"&&(C=d._wrapperState)&&C.controlled&&d.type==="number"&&Q_(d,"number",d.value)}switch(C=u?Pf(u):window,e){case"focusin":(EC(C)||C.contentEditable==="true")&&(Mf=C,cw=u,wh=null);break;case"focusout":wh=cw=Mf=null;break;case"mousedown":fw=!0;break;case"contextmenu":case"mouseup":case"dragend":fw=!1,OC(f,n,c);break;case"selectionchange":if(qG)break;case"keydown":case"keyup":OC(f,n,c)}var I;if(I2)e:{switch(e){case"compositionstart":var P="onCompositionStart";break e;case"compositionend":P="onCompositionEnd";break e;case"compositionupdate":P="onCompositionUpdate";break e}P=void 0}else Of?$L(e,n)&&(P="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(P="onCompositionStart");P&&(UL&&n.locale!=="ko"&&(Of||P!=="onCompositionStart"?P==="onCompositionEnd"&&Of&&(I=zL()):(Wl=c,M2="value"in Wl?Wl.value:Wl.textContent,Of=!0)),C=_v(u,P),0<C.length&&(P=new xC(P,e,null,n,c),f.push({event:P,listeners:C}),I?P.data=I:(I=VL(n),I!==null&&(P.data=I)))),(I=BG?zG(e,n):UG(e,n))&&(u=_v(u,"onBeforeInput"),0<u.length&&(c=new xC("onBeforeInput","beforeinput",null,n,c),f.push({event:c,listeners:u}),c.data=I))}e7(f,t)})}function Xh(e,t,n){return{instance:e,listener:t,currentTarget:n}}function _v(e,t){for(var n=t+"Capture",r=[];e!==null;){var a=e,i=a.stateNode;a.tag===5&&i!==null&&(a=i,i=$h(e,n),i!=null&&r.unshift(Xh(e,i,a)),i=$h(e,t),i!=null&&r.push(Xh(e,i,a))),e=e.return}return r}function nf(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function PC(e,t,n,r,a){for(var i=t._reactName,o=[];n!==null&&n!==r;){var s=n,l=s.alternate,u=s.stateNode;if(l!==null&&l===r)break;s.tag===5&&u!==null&&(s=u,a?(l=$h(n,i),l!=null&&o.unshift(Xh(n,l,s))):a||(l=$h(n,i),l!=null&&o.push(Xh(n,l,s)))),n=n.return}o.length!==0&&e.push({event:t,listeners:o})}var eH=/\r\n?/g,tH=/\u0000|\uFFFD/g;function IC(e){return(typeof e=="string"?e:""+e).replace(eH,`
`).replace(tH,"")}function H0(e,t,n){if(t=IC(t),IC(e)!==t&&n)throw Error(ot(425))}function wv(){}var dw=null,pw=null;function hw(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var mw=typeof setTimeout=="function"?setTimeout:void 0,nH=typeof clearTimeout=="function"?clearTimeout:void 0,LC=typeof Promise=="function"?Promise:void 0,rH=typeof queueMicrotask=="function"?queueMicrotask:typeof LC!="undefined"?function(e){return LC.resolve(null).then(e).catch(aH)}:mw;function aH(e){setTimeout(function(){throw e})}function h1(e,t){var n=t,r=0;do{var a=n.nextSibling;if(e.removeChild(n),a&&a.nodeType===8)if(n=a.data,n==="/$"){if(r===0){e.removeChild(a),Gh(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=a}while(n);Gh(t)}function iu(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function NC(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Ld=Math.random().toString(36).slice(2),vs="__reactFiber$"+Ld,Zh="__reactProps$"+Ld,fl="__reactContainer$"+Ld,gw="__reactEvents$"+Ld,iH="__reactListeners$"+Ld,oH="__reactHandles$"+Ld;function nc(e){var t=e[vs];if(t)return t;for(var n=e.parentNode;n;){if(t=n[fl]||n[vs]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=NC(e);e!==null;){if(n=e[vs])return n;e=NC(e)}return t}e=n,n=e.parentNode}return null}function Lm(e){return e=e[vs]||e[fl],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Pf(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(ot(33))}function Ob(e){return e[Zh]||null}var vw=[],If=-1;function wu(e){return{current:e}}function xr(e){0>If||(e.current=vw[If],vw[If]=null,If--)}function pr(e,t){If++,vw[If]=e.current,e.current=t}var pu={},qa=wu(pu),Ei=wu(!1),vc=pu;function fd(e,t){var n=e.type.contextTypes;if(!n)return pu;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var a={},i;for(i in n)a[i]=t[i];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Si(e){return e=e.childContextTypes,e!=null}function kv(){xr(Ei),xr(qa)}function FC(e,t,n){if(qa.current!==pu)throw Error(ot(168));pr(qa,t),pr(Ei,n)}function n7(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var a in r)if(!(a in t))throw Error(ot(108,Gj(e)||"Unknown",a));return Fr({},n,r)}function Ev(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||pu,vc=qa.current,pr(qa,e),pr(Ei,Ei.current),!0}function DC(e,t,n){var r=e.stateNode;if(!r)throw Error(ot(169));n?(e=n7(e,t,vc),r.__reactInternalMemoizedMergedChildContext=e,xr(Ei),xr(qa),pr(qa,e)):xr(Ei),pr(Ei,n)}var Zs=null,Mb=!1,m1=!1;function r7(e){Zs===null?Zs=[e]:Zs.push(e)}function sH(e){Mb=!0,r7(e)}function ku(){if(!m1&&Zs!==null){m1=!0;var e=0,t=nr;try{var n=Zs;for(nr=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}Zs=null,Mb=!1}catch(a){throw Zs!==null&&(Zs=Zs.slice(e+1)),AL(C2,ku),a}finally{nr=t,m1=!1}}return null}var Lf=[],Nf=0,Sv=null,Cv=0,fo=[],po=0,bc=null,Js=1,el="";function qu(e,t){Lf[Nf++]=Cv,Lf[Nf++]=Sv,Sv=e,Cv=t}function a7(e,t,n){fo[po++]=Js,fo[po++]=el,fo[po++]=bc,bc=e;var r=Js;e=el;var a=32-Go(r)-1;r&=~(1<<a),n+=1;var i=32-Go(t)+a;if(30<i){var o=a-a%5;i=(r&(1<<o)-1).toString(32),r>>=o,a-=o,Js=1<<32-Go(t)+a|n<<a|r,el=i+e}else Js=1<<i|n<<a|r,el=e}function N2(e){e.return!==null&&(qu(e,1),a7(e,1,0))}function F2(e){for(;e===Sv;)Sv=Lf[--Nf],Lf[Nf]=null,Cv=Lf[--Nf],Lf[Nf]=null;for(;e===bc;)bc=fo[--po],fo[po]=null,el=fo[--po],fo[po]=null,Js=fo[--po],fo[po]=null}var Ui=null,Di=null,Cr=!1,$o=null;function i7(e,t){var n=bo(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function BC(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Ui=e,Di=iu(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Ui=e,Di=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=bc!==null?{id:Js,overflow:el}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=bo(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Ui=e,Di=null,!0):!1;default:return!1}}function bw(e){return(e.mode&1)!==0&&(e.flags&128)===0}function yw(e){if(Cr){var t=Di;if(t){var n=t;if(!BC(e,t)){if(bw(e))throw Error(ot(418));t=iu(n.nextSibling);var r=Ui;t&&BC(e,t)?i7(r,n):(e.flags=e.flags&-4097|2,Cr=!1,Ui=e)}}else{if(bw(e))throw Error(ot(418));e.flags=e.flags&-4097|2,Cr=!1,Ui=e}}}function zC(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Ui=e}function W0(e){if(e!==Ui)return!1;if(!Cr)return zC(e),Cr=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!hw(e.type,e.memoizedProps)),t&&(t=Di)){if(bw(e))throw o7(),Error(ot(418));for(;t;)i7(e,t),t=iu(t.nextSibling)}if(zC(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(ot(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Di=iu(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Di=null}}else Di=Ui?iu(e.stateNode.nextSibling):null;return!0}function o7(){for(var e=Di;e;)e=iu(e.nextSibling)}function dd(){Di=Ui=null,Cr=!1}function D2(e){$o===null?$o=[e]:$o.push(e)}var lH=ml.ReactCurrentBatchConfig;function zo(e,t){if(e&&e.defaultProps){t=Fr({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}var Tv=wu(null),Av=null,Ff=null,B2=null;function z2(){B2=Ff=Av=null}function U2(e){var t=Tv.current;xr(Tv),e._currentValue=t}function xw(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function qf(e,t){Av=e,B2=Ff=null,e=e.dependencies,e!==null&&e.firstContext!==null&&((e.lanes&t)!==0&&(ki=!0),e.firstContext=null)}function wo(e){var t=e._currentValue;if(B2!==e)if(e={context:e,memoizedValue:t,next:null},Ff===null){if(Av===null)throw Error(ot(308));Ff=e,Av.dependencies={lanes:0,firstContext:e}}else Ff=Ff.next=e;return t}var rc=null;function $2(e){rc===null?rc=[e]:rc.push(e)}function s7(e,t,n,r){var a=t.interleaved;return a===null?(n.next=n,$2(t)):(n.next=a.next,a.next=n),t.interleaved=n,dl(e,r)}function dl(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var zl=!1;function V2(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function l7(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function al(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function ou(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,(Un&2)!==0){var a=r.pending;return a===null?t.next=t:(t.next=a.next,a.next=t),r.pending=t,dl(e,n)}return a=r.interleaved,a===null?(t.next=t,$2(r)):(t.next=a.next,a.next=t),r.interleaved=t,dl(e,n)}function Ug(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,T2(e,n)}}function UC(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var a=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?a=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?a=i=t:i=i.next=t}else a=i=t;n={baseState:r.baseState,firstBaseUpdate:a,lastBaseUpdate:i,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Ov(e,t,n,r){var a=e.updateQueue;zl=!1;var i=a.firstBaseUpdate,o=a.lastBaseUpdate,s=a.shared.pending;if(s!==null){a.shared.pending=null;var l=s,u=l.next;l.next=null,o===null?i=u:o.next=u,o=l;var c=e.alternate;c!==null&&(c=c.updateQueue,s=c.lastBaseUpdate,s!==o&&(s===null?c.firstBaseUpdate=u:s.next=u,c.lastBaseUpdate=l))}if(i!==null){var f=a.baseState;o=0,c=u=l=null,s=i;do{var d=s.lane,p=s.eventTime;if((r&d)===d){c!==null&&(c=c.next={eventTime:p,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var h=e,g=s;switch(d=t,p=n,g.tag){case 1:if(h=g.payload,typeof h=="function"){f=h.call(p,f,d);break e}f=h;break e;case 3:h.flags=h.flags&-65537|128;case 0:if(h=g.payload,d=typeof h=="function"?h.call(p,f,d):h,d==null)break e;f=Fr({},f,d);break e;case 2:zl=!0}}s.callback!==null&&s.lane!==0&&(e.flags|=64,d=a.effects,d===null?a.effects=[s]:d.push(s))}else p={eventTime:p,lane:d,tag:s.tag,payload:s.payload,callback:s.callback,next:null},c===null?(u=c=p,l=f):c=c.next=p,o|=d;if(s=s.next,s===null){if(s=a.shared.pending,s===null)break;d=s,s=d.next,d.next=null,a.lastBaseUpdate=d,a.shared.pending=null}}while(1);if(c===null&&(l=f),a.baseState=l,a.firstBaseUpdate=u,a.lastBaseUpdate=c,t=a.shared.interleaved,t!==null){a=t;do o|=a.lane,a=a.next;while(a!==t)}else i===null&&(a.shared.lanes=0);xc|=o,e.lanes=o,e.memoizedState=f}}function $C(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],a=r.callback;if(a!==null){if(r.callback=null,r=n,typeof a!="function")throw Error(ot(191,a));a.call(r)}}}var u7=new sL.Component().refs;function _w(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:Fr({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Rb={isMounted:function(e){return(e=e._reactInternals)?Tc(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=ui(),a=lu(e),i=al(r,a);i.payload=t,n!=null&&(i.callback=n),t=ou(e,i,a),t!==null&&(Ho(t,e,a,r),Ug(t,e,a))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=ui(),a=lu(e),i=al(r,a);i.tag=1,i.payload=t,n!=null&&(i.callback=n),t=ou(e,i,a),t!==null&&(Ho(t,e,a,r),Ug(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ui(),r=lu(e),a=al(n,r);a.tag=2,t!=null&&(a.callback=t),t=ou(e,a,r),t!==null&&(Ho(t,e,r,n),Ug(t,e,r))}};function VC(e,t,n,r,a,i,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,i,o):t.prototype&&t.prototype.isPureReactComponent?!Wh(n,r)||!Wh(a,i):!0}function c7(e,t,n){var r=!1,a=pu,i=t.contextType;return typeof i=="object"&&i!==null?i=wo(i):(a=Si(t)?vc:qa.current,r=t.contextTypes,i=(r=r!=null)?fd(e,a):pu),t=new t(n,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Rb,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=i),t}function jC(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Rb.enqueueReplaceState(t,t.state,null)}function ww(e,t,n,r){var a=e.stateNode;a.props=n,a.state=e.memoizedState,a.refs=u7,V2(e);var i=t.contextType;typeof i=="object"&&i!==null?a.context=wo(i):(i=Si(t)?vc:qa.current,a.context=fd(e,i)),a.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(_w(e,t,i,n),a.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(t=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),t!==a.state&&Rb.enqueueReplaceState(a,a.state,null),Ov(e,n,a,r),a.state=e.memoizedState),typeof a.componentDidMount=="function"&&(e.flags|=4194308)}function Sp(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(ot(309));var r=n.stateNode}if(!r)throw Error(ot(147,e));var a=r,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(o){var s=a.refs;s===u7&&(s=a.refs={}),o===null?delete s[i]:s[i]=o},t._stringRef=i,t)}if(typeof e!="string")throw Error(ot(284));if(!n._owner)throw Error(ot(290,e))}return e}function Y0(e,t){throw e=Object.prototype.toString.call(t),Error(ot(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function GC(e){var t=e._init;return t(e._payload)}function f7(e){function t(b,y){if(e){var x=b.deletions;x===null?(b.deletions=[y],b.flags|=16):x.push(y)}}function n(b,y){if(!e)return null;for(;y!==null;)t(b,y),y=y.sibling;return null}function r(b,y){for(b=new Map;y!==null;)y.key!==null?b.set(y.key,y):b.set(y.index,y),y=y.sibling;return b}function a(b,y){return b=uu(b,y),b.index=0,b.sibling=null,b}function i(b,y,x){return b.index=x,e?(x=b.alternate,x!==null?(x=x.index,x<y?(b.flags|=2,y):x):(b.flags|=2,y)):(b.flags|=1048576,y)}function o(b){return e&&b.alternate===null&&(b.flags|=2),b}function s(b,y,x,k){return y===null||y.tag!==6?(y=w1(x,b.mode,k),y.return=b,y):(y=a(y,x),y.return=b,y)}function l(b,y,x,k){var T=x.type;return T===Af?c(b,y,x.props.children,k,x.key):y!==null&&(y.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===Bl&&GC(T)===y.type)?(k=a(y,x.props),k.ref=Sp(b,y,x),k.return=b,k):(k=Wg(x.type,x.key,x.props,null,b.mode,k),k.ref=Sp(b,y,x),k.return=b,k)}function u(b,y,x,k){return y===null||y.tag!==4||y.stateNode.containerInfo!==x.containerInfo||y.stateNode.implementation!==x.implementation?(y=k1(x,b.mode,k),y.return=b,y):(y=a(y,x.children||[]),y.return=b,y)}function c(b,y,x,k,T){return y===null||y.tag!==7?(y=fc(x,b.mode,k,T),y.return=b,y):(y=a(y,x),y.return=b,y)}function f(b,y,x){if(typeof y=="string"&&y!==""||typeof y=="number")return y=w1(""+y,b.mode,x),y.return=b,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case F0:return x=Wg(y.type,y.key,y.props,null,b.mode,x),x.ref=Sp(b,null,y),x.return=b,x;case Tf:return y=k1(y,b.mode,x),y.return=b,y;case Bl:var k=y._init;return f(b,k(y._payload),x)}if(ih(y)||xp(y))return y=fc(y,b.mode,x,null),y.return=b,y;Y0(b,y)}return null}function d(b,y,x,k){var T=y!==null?y.key:null;if(typeof x=="string"&&x!==""||typeof x=="number")return T!==null?null:s(b,y,""+x,k);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case F0:return x.key===T?l(b,y,x,k):null;case Tf:return x.key===T?u(b,y,x,k):null;case Bl:return T=x._init,d(b,y,T(x._payload),k)}if(ih(x)||xp(x))return T!==null?null:c(b,y,x,k,null);Y0(b,x)}return null}function p(b,y,x,k,T){if(typeof k=="string"&&k!==""||typeof k=="number")return b=b.get(x)||null,s(y,b,""+k,T);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case F0:return b=b.get(k.key===null?x:k.key)||null,l(y,b,k,T);case Tf:return b=b.get(k.key===null?x:k.key)||null,u(y,b,k,T);case Bl:var C=k._init;return p(b,y,x,C(k._payload),T)}if(ih(k)||xp(k))return b=b.get(x)||null,c(y,b,k,T,null);Y0(y,k)}return null}function h(b,y,x,k){for(var T=null,C=null,I=y,P=y=0,j=null;I!==null&&P<x.length;P++){I.index>P?(j=I,I=null):j=I.sibling;var A=d(b,I,x[P],k);if(A===null){I===null&&(I=j);break}e&&I&&A.alternate===null&&t(b,I),y=i(A,y,P),C===null?T=A:C.sibling=A,C=A,I=j}if(P===x.length)return n(b,I),Cr&&qu(b,P),T;if(I===null){for(;P<x.length;P++)I=f(b,x[P],k),I!==null&&(y=i(I,y,P),C===null?T=I:C.sibling=I,C=I);return Cr&&qu(b,P),T}for(I=r(b,I);P<x.length;P++)j=p(I,b,P,x[P],k),j!==null&&(e&&j.alternate!==null&&I.delete(j.key===null?P:j.key),y=i(j,y,P),C===null?T=j:C.sibling=j,C=j);return e&&I.forEach(function(S){return t(b,S)}),Cr&&qu(b,P),T}function g(b,y,x,k){var T=xp(x);if(typeof T!="function")throw Error(ot(150));if(x=T.call(x),x==null)throw Error(ot(151));for(var C=T=null,I=y,P=y=0,j=null,A=x.next();I!==null&&!A.done;P++,A=x.next()){I.index>P?(j=I,I=null):j=I.sibling;var S=d(b,I,A.value,k);if(S===null){I===null&&(I=j);break}e&&I&&S.alternate===null&&t(b,I),y=i(S,y,P),C===null?T=S:C.sibling=S,C=S,I=j}if(A.done)return n(b,I),Cr&&qu(b,P),T;if(I===null){for(;!A.done;P++,A=x.next())A=f(b,A.value,k),A!==null&&(y=i(A,y,P),C===null?T=A:C.sibling=A,C=A);return Cr&&qu(b,P),T}for(I=r(b,I);!A.done;P++,A=x.next())A=p(I,b,P,A.value,k),A!==null&&(e&&A.alternate!==null&&I.delete(A.key===null?P:A.key),y=i(A,y,P),C===null?T=A:C.sibling=A,C=A);return e&&I.forEach(function(M){return t(b,M)}),Cr&&qu(b,P),T}function v(b,y,x,k){if(typeof x=="object"&&x!==null&&x.type===Af&&x.key===null&&(x=x.props.children),typeof x=="object"&&x!==null){switch(x.$$typeof){case F0:e:{for(var T=x.key,C=y;C!==null;){if(C.key===T){if(T=x.type,T===Af){if(C.tag===7){n(b,C.sibling),y=a(C,x.props.children),y.return=b,b=y;break e}}else if(C.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===Bl&&GC(T)===C.type){n(b,C.sibling),y=a(C,x.props),y.ref=Sp(b,C,x),y.return=b,b=y;break e}n(b,C);break}else t(b,C);C=C.sibling}x.type===Af?(y=fc(x.props.children,b.mode,k,x.key),y.return=b,b=y):(k=Wg(x.type,x.key,x.props,null,b.mode,k),k.ref=Sp(b,y,x),k.return=b,b=k)}return o(b);case Tf:e:{for(C=x.key;y!==null;){if(y.key===C)if(y.tag===4&&y.stateNode.containerInfo===x.containerInfo&&y.stateNode.implementation===x.implementation){n(b,y.sibling),y=a(y,x.children||[]),y.return=b,b=y;break e}else{n(b,y);break}else t(b,y);y=y.sibling}y=k1(x,b.mode,k),y.return=b,b=y}return o(b);case Bl:return C=x._init,v(b,y,C(x._payload),k)}if(ih(x))return h(b,y,x,k);if(xp(x))return g(b,y,x,k);Y0(b,x)}return typeof x=="string"&&x!==""||typeof x=="number"?(x=""+x,y!==null&&y.tag===6?(n(b,y.sibling),y=a(y,x),y.return=b,b=y):(n(b,y),y=w1(x,b.mode,k),y.return=b,b=y),o(b)):n(b,y)}return v}var pd=f7(!0),d7=f7(!1),Nm={},Es=wu(Nm),qh=wu(Nm),Kh=wu(Nm);function ac(e){if(e===Nm)throw Error(ot(174));return e}function j2(e,t){switch(pr(Kh,t),pr(qh,e),pr(Es,Nm),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:ew(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=ew(t,e)}xr(Es),pr(Es,t)}function hd(){xr(Es),xr(qh),xr(Kh)}function p7(e){ac(Kh.current);var t=ac(Es.current),n=ew(t,e.type);t!==n&&(pr(qh,e),pr(Es,n))}function G2(e){qh.current===e&&(xr(Es),xr(qh))}var Ir=wu(0);function Mv(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var g1=[];function H2(){for(var e=0;e<g1.length;e++)g1[e]._workInProgressVersionPrimary=null;g1.length=0}var $g=ml.ReactCurrentDispatcher,v1=ml.ReactCurrentBatchConfig,yc=0,Nr=null,pa=null,_a=null,Rv=!1,kh=!1,Qh=0,uH=0;function Va(){throw Error(ot(321))}function W2(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Xo(e[n],t[n]))return!1;return!0}function Y2(e,t,n,r,a,i){if(yc=i,Nr=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,$g.current=e===null||e.memoizedState===null?pH:hH,e=n(r,a),kh){i=0;do{if(kh=!1,Qh=0,25<=i)throw Error(ot(301));i+=1,_a=pa=null,t.updateQueue=null,$g.current=mH,e=n(r,a)}while(kh)}if($g.current=Pv,t=pa!==null&&pa.next!==null,yc=0,_a=pa=Nr=null,Rv=!1,t)throw Error(ot(300));return e}function X2(){var e=Qh!==0;return Qh=0,e}function hs(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return _a===null?Nr.memoizedState=_a=e:_a=_a.next=e,_a}function ko(){if(pa===null){var e=Nr.alternate;e=e!==null?e.memoizedState:null}else e=pa.next;var t=_a===null?Nr.memoizedState:_a.next;if(t!==null)_a=t,pa=e;else{if(e===null)throw Error(ot(310));pa=e,e={memoizedState:pa.memoizedState,baseState:pa.baseState,baseQueue:pa.baseQueue,queue:pa.queue,next:null},_a===null?Nr.memoizedState=_a=e:_a=_a.next=e}return _a}function Jh(e,t){return typeof t=="function"?t(e):t}function b1(e){var t=ko(),n=t.queue;if(n===null)throw Error(ot(311));n.lastRenderedReducer=e;var r=pa,a=r.baseQueue,i=n.pending;if(i!==null){if(a!==null){var o=a.next;a.next=i.next,i.next=o}r.baseQueue=a=i,n.pending=null}if(a!==null){i=a.next,r=r.baseState;var s=o=null,l=null,u=i;do{var c=u.lane;if((yc&c)===c)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var f={lane:c,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(s=l=f,o=r):l=l.next=f,Nr.lanes|=c,xc|=c}u=u.next}while(u!==null&&u!==i);l===null?o=r:l.next=s,Xo(r,t.memoizedState)||(ki=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=l,n.lastRenderedState=r}if(e=n.interleaved,e!==null){a=e;do i=a.lane,Nr.lanes|=i,xc|=i,a=a.next;while(a!==e)}else a===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function y1(e){var t=ko(),n=t.queue;if(n===null)throw Error(ot(311));n.lastRenderedReducer=e;var r=n.dispatch,a=n.pending,i=t.memoizedState;if(a!==null){n.pending=null;var o=a=a.next;do i=e(i,o.action),o=o.next;while(o!==a);Xo(i,t.memoizedState)||(ki=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),n.lastRenderedState=i}return[i,r]}function h7(){}function m7(e,t){var n=Nr,r=ko(),a=t(),i=!Xo(r.memoizedState,a);if(i&&(r.memoizedState=a,ki=!0),r=r.queue,Z2(b7.bind(null,n,r,e),[e]),r.getSnapshot!==t||i||_a!==null&&_a.memoizedState.tag&1){if(n.flags|=2048,em(9,v7.bind(null,n,r,a,t),void 0,null),wa===null)throw Error(ot(349));(yc&30)!==0||g7(n,t,a)}return a}function g7(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Nr.updateQueue,t===null?(t={lastEffect:null,stores:null},Nr.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function v7(e,t,n,r){t.value=n,t.getSnapshot=r,y7(t)&&x7(e)}function b7(e,t,n){return n(function(){y7(t)&&x7(e)})}function y7(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Xo(e,n)}catch{return!0}}function x7(e){var t=dl(e,1);t!==null&&Ho(t,e,1,-1)}function HC(e){var t=hs();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Jh,lastRenderedState:e},t.queue=e,e=e.dispatch=dH.bind(null,Nr,e),[t.memoizedState,e]}function em(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=Nr.updateQueue,t===null?(t={lastEffect:null,stores:null},Nr.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function _7(){return ko().memoizedState}function Vg(e,t,n,r){var a=hs();Nr.flags|=e,a.memoizedState=em(1|t,n,void 0,r===void 0?null:r)}function Pb(e,t,n,r){var a=ko();r=r===void 0?null:r;var i=void 0;if(pa!==null){var o=pa.memoizedState;if(i=o.destroy,r!==null&&W2(r,o.deps)){a.memoizedState=em(t,n,i,r);return}}Nr.flags|=e,a.memoizedState=em(1|t,n,i,r)}function WC(e,t){return Vg(8390656,8,e,t)}function Z2(e,t){return Pb(2048,8,e,t)}function w7(e,t){return Pb(4,2,e,t)}function k7(e,t){return Pb(4,4,e,t)}function E7(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function S7(e,t,n){return n=n!=null?n.concat([e]):null,Pb(4,4,E7.bind(null,t,e),n)}function q2(){}function C7(e,t){var n=ko();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&W2(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function T7(e,t){var n=ko();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&W2(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function A7(e,t,n){return(yc&21)===0?(e.baseState&&(e.baseState=!1,ki=!0),e.memoizedState=n):(Xo(n,t)||(n=RL(),Nr.lanes|=n,xc|=n,e.baseState=!0),t)}function cH(e,t){var n=nr;nr=n!==0&&4>n?n:4,e(!0);var r=v1.transition;v1.transition={};try{e(!1),t()}finally{nr=n,v1.transition=r}}function O7(){return ko().memoizedState}function fH(e,t,n){var r=lu(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},M7(e))R7(t,n);else if(n=s7(e,t,n,r),n!==null){var a=ui();Ho(n,e,r,a),P7(n,t,r)}}function dH(e,t,n){var r=lu(e),a={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(M7(e))R7(t,a);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var o=t.lastRenderedState,s=i(o,n);if(a.hasEagerState=!0,a.eagerState=s,Xo(s,o)){var l=t.interleaved;l===null?(a.next=a,$2(t)):(a.next=l.next,l.next=a),t.interleaved=a;return}}catch{}finally{}n=s7(e,t,a,r),n!==null&&(a=ui(),Ho(n,e,r,a),P7(n,t,r))}}function M7(e){var t=e.alternate;return e===Nr||t!==null&&t===Nr}function R7(e,t){kh=Rv=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function P7(e,t,n){if((n&4194240)!==0){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,T2(e,n)}}var Pv={readContext:wo,useCallback:Va,useContext:Va,useEffect:Va,useImperativeHandle:Va,useInsertionEffect:Va,useLayoutEffect:Va,useMemo:Va,useReducer:Va,useRef:Va,useState:Va,useDebugValue:Va,useDeferredValue:Va,useTransition:Va,useMutableSource:Va,useSyncExternalStore:Va,useId:Va,unstable_isNewReconciler:!1},pH={readContext:wo,useCallback:function(e,t){return hs().memoizedState=[e,t===void 0?null:t],e},useContext:wo,useEffect:WC,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,Vg(4194308,4,E7.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Vg(4194308,4,e,t)},useInsertionEffect:function(e,t){return Vg(4,2,e,t)},useMemo:function(e,t){var n=hs();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=hs();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=fH.bind(null,Nr,e),[r.memoizedState,e]},useRef:function(e){var t=hs();return e={current:e},t.memoizedState=e},useState:HC,useDebugValue:q2,useDeferredValue:function(e){return hs().memoizedState=e},useTransition:function(){var e=HC(!1),t=e[0];return e=cH.bind(null,e[1]),hs().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=Nr,a=hs();if(Cr){if(n===void 0)throw Error(ot(407));n=n()}else{if(n=t(),wa===null)throw Error(ot(349));(yc&30)!==0||g7(r,t,n)}a.memoizedState=n;var i={value:n,getSnapshot:t};return a.queue=i,WC(b7.bind(null,r,i,e),[e]),r.flags|=2048,em(9,v7.bind(null,r,i,n,t),void 0,null),n},useId:function(){var e=hs(),t=wa.identifierPrefix;if(Cr){var n=el,r=Js;n=(r&~(1<<32-Go(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=Qh++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=uH++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},hH={readContext:wo,useCallback:C7,useContext:wo,useEffect:Z2,useImperativeHandle:S7,useInsertionEffect:w7,useLayoutEffect:k7,useMemo:T7,useReducer:b1,useRef:_7,useState:function(){return b1(Jh)},useDebugValue:q2,useDeferredValue:function(e){var t=ko();return A7(t,pa.memoizedState,e)},useTransition:function(){var e=b1(Jh)[0],t=ko().memoizedState;return[e,t]},useMutableSource:h7,useSyncExternalStore:m7,useId:O7,unstable_isNewReconciler:!1},mH={readContext:wo,useCallback:C7,useContext:wo,useEffect:Z2,useImperativeHandle:S7,useInsertionEffect:w7,useLayoutEffect:k7,useMemo:T7,useReducer:y1,useRef:_7,useState:function(){return y1(Jh)},useDebugValue:q2,useDeferredValue:function(e){var t=ko();return pa===null?t.memoizedState=e:A7(t,pa.memoizedState,e)},useTransition:function(){var e=y1(Jh)[0],t=ko().memoizedState;return[e,t]},useMutableSource:h7,useSyncExternalStore:m7,useId:O7,unstable_isNewReconciler:!1};function md(e,t){try{var n="",r=t;do n+=jj(r),r=r.return;while(r);var a=n}catch(i){a=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:a,digest:null}}function x1(e,t,n){return{value:e,source:null,stack:n!=null?n:null,digest:t!=null?t:null}}function kw(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var gH=typeof WeakMap=="function"?WeakMap:Map;function I7(e,t,n){n=al(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Lv||(Lv=!0,Iw=r),kw(e,t)},n}function L7(e,t,n){n=al(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var a=t.value;n.payload=function(){return r(a)},n.callback=function(){kw(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){kw(e,t),typeof r!="function"&&(su===null?su=new Set([this]):su.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),n}function YC(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new gH;var a=new Set;r.set(t,a)}else a=r.get(t),a===void 0&&(a=new Set,r.set(t,a));a.has(n)||(a.add(n),e=MH.bind(null,e,t,n),t.then(e,e))}function XC(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function ZC(e,t,n,r,a){return(e.mode&1)===0?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=al(-1,1),t.tag=2,ou(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=a,e)}var vH=ml.ReactCurrentOwner,ki=!1;function oi(e,t,n,r){t.child=e===null?d7(t,null,n,r):pd(t,e.child,n,r)}function qC(e,t,n,r,a){n=n.render;var i=t.ref;return qf(t,a),r=Y2(e,t,n,r,i,a),n=X2(),e!==null&&!ki?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,pl(e,t,a)):(Cr&&n&&N2(t),t.flags|=1,oi(e,t,r,a),t.child)}function KC(e,t,n,r,a){if(e===null){var i=n.type;return typeof i=="function"&&!aE(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=i,N7(e,t,i,r,a)):(e=Wg(n.type,null,r,t,t.mode,a),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,(e.lanes&a)===0){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:Wh,n(o,r)&&e.ref===t.ref)return pl(e,t,a)}return t.flags|=1,e=uu(i,r),e.ref=t.ref,e.return=t,t.child=e}function N7(e,t,n,r,a){if(e!==null){var i=e.memoizedProps;if(Wh(i,r)&&e.ref===t.ref)if(ki=!1,t.pendingProps=r=i,(e.lanes&a)!==0)(e.flags&131072)!==0&&(ki=!0);else return t.lanes=e.lanes,pl(e,t,a)}return Ew(e,t,n,r,a)}function F7(e,t,n){var r=t.pendingProps,a=r.children,i=e!==null?e.memoizedState:null;if(r.mode==="hidden")if((t.mode&1)===0)t.memoizedState={baseLanes:0,cachePool:null,transitions:null},pr(Bf,Ni),Ni|=n;else{if((n&1073741824)===0)return e=i!==null?i.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,pr(Bf,Ni),Ni|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,pr(Bf,Ni),Ni|=r}else i!==null?(r=i.baseLanes|n,t.memoizedState=null):r=n,pr(Bf,Ni),Ni|=r;return oi(e,t,a,n),t.child}function D7(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Ew(e,t,n,r,a){var i=Si(n)?vc:qa.current;return i=fd(t,i),qf(t,a),n=Y2(e,t,n,r,i,a),r=X2(),e!==null&&!ki?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,pl(e,t,a)):(Cr&&r&&N2(t),t.flags|=1,oi(e,t,n,a),t.child)}function QC(e,t,n,r,a){if(Si(n)){var i=!0;Ev(t)}else i=!1;if(qf(t,a),t.stateNode===null)jg(e,t),c7(t,n,r),ww(t,n,r,a),r=!0;else if(e===null){var o=t.stateNode,s=t.memoizedProps;o.props=s;var l=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=wo(u):(u=Si(n)?vc:qa.current,u=fd(t,u));var c=n.getDerivedStateFromProps,f=typeof c=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(s!==r||l!==u)&&jC(t,o,r,u),zl=!1;var d=t.memoizedState;o.state=d,Ov(t,r,o,a),l=t.memoizedState,s!==r||d!==l||Ei.current||zl?(typeof c=="function"&&(_w(t,n,c,r),l=t.memoizedState),(s=zl||VC(t,n,s,r,d,l,u))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),o.props=r,o.state=l,o.context=u,r=s):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,l7(e,t),s=t.memoizedProps,u=t.type===t.elementType?s:zo(t.type,s),o.props=u,f=t.pendingProps,d=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=wo(l):(l=Si(n)?vc:qa.current,l=fd(t,l));var p=n.getDerivedStateFromProps;(c=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(s!==f||d!==l)&&jC(t,o,r,l),zl=!1,d=t.memoizedState,o.state=d,Ov(t,r,o,a);var h=t.memoizedState;s!==f||d!==h||Ei.current||zl?(typeof p=="function"&&(_w(t,n,p,r),h=t.memoizedState),(u=zl||VC(t,n,u,r,d,h,l)||!1)?(c||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,h,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,h,l)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=h),o.props=r,o.state=h,o.context=l,r=u):(typeof o.componentDidUpdate!="function"||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),r=!1)}return Sw(e,t,n,r,i,a)}function Sw(e,t,n,r,a,i){D7(e,t);var o=(t.flags&128)!==0;if(!r&&!o)return a&&DC(t,n,!1),pl(e,t,i);r=t.stateNode,vH.current=t;var s=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&o?(t.child=pd(t,e.child,null,i),t.child=pd(t,null,s,i)):oi(e,t,s,i),t.memoizedState=r.state,a&&DC(t,n,!0),t.child}function B7(e){var t=e.stateNode;t.pendingContext?FC(e,t.pendingContext,t.pendingContext!==t.context):t.context&&FC(e,t.context,!1),j2(e,t.containerInfo)}function JC(e,t,n,r,a){return dd(),D2(a),t.flags|=256,oi(e,t,n,r),t.child}var Cw={dehydrated:null,treeContext:null,retryLane:0};function Tw(e){return{baseLanes:e,cachePool:null,transitions:null}}function z7(e,t,n){var r=t.pendingProps,a=Ir.current,i=!1,o=(t.flags&128)!==0,s;if((s=o)||(s=e!==null&&e.memoizedState===null?!1:(a&2)!==0),s?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(a|=1),pr(Ir,a&1),e===null)return yw(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?((t.mode&1)===0?t.lanes=1:e.data==="$!"?t.lanes=8:t.lanes=1073741824,null):(o=r.children,e=r.fallback,i?(r=t.mode,i=t.child,o={mode:"hidden",children:o},(r&1)===0&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Nb(o,r,0,null),e=fc(e,r,n,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=Tw(n),t.memoizedState=Cw,e):K2(t,o));if(a=e.memoizedState,a!==null&&(s=a.dehydrated,s!==null))return bH(e,t,o,r,s,a,n);if(i){i=r.fallback,o=t.mode,a=e.child,s=a.sibling;var l={mode:"hidden",children:r.children};return(o&1)===0&&t.child!==a?(r=t.child,r.childLanes=0,r.pendingProps=l,t.deletions=null):(r=uu(a,l),r.subtreeFlags=a.subtreeFlags&14680064),s!==null?i=uu(s,i):(i=fc(i,o,n,null),i.flags|=2),i.return=t,r.return=t,r.sibling=i,t.child=r,r=i,i=t.child,o=e.child.memoizedState,o=o===null?Tw(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=e.childLanes&~n,t.memoizedState=Cw,r}return i=e.child,e=i.sibling,r=uu(i,{mode:"visible",children:r.children}),(t.mode&1)===0&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function K2(e,t){return t=Nb({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function X0(e,t,n,r){return r!==null&&D2(r),pd(t,e.child,null,n),e=K2(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function bH(e,t,n,r,a,i,o){if(n)return t.flags&256?(t.flags&=-257,r=x1(Error(ot(422))),X0(e,t,o,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=r.fallback,a=t.mode,r=Nb({mode:"visible",children:r.children},a,0,null),i=fc(i,a,o,null),i.flags|=2,r.return=t,i.return=t,r.sibling=i,t.child=r,(t.mode&1)!==0&&pd(t,e.child,null,o),t.child.memoizedState=Tw(o),t.memoizedState=Cw,i);if((t.mode&1)===0)return X0(e,t,o,null);if(a.data==="$!"){if(r=a.nextSibling&&a.nextSibling.dataset,r)var s=r.dgst;return r=s,i=Error(ot(419)),r=x1(i,r,void 0),X0(e,t,o,r)}if(s=(o&e.childLanes)!==0,ki||s){if(r=wa,r!==null){switch(o&-o){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=(a&(r.suspendedLanes|o))!==0?0:a,a!==0&&a!==i.retryLane&&(i.retryLane=a,dl(e,a),Ho(r,e,a,-1))}return rE(),r=x1(Error(ot(421))),X0(e,t,o,r)}return a.data==="$?"?(t.flags|=128,t.child=e.child,t=RH.bind(null,e),a._reactRetry=t,null):(e=i.treeContext,Di=iu(a.nextSibling),Ui=t,Cr=!0,$o=null,e!==null&&(fo[po++]=Js,fo[po++]=el,fo[po++]=bc,Js=e.id,el=e.overflow,bc=t),t=K2(t,r.children),t.flags|=4096,t)}function eT(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),xw(e.return,t,n)}function _1(e,t,n,r,a){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:a}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=a)}function U7(e,t,n){var r=t.pendingProps,a=r.revealOrder,i=r.tail;if(oi(e,t,r.children,n),r=Ir.current,(r&2)!==0)r=r&1|2,t.flags|=128;else{if(e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&eT(e,n,t);else if(e.tag===19)eT(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(pr(Ir,r),(t.mode&1)===0)t.memoizedState=null;else switch(a){case"forwards":for(n=t.child,a=null;n!==null;)e=n.alternate,e!==null&&Mv(e)===null&&(a=n),n=n.sibling;n=a,n===null?(a=t.child,t.child=null):(a=n.sibling,n.sibling=null),_1(t,!1,a,n,i);break;case"backwards":for(n=null,a=t.child,t.child=null;a!==null;){if(e=a.alternate,e!==null&&Mv(e)===null){t.child=a;break}e=a.sibling,a.sibling=n,n=a,a=e}_1(t,!0,n,null,i);break;case"together":_1(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function jg(e,t){(t.mode&1)===0&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function pl(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),xc|=t.lanes,(n&t.childLanes)===0)return null;if(e!==null&&t.child!==e.child)throw Error(ot(153));if(t.child!==null){for(e=t.child,n=uu(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=uu(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function yH(e,t,n){switch(t.tag){case 3:B7(t),dd();break;case 5:p7(t);break;case 1:Si(t.type)&&Ev(t);break;case 4:j2(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,a=t.memoizedProps.value;pr(Tv,r._currentValue),r._currentValue=a;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(pr(Ir,Ir.current&1),t.flags|=128,null):(n&t.child.childLanes)!==0?z7(e,t,n):(pr(Ir,Ir.current&1),e=pl(e,t,n),e!==null?e.sibling:null);pr(Ir,Ir.current&1);break;case 19:if(r=(n&t.childLanes)!==0,(e.flags&128)!==0){if(r)return U7(e,t,n);t.flags|=128}if(a=t.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),pr(Ir,Ir.current),r)break;return null;case 22:case 23:return t.lanes=0,F7(e,t,n)}return pl(e,t,n)}var $7,Aw,V7,j7;$7=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Aw=function(){};V7=function(e,t,n,r){var a=e.memoizedProps;if(a!==r){e=t.stateNode,ac(Es.current);var i=null;switch(n){case"input":a=q_(e,a),r=q_(e,r),i=[];break;case"select":a=Fr({},a,{value:void 0}),r=Fr({},r,{value:void 0}),i=[];break;case"textarea":a=J_(e,a),r=J_(e,r),i=[];break;default:typeof a.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=wv)}tw(n,r);var o;n=null;for(u in a)if(!r.hasOwnProperty(u)&&a.hasOwnProperty(u)&&a[u]!=null)if(u==="style"){var s=a[u];for(o in s)s.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(zh.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in r){var l=r[u];if(s=a!=null?a[u]:void 0,r.hasOwnProperty(u)&&l!==s&&(l!=null||s!=null))if(u==="style")if(s){for(o in s)!s.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&s[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(i||(i=[]),i.push(u,n)),n=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,s=s?s.__html:void 0,l!=null&&s!==l&&(i=i||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(i=i||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(zh.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&br("scroll",e),i||s===l||(i=[])):(i=i||[]).push(u,l))}n&&(i=i||[]).push("style",n);var u=i;(t.updateQueue=u)&&(t.flags|=4)}};j7=function(e,t,n,r){n!==r&&(t.flags|=4)};function Cp(e,t){if(!Cr)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function ja(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var a=e.child;a!==null;)n|=a.lanes|a.childLanes,r|=a.subtreeFlags&14680064,r|=a.flags&14680064,a.return=e,a=a.sibling;else for(a=e.child;a!==null;)n|=a.lanes|a.childLanes,r|=a.subtreeFlags,r|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function xH(e,t,n){var r=t.pendingProps;switch(F2(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ja(t),null;case 1:return Si(t.type)&&kv(),ja(t),null;case 3:return r=t.stateNode,hd(),xr(Ei),xr(qa),H2(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(W0(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,$o!==null&&(Fw($o),$o=null))),Aw(e,t),ja(t),null;case 5:G2(t);var a=ac(Kh.current);if(n=t.type,e!==null&&t.stateNode!=null)V7(e,t,n,r,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(ot(166));return ja(t),null}if(e=ac(Es.current),W0(t)){r=t.stateNode,n=t.type;var i=t.memoizedProps;switch(r[vs]=t,r[Zh]=i,e=(t.mode&1)!==0,n){case"dialog":br("cancel",r),br("close",r);break;case"iframe":case"object":case"embed":br("load",r);break;case"video":case"audio":for(a=0;a<sh.length;a++)br(sh[a],r);break;case"source":br("error",r);break;case"img":case"image":case"link":br("error",r),br("load",r);break;case"details":br("toggle",r);break;case"input":uC(r,i),br("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},br("invalid",r);break;case"textarea":fC(r,i),br("invalid",r)}tw(n,i),a=null;for(var o in i)if(i.hasOwnProperty(o)){var s=i[o];o==="children"?typeof s=="string"?r.textContent!==s&&(i.suppressHydrationWarning!==!0&&H0(r.textContent,s,e),a=["children",s]):typeof s=="number"&&r.textContent!==""+s&&(i.suppressHydrationWarning!==!0&&H0(r.textContent,s,e),a=["children",""+s]):zh.hasOwnProperty(o)&&s!=null&&o==="onScroll"&&br("scroll",r)}switch(n){case"input":D0(r),cC(r,i,!0);break;case"textarea":D0(r),dC(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=wv)}r=a,t.updateQueue=r,r!==null&&(t.flags|=4)}else{o=a.nodeType===9?a:a.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=gL(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=o.createElement(n,{is:r.is}):(e=o.createElement(n),n==="select"&&(o=e,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):e=o.createElementNS(e,n),e[vs]=t,e[Zh]=r,$7(e,t,!1,!1),t.stateNode=e;e:{switch(o=nw(n,r),n){case"dialog":br("cancel",e),br("close",e),a=r;break;case"iframe":case"object":case"embed":br("load",e),a=r;break;case"video":case"audio":for(a=0;a<sh.length;a++)br(sh[a],e);a=r;break;case"source":br("error",e),a=r;break;case"img":case"image":case"link":br("error",e),br("load",e),a=r;break;case"details":br("toggle",e),a=r;break;case"input":uC(e,r),a=q_(e,r),br("invalid",e);break;case"option":a=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},a=Fr({},r,{value:void 0}),br("invalid",e);break;case"textarea":fC(e,r),a=J_(e,r),br("invalid",e);break;default:a=r}tw(n,a),s=a;for(i in s)if(s.hasOwnProperty(i)){var l=s[i];i==="style"?yL(e,l):i==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&vL(e,l)):i==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Uh(e,l):typeof l=="number"&&Uh(e,""+l):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(zh.hasOwnProperty(i)?l!=null&&i==="onScroll"&&br("scroll",e):l!=null&&_2(e,i,l,o))}switch(n){case"input":D0(e),cC(e,r,!1);break;case"textarea":D0(e),dC(e);break;case"option":r.value!=null&&e.setAttribute("value",""+du(r.value));break;case"select":e.multiple=!!r.multiple,i=r.value,i!=null?Wf(e,!!r.multiple,i,!1):r.defaultValue!=null&&Wf(e,!!r.multiple,r.defaultValue,!0);break;default:typeof a.onClick=="function"&&(e.onclick=wv)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return ja(t),null;case 6:if(e&&t.stateNode!=null)j7(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(ot(166));if(n=ac(Kh.current),ac(Es.current),W0(t)){if(r=t.stateNode,n=t.memoizedProps,r[vs]=t,(i=r.nodeValue!==n)&&(e=Ui,e!==null))switch(e.tag){case 3:H0(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&H0(r.nodeValue,n,(e.mode&1)!==0)}i&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[vs]=t,t.stateNode=r}return ja(t),null;case 13:if(xr(Ir),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Cr&&Di!==null&&(t.mode&1)!==0&&(t.flags&128)===0)o7(),dd(),t.flags|=98560,i=!1;else if(i=W0(t),r!==null&&r.dehydrated!==null){if(e===null){if(!i)throw Error(ot(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(ot(317));i[vs]=t}else dd(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;ja(t),i=!1}else $o!==null&&(Fw($o),$o=null),i=!0;if(!i)return t.flags&65536?t:null}return(t.flags&128)!==0?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,(t.mode&1)!==0&&(e===null||(Ir.current&1)!==0?ha===0&&(ha=3):rE())),t.updateQueue!==null&&(t.flags|=4),ja(t),null);case 4:return hd(),Aw(e,t),e===null&&Yh(t.stateNode.containerInfo),ja(t),null;case 10:return U2(t.type._context),ja(t),null;case 17:return Si(t.type)&&kv(),ja(t),null;case 19:if(xr(Ir),i=t.memoizedState,i===null)return ja(t),null;if(r=(t.flags&128)!==0,o=i.rendering,o===null)if(r)Cp(i,!1);else{if(ha!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(o=Mv(e),o!==null){for(t.flags|=128,Cp(i,!1),r=o.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)i=n,e=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,e=o.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return pr(Ir,Ir.current&1|2),t.child}e=e.sibling}i.tail!==null&&Zr()>gd&&(t.flags|=128,r=!0,Cp(i,!1),t.lanes=4194304)}else{if(!r)if(e=Mv(o),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Cp(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Cr)return ja(t),null}else 2*Zr()-i.renderingStartTime>gd&&n!==1073741824&&(t.flags|=128,r=!0,Cp(i,!1),t.lanes=4194304);i.isBackwards?(o.sibling=t.child,t.child=o):(n=i.last,n!==null?n.sibling=o:t.child=o,i.last=o)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=Zr(),t.sibling=null,n=Ir.current,pr(Ir,r?n&1|2:n&1),t):(ja(t),null);case 22:case 23:return nE(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&(t.mode&1)!==0?(Ni&1073741824)!==0&&(ja(t),t.subtreeFlags&6&&(t.flags|=8192)):ja(t),null;case 24:return null;case 25:return null}throw Error(ot(156,t.tag))}function _H(e,t){switch(F2(t),t.tag){case 1:return Si(t.type)&&kv(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return hd(),xr(Ei),xr(qa),H2(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 5:return G2(t),null;case 13:if(xr(Ir),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(ot(340));dd()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return xr(Ir),null;case 4:return hd(),null;case 10:return U2(t.type._context),null;case 22:case 23:return nE(),null;case 24:return null;default:return null}}var Z0=!1,Wa=!1,wH=typeof WeakSet=="function"?WeakSet:Set,Bt=null;function Df(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Vr(e,t,r)}else n.current=null}function Ow(e,t,n){try{n()}catch(r){Vr(e,t,r)}}var tT=!1;function kH(e,t){if(dw=yv,e=YL(),L2(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var a=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,s=-1,l=-1,u=0,c=0,f=e,d=null;t:for(;;){for(var p;f!==n||a!==0&&f.nodeType!==3||(s=o+a),f!==i||r!==0&&f.nodeType!==3||(l=o+r),f.nodeType===3&&(o+=f.nodeValue.length),(p=f.firstChild)!==null;)d=f,f=p;for(;;){if(f===e)break t;if(d===n&&++u===a&&(s=o),d===i&&++c===r&&(l=o),(p=f.nextSibling)!==null)break;f=d,d=f.parentNode}f=p}n=s===-1||l===-1?null:{start:s,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(pw={focusedElem:e,selectionRange:n},yv=!1,Bt=t;Bt!==null;)if(t=Bt,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Bt=e;else for(;Bt!==null;){t=Bt;try{var h=t.alternate;if((t.flags&1024)!==0)switch(t.tag){case 0:case 11:case 15:break;case 1:if(h!==null){var g=h.memoizedProps,v=h.memoizedState,b=t.stateNode,y=b.getSnapshotBeforeUpdate(t.elementType===t.type?g:zo(t.type,g),v);b.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var x=t.stateNode.containerInfo;x.nodeType===1?x.textContent="":x.nodeType===9&&x.documentElement&&x.removeChild(x.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ot(163))}}catch(k){Vr(t,t.return,k)}if(e=t.sibling,e!==null){e.return=t.return,Bt=e;break}Bt=t.return}return h=tT,tT=!1,h}function Eh(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var a=r=r.next;do{if((a.tag&e)===e){var i=a.destroy;a.destroy=void 0,i!==void 0&&Ow(t,n,i)}a=a.next}while(a!==r)}}function Ib(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function Mw(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function G7(e){var t=e.alternate;t!==null&&(e.alternate=null,G7(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[vs],delete t[Zh],delete t[gw],delete t[iH],delete t[oH])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function H7(e){return e.tag===5||e.tag===3||e.tag===4}function nT(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||H7(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Rw(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=wv));else if(r!==4&&(e=e.child,e!==null))for(Rw(e,t,n),e=e.sibling;e!==null;)Rw(e,t,n),e=e.sibling}function Pw(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(Pw(e,t,n),e=e.sibling;e!==null;)Pw(e,t,n),e=e.sibling}var Ia=null,Uo=!1;function Ml(e,t,n){for(n=n.child;n!==null;)W7(e,t,n),n=n.sibling}function W7(e,t,n){if(ks&&typeof ks.onCommitFiberUnmount=="function")try{ks.onCommitFiberUnmount(Sb,n)}catch{}switch(n.tag){case 5:Wa||Df(n,t);case 6:var r=Ia,a=Uo;Ia=null,Ml(e,t,n),Ia=r,Uo=a,Ia!==null&&(Uo?(e=Ia,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):Ia.removeChild(n.stateNode));break;case 18:Ia!==null&&(Uo?(e=Ia,n=n.stateNode,e.nodeType===8?h1(e.parentNode,n):e.nodeType===1&&h1(e,n),Gh(e)):h1(Ia,n.stateNode));break;case 4:r=Ia,a=Uo,Ia=n.stateNode.containerInfo,Uo=!0,Ml(e,t,n),Ia=r,Uo=a;break;case 0:case 11:case 14:case 15:if(!Wa&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){a=r=r.next;do{var i=a,o=i.destroy;i=i.tag,o!==void 0&&((i&2)!==0||(i&4)!==0)&&Ow(n,t,o),a=a.next}while(a!==r)}Ml(e,t,n);break;case 1:if(!Wa&&(Df(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(s){Vr(n,t,s)}Ml(e,t,n);break;case 21:Ml(e,t,n);break;case 22:n.mode&1?(Wa=(r=Wa)||n.memoizedState!==null,Ml(e,t,n),Wa=r):Ml(e,t,n);break;default:Ml(e,t,n)}}function rT(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new wH),t.forEach(function(r){var a=PH.bind(null,e,r);n.has(r)||(n.add(r),r.then(a,a))})}}function No(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var a=n[r];try{var i=e,o=t,s=o;e:for(;s!==null;){switch(s.tag){case 5:Ia=s.stateNode,Uo=!1;break e;case 3:Ia=s.stateNode.containerInfo,Uo=!0;break e;case 4:Ia=s.stateNode.containerInfo,Uo=!0;break e}s=s.return}if(Ia===null)throw Error(ot(160));W7(i,o,a),Ia=null,Uo=!1;var l=a.alternate;l!==null&&(l.return=null),a.return=null}catch(u){Vr(a,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Y7(t,e),t=t.sibling}function Y7(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(No(t,e),ss(e),r&4){try{Eh(3,e,e.return),Ib(3,e)}catch(g){Vr(e,e.return,g)}try{Eh(5,e,e.return)}catch(g){Vr(e,e.return,g)}}break;case 1:No(t,e),ss(e),r&512&&n!==null&&Df(n,n.return);break;case 5:if(No(t,e),ss(e),r&512&&n!==null&&Df(n,n.return),e.flags&32){var a=e.stateNode;try{Uh(a,"")}catch(g){Vr(e,e.return,g)}}if(r&4&&(a=e.stateNode,a!=null)){var i=e.memoizedProps,o=n!==null?n.memoizedProps:i,s=e.type,l=e.updateQueue;if(e.updateQueue=null,l!==null)try{s==="input"&&i.type==="radio"&&i.name!=null&&hL(a,i),nw(s,o);var u=nw(s,i);for(o=0;o<l.length;o+=2){var c=l[o],f=l[o+1];c==="style"?yL(a,f):c==="dangerouslySetInnerHTML"?vL(a,f):c==="children"?Uh(a,f):_2(a,c,f,u)}switch(s){case"input":K_(a,i);break;case"textarea":mL(a,i);break;case"select":var d=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!i.multiple;var p=i.value;p!=null?Wf(a,!!i.multiple,p,!1):d!==!!i.multiple&&(i.defaultValue!=null?Wf(a,!!i.multiple,i.defaultValue,!0):Wf(a,!!i.multiple,i.multiple?[]:"",!1))}a[Zh]=i}catch(g){Vr(e,e.return,g)}}break;case 6:if(No(t,e),ss(e),r&4){if(e.stateNode===null)throw Error(ot(162));a=e.stateNode,i=e.memoizedProps;try{a.nodeValue=i}catch(g){Vr(e,e.return,g)}}break;case 3:if(No(t,e),ss(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Gh(t.containerInfo)}catch(g){Vr(e,e.return,g)}break;case 4:No(t,e),ss(e);break;case 13:No(t,e),ss(e),a=e.child,a.flags&8192&&(i=a.memoizedState!==null,a.stateNode.isHidden=i,!i||a.alternate!==null&&a.alternate.memoizedState!==null||(eE=Zr())),r&4&&rT(e);break;case 22:if(c=n!==null&&n.memoizedState!==null,e.mode&1?(Wa=(u=Wa)||c,No(t,e),Wa=u):No(t,e),ss(e),r&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!c&&(e.mode&1)!==0)for(Bt=e,c=e.child;c!==null;){for(f=Bt=c;Bt!==null;){switch(d=Bt,p=d.child,d.tag){case 0:case 11:case 14:case 15:Eh(4,d,d.return);break;case 1:Df(d,d.return);var h=d.stateNode;if(typeof h.componentWillUnmount=="function"){r=d,n=d.return;try{t=r,h.props=t.memoizedProps,h.state=t.memoizedState,h.componentWillUnmount()}catch(g){Vr(r,n,g)}}break;case 5:Df(d,d.return);break;case 22:if(d.memoizedState!==null){iT(f);continue}}p!==null?(p.return=d,Bt=p):iT(f)}c=c.sibling}e:for(c=null,f=e;;){if(f.tag===5){if(c===null){c=f;try{a=f.stateNode,u?(i=a.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(s=f.stateNode,l=f.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,s.style.display=bL("display",o))}catch(g){Vr(e,e.return,g)}}}else if(f.tag===6){if(c===null)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(g){Vr(e,e.return,g)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===e)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;f.sibling===null;){if(f.return===null||f.return===e)break e;c===f&&(c=null),f=f.return}c===f&&(c=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:No(t,e),ss(e),r&4&&rT(e);break;case 21:break;default:No(t,e),ss(e)}}function ss(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(H7(n)){var r=n;break e}n=n.return}throw Error(ot(160))}switch(r.tag){case 5:var a=r.stateNode;r.flags&32&&(Uh(a,""),r.flags&=-33);var i=nT(e);Pw(e,i,a);break;case 3:case 4:var o=r.stateNode.containerInfo,s=nT(e);Rw(e,s,o);break;default:throw Error(ot(161))}}catch(l){Vr(e,e.return,l)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function EH(e,t,n){Bt=e,X7(e)}function X7(e,t,n){for(var r=(e.mode&1)!==0;Bt!==null;){var a=Bt,i=a.child;if(a.tag===22&&r){var o=a.memoizedState!==null||Z0;if(!o){var s=a.alternate,l=s!==null&&s.memoizedState!==null||Wa;s=Z0;var u=Wa;if(Z0=o,(Wa=l)&&!u)for(Bt=a;Bt!==null;)o=Bt,l=o.child,o.tag===22&&o.memoizedState!==null?oT(a):l!==null?(l.return=o,Bt=l):oT(a);for(;i!==null;)Bt=i,X7(i),i=i.sibling;Bt=a,Z0=s,Wa=u}aT(e)}else(a.subtreeFlags&8772)!==0&&i!==null?(i.return=a,Bt=i):aT(e)}}function aT(e){for(;Bt!==null;){var t=Bt;if((t.flags&8772)!==0){var n=t.alternate;try{if((t.flags&8772)!==0)switch(t.tag){case 0:case 11:case 15:Wa||Ib(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!Wa)if(n===null)r.componentDidMount();else{var a=t.elementType===t.type?n.memoizedProps:zo(t.type,n.memoizedProps);r.componentDidUpdate(a,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&$C(t,i,r);break;case 3:var o=t.updateQueue;if(o!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}$C(t,o,n)}break;case 5:var s=t.stateNode;if(n===null&&t.flags&4){n=s;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var c=u.memoizedState;if(c!==null){var f=c.dehydrated;f!==null&&Gh(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ot(163))}Wa||t.flags&512&&Mw(t)}catch(d){Vr(t,t.return,d)}}if(t===e){Bt=null;break}if(n=t.sibling,n!==null){n.return=t.return,Bt=n;break}Bt=t.return}}function iT(e){for(;Bt!==null;){var t=Bt;if(t===e){Bt=null;break}var n=t.sibling;if(n!==null){n.return=t.return,Bt=n;break}Bt=t.return}}function oT(e){for(;Bt!==null;){var t=Bt;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{Ib(4,t)}catch(l){Vr(t,n,l)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var a=t.return;try{r.componentDidMount()}catch(l){Vr(t,a,l)}}var i=t.return;try{Mw(t)}catch(l){Vr(t,i,l)}break;case 5:var o=t.return;try{Mw(t)}catch(l){Vr(t,o,l)}}}catch(l){Vr(t,t.return,l)}if(t===e){Bt=null;break}var s=t.sibling;if(s!==null){s.return=t.return,Bt=s;break}Bt=t.return}}var SH=Math.ceil,Iv=ml.ReactCurrentDispatcher,Q2=ml.ReactCurrentOwner,xo=ml.ReactCurrentBatchConfig,Un=0,wa=null,na=null,Da=0,Ni=0,Bf=wu(0),ha=0,tm=null,xc=0,Lb=0,J2=0,Sh=null,wi=null,eE=0,gd=1/0,Ws=null,Lv=!1,Iw=null,su=null,q0=!1,Yl=null,Nv=0,Ch=0,Lw=null,Gg=-1,Hg=0;function ui(){return(Un&6)!==0?Zr():Gg!==-1?Gg:Gg=Zr()}function lu(e){return(e.mode&1)===0?1:(Un&2)!==0&&Da!==0?Da&-Da:lH.transition!==null?(Hg===0&&(Hg=RL()),Hg):(e=nr,e!==0||(e=window.event,e=e===void 0?16:BL(e.type)),e)}function Ho(e,t,n,r){if(50<Ch)throw Ch=0,Lw=null,Error(ot(185));Pm(e,n,r),((Un&2)===0||e!==wa)&&(e===wa&&((Un&2)===0&&(Lb|=n),ha===4&&jl(e,Da)),Ci(e,r),n===1&&Un===0&&(t.mode&1)===0&&(gd=Zr()+500,Mb&&ku()))}function Ci(e,t){var n=e.callbackNode;lG(e,t);var r=bv(e,e===wa?Da:0);if(r===0)n!==null&&mC(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&mC(n),t===1)e.tag===0?sH(sT.bind(null,e)):r7(sT.bind(null,e)),rH(function(){(Un&6)===0&&ku()}),n=null;else{switch(PL(r)){case 1:n=C2;break;case 4:n=OL;break;case 16:n=vv;break;case 536870912:n=ML;break;default:n=vv}n=nN(n,Z7.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function Z7(e,t){if(Gg=-1,Hg=0,(Un&6)!==0)throw Error(ot(327));var n=e.callbackNode;if(Kf()&&e.callbackNode!==n)return null;var r=bv(e,e===wa?Da:0);if(r===0)return null;if((r&30)!==0||(r&e.expiredLanes)!==0||t)t=Fv(e,r);else{t=r;var a=Un;Un|=2;var i=K7();(wa!==e||Da!==t)&&(Ws=null,gd=Zr()+500,cc(e,t));do try{AH();break}catch(s){q7(e,s)}while(1);z2(),Iv.current=i,Un=a,na!==null?t=0:(wa=null,Da=0,t=ha)}if(t!==0){if(t===2&&(a=sw(e),a!==0&&(r=a,t=Nw(e,a))),t===1)throw n=tm,cc(e,0),jl(e,r),Ci(e,Zr()),n;if(t===6)jl(e,r);else{if(a=e.current.alternate,(r&30)===0&&!CH(a)&&(t=Fv(e,r),t===2&&(i=sw(e),i!==0&&(r=i,t=Nw(e,i))),t===1))throw n=tm,cc(e,0),jl(e,r),Ci(e,Zr()),n;switch(e.finishedWork=a,e.finishedLanes=r,t){case 0:case 1:throw Error(ot(345));case 2:Ku(e,wi,Ws);break;case 3:if(jl(e,r),(r&130023424)===r&&(t=eE+500-Zr(),10<t)){if(bv(e,0)!==0)break;if(a=e.suspendedLanes,(a&r)!==r){ui(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=mw(Ku.bind(null,e,wi,Ws),t);break}Ku(e,wi,Ws);break;case 4:if(jl(e,r),(r&4194240)===r)break;for(t=e.eventTimes,a=-1;0<r;){var o=31-Go(r);i=1<<o,o=t[o],o>a&&(a=o),r&=~i}if(r=a,r=Zr()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*SH(r/1960))-r,10<r){e.timeoutHandle=mw(Ku.bind(null,e,wi,Ws),r);break}Ku(e,wi,Ws);break;case 5:Ku(e,wi,Ws);break;default:throw Error(ot(329))}}}return Ci(e,Zr()),e.callbackNode===n?Z7.bind(null,e):null}function Nw(e,t){var n=Sh;return e.current.memoizedState.isDehydrated&&(cc(e,t).flags|=256),e=Fv(e,t),e!==2&&(t=wi,wi=n,t!==null&&Fw(t)),e}function Fw(e){wi===null?wi=e:wi.push.apply(wi,e)}function CH(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var a=n[r],i=a.getSnapshot;a=a.value;try{if(!Xo(i(),a))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function jl(e,t){for(t&=~J2,t&=~Lb,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Go(t),r=1<<n;e[n]=-1,t&=~r}}function sT(e){if((Un&6)!==0)throw Error(ot(327));Kf();var t=bv(e,0);if((t&1)===0)return Ci(e,Zr()),null;var n=Fv(e,t);if(e.tag!==0&&n===2){var r=sw(e);r!==0&&(t=r,n=Nw(e,r))}if(n===1)throw n=tm,cc(e,0),jl(e,t),Ci(e,Zr()),n;if(n===6)throw Error(ot(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Ku(e,wi,Ws),Ci(e,Zr()),null}function tE(e,t){var n=Un;Un|=1;try{return e(t)}finally{Un=n,Un===0&&(gd=Zr()+500,Mb&&ku())}}function _c(e){Yl!==null&&Yl.tag===0&&(Un&6)===0&&Kf();var t=Un;Un|=1;var n=xo.transition,r=nr;try{if(xo.transition=null,nr=1,e)return e()}finally{nr=r,xo.transition=n,Un=t,(Un&6)===0&&ku()}}function nE(){Ni=Bf.current,xr(Bf)}function cc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,nH(n)),na!==null)for(n=na.return;n!==null;){var r=n;switch(F2(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&kv();break;case 3:hd(),xr(Ei),xr(qa),H2();break;case 5:G2(r);break;case 4:hd();break;case 13:xr(Ir);break;case 19:xr(Ir);break;case 10:U2(r.type._context);break;case 22:case 23:nE()}n=n.return}if(wa=e,na=e=uu(e.current,null),Da=Ni=t,ha=0,tm=null,J2=Lb=xc=0,wi=Sh=null,rc!==null){for(t=0;t<rc.length;t++)if(n=rc[t],r=n.interleaved,r!==null){n.interleaved=null;var a=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=a,r.next=o}n.pending=r}rc=null}return e}function q7(e,t){do{var n=na;try{if(z2(),$g.current=Pv,Rv){for(var r=Nr.memoizedState;r!==null;){var a=r.queue;a!==null&&(a.pending=null),r=r.next}Rv=!1}if(yc=0,_a=pa=Nr=null,kh=!1,Qh=0,Q2.current=null,n===null||n.return===null){ha=1,tm=t,na=null;break}e:{var i=e,o=n.return,s=n,l=t;if(t=Da,s.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,c=s,f=c.tag;if((c.mode&1)===0&&(f===0||f===11||f===15)){var d=c.alternate;d?(c.updateQueue=d.updateQueue,c.memoizedState=d.memoizedState,c.lanes=d.lanes):(c.updateQueue=null,c.memoizedState=null)}var p=XC(o);if(p!==null){p.flags&=-257,ZC(p,o,s,i,t),p.mode&1&&YC(i,u,t),t=p,l=u;var h=t.updateQueue;if(h===null){var g=new Set;g.add(l),t.updateQueue=g}else h.add(l);break e}else{if((t&1)===0){YC(i,u,t),rE();break e}l=Error(ot(426))}}else if(Cr&&s.mode&1){var v=XC(o);if(v!==null){(v.flags&65536)===0&&(v.flags|=256),ZC(v,o,s,i,t),D2(md(l,s));break e}}i=l=md(l,s),ha!==4&&(ha=2),Sh===null?Sh=[i]:Sh.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var b=I7(i,l,t);UC(i,b);break e;case 1:s=l;var y=i.type,x=i.stateNode;if((i.flags&128)===0&&(typeof y.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(su===null||!su.has(x)))){i.flags|=65536,t&=-t,i.lanes|=t;var k=L7(i,s,t);UC(i,k);break e}}i=i.return}while(i!==null)}J7(n)}catch(T){t=T,na===n&&n!==null&&(na=n=n.return);continue}break}while(1)}function K7(){var e=Iv.current;return Iv.current=Pv,e===null?Pv:e}function rE(){(ha===0||ha===3||ha===2)&&(ha=4),wa===null||(xc&268435455)===0&&(Lb&268435455)===0||jl(wa,Da)}function Fv(e,t){var n=Un;Un|=2;var r=K7();(wa!==e||Da!==t)&&(Ws=null,cc(e,t));do try{TH();break}catch(a){q7(e,a)}while(1);if(z2(),Un=n,Iv.current=r,na!==null)throw Error(ot(261));return wa=null,Da=0,ha}function TH(){for(;na!==null;)Q7(na)}function AH(){for(;na!==null&&!Jj();)Q7(na)}function Q7(e){var t=tN(e.alternate,e,Ni);e.memoizedProps=e.pendingProps,t===null?J7(e):na=t,Q2.current=null}function J7(e){var t=e;do{var n=t.alternate;if(e=t.return,(t.flags&32768)===0){if(n=xH(n,t,Ni),n!==null){na=n;return}}else{if(n=_H(n,t),n!==null){n.flags&=32767,na=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{ha=6,na=null;return}}if(t=t.sibling,t!==null){na=t;return}na=t=e}while(t!==null);ha===0&&(ha=5)}function Ku(e,t,n){var r=nr,a=xo.transition;try{xo.transition=null,nr=1,OH(e,t,n,r)}finally{xo.transition=a,nr=r}return null}function OH(e,t,n,r){do Kf();while(Yl!==null);if((Un&6)!==0)throw Error(ot(327));n=e.finishedWork;var a=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(ot(177));e.callbackNode=null,e.callbackPriority=0;var i=n.lanes|n.childLanes;if(uG(e,i),e===wa&&(na=wa=null,Da=0),(n.subtreeFlags&2064)===0&&(n.flags&2064)===0||q0||(q0=!0,nN(vv,function(){return Kf(),null})),i=(n.flags&15990)!==0,(n.subtreeFlags&15990)!==0||i){i=xo.transition,xo.transition=null;var o=nr;nr=1;var s=Un;Un|=4,Q2.current=null,kH(e,n),Y7(n,e),ZG(pw),yv=!!dw,pw=dw=null,e.current=n,EH(n),eG(),Un=s,nr=o,xo.transition=i}else e.current=n;if(q0&&(q0=!1,Yl=e,Nv=a),i=e.pendingLanes,i===0&&(su=null),rG(n.stateNode),Ci(e,Zr()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)a=t[n],r(a.value,{componentStack:a.stack,digest:a.digest});if(Lv)throw Lv=!1,e=Iw,Iw=null,e;return(Nv&1)!==0&&e.tag!==0&&Kf(),i=e.pendingLanes,(i&1)!==0?e===Lw?Ch++:(Ch=0,Lw=e):Ch=0,ku(),null}function Kf(){if(Yl!==null){var e=PL(Nv),t=xo.transition,n=nr;try{if(xo.transition=null,nr=16>e?16:e,Yl===null)var r=!1;else{if(e=Yl,Yl=null,Nv=0,(Un&6)!==0)throw Error(ot(331));var a=Un;for(Un|=4,Bt=e.current;Bt!==null;){var i=Bt,o=i.child;if((Bt.flags&16)!==0){var s=i.deletions;if(s!==null){for(var l=0;l<s.length;l++){var u=s[l];for(Bt=u;Bt!==null;){var c=Bt;switch(c.tag){case 0:case 11:case 15:Eh(8,c,i)}var f=c.child;if(f!==null)f.return=c,Bt=f;else for(;Bt!==null;){c=Bt;var d=c.sibling,p=c.return;if(G7(c),c===u){Bt=null;break}if(d!==null){d.return=p,Bt=d;break}Bt=p}}}var h=i.alternate;if(h!==null){var g=h.child;if(g!==null){h.child=null;do{var v=g.sibling;g.sibling=null,g=v}while(g!==null)}}Bt=i}}if((i.subtreeFlags&2064)!==0&&o!==null)o.return=i,Bt=o;else e:for(;Bt!==null;){if(i=Bt,(i.flags&2048)!==0)switch(i.tag){case 0:case 11:case 15:Eh(9,i,i.return)}var b=i.sibling;if(b!==null){b.return=i.return,Bt=b;break e}Bt=i.return}}var y=e.current;for(Bt=y;Bt!==null;){o=Bt;var x=o.child;if((o.subtreeFlags&2064)!==0&&x!==null)x.return=o,Bt=x;else e:for(o=y;Bt!==null;){if(s=Bt,(s.flags&2048)!==0)try{switch(s.tag){case 0:case 11:case 15:Ib(9,s)}}catch(T){Vr(s,s.return,T)}if(s===o){Bt=null;break e}var k=s.sibling;if(k!==null){k.return=s.return,Bt=k;break e}Bt=s.return}}if(Un=a,ku(),ks&&typeof ks.onPostCommitFiberRoot=="function")try{ks.onPostCommitFiberRoot(Sb,e)}catch{}r=!0}return r}finally{nr=n,xo.transition=t}}return!1}function lT(e,t,n){t=md(n,t),t=I7(e,t,1),e=ou(e,t,1),t=ui(),e!==null&&(Pm(e,1,t),Ci(e,t))}function Vr(e,t,n){if(e.tag===3)lT(e,e,n);else for(;t!==null;){if(t.tag===3){lT(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(su===null||!su.has(r))){e=md(n,e),e=L7(t,e,1),t=ou(t,e,1),e=ui(),t!==null&&(Pm(t,1,e),Ci(t,e));break}}t=t.return}}function MH(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=ui(),e.pingedLanes|=e.suspendedLanes&n,wa===e&&(Da&n)===n&&(ha===4||ha===3&&(Da&130023424)===Da&&500>Zr()-eE?cc(e,0):J2|=n),Ci(e,t)}function eN(e,t){t===0&&((e.mode&1)===0?t=1:(t=U0,U0<<=1,(U0&130023424)===0&&(U0=4194304)));var n=ui();e=dl(e,t),e!==null&&(Pm(e,t,n),Ci(e,n))}function RH(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),eN(e,n)}function PH(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,a=e.memoizedState;a!==null&&(n=a.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(ot(314))}r!==null&&r.delete(t),eN(e,n)}var tN;tN=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||Ei.current)ki=!0;else{if((e.lanes&n)===0&&(t.flags&128)===0)return ki=!1,yH(e,t,n);ki=(e.flags&131072)!==0}else ki=!1,Cr&&(t.flags&1048576)!==0&&a7(t,Cv,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;jg(e,t),e=t.pendingProps;var a=fd(t,qa.current);qf(t,n),a=Y2(null,t,r,e,a,n);var i=X2();return t.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Si(r)?(i=!0,Ev(t)):i=!1,t.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,V2(t),a.updater=Rb,t.stateNode=a,a._reactInternals=t,ww(t,r,e,n),t=Sw(null,t,r,!0,i,n)):(t.tag=0,Cr&&i&&N2(t),oi(null,t,a,n),t=t.child),t;case 16:r=t.elementType;e:{switch(jg(e,t),e=t.pendingProps,a=r._init,r=a(r._payload),t.type=r,a=t.tag=LH(r),e=zo(r,e),a){case 0:t=Ew(null,t,r,e,n);break e;case 1:t=QC(null,t,r,e,n);break e;case 11:t=qC(null,t,r,e,n);break e;case 14:t=KC(null,t,r,zo(r.type,e),n);break e}throw Error(ot(306,r,""))}return t;case 0:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:zo(r,a),Ew(e,t,r,a,n);case 1:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:zo(r,a),QC(e,t,r,a,n);case 3:e:{if(B7(t),e===null)throw Error(ot(387));r=t.pendingProps,i=t.memoizedState,a=i.element,l7(e,t),Ov(t,r,null,n);var o=t.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){a=md(Error(ot(423)),t),t=JC(e,t,r,n,a);break e}else if(r!==a){a=md(Error(ot(424)),t),t=JC(e,t,r,n,a);break e}else for(Di=iu(t.stateNode.containerInfo.firstChild),Ui=t,Cr=!0,$o=null,n=d7(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(dd(),r===a){t=pl(e,t,n);break e}oi(e,t,r,n)}t=t.child}return t;case 5:return p7(t),e===null&&yw(t),r=t.type,a=t.pendingProps,i=e!==null?e.memoizedProps:null,o=a.children,hw(r,a)?o=null:i!==null&&hw(r,i)&&(t.flags|=32),D7(e,t),oi(e,t,o,n),t.child;case 6:return e===null&&yw(t),null;case 13:return z7(e,t,n);case 4:return j2(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=pd(t,null,r,n):oi(e,t,r,n),t.child;case 11:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:zo(r,a),qC(e,t,r,a,n);case 7:return oi(e,t,t.pendingProps,n),t.child;case 8:return oi(e,t,t.pendingProps.children,n),t.child;case 12:return oi(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,a=t.pendingProps,i=t.memoizedProps,o=a.value,pr(Tv,r._currentValue),r._currentValue=o,i!==null)if(Xo(i.value,o)){if(i.children===a.children&&!Ei.current){t=pl(e,t,n);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var s=i.dependencies;if(s!==null){o=i.child;for(var l=s.firstContext;l!==null;){if(l.context===r){if(i.tag===1){l=al(-1,n&-n),l.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var c=u.pending;c===null?l.next=l:(l.next=c.next,c.next=l),u.pending=l}}i.lanes|=n,l=i.alternate,l!==null&&(l.lanes|=n),xw(i.return,n,t),s.lanes|=n;break}l=l.next}}else if(i.tag===10)o=i.type===t.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(ot(341));o.lanes|=n,s=o.alternate,s!==null&&(s.lanes|=n),xw(o,n,t),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===t){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}oi(e,t,a.children,n),t=t.child}return t;case 9:return a=t.type,r=t.pendingProps.children,qf(t,n),a=wo(a),r=r(a),t.flags|=1,oi(e,t,r,n),t.child;case 14:return r=t.type,a=zo(r,t.pendingProps),a=zo(r.type,a),KC(e,t,r,a,n);case 15:return N7(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:zo(r,a),jg(e,t),t.tag=1,Si(r)?(e=!0,Ev(t)):e=!1,qf(t,n),c7(t,r,a),ww(t,r,a,n),Sw(null,t,r,!0,e,n);case 19:return U7(e,t,n);case 22:return F7(e,t,n)}throw Error(ot(156,t.tag))};function nN(e,t){return AL(e,t)}function IH(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function bo(e,t,n,r){return new IH(e,t,n,r)}function aE(e){return e=e.prototype,!(!e||!e.isReactComponent)}function LH(e){if(typeof e=="function")return aE(e)?1:0;if(e!=null){if(e=e.$$typeof,e===k2)return 11;if(e===E2)return 14}return 2}function uu(e,t){var n=e.alternate;return n===null?(n=bo(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Wg(e,t,n,r,a,i){var o=2;if(r=e,typeof e=="function")aE(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case Af:return fc(n.children,a,i,t);case w2:o=8,a|=8;break;case W_:return e=bo(12,n,t,a|2),e.elementType=W_,e.lanes=i,e;case Y_:return e=bo(13,n,t,a),e.elementType=Y_,e.lanes=i,e;case X_:return e=bo(19,n,t,a),e.elementType=X_,e.lanes=i,e;case fL:return Nb(n,a,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case uL:o=10;break e;case cL:o=9;break e;case k2:o=11;break e;case E2:o=14;break e;case Bl:o=16,r=null;break e}throw Error(ot(130,e==null?e:typeof e,""))}return t=bo(o,n,t,a),t.elementType=e,t.type=r,t.lanes=i,t}function fc(e,t,n,r){return e=bo(7,e,r,t),e.lanes=n,e}function Nb(e,t,n,r){return e=bo(22,e,r,t),e.elementType=fL,e.lanes=n,e.stateNode={isHidden:!1},e}function w1(e,t,n){return e=bo(6,e,null,t),e.lanes=n,e}function k1(e,t,n){return t=bo(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function NH(e,t,n,r,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=r1(0),this.expirationTimes=r1(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=r1(0),this.identifierPrefix=r,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function iE(e,t,n,r,a,i,o,s,l){return e=new NH(e,t,n,s,l),t===1?(t=1,i===!0&&(t|=8)):t=0,i=bo(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},V2(i),e}function FH(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Tf,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function rN(e){if(!e)return pu;e=e._reactInternals;e:{if(Tc(e)!==e||e.tag!==1)throw Error(ot(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Si(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(ot(171))}if(e.tag===1){var n=e.type;if(Si(n))return n7(e,n,t)}return t}function aN(e,t,n,r,a,i,o,s,l){return e=iE(n,r,!0,e,a,i,o,s,l),e.context=rN(null),n=e.current,r=ui(),a=lu(n),i=al(r,a),i.callback=t!=null?t:null,ou(n,i,a),e.current.lanes=a,Pm(e,a,r),Ci(e,r),e}function Fb(e,t,n,r){var a=t.current,i=ui(),o=lu(a);return n=rN(n),t.context===null?t.context=n:t.pendingContext=n,t=al(i,o),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=ou(a,t,o),e!==null&&(Ho(e,a,o,i),Ug(e,a,o)),o}function Dv(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function uT(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function oE(e,t){uT(e,t),(e=e.alternate)&&uT(e,t)}function DH(){return null}var iN=typeof reportError=="function"?reportError:function(e){console.error(e)};function sE(e){this._internalRoot=e}Db.prototype.render=sE.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(ot(409));Fb(e,t,null,null)};Db.prototype.unmount=sE.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;_c(function(){Fb(null,e,null,null)}),t[fl]=null}};function Db(e){this._internalRoot=e}Db.prototype.unstable_scheduleHydration=function(e){if(e){var t=NL();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Vl.length&&t!==0&&t<Vl[n].priority;n++);Vl.splice(n,0,e),n===0&&DL(e)}};function lE(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Bb(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function cT(){}function BH(e,t,n,r,a){if(a){if(typeof r=="function"){var i=r;r=function(){var u=Dv(o);i.call(u)}}var o=aN(t,r,e,0,null,!1,!1,"",cT);return e._reactRootContainer=o,e[fl]=o.current,Yh(e.nodeType===8?e.parentNode:e),_c(),o}for(;a=e.lastChild;)e.removeChild(a);if(typeof r=="function"){var s=r;r=function(){var u=Dv(l);s.call(u)}}var l=iE(e,0,!1,null,null,!1,!1,"",cT);return e._reactRootContainer=l,e[fl]=l.current,Yh(e.nodeType===8?e.parentNode:e),_c(function(){Fb(t,l,n,r)}),l}function zb(e,t,n,r,a){var i=n._reactRootContainer;if(i){var o=i;if(typeof a=="function"){var s=a;a=function(){var l=Dv(o);s.call(l)}}Fb(t,o,e,a)}else o=BH(n,t,e,a,r);return Dv(o)}IL=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=oh(t.pendingLanes);n!==0&&(T2(t,n|1),Ci(t,Zr()),(Un&6)===0&&(gd=Zr()+500,ku()))}break;case 13:_c(function(){var r=dl(e,1);if(r!==null){var a=ui();Ho(r,e,1,a)}}),oE(e,1)}};A2=function(e){if(e.tag===13){var t=dl(e,134217728);if(t!==null){var n=ui();Ho(t,e,134217728,n)}oE(e,134217728)}};LL=function(e){if(e.tag===13){var t=lu(e),n=dl(e,t);if(n!==null){var r=ui();Ho(n,e,t,r)}oE(e,t)}};NL=function(){return nr};FL=function(e,t){var n=nr;try{return nr=e,t()}finally{nr=n}};aw=function(e,t,n){switch(t){case"input":if(K_(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var a=Ob(r);if(!a)throw Error(ot(90));pL(r),K_(r,a)}}}break;case"textarea":mL(e,n);break;case"select":t=n.value,t!=null&&Wf(e,!!n.multiple,t,!1)}};wL=tE;kL=_c;var zH={usingClientEntryPoint:!1,Events:[Lm,Pf,Ob,xL,_L,tE]},Tp={findFiberByHostInstance:nc,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},UH={bundleType:Tp.bundleType,version:Tp.version,rendererPackageName:Tp.rendererPackageName,rendererConfig:Tp.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ml.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=CL(e),e===null?null:e.stateNode},findFiberByHostInstance:Tp.findFiberByHostInstance||DH,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__!="undefined"){var K0=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!K0.isDisabled&&K0.supportsFiber)try{Sb=K0.inject(UH),ks=K0}catch{}}ji.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=zH;ji.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!lE(t))throw Error(ot(200));return FH(e,t,null,n)};ji.createRoot=function(e,t){if(!lE(e))throw Error(ot(299));var n=!1,r="",a=iN;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(a=t.onRecoverableError)),t=iE(e,1,!1,null,null,n,!1,r,a),e[fl]=t.current,Yh(e.nodeType===8?e.parentNode:e),new sE(t)};ji.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(ot(188)):(e=Object.keys(e).join(","),Error(ot(268,e)));return e=CL(t),e=e===null?null:e.stateNode,e};ji.flushSync=function(e){return _c(e)};ji.hydrate=function(e,t,n){if(!Bb(t))throw Error(ot(200));return zb(null,e,t,!0,n)};ji.hydrateRoot=function(e,t,n){if(!lE(e))throw Error(ot(405));var r=n!=null&&n.hydratedSources||null,a=!1,i="",o=iN;if(n!=null&&(n.unstable_strictMode===!0&&(a=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),t=aN(t,null,e,1,n!=null?n:null,a,!1,i,o),e[fl]=t.current,Yh(e),r)for(e=0;e<r.length;e++)n=r[e],a=n._getVersion,a=a(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,a]:t.mutableSourceEagerHydrationData.push(n,a);return new Db(t)};ji.render=function(e,t,n){if(!Bb(t))throw Error(ot(200));return zb(null,e,t,!1,n)};ji.unmountComponentAtNode=function(e){if(!Bb(e))throw Error(ot(40));return e._reactRootContainer?(_c(function(){zb(null,null,e,!1,function(){e._reactRootContainer=null,e[fl]=null})}),!0):!1};ji.unstable_batchedUpdates=tE;ji.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Bb(n))throw Error(ot(200));if(e==null||e._reactInternals===void 0)throw Error(ot(38));return zb(e,t,n,!1,r)};ji.version="18.2.0-next-9e3b772b8-20220608";function oN(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__=="undefined"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(oN)}catch(e){console.error(e)}}oN(),b2.exports=ji;var nm=b2.exports,fT=b2.exports;G_.createRoot=fT.createRoot,G_.hydrateRoot=fT.hydrateRoot;var sN={},lN={},dT=function(t){return lN[t]},Ac=function(t,n){lN[t]=n},$H=function(t){return sN[t]},Nd=function(t,n){sN[t]=n},pT={},E1={},S1=34,Ap=10,C1=13;function uN(e){return new Function("d","return {"+e.map(function(t,n){return JSON.stringify(t)+": d["+n+'] || ""'}).join(",")+"}")}function VH(e,t){var n=uN(e);return function(r,a){return t(n(r),a,e)}}function hT(e){var t=Object.create(null),n=[];return e.forEach(function(r){for(var a in r)a in t||n.push(t[a]=a)}),n}function xi(e,t){var n=e+"",r=n.length;return r<t?new Array(t-r+1).join(0)+n:n}function jH(e){return e<0?"-"+xi(-e,6):e>9999?"+"+xi(e,6):xi(e,4)}function GH(e){var t=e.getUTCHours(),n=e.getUTCMinutes(),r=e.getUTCSeconds(),a=e.getUTCMilliseconds();return isNaN(e)?"Invalid Date":jH(e.getUTCFullYear())+"-"+xi(e.getUTCMonth()+1,2)+"-"+xi(e.getUTCDate(),2)+(a?"T"+xi(t,2)+":"+xi(n,2)+":"+xi(r,2)+"."+xi(a,3)+"Z":r?"T"+xi(t,2)+":"+xi(n,2)+":"+xi(r,2)+"Z":n||t?"T"+xi(t,2)+":"+xi(n,2)+"Z":"")}function HH(e){var t=new RegExp('["'+e+`
\r]`),n=e.charCodeAt(0);function r(f,d){var p,h,g=a(f,function(v,b){if(p)return p(v,b-1);h=v,p=d?VH(v,d):uN(v)});return g.columns=h||[],g}function a(f,d){var p=[],h=f.length,g=0,v=0,b,y=h<=0,x=!1;f.charCodeAt(h-1)===Ap&&--h,f.charCodeAt(h-1)===C1&&--h;function k(){if(y)return E1;if(x)return x=!1,pT;var C,I=g,P;if(f.charCodeAt(I)===S1){for(;g++<h&&f.charCodeAt(g)!==S1||f.charCodeAt(++g)===S1;);return(C=g)>=h?y=!0:(P=f.charCodeAt(g++))===Ap?x=!0:P===C1&&(x=!0,f.charCodeAt(g)===Ap&&++g),f.slice(I+1,C-1).replace(/""/g,'"')}for(;g<h;){if((P=f.charCodeAt(C=g++))===Ap)x=!0;else if(P===C1)x=!0,f.charCodeAt(g)===Ap&&++g;else if(P!==n)continue;return f.slice(I,C)}return y=!0,f.slice(I,h)}for(;(b=k())!==E1;){for(var T=[];b!==pT&&b!==E1;)T.push(b),b=k();d&&(T=d(T,v++))==null||p.push(T)}return p}function i(f,d){return f.map(function(p){return d.map(function(h){return c(p[h])}).join(e)})}function o(f,d){return d==null&&(d=hT(f)),[d.map(c).join(e)].concat(i(f,d)).join(`
`)}function s(f,d){return d==null&&(d=hT(f)),i(f,d).join(`
`)}function l(f){return f.map(u).join(`
`)}function u(f){return f.map(c).join(e)}function c(f){return f==null?"":f instanceof Date?GH(f):t.test(f+="")?'"'+f.replace(/"/g,'""')+'"':f}return{parse:r,parseRows:a,format:o,formatBody:s,formatRows:l,formatRow:u,formatValue:c}}var WH=HH(","),YH=WH.parse;function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Dw(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function XH(e){if(Array.isArray(e))return Dw(e)}function cN(e){if(typeof Symbol!="undefined"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function uE(e,t){if(!!e){if(typeof e=="string")return Dw(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Dw(e,t)}}function ZH(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function $e(e){return XH(e)||cN(e)||uE(e)||ZH()}var cE={},Ub={};Ub.RADIUS=6378137;Ub.FLATTENING=1/298.257223563;Ub.POLAR_RADIUS=63567523142e-4;var mT=Ub;cE.geometry=fN;cE.ring=Bw;function fN(e){var t=0,n;switch(e.type){case"Polygon":return gT(e.coordinates);case"MultiPolygon":for(n=0;n<e.coordinates.length;n++)t+=gT(e.coordinates[n]);return t;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0;case"GeometryCollection":for(n=0;n<e.geometries.length;n++)t+=fN(e.geometries[n]);return t}}function gT(e){var t=0;if(e&&e.length>0){t+=Math.abs(Bw(e[0]));for(var n=1;n<e.length;n++)t-=Math.abs(Bw(e[n]))}return t}function Bw(e){var t,n,r,a,i,o,s,l=0,u=e.length;if(u>2){for(s=0;s<u;s++)s===u-2?(a=u-2,i=u-1,o=0):s===u-1?(a=u-1,i=0,o=1):(a=s,i=s+1,o=s+2),t=e[a],n=e[i],r=e[o],l+=(T1(r[0])-T1(t[0]))*Math.sin(T1(n[1]));l=l*mT.RADIUS*mT.RADIUS/2}return l}function T1(e){return e*Math.PI/180}var qH=cE,dN=Yg;function Yg(e,t){switch(e&&e.type||null){case"FeatureCollection":return e.features=e.features.map(zw(Yg,t)),e;case"GeometryCollection":return e.geometries=e.geometries.map(zw(Yg,t)),e;case"Feature":return e.geometry=Yg(e.geometry,t),e;case"Polygon":case"MultiPolygon":return KH(e,t);default:return e}}function zw(e,t){return function(n){return e(n,t)}}function KH(e,t){return e.type==="Polygon"?e.coordinates=vT(e.coordinates,t):e.type==="MultiPolygon"&&(e.coordinates=e.coordinates.map(zw(vT,t))),e}function vT(e,t){t=!!t,e[0]=bT(e[0],t);for(var n=1;n<e.length;n++)e[n]=bT(e[n],!t);return e}function bT(e,t){return QH(e)===t?e:e.reverse()}function QH(e){return qH.ring(e)>=0}function yT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function xT(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?yT(Object(n),!0).forEach(function(r){m(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):yT(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function pN(e,t){var n=t.x,r=t.y,a=t.x1,i=t.y1,o=t.coordinates,s=[];return Array.isArray(e)?(e.forEach(function(l,u){var c=[];if(n&&r&&(c=[parseFloat(l[n]),parseFloat(l[r])]),n&&r&&a&&i){var f=[parseFloat(l[n]),parseFloat(l[r])],d=[parseFloat(l[a]),parseFloat(l[i])];c=[f,d]}if(o){var p="Polygon";Array.isArray(o[0])||(p="Point"),Array.isArray(o[0])&&!Array.isArray(o[0][0])&&(p="LineString");var h={type:p,coordinates:$e(l[o])};dN(h,!0),c=h.coordinates}var g=xT(xT({},l),{},{_id:u,coordinates:c});s.push(g)}),{dataArray:s}):{dataArray:[]}}var JH=[{lng1:100,lat1:30,lng2:130,lat2:30}],eW={parser:{type:"json",x:"lng1",y:"lat1",x1:"lng2",y1:"lat2"}};function tW(e,t){var n=YH(e);return pN(n,t)}var bi=63710088e-1,nW={centimeters:bi*100,centimetres:bi*100,degrees:bi/111325,feet:bi*3.28084,inches:bi*39.37,kilometers:bi/1e3,kilometres:bi/1e3,meters:bi,metres:bi,miles:bi/1609.344,millimeters:bi*1e3,millimetres:bi*1e3,nauticalmiles:bi/1852,radians:1,yards:bi*1.0936};function Bv(e,t,n){n===void 0&&(n={});var r={type:"Feature"};return(n.id===0||n.id)&&(r.id=n.id),n.bbox&&(r.bbox=n.bbox),r.properties=t||{},r.geometry=e,r}function fE(e,t,n){n===void 0&&(n={});for(var r=0,a=e;r<a.length;r++){var i=a[r];if(i.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var o=0;o<i[i.length-1].length;o++)if(i[i.length-1][o]!==i[0][o])throw new Error("First and last Position are not equivalent.")}var s={type:"Polygon",coordinates:e};return Bv(s,t,n)}function rW(e,t,n){n===void 0&&(n={});var r={type:"MultiPolygon",coordinates:e};return Bv(r,t,n)}function aW(e,t){t===void 0&&(t="kilometers");var n=nW[t];if(!n)throw new Error(t+" units is invalid");return e*n}function Q0(e){var t=e%360;return t*Math.PI/180}function iW(e){if(Array.isArray(e))return e;if(e.type==="Feature"){if(e.geometry!==null)return e.geometry.coordinates}else if(e.coordinates)return e.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}function _T(e){return e.type==="Feature"?e.geometry:e}function oW(e,t){var n,r,a,i,o,s,l,u,c,f,d=0,p=e.type==="FeatureCollection",h=e.type==="Feature",g=p?e.features.length:1;for(n=0;n<g;n++){for(s=p?e.features[n].geometry:h?e.geometry:e,u=p?e.features[n].properties:h?e.properties:{},c=p?e.features[n].bbox:h?e.bbox:void 0,f=p?e.features[n].id:h?e.id:void 0,l=s?s.type==="GeometryCollection":!1,o=l?s.geometries.length:1,a=0;a<o;a++){if(i=l?s.geometries[a]:s,i===null){if(t(null,d,u,c,f)===!1)return!1;continue}switch(i.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(t(i,d,u,c,f)===!1)return!1;break}case"GeometryCollection":{for(r=0;r<i.geometries.length;r++)if(t(i.geometries[r],d,u,c,f)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}d++}}function sW(e,t){oW(e,function(n,r,a,i,o){var s=n===null?null:n.type;switch(s){case null:case"Point":case"LineString":case"Polygon":return t(Bv(n,a,{bbox:i,id:o}),r,0)===!1?!1:void 0}var l;switch(s){case"MultiPoint":l="Point";break;case"MultiLineString":l="LineString";break;case"MultiPolygon":l="Polygon";break}for(var u=0;u<n.coordinates.length;u++){var c=n.coordinates[u],f={type:l,coordinates:c};if(t(Bv(f,a),r,u)===!1)return!1}})}function wT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function kT(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?wT(Object(n),!0).forEach(function(r){m(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):wT(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function lW(e){for(var t=e.toString(),n=5381,r=t.length;r;)n=n*33^t.charCodeAt(--r);return n>>>0}function uW(e,t){return t===void 0?null:t==="id"&&e.id?e.id:e[t]?e[t]:e.properties&&e.properties[t]?lW(e.properties[t]+"")%1000019:null}function cW(e,t){var n=[],r={};return e.features?(e.features=e.features.filter(function(a){var i=a.geometry;return a!=null&&i&&i.type&&i.coordinates&&i.coordinates.length>0}),dN(e,!0),e.features.length===0?{dataArray:[],featureKeys:r}:(sW(e,function(a,i){var o=uW(a,t==null?void 0:t.featureId);o===null&&(o=i);var s=o,l=iW(a),u=kT(kT({},a.properties),{},{coordinates:l,_id:s});n.push(u)}),{dataArray:n,featureKeys:r})):(e.features=[],{dataArray:[]})}function hN(e){if(Array.isArray(e))return e}function fW(e,t){var n=e==null?null:typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r=[],a=!0,i=!1,o,s;try{for(n=n.call(e);!(a=(o=n.next()).done)&&(r.push(o.value),!(t&&r.length===t));a=!0);}catch(l){i=!0,s=l}finally{try{!a&&n.return!=null&&n.return()}finally{if(i)throw s}}return r}}function mN(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Le(e,t){return hN(e)||fW(e,t)||uE(e,t)||mN()}var lh="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function dE(e){this.message=e}dE.prototype=new Error;dE.prototype.name="InvalidCharacterError";function dW(e){var t=String(e).replace(/=+$/,"");if(t.length%4===1)throw new dE("'atob' failed: The string to be decoded is not correctly encoded.");for(var n="",r=0,a,i,o=0;i=t.charAt(o++);~i&&(a=r%4?a*64+i:i,r++%4)?n+=String.fromCharCode(255&a>>(-2*r&6)):0)i=lh.indexOf(i);return n}function gN(e){e=String(e);for(var t,n,r,a,i="",o=0,s=e.length%3;o<e.length;){if((n=e.charCodeAt(o++))>255||(r=e.charCodeAt(o++))>255||(a=e.charCodeAt(o++))>255)throw new TypeError("Failed to execute 'btoa' on 'Window': The string to be encoded contains characters outside of the Latin1 range.");t=n<<16|r<<8|a,i+=lh.charAt(t>>18&63)+lh.charAt(t>>12&63)+lh.charAt(t>>6&63)+lh.charAt(t&63)}return s?i.slice(0,s-3)+"===".substring(s):i}function Ae(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ET(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Oe(e,t,n){return t&&ET(e.prototype,t),n&&ET(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}var pW=function(){function e(t,n){Ae(this,e),this.buffers=t,this.type=n}return Oe(e,[{key:"arraybuffer",value:function(){return Promise.resolve(this.buffers[0])}},{key:"stream",value:function(){throw new Error("not implemented")}},{key:"text",value:function(){throw new Error("not implemented")}},{key:"slice",value:function(n,r,a){throw new Error("not implemented")}}]),e}(),yo;typeof window=="undefined"?yo={devicePixelRatio:1,navigator:{userAgent:"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/95.0.4638.69 Safari/537.36",browserLanguage:"zh-CN",language:"zh-CN",platform:""},location:"",document:{documentElement:{style:{}},createEvent:function(){return!0},getElementById:function(t){return!0},createElement:function(){return{className:"",classList:{add:function(){return""}}}},createElementNS:function(){return!0},addEventListener:function(){return!0},removeEventListener:function(){return!0},querySelector:function(){return!1}},performance:{mark:function(t){return null},clearMeasures:function(t){return null},clearMarks:function(t){return null},measure:function(t,n,r){return{duration:0}},now:function(){return new Date().getTime()}},Blob:"",dispatchEvent:function(t){return!0},Event:function(t,n){return!0},createElement:function(){return!0},createElementNS:function(){return!0},XMLHttpRequest:function(){return!0},addEventListener:function(){return!0},removeEventListener:function(){return!0},requestAnimationFrame:function(){return!0},cancelAnimationFrame:function(){return!0},clearTimeout:function(){return!0}}:yo=window;var hW=typeof my!="undefined"&&!!my&&typeof my.showToast=="function"&&my.isFRM!==!0,mW=hW?my.getSystemInfoSync().pixelRatio:yo.devicePixelRatio;function rm(e,t){return rm=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},rm(e,t)}function Tt(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&rm(e,t)}function hr(e){return hr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},hr(e)}function D(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function It(e,t){if(t&&(hr(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return D(e)}function ke(e){return ke=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},ke(e)}var Fm=Oe(function e(t,n){Ae(this,e),m(this,"cancelBubble",void 0),m(this,"cancelable",void 0),m(this,"target",void 0),m(this,"currentTarget",void 0),m(this,"preventDefault",void 0),m(this,"stopPropagation",void 0),m(this,"type",void 0),m(this,"timeStamp",void 0),this.cancelBubble=!1,this.cancelable=!1,this.target=null,this.currentTarget=null,this.preventDefault=function(){},this.stopPropagation=function(){},this.type=t,this.timeStamp=Date.now()});function gW(e,t){var n=typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=vW(e))||t&&e&&typeof e.length=="number"){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(u){throw u},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i=!0,o=!1,s;return{s:function(){n=n.call(e)},n:function(){var u=n.next();return i=u.done,u},e:function(u){o=!0,s=u},f:function(){try{!i&&n.return!=null&&n.return()}finally{if(o)throw s}}}}function vW(e,t){if(!!e){if(typeof e=="string")return ST(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ST(e,t)}}function ST(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Op=new WeakMap,pE=function(){function e(){Ae(this,e),Op.set(this,{})}return Oe(e,[{key:"addEventListener",value:function(n,r){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=Op.get(this);i||(i={}),i[n]||(i[n]=[]),i[n].push(r),Op.set(this,i),a.capture,a.once,a.passive}},{key:"removeEventListener",value:function(n,r){var a=Op.get(this);if(a){var i=a[n];if(i&&i.length>0){for(var o=i.length;o--;o>0)if(i[o]===r){i.splice(o,1);break}}}}},{key:"dispatchEvent",value:function(n){var r=Op.get(this)[n.type];if(r){var a=gW(r),i;try{for(a.s();!(i=a.n()).done;){var o=i.value;o(n)}}catch(s){a.e(s)}finally{a.f()}}}}]),e}();function bW(e){var t=yW();return function(){var r=ke(e),a;if(t){var i=ke(this).constructor;a=Reflect.construct(r,arguments,i)}else a=r.apply(this,arguments);return It(this,a)}}function yW(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var vN=function(e){Tt(n,e);var t=bW(n);function n(){var r;return Ae(this,n),r=t.call(this),m(D(r),"childNodes",void 0),r.childNodes=[],r}return Oe(n,[{key:"appendChild",value:function(a){this.childNodes.push(a)}},{key:"cloneNode",value:function(){var a=Object.create(this);return Object.assign(a,this),a}},{key:"removeChild",value:function(a){var i=this.childNodes.findIndex(function(o){return o===a});return i>-1?this.childNodes.splice(i,1):null}}]),n}(pE);function xW(e){var t=_W();return function(){var r=ke(e),a;if(t){var i=ke(this).constructor;a=Reflect.construct(r,arguments,i)}else a=r.apply(this,arguments);return It(this,a)}}function _W(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var bN=function(e){Tt(n,e);var t=xW(n);function n(){var r;return Ae(this,n),r=t.call(this),m(D(r),"className",void 0),m(D(r),"children",void 0),r.className="",r.children=[],r}return Oe(n,[{key:"setAttribute",value:function(a,i){this[a]=i}},{key:"getAttribute",value:function(a){return this[a]}},{key:"setAttributeNS",value:function(a,i){this[a]=i}},{key:"getAttributeNS",value:function(a){return this[a]}}]),n}(vN),wW=typeof my!="undefined"&&!!my&&typeof my.showToast=="function"&&my.isFRM!==!0,Uw,$w,Vw,jw;if(wW){var J0=my.getSystemInfoSync();Uw=J0.screenWidth,$w=J0.screenHeight,Vw=J0.windowWidth,jw=J0.windowHeight}else{var CT=yo.innerWidth,TT=yo.innerHeight;Uw=CT,$w=TT,Vw=CT,jw=TT}var Th={width:Uw,height:$w,availWidth:Vw,availHeight:jw,availLeft:0,availTop:0},$b=Th.availWidth,Vb=Th.availHeight,AT={style:[]};function yN(e,t){if(!("parentNode"in e)){var n;t===0?n=function(){return null}:t===1?n=function(){return AT}:n=function(){return null},Object.defineProperty(e,"parentNode",{enumerable:!0,get:n})}if(!("parentElement"in e)){var r;t===0?r=function(){return null}:t===1?r=function(){return AT}:r=function(){return null},Object.defineProperty(e,"parentElement",{enumerable:!0,get:r})}}function kW(e){e.style=e.style||{},Object.assign(e.style,{top:"0px",left:"0px",width:$b+"px",height:Vb+"px",margin:"0px",padding:"0px"})}function EW(e){"clientLeft"in e||(e.clientLeft=0,e.clientTop=0),"clientWidth"in e||(e.clientWidth=$b,e.clientHeight=Vb),"getBoundingClientRect"in e||(e.getBoundingClientRect=function(){var t={x:0,y:0,top:0,left:0,width:this.clientWidth,height:this.clientHeight,right:this.clientWidth,bottom:this.clientHeight};return t})}function SW(e){"offsetLeft"in e||(e.offsetLeft=0,e.offsetTop=0),"offsetWidth"in e||(e.offsetWidth=$b,e.offsetHeight=Vb)}function CW(e){"scrollLeft"in e||(e.scrollLeft=0,e.scrollTop=0),"scrollWidth"in e||(e.scrollWidth=$b,e.scrollHeight=Vb)}function xN(e){var t=function(){return!0};e.classList=[],e.classList.add=t,e.classList.remove=t,e.classList.contains=t,e.classList.toggle=t}function TW(e){var t=AW();return function(){var r=ke(e),a;if(t){var i=ke(this).constructor;a=Reflect.construct(r,arguments,i)}else a=r.apply(this,arguments);return It(this,a)}}function AW(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function rf(){}var Fd=function(e){Tt(n,e);var t=TW(n);function n(){var r,a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",i=arguments.length>1?arguments[1]:void 0;return Ae(this,n),r=t.call(this),m(D(r),"className",void 0),m(D(r),"children",void 0),m(D(r),"focus",void 0),m(D(r),"blur",void 0),m(D(r),"insertBefore",void 0),m(D(r),"appendChild",void 0),m(D(r),"removeChild",void 0),m(D(r),"remove",void 0),m(D(r),"innerHTML",void 0),m(D(r),"tagName",void 0),r.className="",r.children=[],r.focus=rf,r.blur=rf,r.insertBefore=rf,r.appendChild=rf,r.removeChild=rf,r.remove=rf,r.innerHTML="",r.tagName=a.toUpperCase(),yN(D(r),i),kW(D(r)),xN(D(r)),EW(D(r)),SW(D(r)),CW(D(r)),r}return Oe(n)}(bN);function OW(e){var t=MW();return function(){var r=ke(e),a;if(t){var i=ke(this).constructor;a=Reflect.construct(r,arguments,i)}else a=r.apply(this,arguments);return It(this,a)}}function MW(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var _N=function(e){Tt(n,e);var t=OW(n);function n(r){return Ae(this,n),t.call(this,r)}return Oe(n,[{key:"addTextTrack",value:function(){}},{key:"captureStream",value:function(){}},{key:"fastSeek",value:function(){}},{key:"load",value:function(){}},{key:"pause",value:function(){}},{key:"play",value:function(){}}]),n}(Fd);function RW(e){var t=PW();return function(){var r=ke(e),a;if(t){var i=ke(this).constructor;a=Reflect.construct(r,arguments,i)}else a=r.apply(this,arguments);return It(this,a)}}function PW(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var wN=function(e){Tt(n,e);var t=RW(n);function n(){return Ae(this,n),t.call(this,"video")}return Oe(n)}(_N),IW={};function wc(){return IW}var kN=Oe(function e(){Ae(this,e);var t=wc(),n=t.createImage&&t.createImage()||{};return"tagName"in n||(n.tagName="IMG",n.__proto__=e.prototype),yN(n),xN(n),Object.assign(n,{addEventListener:function(a,i){n["on".concat(a)]=i.bind(n)},removeEventListener:function(a){n["on".concat(a)]=null}}),n}),EN={href:"",protocol:"",host:""};function SN(e){var t=LW();return function(){var r=ke(e),a;if(t){var i=ke(this).constructor;a=Reflect.construct(r,arguments,i)}else a=r.apply(this,arguments);return It(this,a)}}function LW(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var NW=function(e){Tt(n,e);var t=SN(n);function n(){return Ae(this,n),t.call(this,"body",0)}return Oe(n,[{key:"addEventListener",value:function(a,i){}},{key:"removeEventListener",value:function(a,i,o){}},{key:"dispatchEvent",value:function(a){}}]),n}(Fd),FW=function(e){Tt(n,e);var t=SN(n);function n(){return Ae(this,n),t.call(this,"html",0)}return Oe(n,[{key:"addEventListener",value:function(a,i){}},{key:"removeEventListener",value:function(a,i){}},{key:"dispatchEvent",value:function(a){}}]),n}(Fd),Mp={},ic={readyState:"complete",visibilityState:"visible",hidden:!1,fullscreen:!0,scripts:[],style:{},location:EN,ontouchstart:null,ontouchmove:null,ontouchend:null,onvisibilitychange:null,parentNode:null,parentElement:null,head:null,body:null,documentElement:{style:[]},createElement:function(t){return t=t.toLowerCase(),t==="canvas"?my.createOffscreenCanvas(1024,128,"2d"):t==="img"?new kN:t==="video"?new wN:new Fd(t)},createElementNS:function(t,n){return this.createElement(n)},createTextNode:function(t){return t},getElementById:function(t){return null},getElementsByTagName:function(t){return t=t.toLowerCase(),[]},getElementsByTagNameNS:function(t,n){return this.getElementsByTagName(n)},getElementsByName:function(t){return[]},querySelector:function(t){return null},querySelectorAll:function(t){return[]},addEventListener:function(t,n,r){Mp[t]||(Mp[t]=[]),Mp[t].push(n)},removeEventListener:function(t,n){var r=Mp[t];if(r&&r.length>0){for(var a=r.length;a--;a>0)if(r[a]===n){r.splice(a,1);break}}},dispatchEvent:function(t){var n=t.type,r=Mp[n];if(r)for(var a=0;a<r.length;a++)r[a](t);t.target&&typeof t.target["on"+n]=="function"&&t.target["on"+n](t)},createEvent:function(t){return new Fm(t)}};ic.documentElement=new FW;ic.head=new Fd("head");ic.body=new NW;var DW=Object,BW=function(){function e(){Ae(this,e),m(this,"_w",void 0),m(this,"_h",void 0),m(this,"_data",void 0);var t=arguments.length;if(t===2){if(typeof arguments[0]=="number"&&typeof arguments[1]=="number"){this._w=arguments[0],this._h=arguments[1],this._data=new Uint8ClampedArray(this._w*this._h*4);return}}else t===3&&hr(arguments[0])==="object"&&typeof arguments[1]=="number"&&typeof arguments[2]=="number"&&(this._data=arguments[0],this._w=arguments[1],this._h=arguments[2]);throw new Error("ImageData: params error")}return Oe(e,[{key:"width",get:function(){return this._w}},{key:"height",get:function(){return this._h}},{key:"data",get:function(){return this._data}}]),e}(),zW=typeof my!="undefined"&&!!my&&typeof my.showToast=="function"&&my.isFRM!==!0,Gw,yi,zv;if(zW){var A1=my.getSystemInfoSync();Gw=A1.system,yi=A1.platform,zv=A1.language}else{var Oi={versions:function(){var e=yo.navigator.userAgent;return{trident:e.indexOf("Trident")>-1,presto:e.indexOf("Presto")>-1,webKit:e.indexOf("AppleWebKit")>-1,gecko:e.indexOf("Gecko")>-1&&e.indexOf("KHTML")===-1,mobile:!!e.match(/AppleWebKit.*Mobile.*/),ios:!!e.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),android:e.indexOf("Android")>-1||e.indexOf("Linux")>-1,iPhone:e.indexOf("iPhone")>-1,iPad:e.indexOf("iPad")>-1,webApp:e.indexOf("Safari")===-1,weixin:e.indexOf("MicroMessenger")>-1,qq:e.match(/\sQQ/i)===" qq"}}(),language:(yo.navigator.browserLanguage||yo.navigator.language).toLowerCase()};Oi.versions.android?yi="android":Oi.versions.trident?yi="IE":Oi.versions.presto?yi="Opera":Oi.versions.webKit?yi="webKit":Oi.versions.gecko?yi="Firefox":Oi.versions.mobile?yi="mobile":Oi.versions.ios?yi="ios":Oi.versions.iPhone?yi="iPhone":Oi.versions.iPad?yi="ipad":Oi.versions.webApp?yi="webApp":Oi.versions.weixin?yi="weixin":Oi.versions.qq&&(yi="qq"),Gw=yo.navigator.userAgent,zv=Oi.language}var UW=Gw.toLowerCase().indexOf("android")!==-1,CN=UW?"Android; CPU Android 6.0":"iPhone; CPU iPhone OS 10_3_1 like Mac OS X",$W="Mozilla/5.0 (".concat(CN,") AppleWebKit/603.1.30 (KHTML, like Gecko) Mobile/14E8301 MicroMessenger/6.6.0 MiniGame NetType/WIFI Language/").concat(zv),VW={platform:yi,language:zv,appVersion:"5.0 (".concat(CN,") AppleWebKit/601.1.46 (KHTML, like Gecko) Version/9.0 Mobile/13B143 Safari/601.1"),userAgent:$W},jW={mark:function(t){return null},clearMeasures:function(t){return null},clearMarks:function(t){return null},measure:function(t,n,r){return{duration:0}},now:function(){}},OT=0,MT=0;function GW(e){var t=Date.now(),n=Math.max(OT+23,t);return MT=setTimeout(function(){e(OT=n)},n-t),MT}function HW(e){var t=wc();return t.requestAnimationFrame?t.requestAnimationFrame(e):GW(e)}function WW(e){var t=wc();return t.cancelAnimationFrame?t.cancelAnimationFrame(e):clearTimeout(e)}var YW=function(){function e(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";if(Ae(this,e),m(this,"href",void 0),t.indexOf("http://")==0||t.indexOf("https://")==0){this.href=t;return}this.href=n+t}return Oe(e,null,[{key:"createObjectURL",value:function(n){var r=n.buffers[0],a=n.type,i=XW(r),o="data:".concat(a,";base64, ");return o+i}}]),e}();function XW(e){for(var t="",n=new Uint8Array(e),r=n.byteLength,a=0;a<r;a++)t+=String.fromCharCode(n[a]);return gN(t)}var ZW={GCCSO_SHADER_BINARY_FJ:37472,_3DC_XY_AMD:34810,_3DC_X_AMD:34809,ACTIVE_ATTRIBUTES:35721,ACTIVE_ATTRIBUTE_MAX_LENGTH:35722,ACTIVE_PROGRAM_EXT:33369,ACTIVE_TEXTURE:34016,ACTIVE_UNIFORMS:35718,ACTIVE_UNIFORM_MAX_LENGTH:35719,ALIASED_LINE_WIDTH_RANGE:33902,ALIASED_POINT_SIZE_RANGE:33901,ALL_COMPLETED_NV:34034,ALL_SHADER_BITS_EXT:4294967295,ALPHA:6406,ALPHA16F_EXT:34844,ALPHA32F_EXT:34838,ALPHA8_EXT:32828,ALPHA8_OES:32828,ALPHA_BITS:3413,ALPHA_TEST_FUNC_QCOM:3009,ALPHA_TEST_QCOM:3008,ALPHA_TEST_REF_QCOM:3010,ALREADY_SIGNALED_APPLE:37146,ALWAYS:519,AMD_compressed_3DC_texture:1,AMD_compressed_ATC_texture:1,AMD_performance_monitor:1,AMD_program_binary_Z400:1,ANGLE_depth_texture:1,ANGLE_framebuffer_blit:1,ANGLE_framebuffer_multisample:1,ANGLE_instanced_arrays:1,ANGLE_pack_reverse_row_order:1,ANGLE_program_binary:1,ANGLE_texture_compression_dxt3:1,ANGLE_texture_compression_dxt5:1,ANGLE_texture_usage:1,ANGLE_translated_shader_source:1,ANY_SAMPLES_PASSED_CONSERVATIVE_EXT:36202,ANY_SAMPLES_PASSED_EXT:35887,APPLE_copy_texture_levels:1,APPLE_framebuffer_multisample:1,APPLE_rgb_422:1,APPLE_sync:1,APPLE_texture_format_BGRA8888:1,APPLE_texture_max_level:1,ARM_mali_program_binary:1,ARM_mali_shader_binary:1,ARM_rgba8:1,ARRAY_BUFFER:34962,ARRAY_BUFFER_BINDING:34964,ATC_RGBA_EXPLICIT_ALPHA_AMD:35987,ATC_RGBA_INTERPOLATED_ALPHA_AMD:34798,ATC_RGB_AMD:35986,ATTACHED_SHADERS:35717,BACK:1029,BGRA8_EXT:37793,BGRA_EXT:32993,BGRA_IMG:32993,BINNING_CONTROL_HINT_QCOM:36784,BLEND:3042,BLEND_COLOR:32773,BLEND_DST_ALPHA:32970,BLEND_DST_RGB:32968,BLEND_EQUATION:32777,BLEND_EQUATION_ALPHA:34877,BLEND_EQUATION_RGB:32777,BLEND_SRC_ALPHA:32971,BLEND_SRC_RGB:32969,BLUE_BITS:3412,BOOL:35670,BOOL_VEC2:35671,BOOL_VEC3:35672,BOOL_VEC4:35673,BUFFER:33504,BUFFER_ACCESS_OES:35003,BUFFER_MAPPED_OES:35004,BUFFER_MAP_POINTER_OES:35005,BUFFER_OBJECT_EXT:37201,BUFFER_SIZE:34660,BUFFER_USAGE:34661,BYTE:5120,CCW:2305,CLAMP_TO_BORDER_NV:33069,CLAMP_TO_EDGE:33071,COLOR_ATTACHMENT0:36064,COLOR_ATTACHMENT0_NV:36064,COLOR_ATTACHMENT10_NV:36074,COLOR_ATTACHMENT11_NV:36075,COLOR_ATTACHMENT12_NV:36076,COLOR_ATTACHMENT13_NV:36077,COLOR_ATTACHMENT14_NV:36078,COLOR_ATTACHMENT15_NV:36079,COLOR_ATTACHMENT1_NV:36065,COLOR_ATTACHMENT2_NV:36066,COLOR_ATTACHMENT3_NV:36067,COLOR_ATTACHMENT4_NV:36068,COLOR_ATTACHMENT5_NV:36069,COLOR_ATTACHMENT6_NV:36070,COLOR_ATTACHMENT7_NV:36071,COLOR_ATTACHMENT8_NV:36072,COLOR_ATTACHMENT9_NV:36073,COLOR_ATTACHMENT_EXT:37104,COLOR_BUFFER_BIT:16384,COLOR_BUFFER_BIT0_QCOM:1,COLOR_BUFFER_BIT1_QCOM:2,COLOR_BUFFER_BIT2_QCOM:4,COLOR_BUFFER_BIT3_QCOM:8,COLOR_BUFFER_BIT4_QCOM:16,COLOR_BUFFER_BIT5_QCOM:32,COLOR_BUFFER_BIT6_QCOM:64,COLOR_BUFFER_BIT7_QCOM:128,COLOR_CLEAR_VALUE:3106,COLOR_EXT:6144,COLOR_WRITEMASK:3107,COMPARE_REF_TO_TEXTURE_EXT:34894,COMPILE_STATUS:35713,COMPRESSED_RGBA_ASTC_10x10_KHR:37819,COMPRESSED_RGBA_ASTC_10x5_KHR:37816,COMPRESSED_RGBA_ASTC_10x6_KHR:37817,COMPRESSED_RGBA_ASTC_10x8_KHR:37818,COMPRESSED_RGBA_ASTC_12x10_KHR:37820,COMPRESSED_RGBA_ASTC_12x12_KHR:37821,COMPRESSED_RGBA_ASTC_4x4_KHR:37808,COMPRESSED_RGBA_ASTC_5x4_KHR:37809,COMPRESSED_RGBA_ASTC_5x5_KHR:37810,COMPRESSED_RGBA_ASTC_6x5_KHR:37811,COMPRESSED_RGBA_ASTC_6x6_KHR:37812,COMPRESSED_RGBA_ASTC_8x5_KHR:37813,COMPRESSED_RGBA_ASTC_8x6_KHR:37814,COMPRESSED_RGBA_ASTC_8x8_KHR:37815,COMPRESSED_RGBA_PVRTC_2BPPV1_IMG:35843,COMPRESSED_RGBA_PVRTC_2BPPV2_IMG:37175,COMPRESSED_RGBA_PVRTC_4BPPV1_IMG:35842,COMPRESSED_RGBA_PVRTC_4BPPV2_IMG:37176,COMPRESSED_RGBA_S3TC_DXT1_EXT:33777,COMPRESSED_RGBA_S3TC_DXT3_ANGLE:33778,COMPRESSED_RGBA_S3TC_DXT5_ANGLE:33779,COMPRESSED_RGB_PVRTC_2BPPV1_IMG:35841,COMPRESSED_RGB_PVRTC_4BPPV1_IMG:35840,COMPRESSED_RGB_S3TC_DXT1_EXT:33776,COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:37851,COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:37848,COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:37849,COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:37850,COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:37852,COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:37853,COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:37840,COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:37841,COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:37842,COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:37843,COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:37844,COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:37845,COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:37846,COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:37847,COMPRESSED_SRGB_ALPHA_S3TC_DXT1_NV:35917,COMPRESSED_SRGB_ALPHA_S3TC_DXT3_NV:35918,COMPRESSED_SRGB_ALPHA_S3TC_DXT5_NV:35919,COMPRESSED_SRGB_S3TC_DXT1_NV:35916,COMPRESSED_TEXTURE_FORMATS:34467,CONDITION_SATISFIED_APPLE:37148,CONSTANT_ALPHA:32771,CONSTANT_COLOR:32769,CONTEXT_FLAG_DEBUG_BIT:2,CONTEXT_ROBUST_ACCESS_EXT:37107,COUNTER_RANGE_AMD:35777,COUNTER_TYPE_AMD:35776,COVERAGE_ALL_FRAGMENTS_NV:36565,COVERAGE_ATTACHMENT_NV:36562,COVERAGE_AUTOMATIC_NV:36567,COVERAGE_BUFFERS_NV:36563,COVERAGE_BUFFER_BIT_NV:32768,COVERAGE_COMPONENT4_NV:36561,COVERAGE_COMPONENT_NV:36560,COVERAGE_EDGE_FRAGMENTS_NV:36566,COVERAGE_SAMPLES_NV:36564,CPU_OPTIMIZED_QCOM:36785,CULL_FACE:2884,CULL_FACE_MODE:2885,CURRENT_PROGRAM:35725,CURRENT_QUERY_EXT:34917,CURRENT_VERTEX_ATTRIB:34342,CW:2304,DEBUG_CALLBACK_FUNCTION:33348,DEBUG_CALLBACK_USER_PARAM:33349,DEBUG_GROUP_STACK_DEPTH:33389,DEBUG_LOGGED_MESSAGES:37189,DEBUG_NEXT_LOGGED_MESSAGE_LENGTH:33347,DEBUG_OUTPUT:37600,DEBUG_OUTPUT_SYNCHRONOUS:33346,DEBUG_SEVERITY_HIGH:37190,DEBUG_SEVERITY_LOW:37192,DEBUG_SEVERITY_MEDIUM:37191,DEBUG_SEVERITY_NOTIFICATION:33387,DEBUG_SOURCE_API:33350,DEBUG_SOURCE_APPLICATION:33354,DEBUG_SOURCE_OTHER:33355,DEBUG_SOURCE_SHADER_COMPILER:33352,DEBUG_SOURCE_THIRD_PARTY:33353,DEBUG_SOURCE_WINDOW_SYSTEM:33351,DEBUG_TYPE_DEPRECATED_BEHAVIOR:33357,DEBUG_TYPE_ERROR:33356,DEBUG_TYPE_MARKER:33384,DEBUG_TYPE_OTHER:33361,DEBUG_TYPE_PERFORMANCE:33360,DEBUG_TYPE_POP_GROUP:33386,DEBUG_TYPE_PORTABILITY:33359,DEBUG_TYPE_PUSH_GROUP:33385,DEBUG_TYPE_UNDEFINED_BEHAVIOR:33358,DECR:7683,DECR_WRAP:34056,DELETE_STATUS:35712,DEPTH24_STENCIL8_OES:35056,DEPTH_ATTACHMENT:36096,DEPTH_STENCIL_ATTACHMENT:33306,DEPTH_BITS:3414,DEPTH_BUFFER_BIT:256,DEPTH_BUFFER_BIT0_QCOM:256,DEPTH_BUFFER_BIT1_QCOM:512,DEPTH_BUFFER_BIT2_QCOM:1024,DEPTH_BUFFER_BIT3_QCOM:2048,DEPTH_BUFFER_BIT4_QCOM:4096,DEPTH_BUFFER_BIT5_QCOM:8192,DEPTH_BUFFER_BIT6_QCOM:16384,DEPTH_BUFFER_BIT7_QCOM:32768,DEPTH_CLEAR_VALUE:2931,DEPTH_COMPONENT:6402,DEPTH_COMPONENT16:33189,DEPTH_COMPONENT16_NONLINEAR_NV:36396,DEPTH_COMPONENT16_OES:33189,DEPTH_COMPONENT24_OES:33190,DEPTH_COMPONENT32_OES:33191,DEPTH_EXT:6145,DEPTH_FUNC:2932,DEPTH_RANGE:2928,DEPTH_STENCIL:34041,DEPTH_STENCIL_OES:34041,DEPTH_TEST:2929,DEPTH_WRITEMASK:2930,DITHER:3024,DMP_shader_binary:1,DONT_CARE:4352,DRAW_BUFFER0_NV:34853,DRAW_BUFFER10_NV:34863,DRAW_BUFFER11_NV:34864,DRAW_BUFFER12_NV:34865,DRAW_BUFFER13_NV:34866,DRAW_BUFFER14_NV:34867,DRAW_BUFFER15_NV:34868,DRAW_BUFFER1_NV:34854,DRAW_BUFFER2_NV:34855,DRAW_BUFFER3_NV:34856,DRAW_BUFFER4_NV:34857,DRAW_BUFFER5_NV:34858,DRAW_BUFFER6_NV:34859,DRAW_BUFFER7_NV:34860,DRAW_BUFFER8_NV:34861,DRAW_BUFFER9_NV:34862,DRAW_BUFFER_EXT:3073,DRAW_FRAMEBUFFER_ANGLE:36009,DRAW_FRAMEBUFFER_APPLE:36009,DRAW_FRAMEBUFFER_BINDING_ANGLE:36006,DRAW_FRAMEBUFFER_BINDING_APPLE:36006,DRAW_FRAMEBUFFER_BINDING_NV:36006,DRAW_FRAMEBUFFER_NV:36009,DST_ALPHA:772,DST_COLOR:774,DYNAMIC_DRAW:35048,ELEMENT_ARRAY_BUFFER:34963,ELEMENT_ARRAY_BUFFER_BINDING:34965,EQUAL:514,ES_VERSION_2_0:1,ETC1_RGB8_OES:36196,ETC1_SRGB8_NV:35054,EXTENSIONS:7939,EXT_blend_minmax:1,EXT_color_buffer_half_float:1,EXT_debug_label:1,EXT_debug_marker:1,EXT_discard_framebuffer:1,EXT_map_buffer_range:1,EXT_multi_draw_arrays:1,EXT_multisampled_render_to_texture:1,EXT_multiview_draw_buffers:1,EXT_occlusion_query_boolean:1,EXT_read_format_bgra:1,EXT_robustness:1,EXT_sRGB:1,EXT_separate_shader_objects:1,EXT_shader_framebuffer_fetch:1,EXT_shader_texture_lod:1,EXT_shadow_samplers:1,EXT_texture_compression_dxt1:1,EXT_texture_filter_anisotropic:1,EXT_texture_format_BGRA8888:1,EXT_texture_rg:1,EXT_texture_storage:1,EXT_texture_type_2_10_10_10_REV:1,EXT_unpack_subimage:1,FALSE:0,FASTEST:4353,FENCE_CONDITION_NV:34036,FENCE_STATUS_NV:34035,FIXED:5132,FJ_shader_binary_GCCSO:1,FLOAT:5126,FLOAT_MAT2:35674,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,FRAGMENT_SHADER:35632,FRAGMENT_SHADER_BIT_EXT:2,FRAGMENT_SHADER_DERIVATIVE_HINT_OES:35723,FRAGMENT_SHADER_DISCARDS_SAMPLES_EXT:35410,FRAMEBUFFER:36160,FRAMEBUFFER_ATTACHMENT_ANGLE:37795,FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING_EXT:33296,FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE_EXT:33297,FRAMEBUFFER_ATTACHMENT_OBJECT_NAME:36049,FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE:36048,FRAMEBUFFER_ATTACHMENT_TEXTURE_3D_ZOFFSET_OES:36052,FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE:36051,FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL:36050,FRAMEBUFFER_ATTACHMENT_TEXTURE_SAMPLES_EXT:36204,FRAMEBUFFER_BINDING:36006,FRAMEBUFFER_COMPLETE:36053,FRAMEBUFFER_INCOMPLETE_ATTACHMENT:36054,FRAMEBUFFER_INCOMPLETE_DIMENSIONS:36057,FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:36055,FRAMEBUFFER_INCOMPLETE_MULTISAMPLE_ANGLE:36182,FRAMEBUFFER_INCOMPLETE_MULTISAMPLE_APPLE:36182,FRAMEBUFFER_INCOMPLETE_MULTISAMPLE_EXT:36182,FRAMEBUFFER_INCOMPLETE_MULTISAMPLE_IMG:37172,FRAMEBUFFER_INCOMPLETE_MULTISAMPLE_NV:36182,FRAMEBUFFER_UNDEFINED_OES:33305,FRAMEBUFFER_UNSUPPORTED:36061,FRONT:1028,FRONT_AND_BACK:1032,FRONT_FACE:2886,FUNC_ADD:32774,FUNC_REVERSE_SUBTRACT:32779,FUNC_SUBTRACT:32778,GENERATE_MIPMAP_HINT:33170,GEQUAL:518,GPU_OPTIMIZED_QCOM:36786,GREATER:516,GREEN_BITS:3411,GUILTY_CONTEXT_RESET_EXT:33363,HALF_FLOAT_OES:36193,HIGH_FLOAT:36338,HIGH_INT:36341,IMG_multisampled_render_to_texture:1,IMG_program_binary:1,IMG_read_format:1,IMG_shader_binary:1,IMG_texture_compression_pvrtc:1,IMG_texture_compression_pvrtc2:1,IMPLEMENTATION_COLOR_READ_FORMAT:35739,IMPLEMENTATION_COLOR_READ_TYPE:35738,INCR:7682,INCR_WRAP:34055,INFO_LOG_LENGTH:35716,INNOCENT_CONTEXT_RESET_EXT:33364,INT:5124,INT_10_10_10_2_OES:36343,INT_VEC2:35667,INT_VEC3:35668,INT_VEC4:35669,INVALID_ENUM:1280,INVALID_FRAMEBUFFER_OPERATION:1286,INVALID_OPERATION:1282,INVALID_VALUE:1281,INVERT:5386,KEEP:7680,KHR_debug:1,KHR_texture_compression_astc_ldr:1,LEFT:1030,LEQUAL:515,LESS:513,LINEAR:9729,LINEAR_MIPMAP_LINEAR:9987,LINEAR_MIPMAP_NEAREST:9985,LINES:1,LINE_LOOP:2,LINE_STRIP:3,LINE_WIDTH:2849,LINK_STATUS:35714,LOSE_CONTEXT_ON_RESET_EXT:33362,LOW_FLOAT:36336,LOW_INT:36339,LUMINANCE:6409,LUMINANCE16F_EXT:34846,LUMINANCE32F_EXT:34840,LUMINANCE4_ALPHA4_OES:32835,LUMINANCE8_ALPHA8_EXT:32837,LUMINANCE8_ALPHA8_OES:32837,LUMINANCE8_EXT:32832,LUMINANCE8_OES:32832,LUMINANCE_ALPHA:6410,LUMINANCE_ALPHA16F_EXT:34847,LUMINANCE_ALPHA32F_EXT:34841,MALI_PROGRAM_BINARY_ARM:36705,MALI_SHADER_BINARY_ARM:36704,MAP_FLUSH_EXPLICIT_BIT_EXT:16,MAP_INVALIDATE_BUFFER_BIT_EXT:8,MAP_INVALIDATE_RANGE_BIT_EXT:4,MAP_READ_BIT_EXT:1,MAP_UNSYNCHRONIZED_BIT_EXT:32,MAP_WRITE_BIT_EXT:2,MAX_3D_TEXTURE_SIZE_OES:32883,MAX_COLOR_ATTACHMENTS_NV:36063,MAX_COMBINED_TEXTURE_IMAGE_UNITS:35661,MAX_CUBE_MAP_TEXTURE_SIZE:34076,MAX_DEBUG_GROUP_STACK_DEPTH:33388,MAX_DEBUG_LOGGED_MESSAGES:37188,MAX_DEBUG_MESSAGE_LENGTH:37187,MAX_DRAW_BUFFERS_NV:34852,MAX_EXT:32776,MAX_FRAGMENT_UNIFORM_VECTORS:36349,MAX_LABEL_LENGTH:33512,MAX_MULTIVIEW_BUFFERS_EXT:37106,MAX_RENDERBUFFER_SIZE:34024,MAX_SAMPLES_ANGLE:36183,MAX_SAMPLES_APPLE:36183,MAX_SAMPLES_EXT:36183,MAX_SAMPLES_IMG:37173,MAX_SAMPLES_NV:36183,MAX_SERVER_WAIT_TIMEOUT_APPLE:37137,MAX_TEXTURE_IMAGE_UNITS:34930,MAX_TEXTURE_MAX_ANISOTROPY_EXT:34047,MAX_TEXTURE_SIZE:3379,MAX_VARYING_VECTORS:36348,MAX_VERTEX_ATTRIBS:34921,MAX_VERTEX_TEXTURE_IMAGE_UNITS:35660,MAX_VERTEX_UNIFORM_VECTORS:36347,MAX_VIEWPORT_DIMS:3386,MEDIUM_FLOAT:36337,MEDIUM_INT:36340,MIN_EXT:32775,MIRRORED_REPEAT:33648,MULTISAMPLE_BUFFER_BIT0_QCOM:16777216,MULTISAMPLE_BUFFER_BIT1_QCOM:33554432,MULTISAMPLE_BUFFER_BIT2_QCOM:67108864,MULTISAMPLE_BUFFER_BIT3_QCOM:134217728,MULTISAMPLE_BUFFER_BIT4_QCOM:268435456,MULTISAMPLE_BUFFER_BIT5_QCOM:536870912,MULTISAMPLE_BUFFER_BIT6_QCOM:1073741824,MULTISAMPLE_BUFFER_BIT7_QCOM:2147483648,MULTIVIEW_EXT:37105,NEAREST:9728,NEAREST_MIPMAP_LINEAR:9986,NEAREST_MIPMAP_NEAREST:9984,NEVER:512,NICEST:4354,NONE:0,NOTEQUAL:517,NO_ERROR:0,NO_RESET_NOTIFICATION_EXT:33377,NUM_COMPRESSED_TEXTURE_FORMATS:34466,NUM_PROGRAM_BINARY_FORMATS_OES:34814,NUM_SHADER_BINARY_FORMATS:36345,NV_coverage_sample:1,NV_depth_nonlinear:1,NV_draw_buffers:1,NV_draw_instanced:1,NV_fbo_color_attachments:1,NV_fence:1,NV_framebuffer_blit:1,NV_framebuffer_multisample:1,NV_generate_mipmap_sRGB:1,NV_instanced_arrays:1,NV_read_buffer:1,NV_read_buffer_front:1,NV_read_depth:1,NV_read_depth_stencil:1,NV_read_stencil:1,NV_sRGB_formats:1,NV_shadow_samplers_array:1,NV_shadow_samplers_cube:1,NV_texture_border_clamp:1,NV_texture_compression_s3tc_update:1,NV_texture_npot_2D_mipmap:1,OBJECT_TYPE_APPLE:37138,OES_EGL_image:1,OES_EGL_image_external:1,OES_compressed_ETC1_RGB8_texture:1,OES_compressed_paletted_texture:1,OES_depth24:1,OES_depth32:1,OES_depth_texture:1,OES_element_index_uint:1,OES_fbo_render_mipmap:1,OES_fragment_precision_high:1,OES_get_program_binary:1,OES_mapbuffer:1,OES_packed_depth_stencil:1,OES_required_internalformat:1,OES_rgb8_rgba8:1,OES_standard_derivatives:1,OES_stencil1:1,OES_stencil4:1,OES_surfaceless_context:1,OES_texture_3D:1,OES_texture_float:1,OES_texture_float_linear:1,OES_texture_half_float:1,OES_texture_half_float_linear:1,OES_texture_npot:1,OES_vertex_array_object:1,OES_vertex_half_float:1,OES_vertex_type_10_10_10_2:1,ONE:1,ONE_MINUS_CONSTANT_ALPHA:32772,ONE_MINUS_CONSTANT_COLOR:32770,ONE_MINUS_DST_ALPHA:773,ONE_MINUS_DST_COLOR:775,ONE_MINUS_SRC_ALPHA:771,ONE_MINUS_SRC_COLOR:769,OUT_OF_MEMORY:1285,PACK_ALIGNMENT:3333,PACK_REVERSE_ROW_ORDER_ANGLE:37796,PALETTE4_R5_G6_B5_OES:35730,PALETTE4_RGB5_A1_OES:35732,PALETTE4_RGB8_OES:35728,PALETTE4_RGBA4_OES:35731,PALETTE4_RGBA8_OES:35729,PALETTE8_R5_G6_B5_OES:35735,PALETTE8_RGB5_A1_OES:35737,PALETTE8_RGB8_OES:35733,PALETTE8_RGBA4_OES:35736,PALETTE8_RGBA8_OES:35734,PERCENTAGE_AMD:35779,PERFMON_GLOBAL_MODE_QCOM:36768,PERFMON_RESULT_AMD:35782,PERFMON_RESULT_AVAILABLE_AMD:35780,PERFMON_RESULT_SIZE_AMD:35781,POINTS:0,POLYGON_OFFSET_FACTOR:32824,POLYGON_OFFSET_FILL:32823,POLYGON_OFFSET_UNITS:10752,PROGRAM:33506,PROGRAM_BINARY_ANGLE:37798,PROGRAM_BINARY_FORMATS_OES:34815,PROGRAM_BINARY_LENGTH_OES:34625,PROGRAM_OBJECT_EXT:35648,PROGRAM_PIPELINE_BINDING_EXT:33370,PROGRAM_PIPELINE_OBJECT_EXT:35407,PROGRAM_SEPARABLE_EXT:33368,QCOM_alpha_test:1,QCOM_binning_control:1,QCOM_driver_control:1,QCOM_extended_get:1,QCOM_extended_get2:1,QCOM_perfmon_global_mode:1,QCOM_tiled_rendering:1,QCOM_writeonly_rendering:1,QUERY:33507,QUERY_OBJECT_EXT:37203,QUERY_RESULT_AVAILABLE_EXT:34919,QUERY_RESULT_EXT:34918,R16F_EXT:33325,R32F_EXT:33326,R8_EXT:33321,READ_BUFFER_EXT:3074,READ_BUFFER_NV:3074,READ_FRAMEBUFFER_ANGLE:36008,READ_FRAMEBUFFER_APPLE:36008,READ_FRAMEBUFFER_BINDING_ANGLE:36010,READ_FRAMEBUFFER_BINDING_APPLE:36010,READ_FRAMEBUFFER_BINDING_NV:36010,READ_FRAMEBUFFER_NV:36008,RED_BITS:3410,RED_EXT:6403,RENDERBUFFER:36161,RENDERBUFFER_ALPHA_SIZE:36179,RENDERBUFFER_BINDING:36007,RENDERBUFFER_BLUE_SIZE:36178,RENDERBUFFER_DEPTH_SIZE:36180,RENDERBUFFER_GREEN_SIZE:36177,RENDERBUFFER_HEIGHT:36163,RENDERBUFFER_INTERNAL_FORMAT:36164,RENDERBUFFER_RED_SIZE:36176,RENDERBUFFER_SAMPLES_ANGLE:36011,RENDERBUFFER_SAMPLES_APPLE:36011,RENDERBUFFER_SAMPLES_EXT:36011,RENDERBUFFER_SAMPLES_IMG:37171,RENDERBUFFER_SAMPLES_NV:36011,RENDERBUFFER_STENCIL_SIZE:36181,RENDERBUFFER_WIDTH:36162,RENDERER:7937,RENDER_DIRECT_TO_FRAMEBUFFER_QCOM:36787,REPEAT:10497,REPLACE:7681,REQUIRED_TEXTURE_IMAGE_UNITS_OES:36200,RESET_NOTIFICATION_STRATEGY_EXT:33366,RG16F_EXT:33327,RG32F_EXT:33328,RG8_EXT:33323,RGB:6407,RGB10_A2_EXT:32857,RGB10_EXT:32850,RGB16F_EXT:34843,RGB32F_EXT:34837,RGB565:36194,RGB565_OES:36194,RGB5_A1:32855,RGB5_A1_OES:32855,RGB8_OES:32849,RGBA:6408,RGBA16F_EXT:34842,RGBA32F_EXT:34836,RGBA4:32854,RGBA4_OES:32854,RGBA8_OES:32856,RGB_422_APPLE:35359,RG_EXT:33319,RIGHT:1031,SAMPLER:33510,SAMPLER_2D:35678,SAMPLER_2D_ARRAY_SHADOW_NV:36292,SAMPLER_2D_SHADOW_EXT:35682,SAMPLER_3D_OES:35679,SAMPLER_CUBE:35680,SAMPLER_CUBE_SHADOW_NV:36293,SAMPLER_EXTERNAL_OES:36198,SAMPLES:32937,SAMPLE_ALPHA_TO_COVERAGE:32926,SAMPLE_BUFFERS:32936,SAMPLE_COVERAGE:32928,SAMPLE_COVERAGE_INVERT:32939,SAMPLE_COVERAGE_VALUE:32938,SCISSOR_BOX:3088,SCISSOR_TEST:3089,SGX_BINARY_IMG:35850,SGX_PROGRAM_BINARY_IMG:37168,SHADER:33505,SHADER_BINARY_DMP:37456,SHADER_BINARY_FORMATS:36344,SHADER_BINARY_VIV:36804,SHADER_COMPILER:36346,SHADER_OBJECT_EXT:35656,SHADER_SOURCE_LENGTH:35720,SHADER_TYPE:35663,SHADING_LANGUAGE_VERSION:35724,SHORT:5122,SIGNALED_APPLE:37145,SLUMINANCE8_ALPHA8_NV:35909,SLUMINANCE8_NV:35911,SLUMINANCE_ALPHA_NV:35908,SLUMINANCE_NV:35910,SRC_ALPHA:770,SRC_ALPHA_SATURATE:776,SRC_COLOR:768,SRGB8_ALPHA8_EXT:35907,SRGB8_NV:35905,SRGB_ALPHA_EXT:35906,SRGB_EXT:35904,STACK_OVERFLOW:1283,STACK_UNDERFLOW:1284,STATE_RESTORE:35804,STATIC_DRAW:35044,STENCIL_ATTACHMENT:36128,STENCIL_BACK_FAIL:34817,STENCIL_BACK_FUNC:34816,STENCIL_BACK_PASS_DEPTH_FAIL:34818,STENCIL_BACK_PASS_DEPTH_PASS:34819,STENCIL_BACK_REF:36003,STENCIL_BACK_VALUE_MASK:36004,STENCIL_BACK_WRITEMASK:36005,STENCIL_BITS:3415,STENCIL_BUFFER_BIT:1024,STENCIL_BUFFER_BIT0_QCOM:65536,STENCIL_BUFFER_BIT1_QCOM:131072,STENCIL_BUFFER_BIT2_QCOM:262144,STENCIL_BUFFER_BIT3_QCOM:524288,STENCIL_BUFFER_BIT4_QCOM:1048576,STENCIL_BUFFER_BIT5_QCOM:2097152,STENCIL_BUFFER_BIT6_QCOM:4194304,STENCIL_BUFFER_BIT7_QCOM:8388608,STENCIL_CLEAR_VALUE:2961,STENCIL_EXT:6146,STENCIL_FAIL:2964,STENCIL_FUNC:2962,STENCIL_INDEX1_OES:36166,STENCIL_INDEX4_OES:36167,STENCIL_INDEX:6401,STENCIL_INDEX8:36168,STENCIL_PASS_DEPTH_FAIL:2965,STENCIL_PASS_DEPTH_PASS:2966,STENCIL_REF:2967,STENCIL_TEST:2960,STENCIL_VALUE_MASK:2963,STENCIL_WRITEMASK:2968,STREAM_DRAW:35040,SUBPIXEL_BITS:3408,SYNC_CONDITION_APPLE:37139,SYNC_FENCE_APPLE:37142,SYNC_FLAGS_APPLE:37141,SYNC_FLUSH_COMMANDS_BIT_APPLE:1,SYNC_GPU_COMMANDS_COMPLETE_APPLE:37143,SYNC_OBJECT_APPLE:35411,SYNC_STATUS_APPLE:37140,TEXTURE:5890,TEXTURE0:33984,TEXTURE1:33985,TEXTURE10:33994,TEXTURE11:33995,TEXTURE12:33996,TEXTURE13:33997,TEXTURE14:33998,TEXTURE15:33999,TEXTURE16:34e3,TEXTURE17:34001,TEXTURE18:34002,TEXTURE19:34003,TEXTURE2:33986,TEXTURE20:34004,TEXTURE21:34005,TEXTURE22:34006,TEXTURE23:34007,TEXTURE24:34008,TEXTURE25:34009,TEXTURE26:34010,TEXTURE27:34011,TEXTURE28:34012,TEXTURE29:34013,TEXTURE3:33987,TEXTURE30:34014,TEXTURE31:34015,TEXTURE4:33988,TEXTURE5:33989,TEXTURE6:33990,TEXTURE7:33991,TEXTURE8:33992,TEXTURE9:33993,TEXTURE_2D:3553,TEXTURE_3D_OES:32879,TEXTURE_BINDING_2D:32873,TEXTURE_BINDING_3D_OES:32874,TEXTURE_BINDING_CUBE_MAP:34068,TEXTURE_BINDING_EXTERNAL_OES:36199,TEXTURE_BORDER_COLOR_NV:4100,TEXTURE_COMPARE_FUNC_EXT:34893,TEXTURE_COMPARE_MODE_EXT:34892,TEXTURE_CUBE_MAP:34067,TEXTURE_CUBE_MAP_NEGATIVE_X:34070,TEXTURE_CUBE_MAP_NEGATIVE_Y:34072,TEXTURE_CUBE_MAP_NEGATIVE_Z:34074,TEXTURE_CUBE_MAP_POSITIVE_X:34069,TEXTURE_CUBE_MAP_POSITIVE_Y:34071,TEXTURE_CUBE_MAP_POSITIVE_Z:34073,TEXTURE_DEPTH_QCOM:35796,TEXTURE_EXTERNAL_OES:36197,TEXTURE_FORMAT_QCOM:35798,TEXTURE_HEIGHT_QCOM:35795,TEXTURE_IMAGE_VALID_QCOM:35800,TEXTURE_IMMUTABLE_FORMAT_EXT:37167,TEXTURE_INTERNAL_FORMAT_QCOM:35797,TEXTURE_MAG_FILTER:10240,TEXTURE_MAX_ANISOTROPY_EXT:34046,TEXTURE_MAX_LEVEL_APPLE:33085,TEXTURE_MIN_FILTER:10241,TEXTURE_NUM_LEVELS_QCOM:35801,TEXTURE_OBJECT_VALID_QCOM:35803,TEXTURE_SAMPLES_IMG:37174,TEXTURE_TARGET_QCOM:35802,TEXTURE_TYPE_QCOM:35799,TEXTURE_USAGE_ANGLE:37794,TEXTURE_WIDTH_QCOM:35794,TEXTURE_WRAP_R_OES:32882,TEXTURE_WRAP_S:10242,TEXTURE_WRAP_T:10243,TIMEOUT_EXPIRED_APPLE:37147,TIMEOUT_IGNORED_APPLE:0xffffffffffffffff,TRANSLATED_SHADER_SOURCE_LENGTH_ANGLE:37792,TRIANGLES:4,TRIANGLE_FAN:6,TRIANGLE_STRIP:5,TRUE:1,UNKNOWN_CONTEXT_RESET_EXT:33365,UNPACK_ALIGNMENT:3317,UNPACK_ROW_LENGTH:3314,UNPACK_SKIP_PIXELS:3316,UNPACK_SKIP_ROWS:3315,UNSIGNALED_APPLE:37144,UNSIGNED_BYTE:5121,UNSIGNED_INT:5125,UNSIGNED_INT64_AMD:35778,UNSIGNED_INT_10_10_10_2_OES:36342,UNSIGNED_INT_24_8_OES:34042,UNSIGNED_INT_2_10_10_10_REV_EXT:33640,UNSIGNED_NORMALIZED_EXT:35863,UNSIGNED_SHORT:5123,UNSIGNED_SHORT_1_5_5_5_REV_EXT:33638,UNSIGNED_SHORT_4_4_4_4:32819,UNSIGNED_SHORT_4_4_4_4_REV_EXT:33637,UNSIGNED_SHORT_4_4_4_4_REV_IMG:33637,UNSIGNED_SHORT_5_5_5_1:32820,UNSIGNED_SHORT_5_6_5:33635,UNSIGNED_SHORT_8_8_APPLE:34234,UNSIGNED_SHORT_8_8_REV_APPLE:34235,VALIDATE_STATUS:35715,VENDOR:7936,VERSION:7938,VERTEX_ARRAY_BINDING_OES:34229,VERTEX_ARRAY_OBJECT_EXT:37204,VERTEX_ATTRIB_ARRAY_BUFFER_BINDING:34975,VERTEX_ATTRIB_ARRAY_DIVISOR_ANGLE:35070,VERTEX_ATTRIB_ARRAY_DIVISOR_NV:35070,VERTEX_ATTRIB_ARRAY_ENABLED:34338,VERTEX_ATTRIB_ARRAY_NORMALIZED:34922,VERTEX_ATTRIB_ARRAY_POINTER:34373,VERTEX_ATTRIB_ARRAY_SIZE:34339,VERTEX_ATTRIB_ARRAY_STRIDE:34340,VERTEX_ATTRIB_ARRAY_TYPE:34341,VERTEX_SHADER:35633,VERTEX_SHADER_BIT_EXT:1,VIEWPORT:2978,VIV_shader_binary:1,WAIT_FAILED_APPLE:37149,WRITEONLY_RENDERING_QCOM:34851,WRITE_ONLY_OES:35001,Z400_BINARY_AMD:34624,ZERO:0,RASTERIZER_DISCARD:35977,UNPACK_FLIP_Y_WEBGL:37440,UNPACK_PREMULTIPLY_ALPHA_WEBGL:37441,CONTEXT_LOST_WEBGL:37442,UNPACK_COLORSPACE_CONVERSION_WEBGL:37443,BROWSER_DEFAULT_WEBGL:37444},qW={};function KW(e){var t=QW();return function(){var r=ke(e),a;if(t){var i=ke(this).constructor;a=Reflect.construct(r,arguments,i)}else a=r.apply(this,arguments);return It(this,a)}}function QW(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var O1=new Map,RT=new Map,JW=new Map,Eo=function(e){Tt(n,e);var t=KW(n);function n(){var r;return Ae(this,n),r=t.call(this),m(D(r),"onabort",void 0),m(D(r),"onerror",void 0),m(D(r),"onload",void 0),m(D(r),"onloadstart",void 0),m(D(r),"onprogress",void 0),m(D(r),"ontimeout",void 0),m(D(r),"onloadend",void 0),m(D(r),"onreadystatechange",void 0),m(D(r),"readyState",void 0),m(D(r),"response",void 0),m(D(r),"responseText",void 0),m(D(r),"_responseType",void 0),m(D(r),"responseXML",void 0),m(D(r),"status",void 0),m(D(r),"statusText",void 0),m(D(r),"upload",void 0),m(D(r),"withCredentials",void 0),m(D(r),"timeout",void 0),m(D(r),"_url",void 0),m(D(r),"_method",void 0),r.onabort=null,r.onerror=null,r.onload=null,r.onloadstart=null,r.onprogress=null,r.ontimeout=null,r.onloadend=null,r.onreadystatechange=null,r.readyState=0,r.response=null,r.responseText=null,r._responseType="text",r.responseXML=null,r.status=0,r.statusText="",r.upload={},r.withCredentials=!1,O1.set("requestHeader",{"content-type":"application/x-www-form-urlencoded"}),r}return Oe(n,[{key:"responseType",set:function(a){this._responseType=a}},{key:"abort",value:function(){var a=JW.get("requestTask");a&&a.abort()}},{key:"getAllResponseHeaders",value:function(){var a=RT.get("responseHeader");return Object.keys(a).map(function(i){return"".concat(i,": ").concat(a[i])}).join(`
`)}},{key:"getResponseHeader",value:function(a){return RT.get("responseHeader")[a]}},{key:"open",value:function(a,i,o){this._method=a,this._url=i}},{key:"overrideMimeType",value:function(){}},{key:"send",value:function(){}},{key:"setRequestHeader",value:function(a,i){var o=O1.get("requestHeader");o[a]=i,O1.set("requestHeader",o)}},{key:"addEventListener",value:function(a,i){var o=this;typeof i=="function"&&(this["on"+a]=function(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};s.target=s.target||o,i.call(o,s)})}},{key:"removeEventListener",value:function(a,i){this["on"+a]===i&&(this["on"+a]=null)}}]),n}(pE);m(Eo,"UNSEND",void 0);m(Eo,"OPENED",void 0);m(Eo,"HEADERS_RECEIVED",void 0);m(Eo,"LOADING",void 0);m(Eo,"DONE",void 0);Eo.UNSEND=0;Eo.OPENED=1;Eo.HEADERS_RECEIVED=2;Eo.LOADING=3;Eo.DONE=4;function eY(e){var t=tY();return function(){var r=ke(e),a;if(t){var i=ke(this).constructor;a=Reflect.construct(r,arguments,i)}else a=r.apply(this,arguments);return It(this,a)}}function tY(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(function(e){Tt(n,e);var t=eY(n);function n(r){var a;return Ae(this,n),a=t.call(this,r),m(D(a),"touches",void 0),m(D(a),"targetTouches",void 0),m(D(a),"changedTouches",void 0),a.touches=[],a.targetTouches=[],a.changedTouches=[],a.target=wc(),a.currentTarget=wc(),a}return Oe(n)})(Fm);function nY(e){var t=rY();return function(){var r=ke(e),a;if(t){var i=ke(this).constructor;a=Reflect.construct(r,arguments,i)}else a=r.apply(this,arguments);return It(this,a)}}function rY(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(function(e){Tt(n,e);var t=nY(n);function n(r){var a;return Ae(this,n),a=t.call(this,r),m(D(a),"buttons",void 0),m(D(a),"which",void 0),m(D(a),"pointerId",void 0),m(D(a),"bubbles",void 0),m(D(a),"button",void 0),m(D(a),"width",void 0),m(D(a),"height",void 0),m(D(a),"pressure",void 0),m(D(a),"isPrimary",void 0),m(D(a),"pointerType",void 0),m(D(a),"altKey",void 0),m(D(a),"ctrlKey",void 0),m(D(a),"metaKey",void 0),m(D(a),"shiftKey",void 0),a.target=wc(),a.currentTarget=wc(),a}return Oe(n)})(Fm);function aY(e){var t=iY();return function(){var r=ke(e),a;if(t){var i=ke(this).constructor;a=Reflect.construct(r,arguments,i)}else a=r.apply(this,arguments);return It(this,a)}}function iY(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(function(e){Tt(n,e);var t=aY(n);function n(r){return Ae(this,n),t.call(this,r)}return Oe(n)})(Fm);var oY=typeof my!="undefined"&&!!my&&typeof my.showToast=="function"&&my.isFRM!==!0,sY=typeof wx!="undefined"&&wx!==null&&(typeof wx.request!="undefined"||typeof wx.miniProgram!="undefined"),Bi=oY||sY,lY={atob:dW,btoa:gN,devicePixelRatio:mW,Blob:pW,document:ic,Element:bN,Event:Fm,EventTarget:pE,HTMLCanvasElement:DW,HTMLElement:Fd,HTMLMediaElement:_N,HTMLVideoElement:wN,Image:kN,ImageData:BW,navigator:VW,Node:vN,requestAnimationFrame:HW,cancelAnimationFrame:WW,screen:Th,XMLHttpRequest:Eo,performance:jW,URL:YW,WebGLRenderingContext:ZW,WebGL2RenderingContext:qW,addEventListener:function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};ic.addEventListener(t,n,r)},removeEventListener:function(t,n,r){ic.removeEventListener(t,n)},dispatchEvent:function(t){ic.dispatchEvent(t)},innerWidth:Th.availWidth,innerHeight:Th.availHeight,setTimeout,clearTimeout,setInterval,clearInterval},tr=Bi?lY:yo,uY=Bi?Eo:yo.XMLHttpRequest;Bi||yo.location;function cY(e){var t=e;return typeof e=="string"&&(t=tr.document.getElementById(e)),t}function TN(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function fY(e){return TN(e).split(/\s+/)}function dY(e){var t,n,r=tr==null||(t=tr.document)===null||t===void 0||(n=t.documentElement)===null||n===void 0?void 0:n.style;if(!r)return e[0];for(var a in e)if(e[a]&&e[a]in r)return e[a];return e[0]}function Tr(e,t,n){var r=tr.document.createElement(e);return r.className=t||"",n&&n.appendChild(r),r}function vd(e){var t=e.parentNode;t&&t.removeChild(e)}function kc(e,t){if(e.classList!==void 0)for(var n=fY(t),r=0,a=n.length;r<a;r++)e.classList.add(n[r]);else if(!pY(e,t)){var i=hE(e);AN(e,(i?i+" ":"")+t)}}function am(e,t){e.classList!==void 0?e.classList.remove(t):AN(e,TN((" "+hE(e)+" ").replace(" "+t+" "," ")))}function pY(e,t){if(e.classList!==void 0)return e.classList.contains(t);var n=hE(e);return n.length>0&&new RegExp("(^|\\s)"+t+"(\\s|$)").test(n)}function AN(e,t){e instanceof HTMLElement?e.className=t:e.className.baseVal=t}function hE(e){return e instanceof SVGElement&&(e=e.correspondingElement),e.className.baseVal===void 0?e.className:e.className.baseVal}function PT(e){for(;e&&e.firstChild;)e.removeChild(e.firstChild)}var hY=dY(["transform","WebkitTransform"]);function ON(e,t){e.style[hY]=t}function mY(){if(typeof Event=="function")tr.dispatchEvent(new Event("resize"));else{var e=tr.document.createEvent("UIEvents");e.initUIEvent("resize",!0,!1,tr,0),tr.dispatchEvent(e)}}function gY(){var e,t=tr.document.querySelector('meta[name="viewport"]');if(!t)return 1;var n=(e=t.content)===null||e===void 0?void 0:e.split(","),r=n.find(function(a){var i=a.split("="),o=Le(i,2),s=o[0];return o[1],s==="initial-scale"});return r?r.split("=")[1]*1:1}var Pr=gY()<1?1:tr.devicePixelRatio;function vY(e){if(e.length===0)throw new Error("max requires at least one data point");for(var t=e[0],n=1;n<e.length;n++)e[n]>t&&(t=e[n]);return t*1}function bY(e){if(e.length===0)throw new Error("min requires at least one data point");for(var t=e[0],n=1;n<e.length;n++)e[n]<t&&(t=e[n]);return t*1}function MN(e){if(e.length===0)return 0;for(var t=e[0]*1,n=1;n<e.length;n++)t+=e[n]*1;return t}function yY(e){if(e.length===0)throw new Error("mean requires at least one data point");return MN(e)/e.length}function xY(e){if(e.length===0)throw new Error("mean requires at least one data point");if(e.length<3)return e[0];e.sort();for(var t=e[0],n=NaN,r=0,a=1,i=1;i<e.length+1;i++)e[i]!==t?(a>r&&(r=a,n=t),a=1,t=e[i]):a++;return n*1}var mE={min:bY,max:vY,mean:yY,sum:MN,mode:xY};function gE(e,t){return e.map(function(n){return n[t]})}function _Y(e,t){return mE[e](t)}function IT(e,t,n,r,a,i,o){try{var s=e[i](o),l=s.value}catch(u){n(u);return}s.done?t(l):Promise.resolve(l).then(r,a)}function lr(e){return function(){var t=this,n=arguments;return new Promise(function(r,a){var i=e.apply(t,n);function o(l){IT(i,r,a,o,s,"next",l)}function s(l){IT(i,r,a,o,s,"throw",l)}o(void 0)})}}function wY(e){return Function.toString.call(e).indexOf("[native code]")!==-1}function RN(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Qf(e,t,n){return RN()?Qf=Reflect.construct.bind():Qf=function(a,i,o){var s=[null];s.push.apply(s,i);var l=Function.bind.apply(a,s),u=new l;return o&&rm(u,o.prototype),u},Qf.apply(null,arguments)}function Hw(e){var t=typeof Map=="function"?new Map:void 0;return Hw=function(r){if(r===null||!wY(r))return r;if(typeof r!="function")throw new TypeError("Super expression must either be null or a function");if(typeof t!="undefined"){if(t.has(r))return t.get(r);t.set(r,a)}function a(){return Qf(r,arguments,ke(this).constructor)}return a.prototype=Object.create(r.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),rm(a,r)},Hw(e)}var PN={exports:{}},IN={exports:{}};(function(e){function t(n){return e.exports=t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},e.exports.__esModule=!0,e.exports.default=e.exports,t(n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports})(IN);(function(e){var t=IN.exports.default;function n(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */e.exports=n=function(){return r},e.exports.__esModule=!0,e.exports.default=e.exports;var r={},a=Object.prototype,i=a.hasOwnProperty,o=typeof Symbol=="function"?Symbol:{},s=o.iterator||"@@iterator",l=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function c(O,R,G){return Object.defineProperty(O,R,{value:G,enumerable:!0,configurable:!0,writable:!0}),O[R]}try{c({},"")}catch{c=function(G,ee,re){return G[ee]=re}}function f(O,R,G,ee){var re=R&&R.prototype instanceof h?R:h,X=Object.create(re.prototype),K=new A(ee||[]);return X._invoke=function(ae,le,ue){var ge="suspendedStart";return function(be,ze){if(ge==="executing")throw new Error("Generator is already running");if(ge==="completed"){if(be==="throw")throw ze;return M()}for(ue.method=be,ue.arg=ze;;){var Lt=ue.delegate;if(Lt){var Rt=I(Lt,ue);if(Rt){if(Rt===p)continue;return Rt}}if(ue.method==="next")ue.sent=ue._sent=ue.arg;else if(ue.method==="throw"){if(ge==="suspendedStart")throw ge="completed",ue.arg;ue.dispatchException(ue.arg)}else ue.method==="return"&&ue.abrupt("return",ue.arg);ge="executing";var qt=d(ae,le,ue);if(qt.type==="normal"){if(ge=ue.done?"completed":"suspendedYield",qt.arg===p)continue;return{value:qt.arg,done:ue.done}}qt.type==="throw"&&(ge="completed",ue.method="throw",ue.arg=qt.arg)}}}(O,G,K),X}function d(O,R,G){try{return{type:"normal",arg:O.call(R,G)}}catch(ee){return{type:"throw",arg:ee}}}r.wrap=f;var p={};function h(){}function g(){}function v(){}var b={};c(b,s,function(){return this});var y=Object.getPrototypeOf,x=y&&y(y(S([])));x&&x!==a&&i.call(x,s)&&(b=x);var k=v.prototype=h.prototype=Object.create(b);function T(O){["next","throw","return"].forEach(function(R){c(O,R,function(G){return this._invoke(R,G)})})}function C(O,R){function G(re,X,K,ae){var le=d(O[re],O,X);if(le.type!=="throw"){var ue=le.arg,ge=ue.value;return ge&&t(ge)=="object"&&i.call(ge,"__await")?R.resolve(ge.__await).then(function(be){G("next",be,K,ae)},function(be){G("throw",be,K,ae)}):R.resolve(ge).then(function(be){ue.value=be,K(ue)},function(be){return G("throw",be,K,ae)})}ae(le.arg)}var ee;this._invoke=function(re,X){function K(){return new R(function(ae,le){G(re,X,ae,le)})}return ee=ee?ee.then(K,K):K()}}function I(O,R){var G=O.iterator[R.method];if(G===void 0){if(R.delegate=null,R.method==="throw"){if(O.iterator.return&&(R.method="return",R.arg=void 0,I(O,R),R.method==="throw"))return p;R.method="throw",R.arg=new TypeError("The iterator does not provide a 'throw' method")}return p}var ee=d(G,O.iterator,R.arg);if(ee.type==="throw")return R.method="throw",R.arg=ee.arg,R.delegate=null,p;var re=ee.arg;return re?re.done?(R[O.resultName]=re.value,R.next=O.nextLoc,R.method!=="return"&&(R.method="next",R.arg=void 0),R.delegate=null,p):re:(R.method="throw",R.arg=new TypeError("iterator result is not an object"),R.delegate=null,p)}function P(O){var R={tryLoc:O[0]};1 in O&&(R.catchLoc=O[1]),2 in O&&(R.finallyLoc=O[2],R.afterLoc=O[3]),this.tryEntries.push(R)}function j(O){var R=O.completion||{};R.type="normal",delete R.arg,O.completion=R}function A(O){this.tryEntries=[{tryLoc:"root"}],O.forEach(P,this),this.reset(!0)}function S(O){if(O){var R=O[s];if(R)return R.call(O);if(typeof O.next=="function")return O;if(!isNaN(O.length)){var G=-1,ee=function re(){for(;++G<O.length;)if(i.call(O,G))return re.value=O[G],re.done=!1,re;return re.value=void 0,re.done=!0,re};return ee.next=ee}}return{next:M}}function M(){return{value:void 0,done:!0}}return g.prototype=v,c(k,"constructor",v),c(v,"constructor",g),g.displayName=c(v,u,"GeneratorFunction"),r.isGeneratorFunction=function(O){var R=typeof O=="function"&&O.constructor;return!!R&&(R===g||(R.displayName||R.name)==="GeneratorFunction")},r.mark=function(O){return Object.setPrototypeOf?Object.setPrototypeOf(O,v):(O.__proto__=v,c(O,u,"GeneratorFunction")),O.prototype=Object.create(k),O},r.awrap=function(O){return{__await:O}},T(C.prototype),c(C.prototype,l,function(){return this}),r.AsyncIterator=C,r.async=function(O,R,G,ee,re){re===void 0&&(re=Promise);var X=new C(f(O,R,G,ee),re);return r.isGeneratorFunction(R)?X:X.next().then(function(K){return K.done?K.value:X.next()})},T(k),c(k,u,"Generator"),c(k,s,function(){return this}),c(k,"toString",function(){return"[object Generator]"}),r.keys=function(O){var R=[];for(var G in O)R.push(G);return R.reverse(),function ee(){for(;R.length;){var re=R.pop();if(re in O)return ee.value=re,ee.done=!1,ee}return ee.done=!0,ee}},r.values=S,A.prototype={constructor:A,reset:function(R){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(j),!R)for(var G in this)G.charAt(0)==="t"&&i.call(this,G)&&!isNaN(+G.slice(1))&&(this[G]=void 0)},stop:function(){this.done=!0;var R=this.tryEntries[0].completion;if(R.type==="throw")throw R.arg;return this.rval},dispatchException:function(R){if(this.done)throw R;var G=this;function ee(ue,ge){return K.type="throw",K.arg=R,G.next=ue,ge&&(G.method="next",G.arg=void 0),!!ge}for(var re=this.tryEntries.length-1;re>=0;--re){var X=this.tryEntries[re],K=X.completion;if(X.tryLoc==="root")return ee("end");if(X.tryLoc<=this.prev){var ae=i.call(X,"catchLoc"),le=i.call(X,"finallyLoc");if(ae&&le){if(this.prev<X.catchLoc)return ee(X.catchLoc,!0);if(this.prev<X.finallyLoc)return ee(X.finallyLoc)}else if(ae){if(this.prev<X.catchLoc)return ee(X.catchLoc,!0)}else{if(!le)throw new Error("try statement without catch or finally");if(this.prev<X.finallyLoc)return ee(X.finallyLoc)}}}},abrupt:function(R,G){for(var ee=this.tryEntries.length-1;ee>=0;--ee){var re=this.tryEntries[ee];if(re.tryLoc<=this.prev&&i.call(re,"finallyLoc")&&this.prev<re.finallyLoc){var X=re;break}}X&&(R==="break"||R==="continue")&&X.tryLoc<=G&&G<=X.finallyLoc&&(X=null);var K=X?X.completion:{};return K.type=R,K.arg=G,X?(this.method="next",this.next=X.finallyLoc,p):this.complete(K)},complete:function(R,G){if(R.type==="throw")throw R.arg;return R.type==="break"||R.type==="continue"?this.next=R.arg:R.type==="return"?(this.rval=this.arg=R.arg,this.method="return",this.next="end"):R.type==="normal"&&G&&(this.next=G),p},finish:function(R){for(var G=this.tryEntries.length-1;G>=0;--G){var ee=this.tryEntries[G];if(ee.finallyLoc===R)return this.complete(ee.completion,ee.afterLoc),j(ee),p}},catch:function(R){for(var G=this.tryEntries.length-1;G>=0;--G){var ee=this.tryEntries[G];if(ee.tryLoc===R){var re=ee.completion;if(re.type==="throw"){var X=re.arg;j(ee)}return X}}throw new Error("illegal catch attempt")},delegateYield:function(R,G,ee){return this.delegate={iterator:S(R),resultName:G,nextLoc:ee},this.method==="next"&&(this.arg=void 0),p}},r}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports})(PN);var Xg=PN.exports(),vn=Xg;try{regeneratorRuntime=Xg}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=Xg:Function("r","regeneratorRuntime = r")(Xg)}function kY(e){return typeof ImageBitmap!="undefined"&&e instanceof ImageBitmap}function LT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function NT(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?LT(Object(n),!0).forEach(function(r){m(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):LT(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function EY(e){var t=SY();return function(){var r=ke(e),a;if(t){var i=ke(this).constructor;a=Reflect.construct(r,arguments,i)}else a=r.apply(this,arguments);return It(this,a)}}function SY(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var CY=function(e){Tt(n,e);var t=EY(n);function n(r,a,i,o){var s;return Ae(this,n),s=t.call(this,"AJAXError: ".concat(a," (").concat(r,"): ").concat(i)),m(D(s),"status",void 0),m(D(s),"statusText",void 0),m(D(s),"url",void 0),m(D(s),"body",void 0),s.status=r,s.statusText=a,s.url=i,s.body=o,s}return Oe(n)}(Hw(Error));function TY(e,t){var n=new uY;n.open(e.method||"GET",e.url,!0),e.type==="arrayBuffer"&&(n.responseType="arraybuffer");for(var r in e.headers)e.headers.hasOwnProperty(r)&&n.setRequestHeader(r,e.headers[r]);return e.type==="json"&&(n.responseType="text",n.setRequestHeader("Accept","application/json")),n.withCredentials=e.credentials==="include",n.onerror=function(){t(new Error(n.statusText))},n.onload=function(){if((n.status>=200&&n.status<300||n.status===0)&&n.response!==null){var a=n.response;if(e.type==="json")try{a=JSON.parse(n.response)}catch(o){return t(o)}t(null,a,n.getResponseHeader("Cache-Control"),n.getResponseHeader("Expires"))}else{var i=new Blob([n.response],{type:n.getResponseHeader("Content-Type")});t(new CY(n.status,n.statusText,e.url,i))}},n.send(e.body),n}function AY(e,t){return TY(e,t)}var vE=function(t,n){return AY(NT(NT({},t),{},{type:"arrayBuffer"}),n)},FT="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function OY(e,t){var n=new tr.Image,r=tr.URL||tr.webkitURL;n.crossOrigin="anonymous",n.onload=function(){t(null,n),r.revokeObjectURL(n.src),n.onload=null,window.requestAnimationFrame(function(){n.src=FT})},n.onerror=function(){return t(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))};var a=new Blob([new Uint8Array(e)],{type:"image/png"});n.src=e.byteLength?r.createObjectURL(a):FT}function MY(e,t){var n=new Blob([new Uint8Array(e)],{type:"image/png"});createImageBitmap(n).then(function(r){t(null,r)}).catch(function(r){t(new Error("Could not load image because of ".concat(r.message,". Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.")))})}var Ww=function(t,n){return vE(t,function(r,a){if(r)n(r);else if(a){var i=typeof createImageBitmap=="function";i?MY(a,n):OY(a,n)}})},RY=function(){var e=lr(vn.mark(function t(n,r,a){var i,o,s,l,u,c;return vn.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.prev=0,d.next=3,a(n);case 3:i=d.sent,o=i.rasterData,s=i.width,l=i.height,u=0,c=8e3,r(null,{data:o,width:s,height:l,min:u,max:c}),d.next=15;break;case 12:d.prev=12,d.t0=d.catch(0),r(null,new Error(""+d.t0));case 15:case"end":return d.stop()}},t,null,[[0,12]])}));return function(n,r,a){return e.apply(this,arguments)}}(),PY=function(t,n,r){return vE(t,function(a,i){a?n(a):i&&RY(i,n,r)})},DT=2*Math.PI*6378137/2;function IY(e){var t=[1/0,1/0,-1/0,-1/0];return e.forEach(function(n){var r=n.coordinates;LN(t,r)}),t}function LN(e,t){return Array.isArray(t[0])?t.forEach(function(n){LN(e,n)}):(e[0]>t[0]&&(e[0]=t[0]),e[1]>t[1]&&(e[1]=t[1]),e[2]<t[0]&&(e[2]=t[0]),e[3]<t[1]&&(e[3]=t[1])),e}function M1(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{enable:!0,decimal:1};e=FY(e,t);var r=e[0],a=e[1],i=r*DT/180,o=Math.log(Math.tan((90+a)*Math.PI/360))/(Math.PI/180);return o=o*DT/180,n.enable&&(i=Number(i.toFixed(n.decimal)),o=Number(o.toFixed(n.decimal))),e.length===3?[i,o,e[2]]:[i,o]}function LY(e){if(e==null)throw new Error("lng is required");return(e>180||e<-180)&&(e=e%360,e>180&&(e=-360+e),e<-180&&(e=360+e),e===0&&(e=0)),e}function NY(e){if(e==null)throw new Error("lat is required");return(e>90||e<-90)&&(e=e%180,e>90&&(e=-180+e),e<-90&&(e=180+e),e===0&&(e=0)),e}function FY(e,t){if(t===!1)return e;var n=LY(e[0]),r=NY(e[1]);return r>85&&(r=85),r<-85&&(r=-85),e.length===3?[n,r,e[2]]:[n,r]}function ms(e){var t=85.0511287798,n=Math.max(Math.min(t,e[1]),-t),r=256<<20,a=Math.PI/180,i=e[0]*a,o=n*a;o=Math.log(Math.tan(Math.PI/4+o/2));var s=.5/Math.PI,l=.5,u=-.5/Math.PI;return a=.5,i=r*(s*i+l),o=r*(u*o+a),[Math.floor(i),Math.floor(o)]}function eg(e,t){var n=85.0511287798,r=Math.PI/180,a=6378137;return t=Math.max(Math.min(n,t),-n),e*=r,t*=r,t=Math.log(Math.tan(Math.PI/4+t/2)),[e*a,t*a]}function DY(e,t,n){var r=Q0(t[1]-e[1]),a=Q0(t[0]-e[0]),i=Q0(e[1]),o=Q0(t[1]),s=Math.pow(Math.sin(r/2),2)+Math.pow(Math.sin(a/2),2)*Math.cos(i)*Math.cos(o);return aW(2*Math.atan2(Math.sqrt(s),Math.sqrt(1-s)),"meters")}function im(e,t){var n=Math.abs(e[1][1]-e[0][1])*t,r=Math.abs(e[1][0]-e[0][0])*t;return[[e[0][0]-r,e[0][1]-n],[e[1][0]+r,e[1][1]+n]]}function bE(e,t){return e[0][0]<=t[0][0]&&e[0][1]<=t[0][1]&&e[1][0]>=t[1][0]&&e[1][1]>=t[1][1]}function Uv(e){return[[e[0],e[1]],[e[2],e[3]]]}function NN(e){var t=BY(e,[0,0]);return[e[0]/t,e[1]/t]}function BY(e,t){return Math.sqrt(Math.pow(e[0]-t[0],2)+Math.pow(e[1]-t[1],2))}var zY=function(){function e(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:50,n=arguments.length>1?arguments[1]:void 0;Ae(this,e),m(this,"limit",void 0),m(this,"cache",void 0),m(this,"destroy",void 0),m(this,"order",void 0),this.limit=t,this.destroy=n||this.defaultDestroy,this.order=[],this.clear()}return Oe(e,[{key:"clear",value:function(){var n=this;this.order.forEach(function(r){n.delete(r)}),this.cache={},this.order=[]}},{key:"get",value:function(n){var r=this.cache[n];return r&&(this.deleteOrder(n),this.appendOrder(n)),r}},{key:"set",value:function(n,r){this.cache[n]?(this.delete(n),this.cache[n]=r,this.appendOrder(n)):(Object.keys(this.cache).length===this.limit&&this.delete(this.order[0]),this.cache[n]=r,this.appendOrder(n))}},{key:"delete",value:function(n){var r=this.cache[n];r&&(this.deleteCache(n),this.deleteOrder(n),this.destroy(r,n))}},{key:"deleteCache",value:function(n){delete this.cache[n]}},{key:"deleteOrder",value:function(n){var r=this.order.findIndex(function(a){return a===n});r>=0&&this.order.splice(r,1)}},{key:"appendOrder",value:function(n){this.order.push(n)}},{key:"defaultDestroy",value:function(n,r){return null}}]),e}();function Dd(e,t){e.forEach(function(n){!t[n]||(t[n]=t[n].bind(t))})}(function(){function e(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:16;Ae(this,e),m(this,"duration",16),m(this,"timestamp",new Date().getTime()),this.duration=t}return Oe(e,[{key:"run",value:function(n){var r=new Date().getTime(),a=r-this.timestamp;this.timestamp=r,a>=this.duration&&n()}}]),e})();function jb(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function yE(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function Bd(){}var Ec=.7,bd=1/Ec,Jf="\\s*([+-]?\\d+)\\s*",om="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ss="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",UY=/^#([0-9a-f]{3,8})$/,$Y=new RegExp("^rgb\\("+[Jf,Jf,Jf]+"\\)$"),VY=new RegExp("^rgb\\("+[Ss,Ss,Ss]+"\\)$"),jY=new RegExp("^rgba\\("+[Jf,Jf,Jf,om]+"\\)$"),GY=new RegExp("^rgba\\("+[Ss,Ss,Ss,om]+"\\)$"),HY=new RegExp("^hsl\\("+[om,Ss,Ss]+"\\)$"),WY=new RegExp("^hsla\\("+[om,Ss,Ss,om]+"\\)$"),BT={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};jb(Bd,hu,{copy:function(e){return Object.assign(new this.constructor,this,e)},displayable:function(){return this.rgb().displayable()},hex:zT,formatHex:zT,formatHsl:YY,formatRgb:UT,toString:UT});function zT(){return this.rgb().formatHex()}function YY(){return DN(this).formatHsl()}function UT(){return this.rgb().formatRgb()}function hu(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=UY.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?$T(t):n===3?new li(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?tg(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?tg(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=$Y.exec(e))?new li(t[1],t[2],t[3],1):(t=VY.exec(e))?new li(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=jY.exec(e))?tg(t[1],t[2],t[3],t[4]):(t=GY.exec(e))?tg(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=HY.exec(e))?GT(t[1],t[2]/100,t[3]/100,1):(t=WY.exec(e))?GT(t[1],t[2]/100,t[3]/100,t[4]):BT.hasOwnProperty(e)?$T(BT[e]):e==="transparent"?new li(NaN,NaN,NaN,0):null}function $T(e){return new li(e>>16&255,e>>8&255,e&255,1)}function tg(e,t,n,r){return r<=0&&(e=t=n=NaN),new li(e,t,n,r)}function FN(e){return e instanceof Bd||(e=hu(e)),e?(e=e.rgb(),new li(e.r,e.g,e.b,e.opacity)):new li}function yd(e,t,n,r){return arguments.length===1?FN(e):new li(e,t,n,r==null?1:r)}function li(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}jb(li,yd,yE(Bd,{brighter:function(e){return e=e==null?bd:Math.pow(bd,e),new li(this.r*e,this.g*e,this.b*e,this.opacity)},darker:function(e){return e=e==null?Ec:Math.pow(Ec,e),new li(this.r*e,this.g*e,this.b*e,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:VT,formatHex:VT,formatRgb:jT,toString:jT}));function VT(){return"#"+R1(this.r)+R1(this.g)+R1(this.b)}function jT(){var e=this.opacity;return e=isNaN(e)?1:Math.max(0,Math.min(1,e)),(e===1?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(e===1?")":", "+e+")")}function R1(e){return e=Math.max(0,Math.min(255,Math.round(e)||0)),(e<16?"0":"")+e.toString(16)}function GT(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new bs(e,t,n,r)}function DN(e){if(e instanceof bs)return new bs(e.h,e.s,e.l,e.opacity);if(e instanceof Bd||(e=hu(e)),!e)return new bs;if(e instanceof bs)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,a=Math.min(t,n,r),i=Math.max(t,n,r),o=NaN,s=i-a,l=(i+a)/2;return s?(t===i?o=(n-r)/s+(n<r)*6:n===i?o=(r-t)/s+2:o=(t-n)/s+4,s/=l<.5?i+a:2-i-a,o*=60):s=l>0&&l<1?0:o,new bs(o,s,l,e.opacity)}function XY(e,t,n,r){return arguments.length===1?DN(e):new bs(e,t,n,r==null?1:r)}function bs(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}jb(bs,XY,yE(Bd,{brighter:function(e){return e=e==null?bd:Math.pow(bd,e),new bs(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=e==null?Ec:Math.pow(Ec,e),new bs(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,a=2*n-r;return new li(P1(e>=240?e-240:e+120,a,r),P1(e,a,r),P1(e<120?e+240:e-120,a,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var e=this.opacity;return e=isNaN(e)?1:Math.max(0,Math.min(1,e)),(e===1?"hsl(":"hsla(")+(this.h||0)+", "+(this.s||0)*100+"%, "+(this.l||0)*100+"%"+(e===1?")":", "+e+")")}}));function P1(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}var ZY=Math.PI/180,qY=180/Math.PI,BN=-.14861,xE=1.78277,_E=-.29227,Gb=-.90649,sm=1.97294,HT=sm*Gb,WT=sm*xE,YT=xE*_E-Gb*BN;function KY(e){if(e instanceof dc)return new dc(e.h,e.s,e.l,e.opacity);e instanceof li||(e=FN(e));var t=e.r/255,n=e.g/255,r=e.b/255,a=(YT*r+HT*t-WT*n)/(YT+HT-WT),i=r-a,o=(sm*(n-a)-_E*i)/Gb,s=Math.sqrt(o*o+i*i)/(sm*a*(1-a)),l=s?Math.atan2(o,i)*qY-120:NaN;return new dc(l<0?l+360:l,s,a,e.opacity)}function Yw(e,t,n,r){return arguments.length===1?KY(e):new dc(e,t,n,r==null?1:r)}function dc(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}jb(dc,Yw,yE(Bd,{brighter:function(e){return e=e==null?bd:Math.pow(bd,e),new dc(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=e==null?Ec:Math.pow(Ec,e),new dc(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=isNaN(this.h)?0:(this.h+120)*ZY,t=+this.l,n=isNaN(this.s)?0:this.s*t*(1-t),r=Math.cos(e),a=Math.sin(e);return new li(255*(t+n*(BN*r+xE*a)),255*(t+n*(_E*r+Gb*a)),255*(t+n*(sm*r)),this.opacity)}}));function zN(e){return typeof e=="string"?!!hu(e):!1}function Ts(e){var t=hu(e),n=[0,0,0,0];return t!=null&&(n[0]=t.r/255,n[1]=t.g/255,n[2]=t.b/255,n[3]=t.opacity),n}function xs(e){var t=e&&e[0],n=e&&e[1],r=e&&e[2],a=t+n*256+r*65536-1;return a}function lm(e){return[e+1&255,e+1>>8&255,e+1>>8>>8&255]}function $v(e){var t=tr.document.createElement("canvas"),n=t.getContext("2d");t.width=256,t.height=1;for(var r=n.createLinearGradient(0,0,256,1),a=null,i=e.positions[0],o=e.positions[e.positions.length-1],s=0;s<e.colors.length;++s){var l=(e.positions[s]-i)/(o-i);r.addColorStop(l,e.colors[s])}if(n.fillStyle=r,n.fillRect(0,0,256,1),Bi)return a=new Uint8ClampedArray(n.getImageData(0,0,256,1).data),{data:a,width:256,height:1};a=n.getImageData(0,0,256,1).data;for(var u=n.createImageData(256,1),c=0;c<u.data.length;c+=4)u.data[c+0]=a[c+0],u.data[c+1]=a[c+1],u.data[c+2]=a[c+2],u.data[c+3]=a[c+3];return u}var Vv;(function(e){e.CENTER="center",e.TOP="top",e["TOP-LEFT"]="top-left",e["TOP-RIGHT"]="top-right",e.BOTTOM="bottom",e["BOTTOM-LEFT"]="bottom-left",e.LEFT="left",e.RIGHT="right"})(Vv||(Vv={}));var jv={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function UN(e,t,n){var r=e.classList;for(var a in jv)jv.hasOwnProperty(a)&&r.remove("l7-".concat(n,"-anchor-").concat(a));r.add("l7-".concat(n,"-anchor-").concat(t))}function Vi(e,t){return{enable:e,mask:255,func:{cmp:514,ref:t?1:0,mask:255}}}var zu={BACK:1029,FRONT:1028};function Hb(e){switch(e){case"GAODE1.x":return zu.BACK;case"GAODE2.x":return zu.BACK;case"MAPBOX":return zu.FRONT;case"SIMPLE":return zu.FRONT;case"GLOBEL":return zu.BACK;case"L7MAP":return zu.FRONT;default:return zu.FRONT}}function wE(e,t){if(!e||!e.length)throw new Error("url is not allowed to be empty");var n=t.x,r=t.y,a=t.z;if(Array.isArray(e)){var i=Math.abs(n+r)%e.length;e=e[i]}return e.replace(/\{x\}/g,n.toString()).replace(/\{y\}/g,r.toString()).replace(/\{z\}/g,a.toString()).replace(/\{-y\}/g,(Math.pow(2,a)-r-1).toString())}var ed;(function(e){e.Realtime="realtime",e.Overlap="overlap",e.Replace="replace"})(ed||(ed={}));var Li;(function(e){e.Loading="Loading",e.Loaded="Loaded",e.Failure="Failure",e.Cancelled="Cancelled"})(Li||(Li={}));function QY(e,t){t===void 0&&(t={});var n=Number(e[0]),r=Number(e[1]),a=Number(e[2]),i=Number(e[3]);if(e.length===6)throw new Error("@turf/bbox-polygon does not support BBox with 6 positions");var o=[n,r],s=[n,i],l=[a,i],u=[a,r];return fE([[o,u,l,s,o]],t.properties,{bbox:e,id:t.id})}var $N=0,XT=1,Wb=2;function JY(e){e.forEach(function(t){t.isCurrent&&(t.isVisible=t.isLoaded)})}function eX(e){e.forEach(function(t){t.properties.state=$N}),e.forEach(function(t){t.isCurrent&&!VN(t)&&kE(t)}),e.forEach(function(t){t.isVisible=Boolean(t.properties.state&Wb)})}function tX(e){e.forEach(function(n){n.properties.state=$N}),e.forEach(function(n){n.isCurrent&&VN(n)});var t=e.slice().sort(function(n,r){return n.z-r.z});t.forEach(function(n){n.isVisible=Boolean(n.properties.state&Wb),n.children.length&&(n.isVisible||n.properties.state&XT)?n.children.forEach(function(r){r.properties.state=XT}):n.isCurrent&&kE(n)})}function VN(e){for(;e;){if(e.isLoaded)return e.properties.state|=Wb,!0;e=e.parent}return!1}function kE(e){e.children.forEach(function(t){t.isLoaded?t.properties.state|=Wb:kE(t)})}var Rp,jN=[-1/0,-1/0,1/0,1/0],nX=.2,rX=5,aX=(Rp={},m(Rp,ed.Realtime,JY),m(Rp,ed.Overlap,eX),m(Rp,ed.Replace,tX),Rp),iX=function(){};function Xw(e,t,n){var r=Math.floor((e+180)/360*Math.pow(2,n)),a=Math.floor((1-Math.log(Math.tan(t*Math.PI/180)+1/Math.cos(t*Math.PI/180))/Math.PI)/2*Math.pow(2,n));return[r,a]}function ZT(e,t,n){var r=e/Math.pow(2,n)*360-180,a=Math.PI-2*Math.PI*t/Math.pow(2,n),i=180/Math.PI*Math.atan(.5*(Math.exp(a)-Math.exp(-a)));return[r,i]}var oX=function(t,n,r){var a=ZT(t,n,r),i=Le(a,2),o=i[0],s=i[1],l=ZT(t+1,n+1,r),u=Le(l,2),c=u[0],f=u[1];return[o,f,c,s]};function sX(e){var t=e.zoom,n=e.latLonBounds,r=e.maxZoom,a=r===void 0?1/0:r,i=e.minZoom,o=i===void 0?0:i,s=e.zoomOffset,l=s===void 0?0:s,u=e.extent,c=u===void 0?jN:u,f=Math.ceil(t)+l;if(Number.isFinite(o)&&f<o)return[];Number.isFinite(a)&&f>a&&(f=a);for(var d=Le(n,4),p=d[0],h=d[1],g=d[2],v=d[3],b=[Math.max(p,c[0]),Math.max(h,c[1]),Math.min(g,c[2]),Math.min(v,c[3])],y=[],x=Xw(b[0],b[1],f),k=Le(x,2),T=k[0],C=k[1],I=Xw(b[2],b[3],f),P=Le(I,2),j=P[0],A=P[1],S=T;S<=j;S++)for(var M=A;M<=C;M++)y.push({x:S,y:M,z:f});var O=(j+T)/2,R=(C+A)/2,G=function(re,X){return Math.abs(re-O)+Math.abs(X-R)};return y.sort(function(ee,re){return G(ee.x,ee.y)-G(re.x,re.y)}),y}var lX=function(t,n,r){var a=Math.pow(2,r),i=a-1,o=a,s=t,l=n;return s<0?s=s+o:s>i&&(s=s%o),{warpX:s,warpY:l}},uX=function(){function e(t){Ae(this,e),m(this,"x",void 0),m(this,"y",void 0),m(this,"z",void 0),m(this,"tileSize",256),m(this,"isVisible",!1),m(this,"isCurrent",!1),m(this,"isVisibleChange",!1),m(this,"parentLayerIDList",[]),m(this,"layerIDList",[]),m(this,"parent",null),m(this,"children",[]),m(this,"data",null),m(this,"properties",{}),m(this,"xhrCancel",void 0),m(this,"loadStatus",void 0),m(this,"abortController",void 0),m(this,"loadDataId",0);var n=t.x,r=t.y,a=t.z,i=t.tileSize;this.x=n,this.y=r,this.z=a,this.tileSize=i}return Oe(e,[{key:"isLoading",get:function(){return this.loadStatus===Li.Loading}},{key:"isLoaded",get:function(){return this.loadStatus===Li.Loaded}},{key:"isFailure",get:function(){return this.loadStatus===Li.Failure}},{key:"isCancelled",get:function(){return this.loadStatus===Li.Cancelled}},{key:"isDone",get:function(){return[Li.Loaded,Li.Cancelled,Li.Failure].includes(this.loadStatus)}},{key:"bounds",get:function(){return oX(this.x,this.y,this.z)}},{key:"bboxPolygon",get:function(){var n=Le(this.bounds,4),r=n[0],a=n[1],i=n[2],o=n[3],s=[(i-r)/2,(o-a)/2],l=QY(this.bounds,{properties:{key:this.key,bbox:this.bounds,center:s,meta:`
      `.concat(this.key,`
      `)}});return l}},{key:"key",get:function(){var n="".concat(this.x,",").concat(this.y,",").concat(this.z);return n}},{key:"loadData",value:function(){var t=lr(vn.mark(function r(a){var i,o,s,l,u,c,f,d,p,h,g,v,b,y,x,k;return vn.wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return i=a.getData,o=a.onLoad,s=a.onError,this.loadDataId++,l=this.loadDataId,this.isLoading&&this.abortLoad(),this.abortController=new AbortController,this.loadStatus=Li.Loading,u=null,C.prev=7,f=this.x,d=this.y,p=this.z,h=this.bounds,g=this.tileSize,v=lX(f,d,p),b=v.warpX,y=v.warpY,x=this.abortController.signal,k={x:b,y,z:p,bounds:h,tileSize:g,signal:x},C.next=14,i(k,this);case 14:u=C.sent,C.next=20;break;case 17:C.prev=17,C.t0=C.catch(7),c=C.t0;case 20:if(l===this.loadDataId){C.next=22;break}return C.abrupt("return");case 22:if(!(this.isCancelled&&!u)){C.next=24;break}return C.abrupt("return");case 24:if(!(c||!u)){C.next=28;break}return this.loadStatus=Li.Failure,s(c,this),C.abrupt("return");case 28:this.loadStatus=Li.Loaded,this.data=u,o(this);case 31:case"end":return C.stop()}},r,this,[[7,17]])}));function n(r){return t.apply(this,arguments)}return n}()},{key:"reloadData",value:function(n){this.isLoading&&this.abortLoad(),this.loadData(n)}},{key:"abortLoad",value:function(){this.isLoaded||this.isCancelled||(this.loadStatus=Li.Cancelled,this.abortController.abort(),this.xhrCancel&&this.xhrCancel())}}]),e}(),Hi={exports:{}};(function(e){var t=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function a(l,u,c){this.fn=l,this.context=u,this.once=c||!1}function i(l,u,c,f,d){if(typeof c!="function")throw new TypeError("The listener must be a function");var p=new a(c,f||l,d),h=n?n+u:u;return l._events[h]?l._events[h].fn?l._events[h]=[l._events[h],p]:l._events[h].push(p):(l._events[h]=p,l._eventsCount++),l}function o(l,u){--l._eventsCount===0?l._events=new r:delete l._events[u]}function s(){this._events=new r,this._eventsCount=0}s.prototype.eventNames=function(){var u=[],c,f;if(this._eventsCount===0)return u;for(f in c=this._events)t.call(c,f)&&u.push(n?f.slice(1):f);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(c)):u},s.prototype.listeners=function(u){var c=n?n+u:u,f=this._events[c];if(!f)return[];if(f.fn)return[f.fn];for(var d=0,p=f.length,h=new Array(p);d<p;d++)h[d]=f[d].fn;return h},s.prototype.listenerCount=function(u){var c=n?n+u:u,f=this._events[c];return f?f.fn?1:f.length:0},s.prototype.emit=function(u,c,f,d,p,h){var g=n?n+u:u;if(!this._events[g])return!1;var v=this._events[g],b=arguments.length,y,x;if(v.fn){switch(v.once&&this.removeListener(u,v.fn,void 0,!0),b){case 1:return v.fn.call(v.context),!0;case 2:return v.fn.call(v.context,c),!0;case 3:return v.fn.call(v.context,c,f),!0;case 4:return v.fn.call(v.context,c,f,d),!0;case 5:return v.fn.call(v.context,c,f,d,p),!0;case 6:return v.fn.call(v.context,c,f,d,p,h),!0}for(x=1,y=new Array(b-1);x<b;x++)y[x-1]=arguments[x];v.fn.apply(v.context,y)}else{var k=v.length,T;for(x=0;x<k;x++)switch(v[x].once&&this.removeListener(u,v[x].fn,void 0,!0),b){case 1:v[x].fn.call(v[x].context);break;case 2:v[x].fn.call(v[x].context,c);break;case 3:v[x].fn.call(v[x].context,c,f);break;case 4:v[x].fn.call(v[x].context,c,f,d);break;default:if(!y)for(T=1,y=new Array(b-1);T<b;T++)y[T-1]=arguments[T];v[x].fn.apply(v[x].context,y)}}return!0},s.prototype.on=function(u,c,f){return i(this,u,c,f,!1)},s.prototype.once=function(u,c,f){return i(this,u,c,f,!0)},s.prototype.removeListener=function(u,c,f,d){var p=n?n+u:u;if(!this._events[p])return this;if(!c)return o(this,p),this;var h=this._events[p];if(h.fn)h.fn===c&&(!d||h.once)&&(!f||h.context===f)&&o(this,p);else{for(var g=0,v=[],b=h.length;g<b;g++)(h[g].fn!==c||d&&!h[g].once||f&&h[g].context!==f)&&v.push(h[g]);v.length?this._events[p]=v.length===1?v[0]:v:o(this,p)}return this},s.prototype.removeAllListeners=function(u){var c;return u?(c=n?n+u:u,this._events[c]&&o(this,c)):(this._events=new r,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=n,s.EventEmitter=s,e.exports=s})(Hi);var EE=Hi.exports,cX=function(t,n){var r=Uv(t),a=im(r,n),i=360*3-180,o=85.0511287798065,s=[Math.max(a[0][0],-i),Math.max(a[0][1],-o),Math.min(a[1][0],i),Math.min(a[1][1],o)];return s},fX=function(t,n){var r=Uv(t),a=Uv(n),i=bE(r,a);return i};function Rl(e,t){var n=typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=dX(e))||t&&e&&typeof e.length=="number"){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(u){throw u},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i=!0,o=!1,s;return{s:function(){n=n.call(e)},n:function(){var u=n.next();return i=u.done,u},e:function(u){o=!0,s=u},f:function(){try{!i&&n.return!=null&&n.return()}finally{if(o)throw s}}}}function dX(e,t){if(!!e){if(typeof e=="string")return qT(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return qT(e,t)}}function qT(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function KT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function I1(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?KT(Object(n),!0).forEach(function(r){m(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):KT(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function pX(e){var t=hX();return function(){var r=ke(e),a;if(t){var i=ke(this).constructor;a=Reflect.construct(r,arguments,i)}else a=r.apply(this,arguments);return It(this,a)}}function hX(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var mX=function(e){Tt(n,e);var t=pX(n);function n(r){var a;return Ae(this,n),a=t.call(this),m(D(a),"currentTiles",[]),m(D(a),"options",void 0),m(D(a),"cacheTiles",new Map),m(D(a),"lastViewStates",void 0),m(D(a),"onTileLoad",function(i){a.emit("tile-loaded",i),a.updateTileVisible()}),m(D(a),"onTileError",function(i,o){a.emit("tile-error",{error:i,tile:o}),a.updateTileVisible()}),m(D(a),"onTileUnload",function(i){a.emit("tile-unload",i)}),a.options={tileSize:256,minZoom:0,maxZoom:1/0,zoomOffset:0,extent:jN,getTileData:iX,updateStrategy:ed.Replace},a.updateOptions(r),a}return Oe(n,[{key:"isLoaded",get:function(){return this.currentTiles.every(function(a){return a.isDone})}},{key:"tiles",get:function(){var a=Array.from(this.cacheTiles.values()).sort(function(i,o){return i.z-o.z});return a}},{key:"updateOptions",value:function(a){var i=a.minZoom===void 0?this.options.minZoom:Math.ceil(a.minZoom),o=a.maxZoom===void 0?this.options.maxZoom:Math.floor(a.maxZoom);this.options=I1(I1(I1({},this.options),a),{},{minZoom:i,maxZoom:o})}},{key:"update",value:function(a,i){var o=this,s=Math.ceil(a);if(!(this.lastViewStates&&this.lastViewStates.zoom===s&&fX(this.lastViewStates.latLonBoundsBuffer,i))){var l=cX(i,nX);this.lastViewStates={zoom:s,latLonBounds:i,latLonBoundsBuffer:l};var u=!1,c=this.getTileIndices(s,l);this.currentTiles=c.map(function(f){var d=f.x,p=f.y,h=f.z,g=o.getTile(d,p,h);if(g){var v,b,y=((v=g)===null||v===void 0?void 0:v.isFailure)||((b=g)===null||b===void 0?void 0:b.isCancelled);return y&&g.loadData({getData:o.options.getTileData,onLoad:o.onTileLoad,onError:o.onTileError}),g}return g=o.createTile(d,p,h),u=!0,g}),u&&(this.resizeCacheTiles(),this.rebuildTileTree()),this.updateTileVisible(),this.pruneRequests()}}},{key:"reloadAll",value:function(){var a=Rl(this.cacheTiles),i;try{for(a.s();!(i=a.n()).done;){var o=Le(i.value,2),s=o[0],l=o[1];this.currentTiles.includes(l)||(this.cacheTiles.delete(s),this.onTileUnload(l)),this.onTileUnload(l),l.loadData({getData:this.options.getTileData,onLoad:this.onTileLoad,onError:this.onTileError})}}catch(u){a.e(u)}finally{a.f()}}},{key:"pruneRequests",value:function(){var a=[],i=Rl(this.cacheTiles.values()),o;try{for(i.s();!(o=i.n()).done;){var s=o.value;s.isLoading&&!s.isCurrent&&!s.isVisible&&a.push(s)}}catch(u){i.e(u)}finally{i.f()}for(;a.length>0;){var l=a.shift();l.abortLoad()}}},{key:"destroy",value:function(){var a=Rl(this.cacheTiles.values()),i;try{for(a.s();!(i=a.n()).done;){var o=i.value;o.isLoading&&o.abortLoad()}}catch(s){a.e(s)}finally{a.f()}this.cacheTiles.clear(),this.currentTiles=[],this.removeAllListeners()}},{key:"updateTileVisible",value:function(){var a=this.options.updateStrategy,i=new Map,o=Rl(this.cacheTiles.values()),s;try{for(o.s();!(s=o.n()).done;){var l=s.value;i.set(l.key,l.isVisible),l.isCurrent=!1,l.isVisible=!1}}catch(h){o.e(h)}finally{o.f()}var u=Rl(this.currentTiles),c;try{for(u.s();!(c=u.n()).done;){var f=c.value;f.isCurrent=!0,f.isVisible=!0}}catch(h){u.e(h)}finally{u.f()}var d=Array.from(this.cacheTiles.values());typeof a=="function"?a(d):aX[a](d);var p=!1;Array.from(this.cacheTiles.values()).forEach(function(h){h.isVisible!==i.get(h.key)?(h.isVisibleChange=!0,p=!0):h.isVisibleChange=!1}),p&&this.emit("tile-update")}},{key:"getTileIndices",value:function(a,i){var o=this.options,s=o.tileSize,l=o.extent,u=o.zoomOffset,c=Math.floor(this.options.maxZoom),f=Math.ceil(this.options.minZoom),d=sX({maxZoom:c,minZoom:f,zoomOffset:u,tileSize:s,zoom:a,latLonBounds:i,extent:l});return d}},{key:"getTileId",value:function(a,i,o){var s="".concat(a,",").concat(i,",").concat(o);return s}},{key:"getTile",value:function(a,i,o){var s=this.getTileId(a,i,o),l=this.cacheTiles.get(s);return l}},{key:"createTile",value:function(a,i,o){var s=this.getTileId(a,i,o),l=new uX({x:a,y:i,z:o,tileSize:this.options.tileSize});return this.cacheTiles.set(s,l),l.loadData({getData:this.options.getTileData,onLoad:this.onTileLoad,onError:this.onTileError}),l}},{key:"resizeCacheTiles",value:function(){var a=rX*this.currentTiles.length,i=this.cacheTiles.size>a;if(i){var o=Rl(this.cacheTiles),s;try{for(o.s();!(s=o.n()).done;){var l=Le(s.value,2),u=l[0],c=l[1];if(!c.isVisible&&!this.currentTiles.includes(c)&&(this.cacheTiles.delete(u),this.onTileUnload(c)),this.cacheTiles.size<=a)break}}catch(f){o.e(f)}finally{o.f()}}}},{key:"rebuildTileTree",value:function(){var a=Rl(this.cacheTiles.values()),i;try{for(a.s();!(i=a.n()).done;){var o=i.value;o.parent=null,o.children.length=0}}catch(f){a.e(f)}finally{a.f()}var s=Rl(this.cacheTiles.values()),l;try{for(s.s();!(l=s.n()).done;){var u=l.value,c=this.getNearestAncestor(u.x,u.y,u.z);u.parent=c,c!=null&&c.children&&c.children.push(u)}}catch(f){s.e(f)}finally{s.f()}}},{key:"getNearestAncestor",value:function(a,i,o){for(;o>this.options.minZoom;){a=Math.floor(a/2),i=Math.floor(i/2),o=o-1;var s=this.getTile(a,i,o);if(s)return s}return null}}]),n}(EE);function GN(e,t){var n=t.extent,r=n===void 0?[121.168,30.2828,121.384,30.4219]:n,a=new Promise(function(o){e instanceof HTMLImageElement||kY(e)?o([e]):gX(e,function(s){o(s)})}),i={originData:e,images:a,_id:1,dataArray:[{_id:0,coordinates:[[r[0],r[1]],[r[2],r[3]]]}]};return i}function gX(e,t){var n=e,r=[];if(typeof n=="string")Ww({url:n},function(o,s){s&&(r.push(s),t(r))});else{var a=n.length,i=0;n.forEach(function(o){Ww({url:o},function(s,l){i++,l&&r.push(l),i===a&&t(r)})})}return GN}var vX=td;function td(e,t){this.x=e,this.y=t}td.prototype={clone:function(){return new td(this.x,this.y)},add:function(e){return this.clone()._add(e)},sub:function(e){return this.clone()._sub(e)},multByPoint:function(e){return this.clone()._multByPoint(e)},divByPoint:function(e){return this.clone()._divByPoint(e)},mult:function(e){return this.clone()._mult(e)},div:function(e){return this.clone()._div(e)},rotate:function(e){return this.clone()._rotate(e)},rotateAround:function(e,t){return this.clone()._rotateAround(e,t)},matMult:function(e){return this.clone()._matMult(e)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(e){return this.x===e.x&&this.y===e.y},dist:function(e){return Math.sqrt(this.distSqr(e))},distSqr:function(e){var t=e.x-this.x,n=e.y-this.y;return t*t+n*n},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(e){return Math.atan2(this.y-e.y,this.x-e.x)},angleWith:function(e){return this.angleWithSep(e.x,e.y)},angleWithSep:function(e,t){return Math.atan2(this.x*t-this.y*e,this.x*e+this.y*t)},_matMult:function(e){var t=e[0]*this.x+e[1]*this.y,n=e[2]*this.x+e[3]*this.y;return this.x=t,this.y=n,this},_add:function(e){return this.x+=e.x,this.y+=e.y,this},_sub:function(e){return this.x-=e.x,this.y-=e.y,this},_mult:function(e){return this.x*=e,this.y*=e,this},_div:function(e){return this.x/=e,this.y/=e,this},_multByPoint:function(e){return this.x*=e.x,this.y*=e.y,this},_divByPoint:function(e){return this.x/=e.x,this.y/=e.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var e=this.y;return this.y=this.x,this.x=-e,this},_rotate:function(e){var t=Math.cos(e),n=Math.sin(e),r=t*this.x-n*this.y,a=n*this.x+t*this.y;return this.x=r,this.y=a,this},_rotateAround:function(e,t){var n=Math.cos(e),r=Math.sin(e),a=t.x+n*(this.x-t.x)-r*(this.y-t.y),i=t.y+r*(this.x-t.x)+n*(this.y-t.y);return this.x=a,this.y=i,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}};td.convert=function(e){return e instanceof td?e:Array.isArray(e)?new td(e[0],e[1]):e};var bX=vX,yX=xd;function xd(e,t,n,r,a){this.properties={},this.extent=n,this.type=0,this._pbf=e,this._geometry=-1,this._keys=r,this._values=a,e.readFields(xX,this,t)}function xX(e,t,n){e==1?t.id=n.readVarint():e==2?_X(n,t):e==3?t.type=n.readVarint():e==4&&(t._geometry=n.pos)}function _X(e,t){for(var n=e.readVarint()+e.pos;e.pos<n;){var r=t._keys[e.readVarint()],a=t._values[e.readVarint()];t.properties[r]=a}}xd.types=["Unknown","Point","LineString","Polygon"];xd.prototype.loadGeometry=function(){var e=this._pbf;e.pos=this._geometry;for(var t=e.readVarint()+e.pos,n=1,r=0,a=0,i=0,o=[],s;e.pos<t;){if(r<=0){var l=e.readVarint();n=l&7,r=l>>3}if(r--,n===1||n===2)a+=e.readSVarint(),i+=e.readSVarint(),n===1&&(s&&o.push(s),s=[]),s.push(new bX(a,i));else if(n===7)s&&s.push(s[0].clone());else throw new Error("unknown command "+n)}return s&&o.push(s),o};xd.prototype.bbox=function(){var e=this._pbf;e.pos=this._geometry;for(var t=e.readVarint()+e.pos,n=1,r=0,a=0,i=0,o=1/0,s=-1/0,l=1/0,u=-1/0;e.pos<t;){if(r<=0){var c=e.readVarint();n=c&7,r=c>>3}if(r--,n===1||n===2)a+=e.readSVarint(),i+=e.readSVarint(),a<o&&(o=a),a>s&&(s=a),i<l&&(l=i),i>u&&(u=i);else if(n!==7)throw new Error("unknown command "+n)}return[o,l,s,u]};xd.prototype.toGeoJSON=function(e,t,n){var r=this.extent*Math.pow(2,n),a=this.extent*e,i=this.extent*t,o=this.loadGeometry(),s=xd.types[this.type],l,u;function c(p){for(var h=0;h<p.length;h++){var g=p[h],v=180-(g.y+i)*360/r;p[h]=[(g.x+a)*360/r-180,360/Math.PI*Math.atan(Math.exp(v*Math.PI/180))-90]}}switch(this.type){case 1:var f=[];for(l=0;l<o.length;l++)f[l]=o[l][0];o=f,c(o);break;case 2:for(l=0;l<o.length;l++)c(o[l]);break;case 3:for(o=wX(o),l=0;l<o.length;l++)for(u=0;u<o[l].length;u++)c(o[l][u]);break}o.length===1?o=o[0]:s="Multi"+s;var d={type:"Feature",geometry:{type:s,coordinates:o},properties:this.properties};return"id"in this&&(d.id=this.id),d};function wX(e){var t=e.length;if(t<=1)return[e];for(var n=[],r,a,i=0;i<t;i++){var o=kX(e[i]);o!==0&&(a===void 0&&(a=o<0),a===o<0?(r&&n.push(r),r=[e[i]]):r.push(e[i]))}return r&&n.push(r),n}function kX(e){for(var t=0,n=0,r=e.length,a=r-1,i,o;n<r;a=n++)i=e[n],o=e[a],t+=(o.x-i.x)*(i.y+o.y);return t}var EX=yX,SX=HN;function HN(e,t){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=e,this._keys=[],this._values=[],this._features=[],e.readFields(CX,this,t),this.length=this._features.length}function CX(e,t,n){e===15?t.version=n.readVarint():e===1?t.name=n.readString():e===5?t.extent=n.readVarint():e===2?t._features.push(n.pos):e===3?t._keys.push(n.readString()):e===4&&t._values.push(TX(n))}function TX(e){for(var t=null,n=e.readVarint()+e.pos;e.pos<n;){var r=e.readVarint()>>3;t=r===1?e.readString():r===2?e.readFloat():r===3?e.readDouble():r===4?e.readVarint64():r===5?e.readVarint():r===6?e.readSVarint():r===7?e.readBoolean():null}return t}HN.prototype.feature=function(e){if(e<0||e>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[e];var t=this._pbf.readVarint()+this._pbf.pos;return new EX(this._pbf,t,this.extent,this._keys,this._values)};var AX=SX,OX=MX;function MX(e,t){this.layers=e.readFields(RX,{},t)}function RX(e,t,n){if(e===3){var r=new AX(n,n.readVarint()+n.pos);r.length&&(t[r.name]=r)}}var PX=OX,SE={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */SE.read=function(e,t,n,r,a){var i,o,s=a*8-r-1,l=(1<<s)-1,u=l>>1,c=-7,f=n?a-1:0,d=n?-1:1,p=e[t+f];for(f+=d,i=p&(1<<-c)-1,p>>=-c,c+=s;c>0;i=i*256+e[t+f],f+=d,c-=8);for(o=i&(1<<-c)-1,i>>=-c,c+=r;c>0;o=o*256+e[t+f],f+=d,c-=8);if(i===0)i=1-u;else{if(i===l)return o?NaN:(p?-1:1)*(1/0);o=o+Math.pow(2,r),i=i-u}return(p?-1:1)*o*Math.pow(2,i-r)};SE.write=function(e,t,n,r,a,i){var o,s,l,u=i*8-a-1,c=(1<<u)-1,f=c>>1,d=a===23?Math.pow(2,-24)-Math.pow(2,-77):0,p=r?0:i-1,h=r?1:-1,g=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,o=c):(o=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-o))<1&&(o--,l*=2),o+f>=1?t+=d/l:t+=d*Math.pow(2,1-f),t*l>=2&&(o++,l/=2),o+f>=c?(s=0,o=c):o+f>=1?(s=(t*l-1)*Math.pow(2,a),o=o+f):(s=t*Math.pow(2,f-1)*Math.pow(2,a),o=0));a>=8;e[n+p]=s&255,p+=h,s/=256,a-=8);for(o=o<<a|s,u+=a;u>0;e[n+p]=o&255,p+=h,o/=256,u-=8);e[n+p-h]|=g*128};var IX=Xn,ng=SE;function Xn(e){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(e)?e:new Uint8Array(e||0),this.pos=0,this.type=0,this.length=this.buf.length}Xn.Varint=0;Xn.Fixed64=1;Xn.Bytes=2;Xn.Fixed32=5;var Zw=(1<<16)*(1<<16),QT=1/Zw,LX=12,WN=typeof TextDecoder=="undefined"?null:new TextDecoder("utf8");Xn.prototype={destroy:function(){this.buf=null},readFields:function(e,t,n){for(n=n||this.length;this.pos<n;){var r=this.readVarint(),a=r>>3,i=this.pos;this.type=r&7,e(a,t,this),this.pos===i&&this.skip(r)}return t},readMessage:function(e,t){return this.readFields(e,t,this.readVarint()+this.pos)},readFixed32:function(){var e=rg(this.buf,this.pos);return this.pos+=4,e},readSFixed32:function(){var e=eA(this.buf,this.pos);return this.pos+=4,e},readFixed64:function(){var e=rg(this.buf,this.pos)+rg(this.buf,this.pos+4)*Zw;return this.pos+=8,e},readSFixed64:function(){var e=rg(this.buf,this.pos)+eA(this.buf,this.pos+4)*Zw;return this.pos+=8,e},readFloat:function(){var e=ng.read(this.buf,this.pos,!0,23,4);return this.pos+=4,e},readDouble:function(){var e=ng.read(this.buf,this.pos,!0,52,8);return this.pos+=8,e},readVarint:function(e){var t=this.buf,n,r;return r=t[this.pos++],n=r&127,r<128||(r=t[this.pos++],n|=(r&127)<<7,r<128)||(r=t[this.pos++],n|=(r&127)<<14,r<128)||(r=t[this.pos++],n|=(r&127)<<21,r<128)?n:(r=t[this.pos],n|=(r&15)<<28,NX(n,e,this))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var e=this.readVarint();return e%2===1?(e+1)/-2:e/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var e=this.readVarint()+this.pos,t=this.pos;return this.pos=e,e-t>=LX&&WN?ZX(this.buf,t,e):XX(this.buf,t,e)},readBytes:function(){var e=this.readVarint()+this.pos,t=this.buf.subarray(this.pos,e);return this.pos=e,t},readPackedVarint:function(e,t){if(this.type!==Xn.Bytes)return e.push(this.readVarint(t));var n=Us(this);for(e=e||[];this.pos<n;)e.push(this.readVarint(t));return e},readPackedSVarint:function(e){if(this.type!==Xn.Bytes)return e.push(this.readSVarint());var t=Us(this);for(e=e||[];this.pos<t;)e.push(this.readSVarint());return e},readPackedBoolean:function(e){if(this.type!==Xn.Bytes)return e.push(this.readBoolean());var t=Us(this);for(e=e||[];this.pos<t;)e.push(this.readBoolean());return e},readPackedFloat:function(e){if(this.type!==Xn.Bytes)return e.push(this.readFloat());var t=Us(this);for(e=e||[];this.pos<t;)e.push(this.readFloat());return e},readPackedDouble:function(e){if(this.type!==Xn.Bytes)return e.push(this.readDouble());var t=Us(this);for(e=e||[];this.pos<t;)e.push(this.readDouble());return e},readPackedFixed32:function(e){if(this.type!==Xn.Bytes)return e.push(this.readFixed32());var t=Us(this);for(e=e||[];this.pos<t;)e.push(this.readFixed32());return e},readPackedSFixed32:function(e){if(this.type!==Xn.Bytes)return e.push(this.readSFixed32());var t=Us(this);for(e=e||[];this.pos<t;)e.push(this.readSFixed32());return e},readPackedFixed64:function(e){if(this.type!==Xn.Bytes)return e.push(this.readFixed64());var t=Us(this);for(e=e||[];this.pos<t;)e.push(this.readFixed64());return e},readPackedSFixed64:function(e){if(this.type!==Xn.Bytes)return e.push(this.readSFixed64());var t=Us(this);for(e=e||[];this.pos<t;)e.push(this.readSFixed64());return e},skip:function(e){var t=e&7;if(t===Xn.Varint)for(;this.buf[this.pos++]>127;);else if(t===Xn.Bytes)this.pos=this.readVarint()+this.pos;else if(t===Xn.Fixed32)this.pos+=4;else if(t===Xn.Fixed64)this.pos+=8;else throw new Error("Unimplemented type: "+t)},writeTag:function(e,t){this.writeVarint(e<<3|t)},realloc:function(e){for(var t=this.length||16;t<this.pos+e;)t*=2;if(t!==this.length){var n=new Uint8Array(t);n.set(this.buf),this.buf=n,this.length=t}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(e){this.realloc(4),of(this.buf,e,this.pos),this.pos+=4},writeSFixed32:function(e){this.realloc(4),of(this.buf,e,this.pos),this.pos+=4},writeFixed64:function(e){this.realloc(8),of(this.buf,e&-1,this.pos),of(this.buf,Math.floor(e*QT),this.pos+4),this.pos+=8},writeSFixed64:function(e){this.realloc(8),of(this.buf,e&-1,this.pos),of(this.buf,Math.floor(e*QT),this.pos+4),this.pos+=8},writeVarint:function(e){if(e=+e||0,e>268435455||e<0){FX(e,this);return}this.realloc(4),this.buf[this.pos++]=e&127|(e>127?128:0),!(e<=127)&&(this.buf[this.pos++]=(e>>>=7)&127|(e>127?128:0),!(e<=127)&&(this.buf[this.pos++]=(e>>>=7)&127|(e>127?128:0),!(e<=127)&&(this.buf[this.pos++]=e>>>7&127)))},writeSVarint:function(e){this.writeVarint(e<0?-e*2-1:e*2)},writeBoolean:function(e){this.writeVarint(Boolean(e))},writeString:function(e){e=String(e),this.realloc(e.length*4),this.pos++;var t=this.pos;this.pos=qX(this.buf,e,this.pos);var n=this.pos-t;n>=128&&JT(t,n,this),this.pos=t-1,this.writeVarint(n),this.pos+=n},writeFloat:function(e){this.realloc(4),ng.write(this.buf,e,this.pos,!0,23,4),this.pos+=4},writeDouble:function(e){this.realloc(8),ng.write(this.buf,e,this.pos,!0,52,8),this.pos+=8},writeBytes:function(e){var t=e.length;this.writeVarint(t),this.realloc(t);for(var n=0;n<t;n++)this.buf[this.pos++]=e[n]},writeRawMessage:function(e,t){this.pos++;var n=this.pos;e(t,this);var r=this.pos-n;r>=128&&JT(n,r,this),this.pos=n-1,this.writeVarint(r),this.pos+=r},writeMessage:function(e,t,n){this.writeTag(e,Xn.Bytes),this.writeRawMessage(t,n)},writePackedVarint:function(e,t){t.length&&this.writeMessage(e,zX,t)},writePackedSVarint:function(e,t){t.length&&this.writeMessage(e,UX,t)},writePackedBoolean:function(e,t){t.length&&this.writeMessage(e,jX,t)},writePackedFloat:function(e,t){t.length&&this.writeMessage(e,$X,t)},writePackedDouble:function(e,t){t.length&&this.writeMessage(e,VX,t)},writePackedFixed32:function(e,t){t.length&&this.writeMessage(e,GX,t)},writePackedSFixed32:function(e,t){t.length&&this.writeMessage(e,HX,t)},writePackedFixed64:function(e,t){t.length&&this.writeMessage(e,WX,t)},writePackedSFixed64:function(e,t){t.length&&this.writeMessage(e,YX,t)},writeBytesField:function(e,t){this.writeTag(e,Xn.Bytes),this.writeBytes(t)},writeFixed32Field:function(e,t){this.writeTag(e,Xn.Fixed32),this.writeFixed32(t)},writeSFixed32Field:function(e,t){this.writeTag(e,Xn.Fixed32),this.writeSFixed32(t)},writeFixed64Field:function(e,t){this.writeTag(e,Xn.Fixed64),this.writeFixed64(t)},writeSFixed64Field:function(e,t){this.writeTag(e,Xn.Fixed64),this.writeSFixed64(t)},writeVarintField:function(e,t){this.writeTag(e,Xn.Varint),this.writeVarint(t)},writeSVarintField:function(e,t){this.writeTag(e,Xn.Varint),this.writeSVarint(t)},writeStringField:function(e,t){this.writeTag(e,Xn.Bytes),this.writeString(t)},writeFloatField:function(e,t){this.writeTag(e,Xn.Fixed32),this.writeFloat(t)},writeDoubleField:function(e,t){this.writeTag(e,Xn.Fixed64),this.writeDouble(t)},writeBooleanField:function(e,t){this.writeVarintField(e,Boolean(t))}};function NX(e,t,n){var r=n.buf,a,i;if(i=r[n.pos++],a=(i&112)>>4,i<128||(i=r[n.pos++],a|=(i&127)<<3,i<128)||(i=r[n.pos++],a|=(i&127)<<10,i<128)||(i=r[n.pos++],a|=(i&127)<<17,i<128)||(i=r[n.pos++],a|=(i&127)<<24,i<128)||(i=r[n.pos++],a|=(i&1)<<31,i<128))return af(e,a,t);throw new Error("Expected varint not more than 10 bytes")}function Us(e){return e.type===Xn.Bytes?e.readVarint()+e.pos:e.pos+1}function af(e,t,n){return n?t*4294967296+(e>>>0):(t>>>0)*4294967296+(e>>>0)}function FX(e,t){var n,r;if(e>=0?(n=e%4294967296|0,r=e/4294967296|0):(n=~(-e%4294967296),r=~(-e/4294967296),n^4294967295?n=n+1|0:(n=0,r=r+1|0)),e>=0xffffffffffffffff||e<-0xffffffffffffffff)throw new Error("Given varint doesn't fit into 10 bytes");t.realloc(10),DX(n,r,t),BX(r,t)}function DX(e,t,n){n.buf[n.pos++]=e&127|128,e>>>=7,n.buf[n.pos++]=e&127|128,e>>>=7,n.buf[n.pos++]=e&127|128,e>>>=7,n.buf[n.pos++]=e&127|128,e>>>=7,n.buf[n.pos]=e&127}function BX(e,t){var n=(e&7)<<4;t.buf[t.pos++]|=n|((e>>>=3)?128:0),e&&(t.buf[t.pos++]=e&127|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=e&127|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=e&127|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=e&127|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=e&127)))))}function JT(e,t,n){var r=t<=16383?1:t<=2097151?2:t<=268435455?3:Math.floor(Math.log(t)/(Math.LN2*7));n.realloc(r);for(var a=n.pos-1;a>=e;a--)n.buf[a+r]=n.buf[a]}function zX(e,t){for(var n=0;n<e.length;n++)t.writeVarint(e[n])}function UX(e,t){for(var n=0;n<e.length;n++)t.writeSVarint(e[n])}function $X(e,t){for(var n=0;n<e.length;n++)t.writeFloat(e[n])}function VX(e,t){for(var n=0;n<e.length;n++)t.writeDouble(e[n])}function jX(e,t){for(var n=0;n<e.length;n++)t.writeBoolean(e[n])}function GX(e,t){for(var n=0;n<e.length;n++)t.writeFixed32(e[n])}function HX(e,t){for(var n=0;n<e.length;n++)t.writeSFixed32(e[n])}function WX(e,t){for(var n=0;n<e.length;n++)t.writeFixed64(e[n])}function YX(e,t){for(var n=0;n<e.length;n++)t.writeSFixed64(e[n])}function rg(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16)+e[t+3]*16777216}function of(e,t,n){e[n]=t,e[n+1]=t>>>8,e[n+2]=t>>>16,e[n+3]=t>>>24}function eA(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16)+(e[t+3]<<24)}function XX(e,t,n){for(var r="",a=t;a<n;){var i=e[a],o=null,s=i>239?4:i>223?3:i>191?2:1;if(a+s>n)break;var l,u,c;s===1?i<128&&(o=i):s===2?(l=e[a+1],(l&192)===128&&(o=(i&31)<<6|l&63,o<=127&&(o=null))):s===3?(l=e[a+1],u=e[a+2],(l&192)===128&&(u&192)===128&&(o=(i&15)<<12|(l&63)<<6|u&63,(o<=2047||o>=55296&&o<=57343)&&(o=null))):s===4&&(l=e[a+1],u=e[a+2],c=e[a+3],(l&192)===128&&(u&192)===128&&(c&192)===128&&(o=(i&15)<<18|(l&63)<<12|(u&63)<<6|c&63,(o<=65535||o>=1114112)&&(o=null))),o===null?(o=65533,s=1):o>65535&&(o-=65536,r+=String.fromCharCode(o>>>10&1023|55296),o=56320|o&1023),r+=String.fromCharCode(o),a+=s}return r}function ZX(e,t,n){return WN.decode(e.subarray(t,n))}function qX(e,t,n){for(var r=0,a,i;r<t.length;r++){if(a=t.charCodeAt(r),a>55295&&a<57344)if(i)if(a<56320){e[n++]=239,e[n++]=191,e[n++]=189,i=a;continue}else a=i-55296<<10|a-56320|65536,i=null;else{a>56319||r+1===t.length?(e[n++]=239,e[n++]=191,e[n++]=189):i=a;continue}else i&&(e[n++]=239,e[n++]=191,e[n++]=189,i=null);a<128?e[n++]=a:(a<2048?e[n++]=a>>6|192:(a<65536?e[n++]=a>>12|224:(e[n++]=a>>18|240,e[n++]=a>>12&63|128),e[n++]=a>>6&63|128),e[n++]=a&63|128)}return n}function tA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function L1(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?tA(Object(n),!0).forEach(function(r){m(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tA(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var KX={tileSize:256,minZoom:0,maxZoom:1/0,zoomOffset:0},nA=512;function QX(e,t,n){var r=e/Math.pow(2,n)*360-180,a=Math.PI-2*Math.PI*t/Math.pow(2,n),i=180/Math.PI*Math.atan(.5*(Math.exp(a)-Math.exp(-a)));return[r,i]}function JX(e){for(var t=0,n=0,r=e.length,a=r-1,i,o;n<r;a=n++)i=e[n],o=e[a],t+=(o.x-i.x)*(i.y+o.y);return t}function eZ(e){var t=e.length;if(t<=1)return[e];for(var n=[],r,a,i=0;i<t;i++){var o=JX(e[i]);o!==0&&(a===void 0&&(a=o<0),a===o<0?(r&&n.push(r),r=[e[i]]):r.push(e[i]))}return r&&n.push(r),n}var tZ=["Unknown","Point","LineString","Polygon"];function nZ(e,t){var n=t.extent,r=t.loadGeometry(),a=t.type,i=t.properties,o=t.id,s=n*Math.pow(2,e),l=tZ[a],u,c;function f(h){for(var g=0;g<h.length;g++){var v=h[g];h[g]=[v.x/s*nA,v.y/s*nA]}}switch(a){case 1:var d=[];for(u=0;u<r.length;u++)d[u]=r[u][0];r=d,f(r);break;case 2:for(u=0;u<r.length;u++)f(r[u]);break;case 3:for(r=eZ(r),u=0;u<r.length;u++)for(c=0;c<r[u].length;c++)f(r[u][c]);break}r.length===1?r=r[0]:l="Multi"+l;var p={type:"Feature",geometry:{type:l,coordinates:r},properties:i,id:o,tileOrigin:[0,0],coord:""};return p}var rZ=function(){var e=lr(vn.mark(function t(n,r,a,i){var o;return vn.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return o=wE(n,r),l.abrupt("return",new Promise(function(u){var c=vE({url:o},function(f,d){if(f||!d)u({layers:{}});else{for(var p=new PX(new IX(d)),h=QX(r.x,r.y,r.z),g=r.z,v=0,b=Object.keys(p.layers);v<b.length;v++){for(var y=b[v],x=[],k=p.layers[y],T=0;T<p.layers[y].length;T++){var C=p.layers[y].feature(T),I=void 0;i==="lnglat"?I=C.toGeoJSON(r.x,r.y,r.z):(I=nZ(g,C),k.l7TileOrigin=h,k.l7TileCoord=i),x.push(I)}k.features=x}u(p)}});a.xhrCancel=function(){return c.abort()}}));case 2:case"end":return l.stop()}},t)}));return function(n,r,a,i){return e.apply(this,arguments)}}();function aZ(e,t){var n=(t==null?void 0:t.coord)||"lnglat",r=function(o,s){return rZ(e,o,s,n)},a=L1(L1(L1({},KX),t),{},{getTileData:r});return{data:e,dataArray:[],tilesetOptions:a,isTile:!0}}function iZ(e,t){var n=t.extent,r=t.width,a=t.height,i=t.min,o=t.max,s={_id:1,dataArray:[{_id:1,data:Array.from(e),width:r,height:a,min:i,max:o,coordinates:[[n[0],n[1]],[n[2],n[3]]]}]};return s}var Gv;(function(e){e.IMAGE="image",e.ARRAYBUFFER="arraybuffer"})(Gv||(Gv={}));var oZ=function(){var e=lr(vn.mark(function t(n,r,a,i){var o;return vn.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return o=wE(n,r),l.abrupt("return",new Promise(function(u,c){var f=PY({url:o},function(d,p){d?c(d):p&&u(p)},i);a.xhrCancel=function(){return f.abort()}}));case 2:case"end":return l.stop()}},t)}));return function(n,r,a,i){return e.apply(this,arguments)}}(),sZ=function(){var e=lr(vn.mark(function t(n,r,a){var i;return vn.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return i=wE(n,r),s.abrupt("return",new Promise(function(l,u){var c=Ww({url:i},function(f,d){f?u(f):d&&l(d)});a.xhrCancel=function(){return c.abort()}}));case 2:case"end":return s.stop()}},t)}));return function(n,r,a){return e.apply(this,arguments)}}(),lZ=function(){return{rasterData:new Uint8Array([0]),width:1,height:1}};function rA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function N1(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?rA(Object(n),!0).forEach(function(r){m(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rA(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var uZ={tileSize:256,minZoom:0,maxZoom:1/0,zoomOffset:0};function cZ(e,t){var n=(t==null?void 0:t.dataType)||Gv.IMAGE,r=function(o,s){return n===Gv.IMAGE?sZ(e,o,s):oZ(e,o,s,(t==null?void 0:t.format)||lZ)},a=N1(N1(N1({},uZ),t),{},{getTileData:r});return{data:e,dataArray:[],tilesetOptions:a,isTile:!0}}function fZ(){this.__data__=[],this.size=0}var dZ=fZ;function pZ(e,t){return e===t||e!==e&&t!==t}var Dm=pZ,hZ=Dm;function mZ(e,t){for(var n=e.length;n--;)if(hZ(e[n][0],t))return n;return-1}var Yb=mZ,gZ=Yb,vZ=Array.prototype,bZ=vZ.splice;function yZ(e){var t=this.__data__,n=gZ(t,e);if(n<0)return!1;var r=t.length-1;return n==r?t.pop():bZ.call(t,n,1),--this.size,!0}var xZ=yZ,_Z=Yb;function wZ(e){var t=this.__data__,n=_Z(t,e);return n<0?void 0:t[n][1]}var kZ=wZ,EZ=Yb;function SZ(e){return EZ(this.__data__,e)>-1}var CZ=SZ,TZ=Yb;function AZ(e,t){var n=this.__data__,r=TZ(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this}var OZ=AZ,MZ=dZ,RZ=xZ,PZ=kZ,IZ=CZ,LZ=OZ;function zd(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}zd.prototype.clear=MZ;zd.prototype.delete=RZ;zd.prototype.get=PZ;zd.prototype.has=IZ;zd.prototype.set=LZ;var Xb=zd,NZ=Xb;function FZ(){this.__data__=new NZ,this.size=0}var DZ=FZ;function BZ(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}var zZ=BZ;function UZ(e){return this.__data__.get(e)}var $Z=UZ;function VZ(e){return this.__data__.has(e)}var jZ=VZ,GZ=typeof Qs=="object"&&Qs&&Qs.Object===Object&&Qs,YN=GZ,HZ=YN,WZ=typeof self=="object"&&self&&self.Object===Object&&self,YZ=HZ||WZ||Function("return this")(),Ms=YZ,XZ=Ms,ZZ=XZ.Symbol,Bm=ZZ,aA=Bm,XN=Object.prototype,qZ=XN.hasOwnProperty,KZ=XN.toString,Pp=aA?aA.toStringTag:void 0;function QZ(e){var t=qZ.call(e,Pp),n=e[Pp];try{e[Pp]=void 0;var r=!0}catch{}var a=KZ.call(e);return r&&(t?e[Pp]=n:delete e[Pp]),a}var JZ=QZ,eq=Object.prototype,tq=eq.toString;function nq(e){return tq.call(e)}var rq=nq,iA=Bm,aq=JZ,iq=rq,oq="[object Null]",sq="[object Undefined]",oA=iA?iA.toStringTag:void 0;function lq(e){return e==null?e===void 0?sq:oq:oA&&oA in Object(e)?aq(e):iq(e)}var Eu=lq;function uq(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var kr=uq,cq=Eu,fq=kr,dq="[object AsyncFunction]",pq="[object Function]",hq="[object GeneratorFunction]",mq="[object Proxy]";function gq(e){if(!fq(e))return!1;var t=cq(e);return t==pq||t==hq||t==dq||t==mq}var As=gq,vq=Ms,bq=vq["__core-js_shared__"],yq=bq,F1=yq,sA=function(){var e=/[^.]+$/.exec(F1&&F1.keys&&F1.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function xq(e){return!!sA&&sA in e}var _q=xq,wq=Function.prototype,kq=wq.toString;function Eq(e){if(e!=null){try{return kq.call(e)}catch{}try{return e+""}catch{}}return""}var ZN=Eq,Sq=As,Cq=_q,Tq=kr,Aq=ZN,Oq=/[\\^$.*+?()[\]{}|]/g,Mq=/^\[object .+?Constructor\]$/,Rq=Function.prototype,Pq=Object.prototype,Iq=Rq.toString,Lq=Pq.hasOwnProperty,Nq=RegExp("^"+Iq.call(Lq).replace(Oq,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Fq(e){if(!Tq(e)||Cq(e))return!1;var t=Sq(e)?Nq:Mq;return t.test(Aq(e))}var Dq=Fq;function Bq(e,t){return e==null?void 0:e[t]}var zq=Bq,Uq=Dq,$q=zq;function Vq(e,t){var n=$q(e,t);return Uq(n)?n:void 0}var Oc=Vq,jq=Oc,Gq=Ms,Hq=jq(Gq,"Map"),CE=Hq,Wq=Oc,Yq=Wq(Object,"create"),Zb=Yq,lA=Zb;function Xq(){this.__data__=lA?lA(null):{},this.size=0}var Zq=Xq;function qq(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var Kq=qq,Qq=Zb,Jq="__lodash_hash_undefined__",eK=Object.prototype,tK=eK.hasOwnProperty;function nK(e){var t=this.__data__;if(Qq){var n=t[e];return n===Jq?void 0:n}return tK.call(t,e)?t[e]:void 0}var rK=nK,aK=Zb,iK=Object.prototype,oK=iK.hasOwnProperty;function sK(e){var t=this.__data__;return aK?t[e]!==void 0:oK.call(t,e)}var lK=sK,uK=Zb,cK="__lodash_hash_undefined__";function fK(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=uK&&t===void 0?cK:t,this}var dK=fK,pK=Zq,hK=Kq,mK=rK,gK=lK,vK=dK;function Ud(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}Ud.prototype.clear=pK;Ud.prototype.delete=hK;Ud.prototype.get=mK;Ud.prototype.has=gK;Ud.prototype.set=vK;var bK=Ud,uA=bK,yK=Xb,xK=CE;function _K(){this.size=0,this.__data__={hash:new uA,map:new(xK||yK),string:new uA}}var wK=_K;function kK(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}var EK=kK,SK=EK;function CK(e,t){var n=e.__data__;return SK(t)?n[typeof t=="string"?"string":"hash"]:n.map}var qb=CK,TK=qb;function AK(e){var t=TK(this,e).delete(e);return this.size-=t?1:0,t}var OK=AK,MK=qb;function RK(e){return MK(this,e).get(e)}var PK=RK,IK=qb;function LK(e){return IK(this,e).has(e)}var NK=LK,FK=qb;function DK(e,t){var n=FK(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this}var BK=DK,zK=wK,UK=OK,$K=PK,VK=NK,jK=BK;function $d(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}$d.prototype.clear=zK;$d.prototype.delete=UK;$d.prototype.get=$K;$d.prototype.has=VK;$d.prototype.set=jK;var qN=$d,GK=Xb,HK=CE,WK=qN,YK=200;function XK(e,t){var n=this.__data__;if(n instanceof GK){var r=n.__data__;if(!HK||r.length<YK-1)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new WK(r)}return n.set(e,t),this.size=n.size,this}var ZK=XK,qK=Xb,KK=DZ,QK=zZ,JK=$Z,eQ=jZ,tQ=ZK;function Vd(e){var t=this.__data__=new qK(e);this.size=t.size}Vd.prototype.clear=KK;Vd.prototype.delete=QK;Vd.prototype.get=JK;Vd.prototype.has=eQ;Vd.prototype.set=tQ;var TE=Vd,nQ=Oc,rQ=function(){try{var e=nQ(Object,"defineProperty");return e({},"",{}),e}catch{}}(),KN=rQ,cA=KN;function aQ(e,t,n){t=="__proto__"&&cA?cA(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}var AE=aQ,iQ=AE,oQ=Dm;function sQ(e,t,n){(n!==void 0&&!oQ(e[t],n)||n===void 0&&!(t in e))&&iQ(e,t,n)}var QN=sQ;function lQ(e){return function(t,n,r){for(var a=-1,i=Object(t),o=r(t),s=o.length;s--;){var l=o[e?s:++a];if(n(i[l],l,i)===!1)break}return t}}var uQ=lQ,cQ=uQ,fQ=cQ(),dQ=fQ,Hv={exports:{}};(function(e,t){var n=Ms,r=t&&!t.nodeType&&t,a=r&&!0&&e&&!e.nodeType&&e,i=a&&a.exports===r,o=i?n.Buffer:void 0,s=o?o.allocUnsafe:void 0;function l(u,c){if(c)return u.slice();var f=u.length,d=s?s(f):new u.constructor(f);return u.copy(d),d}e.exports=l})(Hv,Hv.exports);var pQ=Ms,hQ=pQ.Uint8Array,JN=hQ,fA=JN;function mQ(e){var t=new e.constructor(e.byteLength);return new fA(t).set(new fA(e)),t}var OE=mQ,gQ=OE;function vQ(e,t){var n=t?gQ(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}var e9=vQ;function bQ(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t}var t9=bQ,yQ=kr,dA=Object.create,xQ=function(){function e(){}return function(t){if(!yQ(t))return{};if(dA)return dA(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}(),_Q=xQ;function wQ(e,t){return function(n){return e(t(n))}}var n9=wQ,kQ=n9,EQ=kQ(Object.getPrototypeOf,Object),ME=EQ,SQ=Object.prototype;function CQ(e){var t=e&&e.constructor,n=typeof t=="function"&&t.prototype||SQ;return e===n}var RE=CQ,TQ=_Q,AQ=ME,OQ=RE;function MQ(e){return typeof e.constructor=="function"&&!OQ(e)?TQ(AQ(e)):{}}var r9=MQ;function RQ(e){return e!=null&&typeof e=="object"}var es=RQ,PQ=Eu,IQ=es,LQ="[object Arguments]";function NQ(e){return IQ(e)&&PQ(e)==LQ}var FQ=NQ,pA=FQ,DQ=es,a9=Object.prototype,BQ=a9.hasOwnProperty,zQ=a9.propertyIsEnumerable,UQ=pA(function(){return arguments}())?pA:function(e){return DQ(e)&&BQ.call(e,"callee")&&!zQ.call(e,"callee")},i9=UQ,$Q=Array.isArray,Mc=$Q,VQ=9007199254740991;function jQ(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=VQ}var o9=jQ,GQ=As,HQ=o9;function WQ(e){return e!=null&&HQ(e.length)&&!GQ(e)}var Kb=WQ,YQ=Kb,XQ=es;function ZQ(e){return XQ(e)&&YQ(e)}var qQ=ZQ,_d={exports:{}};function KQ(){return!1}var QQ=KQ;(function(e,t){var n=Ms,r=QQ,a=t&&!t.nodeType&&t,i=a&&!0&&e&&!e.nodeType&&e,o=i&&i.exports===a,s=o?n.Buffer:void 0,l=s?s.isBuffer:void 0,u=l||r;e.exports=u})(_d,_d.exports);var JQ=Eu,eJ=ME,tJ=es,nJ="[object Object]",rJ=Function.prototype,aJ=Object.prototype,s9=rJ.toString,iJ=aJ.hasOwnProperty,oJ=s9.call(Object);function sJ(e){if(!tJ(e)||JQ(e)!=nJ)return!1;var t=eJ(e);if(t===null)return!0;var n=iJ.call(t,"constructor")&&t.constructor;return typeof n=="function"&&n instanceof n&&s9.call(n)==oJ}var l9=sJ,lJ=Eu,uJ=o9,cJ=es,fJ="[object Arguments]",dJ="[object Array]",pJ="[object Boolean]",hJ="[object Date]",mJ="[object Error]",gJ="[object Function]",vJ="[object Map]",bJ="[object Number]",yJ="[object Object]",xJ="[object RegExp]",_J="[object Set]",wJ="[object String]",kJ="[object WeakMap]",EJ="[object ArrayBuffer]",SJ="[object DataView]",CJ="[object Float32Array]",TJ="[object Float64Array]",AJ="[object Int8Array]",OJ="[object Int16Array]",MJ="[object Int32Array]",RJ="[object Uint8Array]",PJ="[object Uint8ClampedArray]",IJ="[object Uint16Array]",LJ="[object Uint32Array]",yr={};yr[CJ]=yr[TJ]=yr[AJ]=yr[OJ]=yr[MJ]=yr[RJ]=yr[PJ]=yr[IJ]=yr[LJ]=!0;yr[fJ]=yr[dJ]=yr[EJ]=yr[pJ]=yr[SJ]=yr[hJ]=yr[mJ]=yr[gJ]=yr[vJ]=yr[bJ]=yr[yJ]=yr[xJ]=yr[_J]=yr[wJ]=yr[kJ]=!1;function NJ(e){return cJ(e)&&uJ(e.length)&&!!yr[lJ(e)]}var FJ=NJ;function DJ(e){return function(t){return e(t)}}var PE=DJ,um={exports:{}};(function(e,t){var n=YN,r=t&&!t.nodeType&&t,a=r&&!0&&e&&!e.nodeType&&e,i=a&&a.exports===r,o=i&&n.process,s=function(){try{var l=a&&a.require&&a.require("util").types;return l||o&&o.binding&&o.binding("util")}catch{}}();e.exports=s})(um,um.exports);var BJ=FJ,zJ=PE,hA=um.exports,mA=hA&&hA.isTypedArray,UJ=mA?zJ(mA):BJ,Qb=UJ;function $J(e,t){if(!(t==="constructor"&&typeof e[t]=="function")&&t!="__proto__")return e[t]}var u9=$J,VJ=AE,jJ=Dm,GJ=Object.prototype,HJ=GJ.hasOwnProperty;function WJ(e,t,n){var r=e[t];(!(HJ.call(e,t)&&jJ(r,n))||n===void 0&&!(t in e))&&VJ(e,t,n)}var c9=WJ,YJ=c9,XJ=AE;function ZJ(e,t,n,r){var a=!n;n||(n={});for(var i=-1,o=t.length;++i<o;){var s=t[i],l=r?r(n[s],e[s],s,n,e):void 0;l===void 0&&(l=e[s]),a?XJ(n,s,l):YJ(n,s,l)}return n}var zm=ZJ;function qJ(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}var KJ=qJ,QJ=9007199254740991,JJ=/^(?:0|[1-9]\d*)$/;function eee(e,t){var n=typeof e;return t=t==null?QJ:t,!!t&&(n=="number"||n!="symbol"&&JJ.test(e))&&e>-1&&e%1==0&&e<t}var f9=eee,tee=KJ,nee=i9,ree=Mc,aee=_d.exports,iee=f9,oee=Qb,see=Object.prototype,lee=see.hasOwnProperty;function uee(e,t){var n=ree(e),r=!n&&nee(e),a=!n&&!r&&aee(e),i=!n&&!r&&!a&&oee(e),o=n||r||a||i,s=o?tee(e.length,String):[],l=s.length;for(var u in e)(t||lee.call(e,u))&&!(o&&(u=="length"||a&&(u=="offset"||u=="parent")||i&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||iee(u,l)))&&s.push(u);return s}var d9=uee;function cee(e){var t=[];if(e!=null)for(var n in Object(e))t.push(n);return t}var fee=cee,dee=kr,pee=RE,hee=fee,mee=Object.prototype,gee=mee.hasOwnProperty;function vee(e){if(!dee(e))return hee(e);var t=pee(e),n=[];for(var r in e)r=="constructor"&&(t||!gee.call(e,r))||n.push(r);return n}var bee=vee,yee=d9,xee=bee,_ee=Kb;function wee(e){return _ee(e)?yee(e,!0):xee(e)}var Um=wee,kee=zm,Eee=Um;function See(e){return kee(e,Eee(e))}var Cee=See,gA=QN,Tee=Hv.exports,Aee=e9,Oee=t9,Mee=r9,vA=i9,bA=Mc,Ree=qQ,Pee=_d.exports,Iee=As,Lee=kr,Nee=l9,Fee=Qb,yA=u9,Dee=Cee;function Bee(e,t,n,r,a,i,o){var s=yA(e,n),l=yA(t,n),u=o.get(l);if(u){gA(e,n,u);return}var c=i?i(s,l,n+"",e,t,o):void 0,f=c===void 0;if(f){var d=bA(l),p=!d&&Pee(l),h=!d&&!p&&Fee(l);c=l,d||p||h?bA(s)?c=s:Ree(s)?c=Oee(s):p?(f=!1,c=Tee(l,!0)):h?(f=!1,c=Aee(l,!0)):c=[]:Nee(l)||vA(l)?(c=s,vA(s)?c=Dee(s):(!Lee(s)||Iee(s))&&(c=Mee(l))):f=!1}f&&(o.set(l,c),a(c,l,r,i,o),o.delete(l)),gA(e,n,c)}var zee=Bee,Uee=TE,$ee=QN,Vee=dQ,jee=zee,Gee=kr,Hee=Um,Wee=u9;function p9(e,t,n,r,a){e!==t&&Vee(t,function(i,o){if(a||(a=new Uee),Gee(i))jee(e,t,o,n,p9,r,a);else{var s=r?r(Wee(e,o),i,o+"",e,t,a):void 0;s===void 0&&(s=i),$ee(e,o,s)}},Hee)}var h9=p9;function Yee(e){return e}var m9=Yee;function Xee(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}var Zee=Xee,qee=Zee,xA=Math.max;function Kee(e,t,n){return t=xA(t===void 0?e.length-1:t,0),function(){for(var r=arguments,a=-1,i=xA(r.length-t,0),o=Array(i);++a<i;)o[a]=r[t+a];a=-1;for(var s=Array(t+1);++a<t;)s[a]=r[a];return s[t]=n(o),qee(e,this,s)}}var Qee=Kee;function Jee(e){return function(){return e}}var ete=Jee,tte=ete,_A=KN,nte=m9,rte=_A?function(e,t){return _A(e,"toString",{configurable:!0,enumerable:!1,value:tte(t),writable:!0})}:nte,ate=rte,ite=800,ote=16,ste=Date.now;function lte(e){var t=0,n=0;return function(){var r=ste(),a=ote-(r-n);if(n=r,a>0){if(++t>=ite)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var ute=lte,cte=ate,fte=ute,dte=fte(cte),pte=dte,hte=m9,mte=Qee,gte=pte;function vte(e,t){return gte(mte(e,t,hte),e+"")}var bte=vte,yte=Dm,xte=Kb,_te=f9,wte=kr;function kte(e,t,n){if(!wte(n))return!1;var r=typeof t;return(r=="number"?xte(n)&&_te(t,n.length):r=="string"&&t in n)?yte(n[t],e):!1}var Ete=kte,Ste=bte,Cte=Ete;function Tte(e){return Ste(function(t,n){var r=-1,a=n.length,i=a>1?n[a-1]:void 0,o=a>2?n[2]:void 0;for(i=e.length>3&&typeof i=="function"?(a--,i):void 0,o&&Cte(n[0],n[1],o)&&(i=a<3?void 0:i,a=1),t=Object(t);++r<a;){var s=n[r];s&&e(t,s,r,i)}return t})}var g9=Tte,Ate=h9,Ote=g9,Mte=Ote(function(e,t,n,r){Ate(e,t,n,r)}),Rte=Mte,Pte=Eu,Ite=Mc,Lte=es,Nte="[object String]";function Fte(e){return typeof e=="string"||!Ite(e)&&Lte(e)&&Pte(e)==Nte}var Wo=Fte;function Dte(e,t){for(var n=-1,r=e==null?0:e.length;++n<r&&t(e[n],n,e)!==!1;);return e}var Bte=Dte,zte=n9,Ute=zte(Object.keys,Object),$te=Ute,Vte=RE,jte=$te,Gte=Object.prototype,Hte=Gte.hasOwnProperty;function Wte(e){if(!Vte(e))return jte(e);var t=[];for(var n in Object(e))Hte.call(e,n)&&n!="constructor"&&t.push(n);return t}var Yte=Wte,Xte=d9,Zte=Yte,qte=Kb;function Kte(e){return qte(e)?Xte(e):Zte(e)}var IE=Kte,Qte=zm,Jte=IE;function ene(e,t){return e&&Qte(t,Jte(t),e)}var tne=ene,nne=zm,rne=Um;function ane(e,t){return e&&nne(t,rne(t),e)}var ine=ane;function one(e,t){for(var n=-1,r=e==null?0:e.length,a=0,i=[];++n<r;){var o=e[n];t(o,n,e)&&(i[a++]=o)}return i}var sne=one;function lne(){return[]}var v9=lne,une=sne,cne=v9,fne=Object.prototype,dne=fne.propertyIsEnumerable,wA=Object.getOwnPropertySymbols,pne=wA?function(e){return e==null?[]:(e=Object(e),une(wA(e),function(t){return dne.call(e,t)}))}:cne,LE=pne,hne=zm,mne=LE;function gne(e,t){return hne(e,mne(e),t)}var vne=gne;function bne(e,t){for(var n=-1,r=t.length,a=e.length;++n<r;)e[a+n]=t[n];return e}var b9=bne,yne=b9,xne=ME,_ne=LE,wne=v9,kne=Object.getOwnPropertySymbols,Ene=kne?function(e){for(var t=[];e;)yne(t,_ne(e)),e=xne(e);return t}:wne,y9=Ene,Sne=zm,Cne=y9;function Tne(e,t){return Sne(e,Cne(e),t)}var Ane=Tne,One=b9,Mne=Mc;function Rne(e,t,n){var r=t(e);return Mne(e)?r:One(r,n(e))}var x9=Rne,Pne=x9,Ine=LE,Lne=IE;function Nne(e){return Pne(e,Lne,Ine)}var _9=Nne,Fne=x9,Dne=y9,Bne=Um;function zne(e){return Fne(e,Bne,Dne)}var Une=zne,$ne=Oc,Vne=Ms,jne=$ne(Vne,"DataView"),Gne=jne,Hne=Oc,Wne=Ms,Yne=Hne(Wne,"Promise"),Xne=Yne,Zne=Oc,qne=Ms,Kne=Zne(qne,"Set"),w9=Kne,Qne=Oc,Jne=Ms,ere=Qne(Jne,"WeakMap"),tre=ere,qw=Gne,Kw=CE,Qw=Xne,Jw=w9,ek=tre,k9=Eu,jd=ZN,kA="[object Map]",nre="[object Object]",EA="[object Promise]",SA="[object Set]",CA="[object WeakMap]",TA="[object DataView]",rre=jd(qw),are=jd(Kw),ire=jd(Qw),ore=jd(Jw),sre=jd(ek),Qu=k9;(qw&&Qu(new qw(new ArrayBuffer(1)))!=TA||Kw&&Qu(new Kw)!=kA||Qw&&Qu(Qw.resolve())!=EA||Jw&&Qu(new Jw)!=SA||ek&&Qu(new ek)!=CA)&&(Qu=function(e){var t=k9(e),n=t==nre?e.constructor:void 0,r=n?jd(n):"";if(r)switch(r){case rre:return TA;case are:return kA;case ire:return EA;case ore:return SA;case sre:return CA}return t});var Jb=Qu,lre=Object.prototype,ure=lre.hasOwnProperty;function cre(e){var t=e.length,n=new e.constructor(t);return t&&typeof e[0]=="string"&&ure.call(e,"index")&&(n.index=e.index,n.input=e.input),n}var fre=cre,dre=OE;function pre(e,t){var n=t?dre(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}var hre=pre,mre=/\w*$/;function gre(e){var t=new e.constructor(e.source,mre.exec(e));return t.lastIndex=e.lastIndex,t}var vre=gre,AA=Bm,OA=AA?AA.prototype:void 0,MA=OA?OA.valueOf:void 0;function bre(e){return MA?Object(MA.call(e)):{}}var yre=bre,xre=OE,_re=hre,wre=vre,kre=yre,Ere=e9,Sre="[object Boolean]",Cre="[object Date]",Tre="[object Map]",Are="[object Number]",Ore="[object RegExp]",Mre="[object Set]",Rre="[object String]",Pre="[object Symbol]",Ire="[object ArrayBuffer]",Lre="[object DataView]",Nre="[object Float32Array]",Fre="[object Float64Array]",Dre="[object Int8Array]",Bre="[object Int16Array]",zre="[object Int32Array]",Ure="[object Uint8Array]",$re="[object Uint8ClampedArray]",Vre="[object Uint16Array]",jre="[object Uint32Array]";function Gre(e,t,n){var r=e.constructor;switch(t){case Ire:return xre(e);case Sre:case Cre:return new r(+e);case Lre:return _re(e,n);case Nre:case Fre:case Dre:case Bre:case zre:case Ure:case $re:case Vre:case jre:return Ere(e,n);case Tre:return new r;case Are:case Rre:return new r(e);case Ore:return wre(e);case Mre:return new r;case Pre:return kre(e)}}var Hre=Gre,Wre=Jb,Yre=es,Xre="[object Map]";function Zre(e){return Yre(e)&&Wre(e)==Xre}var qre=Zre,Kre=qre,Qre=PE,RA=um.exports,PA=RA&&RA.isMap,Jre=PA?Qre(PA):Kre,eae=Jre,tae=Jb,nae=es,rae="[object Set]";function aae(e){return nae(e)&&tae(e)==rae}var iae=aae,oae=iae,sae=PE,IA=um.exports,LA=IA&&IA.isSet,lae=LA?sae(LA):oae,uae=lae,cae=TE,fae=Bte,dae=c9,pae=tne,hae=ine,mae=Hv.exports,gae=t9,vae=vne,bae=Ane,yae=_9,xae=Une,_ae=Jb,wae=fre,kae=Hre,Eae=r9,Sae=Mc,Cae=_d.exports,Tae=eae,Aae=kr,Oae=uae,Mae=IE,Rae=Um,Pae=1,Iae=2,Lae=4,E9="[object Arguments]",Nae="[object Array]",Fae="[object Boolean]",Dae="[object Date]",Bae="[object Error]",S9="[object Function]",zae="[object GeneratorFunction]",Uae="[object Map]",$ae="[object Number]",C9="[object Object]",Vae="[object RegExp]",jae="[object Set]",Gae="[object String]",Hae="[object Symbol]",Wae="[object WeakMap]",Yae="[object ArrayBuffer]",Xae="[object DataView]",Zae="[object Float32Array]",qae="[object Float64Array]",Kae="[object Int8Array]",Qae="[object Int16Array]",Jae="[object Int32Array]",eie="[object Uint8Array]",tie="[object Uint8ClampedArray]",nie="[object Uint16Array]",rie="[object Uint32Array]",fr={};fr[E9]=fr[Nae]=fr[Yae]=fr[Xae]=fr[Fae]=fr[Dae]=fr[Zae]=fr[qae]=fr[Kae]=fr[Qae]=fr[Jae]=fr[Uae]=fr[$ae]=fr[C9]=fr[Vae]=fr[jae]=fr[Gae]=fr[Hae]=fr[eie]=fr[tie]=fr[nie]=fr[rie]=!0;fr[Bae]=fr[S9]=fr[Wae]=!1;function Zg(e,t,n,r,a,i){var o,s=t&Pae,l=t&Iae,u=t&Lae;if(n&&(o=a?n(e,r,a,i):n(e)),o!==void 0)return o;if(!Aae(e))return e;var c=Sae(e);if(c){if(o=wae(e),!s)return gae(e,o)}else{var f=_ae(e),d=f==S9||f==zae;if(Cae(e))return mae(e,s);if(f==C9||f==E9||d&&!a){if(o=l||d?{}:Eae(e),!s)return l?bae(e,hae(o,e)):vae(e,pae(o,e))}else{if(!fr[f])return a?e:{};o=kae(e,f,s)}}i||(i=new cae);var p=i.get(e);if(p)return p;i.set(e,o),Oae(e)?e.forEach(function(v){o.add(Zg(v,t,n,v,e,i))}):Tae(e)&&e.forEach(function(v,b){o.set(b,Zg(v,t,n,b,e,i))});var h=u?l?xae:yae:l?Rae:Mae,g=c?void 0:h(e);return fae(g||e,function(v,b){g&&(b=v,v=e[b]),dae(o,b,Zg(v,t,n,b,e,i))}),o}var aie=Zg,iie=aie,oie=1,sie=4;function lie(e){return iie(e,oie|sie)}var nd=lie;/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */function uie(e,t,n,r){function a(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function s(c){try{u(r.next(c))}catch(f){o(f)}}function l(c){try{u(r.throw(c))}catch(f){o(f)}}function u(c){c.done?i(c.value):a(c.value).then(s,l)}u((r=r.apply(e,t||[])).next())})}function cie(e,t){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,a,i,o;return o={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function s(u){return function(c){return l([u,c])}}function l(u){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,a&&(i=u[0]&2?a.return:u[0]?a.throw||((i=a.return)&&i.call(a),0):a.next)&&!(i=i.call(a,u[1])).done)return i;switch(a=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return n.label++,{value:u[1],done:!1};case 5:n.label++,a=u[1],u=[0];continue;case 7:u=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){n=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){n.label=u[1];break}if(u[0]===6&&n.label<i[1]){n.label=i[1],i=u;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(u);break}i[2]&&n.ops.pop(),n.trys.pop();continue}u=t.call(e,n)}catch(c){u=[6,c],a=0}finally{r=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}function fie(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),a,i=[],o;try{for(;(t===void 0||t-- >0)&&!(a=r.next()).done;)i.push(a.value)}catch(s){o={error:s}}finally{try{a&&!a.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return i}function die(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(fie(arguments[t]));return e}function aa(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function ia(e,t){return t={exports:{}},e(t,t.exports),t.exports}var ey=ia(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=n;function n(r){return r&&typeof r.length=="number"&&r.length>=0&&r.length%1===0}e.exports=t.default});aa(ey);var T9=ia(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(n){return function(){for(var r=[],a=arguments.length;a--;)r[a]=arguments[a];var i=r.pop();return n.call(this,r,i)}},e.exports=t.default});aa(T9);var Gd=ia(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.fallback=a,t.wrap=i;var n=t.hasSetImmediate=typeof setImmediate=="function"&&setImmediate,r=t.hasNextTick=typeof process=="object"&&typeof process.nextTick=="function";function a(s){setTimeout(s,0)}function i(s){return function(l){for(var u=[],c=arguments.length-1;c-- >0;)u[c]=arguments[c+1];return s(function(){return l.apply(void 0,u)})}}var o;n?o=setImmediate:r?o=process.nextTick:o=a,t.default=i(o)});aa(Gd);Gd.fallback;Gd.wrap;Gd.hasSetImmediate;Gd.hasNextTick;var A9=ia(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var n=a(T9),r=a(Gd);function a(l){return l&&l.__esModule?l:{default:l}}function i(l){return(0,Zo.isAsync)(l)?function(){for(var u=[],c=arguments.length;c--;)u[c]=arguments[c];var f=u.pop(),d=l.apply(this,u);return o(d,f)}:(0,n.default)(function(u,c){var f;try{f=l.apply(this,u)}catch(d){return c(d)}if(f&&typeof f.then=="function")return o(f,c);c(null,f)})}function o(l,u){return l.then(function(c){s(u,null,c)},function(c){s(u,c&&c.message?c:new Error(c))})}function s(l,u,c){try{l(u,c)}catch(f){(0,r.default)(function(d){throw d},f)}}e.exports=t.default});aa(A9);var Zo=ia(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.isAsyncIterable=t.isAsyncGenerator=t.isAsync=void 0;var n=r(A9);function r(l){return l&&l.__esModule?l:{default:l}}function a(l){return l[Symbol.toStringTag]==="AsyncFunction"}function i(l){return l[Symbol.toStringTag]==="AsyncGenerator"}function o(l){return typeof l[Symbol.asyncIterator]=="function"}function s(l){if(typeof l!="function")throw new Error("expected a function");return a(l)?(0,n.default)(l):l}t.default=s,t.isAsync=a,t.isAsyncGenerator=i,t.isAsyncIterable=o});aa(Zo);Zo.isAsyncIterable;Zo.isAsyncGenerator;Zo.isAsync;var Hd=ia(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=n;function n(r,a){if(a===void 0&&(a=r.length),!a)throw new Error("arity is undefined");function i(){for(var o=this,s=[],l=arguments.length;l--;)s[l]=arguments[l];return typeof s[a-1]=="function"?r.apply(this,s):new Promise(function(u,c){s[a-1]=function(f){for(var d=[],p=arguments.length-1;p-- >0;)d[p]=arguments[p+1];if(f)return c(f);u(d.length>1?d:d[0])},r.apply(o,s)})}return Object.defineProperty(i,"name",{configurable:!0,value:"awaitable("+r.name+")"}),i}e.exports=t.default});aa(Hd);var NE=ia(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n=i(ey),r=i(Zo),a=i(Hd);function i(o){return o&&o.__esModule?o:{default:o}}t.default=(0,a.default)(function(o,s,l){var u=(0,n.default)(s)?[]:{};o(s,function(c,f,d){(0,r.default)(c)(function(p){for(var h,g=[],v=arguments.length-1;v-- >0;)g[v]=arguments[v+1];g.length<2&&(h=g,g=h[0]),u[f]=g,d(p)})},function(c){return l(c,u)})},3),e.exports=t.default});aa(NE);var ty=ia(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=n;function n(r){function a(){for(var i=[],o=arguments.length;o--;)i[o]=arguments[o];if(r!==null){var s=r;r=null,s.apply(this,i)}}return Object.assign(a,r),a}e.exports=t.default});aa(ty);var O9=ia(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(n){return n[Symbol.iterator]&&n[Symbol.iterator]()},e.exports=t.default});aa(O9);var M9=ia(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=l;var n=a(ey),r=a(O9);function a(u){return u&&u.__esModule?u:{default:u}}function i(u){var c=-1,f=u.length;return function(){return++c<f?{value:u[c],key:c}:null}}function o(u){var c=-1;return function(){var d=u.next();return d.done?null:(c++,{value:d.value,key:c})}}function s(u){var c=u?Object.keys(u):[],f=-1,d=c.length;return function(){var h=c[++f];return f<d?{value:u[h],key:h}:null}}function l(u){if((0,n.default)(u))return i(u);var c=(0,r.default)(u);return c?o(c):s(u)}e.exports=t.default});aa(M9);var ny=ia(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=n;function n(r){return function(){for(var a=[],i=arguments.length;i--;)a[i]=arguments[i];if(r===null)throw new Error("Callback was already called.");var o=r;r=null,o.apply(this,a)}}e.exports=t.default});aa(ny);var ry=ia(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n={};t.default=n,e.exports=t.default});aa(ry);var R9=ia(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=a;var n=r(ry);function r(i){return i&&i.__esModule?i:{default:i}}function a(i,o,s,l){var u=!1,c=!1,f=!1,d=0,p=0;function h(){d>=o||f||u||(f=!0,i.next().then(function(b){var y=b.value,x=b.done;if(!(c||u)){if(f=!1,x){u=!0,d<=0&&l(null);return}d++,s(y,p,g),p++,h()}}).catch(v))}function g(b,y){if(d-=1,!c){if(b)return v(b);if(b===!1){u=!0,c=!0;return}if(y===n.default||u&&d<=0)return u=!0,l(null);h()}}function v(b){c||(f=!1,u=!0,l(b))}h()}e.exports=t.default});aa(R9);var P9=ia(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n=s(ty),r=s(M9),a=s(ny),i=s(R9),o=s(ry);function s(l){return l&&l.__esModule?l:{default:l}}t.default=function(l){return function(u,c,f){if(f=(0,n.default)(f),l<=0)throw new RangeError("concurrency limit cannot be less than 1");if(!u)return f(null);if((0,Zo.isAsyncGenerator)(u))return(0,i.default)(u,l,c,f);if((0,Zo.isAsyncIterable)(u))return(0,i.default)(u[Symbol.asyncIterator](),l,c,f);var d=(0,r.default)(u),p=!1,h=!1,g=0,v=!1;function b(x,k){if(!h)if(g-=1,x)p=!0,f(x);else if(x===!1)p=!0,h=!0;else{if(k===o.default||p&&g<=0)return p=!0,f(null);v||y()}}function y(){for(v=!0;g<l&&!p;){var x=d();if(x===null){p=!0,g<=0&&f(null);return}g+=1,c(x.value,x.key,(0,a.default)(b))}v=!1}y()}},e.exports=t.default});aa(P9);var FE=ia(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n=i(P9),r=i(Zo),a=i(Hd);function i(s){return s&&s.__esModule?s:{default:s}}function o(s,l,u,c){return(0,n.default)(l)(s,(0,r.default)(u),c)}t.default=(0,a.default)(o,4),e.exports=t.default});aa(FE);var I9=ia(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n=a(FE),r=a(Hd);function a(o){return o&&o.__esModule?o:{default:o}}function i(o,s,l){return(0,n.default)(o,1,s,l)}t.default=(0,r.default)(i,3),e.exports=t.default});aa(I9);var pie=ia(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var n=a(NE),r=a(I9);function a(o){return o&&o.__esModule?o:{default:o}}function i(o,s){return(0,n.default)(r.default,o,s)}e.exports=t.default}),L9=aa(pie),ds=function(){function e(){this.args=[],this.tasks=[]}return e.prototype.call=function(){for(var t=arguments,n=[],r=0;r<arguments.length;r++)n[r]=t[r];return this.args=n,L9(this.tasks)},e.prototype.tap=function(t,n){var r=this;this.tasks.push(function(a){n.apply(void 0,die(r.args)),a(null,t)})},e}(),N9=ia(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n=u(ey),r=u(ry),a=u(FE),i=u(ty),o=u(ny),s=u(Zo),l=u(Hd);function u(p){return p&&p.__esModule?p:{default:p}}function c(p,h,g){g=(0,i.default)(g);var v=0,b=0,y=p.length,x=!1;y===0&&g(null);function k(T,C){T===!1&&(x=!0),x!==!0&&(T?g(T):(++b===y||C===r.default)&&g(null))}for(;v<y;v++)h(p[v],v,(0,o.default)(k))}function f(p,h,g){return(0,a.default)(p,1/0,h,g)}function d(p,h,g){var v=(0,n.default)(p)?c:f;return v(p,(0,s.default)(h),g)}t.default=(0,l.default)(d,3),e.exports=t.default});aa(N9);var hie=ia(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var n=a(N9),r=a(NE);function a(o){return o&&o.__esModule?o:{default:o}}function i(o,s){return(0,r.default)(n.default,o,s)}e.exports=t.default}),mie=aa(hie),gie=function(){function e(){this.tasks=[]}return e.prototype.promise=function(){return mie(this.tasks)},e.prototype.tapPromise=function(t,n){var r=this;this.tasks.push(function(a){return uie(r,void 0,void 0,function(){return cie(this,function(i){switch(i.label){case 0:return[4,n()];case 1:return i.sent(),a(null,t),[2]}})})})},e}(),vie=ia(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n=o(ty),r=o(ny),a=o(Zo),i=o(Hd);function o(l){return l&&l.__esModule?l:{default:l}}function s(l,u){if(u=(0,n.default)(u),!Array.isArray(l))return u(new Error("First argument to waterfall must be an array of functions"));if(!l.length)return u();var c=0;function f(p){var h=(0,a.default)(l[c++]);h.apply(void 0,p.concat([(0,r.default)(d)]))}function d(p){for(var h=[],g=arguments.length-1;g-- >0;)h[g]=arguments[g+1];if(p!==!1){if(p||c===l.length)return u.apply(void 0,[p].concat(h));f(h)}}f([])}t.default=(0,i.default)(s),e.exports=t.default}),bie=aa(vie),yie=function(){function e(){this.tasks=[]}return e.prototype.call=function(){return bie(this.tasks)},e.prototype.tap=function(t,n){this.tasks.length===0?this.tasks.push(function(r){var a=n();r(a?null:!1,a)}):this.tasks.push(function(r,a){var i=n();a(i?null:!1,t)})},e}(),D1=function(){function e(){this.tasks=[]}return e.prototype.call=function(){return L9(this.tasks)},e.prototype.tap=function(t,n){this.tasks.push(function(r){var a=n();r(a,t)})},e}(),F9={exports:{}};(function(e,t){(function(n,r){e.exports=r()})(Qs,function(){function n(A,S,M,O,R,G){if(!(R-O<=M)){var ee=O+R>>1;r(A,S,ee,O,R,G%2),n(A,S,M,O,ee-1,G+1),n(A,S,M,ee+1,R,G+1)}}function r(A,S,M,O,R,G){for(;R>O;){if(R-O>600){var ee=R-O+1,re=M-O+1,X=Math.log(ee),K=.5*Math.exp(2*X/3),ae=.5*Math.sqrt(X*K*(ee-K)/ee)*(re-ee/2<0?-1:1),le=Math.max(O,Math.floor(M-re*K/ee+ae)),ue=Math.min(R,Math.floor(M+(ee-re)*K/ee+ae));r(A,S,M,le,ue,G)}var ge=S[2*M+G],be=O,ze=R;for(a(A,S,O,M),S[2*R+G]>ge&&a(A,S,O,R);be<ze;){for(a(A,S,be,ze),be++,ze--;S[2*be+G]<ge;)be++;for(;S[2*ze+G]>ge;)ze--}S[2*O+G]===ge?a(A,S,O,ze):(ze++,a(A,S,ze,R)),ze<=M&&(O=ze+1),M<=ze&&(R=ze-1)}}function a(A,S,M,O){i(A,M,O),i(S,2*M,2*O),i(S,2*M+1,2*O+1)}function i(A,S,M){var O=A[S];A[S]=A[M],A[M]=O}function o(A,S,M,O,R,G,ee){for(var re=[0,A.length-1,0],X=[],K,ae;re.length;){var le=re.pop(),ue=re.pop(),ge=re.pop();if(ue-ge<=ee){for(var be=ge;be<=ue;be++)K=S[2*be],ae=S[2*be+1],K>=M&&K<=R&&ae>=O&&ae<=G&&X.push(A[be]);continue}var ze=Math.floor((ge+ue)/2);K=S[2*ze],ae=S[2*ze+1],K>=M&&K<=R&&ae>=O&&ae<=G&&X.push(A[ze]);var Lt=(le+1)%2;(le===0?M<=K:O<=ae)&&(re.push(ge),re.push(ze-1),re.push(Lt)),(le===0?R>=K:G>=ae)&&(re.push(ze+1),re.push(ue),re.push(Lt))}return X}function s(A,S,M,O,R,G){for(var ee=[0,A.length-1,0],re=[],X=R*R;ee.length;){var K=ee.pop(),ae=ee.pop(),le=ee.pop();if(ae-le<=G){for(var ue=le;ue<=ae;ue++)l(S[2*ue],S[2*ue+1],M,O)<=X&&re.push(A[ue]);continue}var ge=Math.floor((le+ae)/2),be=S[2*ge],ze=S[2*ge+1];l(be,ze,M,O)<=X&&re.push(A[ge]);var Lt=(K+1)%2;(K===0?M-R<=be:O-R<=ze)&&(ee.push(le),ee.push(ge-1),ee.push(Lt)),(K===0?M+R>=be:O+R>=ze)&&(ee.push(ge+1),ee.push(ae),ee.push(Lt))}return re}function l(A,S,M,O){var R=A-M,G=S-O;return R*R+G*G}var u=function(A){return A[0]},c=function(A){return A[1]},f=function(S,M,O,R,G){M===void 0&&(M=u),O===void 0&&(O=c),R===void 0&&(R=64),G===void 0&&(G=Float64Array),this.nodeSize=R,this.points=S;for(var ee=S.length<65536?Uint16Array:Uint32Array,re=this.ids=new ee(S.length),X=this.coords=new G(S.length*2),K=0;K<S.length;K++)re[K]=K,X[2*K]=M(S[K]),X[2*K+1]=O(S[K]);n(re,X,R,0,re.length-1,0)};f.prototype.range=function(S,M,O,R){return o(this.ids,this.coords,S,M,O,R,this.nodeSize)},f.prototype.within=function(S,M,O){return s(this.ids,this.coords,S,M,O,this.nodeSize)};var d={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:function(A){return A}},p=Math.fround||function(A){return function(S){return A[0]=+S,A[0]}}(new Float32Array(1)),h=function(S){this.options=I(Object.create(d),S),this.trees=new Array(this.options.maxZoom+1)};h.prototype.load=function(S){var M=this.options,O=M.log,R=M.minZoom,G=M.maxZoom,ee=M.nodeSize;O&&console.time("total time");var re="prepare "+S.length+" points";O&&console.time(re),this.points=S;for(var X=[],K=0;K<S.length;K++)!S[K].geometry||X.push(v(S[K],K));this.trees[G+1]=new f(X,P,j,ee,Float32Array),O&&console.timeEnd(re);for(var ae=G;ae>=R;ae--){var le=+Date.now();X=this._cluster(X,ae),this.trees[ae]=new f(X,P,j,ee,Float32Array),O&&console.log("z%d: %d clusters in %dms",ae,X.length,+Date.now()-le)}return O&&console.timeEnd("total time"),this},h.prototype.getClusters=function(S,M){var O=((S[0]+180)%360+360)%360-180,R=Math.max(-90,Math.min(90,S[1])),G=S[2]===180?180:((S[2]+180)%360+360)%360-180,ee=Math.max(-90,Math.min(90,S[3]));if(S[2]-S[0]>=360)O=-180,G=180;else if(O>G){var re=this.getClusters([O,R,180,ee],M),X=this.getClusters([-180,R,G,ee],M);return re.concat(X)}for(var K=this.trees[this._limitZoom(M)],ae=K.range(x(O),k(ee),x(G),k(R)),le=[],ue=0,ge=ae;ue<ge.length;ue+=1){var be=ge[ue],ze=K.points[be];le.push(ze.numPoints?b(ze):this.points[ze.index])}return le},h.prototype.getChildren=function(S){var M=this._getOriginId(S),O=this._getOriginZoom(S),R="No cluster with the specified id.",G=this.trees[O];if(!G)throw new Error(R);var ee=G.points[M];if(!ee)throw new Error(R);for(var re=this.options.radius/(this.options.extent*Math.pow(2,O-1)),X=G.within(ee.x,ee.y,re),K=[],ae=0,le=X;ae<le.length;ae+=1){var ue=le[ae],ge=G.points[ue];ge.parentId===S&&K.push(ge.numPoints?b(ge):this.points[ge.index])}if(K.length===0)throw new Error(R);return K},h.prototype.getLeaves=function(S,M,O){M=M||10,O=O||0;var R=[];return this._appendLeaves(R,S,M,O,0),R},h.prototype.getTile=function(S,M,O){var R=this.trees[this._limitZoom(S)],G=Math.pow(2,S),ee=this.options,re=ee.extent,X=ee.radius,K=X/re,ae=(O-K)/G,le=(O+1+K)/G,ue={features:[]};return this._addTileFeatures(R.range((M-K)/G,ae,(M+1+K)/G,le),R.points,M,O,G,ue),M===0&&this._addTileFeatures(R.range(1-K/G,ae,1,le),R.points,G,O,G,ue),M===G-1&&this._addTileFeatures(R.range(0,ae,K/G,le),R.points,-1,O,G,ue),ue.features.length?ue:null},h.prototype.getClusterExpansionZoom=function(S){for(var M=this._getOriginZoom(S)-1;M<=this.options.maxZoom;){var O=this.getChildren(S);if(M++,O.length!==1)break;S=O[0].properties.cluster_id}return M},h.prototype._appendLeaves=function(S,M,O,R,G){for(var ee=this.getChildren(M),re=0,X=ee;re<X.length;re+=1){var K=X[re],ae=K.properties;if(ae&&ae.cluster?G+ae.point_count<=R?G+=ae.point_count:G=this._appendLeaves(S,ae.cluster_id,O,R,G):G<R?G++:S.push(K),S.length===O)break}return G},h.prototype._addTileFeatures=function(S,M,O,R,G,ee){for(var re=0,X=S;re<X.length;re+=1){var K=X[re],ae=M[K],le=ae.numPoints,ue=void 0,ge=void 0,be=void 0;if(le)ue=y(ae),ge=ae.x,be=ae.y;else{var ze=this.points[ae.index];ue=ze.properties,ge=x(ze.geometry.coordinates[0]),be=k(ze.geometry.coordinates[1])}var Lt={type:1,geometry:[[Math.round(this.options.extent*(ge*G-O)),Math.round(this.options.extent*(be*G-R))]],tags:ue},Rt=void 0;le?Rt=ae.id:this.options.generateId?Rt=ae.index:this.points[ae.index].id&&(Rt=this.points[ae.index].id),Rt!==void 0&&(Lt.id=Rt),ee.features.push(Lt)}},h.prototype._limitZoom=function(S){return Math.max(this.options.minZoom,Math.min(Math.floor(+S),this.options.maxZoom+1))},h.prototype._cluster=function(S,M){for(var O=[],R=this.options,G=R.radius,ee=R.extent,re=R.reduce,X=R.minPoints,K=G/(ee*Math.pow(2,M)),ae=0;ae<S.length;ae++){var le=S[ae];if(!(le.zoom<=M)){le.zoom=M;for(var ue=this.trees[M+1],ge=ue.within(le.x,le.y,K),be=le.numPoints||1,ze=be,Lt=0,Rt=ge;Lt<Rt.length;Lt+=1){var qt=Rt[Lt],Me=ue.points[qt];Me.zoom>M&&(ze+=Me.numPoints||1)}if(ze>be&&ze>=X){for(var Qe=le.x*be,et=le.y*be,ve=re&&be>1?this._map(le,!0):null,ft=(ae<<5)+(M+1)+this.points.length,kt=0,xt=ge;kt<xt.length;kt+=1){var Ct=xt[kt],ht=ue.points[Ct];if(!(ht.zoom<=M)){ht.zoom=M;var Gt=ht.numPoints||1;Qe+=ht.x*Gt,et+=ht.y*Gt,ht.parentId=ft,re&&(ve||(ve=this._map(le,!0)),re(ve,this._map(ht)))}}le.parentId=ft,O.push(g(Qe/ze,et/ze,ft,ze,ve))}else if(O.push(le),ze>1)for(var Ht=0,yn=ge;Ht<yn.length;Ht+=1){var or=yn[Ht],Qn=ue.points[or];Qn.zoom<=M||(Qn.zoom=M,O.push(Qn))}}}return O},h.prototype._getOriginId=function(S){return S-this.points.length>>5},h.prototype._getOriginZoom=function(S){return(S-this.points.length)%32},h.prototype._map=function(S,M){if(S.numPoints)return M?I({},S.properties):S.properties;var O=this.points[S.index].properties,R=this.options.map(O);return M&&R===O?I({},R):R};function g(A,S,M,O,R){return{x:p(A),y:p(S),zoom:1/0,id:M,parentId:-1,numPoints:O,properties:R}}function v(A,S){var M=A.geometry.coordinates,O=M[0],R=M[1];return{x:p(x(O)),y:p(k(R)),zoom:1/0,index:S,parentId:-1}}function b(A){return{type:"Feature",id:A.id,properties:y(A),geometry:{type:"Point",coordinates:[T(A.x),C(A.y)]}}}function y(A){var S=A.numPoints,M=S>=1e4?Math.round(S/1e3)+"k":S>=1e3?Math.round(S/100)/10+"k":S;return I(I({},A.properties),{cluster:!0,cluster_id:A.id,point_count:S,point_count_abbreviated:M})}function x(A){return A/360+.5}function k(A){var S=Math.sin(A*Math.PI/180),M=.5-.25*Math.log((1+S)/(1-S))/Math.PI;return M<0?0:M>1?1:M}function T(A){return(A-.5)*360}function C(A){var S=(180-A*360)*Math.PI/180;return 360*Math.atan(Math.exp(S))/Math.PI-90}function I(A,S){for(var M in S)A[M]=S[M];return A}function P(A){return A.x}function j(A){return A.y}return h})})(F9);var D9=F9.exports;function NA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function B9(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?NA(Object(n),!0).forEach(function(r){m(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):NA(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function z9(e,t){var n=t.radius,r=n===void 0?40:n,a=t.maxZoom,i=a===void 0?18:a,o=t.minZoom,s=o===void 0?0:o,l=t.zoom,u=l===void 0?2:l;if(e.pointIndex){var c=e.pointIndex.getClusters(e.extent,Math.floor(u));return e.dataArray=xie(c),e}var f=new D9({radius:r,minZoom:s,maxZoom:i}),d={type:"FeatureCollection",features:[]};return d.features=e.dataArray.map(function(p){return{type:"Feature",geometry:{type:"Point",coordinates:p.coordinates},properties:B9({},p)}}),f.load(d.features),f}function xie(e){return e.map(function(t,n){return B9({coordinates:t.geometry.coordinates,_id:n+1},t.properties)})}function _ie(e){if(e.length===0)throw new Error("max requires at least one data point");for(var t=e[0],n=1;n<e.length;n++)e[n]>t&&(t=e[n]);return t}function wie(e){if(e.length===0)throw new Error("min requires at least one data point");for(var t=e[0],n=1;n<e.length;n++)e[n]<t&&(t=e[n]);return t}function U9(e){if(e.length===0)return 0;for(var t=e[0],n=0,r,a=1;a<e.length;a++)r=t+e[a]*1,Math.abs(t)>=Math.abs(e[a])?n+=t-r+e[a]:n+=e[a]-r+t,t=r;return t+n*1}function kie(e){if(e.length===0)throw new Error("mean requires at least one data point");return U9(e)/e.length}var Eie={min:wie,max:_ie,mean:kie,sum:U9};function Sie(e,t){return e.map(function(n){return n[t]*1})}function FA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Ip(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?FA(Object(n),!0).forEach(function(r){m(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):FA(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Cie(e){var t=Tie();return function(){var r=ke(e),a;if(t){var i=ke(this).constructor;a=Reflect.construct(r,arguments,i)}else a=r.apply(this,arguments);return It(this,a)}}function Tie(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Aie(e,t){if(Array.isArray(t))return t}var $m=function(e){Tt(n,e);var t=Cie(n);function n(r,a){var i;return Ae(this,n),i=t.call(this),m(D(i),"data",void 0),m(D(i),"center",void 0),m(D(i),"extent",void 0),m(D(i),"hooks",{init:new ds}),m(D(i),"parser",{type:"geojson"}),m(D(i),"transforms",[]),m(D(i),"cluster",!1),m(D(i),"clusterOptions",{enable:!1,radius:40,maxZoom:20,zoom:-99,method:"count"}),m(D(i),"tileset",void 0),m(D(i),"mapService",void 0),m(D(i),"invalidExtent",!1),m(D(i),"dataArrayChanged",!1),m(D(i),"originData",void 0),m(D(i),"rawData",void 0),m(D(i),"cfg",{}),m(D(i),"clusterIndex",void 0),i.originData=r,i.initCfg(a),i.hooks.init.tap("parser",function(){i.excuteParser()}),i.hooks.init.tap("cluster",function(){i.initCluster()}),i.hooks.init.tap("transform",function(){i.executeTrans()}),i.init(),i}return Oe(n,[{key:"getClusters",value:function(a){return this.clusterIndex.getClusters(this.caculClusterExtent(2),a)}},{key:"getClustersLeaves",value:function(a){return this.clusterIndex.getLeaves(a,1/0)}},{key:"updateClusterData",value:function(a){var i=this,o=this.clusterOptions,s=o.method,l=s===void 0?"sum":s,u=o.field,c=this.clusterIndex.getClusters(this.caculClusterExtent(2),Math.floor(a));this.clusterOptions.zoom=a,c.forEach(function(f){f.id||(f.properties.point_count=1)}),(u||As(l))&&(c=c.map(function(f){var d=f.id;if(d){var p=i.clusterIndex.getLeaves(d,1/0),h=p.map(function(b){return b.properties}),g;if(Wo(l)&&u){var v=Sie(h,u);g=Eie[l](v)}As(l)&&(g=l(h)),f.properties.stat=g}else f.properties.point_count=1;return f})),this.data=dT("geojson")({type:"FeatureCollection",features:c}),this.executeTrans()}},{key:"getFeatureById",value:function(a){var i=this.parser.type,o=i===void 0?"geojson":i;if(o==="geojson"&&!this.cluster){var s=a<this.originData.features.length?this.originData.features[a]:"null",l=nd(s);if(this.transforms.length!==0||this.dataArrayChanged){var u=this.data.dataArray.find(function(c){return c._id===a});l.properties=u}return l}else return a<this.data.dataArray.length?this.data.dataArray[a]:"null"}},{key:"updateFeaturePropertiesById",value:function(a,i){this.data.dataArray=this.data.dataArray.map(function(o){return o._id===a?Ip(Ip({},o),i):o}),this.dataArrayChanged=!0,this.emit("update")}},{key:"getFeatureId",value:function(a,i){var o=this.data.dataArray.find(function(s){return s[a]===i});return o==null?void 0:o._id}},{key:"setData",value:function(a,i){this.originData=a,this.dataArrayChanged=!1,this.initCfg(i),this.init(),this.emit("update")}},{key:"destroy",value:function(){var a;this.removeAllListeners(),this.originData=null,this.clusterIndex=null,this.data=null,(a=this.tileset)===null||a===void 0||a.destroy()}},{key:"initCfg",value:function(a){this.cfg=Rte(this.cfg,a,Aie);var i=this.cfg;i&&(i.parser&&(this.parser=i.parser),i.transforms&&(this.transforms=i.transforms),this.cluster=i.cluster||!1,i.clusterOptions&&(this.cluster=!0,this.clusterOptions=Ip(Ip({},this.clusterOptions),i.clusterOptions)))}},{key:"init",value:function(){this.hooks.init.call(this)}},{key:"excuteParser",value:function(){var a=this.parser,i=a.type||"geojson",o=dT(i);this.data=o(this.originData,a),this.extent=IY(this.data.dataArray),this.setCenter(this.extent),this.invalidExtent=this.extent[0]===this.extent[2]||this.extent[1]===this.extent[3],this.tileset=this.initTileset()}},{key:"setCenter",value:function(a){this.center=[(a[0]+a[2])/2,(a[1]+a[3])/2],(isNaN(this.center[0])||isNaN(this.center[1]))&&(this.center=[108.92361111111111,34.54083333333333])}},{key:"initTileset",value:function(){var a=this.data.tilesetOptions;if(!!a){if(this.tileset)return this.tileset.updateOptions(a),this.tileset;var i=new mX(Ip({},a));return i}}},{key:"executeTrans",value:function(){var a=this,i=this.transforms;i.forEach(function(o){var s=o.type,l=$H(s)(a.data,o);Object.assign(a.data,l)})}},{key:"initCluster",value:function(){if(!!this.cluster){var a=this.clusterOptions||{};this.clusterIndex=z9(this.data,a)}}},{key:"caculClusterExtent",value:function(a){var i=[[-1/0,-1/0],[1/0,1/0]];return this.invalidExtent||(i=im(Uv(this.extent),a)),i[0].concat(i[1])}}]),n}(Hi.exports.EventEmitter);function Oie(e,t){var n=t.callback;return n&&(e.dataArray=e.dataArray.filter(n)),e}function DA(e,t){var n=typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=Mie(e))||t&&e&&typeof e.length=="number"){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(u){throw u},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i=!0,o=!1,s;return{s:function(){n=n.call(e)},n:function(){var u=n.next();return i=u.done,u},e:function(u){o=!0,s=u},f:function(){try{!i&&n.return!=null&&n.return()}finally{if(o)throw s}}}}function Mie(e,t){if(!!e){if(typeof e=="string")return BA(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return BA(e,t)}}function BA(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var DE=6378e3;function Rie(e,t){var n=e.dataArray,r=t.size,a=r===void 0?10:r,i=a/(2*Math.PI*DE)*(256<<20)/2,o=Pie(n,a),s=o.gridHash,l=o.gridOffset,u=Fie(s,l,t);return{yOffset:i,xOffset:i,radius:i,type:"grid",dataArray:u}}function Pie(e,t){var n=1/0,r=-1/0,a,i=DA(e),o;try{for(i.s();!(o=i.n()).done;){var s=o.value;a=s.coordinates[1],Number.isFinite(a)&&(n=a<n?a:n,r=a>r?a:r)}}catch(x){i.e(x)}finally{i.f()}var l=(n+r)/2,u=Iie(t,l);if(u.xOffset<=0||u.yOffset<=0)return{gridHash:{},gridOffset:u};var c={},f=DA(e),d;try{for(f.s();!(d=f.n()).done;){var p=d.value,h=p.coordinates[1],g=p.coordinates[0];if(Number.isFinite(h)&&Number.isFinite(g)){var v=Math.floor((h+90)/u.yOffset),b=Math.floor((g+180)/u.xOffset),y="".concat(v,"-").concat(b);c[y]=c[y]||{count:0,points:[]},c[y].count+=1,c[y].points.push(p)}}}catch(x){f.e(x)}finally{f.f()}return{gridHash:c,gridOffset:u}}function Iie(e,t){var n=Lie(e),r=Nie(t,e);return{yOffset:n,xOffset:r}}function Lie(e){return e/DE*(180/Math.PI)}function Nie(e,t){return t/DE*(180/Math.PI)/Math.cos(e*Math.PI/180)}function Fie(e,t,n){return Object.keys(e).reduce(function(r,a,i){var o=a.split("-"),s=parseInt(o[0],10),l=parseInt(o[1],10),u={};if(n.field&&n.method){var c=gE(e[a].points,n.field);u[n.method]=mE[n.method](c)}return Object.assign(u,{_id:i,coordinates:ms([-180+t.xOffset*(l+.5),-90+t.yOffset*(s+.5)]),rawData:e[a].points,count:e[a].count}),r.push(u),r},[])}var _f=Math.PI/3,Die=[0,_f,2*_f,3*_f,4*_f,5*_f];function Bie(e){return e[0]}function zie(e){return e[1]}function Uie(){var e=0,t=0,n=1,r=1,a=Bie,i=zie,o,s,l;function u(f){var d={},p=[],h,g=f.length;for(h=0;h<g;++h)if(!(isNaN(b=+a.call(null,v=f[h],h,f))||isNaN(y=+i.call(null,v,h,f)))){var v,b,y,x=Math.round(y=y/l),k=Math.round(b=b/s-(x&1)/2),T=y-x;if(Math.abs(T)*3>1){var C=b-k,I=k+(b<k?-1:1)/2,P=x+(y<x?-1:1),j=b-I,A=y-P;C*C+T*T>j*j+A*A&&(k=I+(x&1?1:-1)/2,x=P)}var S=k+"-"+x,M=d[S];M?M.push(v):(p.push(M=d[S]=[v]),M.x=(k+(x&1)/2)*s,M.y=x*l)}return p}function c(f){var d=0,p=0;return Die.map(function(h){var g=Math.sin(h)*f,v=-Math.cos(h)*f,b=g-d,y=v-p;return d=g,p=v,[b,y]})}return u.hexagon=function(f){return"m"+c(f==null?o:+f).join("l")+"z"},u.centers=function(){for(var f=[],d=Math.round(t/l),p=Math.round(e/s),h=d*l;h<r+o;h+=l,++d)for(var g=p*s+(d&1)*s/2;g<n+s/2;g+=s)f.push([g,h]);return f},u.mesh=function(){var f=c(o).slice(0,4).join("l");return u.centers().map(function(d){return"M"+d+"m"+f}).join("")},u.x=function(f){return arguments.length?(a=f,u):a},u.y=function(f){return arguments.length?(i=f,u):i},u.radius=function(f){return arguments.length?(o=+f,s=o*2*Math.sin(_f),l=o*1.5,u):o},u.size=function(f){return arguments.length?(e=t=0,n=+f[0],r=+f[1],u):[n-e,r-t]},u.extent=function(f){return arguments.length?(e=+f[0][0],t=+f[0][1],n=+f[1][0],r=+f[1][1],u):[[e,t],[n,r]]},u.radius(1)}function zA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function UA(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?zA(Object(n),!0).forEach(function(r){m(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zA(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var $ie=6378e3;function Vie(e,t){var n=e.dataArray,r=t.size,a=r===void 0?10:r,i=t.method,o=i===void 0?"sum":i,s=a/(2*Math.PI*$ie)*(256<<20)/2,l=n.map(function(d){var p=ms(d.coordinates),h=Le(p,2),g=h[0],v=h[1];return UA(UA({},d),{},{coordinates:[g,v]})}),u=Uie().radius(s).x(function(d){return d.coordinates[0]}).y(function(d){return d.coordinates[1]}),c=u(l),f={dataArray:c.map(function(d,p){var h;if(t.field&&o){var g=gE(d,t.field);d[o]=mE[o](g)}return h={},m(h,t.method,d[o]),m(h,"count",d.length),m(h,"rawData",d),m(h,"coordinates",[d.x,d.y]),m(h,"_id",p),h}),radius:s,xOffset:s,yOffset:s,type:"hexagon"};return f}function $A(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function VA(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?$A(Object(n),!0).forEach(function(r){m(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$A(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function jie(e,t){var n=t.sourceField,r=t.targetField,a=t.data,i={};return a.forEach(function(o){i[o[n]]=o}),e.dataArray=e.dataArray.map(function(o){var s=o[r];return VA(VA({},o),i[s])}),e}function Gie(e,t){var n=t.callback;return n&&(e.dataArray=e.dataArray.map(n)),e}Ac("rasterTile",cZ);Ac("mvt",aZ);Ac("geojson",cW);Ac("image",GN);Ac("csv",tW);Ac("json",pN);Ac("raster",iZ);Nd("cluster",z9);Nd("filter",Oie);Nd("join",jie);Nd("map",Gie);Nd("grid",Rie);Nd("hexagon",Vie);var Hie=JH,Wie=eW;/*! *****************************************************************************
Copyright (C) Microsoft. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var jA;(function(e){(function(t){var n=typeof Qs=="object"?Qs:typeof self=="object"?self:typeof this=="object"?this:Function("return this;")(),r=a(e);typeof n.Reflect=="undefined"?n.Reflect=e:r=a(n.Reflect,r),t(r);function a(i,o){return function(s,l){typeof i[s]!="function"&&Object.defineProperty(i,s,{configurable:!0,writable:!0,value:l}),o&&o(s,l)}}})(function(t){var n=Object.prototype.hasOwnProperty,r=typeof Symbol=="function",a=r&&typeof Symbol.toPrimitive!="undefined"?Symbol.toPrimitive:"@@toPrimitive",i=r&&typeof Symbol.iterator!="undefined"?Symbol.iterator:"@@iterator",o=typeof Object.create=="function",s={__proto__:[]}instanceof Array,l=!o&&!s,u={create:o?function(){return mr(Object.create(null))}:s?function(){return mr({__proto__:null})}:function(){return mr({})},has:l?function(E,Ce){return n.call(E,Ce)}:function(E,Ce){return Ce in E},get:l?function(E,Ce){return n.call(E,Ce)?E[Ce]:void 0}:function(E,Ce){return E[Ce]}},c=Object.getPrototypeOf(Function),f=typeof process=="object"&&process.env&&process.env.REFLECT_METADATA_USE_MAP_POLYFILL==="true",d=!f&&typeof Map=="function"&&typeof Map.prototype.entries=="function"?Map:yn(),p=!f&&typeof Set=="function"&&typeof Set.prototype.entries=="function"?Set:or(),h=!f&&typeof WeakMap=="function"?WeakMap:Qn(),g=new h;function v(E,Ce,Fe,ut){if(le(Fe)){if(!Qe(E))throw new TypeError;if(!ve(Ce))throw new TypeError;return A(E,Ce)}else{if(!Qe(E))throw new TypeError;if(!be(Ce))throw new TypeError;if(!be(ut)&&!le(ut)&&!ue(ut))throw new TypeError;return ue(ut)&&(ut=void 0),Fe=Me(Fe),S(E,Ce,Fe,ut)}}t("decorate",v);function b(E,Ce){function Fe(ut,Et){if(!be(ut))throw new TypeError;if(!le(Et)&&!ft(Et))throw new TypeError;re(E,Ce,ut,Et)}return Fe}t("metadata",b);function y(E,Ce,Fe,ut){if(!be(Fe))throw new TypeError;return le(ut)||(ut=Me(ut)),re(E,Ce,Fe,ut)}t("defineMetadata",y);function x(E,Ce,Fe){if(!be(Ce))throw new TypeError;return le(Fe)||(Fe=Me(Fe)),O(E,Ce,Fe)}t("hasMetadata",x);function k(E,Ce,Fe){if(!be(Ce))throw new TypeError;return le(Fe)||(Fe=Me(Fe)),R(E,Ce,Fe)}t("hasOwnMetadata",k);function T(E,Ce,Fe){if(!be(Ce))throw new TypeError;return le(Fe)||(Fe=Me(Fe)),G(E,Ce,Fe)}t("getMetadata",T);function C(E,Ce,Fe){if(!be(Ce))throw new TypeError;return le(Fe)||(Fe=Me(Fe)),ee(E,Ce,Fe)}t("getOwnMetadata",C);function I(E,Ce){if(!be(E))throw new TypeError;return le(Ce)||(Ce=Me(Ce)),X(E,Ce)}t("getMetadataKeys",I);function P(E,Ce){if(!be(E))throw new TypeError;return le(Ce)||(Ce=Me(Ce)),K(E,Ce)}t("getOwnMetadataKeys",P);function j(E,Ce,Fe){if(!be(Ce))throw new TypeError;le(Fe)||(Fe=Me(Fe));var ut=M(Ce,Fe,!1);if(le(ut)||!ut.delete(E))return!1;if(ut.size>0)return!0;var Et=g.get(Ce);return Et.delete(Fe),Et.size>0||g.delete(Ce),!0}t("deleteMetadata",j);function A(E,Ce){for(var Fe=E.length-1;Fe>=0;--Fe){var ut=E[Fe],Et=ut(Ce);if(!le(Et)&&!ue(Et)){if(!ve(Et))throw new TypeError;Ce=Et}}return Ce}function S(E,Ce,Fe,ut){for(var Et=E.length-1;Et>=0;--Et){var Jt=E[Et],At=Jt(Ce,Fe,ut);if(!le(At)&&!ue(At)){if(!be(At))throw new TypeError;ut=At}}return ut}function M(E,Ce,Fe){var ut=g.get(E);if(le(ut)){if(!Fe)return;ut=new d,g.set(E,ut)}var Et=ut.get(Ce);if(le(Et)){if(!Fe)return;Et=new d,ut.set(Ce,Et)}return Et}function O(E,Ce,Fe){var ut=R(E,Ce,Fe);if(ut)return!0;var Et=Ht(Ce);return ue(Et)?!1:O(E,Et,Fe)}function R(E,Ce,Fe){var ut=M(Ce,Fe,!1);return le(ut)?!1:Rt(ut.has(E))}function G(E,Ce,Fe){var ut=R(E,Ce,Fe);if(ut)return ee(E,Ce,Fe);var Et=Ht(Ce);if(!ue(Et))return G(E,Et,Fe)}function ee(E,Ce,Fe){var ut=M(Ce,Fe,!1);if(!le(ut))return ut.get(E)}function re(E,Ce,Fe,ut){var Et=M(Fe,ut,!0);Et.set(E,Ce)}function X(E,Ce){var Fe=K(E,Ce),ut=Ht(E);if(ut===null)return Fe;var Et=X(ut,Ce);if(Et.length<=0)return Fe;if(Fe.length<=0)return Et;for(var Jt=new p,At=[],Nt=0,Ot=Fe;Nt<Ot.length;Nt++){var Wt=Ot[Nt],$t=Jt.has(Wt);$t||(Jt.add(Wt),At.push(Wt))}for(var Pn=0,Yn=Et;Pn<Yn.length;Pn++){var Wt=Yn[Pn],$t=Jt.has(Wt);$t||(Jt.add(Wt),At.push(Wt))}return At}function K(E,Ce){var Fe=[],ut=M(E,Ce,!1);if(le(ut))return Fe;for(var Et=ut.keys(),Jt=xt(Et),At=0;;){var Nt=ht(Jt);if(!Nt)return Fe.length=At,Fe;var Ot=Ct(Nt);try{Fe[At]=Ot}catch(Wt){try{Gt(Jt)}finally{throw Wt}}At++}}function ae(E){if(E===null)return 1;switch(typeof E){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return E===null?1:6;default:return 6}}function le(E){return E===void 0}function ue(E){return E===null}function ge(E){return typeof E=="symbol"}function be(E){return typeof E=="object"?E!==null:typeof E=="function"}function ze(E,Ce){switch(ae(E)){case 0:return E;case 1:return E;case 2:return E;case 3:return E;case 4:return E;case 5:return E}var Fe=Ce===3?"string":Ce===5?"number":"default",ut=kt(E,a);if(ut!==void 0){var Et=ut.call(E,Fe);if(be(Et))throw new TypeError;return Et}return Lt(E,Fe==="default"?"number":Fe)}function Lt(E,Ce){if(Ce==="string"){var Fe=E.toString;if(et(Fe)){var ut=Fe.call(E);if(!be(ut))return ut}var Et=E.valueOf;if(et(Et)){var ut=Et.call(E);if(!be(ut))return ut}}else{var Et=E.valueOf;if(et(Et)){var ut=Et.call(E);if(!be(ut))return ut}var Jt=E.toString;if(et(Jt)){var ut=Jt.call(E);if(!be(ut))return ut}}throw new TypeError}function Rt(E){return!!E}function qt(E){return""+E}function Me(E){var Ce=ze(E,3);return ge(Ce)?Ce:qt(Ce)}function Qe(E){return Array.isArray?Array.isArray(E):E instanceof Object?E instanceof Array:Object.prototype.toString.call(E)==="[object Array]"}function et(E){return typeof E=="function"}function ve(E){return typeof E=="function"}function ft(E){switch(ae(E)){case 3:return!0;case 4:return!0;default:return!1}}function kt(E,Ce){var Fe=E[Ce];if(Fe!=null){if(!et(Fe))throw new TypeError;return Fe}}function xt(E){var Ce=kt(E,i);if(!et(Ce))throw new TypeError;var Fe=Ce.call(E);if(!be(Fe))throw new TypeError;return Fe}function Ct(E){return E.value}function ht(E){var Ce=E.next();return Ce.done?!1:Ce}function Gt(E){var Ce=E.return;Ce&&Ce.call(E)}function Ht(E){var Ce=Object.getPrototypeOf(E);if(typeof E!="function"||E===c||Ce!==c)return Ce;var Fe=E.prototype,ut=Fe&&Object.getPrototypeOf(Fe);if(ut==null||ut===Object.prototype)return Ce;var Et=ut.constructor;return typeof Et!="function"||Et===E?Ce:Et}function yn(){var E={},Ce=[],Fe=function(){function At(Nt,Ot,Wt){this._index=0,this._keys=Nt,this._values=Ot,this._selector=Wt}return At.prototype["@@iterator"]=function(){return this},At.prototype[i]=function(){return this},At.prototype.next=function(){var Nt=this._index;if(Nt>=0&&Nt<this._keys.length){var Ot=this._selector(this._keys[Nt],this._values[Nt]);return Nt+1>=this._keys.length?(this._index=-1,this._keys=Ce,this._values=Ce):this._index++,{value:Ot,done:!1}}return{value:void 0,done:!0}},At.prototype.throw=function(Nt){throw this._index>=0&&(this._index=-1,this._keys=Ce,this._values=Ce),Nt},At.prototype.return=function(Nt){return this._index>=0&&(this._index=-1,this._keys=Ce,this._values=Ce),{value:Nt,done:!0}},At}();return function(){function At(){this._keys=[],this._values=[],this._cacheKey=E,this._cacheIndex=-2}return Object.defineProperty(At.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),At.prototype.has=function(Nt){return this._find(Nt,!1)>=0},At.prototype.get=function(Nt){var Ot=this._find(Nt,!1);return Ot>=0?this._values[Ot]:void 0},At.prototype.set=function(Nt,Ot){var Wt=this._find(Nt,!0);return this._values[Wt]=Ot,this},At.prototype.delete=function(Nt){var Ot=this._find(Nt,!1);if(Ot>=0){for(var Wt=this._keys.length,$t=Ot+1;$t<Wt;$t++)this._keys[$t-1]=this._keys[$t],this._values[$t-1]=this._values[$t];return this._keys.length--,this._values.length--,Nt===this._cacheKey&&(this._cacheKey=E,this._cacheIndex=-2),!0}return!1},At.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=E,this._cacheIndex=-2},At.prototype.keys=function(){return new Fe(this._keys,this._values,ut)},At.prototype.values=function(){return new Fe(this._keys,this._values,Et)},At.prototype.entries=function(){return new Fe(this._keys,this._values,Jt)},At.prototype["@@iterator"]=function(){return this.entries()},At.prototype[i]=function(){return this.entries()},At.prototype._find=function(Nt,Ot){return this._cacheKey!==Nt&&(this._cacheIndex=this._keys.indexOf(this._cacheKey=Nt)),this._cacheIndex<0&&Ot&&(this._cacheIndex=this._keys.length,this._keys.push(Nt),this._values.push(void 0)),this._cacheIndex},At}();function ut(At,Nt){return At}function Et(At,Nt){return Nt}function Jt(At,Nt){return[At,Nt]}}function or(){return function(){function E(){this._map=new d}return Object.defineProperty(E.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),E.prototype.has=function(Ce){return this._map.has(Ce)},E.prototype.add=function(Ce){return this._map.set(Ce,Ce),this},E.prototype.delete=function(Ce){return this._map.delete(Ce)},E.prototype.clear=function(){this._map.clear()},E.prototype.keys=function(){return this._map.keys()},E.prototype.values=function(){return this._map.values()},E.prototype.entries=function(){return this._map.entries()},E.prototype["@@iterator"]=function(){return this.keys()},E.prototype[i]=function(){return this.keys()},E}()}function Qn(){var E=16,Ce=u.create(),Fe=ut();return function(){function Ot(){this._key=ut()}return Ot.prototype.has=function(Wt){var $t=Et(Wt,!1);return $t!==void 0?u.has($t,this._key):!1},Ot.prototype.get=function(Wt){var $t=Et(Wt,!1);return $t!==void 0?u.get($t,this._key):void 0},Ot.prototype.set=function(Wt,$t){var Pn=Et(Wt,!0);return Pn[this._key]=$t,this},Ot.prototype.delete=function(Wt){var $t=Et(Wt,!1);return $t!==void 0?delete $t[this._key]:!1},Ot.prototype.clear=function(){this._key=ut()},Ot}();function ut(){var Ot;do Ot="@@WeakMap@@"+Nt();while(u.has(Ce,Ot));return Ce[Ot]=!0,Ot}function Et(Ot,Wt){if(!n.call(Ot,Fe)){if(!Wt)return;Object.defineProperty(Ot,Fe,{value:u.create()})}return Ot[Fe]}function Jt(Ot,Wt){for(var $t=0;$t<Wt;++$t)Ot[$t]=Math.random()*255|0;return Ot}function At(Ot){return typeof Uint8Array=="function"?typeof crypto!="undefined"?crypto.getRandomValues(new Uint8Array(Ot)):typeof msCrypto!="undefined"?msCrypto.getRandomValues(new Uint8Array(Ot)):Jt(new Uint8Array(Ot),Ot):Jt(new Array(Ot),Ot)}function Nt(){var Ot=At(E);Ot[6]=Ot[6]&79|64,Ot[8]=Ot[8]&191|128;for(var Wt="",$t=0;$t<E;++$t){var Pn=Ot[$t];($t===4||$t===6||$t===8)&&(Wt+="-"),Pn<16&&(Wt+="0"),Wt+=Pn.toString(16).toLowerCase()}return Wt}}function mr(E){return E.__=void 0,delete E.__,E}})})(jA||(jA={}));var _s="named",$9="name",BE="unmanaged",V9="optional",ay="inject",cm="multi_inject",j9="inversify:tagged",G9="inversify:tagged_props",tk="inversify:paramtypes",Yie="design:paramtypes",Ah="post_construct";function Xie(){return[ay,cm,$9,BE,_s,V9]}var GA=Xie(),Fa={Request:"Request",Singleton:"Singleton",Transient:"Transient"},Na={ConstantValue:"ConstantValue",Constructor:"Constructor",DynamicValue:"DynamicValue",Factory:"Factory",Function:"Function",Instance:"Instance",Invalid:"Invalid",Provider:"Provider"},tl={ClassProperty:"ClassProperty",ConstructorArgument:"ConstructorArgument",Variable:"Variable"},Zie=0;function Vm(){return Zie++}var qie=function(){function e(t,n){this.id=Vm(),this.activated=!1,this.serviceIdentifier=t,this.scope=n,this.type=Na.Invalid,this.constraint=function(r){return!0},this.implementationType=null,this.cache=null,this.factory=null,this.provider=null,this.onActivation=null,this.dynamicValue=null}return e.prototype.clone=function(){var t=new e(this.serviceIdentifier,this.scope);return t.activated=t.scope===Fa.Singleton?this.activated:!1,t.implementationType=this.implementationType,t.dynamicValue=this.dynamicValue,t.scope=this.scope,t.type=this.type,t.factory=this.factory,t.provider=this.provider,t.constraint=this.constraint,t.onActivation=this.onActivation,t.cache=this.cache,t},e}(),Kie="Cannot apply @injectable decorator multiple times.",Qie="Metadata key was used more than once in a parameter:",Lp="NULL argument",HA="Key Not Found",Jie="Ambiguous match found for serviceIdentifier:",eoe="Could not unbind serviceIdentifier:",toe="No matching bindings found for serviceIdentifier:",noe="Missing required @injectable annotation in:",roe="Missing required @inject or @multiInject annotation in:",aoe=function(e){return"@inject called with undefined this could mean that the class "+e+" has a circular dependency problem. You can use a LazyServiceIdentifer to  overcome this limitation."},ioe="Circular dependency found:",ooe="Invalid binding type:",soe="No snapshot available to restore.",loe="Invalid return type in middleware. Middleware must return!",uoe="Value provided to function binding must be a function!",coe="The toSelf function can only be applied when a constructor is used as service identifier",foe="The @inject @multiInject @tagged and @named decorators must be applied to the parameters of a class constructor or a class property.",doe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return"The number of constructor arguments in the derived class "+(e[0]+" must be >= than the number of constructor arguments of its base class.")},poe="Invalid Container constructor argument. Container options must be an object.",hoe="Invalid Container option. Default scope must be a string ('singleton' or 'transient').",moe="Invalid Container option. Auto bind injectable must be a boolean",goe="Invalid Container option. Skip base check must be a boolean",voe="Cannot apply @postConstruct decorator multiple times in the same class",boe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return"@postConstruct error in class "+e[0]+": "+e[1]},yoe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return"It looks like there is a circular dependency "+("in one of the '"+e[0]+"' bindings. Please investigate bindings with")+("service identifier '"+e[1]+"'.")},xoe="Maximum call stack size exceeded",_oe=function(){function e(){}return e.prototype.getConstructorMetadata=function(t){var n=Reflect.getMetadata(tk,t),r=Reflect.getMetadata(j9,t);return{compilerGeneratedMetadata:n,userGeneratedMetadata:r||{}}},e.prototype.getPropertiesMetadata=function(t){var n=Reflect.getMetadata(G9,t)||[];return n},e}(),qg={MultipleBindingsAvailable:2,NoBindingsAvailable:0,OnlyOneBindingAvailable:1};function H9(e){return e instanceof RangeError||e.message===xoe}function fm(e){if(typeof e=="function"){var t=e;return t.name}else{if(typeof e=="symbol")return e.toString();var t=e;return t}}function WA(e,t,n){var r="",a=n(e,t);return a.length!==0&&(r=`
Registered bindings:`,a.forEach(function(i){var o="Object";i.implementationType!==null&&(o=iy(i.implementationType)),r=r+`
 `+o,i.constraint.metaData&&(r=r+" - "+i.constraint.metaData)})),r}function W9(e,t){return e.parentRequest===null?!1:e.parentRequest.serviceIdentifier===t?!0:W9(e.parentRequest,t)}function woe(e){function t(r,a){a===void 0&&(a=[]);var i=fm(r.serviceIdentifier);return a.push(i),r.parentRequest!==null?t(r.parentRequest,a):a}var n=t(e);return n.reverse().join(" --> ")}function Y9(e){e.childRequests.forEach(function(t){if(W9(t,t.serviceIdentifier)){var n=woe(t);throw new Error(ioe+" "+n)}else Y9(t)})}function koe(e,t){if(t.isTagged()||t.isNamed()){var n="",r=t.getNamedTag(),a=t.getCustomTags();return r!==null&&(n+=r.toString()+`
`),a!==null&&a.forEach(function(i){n+=i.toString()+`
`})," "+e+`
 `+e+" - "+n}else return" "+e}function iy(e){if(e.name)return e.name;var t=e.toString(),n=t.match(/^function\s*([^\s(]+)/);return n?n[1]:"Anonymous function: "+t}var X9=function(){function e(t){this.id=Vm(),this.container=t}return e.prototype.addPlan=function(t){this.plan=t},e.prototype.setCurrentRequest=function(t){this.currentRequest=t},e}(),mu=function(){function e(t,n){this.key=t,this.value=n}return e.prototype.toString=function(){return this.key===_s?"named: "+this.value.toString()+" ":"tagged: { key:"+this.key.toString()+", value: "+this.value+" }"},e}(),Eoe=function(){function e(t,n){this.parentContext=t,this.rootRequest=n}return e}();function Soe(e,t,n,r){var a=j9;Z9(a,e,t,r,n)}function Coe(e,t,n){var r=G9;Z9(r,e.constructor,t,n)}function Z9(e,t,n,r,a){var i={},o=typeof a=="number",s=a!==void 0&&o?a.toString():n;if(o&&n!==void 0)throw new Error(foe);Reflect.hasOwnMetadata(e,t)&&(i=Reflect.getMetadata(e,t));var l=i[s];if(!Array.isArray(l))l=[];else for(var u=0,c=l;u<c.length;u++){var f=c[u];if(f.key===r.key)throw new Error(Qie+" "+f.key.toString())}l.push(r),i[s]=l,Reflect.defineMetadata(e,i,t)}function YA(e,t){Reflect.decorate(e,t)}function Toe(e,t){return function(n,r){t(n,r,e)}}function Aoe(e,t,n){typeof n=="number"?YA([Toe(n,e)],t):typeof n=="string"?Reflect.decorate([e],t,n):YA([e],t)}var Ooe=function(){function e(t){this._cb=t}return e.prototype.unwrap=function(){return this._cb()},e}();function dn(e){return function(t,n,r){if(e===void 0)throw new Error(aoe(t.name));var a=new mu(ay,e);typeof r=="number"?Soe(t,n,r,a):Coe(t,n,a)}}var Moe=function(){function e(t){this.str=t}return e.prototype.startsWith=function(t){return this.str.indexOf(t)===0},e.prototype.endsWith=function(t){var n="",r=t.split("").reverse().join("");return n=this.str.split("").reverse().join(""),this.startsWith.call({str:n},r)},e.prototype.contains=function(t){return this.str.indexOf(t)!==-1},e.prototype.equals=function(t){return this.str===t},e.prototype.value=function(){return this.str},e}(),oy=function(){function e(t,n,r,a){this.id=Vm(),this.type=t,this.serviceIdentifier=r,this.name=new Moe(n||""),this.metadata=new Array;var i=null;typeof a=="string"?i=new mu(_s,a):a instanceof mu&&(i=a),i!==null&&this.metadata.push(i)}return e.prototype.hasTag=function(t){for(var n=0,r=this.metadata;n<r.length;n++){var a=r[n];if(a.key===t)return!0}return!1},e.prototype.isArray=function(){return this.hasTag(cm)},e.prototype.matchesArray=function(t){return this.matchesTag(cm)(t)},e.prototype.isNamed=function(){return this.hasTag(_s)},e.prototype.isTagged=function(){return this.metadata.some(function(t){return GA.every(function(n){return t.key!==n})})},e.prototype.isOptional=function(){return this.matchesTag(V9)(!0)},e.prototype.getNamedTag=function(){return this.isNamed()?this.metadata.filter(function(t){return t.key===_s})[0]:null},e.prototype.getCustomTags=function(){return this.isTagged()?this.metadata.filter(function(t){return GA.every(function(n){return t.key!==n})}):null},e.prototype.matchesNamedTag=function(t){return this.matchesTag(_s)(t)},e.prototype.matchesTag=function(t){var n=this;return function(r){for(var a=0,i=n.metadata;a<i.length;a++){var o=i[a];if(o.key===t&&o.value===r)return!0}return!1}},e}(),Wv=globalThis&&globalThis.__spreadArray||function(e,t){for(var n=0,r=t.length,a=e.length;n<r;n++,a++)e[a]=t[n];return e};function Roe(e,t){var n=iy(t),r=q9(e,n,t,!1);return r}function q9(e,t,n,r){var a=e.getConstructorMetadata(n),i=a.compilerGeneratedMetadata;if(i===void 0){var o=noe+" "+t+".";throw new Error(o)}var s=a.userGeneratedMetadata,l=Object.keys(s),u=n.length===0&&l.length>0,c=l.length>n.length,f=u||c?l.length:n.length,d=Ioe(r,t,i,s,f),p=K9(e,n),h=Wv(Wv([],d),p);return h}function Poe(e,t,n,r,a){var i=a[e.toString()]||[],o=J9(i),s=o.unmanaged!==!0,l=r[e],u=o.inject||o.multiInject;if(l=u||l,l instanceof Ooe&&(l=l.unwrap()),s){var c=l===Object,f=l===Function,d=l===void 0,p=c||f||d;if(!t&&p){var h=roe+" argument "+e+" in class "+n+".";throw new Error(h)}var g=new oy(tl.ConstructorArgument,o.targetName,l);return g.metadata=i,g}return null}function Ioe(e,t,n,r,a){for(var i=[],o=0;o<a;o++){var s=o,l=Poe(s,e,t,n,r);l!==null&&i.push(l)}return i}function K9(e,t){for(var n=e.getPropertiesMetadata(t),r=[],a=Object.keys(n),i=0,o=a;i<o.length;i++){var s=o[i],l=n[s],u=J9(n[s]),c=u.targetName||s,f=u.inject||u.multiInject,d=new oy(tl.ClassProperty,c,f);d.metadata=l,r.push(d)}var p=Object.getPrototypeOf(t.prototype).constructor;if(p!==Object){var h=K9(e,p);r=Wv(Wv([],r),h)}return r}function Q9(e,t){var n=Object.getPrototypeOf(t.prototype).constructor;if(n!==Object){var r=iy(n),a=q9(e,r,n,!0),i=a.map(function(l){return l.metadata.filter(function(u){return u.key===BE})}),o=[].concat.apply([],i).length,s=a.length-o;return s>0?s:Q9(e,n)}else return 0}function J9(e){var t={};return e.forEach(function(n){t[n.key.toString()]=n.value}),{inject:t[ay],multiInject:t[cm],targetName:t[$9],unmanaged:t[BE]}}var zE=function(){function e(t,n,r,a,i){this.id=Vm(),this.serviceIdentifier=t,this.parentContext=n,this.parentRequest=r,this.target=i,this.childRequests=[],this.bindings=Array.isArray(a)?a:[a],this.requestScope=r===null?new Map:null}return e.prototype.addChildRequest=function(t,n,r){var a=new e(t,this.parentContext,this,n,r);return this.childRequests.push(a),a},e}();function nk(e){return e._bindingDictionary}function Loe(e,t,n,r,a,i){var o=e?cm:ay,s=new mu(o,n),l=new oy(t,r,n,s);if(a!==void 0){var u=new mu(a,i);l.metadata.push(u)}return l}function XA(e,t,n,r,a){var i=dm(n.container,a.serviceIdentifier),o=[];return i.length===qg.NoBindingsAvailable&&n.container.options.autoBindInjectable&&typeof a.serviceIdentifier=="function"&&e.getConstructorMetadata(a.serviceIdentifier).compilerGeneratedMetadata&&(n.container.bind(a.serviceIdentifier).toSelf(),i=dm(n.container,a.serviceIdentifier)),t?o=i:o=i.filter(function(s){var l=new zE(s.serviceIdentifier,n,r,s,a);return s.constraint(l)}),Noe(a.serviceIdentifier,o,a,n.container),o}function Noe(e,t,n,r){switch(t.length){case qg.NoBindingsAvailable:if(n.isOptional())return t;var a=fm(e),i=toe;throw i+=koe(a,n),i+=WA(r,a,dm),new Error(i);case qg.OnlyOneBindingAvailable:if(!n.isArray())return t;case qg.MultipleBindingsAvailable:default:if(n.isArray())return t;var a=fm(e),i=Jie+" "+a;throw i+=WA(r,a,dm),new Error(i)}}function eF(e,t,n,r,a,i){var o,s;if(a===null){o=XA(e,t,r,null,i),s=new zE(n,r,null,o,i);var l=new Eoe(r,s);r.addPlan(l)}else o=XA(e,t,r,a,i),s=a.addChildRequest(i.serviceIdentifier,o,i);o.forEach(function(u){var c=null;if(i.isArray())c=s.addChildRequest(u.serviceIdentifier,u,i);else{if(u.cache)return;c=s}if(u.type===Na.Instance&&u.implementationType!==null){var f=Roe(e,u.implementationType);if(!r.container.options.skipBaseClassChecks){var d=Q9(e,u.implementationType);if(f.length<d){var p=doe(iy(u.implementationType));throw new Error(p)}}f.forEach(function(h){eF(e,!1,h.serviceIdentifier,r,c,h)})}})}function dm(e,t){var n=[],r=nk(e);return r.hasKey(t)?n=r.get(t):e.parent!==null&&(n=dm(e.parent,t)),n}function Foe(e,t,n,r,a,i,o,s){s===void 0&&(s=!1);var l=new X9(t),u=Loe(n,r,a,"",i,o);try{return eF(e,s,a,l,null,u),l}catch(c){throw H9(c)&&l.plan&&Y9(l.plan.rootRequest),c}}function Doe(e,t,n,r){var a=new oy(tl.Variable,"",t,new mu(n,r)),i=new X9(e),o=new zE(t,i,null,[],a);return o}var Boe=globalThis&&globalThis.__spreadArray||function(e,t){for(var n=0,r=t.length,a=e.length;n<r;n++,a++)e[a]=t[n];return e};function zoe(e,t,n){var r=t.filter(function(i){return i.target!==null&&i.target.type===tl.ClassProperty}),a=r.map(n);return r.forEach(function(i,o){var s="";s=i.target.name.value();var l=a[o];e[s]=l}),e}function Uoe(e,t){return new(e.bind.apply(e,Boe([void 0],t)))}function $oe(e,t){if(Reflect.hasMetadata(Ah,e)){var n=Reflect.getMetadata(Ah,e);try{t[n.value]()}catch(r){throw new Error(boe(e.name,r.message))}}}function Voe(e,t,n){var r=null;if(t.length>0){var a=t.filter(function(o){return o.target!==null&&o.target.type===tl.ConstructorArgument}),i=a.map(n);r=Uoe(e,i),r=zoe(r,t,n)}else r=new e;return $oe(e,r),r}var B1=function(e,t,n){try{return n()}catch(r){throw H9(r)?new Error(yoe(e,t.toString())):r}},rk=function(e){return function(t){t.parentContext.setCurrentRequest(t);var n=t.bindings,r=t.childRequests,a=t.target&&t.target.isArray(),i=!t.parentRequest||!t.parentRequest.target||!t.target||!t.parentRequest.target.matchesArray(t.target.serviceIdentifier);if(a&&i)return r.map(function(f){var d=rk(e);return d(f)});var o=null;if(t.target.isOptional()&&n.length===0)return;var s=n[0],l=s.scope===Fa.Singleton,u=s.scope===Fa.Request;if(l&&s.activated)return s.cache;if(u&&e!==null&&e.has(s.id))return e.get(s.id);if(s.type===Na.ConstantValue)o=s.cache,s.activated=!0;else if(s.type===Na.Function)o=s.cache,s.activated=!0;else if(s.type===Na.Constructor)o=s.implementationType;else if(s.type===Na.DynamicValue&&s.dynamicValue!==null)o=B1("toDynamicValue",s.serviceIdentifier,function(){return s.dynamicValue(t.parentContext)});else if(s.type===Na.Factory&&s.factory!==null)o=B1("toFactory",s.serviceIdentifier,function(){return s.factory(t.parentContext)});else if(s.type===Na.Provider&&s.provider!==null)o=B1("toProvider",s.serviceIdentifier,function(){return s.provider(t.parentContext)});else if(s.type===Na.Instance&&s.implementationType!==null)o=Voe(s.implementationType,r,rk(e));else{var c=fm(t.serviceIdentifier);throw new Error(ooe+" "+c)}return typeof s.onActivation=="function"&&(o=s.onActivation(t.parentContext,o)),l&&(s.cache=o,s.activated=!0),u&&e!==null&&!e.has(s.id)&&e.set(s.id,o),o}};function joe(e){var t=rk(e.plan.rootRequest.requestScope);return t(e.plan.rootRequest)}var Hs=function(e,t){var n=e.parentRequest;return n!==null?t(n)?!0:Hs(n,t):!1},uh=function(e){return function(t){var n=function(r){return r!==null&&r.target!==null&&r.target.matchesTag(e)(t)};return n.metaData=new mu(e,t),n}},ag=uh(_s),z1=function(e){return function(t){var n=null;if(t!==null)if(n=t.bindings[0],typeof e=="string"){var r=n.serviceIdentifier;return r===e}else{var a=t.bindings[0].implementationType;return e===a}return!1}},UE=function(){function e(t){this._binding=t}return e.prototype.when=function(t){return this._binding.constraint=t,new Pa(this._binding)},e.prototype.whenTargetNamed=function(t){return this._binding.constraint=ag(t),new Pa(this._binding)},e.prototype.whenTargetIsDefault=function(){return this._binding.constraint=function(t){var n=t.target!==null&&!t.target.isNamed()&&!t.target.isTagged();return n},new Pa(this._binding)},e.prototype.whenTargetTagged=function(t,n){return this._binding.constraint=uh(t)(n),new Pa(this._binding)},e.prototype.whenInjectedInto=function(t){return this._binding.constraint=function(n){return z1(t)(n.parentRequest)},new Pa(this._binding)},e.prototype.whenParentNamed=function(t){return this._binding.constraint=function(n){return ag(t)(n.parentRequest)},new Pa(this._binding)},e.prototype.whenParentTagged=function(t,n){return this._binding.constraint=function(r){return uh(t)(n)(r.parentRequest)},new Pa(this._binding)},e.prototype.whenAnyAncestorIs=function(t){return this._binding.constraint=function(n){return Hs(n,z1(t))},new Pa(this._binding)},e.prototype.whenNoAncestorIs=function(t){return this._binding.constraint=function(n){return!Hs(n,z1(t))},new Pa(this._binding)},e.prototype.whenAnyAncestorNamed=function(t){return this._binding.constraint=function(n){return Hs(n,ag(t))},new Pa(this._binding)},e.prototype.whenNoAncestorNamed=function(t){return this._binding.constraint=function(n){return!Hs(n,ag(t))},new Pa(this._binding)},e.prototype.whenAnyAncestorTagged=function(t,n){return this._binding.constraint=function(r){return Hs(r,uh(t)(n))},new Pa(this._binding)},e.prototype.whenNoAncestorTagged=function(t,n){return this._binding.constraint=function(r){return!Hs(r,uh(t)(n))},new Pa(this._binding)},e.prototype.whenAnyAncestorMatches=function(t){return this._binding.constraint=function(n){return Hs(n,t)},new Pa(this._binding)},e.prototype.whenNoAncestorMatches=function(t){return this._binding.constraint=function(n){return!Hs(n,t)},new Pa(this._binding)},e}(),Pa=function(){function e(t){this._binding=t}return e.prototype.onActivation=function(t){return this._binding.onActivation=t,new UE(this._binding)},e}(),Gl=function(){function e(t){this._binding=t,this._bindingWhenSyntax=new UE(this._binding),this._bindingOnSyntax=new Pa(this._binding)}return e.prototype.when=function(t){return this._bindingWhenSyntax.when(t)},e.prototype.whenTargetNamed=function(t){return this._bindingWhenSyntax.whenTargetNamed(t)},e.prototype.whenTargetIsDefault=function(){return this._bindingWhenSyntax.whenTargetIsDefault()},e.prototype.whenTargetTagged=function(t,n){return this._bindingWhenSyntax.whenTargetTagged(t,n)},e.prototype.whenInjectedInto=function(t){return this._bindingWhenSyntax.whenInjectedInto(t)},e.prototype.whenParentNamed=function(t){return this._bindingWhenSyntax.whenParentNamed(t)},e.prototype.whenParentTagged=function(t,n){return this._bindingWhenSyntax.whenParentTagged(t,n)},e.prototype.whenAnyAncestorIs=function(t){return this._bindingWhenSyntax.whenAnyAncestorIs(t)},e.prototype.whenNoAncestorIs=function(t){return this._bindingWhenSyntax.whenNoAncestorIs(t)},e.prototype.whenAnyAncestorNamed=function(t){return this._bindingWhenSyntax.whenAnyAncestorNamed(t)},e.prototype.whenAnyAncestorTagged=function(t,n){return this._bindingWhenSyntax.whenAnyAncestorTagged(t,n)},e.prototype.whenNoAncestorNamed=function(t){return this._bindingWhenSyntax.whenNoAncestorNamed(t)},e.prototype.whenNoAncestorTagged=function(t,n){return this._bindingWhenSyntax.whenNoAncestorTagged(t,n)},e.prototype.whenAnyAncestorMatches=function(t){return this._bindingWhenSyntax.whenAnyAncestorMatches(t)},e.prototype.whenNoAncestorMatches=function(t){return this._bindingWhenSyntax.whenNoAncestorMatches(t)},e.prototype.onActivation=function(t){return this._bindingOnSyntax.onActivation(t)},e}(),Goe=function(){function e(t){this._binding=t}return e.prototype.inRequestScope=function(){return this._binding.scope=Fa.Request,new Gl(this._binding)},e.prototype.inSingletonScope=function(){return this._binding.scope=Fa.Singleton,new Gl(this._binding)},e.prototype.inTransientScope=function(){return this._binding.scope=Fa.Transient,new Gl(this._binding)},e}(),ZA=function(){function e(t){this._binding=t,this._bindingWhenSyntax=new UE(this._binding),this._bindingOnSyntax=new Pa(this._binding),this._bindingInSyntax=new Goe(t)}return e.prototype.inRequestScope=function(){return this._bindingInSyntax.inRequestScope()},e.prototype.inSingletonScope=function(){return this._bindingInSyntax.inSingletonScope()},e.prototype.inTransientScope=function(){return this._bindingInSyntax.inTransientScope()},e.prototype.when=function(t){return this._bindingWhenSyntax.when(t)},e.prototype.whenTargetNamed=function(t){return this._bindingWhenSyntax.whenTargetNamed(t)},e.prototype.whenTargetIsDefault=function(){return this._bindingWhenSyntax.whenTargetIsDefault()},e.prototype.whenTargetTagged=function(t,n){return this._bindingWhenSyntax.whenTargetTagged(t,n)},e.prototype.whenInjectedInto=function(t){return this._bindingWhenSyntax.whenInjectedInto(t)},e.prototype.whenParentNamed=function(t){return this._bindingWhenSyntax.whenParentNamed(t)},e.prototype.whenParentTagged=function(t,n){return this._bindingWhenSyntax.whenParentTagged(t,n)},e.prototype.whenAnyAncestorIs=function(t){return this._bindingWhenSyntax.whenAnyAncestorIs(t)},e.prototype.whenNoAncestorIs=function(t){return this._bindingWhenSyntax.whenNoAncestorIs(t)},e.prototype.whenAnyAncestorNamed=function(t){return this._bindingWhenSyntax.whenAnyAncestorNamed(t)},e.prototype.whenAnyAncestorTagged=function(t,n){return this._bindingWhenSyntax.whenAnyAncestorTagged(t,n)},e.prototype.whenNoAncestorNamed=function(t){return this._bindingWhenSyntax.whenNoAncestorNamed(t)},e.prototype.whenNoAncestorTagged=function(t,n){return this._bindingWhenSyntax.whenNoAncestorTagged(t,n)},e.prototype.whenAnyAncestorMatches=function(t){return this._bindingWhenSyntax.whenAnyAncestorMatches(t)},e.prototype.whenNoAncestorMatches=function(t){return this._bindingWhenSyntax.whenNoAncestorMatches(t)},e.prototype.onActivation=function(t){return this._bindingOnSyntax.onActivation(t)},e}(),Hoe=function(){function e(t){this._binding=t}return e.prototype.to=function(t){return this._binding.type=Na.Instance,this._binding.implementationType=t,new ZA(this._binding)},e.prototype.toSelf=function(){if(typeof this._binding.serviceIdentifier!="function")throw new Error(""+coe);var t=this._binding.serviceIdentifier;return this.to(t)},e.prototype.toConstantValue=function(t){return this._binding.type=Na.ConstantValue,this._binding.cache=t,this._binding.dynamicValue=null,this._binding.implementationType=null,this._binding.scope=Fa.Singleton,new Gl(this._binding)},e.prototype.toDynamicValue=function(t){return this._binding.type=Na.DynamicValue,this._binding.cache=null,this._binding.dynamicValue=t,this._binding.implementationType=null,new ZA(this._binding)},e.prototype.toConstructor=function(t){return this._binding.type=Na.Constructor,this._binding.implementationType=t,this._binding.scope=Fa.Singleton,new Gl(this._binding)},e.prototype.toFactory=function(t){return this._binding.type=Na.Factory,this._binding.factory=t,this._binding.scope=Fa.Singleton,new Gl(this._binding)},e.prototype.toFunction=function(t){if(typeof t!="function")throw new Error(uoe);var n=this.toConstantValue(t);return this._binding.type=Na.Function,this._binding.scope=Fa.Singleton,n},e.prototype.toAutoFactory=function(t){return this._binding.type=Na.Factory,this._binding.factory=function(n){var r=function(){return n.container.get(t)};return r},this._binding.scope=Fa.Singleton,new Gl(this._binding)},e.prototype.toProvider=function(t){return this._binding.type=Na.Provider,this._binding.provider=t,this._binding.scope=Fa.Singleton,new Gl(this._binding)},e.prototype.toService=function(t){this.toDynamicValue(function(n){return n.container.get(t)})},e}(),Woe=function(){function e(){}return e.of=function(t,n){var r=new e;return r.bindings=t,r.middleware=n,r},e}(),qA=function(){function e(){this._map=new Map}return e.prototype.getMap=function(){return this._map},e.prototype.add=function(t,n){if(t==null)throw new Error(Lp);if(n==null)throw new Error(Lp);var r=this._map.get(t);r!==void 0?(r.push(n),this._map.set(t,r)):this._map.set(t,[n])},e.prototype.get=function(t){if(t==null)throw new Error(Lp);var n=this._map.get(t);if(n!==void 0)return n;throw new Error(HA)},e.prototype.remove=function(t){if(t==null)throw new Error(Lp);if(!this._map.delete(t))throw new Error(HA)},e.prototype.removeByCondition=function(t){var n=this;this._map.forEach(function(r,a){var i=r.filter(function(o){return!t(o)});i.length>0?n._map.set(a,i):n._map.delete(a)})},e.prototype.hasKey=function(t){if(t==null)throw new Error(Lp);return this._map.has(t)},e.prototype.clone=function(){var t=new e;return this._map.forEach(function(n,r){n.forEach(function(a){return t.add(r,a.clone())})}),t},e.prototype.traverse=function(t){this._map.forEach(function(n,r){t(r,n)})},e}(),Yoe=globalThis&&globalThis.__awaiter||function(e,t,n,r){function a(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function s(c){try{u(r.next(c))}catch(f){o(f)}}function l(c){try{u(r.throw(c))}catch(f){o(f)}}function u(c){c.done?i(c.value):a(c.value).then(s,l)}u((r=r.apply(e,t||[])).next())})},Xoe=globalThis&&globalThis.__generator||function(e,t){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,a,i,o;return o={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function s(u){return function(c){return l([u,c])}}function l(u){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,a&&(i=u[0]&2?a.return:u[0]?a.throw||((i=a.return)&&i.call(a),0):a.next)&&!(i=i.call(a,u[1])).done)return i;switch(a=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return n.label++,{value:u[1],done:!1};case 5:n.label++,a=u[1],u=[0];continue;case 7:u=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){n=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){n.label=u[1];break}if(u[0]===6&&n.label<i[1]){n.label=i[1],i=u;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(u);break}i[2]&&n.ops.pop(),n.trys.pop();continue}u=t.call(e,n)}catch(c){u=[6,c],a=0}finally{r=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},Zoe=globalThis&&globalThis.__spreadArray||function(e,t){for(var n=0,r=t.length,a=e.length;n<r;n++,a++)e[a]=t[n];return e},$E=function(){function e(t){this._appliedMiddleware=[];var n=t||{};if(typeof n!="object")throw new Error(""+poe);if(n.defaultScope===void 0)n.defaultScope=Fa.Transient;else if(n.defaultScope!==Fa.Singleton&&n.defaultScope!==Fa.Transient&&n.defaultScope!==Fa.Request)throw new Error(""+hoe);if(n.autoBindInjectable===void 0)n.autoBindInjectable=!1;else if(typeof n.autoBindInjectable!="boolean")throw new Error(""+moe);if(n.skipBaseClassChecks===void 0)n.skipBaseClassChecks=!1;else if(typeof n.skipBaseClassChecks!="boolean")throw new Error(""+goe);this.options={autoBindInjectable:n.autoBindInjectable,defaultScope:n.defaultScope,skipBaseClassChecks:n.skipBaseClassChecks},this.id=Vm(),this._bindingDictionary=new qA,this._snapshots=[],this._middleware=null,this.parent=null,this._metadataReader=new _oe}return e.merge=function(t,n){for(var r=[],a=2;a<arguments.length;a++)r[a-2]=arguments[a];var i=new e,o=Zoe([t,n],r).map(function(u){return nk(u)}),s=nk(i);function l(u,c){u.traverse(function(f,d){d.forEach(function(p){c.add(p.serviceIdentifier,p.clone())})})}return o.forEach(function(u){l(u,s)}),i},e.prototype.load=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var r=this._getContainerModuleHelpersFactory(),a=0,i=t;a<i.length;a++){var o=i[a],s=r(o.id);o.registry(s.bindFunction,s.unbindFunction,s.isboundFunction,s.rebindFunction)}},e.prototype.loadAsync=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return Yoe(this,void 0,void 0,function(){var r,a,i,o,s;return Xoe(this,function(l){switch(l.label){case 0:r=this._getContainerModuleHelpersFactory(),a=0,i=t,l.label=1;case 1:return a<i.length?(o=i[a],s=r(o.id),[4,o.registry(s.bindFunction,s.unbindFunction,s.isboundFunction,s.rebindFunction)]):[3,4];case 2:l.sent(),l.label=3;case 3:return a++,[3,1];case 4:return[2]}})})},e.prototype.unload=function(){for(var t=this,n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var a=function(i){return function(o){return o.moduleId===i}};n.forEach(function(i){var o=a(i.id);t._bindingDictionary.removeByCondition(o)})},e.prototype.bind=function(t){var n=this.options.defaultScope||Fa.Transient,r=new qie(t,n);return this._bindingDictionary.add(t,r),new Hoe(r)},e.prototype.rebind=function(t){return this.unbind(t),this.bind(t)},e.prototype.unbind=function(t){try{this._bindingDictionary.remove(t)}catch{throw new Error(eoe+" "+fm(t))}},e.prototype.unbindAll=function(){this._bindingDictionary=new qA},e.prototype.isBound=function(t){var n=this._bindingDictionary.hasKey(t);return!n&&this.parent&&(n=this.parent.isBound(t)),n},e.prototype.isBoundNamed=function(t,n){return this.isBoundTagged(t,_s,n)},e.prototype.isBoundTagged=function(t,n,r){var a=!1;if(this._bindingDictionary.hasKey(t)){var i=this._bindingDictionary.get(t),o=Doe(this,t,n,r);a=i.some(function(s){return s.constraint(o)})}return!a&&this.parent&&(a=this.parent.isBoundTagged(t,n,r)),a},e.prototype.snapshot=function(){this._snapshots.push(Woe.of(this._bindingDictionary.clone(),this._middleware))},e.prototype.restore=function(){var t=this._snapshots.pop();if(t===void 0)throw new Error(soe);this._bindingDictionary=t.bindings,this._middleware=t.middleware},e.prototype.createChild=function(t){var n=new e(t||this.options);return n.parent=this,n},e.prototype.applyMiddleware=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];this._appliedMiddleware=this._appliedMiddleware.concat(t);var r=this._middleware?this._middleware:this._planAndResolve();this._middleware=t.reduce(function(a,i){return i(a)},r)},e.prototype.applyCustomMetadataReader=function(t){this._metadataReader=t},e.prototype.get=function(t){return this._get(!1,!1,tl.Variable,t)},e.prototype.getTagged=function(t,n,r){return this._get(!1,!1,tl.Variable,t,n,r)},e.prototype.getNamed=function(t,n){return this.getTagged(t,_s,n)},e.prototype.getAll=function(t){return this._get(!0,!0,tl.Variable,t)},e.prototype.getAllTagged=function(t,n,r){return this._get(!1,!0,tl.Variable,t,n,r)},e.prototype.getAllNamed=function(t,n){return this.getAllTagged(t,_s,n)},e.prototype.resolve=function(t){var n=this.createChild();return n.bind(t).toSelf(),this._appliedMiddleware.forEach(function(r){n.applyMiddleware(r)}),n.get(t)},e.prototype._getContainerModuleHelpersFactory=function(){var t=this,n=function(s,l){s._binding.moduleId=l},r=function(s){return function(l){var u=t.bind.bind(t),c=u(l);return n(c,s),c}},a=function(s){return function(l){var u=t.unbind.bind(t);u(l)}},i=function(s){return function(l){var u=t.isBound.bind(t);return u(l)}},o=function(s){return function(l){var u=t.rebind.bind(t),c=u(l);return n(c,s),c}};return function(s){return{bindFunction:r(s),isboundFunction:i(),rebindFunction:o(s),unbindFunction:a()}}},e.prototype._get=function(t,n,r,a,i,o){var s=null,l={avoidConstraints:t,contextInterceptor:function(u){return u},isMultiInject:n,key:i,serviceIdentifier:a,targetType:r,value:o};if(this._middleware){if(s=this._middleware(l),s==null)throw new Error(loe)}else s=this._planAndResolve()(l);return s},e.prototype._planAndResolve=function(){var t=this;return function(n){var r=Foe(t._metadataReader,t,n.isMultiInject,n.targetType,n.serviceIdentifier,n.key,n.value,n.avoidConstraints);r=n.contextInterceptor(r);var a=joe(r);return a}},e}();function sn(){return function(e){if(Reflect.hasOwnMetadata(tk,e))throw new Error(Kie);var t=Reflect.getMetadata(Yie,e)||[];return Reflect.defineMetadata(tk,t,e),e}}function qoe(){return function(e,t,n){var r=new mu(Ah,t);if(Reflect.hasOwnMetadata(Ah,e.constructor))throw new Error(voe);Reflect.defineMetadata(Ah,r,e.constructor)}}var Np=Symbol.for("INJECTION");function sy(e,t,n,r){function a(){return r&&!Reflect.hasMetadata(Np,this,t)&&Reflect.defineMetadata(Np,n(),this,t),Reflect.hasMetadata(Np,this,t)?Reflect.getMetadata(Np,this,t):n()}function i(o){Reflect.defineMetadata(Np,o,this,t)}Object.defineProperty(e,t,{configurable:!0,enumerable:!0,get:a,set:i})}function Koe(e,t){return function(n){return function(r,a){var i=function(){return e.get(n)};sy(r,a,i,t)}}}function Qoe(e,t){return function(n,r){return function(a,i){var o=function(){return e.getNamed(n,r)};sy(a,i,o,t)}}}function Joe(e,t){return function(n,r,a){return function(i,o){var s=function(){return e.getTagged(n,r,a)};sy(i,o,s,t)}}}function ese(e,t){return function(n){return function(r,a){var i=function(){return e.getAll(n)};sy(r,a,i,t)}}}function tse(e,t){t===void 0&&(t=!0);var n=Koe(e,t),r=Qoe(e,t),a=Joe(e,t),i=ese(e,t);return{lazyInject:n,lazyInjectNamed:r,lazyInjectTagged:a,lazyMultiInject:i}}var xe={IEventEmitter:Symbol.for("IEventEmitter"),ISceneService:Symbol.for("ISceneService"),IGlobalConfigService:Symbol.for("IGlobalConfigService"),ICameraService:Symbol.for("ICameraService"),ICoordinateSystemService:Symbol.for("ICoordinateSystemService"),ILayerService:Symbol.for("ILayerService"),ILayerMappingService:Symbol.for("ILayerMappingService"),ILayerStyleService:Symbol.for("ILayerStyleService"),IMapService:Symbol.for("IMapService"),IMarkerService:Symbol.for("IMarkerService"),IPopupService:Symbol.for("PopupService"),IFactoryMapService:Symbol.for("Factory<IMapService>"),IRendererService:Symbol.for("IRendererService"),IShaderModuleService:Symbol.for("IShaderModuleService"),IIconService:Symbol.for("IIconService"),IFontService:Symbol.for("IFontService"),IInteractionService:Symbol.for("IInteractionService"),IPickingService:Symbol.for("IPickingService"),IControlService:Symbol.for("IControlService"),IStyleAttributeService:Symbol.for("IStyleAttributeService"),ILayer:Symbol.for("ILayer"),ILayerPlugin:Symbol.for("ILayerPlugin"),INormalPass:Symbol.for("INormalPass"),IPostProcessor:Symbol.for("IPostProcessor"),IPostProcessingPass:Symbol.for("IPostProcessingPass"),IFactoryPostProcessingPass:Symbol.for("Factory<IPostProcessingPass>"),IFactoryNormalPass:Symbol.for("Factory<IFactoryNormalPass>"),IMultiPassRenderer:Symbol.for("IMultiPassRenderer"),SceneID:Symbol.for("SceneID"),MapConfig:Symbol.for("MapConfig")},VE={exports:{}};VE.exports=jm;VE.exports.default=jm;var rd=1e20;function jm(e,t,n,r,a,i){this.fontSize=e||24,this.buffer=t===void 0?3:t,this.cutoff=r||.25,this.fontFamily=a||"sans-serif",this.fontWeight=i||"normal",this.radius=n||8;var o=this.size=this.fontSize+this.buffer*2,s=o+this.buffer*2,l=typeof my!="undefined"&&!!my&&typeof my.showToast=="function"&&my.isFRM!==!0;l?this.canvas=my.createOffscreenCanvas(o,o,"2d"):(this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=o),this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textAlign="left",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(s*s),this.gridInner=new Float64Array(s*s),this.f=new Float64Array(s),this.z=new Float64Array(s+1),this.v=new Uint16Array(s),this.useMetrics=this.ctx.measureText("A").actualBoundingBoxLeft!==void 0,l?this.middle=Math.round(o/2*1):this.middle=Math.round(o/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function nse(e,t,n,r,a,i,o){i.fill(rd,0,t*n),o.fill(0,0,t*n);for(var s=(t-r)/2,l=0;l<a;l++)for(var u=0;u<r;u++){var c=(l+s)*t+u+s,f=e.data[4*(l*r+u)+3]/255;if(f===1)i[c]=0,o[c]=rd;else if(f===0)i[c]=rd,o[c]=0;else{var d=Math.max(0,.5-f),p=Math.max(0,f-.5);i[c]=d*d,o[c]=p*p}}}function rse(e,t,n,r,a,i,o){for(var s=0;s<t*n;s++){var l=Math.sqrt(r[s])-Math.sqrt(a[s]);e[s]=Math.round(255-255*(l/i+o))}}jm.prototype._draw=function(e,t){var n=this.ctx.measureText(e),r=n.width,a=2*this.buffer,i,o,s,l,u,c,f,d;t&&this.useMetrics?(u=Math.floor(n.actualBoundingBoxAscent),d=this.buffer+Math.ceil(n.actualBoundingBoxAscent),c=this.buffer,f=this.buffer,o=Math.min(this.size,Math.ceil(n.actualBoundingBoxRight-n.actualBoundingBoxLeft)),l=Math.min(this.size-c,Math.ceil(n.actualBoundingBoxAscent+n.actualBoundingBoxDescent)),i=o+a,s=l+a,this.ctx.textBaseline="alphabetic"):(i=o=this.size,s=l=this.size,u=19*this.fontSize/24,c=f=0,d=this.middle,this.ctx.textBaseline="middle");var p;o&&l&&(this.ctx.clearRect(f,c,o,l),this.ctx.fillText(e,this.buffer,d),p=this.ctx.getImageData(f,c,o,l));var h=new Uint8ClampedArray(i*s);return nse(p,i,s,o,l,this.gridOuter,this.gridInner),KA(this.gridOuter,i,s,this.f,this.v,this.z),KA(this.gridInner,i,s,this.f,this.v,this.z),rse(h,i,s,this.gridOuter,this.gridInner,this.radius,this.cutoff),{data:h,metrics:{width:o,height:l,sdfWidth:i,sdfHeight:s,top:u,left:0,advance:r}}};jm.prototype.draw=function(e){return this._draw(e,!1).data};jm.prototype.drawWithMetrics=function(e){return this._draw(e,!0)};function KA(e,t,n,r,a,i){for(var o=0;o<t;o++)QA(e,o,t,n,r,a,i);for(var s=0;s<n;s++)QA(e,s*t,1,t,r,a,i)}function QA(e,t,n,r,a,i,o){var s,l,u,c;for(i[0]=0,o[0]=-rd,o[1]=rd,s=0;s<r;s++)a[s]=e[t+s*n];for(s=1,l=0,u=0;s<r;s++){do c=i[l],u=(a[s]-a[c]+s*s-c*c)/(s-c)/2;while(u<=o[l]&&--l>-1);l++,i[l]=s,o[l]=u,o[l+1]=rd}for(s=0,l=0;s<r;s++){for(;o[l+1]<s;)l++;c=i[l],e[t+s*n]=a[c]+(s-c)*(s-c)}}var ase=VE.exports;function JA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function e4(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?JA(Object(n),!0).forEach(function(r){m(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):JA(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function tF(e,t){var n=typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=ise(e))||t&&e&&typeof e.length=="number"){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(u){throw u},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i=!0,o=!1,s;return{s:function(){n=n.call(e)},n:function(){var u=n.next();return i=u.done,u},e:function(u){o=!0,s=u},f:function(){try{!i&&n.return!=null&&n.return()}finally{if(o)throw s}}}}function ise(e,t){if(!!e){if(typeof e=="string")return t4(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return t4(e,t)}}function t4(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Fp=30;function ose(e){var t=e.characterSet,n=e.getFontWidth,r=e.fontHeight,a=e.buffer,i=e.maxCanvasWidth,o=e.mapping,s=o===void 0?{}:o,l=e.xOffset,u=l===void 0?0:l,c=e.yOffset,f=c===void 0?0:c,d=0,p=u;Array.from(t).forEach(function(g,v){if(!s[g]){var b=n(g,v);p+Fp>i&&(p=0,d++),s[g]={x:p,y:f+d*Fp,width:Fp,height:Fp,advance:b},p+=Fp}});var h=r+a*2;return{mapping:s,xOffset:p,yOffset:f+d*h,canvasHeight:nF(f+(d+1)*h)}}function sse(e,t,n){var r=0,a=0,i=0,o=[],s={},l=tF(e),u;try{for(l.s();!(u=l.n()).done;){var c=u.value;if(!s[c.id]){var f=c.size;r+f+t>n&&(n4(s,o,a),r=0,a=i+a+t,i=0,o=[]),o.push({icon:c,xOffset:r}),r=r+f+t,i=Math.max(i,f)}}}catch(p){l.e(p)}finally{l.f()}o.length>0&&n4(s,o,a);var d=nF(i+a+t);return{mapping:s,canvasHeight:d}}function n4(e,t,n){var r=tF(t),a;try{for(r.s();!(a=r.n()).done;){var i=a.value,o=i.icon,s=i.xOffset;e[o.id]=e4(e4({},o),{},{x:s,y:n,image:o.image,width:o.width,height:o.height})}}catch(l){r.e(l)}finally{r.f()}}function nF(e){return Math.pow(2,Math.ceil(Math.log2(e)))}var r4,a4;function i4(e,t){var n=typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=lse(e))||t&&e&&typeof e.length=="number"){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(u){throw u},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i=!0,o=!1,s;return{s:function(){n=n.call(e)},n:function(){var u=n.next();return i=u.done,u},e:function(u){o=!0,s=u},f:function(){try{!i&&n.return!=null&&n.return()}finally{if(o)throw s}}}}function lse(e,t){if(!!e){if(typeof e=="string")return o4(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o4(e,t)}}function o4(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function s4(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function U1(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?s4(Object(n),!0).forEach(function(r){m(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s4(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var use=bse(),cse="sans-serif",fse="normal",dse=24,pse=3,hse=.25,mse=8,l4=1024,gse=1,u4=1,vse=3;function bse(){for(var e=[],t=32;t<128;t++)e.push(String.fromCharCode(t));return e}function c4(e,t,n,r){e.font="".concat(r," ").concat(n,"px ").concat(t),e.fillStyle="black",e.textBaseline="middle"}function f4(e,t){for(var n=0;n<e.length;n++)t.data[4*n+3]=e[n]}var yse=(r4=sn(),r4(a4=function(){function e(){Ae(this,e),m(this,"fontAtlas",void 0),m(this,"iconFontMap",void 0),m(this,"iconFontGlyphs",{}),m(this,"fontOptions",void 0),m(this,"key",void 0),m(this,"cache",new zY(vse))}return Oe(e,[{key:"scale",get:function(){return u4}},{key:"canvas",get:function(){var n=this.cache.get(this.key);return n&&n.data}},{key:"mapping",get:function(){var n=this.cache.get(this.key);return n&&n.mapping}},{key:"init",value:function(){this.cache.clear(),this.fontOptions={fontFamily:cse,fontWeight:fse,characterSet:use,fontSize:dse,buffer:pse,sdf:!0,cutoff:hse,radius:mse,iconfont:!1},this.key="",this.iconFontMap=new Map}},{key:"addIconGlyphs",value:function(n){var r=this;n.forEach(function(a){r.iconFontGlyphs[a.name]=a.unicode})}},{key:"addIconFont",value:function(n,r){this.iconFontMap.set(n,r)}},{key:"getIconFontKey",value:function(n){return this.iconFontMap.get(n)||n}},{key:"getGlyph",value:function(n){return this.iconFontGlyphs[n]?String.fromCharCode(parseInt(this.iconFontGlyphs[n],16)):""}},{key:"setFontOptions",value:function(n){this.fontOptions=U1(U1({},this.fontOptions),n),this.key=this.getKey();var r=this.getNewChars(this.key,this.fontOptions.characterSet),a=this.cache.get(this.key);if(!(a&&r.length===0)){var i=this.generateFontAtlas(this.key,r,a);this.fontAtlas=i,this.cache.set(this.key,i)}}},{key:"destroy",value:function(){this.cache.clear(),this.iconFontMap.clear()}},{key:"generateFontAtlas",value:function(n,r,a){var i=this.fontOptions,o=i.fontFamily,s=i.fontWeight,l=i.fontSize,u=i.buffer,c=i.sdf,f=i.radius,d=i.cutoff,p=i.iconfont,h=a&&a.data;h||(h=tr.document.createElement("canvas"),h.width=l4);var g=h.getContext("2d");c4(g,o,l,s);var v=ose(U1({getFontWidth:function(re){return g.measureText(re).width},fontHeight:l*u4,buffer:u,characterSet:r,maxCanvasWidth:l4},a&&{mapping:a.mapping,xOffset:a.xOffset,yOffset:a.yOffset})),b=v.mapping,y=v.canvasHeight,x=v.xOffset,k=v.yOffset,T=g.getImageData(0,0,h.width,h.height);if(h.height=y,g.putImageData(T,0,0),c4(g,o,l,s),c){var C=new ase(l,u,f,d,o,s),I=g.getImageData(0,0,C.size,C.size),P=i4(r),j;try{for(P.s();!(j=P.n()).done;){var A=j.value;if(p){var S=String.fromCharCode(parseInt(A.replace("&#x","").replace(";",""),16)),M=C.draw(S);f4(M,I)}else f4(C.draw(A),I);g.putImageData(I,b[A].x,b[A].y)}}catch(ee){P.e(ee)}finally{P.f()}}else{var O=i4(r),R;try{for(O.s();!(R=O.n()).done;){var G=R.value;g.fillText(G,b[G].x,b[G].y+l*gse)}}catch(ee){O.e(ee)}finally{O.f()}}return{xOffset:x,yOffset:k,mapping:b,data:h,width:h.width,height:h.height}}},{key:"getKey",value:function(){return"key"}},{key:"getNewChars",value:function(n,r){var a=this.cache.get(n);if(!a)return r;var i=[],o=a.mapping,s=new Set(Object.keys(o)),l=new Set(r);return l.forEach(function(u){s.has(u)||i.push(u)}),i}}]),e}())||a4),d4,p4;function xse(e){var t=_se();return function(){var r=ke(e),a;if(t){var i=ke(this).constructor;a=Reflect.construct(r,arguments,i)}else a=r.apply(this,arguments);return It(this,a)}}function _se(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var wse=3,h4=1024,Dp=64,kse=(d4=sn(),d4(p4=function(e){Tt(n,e);var t=xse(n);function n(){var r;Ae(this,n);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return r=t.call.apply(t,[this].concat(i)),m(D(r),"canvasHeight",128),m(D(r),"texture",void 0),m(D(r),"canvas",void 0),m(D(r),"iconData",void 0),m(D(r),"iconMap",void 0),m(D(r),"ctx",void 0),m(D(r),"loadingImageCount",0),r}return Oe(n,[{key:"isLoading",value:function(){return this.loadingImageCount===0}},{key:"init",value:function(){this.iconData=[],this.iconMap={},this.canvas=tr.document.createElement("canvas"),this.canvas.width=128,this.canvas.height=128,this.ctx=this.canvas.getContext("2d")}},{key:"addImage",value:function(a,i){var o=this,s=new Image;if(this.loadingImageCount++,this.hasImage(a))throw new Error("Image Id already exists");this.iconData.push({id:a,size:Dp}),this.updateIconMap(),this.loadImage(i).then(function(l){s=l;var u=o.iconData.find(function(c){return c.id===a});u&&(u.image=s,u.width=s.width,u.height=s.height),o.update()})}},{key:"addImageMini",value:function(a,i,o){var s=this,l=o.getSceneConfig().canvas,u=l.createImage();if(this.loadingImageCount++,this.hasImage(a))throw new Error("Image Id already exists");this.iconData.push({id:a,size:Dp}),this.updateIconMap(),this.loadImageMini(i,l).then(function(c){u=c;var f=s.iconData.find(function(d){return d.id===a});f&&(f.image=u,f.width=u.width,f.height=u.height),s.update()})}},{key:"getTexture",value:function(){return this.texture}},{key:"getIconMap",value:function(){return this.iconMap}},{key:"getCanvas",value:function(){return this.canvas}},{key:"hasImage",value:function(a){return this.iconMap.hasOwnProperty(a)}},{key:"removeImage",value:function(a){this.hasImage(a)&&(this.iconData=this.iconData.filter(function(i){return i.id!==a}),delete this.iconMap[a],this.update())}},{key:"destroy",value:function(){this.removeAllListeners("imageUpdate"),this.iconData=[],this.iconMap={}}},{key:"loadImage",value:function(a){return new Promise(function(i,o){if(a instanceof HTMLImageElement){i(a);return}var s=new Image;s.crossOrigin="anonymous",s.onload=function(){i(s)},s.onerror=function(){o(new Error("Could not load image at "+a))},s.src=a instanceof File?URL.createObjectURL(a):a})}},{key:"update",value:function(){this.updateIconMap(),this.updateIconAtlas(),this.loadingImageCount--,this.loadingImageCount===0&&this.emit("imageUpdate")}},{key:"updateIconAtlas",value:function(){var a=this;this.canvas.width=h4,this.canvas.height=this.canvasHeight,Object.keys(this.iconMap).forEach(function(i){var o=a.iconMap[i],s=o.x,l=o.y,u=o.image,c=o.width,f=c===void 0?64:c,d=o.height,p=d===void 0?64:d,h=Math.max(f,p),g=h/Dp,v=p/g,b=f/g;u&&a.ctx.drawImage(u,s+(Dp-b)/2,l+(Dp-v)/2,b,v)})}},{key:"updateIconMap",value:function(){var a=sse(this.iconData,wse,h4),i=a.mapping,o=a.canvasHeight;this.iconMap=i,this.canvasHeight=o}},{key:"loadImageMini",value:function(a,i){return new Promise(function(o,s){var l=i.createImage();l.crossOrigin="anonymous",l.onload=function(){o(l)},l.onerror=function(){s(new Error("Could not load image at "+a))},l.src=a})}}]),n}(Hi.exports.EventEmitter))||p4),Er=1e-6,Ka=typeof Float32Array!="undefined"?Float32Array:Array,m4=Math.random;Math.hypot||(Math.hypot=function(){for(var e=0,t=arguments.length;t--;)e+=arguments[t]*arguments[t];return Math.sqrt(e)});function vo(){var e=new Ka(16);return Ka!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0),e[0]=1,e[5]=1,e[10]=1,e[15]=1,e}function rF(e){var t=new Ka(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function Ese(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function aF(e,t,n,r,a,i,o,s,l,u,c,f,d,p,h,g){var v=new Ka(16);return v[0]=e,v[1]=t,v[2]=n,v[3]=r,v[4]=a,v[5]=i,v[6]=o,v[7]=s,v[8]=l,v[9]=u,v[10]=c,v[11]=f,v[12]=d,v[13]=p,v[14]=h,v[15]=g,v}function Sse(e,t,n,r,a,i,o,s,l,u,c,f,d,p,h,g,v){return e[0]=t,e[1]=n,e[2]=r,e[3]=a,e[4]=i,e[5]=o,e[6]=s,e[7]=l,e[8]=u,e[9]=c,e[10]=f,e[11]=d,e[12]=p,e[13]=h,e[14]=g,e[15]=v,e}function iF(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function Cse(e,t){if(e===t){var n=t[1],r=t[2],a=t[3],i=t[6],o=t[7],s=t[11];e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=n,e[6]=t[9],e[7]=t[13],e[8]=r,e[9]=i,e[11]=t[14],e[12]=a,e[13]=o,e[14]=s}else e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15];return e}function oF(e,t){var n=t[0],r=t[1],a=t[2],i=t[3],o=t[4],s=t[5],l=t[6],u=t[7],c=t[8],f=t[9],d=t[10],p=t[11],h=t[12],g=t[13],v=t[14],b=t[15],y=n*s-r*o,x=n*l-a*o,k=n*u-i*o,T=r*l-a*s,C=r*u-i*s,I=a*u-i*l,P=c*g-f*h,j=c*v-d*h,A=c*b-p*h,S=f*v-d*g,M=f*b-p*g,O=d*b-p*v,R=y*O-x*M+k*S+T*A-C*j+I*P;return R?(R=1/R,e[0]=(s*O-l*M+u*S)*R,e[1]=(a*M-r*O-i*S)*R,e[2]=(g*I-v*C+b*T)*R,e[3]=(d*C-f*I-p*T)*R,e[4]=(l*A-o*O-u*j)*R,e[5]=(n*O-a*A+i*j)*R,e[6]=(v*k-h*I-b*x)*R,e[7]=(c*I-d*k+p*x)*R,e[8]=(o*M-s*A+u*P)*R,e[9]=(r*A-n*M-i*P)*R,e[10]=(h*C-g*k+b*y)*R,e[11]=(f*k-c*C-p*y)*R,e[12]=(s*j-o*S-l*P)*R,e[13]=(n*S-r*j+a*P)*R,e[14]=(g*x-h*T-v*y)*R,e[15]=(c*T-f*x+d*y)*R,e):null}function Tse(e,t){var n=t[0],r=t[1],a=t[2],i=t[3],o=t[4],s=t[5],l=t[6],u=t[7],c=t[8],f=t[9],d=t[10],p=t[11],h=t[12],g=t[13],v=t[14],b=t[15];return e[0]=s*(d*b-p*v)-f*(l*b-u*v)+g*(l*p-u*d),e[1]=-(r*(d*b-p*v)-f*(a*b-i*v)+g*(a*p-i*d)),e[2]=r*(l*b-u*v)-s*(a*b-i*v)+g*(a*u-i*l),e[3]=-(r*(l*p-u*d)-s*(a*p-i*d)+f*(a*u-i*l)),e[4]=-(o*(d*b-p*v)-c*(l*b-u*v)+h*(l*p-u*d)),e[5]=n*(d*b-p*v)-c*(a*b-i*v)+h*(a*p-i*d),e[6]=-(n*(l*b-u*v)-o*(a*b-i*v)+h*(a*u-i*l)),e[7]=n*(l*p-u*d)-o*(a*p-i*d)+c*(a*u-i*l),e[8]=o*(f*b-p*g)-c*(s*b-u*g)+h*(s*p-u*f),e[9]=-(n*(f*b-p*g)-c*(r*b-i*g)+h*(r*p-i*f)),e[10]=n*(s*b-u*g)-o*(r*b-i*g)+h*(r*u-i*s),e[11]=-(n*(s*p-u*f)-o*(r*p-i*f)+c*(r*u-i*s)),e[12]=-(o*(f*v-d*g)-c*(s*v-l*g)+h*(s*d-l*f)),e[13]=n*(f*v-d*g)-c*(r*v-a*g)+h*(r*d-a*f),e[14]=-(n*(s*v-l*g)-o*(r*v-a*g)+h*(r*l-a*s)),e[15]=n*(s*d-l*f)-o*(r*d-a*f)+c*(r*l-a*s),e}function Ase(e){var t=e[0],n=e[1],r=e[2],a=e[3],i=e[4],o=e[5],s=e[6],l=e[7],u=e[8],c=e[9],f=e[10],d=e[11],p=e[12],h=e[13],g=e[14],v=e[15],b=t*o-n*i,y=t*s-r*i,x=t*l-a*i,k=n*s-r*o,T=n*l-a*o,C=r*l-a*s,I=u*h-c*p,P=u*g-f*p,j=u*v-d*p,A=c*g-f*h,S=c*v-d*h,M=f*v-d*g;return b*M-y*S+x*A+k*j-T*P+C*I}function il(e,t,n){var r=t[0],a=t[1],i=t[2],o=t[3],s=t[4],l=t[5],u=t[6],c=t[7],f=t[8],d=t[9],p=t[10],h=t[11],g=t[12],v=t[13],b=t[14],y=t[15],x=n[0],k=n[1],T=n[2],C=n[3];return e[0]=x*r+k*s+T*f+C*g,e[1]=x*a+k*l+T*d+C*v,e[2]=x*i+k*u+T*p+C*b,e[3]=x*o+k*c+T*h+C*y,x=n[4],k=n[5],T=n[6],C=n[7],e[4]=x*r+k*s+T*f+C*g,e[5]=x*a+k*l+T*d+C*v,e[6]=x*i+k*u+T*p+C*b,e[7]=x*o+k*c+T*h+C*y,x=n[8],k=n[9],T=n[10],C=n[11],e[8]=x*r+k*s+T*f+C*g,e[9]=x*a+k*l+T*d+C*v,e[10]=x*i+k*u+T*p+C*b,e[11]=x*o+k*c+T*h+C*y,x=n[12],k=n[13],T=n[14],C=n[15],e[12]=x*r+k*s+T*f+C*g,e[13]=x*a+k*l+T*d+C*v,e[14]=x*i+k*u+T*p+C*b,e[15]=x*o+k*c+T*h+C*y,e}function jE(e,t,n){var r=n[0],a=n[1],i=n[2],o,s,l,u,c,f,d,p,h,g,v,b;return t===e?(e[12]=t[0]*r+t[4]*a+t[8]*i+t[12],e[13]=t[1]*r+t[5]*a+t[9]*i+t[13],e[14]=t[2]*r+t[6]*a+t[10]*i+t[14],e[15]=t[3]*r+t[7]*a+t[11]*i+t[15]):(o=t[0],s=t[1],l=t[2],u=t[3],c=t[4],f=t[5],d=t[6],p=t[7],h=t[8],g=t[9],v=t[10],b=t[11],e[0]=o,e[1]=s,e[2]=l,e[3]=u,e[4]=c,e[5]=f,e[6]=d,e[7]=p,e[8]=h,e[9]=g,e[10]=v,e[11]=b,e[12]=o*r+c*a+h*i+t[12],e[13]=s*r+f*a+g*i+t[13],e[14]=l*r+d*a+v*i+t[14],e[15]=u*r+p*a+b*i+t[15]),e}function sF(e,t,n){var r=n[0],a=n[1],i=n[2];return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*a,e[5]=t[5]*a,e[6]=t[6]*a,e[7]=t[7]*a,e[8]=t[8]*i,e[9]=t[9]*i,e[10]=t[10]*i,e[11]=t[11]*i,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function Ose(e,t,n,r){var a=r[0],i=r[1],o=r[2],s=Math.hypot(a,i,o),l,u,c,f,d,p,h,g,v,b,y,x,k,T,C,I,P,j,A,S,M,O,R,G;return s<Er?null:(s=1/s,a*=s,i*=s,o*=s,l=Math.sin(n),u=Math.cos(n),c=1-u,f=t[0],d=t[1],p=t[2],h=t[3],g=t[4],v=t[5],b=t[6],y=t[7],x=t[8],k=t[9],T=t[10],C=t[11],I=a*a*c+u,P=i*a*c+o*l,j=o*a*c-i*l,A=a*i*c-o*l,S=i*i*c+u,M=o*i*c+a*l,O=a*o*c+i*l,R=i*o*c-a*l,G=o*o*c+u,e[0]=f*I+g*P+x*j,e[1]=d*I+v*P+k*j,e[2]=p*I+b*P+T*j,e[3]=h*I+y*P+C*j,e[4]=f*A+g*S+x*M,e[5]=d*A+v*S+k*M,e[6]=p*A+b*S+T*M,e[7]=h*A+y*S+C*M,e[8]=f*O+g*R+x*G,e[9]=d*O+v*R+k*G,e[10]=p*O+b*R+T*G,e[11]=h*O+y*R+C*G,t!==e&&(e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e)}function GE(e,t,n){var r=Math.sin(n),a=Math.cos(n),i=t[4],o=t[5],s=t[6],l=t[7],u=t[8],c=t[9],f=t[10],d=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=i*a+u*r,e[5]=o*a+c*r,e[6]=s*a+f*r,e[7]=l*a+d*r,e[8]=u*a-i*r,e[9]=c*a-o*r,e[10]=f*a-s*r,e[11]=d*a-l*r,e}function HE(e,t,n){var r=Math.sin(n),a=Math.cos(n),i=t[0],o=t[1],s=t[2],l=t[3],u=t[8],c=t[9],f=t[10],d=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=i*a-u*r,e[1]=o*a-c*r,e[2]=s*a-f*r,e[3]=l*a-d*r,e[8]=i*r+u*a,e[9]=o*r+c*a,e[10]=s*r+f*a,e[11]=l*r+d*a,e}function lF(e,t,n){var r=Math.sin(n),a=Math.cos(n),i=t[0],o=t[1],s=t[2],l=t[3],u=t[4],c=t[5],f=t[6],d=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=i*a+u*r,e[1]=o*a+c*r,e[2]=s*a+f*r,e[3]=l*a+d*r,e[4]=u*a-i*r,e[5]=c*a-o*r,e[6]=f*a-s*r,e[7]=d*a-l*r,e}function uF(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=t[0],e[13]=t[1],e[14]=t[2],e[15]=1,e}function Mse(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=t[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function Rse(e,t,n){var r=n[0],a=n[1],i=n[2],o=Math.hypot(r,a,i),s,l,u;return o<Er?null:(o=1/o,r*=o,a*=o,i*=o,s=Math.sin(t),l=Math.cos(t),u=1-l,e[0]=r*r*u+l,e[1]=a*r*u+i*s,e[2]=i*r*u-a*s,e[3]=0,e[4]=r*a*u-i*s,e[5]=a*a*u+l,e[6]=i*a*u+r*s,e[7]=0,e[8]=r*i*u+a*s,e[9]=a*i*u-r*s,e[10]=i*i*u+l,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e)}function Pse(e,t){var n=Math.sin(t),r=Math.cos(t);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=r,e[6]=n,e[7]=0,e[8]=0,e[9]=-n,e[10]=r,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function Ise(e,t){var n=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=0,e[2]=-n,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=n,e[9]=0,e[10]=r,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function Lse(e,t){var n=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=n,e[2]=0,e[3]=0,e[4]=-n,e[5]=r,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function cF(e,t,n){var r=t[0],a=t[1],i=t[2],o=t[3],s=r+r,l=a+a,u=i+i,c=r*s,f=r*l,d=r*u,p=a*l,h=a*u,g=i*u,v=o*s,b=o*l,y=o*u;return e[0]=1-(p+g),e[1]=f+y,e[2]=d-b,e[3]=0,e[4]=f-y,e[5]=1-(c+g),e[6]=h+v,e[7]=0,e[8]=d+b,e[9]=h-v,e[10]=1-(c+p),e[11]=0,e[12]=n[0],e[13]=n[1],e[14]=n[2],e[15]=1,e}function Nse(e,t){var n=new Ka(3),r=-t[0],a=-t[1],i=-t[2],o=t[3],s=t[4],l=t[5],u=t[6],c=t[7],f=r*r+a*a+i*i+o*o;return f>0?(n[0]=(s*o+c*r+l*i-u*a)*2/f,n[1]=(l*o+c*a+u*r-s*i)*2/f,n[2]=(u*o+c*i+s*a-l*r)*2/f):(n[0]=(s*o+c*r+l*i-u*a)*2,n[1]=(l*o+c*a+u*r-s*i)*2,n[2]=(u*o+c*i+s*a-l*r)*2),cF(e,t,n),e}function Fse(e,t){return e[0]=t[12],e[1]=t[13],e[2]=t[14],e}function fF(e,t){var n=t[0],r=t[1],a=t[2],i=t[4],o=t[5],s=t[6],l=t[8],u=t[9],c=t[10];return e[0]=Math.hypot(n,r,a),e[1]=Math.hypot(i,o,s),e[2]=Math.hypot(l,u,c),e}function Dse(e,t){var n=new Ka(3);fF(n,t);var r=1/n[0],a=1/n[1],i=1/n[2],o=t[0]*r,s=t[1]*a,l=t[2]*i,u=t[4]*r,c=t[5]*a,f=t[6]*i,d=t[8]*r,p=t[9]*a,h=t[10]*i,g=o+c+h,v=0;return g>0?(v=Math.sqrt(g+1)*2,e[3]=.25*v,e[0]=(f-p)/v,e[1]=(d-l)/v,e[2]=(s-u)/v):o>c&&o>h?(v=Math.sqrt(1+o-c-h)*2,e[3]=(f-p)/v,e[0]=.25*v,e[1]=(s+u)/v,e[2]=(d+l)/v):c>h?(v=Math.sqrt(1+c-o-h)*2,e[3]=(d-l)/v,e[0]=(s+u)/v,e[1]=.25*v,e[2]=(f+p)/v):(v=Math.sqrt(1+h-o-c)*2,e[3]=(s-u)/v,e[0]=(d+l)/v,e[1]=(f+p)/v,e[2]=.25*v),e}function Bse(e,t,n,r){var a=t[0],i=t[1],o=t[2],s=t[3],l=a+a,u=i+i,c=o+o,f=a*l,d=a*u,p=a*c,h=i*u,g=i*c,v=o*c,b=s*l,y=s*u,x=s*c,k=r[0],T=r[1],C=r[2];return e[0]=(1-(h+v))*k,e[1]=(d+x)*k,e[2]=(p-y)*k,e[3]=0,e[4]=(d-x)*T,e[5]=(1-(f+v))*T,e[6]=(g+b)*T,e[7]=0,e[8]=(p+y)*C,e[9]=(g-b)*C,e[10]=(1-(f+h))*C,e[11]=0,e[12]=n[0],e[13]=n[1],e[14]=n[2],e[15]=1,e}function zse(e,t,n,r,a){var i=t[0],o=t[1],s=t[2],l=t[3],u=i+i,c=o+o,f=s+s,d=i*u,p=i*c,h=i*f,g=o*c,v=o*f,b=s*f,y=l*u,x=l*c,k=l*f,T=r[0],C=r[1],I=r[2],P=a[0],j=a[1],A=a[2],S=(1-(g+b))*T,M=(p+k)*T,O=(h-x)*T,R=(p-k)*C,G=(1-(d+b))*C,ee=(v+y)*C,re=(h+x)*I,X=(v-y)*I,K=(1-(d+g))*I;return e[0]=S,e[1]=M,e[2]=O,e[3]=0,e[4]=R,e[5]=G,e[6]=ee,e[7]=0,e[8]=re,e[9]=X,e[10]=K,e[11]=0,e[12]=n[0]+P-(S*P+R*j+re*A),e[13]=n[1]+j-(M*P+G*j+X*A),e[14]=n[2]+A-(O*P+ee*j+K*A),e[15]=1,e}function Use(e,t){var n=t[0],r=t[1],a=t[2],i=t[3],o=n+n,s=r+r,l=a+a,u=n*o,c=r*o,f=r*s,d=a*o,p=a*s,h=a*l,g=i*o,v=i*s,b=i*l;return e[0]=1-f-h,e[1]=c+b,e[2]=d-v,e[3]=0,e[4]=c-b,e[5]=1-u-h,e[6]=p+g,e[7]=0,e[8]=d+v,e[9]=p-g,e[10]=1-u-f,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function $se(e,t,n,r,a,i,o){var s=1/(n-t),l=1/(a-r),u=1/(i-o);return e[0]=i*2*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=i*2*l,e[6]=0,e[7]=0,e[8]=(n+t)*s,e[9]=(a+r)*l,e[10]=(o+i)*u,e[11]=-1,e[12]=0,e[13]=0,e[14]=o*i*2*u,e[15]=0,e}function dF(e,t,n,r,a){var i=1/Math.tan(t/2),o;return e[0]=i/n,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=i,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,a!=null&&a!==1/0?(o=1/(r-a),e[10]=(a+r)*o,e[14]=2*a*r*o):(e[10]=-1,e[14]=-2*r),e}var pF=dF;function Vse(e,t,n,r,a){var i=1/Math.tan(t/2),o;return e[0]=i/n,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=i,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,a!=null&&a!==1/0?(o=1/(r-a),e[10]=a*o,e[14]=a*r*o):(e[10]=-1,e[14]=-r),e}function jse(e,t,n,r){var a=Math.tan(t.upDegrees*Math.PI/180),i=Math.tan(t.downDegrees*Math.PI/180),o=Math.tan(t.leftDegrees*Math.PI/180),s=Math.tan(t.rightDegrees*Math.PI/180),l=2/(o+s),u=2/(a+i);return e[0]=l,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=u,e[6]=0,e[7]=0,e[8]=-((o-s)*l*.5),e[9]=(a-i)*u*.5,e[10]=r/(n-r),e[11]=-1,e[12]=0,e[13]=0,e[14]=r*n/(n-r),e[15]=0,e}function hF(e,t,n,r,a,i,o){var s=1/(t-n),l=1/(r-a),u=1/(i-o);return e[0]=-2*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*l,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*u,e[11]=0,e[12]=(t+n)*s,e[13]=(a+r)*l,e[14]=(o+i)*u,e[15]=1,e}var Gse=hF;function Hse(e,t,n,r,a,i,o){var s=1/(t-n),l=1/(r-a),u=1/(i-o);return e[0]=-2*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*l,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=u,e[11]=0,e[12]=(t+n)*s,e[13]=(a+r)*l,e[14]=i*u,e[15]=1,e}function mF(e,t,n,r){var a,i,o,s,l,u,c,f,d,p,h=t[0],g=t[1],v=t[2],b=r[0],y=r[1],x=r[2],k=n[0],T=n[1],C=n[2];return Math.abs(h-k)<Er&&Math.abs(g-T)<Er&&Math.abs(v-C)<Er?iF(e):(c=h-k,f=g-T,d=v-C,p=1/Math.hypot(c,f,d),c*=p,f*=p,d*=p,a=y*d-x*f,i=x*c-b*d,o=b*f-y*c,p=Math.hypot(a,i,o),p?(p=1/p,a*=p,i*=p,o*=p):(a=0,i=0,o=0),s=f*o-d*i,l=d*a-c*o,u=c*i-f*a,p=Math.hypot(s,l,u),p?(p=1/p,s*=p,l*=p,u*=p):(s=0,l=0,u=0),e[0]=a,e[1]=s,e[2]=c,e[3]=0,e[4]=i,e[5]=l,e[6]=f,e[7]=0,e[8]=o,e[9]=u,e[10]=d,e[11]=0,e[12]=-(a*h+i*g+o*v),e[13]=-(s*h+l*g+u*v),e[14]=-(c*h+f*g+d*v),e[15]=1,e)}function Wse(e,t,n,r){var a=t[0],i=t[1],o=t[2],s=r[0],l=r[1],u=r[2],c=a-n[0],f=i-n[1],d=o-n[2],p=c*c+f*f+d*d;p>0&&(p=1/Math.sqrt(p),c*=p,f*=p,d*=p);var h=l*d-u*f,g=u*c-s*d,v=s*f-l*c;return p=h*h+g*g+v*v,p>0&&(p=1/Math.sqrt(p),h*=p,g*=p,v*=p),e[0]=h,e[1]=g,e[2]=v,e[3]=0,e[4]=f*v-d*g,e[5]=d*h-c*v,e[6]=c*g-f*h,e[7]=0,e[8]=c,e[9]=f,e[10]=d,e[11]=0,e[12]=a,e[13]=i,e[14]=o,e[15]=1,e}function Yse(e){return"mat4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+", "+e[9]+", "+e[10]+", "+e[11]+", "+e[12]+", "+e[13]+", "+e[14]+", "+e[15]+")"}function Xse(e){return Math.hypot(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15])}function Zse(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e[4]=t[4]+n[4],e[5]=t[5]+n[5],e[6]=t[6]+n[6],e[7]=t[7]+n[7],e[8]=t[8]+n[8],e[9]=t[9]+n[9],e[10]=t[10]+n[10],e[11]=t[11]+n[11],e[12]=t[12]+n[12],e[13]=t[13]+n[13],e[14]=t[14]+n[14],e[15]=t[15]+n[15],e}function gF(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e[3]=t[3]-n[3],e[4]=t[4]-n[4],e[5]=t[5]-n[5],e[6]=t[6]-n[6],e[7]=t[7]-n[7],e[8]=t[8]-n[8],e[9]=t[9]-n[9],e[10]=t[10]-n[10],e[11]=t[11]-n[11],e[12]=t[12]-n[12],e[13]=t[13]-n[13],e[14]=t[14]-n[14],e[15]=t[15]-n[15],e}function qse(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e[4]=t[4]*n,e[5]=t[5]*n,e[6]=t[6]*n,e[7]=t[7]*n,e[8]=t[8]*n,e[9]=t[9]*n,e[10]=t[10]*n,e[11]=t[11]*n,e[12]=t[12]*n,e[13]=t[13]*n,e[14]=t[14]*n,e[15]=t[15]*n,e}function Kse(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e[3]=t[3]+n[3]*r,e[4]=t[4]+n[4]*r,e[5]=t[5]+n[5]*r,e[6]=t[6]+n[6]*r,e[7]=t[7]+n[7]*r,e[8]=t[8]+n[8]*r,e[9]=t[9]+n[9]*r,e[10]=t[10]+n[10]*r,e[11]=t[11]+n[11]*r,e[12]=t[12]+n[12]*r,e[13]=t[13]+n[13]*r,e[14]=t[14]+n[14]*r,e[15]=t[15]+n[15]*r,e}function Qse(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]&&e[9]===t[9]&&e[10]===t[10]&&e[11]===t[11]&&e[12]===t[12]&&e[13]===t[13]&&e[14]===t[14]&&e[15]===t[15]}function Jse(e,t){var n=e[0],r=e[1],a=e[2],i=e[3],o=e[4],s=e[5],l=e[6],u=e[7],c=e[8],f=e[9],d=e[10],p=e[11],h=e[12],g=e[13],v=e[14],b=e[15],y=t[0],x=t[1],k=t[2],T=t[3],C=t[4],I=t[5],P=t[6],j=t[7],A=t[8],S=t[9],M=t[10],O=t[11],R=t[12],G=t[13],ee=t[14],re=t[15];return Math.abs(n-y)<=Er*Math.max(1,Math.abs(n),Math.abs(y))&&Math.abs(r-x)<=Er*Math.max(1,Math.abs(r),Math.abs(x))&&Math.abs(a-k)<=Er*Math.max(1,Math.abs(a),Math.abs(k))&&Math.abs(i-T)<=Er*Math.max(1,Math.abs(i),Math.abs(T))&&Math.abs(o-C)<=Er*Math.max(1,Math.abs(o),Math.abs(C))&&Math.abs(s-I)<=Er*Math.max(1,Math.abs(s),Math.abs(I))&&Math.abs(l-P)<=Er*Math.max(1,Math.abs(l),Math.abs(P))&&Math.abs(u-j)<=Er*Math.max(1,Math.abs(u),Math.abs(j))&&Math.abs(c-A)<=Er*Math.max(1,Math.abs(c),Math.abs(A))&&Math.abs(f-S)<=Er*Math.max(1,Math.abs(f),Math.abs(S))&&Math.abs(d-M)<=Er*Math.max(1,Math.abs(d),Math.abs(M))&&Math.abs(p-O)<=Er*Math.max(1,Math.abs(p),Math.abs(O))&&Math.abs(h-R)<=Er*Math.max(1,Math.abs(h),Math.abs(R))&&Math.abs(g-G)<=Er*Math.max(1,Math.abs(g),Math.abs(G))&&Math.abs(v-ee)<=Er*Math.max(1,Math.abs(v),Math.abs(ee))&&Math.abs(b-re)<=Er*Math.max(1,Math.abs(b),Math.abs(re))}var ele=il,tle=gF,nle=Object.freeze(Object.defineProperty({__proto__:null,create:vo,clone:rF,copy:Ese,fromValues:aF,set:Sse,identity:iF,transpose:Cse,invert:oF,adjoint:Tse,determinant:Ase,multiply:il,translate:jE,scale:sF,rotate:Ose,rotateX:GE,rotateY:HE,rotateZ:lF,fromTranslation:uF,fromScaling:Mse,fromRotation:Rse,fromXRotation:Pse,fromYRotation:Ise,fromZRotation:Lse,fromRotationTranslation:cF,fromQuat2:Nse,getTranslation:Fse,getScaling:fF,getRotation:Dse,fromRotationTranslationScale:Bse,fromRotationTranslationScaleOrigin:zse,fromQuat:Use,frustum:$se,perspectiveNO:dF,perspective:pF,perspectiveZO:Vse,perspectiveFromFieldOfView:jse,orthoNO:hF,ortho:Gse,orthoZO:Hse,lookAt:mF,targetTo:Wse,str:Yse,frob:Xse,add:Zse,subtract:gF,multiplyScalar:qse,multiplyScalarAndAdd:Kse,exactEquals:Qse,equals:Jse,mul:ele,sub:tle},Symbol.toStringTag,{value:"Module"}));function zf(){var e=new Ka(3);return Ka!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e}function rle(e){var t=new Ka(3);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function vF(e){var t=e[0],n=e[1],r=e[2];return Math.hypot(t,n,r)}function Ya(e,t,n){var r=new Ka(3);return r[0]=e,r[1]=t,r[2]=n,r}function ale(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function ile(e,t,n,r){return e[0]=t,e[1]=n,e[2]=r,e}function ole(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e}function bF(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e}function yF(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e[2]=t[2]*n[2],e}function xF(e,t,n){return e[0]=t[0]/n[0],e[1]=t[1]/n[1],e[2]=t[2]/n[2],e}function sle(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2]),e}function lle(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2]),e}function ule(e,t,n){return e[0]=Math.min(t[0],n[0]),e[1]=Math.min(t[1],n[1]),e[2]=Math.min(t[2],n[2]),e}function cle(e,t,n){return e[0]=Math.max(t[0],n[0]),e[1]=Math.max(t[1],n[1]),e[2]=Math.max(t[2],n[2]),e}function fle(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e[2]=Math.round(t[2]),e}function dle(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e}function ple(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e}function _F(e,t){var n=t[0]-e[0],r=t[1]-e[1],a=t[2]-e[2];return Math.hypot(n,r,a)}function wF(e,t){var n=t[0]-e[0],r=t[1]-e[1],a=t[2]-e[2];return n*n+r*r+a*a}function kF(e){var t=e[0],n=e[1],r=e[2];return t*t+n*n+r*r}function hle(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e}function mle(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e}function Uf(e,t){var n=t[0],r=t[1],a=t[2],i=n*n+r*r+a*a;return i>0&&(i=1/Math.sqrt(i)),e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e}function EF(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function SF(e,t,n){var r=t[0],a=t[1],i=t[2],o=n[0],s=n[1],l=n[2];return e[0]=a*l-i*s,e[1]=i*o-r*l,e[2]=r*s-a*o,e}function gle(e,t,n,r){var a=t[0],i=t[1],o=t[2];return e[0]=a+r*(n[0]-a),e[1]=i+r*(n[1]-i),e[2]=o+r*(n[2]-o),e}function vle(e,t,n,r,a,i){var o=i*i,s=o*(2*i-3)+1,l=o*(i-2)+i,u=o*(i-1),c=o*(3-2*i);return e[0]=t[0]*s+n[0]*l+r[0]*u+a[0]*c,e[1]=t[1]*s+n[1]*l+r[1]*u+a[1]*c,e[2]=t[2]*s+n[2]*l+r[2]*u+a[2]*c,e}function ble(e,t,n,r,a,i){var o=1-i,s=o*o,l=i*i,u=s*o,c=3*i*s,f=3*l*o,d=l*i;return e[0]=t[0]*u+n[0]*c+r[0]*f+a[0]*d,e[1]=t[1]*u+n[1]*c+r[1]*f+a[1]*d,e[2]=t[2]*u+n[2]*c+r[2]*f+a[2]*d,e}function yle(e,t){t=t||1;var n=m4()*2*Math.PI,r=m4()*2-1,a=Math.sqrt(1-r*r)*t;return e[0]=Math.cos(n)*a,e[1]=Math.sin(n)*a,e[2]=r*t,e}function ch(e,t,n){var r=t[0],a=t[1],i=t[2],o=n[3]*r+n[7]*a+n[11]*i+n[15];return o=o||1,e[0]=(n[0]*r+n[4]*a+n[8]*i+n[12])/o,e[1]=(n[1]*r+n[5]*a+n[9]*i+n[13])/o,e[2]=(n[2]*r+n[6]*a+n[10]*i+n[14])/o,e}function xle(e,t,n){var r=t[0],a=t[1],i=t[2];return e[0]=r*n[0]+a*n[3]+i*n[6],e[1]=r*n[1]+a*n[4]+i*n[7],e[2]=r*n[2]+a*n[5]+i*n[8],e}function _le(e,t,n){var r=n[0],a=n[1],i=n[2],o=n[3],s=t[0],l=t[1],u=t[2],c=a*u-i*l,f=i*s-r*u,d=r*l-a*s,p=a*d-i*f,h=i*c-r*d,g=r*f-a*c,v=o*2;return c*=v,f*=v,d*=v,p*=2,h*=2,g*=2,e[0]=s+c+p,e[1]=l+f+h,e[2]=u+d+g,e}function wle(e,t,n,r){var a=[],i=[];return a[0]=t[0]-n[0],a[1]=t[1]-n[1],a[2]=t[2]-n[2],i[0]=a[0],i[1]=a[1]*Math.cos(r)-a[2]*Math.sin(r),i[2]=a[1]*Math.sin(r)+a[2]*Math.cos(r),e[0]=i[0]+n[0],e[1]=i[1]+n[1],e[2]=i[2]+n[2],e}function kle(e,t,n,r){var a=[],i=[];return a[0]=t[0]-n[0],a[1]=t[1]-n[1],a[2]=t[2]-n[2],i[0]=a[2]*Math.sin(r)+a[0]*Math.cos(r),i[1]=a[1],i[2]=a[2]*Math.cos(r)-a[0]*Math.sin(r),e[0]=i[0]+n[0],e[1]=i[1]+n[1],e[2]=i[2]+n[2],e}function Ele(e,t,n,r){var a=[],i=[];return a[0]=t[0]-n[0],a[1]=t[1]-n[1],a[2]=t[2]-n[2],i[0]=a[0]*Math.cos(r)-a[1]*Math.sin(r),i[1]=a[0]*Math.sin(r)+a[1]*Math.cos(r),i[2]=a[2],e[0]=i[0]+n[0],e[1]=i[1]+n[1],e[2]=i[2]+n[2],e}function ak(e,t){var n=e[0],r=e[1],a=e[2],i=t[0],o=t[1],s=t[2],l=Math.sqrt(n*n+r*r+a*a),u=Math.sqrt(i*i+o*o+s*s),c=l*u,f=c&&EF(e,t)/c;return Math.acos(Math.min(Math.max(f,-1),1))}function Sle(e){return e[0]=0,e[1]=0,e[2]=0,e}function Cle(e){return"vec3("+e[0]+", "+e[1]+", "+e[2]+")"}function Tle(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]}function Ale(e,t){var n=e[0],r=e[1],a=e[2],i=t[0],o=t[1],s=t[2];return Math.abs(n-i)<=Er*Math.max(1,Math.abs(n),Math.abs(i))&&Math.abs(r-o)<=Er*Math.max(1,Math.abs(r),Math.abs(o))&&Math.abs(a-s)<=Er*Math.max(1,Math.abs(a),Math.abs(s))}var ik=bF,Ole=yF,Mle=xF,Rle=_F,Ple=wF,Ile=vF,Lle=kF,Nle=function(){var e=zf();return function(t,n,r,a,i,o){var s,l;for(n||(n=3),r||(r=0),a?l=Math.min(a*n+r,t.length):l=t.length,s=r;s<l;s+=n)e[0]=t[s],e[1]=t[s+1],e[2]=t[s+2],i(e,e,o),t[s]=e[0],t[s+1]=e[1],t[s+2]=e[2];return t}}(),ad=Object.freeze(Object.defineProperty({__proto__:null,create:zf,clone:rle,length:vF,fromValues:Ya,copy:ale,set:ile,add:ole,subtract:bF,multiply:yF,divide:xF,ceil:sle,floor:lle,min:ule,max:cle,round:fle,scale:dle,scaleAndAdd:ple,distance:_F,squaredDistance:wF,squaredLength:kF,negate:hle,inverse:mle,normalize:Uf,dot:EF,cross:SF,lerp:gle,hermite:vle,bezier:ble,random:yle,transformMat4:ch,transformMat3:xle,transformQuat:_le,rotateX:wle,rotateY:kle,rotateZ:Ele,angle:ak,zero:Sle,str:Cle,exactEquals:Tle,equals:Ale,sub:ik,mul:Ole,div:Mle,dist:Rle,sqrDist:Ple,len:Ile,sqrLen:Lle,forEach:Nle},Symbol.toStringTag,{value:"Module"}));function CF(){var e=new Ka(4);return Ka!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0,e[3]=0),e}function Fle(e,t,n,r){var a=new Ka(4);return a[0]=e,a[1]=t,a[2]=n,a[3]=r,a}function TF(e,t,n){var r=t[0],a=t[1],i=t[2],o=t[3];return e[0]=n[0]*r+n[4]*a+n[8]*i+n[12]*o,e[1]=n[1]*r+n[5]*a+n[9]*i+n[13]*o,e[2]=n[2]*r+n[6]*a+n[10]*i+n[14]*o,e[3]=n[3]*r+n[7]*a+n[11]*i+n[15]*o,e}(function(){var e=CF();return function(t,n,r,a,i,o){var s,l;for(n||(n=4),r||(r=0),a?l=Math.min(a*n+r,t.length):l=t.length,s=r;s<l;s+=n)e[0]=t[s],e[1]=t[s+1],e[2]=t[s+2],e[3]=t[s+3],i(e,e,o),t[s]=e[0],t[s+1]=e[1],t[s+2]=e[2],t[s+3]=e[3];return t}})();function ta(){var e=new Ka(2);return Ka!=Float32Array&&(e[0]=0,e[1]=0),e}function ok(e,t){var n=new Ka(2);return n[0]=e,n[1]=t,n}function Bp(e,t){return e[0]=t[0],e[1]=t[1],e}function Dle(e,t,n){return e[0]=t,e[1]=n,e}function ps(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e}function Kg(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e}function Oh(e,t){var n=t[0],r=t[1],a=n*n+r*r;return a>0&&(a=1/Math.sqrt(a)),e[0]=t[0]*a,e[1]=t[1]*a,e}function Qg(e,t){return e[0]*t[0]+e[1]*t[1]}var sk=Kg;(function(){var e=ta();return function(t,n,r,a,i,o){var s,l;for(n||(n=2),r||(r=0),a?l=Math.min(a*n+r,t.length):l=t.length,s=r;s<l;s+=n)e[0]=t[s],e[1]=t[s+1],i(e,e,o),t[s]=e[0],t[s+1]=e[1];return t}})();var g4,v4,Ble=(g4=sn(),g4(v4=function(){function e(){Ae(this,e),m(this,"viewport",void 0),m(this,"overridedViewProjectionMatrix",void 0),m(this,"jitteredViewProjectionMatrix",void 0),m(this,"jitteredProjectionMatrix",void 0),m(this,"viewMatrixInverse",void 0),m(this,"cameraPosition",void 0)}return Oe(e,[{key:"init",value:function(){}},{key:"update",value:function(n){this.viewport=n,this.viewMatrixInverse=vo(),oF(this.viewMatrixInverse,n.getViewMatrix()),this.cameraPosition=[this.viewMatrixInverse[12],this.viewMatrixInverse[13],this.viewMatrixInverse[14]]}},{key:"getProjectionMatrix",value:function(){return this.jitteredProjectionMatrix||this.viewport.getProjectionMatrix()}},{key:"getModelMatrix",value:function(){return this.viewport.getModelMatrix()}},{key:"getViewMatrix",value:function(){return this.viewport.getViewMatrix()}},{key:"getViewMatrixUncentered",value:function(){return this.viewport.getViewMatrixUncentered()}},{key:"getViewProjectionMatrixUncentered",value:function(){return this.viewport.getViewProjectionMatrixUncentered()}},{key:"getViewProjectionMatrix",value:function(){return this.overridedViewProjectionMatrix||this.jitteredViewProjectionMatrix||this.viewport.getViewProjectionMatrix()}},{key:"getZoom",value:function(){return this.viewport.getZoom()}},{key:"getZoomScale",value:function(){return this.viewport.getZoomScale()}},{key:"getCenter",value:function(){var n=this.viewport.getCenter(),r=Le(n,2),a=r[0],i=r[1];return[a,i]}},{key:"getFocalDistance",value:function(){return this.viewport.getFocalDistance()}},{key:"getCameraPosition",value:function(){return this.cameraPosition}},{key:"projectFlat",value:function(n,r){return this.viewport.projectFlat(n,r)}},{key:"setViewProjectionMatrix",value:function(n){this.overridedViewProjectionMatrix=n}},{key:"jitterProjectionMatrix",value:function(n,r){var a=uF(vo(),[n,r,0]);this.jitteredProjectionMatrix=il(vo(),a,this.viewport.getProjectionMatrix()),this.jitteredViewProjectionMatrix=il(vo(),this.jitteredProjectionMatrix,this.viewport.getViewMatrix())}},{key:"clearJitterProjectionMatrix",value:function(){this.jitteredProjectionMatrix=void 0,this.jitteredViewProjectionMatrix=void 0}}]),e}())||v4),b4,y4;function zle(e,t){var n=typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=Ule(e))||t&&e&&typeof e.length=="number"){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(u){throw u},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i=!0,o=!1,s;return{s:function(){n=n.call(e)},n:function(){var u=n.next();return i=u.done,u},e:function(u){o=!0,s=u},f:function(){try{!i&&n.return!=null&&n.return()}finally{if(o)throw s}}}}function Ule(e,t){if(!!e){if(typeof e=="string")return x4(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return x4(e,t)}}function x4(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var $le=(b4=sn(),b4(y4=function(){function e(){Ae(this,e),m(this,"container",void 0),m(this,"controlCorners",void 0),m(this,"controlContainer",void 0),m(this,"scene",void 0),m(this,"mapsService",void 0),m(this,"controls",[]),m(this,"unAddControls",[])}return Oe(e,[{key:"init",value:function(n,r){this.container=n.container,this.scene=r,this.mapsService=r.get(xe.IMapService),this.initControlPos()}},{key:"addControl",value:function(n,r){var a=r.get(xe.IMapService);a.map?(n.addTo(this.scene),this.controls.push(n)):this.unAddControls.push(n)}},{key:"getControlByName",value:function(n){return this.controls.find(function(r){return r.controlOption.name===n})}},{key:"removeControl",value:function(n){var r=this.controls.indexOf(n);return r>-1&&this.controls.splice(r,1),n.remove(),this}},{key:"addControls",value:function(){var n=this;this.unAddControls.forEach(function(r){r.addTo(n.scene),n.controls.push(r)}),this.unAddControls=[]}},{key:"destroy",value:function(){var n=zle(this.controls),r;try{for(n.s();!(r=n.n()).done;){var a=r.value;a.remove()}}catch(i){n.e(i)}finally{n.f()}this.controls=[],this.clearControlPos()}},{key:"initControlPos",value:function(){var n=this.controlCorners={},r="l7-",a=this.controlContainer=Tr("div",r+"control-container",this.container);function i(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],s=o.map(function(l){return r+l}).join(" ");n[o.join("")]=Tr("div",s,a)}i(["top","left"]),i(["top","right"]),i(["bottom","left"]),i(["bottom","right"]),i(["top","center"]),i(["right","center"]),i(["left","center"]),i(["bottom","center"])}},{key:"clearControlPos",value:function(){for(var n in this.controlCorners)this.controlCorners[n]&&vd(this.controlCorners[n]);this.controlContainer&&vd(this.controlContainer),delete this.controlCorners,delete this.controlContainer}}]),e}())||y4),_4,w4,Vle=(_4=sn(),_4(w4=function(){function e(){Ae(this,e),m(this,"container",void 0),m(this,"scene",void 0),m(this,"mapsService",void 0),m(this,"markers",[]),m(this,"markerLayers",[]),m(this,"unAddMarkers",[]),m(this,"unAddMarkerLayers",[])}return Oe(e,[{key:"addMarkerLayer",value:function(n){this.mapsService.map&&this.mapsService.getMarkerContainer()?(this.markerLayers.push(n),n.addTo(this.scene)):this.unAddMarkerLayers.push(n)}},{key:"removeMarkerLayer",value:function(n){n.destroy(),this.markerLayers.indexOf(n);var r=this.markerLayers.indexOf(n);r>-1&&this.markerLayers.splice(r,1)}},{key:"addMarker",value:function(n){this.mapsService.map&&this.mapsService.getMarkerContainer()?(this.markers.push(n),n.addTo(this.scene)):this.unAddMarkers.push(n)}},{key:"addMarkers",value:function(){var n=this;this.unAddMarkers.forEach(function(r){r.addTo(n.scene),n.markers.push(r)}),this.unAddMarkers=[]}},{key:"addMarkerLayers",value:function(){var n=this;this.unAddMarkerLayers.forEach(function(r){n.markerLayers.push(r),r.addTo(n.scene)}),this.unAddMarkers=[]}},{key:"removeMarker",value:function(n){n.remove(),this.markers.indexOf(n);var r=this.markers.indexOf(n);r>-1&&this.markers.splice(r,1)}},{key:"removeAllMarkers",value:function(){this.destroy()}},{key:"init",value:function(n){this.scene=n,this.mapsService=n.get(xe.IMapService)}},{key:"destroy",value:function(){this.markers.forEach(function(n){n.remove()}),this.markers=[],this.markerLayers.forEach(function(n){n.destroy()}),this.markerLayers=[]}},{key:"removeMakerLayerMarker",value:function(n){n.destroy()}}]),e}())||w4),k4,E4,jle=(k4=sn(),k4(E4=function(){function e(){Ae(this,e),m(this,"scene",void 0),m(this,"popup",void 0),m(this,"mapsService",void 0),m(this,"unAddPopup",void 0)}return Oe(e,[{key:"removePopup",value:function(n){n.remove()}},{key:"destroy",value:function(){this.popup.remove()}},{key:"addPopup",value:function(n){this.popup&&this.popup.remove(),this.mapsService.map&&this.mapsService.getMarkerContainer()?(n.addTo(this.scene),this.popup=n):this.unAddPopup=n}},{key:"initPopup",value:function(){this.unAddPopup&&(this.addPopup(this.unAddPopup),this.unAddPopup=null)}},{key:"init",value:function(n){this.scene=n,this.mapsService=n.get(xe.IMapService)}}]),e}())||E4),Gle=h9,Hle=g9,Wle=Hle(function(e,t,n){Gle(e,t,n)}),AF=Wle,Yle={MapToken:"\u60A8\u6B63\u5728\u4F7F\u7528 Demo\u6D4B\u8BD5\u5730\u56FEtoken\uFF0C\u5982\u679C\u751F\u4EA7\u73AF\u5883\u4E2D\u4F7F\u7528\u53BB\u5BF9\u5E94\u5730\u56FE\u8BF7\u6CE8\u518CToken",SDK:"\u8BF7\u786E\u8BA4\u5F15\u5165\u4E86mapbox-gl api\u4E14\u5728L7\u4E4B\u524D\u5F15\u5165"},S4,C4;function T4(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function $1(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?T4(Object(n),!0).forEach(function(r){m(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):T4(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var Xle={id:"map",logoPosition:"bottomleft",logoVisible:!0,antialias:!0,preserveDrawingBuffer:!1,pickBufferScale:1,fitBoundsOptions:{animate:!1}},Zle={colors:["rgb(103,0,31)","rgb(178,24,43)","rgb(214,96,77)","rgb(244,165,130)","rgb(253,219,199)","rgb(247,247,247)","rgb(209,229,240)","rgb(146,197,222)","rgb(67,147,195)","rgb(33,102,172)","rgb(5,48,97)"],size:10,shape:"circle",scales:{},shape2d:["circle","triangle","square","pentagon","hexagon","octogon","hexagram","rhombus","vesica"],shape3d:["cylinder","triangleColumn","hexagonColumn","squareColumn"],minZoom:-1,maxZoom:24,visible:!0,autoFit:!1,pickingBuffer:0,enablePropagation:!1,zIndex:0,blend:"normal",pickedFeatureID:-1,enableMultiPassRenderer:!1,enablePicking:!0,active:!1,activeColor:"#2f54eb",enableHighlight:!1,enableSelect:!1,highlightColor:"#2f54eb",activeMix:0,selectColor:"blue",selectMix:0,enableTAA:!1,jitterScale:1,enableLighting:!1,animateOption:{enable:!1,interval:.2,duration:4,trailLength:.15},forward:!0},qle=(S4=sn(),S4(C4=function(){function e(){Ae(this,e),m(this,"sceneConfigCache",{}),m(this,"layerConfigCache",{})}return Oe(e,[{key:"getSceneConfig",value:function(n){return this.sceneConfigCache[n]}},{key:"getSceneWarninfo",value:function(n){return Yle[n]}},{key:"setSceneConfig",value:function(n,r){this.sceneConfigCache[n]=$1($1({},Xle),r)}},{key:"getLayerConfig",value:function(n){return this.layerConfigCache[n]}},{key:"setLayerConfig",value:function(n,r,a){this.layerConfigCache[r]=$1({},AF({},this.sceneConfigCache[n],Zle,a))}},{key:"clean",value:function(){this.sceneConfigCache={},this.layerConfigCache={}}}]),e}())||C4);function an(e,t,n,r){!n||Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(r):void 0})}function rn(e,t,n,r,a){var i={};return Object.keys(r).forEach(function(o){i[o]=r[o]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce(function(o,s){return s(e,t,o)||o},i),a&&i.initializer!==void 0&&(i.value=i.initializer?i.initializer.call(a):void 0,i.initializer=void 0),i.initializer===void 0&&(Object.defineProperty(e,t,i),i=null),i}var V1=Math.PI/180,Kle=512,A4=4003e4;function O4(e){var t=e.latitude,n=t===void 0?0:t,r=e.zoom,a=r===void 0?0:r,i=e.scale,o=e.highPrecision,s=o===void 0?!1:o,l=e.flipY,u=l===void 0?!1:l;i=i!==void 0?i:Math.pow(2,a);var c={},f=Kle*i,d=Math.cos(n*V1),p=f/360,h=p/d,g=f/A4/d;if(c.pixelsPerMeter=[g,-g,g],c.metersPerPixel=[1/g,-1/g,1/g],c.pixelsPerDegree=[p,-h,g],c.degreesPerPixel=[1/p,-1/h,1/g],s){var v=V1*Math.tan(n*V1)/d,b=p*v/2,y=f/A4*v,x=y/h*g;c.pixelsPerDegree2=[0,-b,y],c.pixelsPerMeter2=[x,0,x],u&&(c.pixelsPerDegree2[1]=-c.pixelsPerDegree2[1],c.pixelsPerMeter2[1]=-c.pixelsPerMeter2[1])}return u&&(c.pixelsPerMeter[1]=-c.pixelsPerMeter[1],c.metersPerPixel[1]=-c.metersPerPixel[1],c.pixelsPerDegree[1]=-c.pixelsPerDegree[1],c.degreesPerPixel[1]=-c.degreesPerPixel[1]),c}var Xl;(function(e){e[e.LNGLAT=1]="LNGLAT",e[e.LNGLAT_OFFSET=2]="LNGLAT_OFFSET",e[e.VECTOR_TILE=3]="VECTOR_TILE",e[e.IDENTITY=4]="IDENTITY",e[e.P20=5]="P20",e[e.P20_OFFSET=6]="P20_OFFSET",e[e.METER_OFFSET=7]="METER_OFFSET",e[e.P20_2=8]="P20_2"})(Xl||(Xl={}));var Uu={CoordinateSystem:"u_CoordinateSystem",ViewportCenter:"u_ViewportCenter",ViewportCenterProjection:"u_ViewportCenterProjection",PixelsPerDegree:"u_PixelsPerDegree",PixelsPerDegree2:"u_PixelsPerDegree2",PixelsPerMeter:"u_PixelsPerMeter",Mvp:"u_Mvp"},M4,R4,P4,j1,I4,Qle=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0],Jle=(M4=sn(),R4=dn(xe.ICameraService),M4(P4=(j1=function(){function e(){Ae(this,e),m(this,"needRefresh",!0),an(this,"cameraService",I4,this),m(this,"coordinateSystem",void 0),m(this,"viewportCenter",void 0),m(this,"viewportCenterProjection",void 0),m(this,"pixelsPerDegree",void 0),m(this,"pixelsPerDegree2",void 0),m(this,"pixelsPerMeter",void 0)}return Oe(e,[{key:"refresh",value:function(n){var r=this.cameraService.getZoom(),a=this.cameraService.getZoomScale(),i=n||this.cameraService.getCenter(),o=O4({latitude:i[1],zoom:r}),s=o.pixelsPerMeter,l=o.pixelsPerDegree;this.viewportCenter=i,this.viewportCenterProjection=[0,0,0,0],this.pixelsPerMeter=s,this.pixelsPerDegree=l,this.pixelsPerDegree2=[0,0,0],this.coordinateSystem===Xl.LNGLAT||this.coordinateSystem===Xl.P20?this.cameraService.setViewProjectionMatrix(void 0):this.coordinateSystem===Xl.LNGLAT_OFFSET?this.calculateLnglatOffset(i,r):this.coordinateSystem===Xl.P20_OFFSET&&this.calculateLnglatOffset(i,r,a,!0),this.needRefresh=!1}},{key:"getCoordinateSystem",value:function(){return this.coordinateSystem}},{key:"setCoordinateSystem",value:function(n){this.coordinateSystem=n}},{key:"getViewportCenter",value:function(){return this.viewportCenter}},{key:"getViewportCenterProjection",value:function(){return this.viewportCenterProjection}},{key:"getPixelsPerDegree",value:function(){return this.pixelsPerDegree}},{key:"getPixelsPerDegree2",value:function(){return this.pixelsPerDegree2}},{key:"getPixelsPerMeter",value:function(){return this.pixelsPerMeter}},{key:"calculateLnglatOffset",value:function(n,r,a,i){var o=O4({latitude:n[1],zoom:r,scale:a,flipY:i,highPrecision:!0}),s=o.pixelsPerMeter,l=o.pixelsPerDegree,u=o.pixelsPerDegree2,c=this.cameraService.getViewMatrix(),f=this.cameraService.getProjectionMatrix(),d=il([],f,c),p=this.cameraService.projectFlat([Math.fround(n[0]),Math.fround(n[1])],Math.pow(2,r));this.viewportCenterProjection=TF([],[p[0],p[1],0,1],d),c=this.cameraService.getViewMatrixUncentered()||c,d=il([],f,c),d=il([],d,Qle),this.cameraService.setViewProjectionMatrix(d),this.pixelsPerMeter=s,this.pixelsPerDegree=l,this.pixelsPerDegree2=u}}]),e}(),I4=rn(j1.prototype,"cameraService",[R4],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),j1))||P4),OF={exports:{}};/*! Hammer.JS - v2.0.7 - 2016-04-22
 * http://hammerjs.github.io/
 *
 * Copyright (c) 2016 Jorik Tangelder;
 * Licensed under the MIT license */(function(e){(function(t,n,r,a){var i=typeof my!="undefined"&&!!my&&typeof my.showToast=="function"&&my.isFRM!==!0,o=typeof wx!="undefined"&&wx!==null&&(typeof wx.request!="undefined"||typeof wx.miniProgram!="undefined"),s=i||o,l=["","webkit","Moz","MS","ms","o"],u=s?"":n.createElement("div"),c="function",f=Math.round,d=Math.abs,p=Date.now;function h(N,U,Q){return setTimeout(C(N,Q),U)}function g(N,U,Q){return Array.isArray(N)?(v(N,Q[U],Q),!0):!1}function v(N,U,Q){var _e;if(!!N)if(N.forEach)N.forEach(U,Q);else if(N.length!==a)for(_e=0;_e<N.length;)U.call(Q,N[_e],_e,N),_e++;else for(_e in N)N.hasOwnProperty(_e)&&U.call(Q,N[_e],_e,N)}function b(N,U,Q){var _e="DEPRECATED METHOD: "+U+`
`+Q+` AT 
`;return function(){var qe=new Error("get-stack-trace"),Pt=qe&&qe.stack?qe.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",Sn=t.console&&(t.console.warn||t.console.log);return Sn&&Sn.call(t.console,_e,Pt),N.apply(this,arguments)}}var y;typeof Object.assign!="function"?y=function(U){if(U===a||U===null)throw new TypeError("Cannot convert undefined or null to object");for(var Q=Object(U),_e=1;_e<arguments.length;_e++){var qe=arguments[_e];if(qe!==a&&qe!==null)for(var Pt in qe)qe.hasOwnProperty(Pt)&&(Q[Pt]=qe[Pt])}return Q}:y=Object.assign;var x=b(function(U,Q,_e){for(var qe=Object.keys(Q),Pt=0;Pt<qe.length;)(!_e||_e&&U[qe[Pt]]===a)&&(U[qe[Pt]]=Q[qe[Pt]]),Pt++;return U},"extend","Use `assign`."),k=b(function(U,Q){return x(U,Q,!0)},"merge","Use `assign`.");function T(N,U,Q){var _e=U.prototype,qe;qe=N.prototype=Object.create(_e),qe.constructor=N,qe._super=_e,Q&&y(qe,Q)}function C(N,U){return function(){return N.apply(U,arguments)}}function I(N,U){return typeof N==c?N.apply(U&&U[0]||a,U):N}function P(N,U){return N===a?U:N}function j(N,U,Q){v(O(U),function(_e){N.addEventListener(_e,Q,!1)})}function A(N,U,Q){v(O(U),function(_e){N.removeEventListener(_e,Q,!1)})}function S(N,U){for(;N;){if(N==U)return!0;N=N.parentNode}return!1}function M(N,U){return N.indexOf(U)>-1}function O(N){return N.trim().split(/\s+/g)}function R(N,U,Q){if(N.indexOf&&!Q)return N.indexOf(U);for(var _e=0;_e<N.length;){if(Q&&N[_e][Q]==U||!Q&&N[_e]===U)return _e;_e++}return-1}function G(N){return Array.prototype.slice.call(N,0)}function ee(N,U,Q){for(var _e=[],qe=[],Pt=0;Pt<N.length;){var Sn=U?N[Pt][U]:N[Pt];R(qe,Sn)<0&&_e.push(N[Pt]),qe[Pt]=Sn,Pt++}return Q&&(U?_e=_e.sort(function(la,Oa){return la[U]>Oa[U]}):_e=_e.sort()),_e}function re(N,U){for(var Q,_e,qe=U[0].toUpperCase()+U.slice(1),Pt=0;Pt<l.length;){if(Q=l[Pt],_e=Q?Q+qe:U,_e in N)return _e;Pt++}return a}var X=1;function K(){return X++}function ae(N){var U=N.ownerDocument||N;return U.defaultView||U.parentWindow||t}var le=/mobile|tablet|ip(ad|hone|od)|android/i,ue="ontouchstart"in t,ge=re(t,"PointerEvent")!==a,be=ue&&le.test(navigator.userAgent),ze="touch",Lt="pen",Rt="mouse",qt="kinect",Me=25,Qe=1,et=2,ve=4,ft=8,kt=1,xt=2,Ct=4,ht=8,Gt=16,Ht=xt|Ct,yn=ht|Gt,or=Ht|yn,Qn=["x","y"],mr=["clientX","clientY"];function E(N,U){var Q=this;this.manager=N,this.callback=U,this.element=N.element,this.target=N.options.inputTarget,this.domHandler=function(_e){I(N.options.enable,[N])&&Q.handler(_e)},this.init()}E.prototype={handler:function(){},init:function(){this.evEl&&j(this.element,this.evEl,this.domHandler),this.evTarget&&j(this.target,this.evTarget,this.domHandler),this.evWin&&j(ae(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&A(this.element,this.evEl,this.domHandler),this.evTarget&&A(this.target,this.evTarget,this.domHandler),this.evWin&&A(ae(this.element),this.evWin,this.domHandler)}};function Ce(N){var U,Q=N.options.inputClass;return Q?U=Q:ge?U=Gr:be?U=Zi:ue?U=Zn:U=jr,new U(N,Fe)}function Fe(N,U,Q){var _e=Q.pointers.length,qe=Q.changedPointers.length,Pt=U&Qe&&_e-qe===0,Sn=U&(ve|ft)&&_e-qe===0;Q.isFirst=!!Pt,Q.isFinal=!!Sn,Pt&&(N.session={}),Q.eventType=U,ut(N,Q),N.emit("hammer.input",Q),N.recognize(Q),N.session.prevInput=Q}function ut(N,U){var Q=N.session,_e=U.pointers,qe=_e.length;Q.firstInput||(Q.firstInput=At(U)),qe>1&&!Q.firstMultiple?Q.firstMultiple=At(U):qe===1&&(Q.firstMultiple=!1);var Pt=Q.firstInput,Sn=Q.firstMultiple,Hr=Sn?Sn.center:Pt.center,la=U.center=Nt(_e);U.timeStamp=p(),U.deltaTime=U.timeStamp-Pt.timeStamp,U.angle=Pn(Hr,la),U.distance=$t(Hr,la),Et(Q,U),U.offsetDirection=Wt(U.deltaX,U.deltaY);var Oa=Ot(U.deltaTime,U.deltaX,U.deltaY);U.overallVelocityX=Oa.x,U.overallVelocityY=Oa.y,U.overallVelocity=d(Oa.x)>d(Oa.y)?Oa.x:Oa.y,U.scale=Sn?Sa(Sn.pointers,_e):1,U.rotation=Sn?Yn(Sn.pointers,_e):0,U.maxPointers=Q.prevInput?U.pointers.length>Q.prevInput.maxPointers?U.pointers.length:Q.prevInput.maxPointers:U.pointers.length,Jt(Q,U);var gi=N.element;S(U.srcEvent.target,gi)&&(gi=U.srcEvent.target),U.target=gi}function Et(N,U){var Q=U.center,_e=N.offsetDelta||{},qe=N.prevDelta||{},Pt=N.prevInput||{};(U.eventType===Qe||Pt.eventType===ve)&&(qe=N.prevDelta={x:Pt.deltaX||0,y:Pt.deltaY||0},_e=N.offsetDelta={x:Q.x,y:Q.y}),U.deltaX=qe.x+(Q.x-_e.x),U.deltaY=qe.y+(Q.y-_e.y)}function Jt(N,U){var Q=N.lastInterval||U,_e=U.timeStamp-Q.timeStamp,qe,Pt,Sn,Hr;if(U.eventType!=ft&&(_e>Me||Q.velocity===a)){var la=U.deltaX-Q.deltaX,Oa=U.deltaY-Q.deltaY,gi=Ot(_e,la,Oa);Pt=gi.x,Sn=gi.y,qe=d(gi.x)>d(gi.y)?gi.x:gi.y,Hr=Wt(la,Oa),N.lastInterval=U}else qe=Q.velocity,Pt=Q.velocityX,Sn=Q.velocityY,Hr=Q.direction;U.velocity=qe,U.velocityX=Pt,U.velocityY=Sn,U.direction=Hr}function At(N){for(var U=[],Q=0;Q<N.pointers.length;)U[Q]={clientX:f(N.pointers[Q].clientX),clientY:f(N.pointers[Q].clientY)},Q++;return{timeStamp:p(),pointers:U,center:Nt(U),deltaX:N.deltaX,deltaY:N.deltaY}}function Nt(N){var U=N.length;if(U===1)return{x:f(N[0].clientX),y:f(N[0].clientY)};for(var Q=0,_e=0,qe=0;qe<U;)Q+=N[qe].clientX,_e+=N[qe].clientY,qe++;return{x:f(Q/U),y:f(_e/U)}}function Ot(N,U,Q){return{x:U/N||0,y:Q/N||0}}function Wt(N,U){return N===U?kt:d(N)>=d(U)?N<0?xt:Ct:U<0?ht:Gt}function $t(N,U,Q){Q||(Q=Qn);var _e=U[Q[0]]-N[Q[0]],qe=U[Q[1]]-N[Q[1]];return Math.sqrt(_e*_e+qe*qe)}function Pn(N,U,Q){Q||(Q=Qn);var _e=U[Q[0]]-N[Q[0]],qe=U[Q[1]]-N[Q[1]];return Math.atan2(qe,_e)*180/Math.PI}function Yn(N,U){return Pn(U[1],U[0],mr)+Pn(N[1],N[0],mr)}function Sa(N,U){return $t(U[0],U[1],mr)/$t(N[0],N[1],mr)}var ti={mousedown:Qe,mousemove:et,mouseup:ve},Dr="mousedown",ni="mousemove mouseup";function jr(){this.evEl=Dr,this.evWin=ni,this.pressed=!1,E.apply(this,arguments)}T(jr,E,{handler:function(U){var Q=ti[U.type];Q&Qe&&U.button===0&&(this.pressed=!0),Q&et&&U.which!==1&&(Q=ve),this.pressed&&(Q&ve&&(this.pressed=!1),this.callback(this.manager,Q,{pointers:[U],changedPointers:[U],pointerType:Rt,srcEvent:U}))}});var mi={pointerdown:Qe,pointermove:et,pointerup:ve,pointercancel:ft,pointerout:ft},Ua={2:ze,3:Lt,4:Rt,5:qt},Ti="pointerdown",Ca="pointermove pointerup pointercancel";!s&&t.MSPointerEvent&&!t.PointerEvent&&(Ti="MSPointerDown",Ca="MSPointerMove MSPointerUp MSPointerCancel");function Gr(){this.evEl=Ti,this.evWin=Ca,E.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}T(Gr,E,{handler:function(U){var Q=this.store,_e=!1,qe=U.type.toLowerCase().replace("ms",""),Pt=mi[qe],Sn=Ua[U.pointerType]||U.pointerType,Hr=Sn==ze,la=R(Q,U.pointerId,"pointerId");Pt&Qe&&(U.button===0||Hr)?la<0&&(Q.push(U),la=Q.length-1):Pt&(ve|ft)&&(_e=!0),!(la<0)&&(Q[la]=U,this.callback(this.manager,Pt,{pointers:Q,changedPointers:[U],pointerType:Sn,srcEvent:U}),_e&&Q.splice(la,1))}});var en={touchstart:Qe,touchmove:et,touchend:ve,touchcancel:ft},pn="touchstart",hn="touchstart touchmove touchend touchcancel";function Br(){this.evTarget=pn,this.evWin=hn,this.started=!1,E.apply(this,arguments)}T(Br,E,{handler:function(U){var Q=en[U.type];if(Q===Qe&&(this.started=!0),!!this.started){var _e=Ta.call(this,U,Q);Q&(ve|ft)&&_e[0].length-_e[1].length===0&&(this.started=!1),this.callback(this.manager,Q,{pointers:_e[0],changedPointers:_e[1],pointerType:ze,srcEvent:U})}}});function Ta(N,U){var Q=G(N.touches),_e=G(N.changedTouches);return U&(ve|ft)&&(Q=ee(Q.concat(_e),"identifier",!0)),[Q,_e]}var Oo={touchstart:Qe,touchmove:et,touchend:ve,touchcancel:ft},Mo="touchstart touchmove touchend touchcancel";function Zi(){this.evTarget=Mo,this.targetIds={},E.apply(this,arguments)}T(Zi,E,{handler:function(U){var Q=Oo[U.type],_e=ar.call(this,U,Q);!_e||this.callback(this.manager,Q,{pointers:_e[0],changedPointers:_e[1],pointerType:ze,srcEvent:U})}});function ar(N,U){var Q=G(N.touches),_e=this.targetIds;if(U&(Qe|et)&&Q.length===1)return _e[Q[0].identifier]=!0,[Q,Q];var qe,Pt,Sn=G(N.changedTouches),Hr=[],la=this.target;if(Pt=Q.filter(function(Oa){return S(Oa.target,la)}),U===Qe)for(qe=0;qe<Pt.length;)_e[Pt[qe].identifier]=!0,qe++;for(qe=0;qe<Sn.length;)_e[Sn[qe].identifier]&&Hr.push(Sn[qe]),U&(ve|ft)&&delete _e[Sn[qe].identifier],qe++;if(!!Hr.length)return[ee(Pt.concat(Hr),"identifier",!0),Hr]}var mn=2500,nn=25;function Zn(){E.apply(this,arguments);var N=C(this.handler,this);this.touch=new Zi(this.manager,N),this.mouse=new jr(this.manager,N),this.primaryTouch=null,this.lastTouches=[]}T(Zn,E,{handler:function(U,Q,_e){var qe=_e.pointerType==ze,Pt=_e.pointerType==Rt;if(!(Pt&&_e.sourceCapabilities&&_e.sourceCapabilities.firesTouchEvents)){if(qe)Dn.call(this,Q,_e);else if(Pt&&oa.call(this,_e))return;this.callback(U,Q,_e)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});function Dn(N,U){N&Qe?(this.primaryTouch=U.changedPointers[0].identifier,gn.call(this,U)):N&(ve|ft)&&gn.call(this,U)}function gn(N){var U=N.changedPointers[0];if(U.identifier===this.primaryTouch){var Q={x:U.clientX,y:U.clientY};this.lastTouches.push(Q);var _e=this.lastTouches,qe=function(){var Pt=_e.indexOf(Q);Pt>-1&&_e.splice(Pt,1)};setTimeout(qe,mn)}}function oa(N){for(var U=N.srcEvent.clientX,Q=N.srcEvent.clientY,_e=0;_e<this.lastTouches.length;_e++){var qe=this.lastTouches[_e],Pt=Math.abs(U-qe.x),Sn=Math.abs(Q-qe.y);if(Pt<=nn&&Sn<=nn)return!0}return!1}var sa=s?a:re(u.style,"touchAction"),ri=sa!==a,qi="compute",En="auto",on="manipulation",Bn="none",zr="pan-x",Aa="pan-y",ai=_l();function Ro(N,U){this.manager=N,this.set(U)}Ro.prototype={set:function(N){N==qi&&(N=this.compute()),ri&&this.manager.element.style&&ai[N]&&(this.manager.element.style[sa]=N),this.actions=N.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var N=[];return v(this.manager.recognizers,function(U){I(U.options.enable,[U])&&(N=N.concat(U.getTouchAction()))}),Tu(N.join(" "))},preventDefaults:function(N){var U=N.srcEvent,Q=N.offsetDirection;if(this.manager.session.prevented){U.preventDefault();return}var _e=this.actions,qe=M(_e,Bn)&&!ai[Bn],Pt=M(_e,Aa)&&!ai[Aa],Sn=M(_e,zr)&&!ai[zr];if(qe){var Hr=N.pointers.length===1,la=N.distance<2,Oa=N.deltaTime<250;if(Hr&&la&&Oa)return}if(!(Sn&&Pt)&&(qe||Pt&&Q&Ht||Sn&&Q&yn))return this.preventSrc(U)},preventSrc:function(N){this.manager.session.prevented=!0,N.preventDefault()}};function Tu(N){if(M(N,Bn))return Bn;var U=M(N,zr),Q=M(N,Aa);return U&&Q?Bn:U||Q?U?zr:Aa:M(N,on)?on:En}function _l(){if(!ri)return!1;var N={};if(s)return N;var U=t.CSS&&t.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(Q){N[Q]=U?t.CSS.supports("touch-action",Q):!0}),N}var Po=1,va=2,Ki=4,An=8,xn=An,zn=16,qn=32;function gr(N){this.options=y({},this.defaults,N||{}),this.id=K(),this.manager=null,this.options.enable=P(this.options.enable,!0),this.state=Po,this.simultaneous={},this.requireFail=[]}gr.prototype={defaults:{},set:function(N){return y(this.options,N),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(N){if(g(N,"recognizeWith",this))return this;var U=this.simultaneous;return N=wl(N,this),U[N.id]||(U[N.id]=N,N.recognizeWith(this)),this},dropRecognizeWith:function(N){return g(N,"dropRecognizeWith",this)?this:(N=wl(N,this),delete this.simultaneous[N.id],this)},requireFailure:function(N){if(g(N,"requireFailure",this))return this;var U=this.requireFail;return N=wl(N,this),R(U,N)===-1&&(U.push(N),N.requireFailure(this)),this},dropRequireFailure:function(N){if(g(N,"dropRequireFailure",this))return this;N=wl(N,this);var U=R(this.requireFail,N);return U>-1&&this.requireFail.splice(U,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(N){return!!this.simultaneous[N.id]},emit:function(N){var U=this,Q=this.state;function _e(qe){U.manager.emit(qe,N)}Q<An&&_e(U.options.event+Qi(Q)),_e(U.options.event),N.additionalEvent&&_e(N.additionalEvent),Q>=An&&_e(U.options.event+Qi(Q))},tryEmit:function(N){if(this.canEmit())return this.emit(N);this.state=qn},canEmit:function(){for(var N=0;N<this.requireFail.length;){if(!(this.requireFail[N].state&(qn|Po)))return!1;N++}return!0},recognize:function(N){var U=y({},N);if(!I(this.options.enable,[this,U])){this.reset(),this.state=qn;return}this.state&(xn|zn|qn)&&(this.state=Po),this.state=this.process(U),this.state&(va|Ki|An|zn)&&this.tryEmit(U)},process:function(N){},getTouchAction:function(){},reset:function(){}};function Qi(N){return N&zn?"cancel":N&An?"end":N&Ki?"move":N&va?"start":""}function rs(N){return N==Gt?"down":N==ht?"up":N==xt?"left":N==Ct?"right":""}function wl(N,U){var Q=U.manager;return Q?Q.get(N):N}function Ai(){gr.apply(this,arguments)}T(Ai,gr,{defaults:{pointers:1},attrTest:function(N){var U=this.options.pointers;return U===0||N.pointers.length===U},process:function(N){var U=this.state,Q=N.eventType,_e=U&(va|Ki),qe=this.attrTest(N);return _e&&(Q&ft||!qe)?U|zn:_e||qe?Q&ve?U|An:U&va?U|Ki:va:qn}});function Bc(){Ai.apply(this,arguments),this.pX=null,this.pY=null}T(Bc,Ai,{defaults:{event:"pan",threshold:10,pointers:1,direction:or},getTouchAction:function(){var N=this.options.direction,U=[];return N&Ht&&U.push(Aa),N&yn&&U.push(zr),U},directionTest:function(N){var U=this.options,Q=!0,_e=N.distance,qe=N.direction,Pt=N.deltaX,Sn=N.deltaY;return qe&U.direction||(U.direction&Ht?(qe=Pt===0?kt:Pt<0?xt:Ct,Q=Pt!=this.pX,_e=Math.abs(N.deltaX)):(qe=Sn===0?kt:Sn<0?ht:Gt,Q=Sn!=this.pY,_e=Math.abs(N.deltaY))),N.direction=qe,Q&&_e>U.threshold&&qe&U.direction},attrTest:function(N){return Ai.prototype.attrTest.call(this,N)&&(this.state&va||!(this.state&va)&&this.directionTest(N))},emit:function(N){this.pX=N.deltaX,this.pY=N.deltaY;var U=rs(N.direction);U&&(N.additionalEvent=this.options.event+U),this._super.emit.call(this,N)}});function ep(){Ai.apply(this,arguments)}T(ep,Ai,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[Bn]},attrTest:function(N){return this._super.attrTest.call(this,N)&&(Math.abs(N.scale-1)>this.options.threshold||this.state&va)},emit:function(N){if(N.scale!==1){var U=N.scale<1?"in":"out";N.additionalEvent=this.options.event+U}this._super.emit.call(this,N)}});function kl(){gr.apply(this,arguments),this._timer=null,this._input=null}T(kl,gr,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[En]},process:function(N){var U=this.options,Q=N.pointers.length===U.pointers,_e=N.distance<U.threshold,qe=N.deltaTime>U.time;if(this._input=N,!_e||!Q||N.eventType&(ve|ft)&&!qe)this.reset();else if(N.eventType&Qe)this.reset(),this._timer=h(function(){this.state=xn,this.tryEmit()},U.time,this);else if(N.eventType&ve)return xn;return qn},reset:function(){clearTimeout(this._timer)},emit:function(N){this.state===xn&&(N&&N.eventType&ve?this.manager.emit(this.options.event+"up",N):(this._input.timeStamp=p(),this.manager.emit(this.options.event,this._input)))}});function zc(){Ai.apply(this,arguments)}T(zc,Ai,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[Bn]},attrTest:function(N){return this._super.attrTest.call(this,N)&&(Math.abs(N.rotation)>this.options.threshold||this.state&va)}});function tp(){Ai.apply(this,arguments)}T(tp,Ai,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:Ht|yn,pointers:1},getTouchAction:function(){return Bc.prototype.getTouchAction.call(this)},attrTest:function(N){var U=this.options.direction,Q;return U&(Ht|yn)?Q=N.overallVelocity:U&Ht?Q=N.overallVelocityX:U&yn&&(Q=N.overallVelocityY),this._super.attrTest.call(this,N)&&U&N.offsetDirection&&N.distance>this.options.threshold&&N.maxPointers==this.options.pointers&&d(Q)>this.options.velocity&&N.eventType&ve},emit:function(N){var U=rs(N.offsetDirection);U&&this.manager.emit(this.options.event+U,N),this.manager.emit(this.options.event,N)}});function Uc(){gr.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}T(Uc,gr,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[on]},process:function(N){var U=this.options,Q=N.pointers.length===U.pointers,_e=N.distance<U.threshold,qe=N.deltaTime<U.time;if(this.reset(),N.eventType&Qe&&this.count===0)return this.failTimeout();if(_e&&qe&&Q){if(N.eventType!=ve)return this.failTimeout();var Pt=this.pTime?N.timeStamp-this.pTime<U.interval:!0,Sn=!this.pCenter||$t(this.pCenter,N.center)<U.posThreshold;this.pTime=N.timeStamp,this.pCenter=N.center,!Sn||!Pt?this.count=1:this.count+=1,this._input=N;var Hr=this.count%U.taps;if(Hr===0)return this.hasRequireFailures()?(this._timer=h(function(){this.state=xn,this.tryEmit()},U.interval,this),va):xn}return qn},failTimeout:function(){return this._timer=h(function(){this.state=qn},this.options.interval,this),qn},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==xn&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}});function ii(N,U){return U=U||{},U.recognizers=P(U.recognizers,ii.defaults.preset),new Au(N,U)}ii.VERSION="2.0.7",ii.defaults={domEvents:!1,touchAction:qi,enable:!0,inputTarget:null,inputClass:null,preset:[[zc,{enable:!1}],[ep,{enable:!1},["rotate"]],[tp,{direction:Ht}],[Bc,{direction:Ht},["swipe"]],[Uc],[Uc,{event:"doubletap",taps:2},["tap"]],[kl]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};var np=1,rp=2;function Au(N,U){this.options=y({},ii.defaults,U||{}),this.options.inputTarget=this.options.inputTarget||N,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=N,this.input=Ce(this),this.touchAction=new Ro(this,this.options.touchAction),o0(this,!0),v(this.options.recognizers,function(Q){var _e=this.add(new Q[0](Q[1]));Q[2]&&_e.recognizeWith(Q[2]),Q[3]&&_e.requireFailure(Q[3])},this)}Au.prototype={set:function(N){return y(this.options,N),N.touchAction&&this.touchAction.update(),N.inputTarget&&(this.input.destroy(),this.input.target=N.inputTarget,this.input.init()),this},stop:function(N){this.session.stopped=N?rp:np},recognize:function(N){var U=this.session;if(!U.stopped){this.touchAction.preventDefaults(N);var Q,_e=this.recognizers,qe=U.curRecognizer;(!qe||qe&&qe.state&xn)&&(qe=U.curRecognizer=null);for(var Pt=0;Pt<_e.length;)Q=_e[Pt],U.stopped!==rp&&(!qe||Q==qe||Q.canRecognizeWith(qe))?Q.recognize(N):Q.reset(),!qe&&Q.state&(va|Ki|An)&&(qe=U.curRecognizer=Q),Pt++}},get:function(N){if(N instanceof gr)return N;for(var U=this.recognizers,Q=0;Q<U.length;Q++)if(U[Q].options.event==N)return U[Q];return null},add:function(N){if(g(N,"add",this))return this;var U=this.get(N.options.event);return U&&this.remove(U),this.recognizers.push(N),N.manager=this,this.touchAction.update(),N},remove:function(N){if(g(N,"remove",this))return this;if(N=this.get(N),N){var U=this.recognizers,Q=R(U,N);Q!==-1&&(U.splice(Q,1),this.touchAction.update())}return this},on:function(N,U){if(N!==a&&U!==a){var Q=this.handlers;return v(O(N),function(_e){Q[_e]=Q[_e]||[],Q[_e].push(U)}),this}},off:function(N,U){if(N!==a){var Q=this.handlers;return v(O(N),function(_e){U?Q[_e]&&Q[_e].splice(R(Q[_e],U),1):delete Q[_e]}),this}},emit:function(N,U){this.options.domEvents&&tx(N,U);var Q=this.handlers[N]&&this.handlers[N].slice();if(!(!Q||!Q.length)){U.type=N,U.preventDefault=function(){U.srcEvent.preventDefault()};for(var _e=0;_e<Q.length;)Q[_e](U),_e++}},destroy:function(){this.element&&o0(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}};function o0(N,U){var Q=N.element;if(!!Q.style){var _e;v(N.options.cssProps,function(qe,Pt){_e=re(Q.style,Pt),U?(N.oldCssProps[_e]=Q.style[_e],Q.style[_e]=qe):Q.style[_e]=N.oldCssProps[_e]||""}),U||(N.oldCssProps={})}}function tx(N,U){if(!s){var Q=n.createEvent("Event");Q.initEvent(N,!0,!0),Q.gesture=U,U.target.dispatchEvent(Q)}}if(!s){y(ii,{INPUT_START:Qe,INPUT_MOVE:et,INPUT_END:ve,INPUT_CANCEL:ft,STATE_POSSIBLE:Po,STATE_BEGAN:va,STATE_CHANGED:Ki,STATE_ENDED:An,STATE_RECOGNIZED:xn,STATE_CANCELLED:zn,STATE_FAILED:qn,DIRECTION_NONE:kt,DIRECTION_LEFT:xt,DIRECTION_RIGHT:Ct,DIRECTION_UP:ht,DIRECTION_DOWN:Gt,DIRECTION_HORIZONTAL:Ht,DIRECTION_VERTICAL:yn,DIRECTION_ALL:or,Manager:Au,Input:E,TouchAction:Ro,TouchInput:Zi,MouseInput:jr,PointerEventInput:Gr,TouchMouseInput:Zn,SingleTouchInput:Br,Recognizer:gr,AttrRecognizer:Ai,Tap:Uc,Pan:Bc,Swipe:tp,Pinch:ep,Rotate:zc,Press:kl,on:j,off:A,each:v,merge:k,extend:x,assign:y,inherit:T,bindFn:C,prefixed:re});var nx=typeof window!="undefined"?window:typeof self!="undefined"?self:{};nx.Hammer=ii,typeof a=="function"&&a.amd?a(function(){return ii}):e.exports?e.exports=ii:t[r]=ii}})(typeof window!="undefined"?window:{console:null,MSPointerEvent:null,PointerEvent:null,CSS:null},document,"Hammer")})(OF);var zp=OF.exports,La;(function(e){e.Hover="hover",e.Click="click",e.Select="select",e.Active="active",e.Drag="drag"})(La||(La={}));var L4,N4,F4,G1,D4;function eue(e){var t=tue();return function(){var r=ke(e),a;if(t){var i=ke(this).constructor;a=Reflect.construct(r,arguments,i)}else a=r.apply(this,arguments);return It(this,a)}}function tue(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var nue={panstart:"dragstart",panmove:"dragging",panend:"dragend",pancancel:"dragcancel"},rue=(L4=sn(),N4=dn(xe.IMapService),L4(F4=(G1=function(e){Tt(n,e);var t=eue(n);function n(){var r;Ae(this,n);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return r=t.call.apply(t,[this].concat(i)),m(D(r),"indragging",!1),an(D(r),"mapService",D4,D(r)),m(D(r),"hammertime",void 0),m(D(r),"lastClickTime",0),m(D(r),"lastClickXY",[-1,-1]),m(D(r),"clickTimer",void 0),m(D(r),"$containter",void 0),m(D(r),"onDrag",function(s){var l=r.interactionEvent(s);l.type=nue[l.type],l.type==="dragging"?r.indragging=!0:r.indragging=!1,r.emit(La.Drag,l)}),m(D(r),"onHammer",function(s){s.srcEvent.stopPropagation();var l=r.interactionEvent(s);r.emit(La.Hover,l)}),m(D(r),"onTouch",function(s){var l=s.touches[0];r.onHover({x:l.pageX,y:l.pageY,type:"touch"})}),m(D(r),"onHover",function(s){var l=s.clientX,u=s.clientY,c=l,f=u,d=s.type,p=r.mapService.getMapContainer();if(p)if(Bi)c=c-p.left-0,f=f-p.top-0;else{var h=p.getBoundingClientRect(),g=h.top,v=h.left;c=c-v-p.clientLeft,f=f-g-p.clientTop}var b=r.mapService.containerToLngLat([c,f]);if(d==="click"){if(!Bi&&"ontouchstart"in document.documentElement)return;r.isDoubleTap(c,f,b);return}if(d==="touch"){r.isDoubleTap(c,f,b);return}d!=="click"&&d!=="dblclick"&&r.emit(La.Hover,{x:c,y:f,lngLat:b,type:d,target:s})}),r}return Oe(n,[{key:"init",value:function(){this.addEventListenerOnMap(),this.$containter=this.mapService.getMapContainer()}},{key:"destroy",value:function(){this.hammertime&&this.hammertime.destroy(),this.removeEventListenerOnMap(),this.off(La.Hover)}},{key:"triggerHover",value:function(a){var i=a.x,o=a.y;this.emit(La.Hover,{x:i,y:o})}},{key:"triggerSelect",value:function(a){this.emit(La.Select,{featureId:a})}},{key:"triggerActive",value:function(a){this.emit(La.Active,{featureId:a})}},{key:"handleMiniEvent",value:function(a){this.onHover({clientX:a.touches[0].pageX,clientY:a.touches[0].pageY,type:"touch"})}},{key:"addEventListenerOnMap",value:function(){var a=this.mapService.getMapContainer();if(a)if(Bi)tr.document.addEventListener("touchstart",this.handleMiniEvent.bind(this));else{var i=new zp.Manager(a);i.add(new zp.Tap({event:"dblclick",taps:2})),i.add(new zp.Tap({event:"click"})),i.add(new zp.Pan({threshold:0,pointers:0})),i.add(new zp.Press({})),i.on("dblclick click",this.onHammer),i.on("panstart panmove panend pancancel",this.onDrag),a.addEventListener("mousemove",this.onHover),a.addEventListener("mousedown",this.onHover,!0),a.addEventListener("mouseup",this.onHover),a.addEventListener("contextmenu",this.onHover),this.hammertime=i}}},{key:"removeEventListenerOnMap",value:function(){if(Bi)tr.document.removeEventListener("touchstart",this.handleMiniEvent.bind(this));else{var a=this.mapService.getMapContainer();a&&(a.removeEventListener("mousemove",this.onHover),this.hammertime.off("dblclick click",this.onHammer),this.hammertime.off("panstart panmove panend pancancel",this.onDrag),a.removeEventListener("mousedown",this.onHover),a.removeEventListener("mouseup",this.onHover),a.removeEventListener("contextmenu",this.onHover))}}},{key:"interactionEvent",value:function(a){var i=a.type,o=a.pointerType,s,l;o==="touch"?(l=Math.floor(a.pointers[0].clientY),s=Math.floor(a.pointers[0].clientX)):(l=Math.floor(a.srcEvent.y),s=Math.floor(a.srcEvent.x));var u=this.mapService.getMapContainer();if(u){var c=u.getBoundingClientRect(),f=c.top,d=c.left;s-=d,l-=f}var p=this.mapService.containerToLngLat([s,l]);return{x:s,y:l,lngLat:p,type:i,target:a.srcEvent}}},{key:"isDoubleTap",value:function(a,i,o){var s=this,l=new Date().getTime(),u="click";l-this.lastClickTime<400&&Math.abs(this.lastClickXY[0]-a)<10&&Math.abs(this.lastClickXY[1]-i)<10?(this.lastClickTime=0,this.lastClickXY=[-1,-1],this.clickTimer&&clearTimeout(this.clickTimer),u="dblclick",this.emit(La.Hover,{x:a,y:i,lngLat:o,type:u})):(this.lastClickTime=l,this.lastClickXY=[a,i],this.clickTimer=setTimeout(function(){u="click",s.emit(La.Hover,{x:a,y:i,lngLat:o,type:u})},400))}}]),n}(EE),D4=rn(G1.prototype,"mapService",[N4],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),G1))||F4),aue=0;function iue(e){if(Bi)return null;var t=e;if(typeof e=="string"&&(t=document.getElementById(e)),t){var n=document.createElement("div");return n.style.cssText+=`
      position: absolute;
      z-index:2;
      height: 100%;
      width: 100%;
      pointer-events: none;
    `,n.id="l7-scene-".concat(aue++),n.classList.add("l7-scene"),t.appendChild(n),n}return null}function oue(e){var t,n,r=!0;return e==null||(t=e.target)===null||t===void 0||(n=t.path)===null||n===void 0||n.map(function(a){if(a!=null&&a.classList){var i;a==null||(i=a.classList)===null||i===void 0||i.forEach(function(o){(o==="l7-marker"||o==="l7-popup")&&(r=!1)})}}),r}var V;(function(e){e[e.DEPTH_BUFFER_BIT=256]="DEPTH_BUFFER_BIT",e[e.STENCIL_BUFFER_BIT=1024]="STENCIL_BUFFER_BIT",e[e.COLOR_BUFFER_BIT=16384]="COLOR_BUFFER_BIT",e[e.POINTS=0]="POINTS",e[e.LINES=1]="LINES",e[e.LINE_LOOP=2]="LINE_LOOP",e[e.LINE_STRIP=3]="LINE_STRIP",e[e.TRIANGLES=4]="TRIANGLES",e[e.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",e[e.TRIANGLE_FAN=6]="TRIANGLE_FAN",e[e.ZERO=0]="ZERO",e[e.ONE=1]="ONE",e[e.SRC_COLOR=768]="SRC_COLOR",e[e.ONE_MINUS_SRC_COLOR=769]="ONE_MINUS_SRC_COLOR",e[e.SRC_ALPHA=770]="SRC_ALPHA",e[e.ONE_MINUS_SRC_ALPHA=771]="ONE_MINUS_SRC_ALPHA",e[e.DST_ALPHA=772]="DST_ALPHA",e[e.ONE_MINUS_DST_ALPHA=773]="ONE_MINUS_DST_ALPHA",e[e.DST_COLOR=774]="DST_COLOR",e[e.ONE_MINUS_DST_COLOR=775]="ONE_MINUS_DST_COLOR",e[e.SRC_ALPHA_SATURATE=776]="SRC_ALPHA_SATURATE",e[e.FUNC_ADD=32774]="FUNC_ADD",e[e.BLEND_EQUATION=32777]="BLEND_EQUATION",e[e.BLEND_EQUATION_RGB=32777]="BLEND_EQUATION_RGB",e[e.BLEND_EQUATION_ALPHA=34877]="BLEND_EQUATION_ALPHA",e[e.FUNC_SUBTRACT=32778]="FUNC_SUBTRACT",e[e.FUNC_REVERSE_SUBTRACT=32779]="FUNC_REVERSE_SUBTRACT",e[e.MAX_EXT=32776]="MAX_EXT",e[e.MIN_EXT=32775]="MIN_EXT",e[e.BLEND_DST_RGB=32968]="BLEND_DST_RGB",e[e.BLEND_SRC_RGB=32969]="BLEND_SRC_RGB",e[e.BLEND_DST_ALPHA=32970]="BLEND_DST_ALPHA",e[e.BLEND_SRC_ALPHA=32971]="BLEND_SRC_ALPHA",e[e.CONSTANT_COLOR=32769]="CONSTANT_COLOR",e[e.ONE_MINUS_CONSTANT_COLOR=32770]="ONE_MINUS_CONSTANT_COLOR",e[e.CONSTANT_ALPHA=32771]="CONSTANT_ALPHA",e[e.ONE_MINUS_CONSTANT_ALPHA=32772]="ONE_MINUS_CONSTANT_ALPHA",e[e.BLEND_COLOR=32773]="BLEND_COLOR",e[e.ARRAY_BUFFER=34962]="ARRAY_BUFFER",e[e.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",e[e.ARRAY_BUFFER_BINDING=34964]="ARRAY_BUFFER_BINDING",e[e.ELEMENT_ARRAY_BUFFER_BINDING=34965]="ELEMENT_ARRAY_BUFFER_BINDING",e[e.STREAM_DRAW=35040]="STREAM_DRAW",e[e.STATIC_DRAW=35044]="STATIC_DRAW",e[e.DYNAMIC_DRAW=35048]="DYNAMIC_DRAW",e[e.BUFFER_SIZE=34660]="BUFFER_SIZE",e[e.BUFFER_USAGE=34661]="BUFFER_USAGE",e[e.CURRENT_VERTEX_ATTRIB=34342]="CURRENT_VERTEX_ATTRIB",e[e.FRONT=1028]="FRONT",e[e.BACK=1029]="BACK",e[e.FRONT_AND_BACK=1032]="FRONT_AND_BACK",e[e.CULL_FACE=2884]="CULL_FACE",e[e.BLEND=3042]="BLEND",e[e.DITHER=3024]="DITHER",e[e.STENCIL_TEST=2960]="STENCIL_TEST",e[e.DEPTH_TEST=2929]="DEPTH_TEST",e[e.SCISSOR_TEST=3089]="SCISSOR_TEST",e[e.POLYGON_OFFSET_FILL=32823]="POLYGON_OFFSET_FILL",e[e.SAMPLE_ALPHA_TO_COVERAGE=32926]="SAMPLE_ALPHA_TO_COVERAGE",e[e.SAMPLE_COVERAGE=32928]="SAMPLE_COVERAGE",e[e.NO_ERROR=0]="NO_ERROR",e[e.INVALID_ENUM=1280]="INVALID_ENUM",e[e.INVALID_VALUE=1281]="INVALID_VALUE",e[e.INVALID_OPERATION=1282]="INVALID_OPERATION",e[e.OUT_OF_MEMORY=1285]="OUT_OF_MEMORY",e[e.CW=2304]="CW",e[e.CCW=2305]="CCW",e[e.LINE_WIDTH=2849]="LINE_WIDTH",e[e.ALIASED_POINT_SIZE_RANGE=33901]="ALIASED_POINT_SIZE_RANGE",e[e.ALIASED_LINE_WIDTH_RANGE=33902]="ALIASED_LINE_WIDTH_RANGE",e[e.CULL_FACE_MODE=2885]="CULL_FACE_MODE",e[e.FRONT_FACE=2886]="FRONT_FACE",e[e.DEPTH_RANGE=2928]="DEPTH_RANGE",e[e.DEPTH_WRITEMASK=2930]="DEPTH_WRITEMASK",e[e.DEPTH_CLEAR_VALUE=2931]="DEPTH_CLEAR_VALUE",e[e.DEPTH_FUNC=2932]="DEPTH_FUNC",e[e.STENCIL_CLEAR_VALUE=2961]="STENCIL_CLEAR_VALUE",e[e.STENCIL_FUNC=2962]="STENCIL_FUNC",e[e.STENCIL_FAIL=2964]="STENCIL_FAIL",e[e.STENCIL_PASS_DEPTH_FAIL=2965]="STENCIL_PASS_DEPTH_FAIL",e[e.STENCIL_PASS_DEPTH_PASS=2966]="STENCIL_PASS_DEPTH_PASS",e[e.STENCIL_REF=2967]="STENCIL_REF",e[e.STENCIL_VALUE_MASK=2963]="STENCIL_VALUE_MASK",e[e.STENCIL_WRITEMASK=2968]="STENCIL_WRITEMASK",e[e.STENCIL_BACK_FUNC=34816]="STENCIL_BACK_FUNC",e[e.STENCIL_BACK_FAIL=34817]="STENCIL_BACK_FAIL",e[e.STENCIL_BACK_PASS_DEPTH_FAIL=34818]="STENCIL_BACK_PASS_DEPTH_FAIL",e[e.STENCIL_BACK_PASS_DEPTH_PASS=34819]="STENCIL_BACK_PASS_DEPTH_PASS",e[e.STENCIL_BACK_REF=36003]="STENCIL_BACK_REF",e[e.STENCIL_BACK_VALUE_MASK=36004]="STENCIL_BACK_VALUE_MASK",e[e.STENCIL_BACK_WRITEMASK=36005]="STENCIL_BACK_WRITEMASK",e[e.VIEWPORT=2978]="VIEWPORT",e[e.SCISSOR_BOX=3088]="SCISSOR_BOX",e[e.COLOR_CLEAR_VALUE=3106]="COLOR_CLEAR_VALUE",e[e.COLOR_WRITEMASK=3107]="COLOR_WRITEMASK",e[e.UNPACK_ALIGNMENT=3317]="UNPACK_ALIGNMENT",e[e.PACK_ALIGNMENT=3333]="PACK_ALIGNMENT",e[e.MAX_TEXTURE_SIZE=3379]="MAX_TEXTURE_SIZE",e[e.MAX_VIEWPORT_DIMS=3386]="MAX_VIEWPORT_DIMS",e[e.SUBPIXEL_BITS=3408]="SUBPIXEL_BITS",e[e.RED_BITS=3410]="RED_BITS",e[e.GREEN_BITS=3411]="GREEN_BITS",e[e.BLUE_BITS=3412]="BLUE_BITS",e[e.ALPHA_BITS=3413]="ALPHA_BITS",e[e.DEPTH_BITS=3414]="DEPTH_BITS",e[e.STENCIL_BITS=3415]="STENCIL_BITS",e[e.POLYGON_OFFSET_UNITS=10752]="POLYGON_OFFSET_UNITS",e[e.POLYGON_OFFSET_FACTOR=32824]="POLYGON_OFFSET_FACTOR",e[e.TEXTURE_BINDING_2D=32873]="TEXTURE_BINDING_2D",e[e.SAMPLE_BUFFERS=32936]="SAMPLE_BUFFERS",e[e.SAMPLES=32937]="SAMPLES",e[e.SAMPLE_COVERAGE_VALUE=32938]="SAMPLE_COVERAGE_VALUE",e[e.SAMPLE_COVERAGE_INVERT=32939]="SAMPLE_COVERAGE_INVERT",e[e.COMPRESSED_TEXTURE_FORMATS=34467]="COMPRESSED_TEXTURE_FORMATS",e[e.DONT_CARE=4352]="DONT_CARE",e[e.FASTEST=4353]="FASTEST",e[e.NICEST=4354]="NICEST",e[e.GENERATE_MIPMAP_HINT=33170]="GENERATE_MIPMAP_HINT",e[e.BYTE=5120]="BYTE",e[e.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",e[e.SHORT=5122]="SHORT",e[e.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",e[e.INT=5124]="INT",e[e.UNSIGNED_INT=5125]="UNSIGNED_INT",e[e.FLOAT=5126]="FLOAT",e[e.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",e[e.ALPHA=6406]="ALPHA",e[e.RGB=6407]="RGB",e[e.RGBA=6408]="RGBA",e[e.LUMINANCE=6409]="LUMINANCE",e[e.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",e[e.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",e[e.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",e[e.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",e[e.FRAGMENT_SHADER=35632]="FRAGMENT_SHADER",e[e.VERTEX_SHADER=35633]="VERTEX_SHADER",e[e.MAX_VERTEX_ATTRIBS=34921]="MAX_VERTEX_ATTRIBS",e[e.MAX_VERTEX_UNIFORM_VECTORS=36347]="MAX_VERTEX_UNIFORM_VECTORS",e[e.MAX_VARYING_VECTORS=36348]="MAX_VARYING_VECTORS",e[e.MAX_COMBINED_TEXTURE_IMAGE_UNITS=35661]="MAX_COMBINED_TEXTURE_IMAGE_UNITS",e[e.MAX_VERTEX_TEXTURE_IMAGE_UNITS=35660]="MAX_VERTEX_TEXTURE_IMAGE_UNITS",e[e.MAX_TEXTURE_IMAGE_UNITS=34930]="MAX_TEXTURE_IMAGE_UNITS",e[e.MAX_FRAGMENT_UNIFORM_VECTORS=36349]="MAX_FRAGMENT_UNIFORM_VECTORS",e[e.SHADER_TYPE=35663]="SHADER_TYPE",e[e.DELETE_STATUS=35712]="DELETE_STATUS",e[e.LINK_STATUS=35714]="LINK_STATUS",e[e.VALIDATE_STATUS=35715]="VALIDATE_STATUS",e[e.ATTACHED_SHADERS=35717]="ATTACHED_SHADERS",e[e.ACTIVE_UNIFORMS=35718]="ACTIVE_UNIFORMS",e[e.ACTIVE_ATTRIBUTES=35721]="ACTIVE_ATTRIBUTES",e[e.SHADING_LANGUAGE_VERSION=35724]="SHADING_LANGUAGE_VERSION",e[e.CURRENT_PROGRAM=35725]="CURRENT_PROGRAM",e[e.NEVER=512]="NEVER",e[e.LESS=513]="LESS",e[e.EQUAL=514]="EQUAL",e[e.LEQUAL=515]="LEQUAL",e[e.GREATER=516]="GREATER",e[e.NOTEQUAL=517]="NOTEQUAL",e[e.GEQUAL=518]="GEQUAL",e[e.ALWAYS=519]="ALWAYS",e[e.KEEP=7680]="KEEP",e[e.REPLACE=7681]="REPLACE",e[e.INCR=7682]="INCR",e[e.DECR=7683]="DECR",e[e.INVERT=5386]="INVERT",e[e.INCR_WRAP=34055]="INCR_WRAP",e[e.DECR_WRAP=34056]="DECR_WRAP",e[e.VENDOR=7936]="VENDOR",e[e.RENDERER=7937]="RENDERER",e[e.VERSION=7938]="VERSION",e[e.NEAREST=9728]="NEAREST",e[e.LINEAR=9729]="LINEAR",e[e.NEAREST_MIPMAP_NEAREST=9984]="NEAREST_MIPMAP_NEAREST",e[e.LINEAR_MIPMAP_NEAREST=9985]="LINEAR_MIPMAP_NEAREST",e[e.NEAREST_MIPMAP_LINEAR=9986]="NEAREST_MIPMAP_LINEAR",e[e.LINEAR_MIPMAP_LINEAR=9987]="LINEAR_MIPMAP_LINEAR",e[e.TEXTURE_MAG_FILTER=10240]="TEXTURE_MAG_FILTER",e[e.TEXTURE_MIN_FILTER=10241]="TEXTURE_MIN_FILTER",e[e.TEXTURE_WRAP_S=10242]="TEXTURE_WRAP_S",e[e.TEXTURE_WRAP_T=10243]="TEXTURE_WRAP_T",e[e.TEXTURE_2D=3553]="TEXTURE_2D",e[e.TEXTURE=5890]="TEXTURE",e[e.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",e[e.TEXTURE_BINDING_CUBE_MAP=34068]="TEXTURE_BINDING_CUBE_MAP",e[e.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",e[e.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",e[e.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",e[e.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",e[e.MAX_CUBE_MAP_TEXTURE_SIZE=34076]="MAX_CUBE_MAP_TEXTURE_SIZE",e[e.TEXTURE0=33984]="TEXTURE0",e[e.TEXTURE1=33985]="TEXTURE1",e[e.TEXTURE2=33986]="TEXTURE2",e[e.TEXTURE3=33987]="TEXTURE3",e[e.TEXTURE4=33988]="TEXTURE4",e[e.TEXTURE5=33989]="TEXTURE5",e[e.TEXTURE6=33990]="TEXTURE6",e[e.TEXTURE7=33991]="TEXTURE7",e[e.TEXTURE8=33992]="TEXTURE8",e[e.TEXTURE9=33993]="TEXTURE9",e[e.TEXTURE10=33994]="TEXTURE10",e[e.TEXTURE11=33995]="TEXTURE11",e[e.TEXTURE12=33996]="TEXTURE12",e[e.TEXTURE13=33997]="TEXTURE13",e[e.TEXTURE14=33998]="TEXTURE14",e[e.TEXTURE15=33999]="TEXTURE15",e[e.TEXTURE16=34e3]="TEXTURE16",e[e.TEXTURE17=34001]="TEXTURE17",e[e.TEXTURE18=34002]="TEXTURE18",e[e.TEXTURE19=34003]="TEXTURE19",e[e.TEXTURE20=34004]="TEXTURE20",e[e.TEXTURE21=34005]="TEXTURE21",e[e.TEXTURE22=34006]="TEXTURE22",e[e.TEXTURE23=34007]="TEXTURE23",e[e.TEXTURE24=34008]="TEXTURE24",e[e.TEXTURE25=34009]="TEXTURE25",e[e.TEXTURE26=34010]="TEXTURE26",e[e.TEXTURE27=34011]="TEXTURE27",e[e.TEXTURE28=34012]="TEXTURE28",e[e.TEXTURE29=34013]="TEXTURE29",e[e.TEXTURE30=34014]="TEXTURE30",e[e.TEXTURE31=34015]="TEXTURE31",e[e.ACTIVE_TEXTURE=34016]="ACTIVE_TEXTURE",e[e.REPEAT=10497]="REPEAT",e[e.CLAMP_TO_EDGE=33071]="CLAMP_TO_EDGE",e[e.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",e[e.FLOAT_VEC2=35664]="FLOAT_VEC2",e[e.FLOAT_VEC3=35665]="FLOAT_VEC3",e[e.FLOAT_VEC4=35666]="FLOAT_VEC4",e[e.INT_VEC2=35667]="INT_VEC2",e[e.INT_VEC3=35668]="INT_VEC3",e[e.INT_VEC4=35669]="INT_VEC4",e[e.BOOL=35670]="BOOL",e[e.BOOL_VEC2=35671]="BOOL_VEC2",e[e.BOOL_VEC3=35672]="BOOL_VEC3",e[e.BOOL_VEC4=35673]="BOOL_VEC4",e[e.FLOAT_MAT2=35674]="FLOAT_MAT2",e[e.FLOAT_MAT3=35675]="FLOAT_MAT3",e[e.FLOAT_MAT4=35676]="FLOAT_MAT4",e[e.SAMPLER_2D=35678]="SAMPLER_2D",e[e.SAMPLER_CUBE=35680]="SAMPLER_CUBE",e[e.VERTEX_ATTRIB_ARRAY_ENABLED=34338]="VERTEX_ATTRIB_ARRAY_ENABLED",e[e.VERTEX_ATTRIB_ARRAY_SIZE=34339]="VERTEX_ATTRIB_ARRAY_SIZE",e[e.VERTEX_ATTRIB_ARRAY_STRIDE=34340]="VERTEX_ATTRIB_ARRAY_STRIDE",e[e.VERTEX_ATTRIB_ARRAY_TYPE=34341]="VERTEX_ATTRIB_ARRAY_TYPE",e[e.VERTEX_ATTRIB_ARRAY_NORMALIZED=34922]="VERTEX_ATTRIB_ARRAY_NORMALIZED",e[e.VERTEX_ATTRIB_ARRAY_POINTER=34373]="VERTEX_ATTRIB_ARRAY_POINTER",e[e.VERTEX_ATTRIB_ARRAY_BUFFER_BINDING=34975]="VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",e[e.COMPILE_STATUS=35713]="COMPILE_STATUS",e[e.LOW_FLOAT=36336]="LOW_FLOAT",e[e.MEDIUM_FLOAT=36337]="MEDIUM_FLOAT",e[e.HIGH_FLOAT=36338]="HIGH_FLOAT",e[e.LOW_INT=36339]="LOW_INT",e[e.MEDIUM_INT=36340]="MEDIUM_INT",e[e.HIGH_INT=36341]="HIGH_INT",e[e.FRAMEBUFFER=36160]="FRAMEBUFFER",e[e.RENDERBUFFER=36161]="RENDERBUFFER",e[e.RGBA4=32854]="RGBA4",e[e.RGB5_A1=32855]="RGB5_A1",e[e.RGB565=36194]="RGB565",e[e.DEPTH_COMPONENT16=33189]="DEPTH_COMPONENT16",e[e.STENCIL_INDEX=6401]="STENCIL_INDEX",e[e.STENCIL_INDEX8=36168]="STENCIL_INDEX8",e[e.DEPTH_STENCIL=34041]="DEPTH_STENCIL",e[e.RENDERBUFFER_WIDTH=36162]="RENDERBUFFER_WIDTH",e[e.RENDERBUFFER_HEIGHT=36163]="RENDERBUFFER_HEIGHT",e[e.RENDERBUFFER_INTERNAL_FORMAT=36164]="RENDERBUFFER_INTERNAL_FORMAT",e[e.RENDERBUFFER_RED_SIZE=36176]="RENDERBUFFER_RED_SIZE",e[e.RENDERBUFFER_GREEN_SIZE=36177]="RENDERBUFFER_GREEN_SIZE",e[e.RENDERBUFFER_BLUE_SIZE=36178]="RENDERBUFFER_BLUE_SIZE",e[e.RENDERBUFFER_ALPHA_SIZE=36179]="RENDERBUFFER_ALPHA_SIZE",e[e.RENDERBUFFER_DEPTH_SIZE=36180]="RENDERBUFFER_DEPTH_SIZE",e[e.RENDERBUFFER_STENCIL_SIZE=36181]="RENDERBUFFER_STENCIL_SIZE",e[e.FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE=36048]="FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",e[e.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME=36049]="FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",e[e.FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL=36050]="FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",e[e.FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE=36051]="FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",e[e.COLOR_ATTACHMENT0=36064]="COLOR_ATTACHMENT0",e[e.DEPTH_ATTACHMENT=36096]="DEPTH_ATTACHMENT",e[e.STENCIL_ATTACHMENT=36128]="STENCIL_ATTACHMENT",e[e.DEPTH_STENCIL_ATTACHMENT=33306]="DEPTH_STENCIL_ATTACHMENT",e[e.NONE=0]="NONE",e[e.FRAMEBUFFER_COMPLETE=36053]="FRAMEBUFFER_COMPLETE",e[e.FRAMEBUFFER_INCOMPLETE_ATTACHMENT=36054]="FRAMEBUFFER_INCOMPLETE_ATTACHMENT",e[e.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT=36055]="FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",e[e.FRAMEBUFFER_INCOMPLETE_DIMENSIONS=36057]="FRAMEBUFFER_INCOMPLETE_DIMENSIONS",e[e.FRAMEBUFFER_UNSUPPORTED=36061]="FRAMEBUFFER_UNSUPPORTED",e[e.FRAMEBUFFER_BINDING=36006]="FRAMEBUFFER_BINDING",e[e.RENDERBUFFER_BINDING=36007]="RENDERBUFFER_BINDING",e[e.MAX_RENDERBUFFER_SIZE=34024]="MAX_RENDERBUFFER_SIZE",e[e.INVALID_FRAMEBUFFER_OPERATION=1286]="INVALID_FRAMEBUFFER_OPERATION",e[e.UNPACK_FLIP_Y_WEBGL=37440]="UNPACK_FLIP_Y_WEBGL",e[e.UNPACK_PREMULTIPLY_ALPHA_WEBGL=37441]="UNPACK_PREMULTIPLY_ALPHA_WEBGL",e[e.CONTEXT_LOST_WEBGL=37442]="CONTEXT_LOST_WEBGL",e[e.UNPACK_COLORSPACE_CONVERSION_WEBGL=37443]="UNPACK_COLORSPACE_CONVERSION_WEBGL",e[e.BROWSER_DEFAULT_WEBGL=37444]="BROWSER_DEFAULT_WEBGL"})(V||(V={}));var B4,z4,U4,$4,V4,j4,G4,$u,H4,W4,Y4,X4,Z4;function q4(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function ig(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?q4(Object(n),!0).forEach(function(r){m(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):q4(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var sue=(B4=sn(),z4=dn(xe.IMapService),U4=dn(xe.IRendererService),$4=dn(xe.IGlobalConfigService),V4=dn(xe.IInteractionService),j4=dn(xe.ILayerService),B4(G4=($u=function(){function e(){var t=this;Ae(this,e),m(this,"pickedColors",void 0),m(this,"pickedTileLayers",[]),an(this,"mapService",H4,this),an(this,"rendererService",W4,this),an(this,"configService",Y4,this),an(this,"interactionService",X4,this),an(this,"layerService",Z4,this),m(this,"pickingFBO",void 0),m(this,"width",0),m(this,"height",0),m(this,"alreadyInPicking",!1),m(this,"pickBufferScale",1),m(this,"pickedLayers",[]),m(this,"pickFromPickingFBO",function(n,r){var a,i=r.x,o=r.y,s=r.lngLat,l=r.type,u=r.target,c=!1,f=t.rendererService;f.getViewportSize;var d=f.readPixels,p=f.getContainer,h=t.getContainerSize(p()),g=h.width,v=h.height;g*=Pr,v*=Pr;var b=n.getLayerConfig(),y=b.enableHighlight,x=b.enableSelect,k=i*Pr,T=o*Pr;if(k>g-1*Pr||k<0||T>v-1*Pr||T<0)return!1;var C;if(C=d({x:Math.floor(k/t.pickBufferScale),y:Math.floor((v-(o+1)*Pr)/t.pickBufferScale),width:1,height:1,data:new Uint8Array(1*1*4),framebuffer:t.pickingFBO}),t.pickedColors=C,C[0]!==0||C[1]!==0||C[2]!==0){var I=xs(C),P=n.getSource().getFeatureById(I);I!==n.getCurrentPickId()&&l==="mousemove"&&(l="mouseenter");var j={x:i,y:o,type:l,lngLat:s,featureId:I,feature:P,target:u};P&&(c=!0,n.setCurrentPickId(I),t.pickedLayers=[n],t.triggerHoverOnLayer(n,j))}else{var A={x:i,y:o,lngLat:s,type:n.getCurrentPickId()!==null&&l==="mousemove"?"mouseout":"un"+l,featureId:null,target:u,feature:null};t.triggerHoverOnLayer(n,ig(ig({},A),{},{type:"unpick"})),t.triggerHoverOnLayer(n,A),n.setCurrentPickId(null),t.pickedLayers=[]}if(y&&t.highlightPickedFeature(n,C),x&&l==="click"&&((a=C)===null||a===void 0?void 0:a.toString())!==[0,0,0,0].toString()){var S=xs(C);n.getCurrentSelectedId()===null||S!==n.getCurrentSelectedId()?(t.selectFeature(n,C),n.setCurrentSelectedId(S)):(t.selectFeature(n,new Uint8Array([0,0,0,0])),n.setCurrentSelectedId(null)),n.isVector||t.layerService.getLayers().filter(function(M){return M.tileLayer}).map(function(M){M.tileLayer.clearPickState()})}return c})}return Oe(e,[{key:"init",value:function(n){var r=this.rendererService,a=r.createTexture2D,i=r.createFramebuffer;r.getViewportSize;var o=r.getContainer,s=this.getContainerSize(o()),l=s.width,u=s.height;l*=Pr,u*=Pr,this.pickBufferScale=this.configService.getSceneConfig(n).pickBufferScale||1,this.pickingFBO=i({color:a({width:Math.round(l/this.pickBufferScale),height:Math.round(u/this.pickBufferScale),wrapS:V.CLAMP_TO_EDGE,wrapT:V.CLAMP_TO_EDGE})}),this.interactionService.on(La.Hover,this.pickingAllLayer.bind(this))}},{key:"boxPickLayer",value:function(){var t=lr(vn.mark(function r(a,i,o){var s=this,l,u,c;return vn.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:l=this.rendererService,u=l.useFramebuffer,c=l.clear,l.getContainer,this.resizePickingFBO(),u(this.pickingFBO,function(){c({framebuffer:s.pickingFBO,color:[0,0,0,0],stencil:0,depth:1}),a.hooks.beforePickingEncode.call(),a.renderModels(),a.hooks.afterPickingEncode.call();var p=s.pickBox(a,i);o(p)});case 3:case"end":return d.stop()}},r,this)}));function n(r,a,i){return t.apply(this,arguments)}return n}()},{key:"pickBox",value:function(n,r){var a=this,i=r.map(function(A){var S=A<0?0:A;return Math.floor(S*Pr/a.pickBufferScale)}),o=Le(i,4),s=o[0],l=o[1],u=o[2],c=o[3],f=this.rendererService;f.getViewportSize;var d=f.readPixels,p=f.getContainer,h=this.getContainerSize(p()),g=h.width,v=h.height;if(g*=Pr,v*=Pr,s>(g-1)*Pr/this.pickBufferScale||u<0||l>(v-1)*Pr/this.pickBufferScale||c<0)return[];var b,y=Math.min(g/this.pickBufferScale,u)-s,x=Math.min(v/this.pickBufferScale,c)-l;b=d({x:s,y:Math.floor(v/this.pickBufferScale-(c+1)),width:y,height:x,data:new Uint8Array(y*x*4),framebuffer:this.pickingFBO});for(var k=[],T={},C=0;C<b.length/4;C=C+1){var I=b.slice(C*4,C*4+4),P=xs(I);if(P!==-1&&!T[P]){var j=n.getSource().getFeatureById(P);k.push(ig(ig({},j),{},{pickedFeatureIdx:P})),T[P]=!0}}return k}},{key:"handleCursor",value:function(n,r){var a=n.getLayerConfig(),i=a.cursor,o=i===void 0?"":i,s=a.cursorEnabled;if(s){var l=this.mapService.version,u=l==="GAODE2.x"?this.mapService.getMapContainer():this.mapService.getMarkerContainer(),c=u==null?void 0:u.style.getPropertyValue("cursor");r==="unmousemove"&&c!==""?u==null||u.style.setProperty("cursor",""):r==="mousemove"&&(u==null||u.style.setProperty("cursor",o))}}},{key:"destroy",value:function(){this.pickingFBO.destroy(),this.pickingFBO=null}},{key:"getContainerSize",value:function(n){return n.getContext?{width:n.width/Pr,height:n.height/Pr}:n.getBoundingClientRect()}},{key:"pickingAllLayer",value:function(){var t=lr(vn.mark(function r(a){return vn.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(!(this.alreadyInPicking||this.layerService.alreadyInRendering||this.interactionService.indragging||!this.layerService.getShaderPickStat())){o.next=2;break}return o.abrupt("return");case 2:return this.alreadyInPicking=!0,o.next=5,this.pickingLayers(a);case 5:this.layerService.renderLayers(),this.alreadyInPicking=!1;case 7:case"end":return o.stop()}},r,this)}));function n(r){return t.apply(this,arguments)}return n}()},{key:"resizePickingFBO",value:function(){var n=this.rendererService.getContainer,r=this.getContainerSize(n()),a=r.width,i=r.height;a*=Pr,i*=Pr,(this.width!==a||this.height!==i)&&(this.pickingFBO.resize({width:Math.round(a/this.pickBufferScale),height:Math.round(i/this.pickBufferScale)}),this.width=a,this.height=i)}},{key:"pickingLayers",value:function(){var t=lr(vn.mark(function r(a){var i=this,o,s,l;return vn.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:o=this.rendererService,o.getViewportSize,s=o.useFramebuffer,l=o.clear,o.getContainer,this.resizePickingFBO(),s(this.pickingFBO,function(){var f=i.layerService.getRenderList();f.filter(function(d){return d.needPick(a.type)}).reverse().some(function(d){if(l({framebuffer:i.pickingFBO,color:[0,0,0,0],stencil:0,depth:1}),i.pickedLayers.filter(function(h){return!h.isVector}).map(function(h){i.selectFeature(h,new Uint8Array([0,0,0,0]))}),i.pickedTileLayers.map(function(h){var g;return(g=h.tileLayer)===null||g===void 0?void 0:g.clearPick(a.type)}),d.tileLayer)return d.tileLayer.pickLayers(a);d.hooks.beforePickingEncode.call(),d.masks.length>0&&d.masks.map(function(h){h.hooks.beforeRenderData.call(),h.hooks.beforeRender.call(),h.render(),h.hooks.afterRender.call()}),d.renderModels(!0),d.hooks.afterPickingEncode.call();var p=i.pickFromPickingFBO(d,a);return i.layerService.pickedLayerId=p?+d.id:-1,p&&!d.getLayerConfig().enablePropagation})});case 3:case"end":return c.stop()}},r,this)}));function n(r){return t.apply(this,arguments)}return n}()},{key:"triggerHoverOnLayer",value:function(n,r){oue(r)&&(this.handleCursor(n,r.type),n.emit(r.type,r))}},{key:"highlightPickedFeature",value:function(n,r){var a=Le(r,3),i=a[0],o=a[1],s=a[2];n.hooks.beforeHighlight.call([i,o,s])}},{key:"selectFeature",value:function(n,r){var a=Le(r,3),i=a[0],o=a[1],s=a[2];n.hooks.beforeSelect.call([i,o,s])}}]),e}(),H4=rn($u.prototype,"mapService",[z4],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),W4=rn($u.prototype,"rendererService",[U4],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Y4=rn($u.prototype,"configService",[$4],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),X4=rn($u.prototype,"interactionService",[V4],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Z4=rn($u.prototype,"layerService",[j4],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),$u))||G4),lue=function(){function e(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;Ae(this,e),m(this,"autoStart",void 0),m(this,"startTime",0),m(this,"oldTime",0),m(this,"running",!1),m(this,"elapsedTime",0),this.autoStart=t}return Oe(e,[{key:"start",value:function(){this.startTime=(typeof performance=="undefined"?Date:performance).now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}},{key:"stop",value:function(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}},{key:"getElapsedTime",value:function(){return this.getDelta(),this.elapsedTime}},{key:"getDelta",value:function(){var n=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){var r=(typeof performance=="undefined"?Date:performance).now();n=(r-this.oldTime)/1e3,this.oldTime=r,this.elapsedTime+=n}return n}}]),e}(),K4,Q4,J4,e5,t5,Up,n5,r5,a5;function uue(e,t){var n=typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=cue(e))||t&&e&&typeof e.length=="number"){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(u){throw u},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i=!0,o=!1,s;return{s:function(){n=n.call(e)},n:function(){var u=n.next();return i=u.done,u},e:function(u){o=!0,s=u},f:function(){try{!i&&n.return!=null&&n.return()}finally{if(o)throw s}}}}function cue(e,t){if(!!e){if(typeof e=="string")return i5(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i5(e,t)}}function i5(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var fue=(K4=sn(),Q4=dn(xe.IRendererService),J4=dn(xe.IMapService),e5=dn(xe.IGlobalConfigService),K4(t5=(Up=function(){function e(){Ae(this,e),m(this,"pickedLayerId",-1),m(this,"clock",new lue),m(this,"alreadyInRendering",!1),m(this,"layers",[]),m(this,"layerList",[]),m(this,"layerRenderID",void 0),m(this,"sceneInited",!1),m(this,"animateInstanceCount",0),m(this,"shaderPicking",!0),m(this,"enableRender",!0),an(this,"renderService",n5,this),an(this,"mapService",r5,this),an(this,"configService",a5,this)}return Oe(e,[{key:"add",value:function(n){this.sceneInited&&n.init(),this.layers.push(n),this.updateLayerRenderList()}},{key:"addMask",value:function(n){this.sceneInited&&n.init()}},{key:"initLayers",value:function(){this.sceneInited=!0,this.layers.forEach(function(n){n.inited||n.init()}),this.updateLayerRenderList()}},{key:"getSceneInited",value:function(){return this.sceneInited}},{key:"getRenderList",value:function(){return this.layerList}},{key:"getLayers",value:function(){return this.layers}},{key:"getLayer",value:function(n){return this.layers.find(function(r){return r.id===n})}},{key:"getLayerByName",value:function(n){return this.layers.find(function(r){return r.name===n})}},{key:"cleanRemove",value:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,a=this.layers.indexOf(n);a>-1&&this.layers.splice(a,1),r&&(this.updateLayerRenderList(),this.renderLayers())}},{key:"remove",value:function(n,r){if(r){var a=r.layerChildren.indexOf(n);a>-1&&r.layerChildren.splice(a,1)}else{var i=this.layers.indexOf(n);i>-1&&this.layers.splice(i,1)}this.updateLayerRenderList(),n.destroy(),this.renderLayers()}},{key:"removeAllLayers",value:function(){this.destroy()}},{key:"setEnableRender",value:function(n){this.enableRender=n}},{key:"renderLayers",value:function(){var t=lr(vn.mark(function r(){var a,i,o;return vn.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if(!(this.alreadyInRendering||!this.enableRender)){l.next=2;break}return l.abrupt("return");case 2:this.alreadyInRendering=!0,this.clear(),a=uue(this.layerList),l.prev=5,a.s();case 7:if((i=a.n()).done){l.next=21;break}if(o=i.value,o.hooks.beforeRenderData.call(),o.hooks.beforeRender.call(),o.masks.length>0&&(this.renderService.clear({stencil:0,depth:1,framebuffer:null}),o.masks.map(function(u){u.hooks.beforeRenderData.call(),u.hooks.beforeRender.call(),u.render(),u.hooks.afterRender.call()})),!o.getLayerConfig().enableMultiPassRenderer){l.next=17;break}return l.next=15,o.renderMultiPass();case 15:l.next=18;break;case 17:o.render();case 18:o.hooks.afterRender.call();case 19:l.next=7;break;case 21:l.next=26;break;case 23:l.prev=23,l.t0=l.catch(5),a.e(l.t0);case 26:return l.prev=26,a.f(),l.finish(26);case 29:this.alreadyInRendering=!1;case 30:case"end":return l.stop()}},r,this,[[5,23,26,29]])}));function n(){return t.apply(this,arguments)}return n}()},{key:"updateLayerRenderList",value:function(){var n=this;this.layerList=[],this.layers.filter(function(r){return r.inited}).filter(function(r){return r.isVisible()}).sort(function(r,a){return r.zIndex-a.zIndex}).forEach(function(r){n.layerList.push(r)})}},{key:"destroy",value:function(){this.layers.forEach(function(n){n.destroy()}),this.layers=[],this.layerList=[],this.renderLayers()}},{key:"startAnimate",value:function(){this.animateInstanceCount++===0&&(this.clock.start(),this.runRender())}},{key:"stopAnimate",value:function(){--this.animateInstanceCount===0&&(this.stopRender(),this.clock.stop())}},{key:"getOESTextureFloat",value:function(){return this.renderService.extensionObject.OES_texture_float}},{key:"enableShaderPick",value:function(){this.shaderPicking=!0}},{key:"disableShaderPick",value:function(){this.shaderPicking=!1}},{key:"getShaderPickStat",value:function(){return this.shaderPicking}},{key:"clear",value:function(){var n=Ts(this.mapService.bgColor);this.renderService.clear({color:n,depth:1,stencil:0,framebuffer:null})}},{key:"runRender",value:function(){this.renderLayers(),this.layerRenderID=tr.requestAnimationFrame(this.runRender.bind(this))}},{key:"stopRender",value:function(){tr.cancelAnimationFrame(this.layerRenderID)}}]),e}(),n5=rn(Up.prototype,"renderService",[Q4],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),r5=rn(Up.prototype,"mapService",[J4],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),a5=rn(Up.prototype,"configService",[e5],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Up))||t5);function due(e,t){if(e==null)return{};var n={},r=Object.keys(e),a,i;for(i=0;i<r.length;i++)a=r[i],!(t.indexOf(a)>=0)&&(n[a]=e[a]);return n}function Nn(e,t){if(e==null)return{};var n=due(e,t),r,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],!(t.indexOf(r)>=0)&&(!Object.prototype.propertyIsEnumerable.call(e,r)||(n[r]=e[r]))}return n}function pue(e){return e==null}var ol=pue,hue=function(){function e(t){var n=this;Ae(this,e),m(this,"name",void 0),m(this,"type",void 0),m(this,"scale",void 0),m(this,"descriptor",void 0),m(this,"featureBufferLayout",[]),m(this,"needRescale",!1),m(this,"needRemapping",!1),m(this,"needRegenerateVertices",!1),m(this,"featureRange",{startIndex:0,endIndex:1/0}),m(this,"vertexAttribute",void 0),m(this,"defaultCallback",function(r){if(r.length===0){var a;return((a=n.scale)===null||a===void 0?void 0:a.defaultValues)||[]}return r.map(function(i,o){var s,l=(s=n.scale)===null||s===void 0?void 0:s.scalers[o].func,u=l(i);return u})}),this.setProps(t)}return Oe(e,[{key:"setProps",value:function(n){Object.assign(this,n)}},{key:"mapping",value:function(n){var r;if((r=this.scale)!==null&&r!==void 0&&r.callback){var a,i=(a=this.scale)===null||a===void 0?void 0:a.callback.apply(a,$e(n));if(!ol(i))return[i]}return this.defaultCallback(n)}},{key:"resetDescriptor",value:function(){this.descriptor&&(this.descriptor.buffer.data=[])}}]),e}(),mue=["buffer","update","name"],gue=["buffer","update","name"],$p,o5,s5,l5,H1,u5;function c5(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function og(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?c5(Object(n),!0).forEach(function(r){m(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c5(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var vue=($p={},m($p,V.FLOAT,4),m($p,V.UNSIGNED_BYTE,1),m($p,V.UNSIGNED_SHORT,2),$p),bue=(o5=sn(),s5=dn(xe.IRendererService),o5(l5=(H1=function(){function e(){Ae(this,e),m(this,"attributesAndIndices",void 0),an(this,"rendererService",u5,this),m(this,"attributes",[]),m(this,"triangulation",void 0),m(this,"featureLayout",{sizePerElement:0,elements:[]})}return Oe(e,[{key:"registerStyleAttribute",value:function(n){var r=this.getLayerStyleAttribute(n.name||"");return r?r.setProps(n):(r=new hue(n),this.attributes.push(r)),r}},{key:"updateStyleAttribute",value:function(n,r,a){var i=this.getLayerStyleAttribute(n);i||(i=this.registerStyleAttribute(og(og({},r),{},{name:n})));var o=r.scale;o&&i&&(i.scale=o,i.needRescale=!0,i.needRemapping=!0,i.needRegenerateVertices=!0,a&&a.featureRange&&(i.featureRange=a.featureRange))}},{key:"getLayerStyleAttributes",value:function(){return this.attributes}},{key:"getLayerStyleAttribute",value:function(n){return this.attributes.find(function(r){return r.name===n})}},{key:"getLayerAttributeScale",value:function(n){var r,a=this.getLayerStyleAttribute(n),i=a==null||(r=a.scale)===null||r===void 0?void 0:r.scalers;return i&&i[0]?i[0].func:null}},{key:"updateAttributeByFeatureRange",value:function(n,r){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3?arguments[3]:void 0,o=this.attributes.find(function(k){return k.name===n});if(o&&o.descriptor){var s=o.descriptor,l=s.update,u=s.buffer,c=s.size,f=c===void 0?0:c,d=vue[u.type||V.FLOAT];if(l){var p=this.featureLayout,h=p.elements,g=p.sizePerElement,v=h.slice(a,i);if(!v.length)return;var b=v[0].offset,y=b*f*d,x=v.map(function(k,T){for(var C=k.featureIdx,I=k.vertices,P=k.normals,j=I.length/g,A=[],S=0;S<j;S++){var M=P?P.slice(S*3,S*3+3):[];A.push.apply(A,$e(l(r[C],C,I.slice(S*g,S*g+g),T,M)))}return A}).reduce(function(k,T){return k.push.apply(k,$e(T)),k},[]);o.vertexAttribute.updateBuffer({data:x,offset:y})}}}},{key:"createAttributesAndIndices",value:function(n,r,a){var i=this;this.featureLayout={sizePerElement:0,elements:[]},r&&(this.triangulation=r);var o=this.attributes.map(function(v){return v.resetDescriptor(),v.descriptor}),s=0,l=[],u=3;n.forEach(function(v,b){var y=i.triangulation(v,a),x=y.indices,k=y.vertices,T=y.normals,C=y.size,I=y.indexes;x.forEach(function(S){l.push(S+s)}),u=C;var P=k.length/C;i.featureLayout.sizePerElement=u,i.featureLayout.elements.push({featureIdx:b,vertices:k,normals:T,offset:s}),s+=P;for(var j=function(M){var O=(T==null?void 0:T.slice(M*3,M*3+3))||[],R=k.slice(M*C,M*C+C),G=0;I&&I[M]!==void 0&&(G=I[M]),o.forEach(function(ee,re){if(ee&&ee.update){var X;(X=ee.buffer.data).push.apply(X,$e(ee.update(v,b,R,M,O,G)))}})},A=0;A<P;A++)j(A)});var c=this.rendererService,f=c.createAttribute,d=c.createBuffer,p=c.createElements,h={};o.forEach(function(v,b){if(v){var y=v.buffer;v.update,v.name;var x=Nn(v,mue),k=f(og({buffer:d(y)},x));h[v.name||""]=k,i.attributes[b].vertexAttribute=k}});var g=p({data:l,type:V.UNSIGNED_INT,count:l.length});return this.attributesAndIndices={attributes:h,elements:g},this.attributesAndIndices}},{key:"createAttributes",value:function(n,r){var a=this;this.featureLayout={sizePerElement:0,elements:[]},r&&(this.triangulation=r);var i=this.attributes.map(function(d){return d.resetDescriptor(),d.descriptor}),o=0,s=3;n.forEach(function(d,p){var h=a.triangulation(d),g=h.indices,v=h.vertices,b=h.normals,y=h.size,x=h.indexes;g.forEach(function(I){}),s=y;var k=v.length/y;a.featureLayout.sizePerElement=s,a.featureLayout.elements.push({featureIdx:p,vertices:v,normals:b,offset:o}),o+=k;for(var T=function(P){var j=(b==null?void 0:b.slice(P*3,P*3+3))||[],A=v.slice(P*y,P*y+y),S=0;x&&x[P]!==void 0&&(S=x[P]),i.forEach(function(M,O){if(M&&M.update){var R;(R=M.buffer.data).push.apply(R,$e(M.update(d,p,A,P,j,S)))}})},C=0;C<k;C++)T(C)});var l=this.rendererService,u=l.createAttribute,c=l.createBuffer,f={};return i.forEach(function(d,p){if(d){var h=d.buffer;d.update,d.name;var g=Nn(d,gue),v=u(og({buffer:c(h)},g));f[d.name||""]=v,a.attributes[p].vertexAttribute=v}}),{attributes:f}}},{key:"clearAllAttributes",value:function(){var n;this.attributes.forEach(function(r){r.vertexAttribute&&r.vertexAttribute.destroy()}),(n=this.attributesAndIndices)===null||n===void 0||n.elements.destroy(),this.attributes=[]}}]),e}(),u5=rn(H1.prototype,"rendererService",[s5],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),H1))||l5),WE={exports:{}};function Yv(e){var t=e.target||e.srcElement;t.__resizeRAF__&&cancelAnimationFrame(t.__resizeRAF__),t.__resizeRAF__=requestAnimationFrame(function(){var n=t.__resizeTrigger__,r=n&&n.__resizeListeners__;r&&r.forEach(function(a){a.call(n,e)})})}var f5=function(t,n){var r=this,a=r.document,i,o=a.attachEvent;typeof navigator!="undefined"&&(i=navigator.userAgent.match(/Trident/)||navigator.userAgent.match(/Edge/));function s(){this.contentDocument.defaultView.__resizeTrigger__=this.__resizeElement__,this.contentDocument.defaultView.addEventListener("resize",Yv)}if(!t.__resizeListeners__)if(t.__resizeListeners__=[],o)t.__resizeTrigger__=t,t.attachEvent("onresize",Yv);else{getComputedStyle(t).position==="static"&&(t.style.position="relative");var l=t.__resizeTrigger__=a.createElement("object");l.setAttribute("style","position: absolute; top: 0; left: 0; height: 100%; width: 100%; pointer-events: none; z-index: -1; opacity: 0;"),l.setAttribute("class","resize-sensor"),l.setAttribute("tabindex","-1"),l.setAttribute("title",""),l.__resizeElement__=t,l.onload=s,l.type="text/html",i&&t.appendChild(l),l.data="about:blank",i||t.appendChild(l)}t.__resizeListeners__.push(n)};WE.exports=typeof window=="undefined"?f5:f5.bind(window);var yue=WE.exports.unbind=function(e,t){var n=document.attachEvent,r=e.__resizeListeners__||[];if(t){var a=r.indexOf(t);a!==-1&&r.splice(a,1)}else r=e.__resizeListeners__=[];if(!r.length){if(n)e.detachEvent("onresize",Yv);else if(e.__resizeTrigger__){var i=e.__resizeTrigger__.contentDocument,o=i&&i.defaultView;o&&(o.removeEventListener("resize",Yv),delete o.__resizeTrigger__),e.__resizeTrigger__=!e.removeChild(e.__resizeTrigger__)}delete e.__resizeListeners__}},xue=WE.exports,d5,p5,h5,m5,g5,v5,b5,y5,x5,_5,w5,k5,E5,S5,C5,T5,A5,Ma,O5,M5,R5,P5,I5,L5,N5,F5,D5,B5,z5,U5,$5,V5,j5;function _ue(e){var t=wue();return function(){var r=ke(e),a;if(t){var i=ke(this).constructor;a=Reflect.construct(r,arguments,i)}else a=r.apply(this,arguments);return It(this,a)}}function wue(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var kue=(d5=sn(),p5=dn(xe.SceneID),h5=dn(xe.IIconService),m5=dn(xe.IFontService),g5=dn(xe.IControlService),v5=dn(xe.IGlobalConfigService),b5=dn(xe.IMapService),y5=dn(xe.ICoordinateSystemService),x5=dn(xe.IRendererService),_5=dn(xe.ILayerService),w5=dn(xe.ICameraService),k5=dn(xe.IInteractionService),E5=dn(xe.IPickingService),S5=dn(xe.IShaderModuleService),C5=dn(xe.IMarkerService),T5=dn(xe.IPopupService),d5(A5=(Ma=function(e){Tt(n,e);var t=_ue(n);function n(){var r;return Ae(this,n),r=t.call(this),m(D(r),"destroyed",!1),m(D(r),"loaded",!1),m(D(r),"loadFont",!1),m(D(r),"fontFamily",""),an(D(r),"id",O5,D(r)),an(D(r),"iconService",M5,D(r)),an(D(r),"fontService",R5,D(r)),an(D(r),"controlService",P5,D(r)),an(D(r),"configService",I5,D(r)),an(D(r),"map",L5,D(r)),an(D(r),"coordinateSystemService",N5,D(r)),an(D(r),"rendererService",F5,D(r)),an(D(r),"layerService",D5,D(r)),an(D(r),"cameraService",B5,D(r)),an(D(r),"interactionService",z5,D(r)),an(D(r),"pickingService",U5,D(r)),an(D(r),"shaderModuleService",$5,D(r)),an(D(r),"markerService",V5,D(r)),an(D(r),"popupService",j5,D(r)),m(D(r),"inited",!1),m(D(r),"initPromise",void 0),m(D(r),"rendering",!1),m(D(r),"$container",void 0),m(D(r),"canvas",void 0),m(D(r),"markerContainer",void 0),m(D(r),"hooks",void 0),m(D(r),"handleWindowResized",function(){r.emit("resize"),r.$container&&(r.initContainer(),mY(),r.coordinateSystemService.needRefresh=!0,r.render())}),m(D(r),"handleMapCameraChanged",function(a){r.cameraService.update(a),r.render()}),r.hooks={init:new gie},r}return Oe(n,[{key:"init",value:function(a){var i=this;this.configService.setSceneConfig(this.id,a),this.shaderModuleService.registerBuiltinModules(),this.iconService.init(),this.iconService.on("imageUpdate",function(){return i.render()}),this.fontService.init(),this.hooks.init.tapPromise("initMap",lr(vn.mark(function o(){return vn.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,new Promise(function(u){i.map.onCameraChanged(function(c){i.cameraService.init(),i.cameraService.update(c),i.map.version!=="GAODE2.x"&&u()}),i.map.version!=="GAODE2.x"?i.map.init():u()});case 2:if(!(i.map.version==="GAODE2.x"&&i.map.initViewPort)){l.next=6;break}return l.next=5,i.map.init();case 5:i.map.initViewPort();case 6:i.map.onCameraChanged(i.handleMapCameraChanged),i.map.addMarkerContainer(),i.markerService.addMarkers(),i.markerService.addMarkerLayers(),i.popupService.initPopup(),i.interactionService.init(),i.interactionService.on(La.Drag,i.addSceneEvent.bind(i));case 13:case"end":return l.stop()}},o)}))),this.hooks.init.tapPromise("initRenderer",lr(vn.mark(function o(){var s,l;return vn.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:if(s=iue(i.configService.getSceneConfig(i.id).id||""),i.$container=s,!s){c.next=11;break}return i.canvas=Tr("canvas","",s),i.setCanvas(),c.next=7,i.rendererService.init(i.canvas,i.configService.getSceneConfig(i.id));case 7:xue(i.$container,i.handleWindowResized),tr.matchMedia&&((l=tr.matchMedia("screen and (-webkit-min-device-pixel-ratio: 1.5)"))===null||l===void 0||l.addListener(i.handleWindowResized)),c.next=12;break;case 11:console.error("\u5BB9\u5668 id \u4E0D\u5B58\u5728");case 12:i.pickingService.init(i.id);case 13:case"end":return c.stop()}},o)}))),this.initPromise=this.hooks.init.promise(),this.render()}},{key:"initMiniScene",value:function(a){var i=this;this.configService.setSceneConfig(this.id,a),this.shaderModuleService.registerBuiltinModules(),this.iconService.init(),this.iconService.on("imageUpdate",function(){return i.render()}),this.fontService.init(),this.hooks.init.tapPromise("initMap",lr(vn.mark(function o(){return vn.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,new Promise(function(u){i.map.onCameraChanged(function(c){i.cameraService.init(),i.cameraService.update(c),i.map.version!=="GAODE2.x"&&u()}),i.map.initMiniMap()});case 2:i.map.onCameraChanged(i.handleMapCameraChanged),i.interactionService.init(),i.interactionService.on(La.Drag,i.addSceneEvent.bind(i));case 5:case"end":return l.stop()}},o)}))),this.hooks.init.tapPromise("initRenderer",lr(vn.mark(function o(){var s;return vn.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(s=a.canvas,i.$container=s||null,!i.$container){u.next=7;break}return u.next=5,i.rendererService.init(a.canvas,i.configService.getSceneConfig(i.id));case 5:u.next=8;break;case 7:console.error("\u5BB9\u5668 id \u4E0D\u5B58\u5728");case 8:i.pickingService.init(i.id);case 9:case"end":return u.stop()}},o)}))),this.initPromise=this.hooks.init.promise(),this.render()}},{key:"addLayer",value:function(a){this.layerService.sceneService=this,this.layerService.add(a),this.render()}},{key:"addMask",value:function(a){this.layerService.sceneService=this,this.layerService.addMask(a),this.render()}},{key:"render",value:function(){var r=lr(vn.mark(function i(){return vn.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(!(this.rendering||this.destroyed)){s.next=2;break}return s.abrupt("return");case 2:if(this.rendering=!0,this.inited){s.next=23;break}return s.next=6,this.initPromise;case 6:if(this.destroyed&&this.destroy(),!(this.loadFont&&document.fonts)){s.next=18;break}return s.prev=8,s.next=11,document.fonts.load("24px ".concat(this.fontFamily),"L7text");case 11:s.next=18;break;case 13:s.prev=13,s.t0=s.catch(8),console.warn("\u5F53\u524D\u73AF\u5883\u4E0D\u652F\u6301 document.fonts !"),console.warn("\u5F53\u524D\u73AF\u5883\u4E0D\u652F\u6301 iconfont !"),console.warn(s.t0);case 18:this.layerService.initLayers(),this.controlService.addControls(),this.loaded=!0,this.emit("loaded"),this.inited=!0;case 23:this.layerService.updateLayerRenderList(),this.layerService.renderLayers(),this.rendering=!1;case 26:case"end":return s.stop()}},i,this,[[8,13]])}));function a(){return r.apply(this,arguments)}return a}()},{key:"addFontFace",value:function(a,i){this.fontFamily=a;var o=document.createElement("style");o.type="text/css",o.innerText=`
        @font-face{
            font-family: '`.concat(a,`';
            src: url('`).concat(i,`') format('woff2'),
            url('`).concat(i,`') format('woff'),
            url('`).concat(i,`') format('truetype');
        }`),document.getElementsByTagName("head")[0].appendChild(o),this.loadFont=!0}},{key:"getSceneContainer",value:function(){return this.$container}},{key:"exportPng",value:function(a){var i,o=(i=this.$container)===null||i===void 0?void 0:i.getElementsByTagName("canvas")[0];this.render();var s=a==="jpg"?o==null?void 0:o.toDataURL("image/jpeg"):o==null?void 0:o.toDataURL("image/png");return s}},{key:"getSceneConfig",value:function(){return this.configService.getSceneConfig(this.id)}},{key:"getPointSizeRange",value:function(){return this.rendererService.getPointSizeRange()}},{key:"addMarkerContainer",value:function(){var a=this.$container.parentElement;a!==null&&(this.markerContainer=Tr("div","l7-marker-container",a))}},{key:"getMarkerContainer",value:function(){return this.markerContainer}},{key:"destroy",value:function(){var a=this,i,o;if(!this.inited){this.destroyed=!0;return}if(this.emit("destroy"),this.pickingService.destroy(),this.layerService.destroy(),setTimeout(function(){var l;(l=a.$container)===null||l===void 0||l.removeChild(a.canvas),a.canvas=null,a.rendererService.destroy()}),this.map.destroy(),this.interactionService.destroy(),this.controlService.destroy(),this.markerService.destroy(),this.fontService.destroy(),this.iconService.destroy(),(i=this.$container)===null||i===void 0||(o=i.parentNode)===null||o===void 0||o.removeChild(this.$container),this.removeAllListeners(),this.inited=!1,yue(this.$container,this.handleWindowResized),tr.matchMedia){var s;(s=tr.matchMedia("screen and (min-resolution: 2dppx)"))===null||s===void 0||s.removeListener(this.handleWindowResized)}}},{key:"initContainer",value:function(){var a,i,o=Pr,s=((a=this.$container)===null||a===void 0?void 0:a.clientWidth)||400,l=((i=this.$container)===null||i===void 0?void 0:i.clientHeight)||300,u=this.canvas;u&&(u.width=s*o,u.height=l*o),this.rendererService.viewport({x:0,y:0,width:o*s,height:o*l})}},{key:"setCanvas",value:function(){var a,i,o=Pr,s=((a=this.$container)===null||a===void 0?void 0:a.clientWidth)||400,l=((i=this.$container)===null||i===void 0?void 0:i.clientHeight)||300,u=this.canvas;u.width=s*o,u.height=l*o,u.style.width="100%",u.style.height="100%"}},{key:"addSceneEvent",value:function(a){this.emit(a.type,a)}}]),n}(Hi.exports.EventEmitter),O5=rn(Ma.prototype,"id",[p5],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),M5=rn(Ma.prototype,"iconService",[h5],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),R5=rn(Ma.prototype,"fontService",[m5],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),P5=rn(Ma.prototype,"controlService",[g5],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),I5=rn(Ma.prototype,"configService",[v5],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),L5=rn(Ma.prototype,"map",[b5],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),N5=rn(Ma.prototype,"coordinateSystemService",[y5],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),F5=rn(Ma.prototype,"rendererService",[x5],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),D5=rn(Ma.prototype,"layerService",[_5],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),B5=rn(Ma.prototype,"cameraService",[w5],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),z5=rn(Ma.prototype,"interactionService",[k5],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),U5=rn(Ma.prototype,"pickingService",[E5],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),$5=rn(Ma.prototype,"shaderModuleService",[S5],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),V5=rn(Ma.prototype,"markerService",[C5],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),j5=rn(Ma.prototype,"popupService",[T5],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ma))||A5),Eue="__lodash_hash_undefined__";function Sue(e){return this.__data__.set(e,Eue),this}var Cue=Sue;function Tue(e){return this.__data__.has(e)}var Aue=Tue,Oue=qN,Mue=Cue,Rue=Aue;function Xv(e){var t=-1,n=e==null?0:e.length;for(this.__data__=new Oue;++t<n;)this.add(e[t])}Xv.prototype.add=Xv.prototype.push=Mue;Xv.prototype.has=Rue;var MF=Xv;function Pue(e,t,n,r){for(var a=e.length,i=n+(r?1:-1);r?i--:++i<a;)if(t(e[i],i,e))return i;return-1}var Iue=Pue;function Lue(e){return e!==e}var Nue=Lue;function Fue(e,t,n){for(var r=n-1,a=e.length;++r<a;)if(e[r]===t)return r;return-1}var Due=Fue,Bue=Iue,zue=Nue,Uue=Due;function $ue(e,t,n){return t===t?Uue(e,t,n):Bue(e,zue,n)}var Vue=$ue,jue=Vue;function Gue(e,t){var n=e==null?0:e.length;return!!n&&jue(e,t,0)>-1}var Hue=Gue;function Wue(e,t,n){for(var r=-1,a=e==null?0:e.length;++r<a;)if(n(t,e[r]))return!0;return!1}var Yue=Wue;function Xue(e,t){return e.has(t)}var RF=Xue;function Zue(){}var que=Zue;function Kue(e){var t=-1,n=Array(e.size);return e.forEach(function(r){n[++t]=r}),n}var YE=Kue,W1=w9,Que=que,Jue=YE,ece=1/0,tce=W1&&1/Jue(new W1([,-0]))[1]==ece?function(e){return new W1(e)}:Que,nce=tce,rce=MF,ace=Hue,ice=Yue,oce=RF,sce=nce,lce=YE,uce=200;function cce(e,t,n){var r=-1,a=ace,i=e.length,o=!0,s=[],l=s;if(n)o=!1,a=ice;else if(i>=uce){var u=t?null:sce(e);if(u)return lce(u);o=!1,a=oce,l=new rce}else l=t?[]:s;e:for(;++r<i;){var c=e[r],f=t?t(c):c;if(c=n||c!==0?c:0,o&&f===f){for(var d=l.length;d--;)if(l[d]===f)continue e;t&&l.push(f),s.push(c)}else a(l,f,n)||(l!==s&&l.push(f),s.push(c))}return s}var fce=cce,dce=fce;function pce(e){return e&&e.length?dce(e):[]}var PF=pce;function hce(e){var t=0;switch(e){case"vec2":case"ivec2":t=2;break;case"vec3":case"ivec3":t=3;break;case"vec4":case"ivec4":case"mat2":t=4;break;case"mat3":t=9;break;case"mat4":t=16;break}return t}var mce=/uniform\s+(bool|float|int|vec2|vec3|vec4|ivec2|ivec3|ivec4|mat2|mat3|mat4|sampler2D|samplerCube)\s+([\s\S]*?);/g;function G5(e){var t={};return e=e.replace(mce,function(n,r,a){var i=a.split(":"),o=i[0].trim(),s="";switch(i.length>1&&(s=i[1].trim()),r){case"bool":s=s==="true";break;case"float":case"int":s=Number(s);break;case"vec2":case"vec3":case"vec4":case"ivec2":case"ivec3":case"ivec4":case"mat2":case"mat3":case"mat4":s?s=s.replace("[","").replace("]","").split(",").reduce(function(l,u){return l.push(Number(u.trim())),l},[]):s=new Array(hce(r)).fill(0);break}return t[o]=s,"uniform ".concat(r," ").concat(o,`;
`)}),{content:e,uniforms:t}}var H5,W5;function Y5(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Vp(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Y5(Object(n),!0).forEach(function(r){m(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Y5(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var X5="#define PI 3.14159265359",gce=`#define SHIFT_RIGHT17 1.0 / 131072.0
#define SHIFT_RIGHT18 1.0 / 262144.0
#define SHIFT_RIGHT19 1.0 / 524288.0
#define SHIFT_RIGHT20 1.0 / 1048576.0
#define SHIFT_RIGHT21 1.0 / 2097152.0
#define SHIFT_RIGHT22 1.0 / 4194304.0
#define SHIFT_RIGHT23 1.0 / 8388608.0
#define SHIFT_RIGHT24 1.0 / 16777216.0

#define SHIFT_LEFT17 131072.0
#define SHIFT_LEFT18 262144.0
#define SHIFT_LEFT19 524288.0
#define SHIFT_LEFT20 1048576.0
#define SHIFT_LEFT21 2097152.0
#define SHIFT_LEFT22 4194304.0
#define SHIFT_LEFT23 8388608.0
#define SHIFT_LEFT24 16777216.0

vec2 unpack_float(float packedValue) {
  int packedIntValue = int(packedValue);
  int v0 = packedIntValue / 256;
  return vec2(v0, packedIntValue - v0 * 256);
}

vec4 decode_color(vec2 encodedColor) {
  return vec4(
    unpack_float(encodedColor[0]) / 255.0,
    unpack_float(encodedColor[1]) / 255.0
  );
}
`,vce=`#define ambientRatio 0.5
#define diffuseRatio 0.3
#define specularRatio 0.2


float calc_lighting(vec4 pos) {

    vec3 worldPos = vec3(pos * u_ModelMatrix);

    vec3 worldNormal = a_Normal;
      // //cal light weight
    vec3 viewDir = normalize(u_CameraPosition - worldPos);

    vec3 lightDir = normalize(vec3(1, -10.5, 12));

    vec3 halfDir = normalize(viewDir+lightDir);
      // //lambert
    float lambert = dot(worldNormal, lightDir);
        //specular
    float specular = pow(max(0.0, dot(worldNormal, halfDir)), 32.0);
        //sum to light weight
    float lightWeight = ambientRatio + diffuseRatio * lambert + specularRatio * specular;

    return lightWeight;
}
`,bce=`// Blinn-Phong model
// apply lighting in vertex shader instead of fragment shader
// @see https://learnopengl.com/Advanced-Lighting/Advanced-Lighting
uniform float u_Ambient : 1.0;
uniform float u_Diffuse : 1.0;
uniform float u_Specular : 1.0;
uniform int u_NumOfDirectionalLights : 1;
uniform int u_NumOfSpotLights : 0;

#define SHININESS 32.0
#define MAX_NUM_OF_DIRECTIONAL_LIGHTS 3
#define MAX_NUM_OF_SPOT_LIGHTS 3

struct DirectionalLight {
  vec3 direction;
  vec3 ambient;
  vec3 diffuse;
  vec3 specular;
};

struct SpotLight {
  vec3 position;
  vec3 direction;
  vec3 ambient;
  vec3 diffuse;
  vec3 specular;
  float constant;
  float linear;
  float quadratic;
  float angle;
  float blur;
  float exponent;
};

uniform DirectionalLight u_DirectionalLights[MAX_NUM_OF_DIRECTIONAL_LIGHTS];
uniform SpotLight u_SpotLights[MAX_NUM_OF_SPOT_LIGHTS];

vec3 calc_directional_light(DirectionalLight light, vec3 normal, vec3 viewDir) {
  vec3 lightDir = normalize(light.direction);
  // diffuse shading
  float diff = max(dot(normal, lightDir), 0.0);
  // Blinn-Phong specular shading
  vec3 halfwayDir = normalize(lightDir + viewDir);
  float spec = pow(max(dot(normal, halfwayDir), 0.0), SHININESS);

  vec3 ambient = light.ambient * u_Ambient;
  vec3 diffuse = light.diffuse * diff * u_Diffuse;
  vec3 specular = light.specular * spec * u_Specular;

  return ambient + diffuse + specular;
}

// vec3 calc_spot_light(SpotLight light, vec3 normal, vec3 fragPos, vec3 viewDir) {
//   vec3 lightDir = normalize(light.position - fragPos);
//   // diffuse shading
//   float diff = max(dot(normal, lightDir), 0.0);
//   // specular shading
//   vec3 reflectDir = reflect(-lightDir, normal);
//   float spec = pow(max(dot(viewDir, reflectDir), 0.0), SHININESS);
//   // attenuation
//   float distance = length(light.position - fragPos);
//   float attenuation = 1.0 / (light.constant + light.linear * distance +
//           light.quadratic * (distance * distance));

//   vec3 ambient = light.ambient * u_Ambient;
//   vec3 diffuse = light.diffuse * diff * u_Diffuse;
//   vec3 specular = light.specular * spec * u_Specular;

//   float spotEffect = dot(normalize(light.direction), -lightDir);
//   float spotCosCutoff = cos(light.angle / 180.0 * PI);
//   float spotCosOuterCutoff = cos((light.angle + light.blur) / 180.0 * PI);
//   float spotCosInnerCutoff = cos((light.angle - light.blur) / 180.0 * PI);
//   if (spotEffect > spotCosCutoff) {
//     spotEffect = pow(smoothstep(spotCosOuterCutoff, spotCosInnerCutoff, spotEffect), light.exponent);
//   } else {
//     spotEffect = 0.0;
//   }

//   return ambient + attenuation * (spotEffect * diffuse + specular);
// }

vec3 calc_lighting(vec3 position, vec3 normal, vec3 viewDir) {
  vec3 weight = vec3(0.0);
  for (int i = 0; i < MAX_NUM_OF_DIRECTIONAL_LIGHTS; i++) {
    if (i >= u_NumOfDirectionalLights) {
      break;
    }
    weight += calc_directional_light(u_DirectionalLights[i], normal, viewDir);
  }
  // for (int i = 0; i < MAX_NUM_OF_SPOT_LIGHTS; i++) {
  //   if (i >= u_NumOfSpotLights) {
  //     break;
  //   }
  //   weight += calc_spot_light(u_SpotLights[i], normal, position, viewDir);
  // }
  return weight;
}
`,yce=`varying vec4 v_PickingResult;
uniform vec4 u_HighlightColor : [0, 0, 0, 0];
uniform vec4 u_SelectColor : [0, 0, 0, 0];
uniform float u_PickingStage : 0.0;
uniform float u_shaderPick;

uniform float u_activeMix: 0;

#define PICKING_NONE 0.0
#define PICKING_ENCODE 1.0
#define PICKING_HIGHLIGHT 2.0
#define COLOR_SCALE 1. / 255.

#define HIGHLIGHT 1.0
#define SELECT 2.0

/*
 * Returns highlight color if this item is selected.
 */
vec4 filterHighlightColor(vec4 color, float weight) {
  // float selected = v_PickingResult.a;
  bool selected = bool(v_PickingResult.a);

  // if (selected == SELECT) {
  if (selected) {
  //   // \u70B9\u51FB\u9009\u4E2D\u72B6\u6001
  //   vec4 selectColor = u_SelectColor * COLOR_SCALE;
  //   return selectColor;
  // } else if (selected == HIGHLIGHT) {
  //   // hover \u9AD8\u4EAE\u72B6\u6001
    vec4 highLightColor = u_HighlightColor * COLOR_SCALE;

    float highLightAlpha = highLightColor.a;
    float highLightRatio = highLightAlpha / (highLightAlpha + color.a * (1.0 - highLightAlpha));

    vec3 resultRGB = mix(color.rgb, highLightColor.rgb, highLightRatio);
    return vec4(mix(resultRGB * weight, color.rgb, u_activeMix), color.a);
  } else {
    return color;
  }
}

/*
 * Returns picking color if picking enabled else unmodified argument.
 */
vec4 filterPickingColor(vec4 color) {
  vec3 pickingColor = v_PickingResult.rgb;
  if (u_PickingStage == PICKING_ENCODE && length(pickingColor) < 0.001) {
    discard;
  }
  return u_PickingStage == PICKING_ENCODE ? vec4(pickingColor, step(0.001,color.a)): color;
}

/*
 * Returns picking color if picking is enabled if not
 * highlight color if this item is selected, otherwise unmodified argument.
 */
vec4 filterColor(vec4 color) {
  // TODO: \u8FC7\u6EE4\u591A\u4F59\u7684 shader \u8BA1\u7B97
  // return color;
  if(u_shaderPick < 0.5) {
    return color; // \u6682\u65F6\u53BB\u9664 \u76F4\u63A5\u53D6\u6D88\u8BA1\u7B97\u5728\u9009\u4E2D\u65F6\u62D6\u62FD\u5730\u56FE\u4F1A\u6709\u95EE\u9898
  } else {
    return filterPickingColor(filterHighlightColor(color, 1.0));
  }
  
}

vec4 filterColorAlpha(vec4 color, float alpha) {
  // TODO: \u8FC7\u6EE4\u591A\u4F59\u7684 shader \u8BA1\u7B97
  // return color;
  if(u_shaderPick < 0.5) {
    return color; // \u6682\u65F6\u53BB\u9664 \u76F4\u63A5\u53D6\u6D88\u8BA1\u7B97\u5728\u9009\u4E2D\u65F6\u62D6\u62FD\u5730\u56FE\u4F1A\u6709\u95EE\u9898
  } else {
    return filterPickingColor(filterHighlightColor(color, alpha));
  }
}

`,xce=`attribute vec3 a_PickingColor;
varying vec4 v_PickingResult;

uniform vec3 u_PickingColor : [0, 0, 0];
uniform vec3 u_CurrentSelectedId : [0, 0, 0];
uniform vec4 u_HighlightColor : [0, 0, 0, 0];
uniform vec4 u_SelectColor : [0, 0, 0, 0];
uniform float u_PickingStage : 0.0;
uniform float u_PickingThreshold : 1.0;
uniform float u_PickingBuffer: 0.0;
uniform float u_shaderPick;
uniform float u_EnableSelect: 0.0;

#define PICKING_NONE 0.0
#define PICKING_ENCODE 1.0
#define PICKING_HIGHLIGHT 2.0
#define COLOR_SCALE 1. / 255.

#define NORMAL 0.0
#define HIGHLIGHT 1.0
#define SELECT 2.0

bool isVertexPicked(vec3 vertexColor) {
  return
    abs(vertexColor.r - u_PickingColor.r) < u_PickingThreshold &&
    abs(vertexColor.g - u_PickingColor.g) < u_PickingThreshold &&
    abs(vertexColor.b - u_PickingColor.b) < u_PickingThreshold;
}

// \u5224\u65AD\u5F53\u524D\u70B9\u662F\u5426\u5DF2\u7ECF\u88AB select \u9009\u4E2D
bool isVertexSelected(vec3 vertexColor) {
  return
    abs(vertexColor.r - u_CurrentSelectedId.r) < u_PickingThreshold &&
    abs(vertexColor.g - u_CurrentSelectedId.g) < u_PickingThreshold &&
    abs(vertexColor.b - u_CurrentSelectedId.b) < u_PickingThreshold;
}

void setPickingColor(vec3 pickingColor) {
  if(u_shaderPick < 0.5) {
    return;
  }
  // compares only in highlight stage

  v_PickingResult.a = float((u_PickingStage == PICKING_HIGHLIGHT) && isVertexPicked(pickingColor));

  // if (u_EnableSelect == 1.0 && u_PickingStage == PICKING_HIGHLIGHT && isVertexSelected(pickingColor)) {
  //   // \u9009\u4E2D\u6001
  //   v_PickingResult.a = SELECT;
  // } else if (u_PickingStage == PICKING_HIGHLIGHT && isVertexPicked(pickingColor)) {
  //   // \u9AD8\u4EAE\u6001
  //   v_PickingResult.a = HIGHLIGHT;
  // } else {
  //   v_PickingResult.a = NORMAL;
  // }

  // Stores the picking color so that the fragment shader can render it during picking
  v_PickingResult.rgb = pickingColor * COLOR_SCALE;
}

float setPickingSize(float x) {
   return u_PickingStage == PICKING_ENCODE ? x + u_PickingBuffer : x;
}

float setPickingOrder(float z) {
   bool selected = bool(v_PickingResult.a);
   return selected ? z + 1. : 0.;
}
`,_ce=`
#define E 2.718281828459045
vec2 ProjectFlat(vec2 lnglat){
  float maxs=85.0511287798;
  float lat=max(min(maxs,lnglat.y),-maxs);
  float scale= 268435456.;
  float d=PI/180.;
  float x=lnglat.x*d;
  float y=lat*d;
  y=log(tan((PI/4.)+(y/2.)));

  float a=.5/PI,
  b=.5,
  c=-.5/PI;
  d=.5;
  x=scale*(a*x+b);
  y=scale*(c*y+d);
  return vec2(x,y);
}

vec2 unProjectFlat(vec2 px){
  float a=.5/PI;
  float b=.5;
  float c=-.5/PI;
  float d=.5;
  float scale = 268435456.;
  float x=(px.x/scale-b)/a;
  float y=(px.y/scale-d)/c;
  y=(atan(pow(E,y))-(PI/4.))*2.;
  d=PI/180.;
  float lat=y/d;
  float lng=x/d;
  return vec2(lng,lat);
}

float pixelDistance(vec2 from, vec2 to) {
 vec2 a1 = ProjectFlat(from);
 vec2 b1 = ProjectFlat(to);
 return distance(a1, b1);
}

// gaode2.0
vec2 customProject(vec2 lnglat) { // \u7ECF\u7EAC\u5EA6 => \u5E73\u9762\u5750\u6807
  float t = lnglat.x;
  float e = lnglat.y;
  float Sm = 180.0 / PI;
  float Tm = 6378137.0;
  float Rm = PI / 180.0;
  float r = 85.0511287798;
  e = max(min(r, e), -r);
  t *= Rm;
  e *= Rm;
  e = log(tan(PI / 4.0 + e / 2.0));
  return vec2(t * Tm, e * Tm);
}

vec2 unProjCustomCoord(vec2 point) { // \u5E73\u9762\u5750\u6807 => \u7ECF\u7EAC\u5EA6
  float Sm = 57.29577951308232; //180 / Math.PI
  float Tm = 6378137.0;
  float t = point.x;
  float e = point.y;
  return vec2(t / Tm * Sm, (2.0 * atan(exp(e / Tm)) - PI / 2.0) * Sm);
}


float customPixelDistance(vec2 from, vec2 to) {
 vec2 a1 = ProjectFlat(from);
 vec2 b1 = ProjectFlat(to);
 return distance(a1, b1);
}`,wce=`#define TILE_SIZE 512.0
#define PI 3.1415926536
#define WORLD_SCALE TILE_SIZE / (PI * 2.0)

#define COORDINATE_SYSTEM_LNGLAT 1.0        // mapbox
#define COORDINATE_SYSTEM_LNGLAT_OFFSET 2.0 // mapbox offset
#define COORDINATE_SYSTEM_VECTOR_TILE 3.0
#define COORDINATE_SYSTEM_IDENTITY 4.0
#define COORDINATE_SYSTEM_P20 5.0           // amap
#define COORDINATE_SYSTEM_P20_OFFSET 6.0    // amap offset
#define COORDINATE_SYSTEM_METER_OFFSET 7.0

#define COORDINATE_SYSTEM_P20_2 8.0         // amap2.0

uniform mat4 u_ViewMatrix;
uniform mat4 u_ProjectionMatrix;
uniform mat4 u_ViewProjectionMatrix;
uniform float u_Zoom : 1;
uniform float u_ZoomScale : 1;

uniform float u_CoordinateSystem;
uniform vec2 u_ViewportCenter;
uniform vec4 u_ViewportCenterProjection;
uniform vec3 u_PixelsPerDegree;
uniform vec3 u_PixelsPerDegree2;
uniform vec3 u_PixelsPerMeter;

uniform vec2 u_ViewportSize;
uniform float u_DevicePixelRatio;
uniform float u_FocalDistance;
uniform vec3 u_CameraPosition;

// uniform mat4 u_Mvp;

// web mercator coords -> world coords
vec2 project_mercator(vec2 lnglat) {
  float x = lnglat.x;
  return vec2(
    radians(x) + PI,
    PI - log(tan(PI * 0.25 + radians(lnglat.y) * 0.5))
  );
}

float project_scale(float meters) {
  return meters * u_PixelsPerMeter.z;
}


// offset coords -> world coords
vec4 project_offset(vec4 offset) {
  float dy = offset.y;
  dy = clamp(dy, -1., 1.);
  vec3 pixels_per_unit = u_PixelsPerDegree + u_PixelsPerDegree2 * dy;
  return vec4(offset.xyz * pixels_per_unit, offset.w);
}

vec3 project_normal(vec3 normal) {
  vec4 normal_modelspace = u_ModelMatrix * vec4(normal, 0.0);
  return normalize(normal_modelspace.xyz * u_PixelsPerMeter);
}

vec3 project_offset_normal(vec3 vector) {
  if (u_CoordinateSystem < COORDINATE_SYSTEM_LNGLAT + 0.01 && u_CoordinateSystem >COORDINATE_SYSTEM_LNGLAT - 0.01
    || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
    // normals generated by the polygon tesselator are in lnglat offsets instead of meters
    return normalize(vector * u_PixelsPerDegree);
  }
  return project_normal(vector);
}
// || u_CoordinateSystem < COORDINATE_SYSTEM_P20_OFFSET + 0.01 && u_CoordinateSystem >COORDINATE_SYSTEM_P20_OFFSET - 0.01
// reverse Y
vec3 reverse_offset_normal(vec3 vector) {
  if (u_CoordinateSystem == COORDINATE_SYSTEM_P20 ||u_CoordinateSystem == COORDINATE_SYSTEM_P20_OFFSET ) {
    return vector * vec3(1.0, -1.0, 1.0);
  }

  if (u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.0
    return vector;
  }
  return vector;
}

vec4 project_mvt_offset_position(vec4 position) {
  float a = COORDINATE_SYSTEM_LNGLAT_OFFSET;
  float b = COORDINATE_SYSTEM_P20_OFFSET;
  float c = COORDINATE_SYSTEM_LNGLAT;
  if (u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET || u_CoordinateSystem == COORDINATE_SYSTEM_P20_OFFSET) {
    return project_offset(vec4(0.0, 0.0, position.z, position.w));
  }
  if (u_CoordinateSystem < COORDINATE_SYSTEM_LNGLAT + 0.01 && u_CoordinateSystem >COORDINATE_SYSTEM_LNGLAT - 0.01) {
    return vec4(
      project_mercator(position.xy) * WORLD_SCALE * u_ZoomScale,
      project_scale(position.z),
      position.w
    );
  }
  return position;
}

vec4 project_position(vec4 position) {
  float a = COORDINATE_SYSTEM_LNGLAT_OFFSET;
  float b = COORDINATE_SYSTEM_P20_OFFSET;
  float c = COORDINATE_SYSTEM_LNGLAT;
  if (u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET
    || u_CoordinateSystem == COORDINATE_SYSTEM_P20_OFFSET) {
    float X = position.x - u_ViewportCenter.x;
    float Y = position.y - u_ViewportCenter.y;
    return project_offset(vec4(X, Y, position.z, position.w));
  }
  if (u_CoordinateSystem < COORDINATE_SYSTEM_LNGLAT + 0.01 && u_CoordinateSystem >COORDINATE_SYSTEM_LNGLAT - 0.01) {
    return vec4(
      project_mercator(position.xy) * WORLD_SCALE * u_ZoomScale,
      project_scale(position.z),
      position.w
    );
  }

  if (u_CoordinateSystem == COORDINATE_SYSTEM_P20) {
    return vec4(
      (project_mercator(position.xy) * WORLD_SCALE * u_ZoomScale - vec2(215440491., 106744817.)) * vec2(1., -1.),
      project_scale(position.z),
      position.w
    );
  }

  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) {
    // return vec4(
    //   (position.xy * WORLD_SCALE * u_ZoomScale) * vec2(1., -1.), 
    //   project_scale(position.z), 
    //   position.w);

     return vec4(
      position.xy, 
      project_scale(position.z), 
      position.w);
  }
  return position;

  // TODO: \u74E6\u7247\u5750\u6807\u7CFB & \u5E38\u89C4\u4E16\u754C\u5750\u6807\u7CFB
}
vec2 project_pixel_size_to_clipspace(vec2 pixels) {
  vec2 offset = pixels / u_ViewportSize * u_DevicePixelRatio * 2.0;
  return offset * u_FocalDistance;
}

float project_pixel_allmap(float pixel) {
  if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {
    return pixel * pow(2.0, u_Zoom);
  }
  return pixel;
}

// \u9002\u914D\u7EB9\u7406\u8D34\u56FE\u7684\u7B49\u50CF\u7D20\u5927\u5C0F
float project_pixel_texture(float pixel) {
  // mapbox zoom > 12
  if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
    return pixel * pow(0.5, u_Zoom);
  }

  // amap2 zoom > 12
  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) {
    return pixel * pow(2.0, (19.0 - 3.0 - u_Zoom));
  }

  // amap zoom > 12
  if (u_CoordinateSystem == COORDINATE_SYSTEM_P20_OFFSET) {
    return pixel * pow(0.5, u_Zoom);
  }
  
  // amap zoom < 12
  if (u_CoordinateSystem == COORDINATE_SYSTEM_P20) {
    return pixel * pow(2.0, (20.0 - u_Zoom));
  }
  return pixel * 2.0;
}

// \u5728\u4E0D\u8BBA\u4EC0\u4E48\u5E95\u56FE\u4E0B\u9700\u8981\u7EDF\u4E00\u5904\u7406\u7684\u65F6\u5019\u4F7F\u7528
float project_float_pixel(float pixel) {
  if (u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
    // mapbox P20 \u5750\u6807\u7CFB\u4E0B\uFF0C\u4E3A\u4E86\u548C Web \u58A8\u5361\u6258\u5750\u6807\u7CFB\u7EDF\u4E00\uFF0Czoom \u9ED8\u8BA4\u51CF1
    return pixel * pow(2.0, (19.0 - u_Zoom));
  }
  if (u_CoordinateSystem == COORDINATE_SYSTEM_P20 || u_CoordinateSystem == COORDINATE_SYSTEM_P20_OFFSET) {
    // amap P20 \u5750\u6807\u7CFB\u4E0B\uFF0C\u4E3A\u4E86\u548C Web \u58A8\u5361\u6258\u5750\u6807\u7CFB\u7EDF\u4E00\uFF0Czoom \u9ED8\u8BA4\u51CF1
    return pixel * pow(2.0, (19.0 - u_Zoom));
  }
  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) {
    // amap2 P20_2 \u5750\u6807\u7CFB\u4E0B\uFF0C\u4E3A\u4E86\u548C Web \u58A8\u5361\u6258\u5750\u6807\u7CFB\u7EDF\u4E00\uFF0Czoom \u9ED8\u8BA4\u51CF3
    return pixel * pow(2.0, (19.0 - 3.0 - u_Zoom));
  }
  return pixel;
}

float project_pixel(float pixel) {
  if (u_CoordinateSystem == COORDINATE_SYSTEM_P20 || u_CoordinateSystem == COORDINATE_SYSTEM_P20_OFFSET) {
    // amap P20 \u5750\u6807\u7CFB\u4E0B\uFF0C\u4E3A\u4E86\u548C Web \u58A8\u5361\u6258\u5750\u6807\u7CFB\u7EDF\u4E00\uFF0Czoom \u9ED8\u8BA4\u51CF1
    return pixel * pow(2.0, (19.0 - u_Zoom));
  }
  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) {
    // amap2 P20_2 \u5750\u6807\u7CFB\u4E0B\uFF0C\u4E3A\u4E86\u548C Web \u58A8\u5361\u6258\u5750\u6807\u7CFB\u7EDF\u4E00\uFF0Czoom \u9ED8\u8BA4\u51CF3
    return pixel * pow(2.0, (19.0 - 3.0 - u_Zoom));
  }
  return pixel;
}
vec2 project_pixel(vec2 pixel) {
  if (u_CoordinateSystem == COORDINATE_SYSTEM_P20 || u_CoordinateSystem == COORDINATE_SYSTEM_P20_OFFSET) {
    // P20 \u5750\u6807\u7CFB\u4E0B\uFF0C\u4E3A\u4E86\u548C Web \u58A8\u5361\u6258\u5750\u6807\u7CFB\u7EDF\u4E00\uFF0Czoom \u9ED8\u8BA4\u51CF1
    return pixel * pow(2.0, (19.0 - u_Zoom));
  }
  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) {
    // P20_2 \u5750\u6807\u7CFB\u4E0B\uFF0C\u4E3A\u4E86\u548C Web \u58A8\u5361\u6258\u5750\u6807\u7CFB\u7EDF\u4E00\uFF0Czoom \u9ED8\u8BA4\u51CF3
    return pixel * pow(2.0, (19.0 - 3.0 - u_Zoom));
  }
  return pixel * -1.;
}
vec3 project_pixel(vec3 pixel) {
  if (u_CoordinateSystem == COORDINATE_SYSTEM_P20 || u_CoordinateSystem == COORDINATE_SYSTEM_P20_OFFSET) {
    // P20 \u5750\u6807\u7CFB\u4E0B\uFF0C\u4E3A\u4E86\u548C Web \u58A8\u5361\u6258\u5750\u6807\u7CFB\u7EDF\u4E00\uFF0Czoom \u9ED8\u8BA4\u51CF1
    return pixel * pow(2.0, (19.0 - u_Zoom));
  }
  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) {
    // P20_2 \u5750\u6807\u7CFB\u4E0B\uFF0C\u4E3A\u4E86\u548C Web \u58A8\u5361\u6258\u5750\u6807\u7CFB\u7EDF\u4E00\uFF0Czoom \u9ED8\u8BA4\u51CF3
    return pixel * pow(2.0, (19.0 - 3.0 - u_Zoom));
  }
  return pixel * -1.;
}

vec4 project_common_position_to_clipspace(vec4 position, mat4 viewProjectionMatrix, vec4 center) {
  if (u_CoordinateSystem == COORDINATE_SYSTEM_METER_OFFSET ||
    u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
    // Needs to be divided with project_uCommonUnitsPerMeter
    position.w *= u_PixelsPerMeter.z;
  }

  return viewProjectionMatrix * position + center;
}

// Projects from common space coordinates to clip space
vec4 project_common_position_to_clipspace(vec4 position) {
  return project_common_position_to_clipspace(
    position,
    u_ViewProjectionMatrix,
    u_ViewportCenterProjection
  );
}

vec4 unproject_clipspace_to_position(vec4 clipspacePos, mat4 u_InverseViewProjectionMatrix) {
  vec4 pos = u_InverseViewProjectionMatrix * (clipspacePos - u_ViewportCenterProjection);

  if (u_CoordinateSystem == COORDINATE_SYSTEM_METER_OFFSET ||
    u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
    // Needs to be divided with project_uCommonUnitsPerMeter
     pos.w = pos.w / u_PixelsPerMeter.z;
  }
  return pos;
}


bool isEqual( float a,  float b) {
    return  a< b + 0.001 && a > b - 0.001;
}`,kce=`/**
 * 2D signed distance field functions
 * @see http://www.iquilezles.org/www/articles/distfunctions2d/distfunctions2d.htm
 */

float ndot(vec2 a, vec2 b ) { return a.x*b.x - a.y*b.y; }

float sdCircle(vec2 p, float r) {
  return length(p) - r;
}

float sdEquilateralTriangle(vec2 p) {
  float k = sqrt(3.0);
  p.x = abs(p.x) - 1.0;
  p.y = p.y + 1.0/k;
  if( p.x + k*p.y > 0.0 ) p = vec2(p.x-k*p.y,-k*p.x-p.y)/2.0;
  p.x -= clamp( p.x, -2.0, 0.0 );
  return -length(p)*sign(p.y);
}

float sdBox(vec2 p, vec2 b) {
  vec2 d = abs(p)-b;
  return length(max(d,vec2(0))) + min(max(d.x,d.y),0.0);
}

float sdPentagon(vec2 p, float r) {
  vec3 k = vec3(0.809016994,0.587785252,0.726542528);
  p.x = abs(p.x);
  p -= 2.0*min(dot(vec2(-k.x,k.y),p),0.0)*vec2(-k.x,k.y);
  p -= 2.0*min(dot(vec2( k.x,k.y),p),0.0)*vec2( k.x,k.y);
  p -= vec2(clamp(p.x,-r*k.z,r*k.z),r);
  return length(p)*sign(p.y);
}

float sdHexagon(vec2 p, float r) {
  vec3 k = vec3(-0.866025404,0.5,0.577350269);
  p = abs(p);
  p -= 2.0*min(dot(k.xy,p),0.0)*k.xy;
  p -= vec2(clamp(p.x, -k.z*r, k.z*r), r);
  return length(p)*sign(p.y);
}

float sdOctogon(vec2 p, float r) {
  vec3 k = vec3(-0.9238795325, 0.3826834323, 0.4142135623 );
  p = abs(p);
  p -= 2.0*min(dot(vec2( k.x,k.y),p),0.0)*vec2( k.x,k.y);
  p -= 2.0*min(dot(vec2(-k.x,k.y),p),0.0)*vec2(-k.x,k.y);
  p -= vec2(clamp(p.x, -k.z*r, k.z*r), r);
  return length(p)*sign(p.y);
}

float sdHexagram(vec2 p, float r) {
  vec4 k=vec4(-0.5,0.8660254038,0.5773502692,1.7320508076);
  p = abs(p);
  p -= 2.0*min(dot(k.xy,p),0.0)*k.xy;
  p -= 2.0*min(dot(k.yx,p),0.0)*k.yx;
  p -= vec2(clamp(p.x,r*k.z,r*k.w),r);
  return length(p)*sign(p.y);
}

float sdRhombus(vec2 p, vec2 b) {
  vec2 q = abs(p);
  float h = clamp((-2.0*ndot(q,b)+ndot(b,b))/dot(b,b),-1.0,1.0);
  float d = length( q - 0.5*b*vec2(1.0-h,1.0+h) );
  return d * sign( q.x*b.y + q.y*b.x - b.x*b.y );
}

float sdVesica(vec2 p, float r, float d) {
  p = abs(p);
  float b = sqrt(r*r-d*d); // can delay this sqrt
  return ((p.y-b)*d>p.x*b)
          ? length(p-vec2(0.0,b))
          : length(p-vec2(-d,0.0))-r;
}
`,Ece=`attribute float a_vertexId;

uniform mat4 u_cellTypeLayout;      // \u63CF\u8FF0\u6570\u636E\u7EB9\u7406 cell \u7ED3\u6784\u7684\u77E9\u9635
uniform sampler2D u_dataTexture;    // \u6570\u636E\u7EB9\u7406

bool hasOpacity() { // \u5224\u65AD cell \u4E2D\u662F\u5426\u5B58\u5728 opacity \u7684\u6570\u636E
  return u_cellTypeLayout[1][0] > 0.0 && u_cellTypeLayout[3][3] > 0.0;
}

bool hasStrokeOpacity() { // \u5224\u65AD cell \u4E2D\u662F\u5426\u5B58\u5728 strokeOpacity \u7684\u6570\u636E
  return u_cellTypeLayout[1][1] > 0.0 && u_cellTypeLayout[3][3] > 0.0;
}

bool hasStrokeWidth() { // \u5224\u65AD cell \u4E2D\u662F\u5426\u5B58\u5728 strokeWidth \u7684\u6570\u636E
  return u_cellTypeLayout[1][2] > 0.0 && u_cellTypeLayout[3][3] > 0.0;
}

bool hasStroke() { // \u5224\u65AD cell \u4E2D\u662F\u5426\u5B58\u5728 stroke \u7684\u6570\u636E
  return u_cellTypeLayout[1][3] > 0.0 && u_cellTypeLayout[3][3] > 0.0;
}

bool hasOffsets() { // \u5224\u65AD cell \u4E2D\u662F\u5426\u5B58\u5728 offsets \u7684\u6570\u636E
  return u_cellTypeLayout[2][0] > 0.0 && u_cellTypeLayout[3][3] > 0.0;
}

bool hasThetaOffset() { // \u5224\u65AD cell \u4E2D\u662F\u5426\u5B58\u5728 thetaOffset \u7684\u6570\u636E
  return u_cellTypeLayout[2][1] > 0.0 && u_cellTypeLayout[3][3] > 0.0;
}

// \u6839\u636E\u5750\u6807\u4F4D\u7F6E\u5148\u662F\u8BA1\u7B97 uv \uFF0C\u7136\u540E\u6839\u636E uv \u4ECE\u6570\u636E\u7EB9\u7406\u4E2D\u53D6\u503C
float pos2value(vec2 pos, float columnWidth, float rowHeight) {
  float u = (pos.r - 1.0) * columnWidth + columnWidth/2.0;
  float v = 1.0 - ((pos.g - 1.0) * rowHeight + rowHeight/2.0);
  return texture2D(u_dataTexture, vec2(u, v)).r;
}

/*
  currentRow \u5F53\u524D\u884C
  currentColumn \u5F53\u524D\u5217
  columnCount \u6709\u591A\u5C11\u5217
  nextStep \u9700\u8981\u8BA1\u7B97\u5F53\u524D cell \u540E\u7684\u7B2C\u51E0\u4E2A cell \uFF08\u5F53\u524D cell \u5219 nextStep = 0\uFF09
*/
vec2 nextPos(float currentRow, float currentColumn, float columnCount, float nextStep) {
  float nextColumn = currentColumn;
  float nextRow = currentRow;
  if(currentColumn + nextStep <= columnCount){
    nextColumn = currentColumn + nextStep;
  } else {
    nextColumn = mod(currentColumn + nextStep, columnCount); // \u4E0D\u4F1A\u51FA\u73B0\u8DE8\u4E24\u884C
    nextRow = currentRow + 1.0;
  }
  return vec2(nextColumn, nextRow);
}

// \u8BA1\u7B97\u5F53\u524D\u5355\u4E2A cell \u7684\u5927\u5C0F
float calCellCount() { 
  //   u_cellTypeLayout
  //   cal_height, WIDTH, 0.0, 0.0, // rowCount columnCount - \u51E0\u884C\u51E0\u5217
  //   1.0, 1.0, 1.0, 0.0, // opacity strokeOpacity strokeWidth stroke - 1.0 \u8868\u793A\u6709\u6570\u636E\u6620\u5C04\u30010.0 \u8868\u793A\u6CA1\u6709
  //   1.0, 1.0, 0.0, 0.0, // offsets thetaOffset
  //   0.0, 0.0, 0.0, 0.0
  
  return  u_cellTypeLayout[1][0] +        // opacity
          u_cellTypeLayout[1][1] +        // strokeOpacity
          u_cellTypeLayout[1][2] +        // strokeWidth
          u_cellTypeLayout[1][3] * 4.0 +  // stroke
          u_cellTypeLayout[2][0] * 2.0 +  // offsets
          u_cellTypeLayout[2][1];         // thetaOffset
}`,Sce=`
// \u8BA1\u7B97 opacity \u548C\u6807\u793A\u5728 cell \u4E2D\u53D6\u503C\u4F4D\u7F6E\u7684\u504F\u79FB\u91CF textureOffset
vec2 calOpacityAndOffset(float cellCurrentRow, float cellCurrentColumn, float columnCount, float textureOffset, float columnWidth, float rowHeight) {
  if(!hasOpacity()) { // \u6570\u636E\u7EB9\u7406\u4E2D\u4E0D\u5B58\u5728 opacity \u7684\u65F6\u5019\u53D6\u9ED8\u8BA4\u503C\uFF08\u7528\u6237\u5728 style \u4E2D\u4F20\u5165\u7684\u662F\u5E38\u91CF\uFF09
    return vec2(u_opacity, textureOffset);
  } else {
    vec2 valuePos = nextPos(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset);
    float textureOpacity = pos2value(valuePos, columnWidth, rowHeight);
    return vec2(textureOpacity, textureOffset + 1.0);
  }
}
`,Cce=`
// \u8BA1\u7B97 strokeOpaicty \u548C\u6807\u793A\u5728 cell \u4E2D\u53D6\u503C\u4F4D\u7F6E\u7684\u504F\u79FB\u91CF textureOffset
vec2 calStrokeOpacityAndOffset(float cellCurrentRow, float cellCurrentColumn, float columnCount, float textureOffset, float columnWidth, float rowHeight) {
  if(!hasStrokeOpacity()) {
    return vec2(u_stroke_opacity, textureOffset);
  } else {
    vec2 valuePos = nextPos(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset);
    float textureStrokeOpacity = pos2value(valuePos, columnWidth, rowHeight);
    return vec2(textureStrokeOpacity, textureOffset + 1.0);
  }
}
`,Tce=`
// \u8BA1\u7B97 strokeWidth \u548C\u6807\u793A\u5728 cell \u4E2D\u53D6\u503C\u4F4D\u7F6E\u7684\u504F\u79FB\u91CF textureOffset
vec2 calStrokeWidthAndOffset(float cellCurrentRow, float cellCurrentColumn, float columnCount, float textureOffset, float columnWidth, float rowHeight) {
  if(!hasStrokeWidth()) {
    return vec2(u_stroke_width, textureOffset);
  } else {
    vec2 valuePos = nextPos(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset);
    float textureStrokeWidth = pos2value(valuePos, columnWidth, rowHeight);
    return vec2(textureStrokeWidth, textureOffset + 1.0);
  }
}
`,Ace=`
// \u8BA1\u7B97 thetaOffset \u548C\u6807\u793A\u5728 cell \u4E2D\u53D6\u503C\u4F4D\u7F6E\u7684\u504F\u79FB\u91CF textureOffset
vec2 calThetaOffsetAndOffset(float cellCurrentRow, float cellCurrentColumn, float columnCount, float textureOffset, float columnWidth, float rowHeight) {
  if(!hasThetaOffset()) { // \u6570\u636E\u7EB9\u7406\u4E2D\u4E0D\u5B58\u5728 thetaOffset \u7684\u65F6\u5019\u53D6\u9ED8\u8BA4\u503C\uFF08\u7528\u6237\u5728 style \u4E2D\u4F20\u5165\u7684\u662F\u5E38\u91CF\uFF09
    return vec2(u_thetaOffset, textureOffset);
  } else {
    vec2 valuePos = nextPos(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset);
    float textureThetaOffset = pos2value(valuePos, columnWidth, rowHeight);
    return vec2(textureThetaOffset, textureOffset + 1.0);
  }
}
`,Oce=/precision\s+(high|low|medium)p\s+float/,Mce=`#ifdef GL_FRAGMENT_PRECISION_HIGH
 precision highp float;
 #else
 precision mediump float;
#endif
`,Rce=/#pragma include (["^+"]?["\ "[a-zA-Z_0-9](.*)"]*?)/g,Pce=(H5=sn(),H5(W5=function(){function e(){Ae(this,e),m(this,"moduleCache",{}),m(this,"rawContentCache",{})}return Oe(e,[{key:"registerBuiltinModules",value:function(){this.destroy(),this.registerModule("common",{vs:X5,fs:X5}),this.registerModule("decode",{vs:gce,fs:""}),this.registerModule("projection",{vs:wce,fs:""}),this.registerModule("project",{vs:_ce,fs:""}),this.registerModule("sdf_2d",{vs:"",fs:kce}),this.registerModule("lighting",{vs:bce,fs:""}),this.registerModule("light",{vs:vce,fs:""}),this.registerModule("picking",{vs:xce,fs:yce}),this.registerModule("styleMapping",{vs:Ece,fs:""}),this.registerModule("styleMappingCalThetaOffset",{vs:Ace,fs:""}),this.registerModule("styleMappingCalOpacity",{vs:Sce,fs:""}),this.registerModule("styleMappingCalStrokeOpacity",{vs:Cce,fs:""}),this.registerModule("styleMappingCalStrokeWidth",{vs:Tce,fs:""})}},{key:"registerModule",value:function(n,r){if(!this.rawContentCache[n]){var a=r.vs,i=r.fs,o=r.uniforms,s=G5(a),l=s.content,u=s.uniforms,c=G5(i),f=c.content,d=c.uniforms;this.rawContentCache[n]={fs:f,uniforms:Vp(Vp(Vp({},u),d),o),vs:l}}}},{key:"destroy",value:function(){this.moduleCache={},this.rawContentCache={}}},{key:"getModule",value:function(n){var r=this;if(this.moduleCache[n])return this.moduleCache[n];var a=this.rawContentCache[n].vs,i=this.rawContentCache[n].fs,o=this.processModule(a,[],"vs"),s=o.content,l=o.includeList,u=this.processModule(i,[],"fs"),c=u.content,f=u.includeList,d=c,p=PF(l.concat(f).concat(n)).reduce(function(h,g){return Vp(Vp({},h),r.rawContentCache[g].uniforms)},{});return Oce.test(c)||(d=Mce+c),this.moduleCache[n]={fs:d.trim(),uniforms:p,vs:s.trim()},this.moduleCache[n]}},{key:"processModule",value:function(n,r,a){var i=this,o=n.replace(Rce,function(s,l){var u=l.split(" "),c=u[0].replace(/"/g,"");if(r.indexOf(c)>-1)return"";var f=i.rawContentCache[c][a];r.push(c);var d=i.processModule(f,r,a),p=d.content;return p});return{content:o,includeList:r}}}]),e}())||W5);function Ice(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&(e=ke(e),e!==null););return e}function pc(){return typeof Reflect!="undefined"&&Reflect.get?pc=Reflect.get.bind():pc=function(t,n,r){var a=Ice(t,n);if(!!a){var i=Object.getOwnPropertyDescriptor(a,n);return i.get?i.get.call(arguments.length<3?t:r):i.value}},pc.apply(this,arguments)}var gu;(function(e){e.Normal="normal",e.PostProcessing="post-processing"})(gu||(gu={}));var Z5,q5,ly=(Z5=sn(),Z5(q5=function(){function e(){Ae(this,e),m(this,"shaderModuleService",void 0),m(this,"rendererService",void 0),m(this,"cameraService",void 0),m(this,"mapService",void 0),m(this,"interactionService",void 0),m(this,"layerService",void 0),m(this,"config",void 0)}return Oe(e,[{key:"getName",value:function(){return""}},{key:"getType",value:function(){return gu.Normal}},{key:"init",value:function(n,r){this.config=r,this.rendererService=n.getContainer().get(xe.IRendererService),this.cameraService=n.getContainer().get(xe.ICameraService),this.mapService=n.getContainer().get(xe.IMapService),this.interactionService=n.getContainer().get(xe.IInteractionService),this.layerService=n.getContainer().get(xe.ILayerService),this.shaderModuleService=n.getContainer().get(xe.IShaderModuleService)}},{key:"render",value:function(n){}}]),e}())||q5),K5,Q5;function Lce(e){var t=Nce();return function(){var r=ke(e),a;if(t){var i=ke(this).constructor;a=Reflect.construct(r,arguments,i)}else a=r.apply(this,arguments);return It(this,a)}}function Nce(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var Fce=(K5=sn(),K5(Q5=function(e){Tt(n,e);var t=Lce(n);function n(){return Ae(this,n),t.apply(this,arguments)}return Oe(n,[{key:"getName",value:function(){return"clear"}},{key:"init",value:function(a,i){pc(ke(n.prototype),"init",this).call(this,a,i)}},{key:"render",value:function(){this.rendererService.clear({color:[0,0,0,0],depth:1,framebuffer:null})}}]),n}(ly))||Q5),J5,eO,tO,Y1,nO;function Dce(e,t){var n=typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=Bce(e))||t&&e&&typeof e.length=="number"){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(u){throw u},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i=!0,o=!1,s;return{s:function(){n=n.call(e)},n:function(){var u=n.next();return i=u.done,u},e:function(u){o=!0,s=u},f:function(){try{!i&&n.return!=null&&n.return()}finally{if(o)throw s}}}}function Bce(e,t){if(!!e){if(typeof e=="string")return rO(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return rO(e,t)}}function rO(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var zce=(J5=sn(),eO=dn(xe.IPostProcessor),J5(tO=(Y1=function(){function e(){Ae(this,e),m(this,"passes",[]),an(this,"postProcessor",nO,this),m(this,"layer",void 0),m(this,"renderFlag",void 0),m(this,"width",0),m(this,"height",0)}return Oe(e,[{key:"setLayer",value:function(n){this.layer=n}},{key:"setRenderFlag",value:function(n){this.renderFlag=n}},{key:"getRenderFlag",value:function(){return this.renderFlag}},{key:"getPostProcessor",value:function(){return this.postProcessor}},{key:"render",value:function(){var t=lr(vn.mark(function r(){var a,i,o;return vn.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:a=Dce(this.passes),l.prev=1,a.s();case 3:if((i=a.n()).done){l.next=9;break}return o=i.value,l.next=7,o.render(this.layer);case 7:l.next=3;break;case 9:l.next=14;break;case 11:l.prev=11,l.t0=l.catch(1),a.e(l.t0);case 14:return l.prev=14,a.f(),l.finish(14);case 17:return l.next=19,this.postProcessor.render(this.layer);case 19:case"end":return l.stop()}},r,this,[[1,11,14,17]])}));function n(){return t.apply(this,arguments)}return n}()},{key:"resize",value:function(n,r){(this.width!==n||this.height!==r)&&(this.postProcessor.resize(n,r),this.width=n,this.height=r)}},{key:"add",value:function(n,r){n.getType()===gu.PostProcessing?this.postProcessor.add(n,this.layer,r):(n.init(this.layer,r),this.passes.push(n))}},{key:"insert",value:function(n,r,a){n.init(this.layer,r),this.passes.splice(a,0,n)}},{key:"destroy",value:function(){this.passes.length=0}}]),e}(),nO=rn(Y1.prototype,"postProcessor",[eO],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Y1))||tO),aO,iO;function oO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function sO(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?oO(Object(n),!0).forEach(function(r){m(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):oO(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Uce(e){var t=$ce();return function(){var r=ke(e),a;if(t){var i=ke(this).constructor;a=Reflect.construct(r,arguments,i)}else a=r.apply(this,arguments);return It(this,a)}}function $ce(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var Vce=(aO=sn(),aO(iO=function(e){Tt(n,e);var t=Uce(n);function n(){var r;Ae(this,n);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return r=t.call.apply(t,[this].concat(i)),m(D(r),"pickingFBO",void 0),m(D(r),"layer",void 0),m(D(r),"width",0),m(D(r),"height",0),m(D(r),"alreadyInRendering",!1),m(D(r),"pickFromPickingFBO",function(s){var l=s.x,u=s.y,c=s.lngLat,f=s.type;if(!(!r.layer.isVisible()||!r.layer.needPick(f))){var d=r.rendererService,p=d.getViewportSize,h=d.readPixels,g=d.useFramebuffer,v=p(),b=v.width,y=v.height,x=r.layer.getLayerConfig(),k=x.enableHighlight,T=x.enableSelect,C=l*Pr,I=u*Pr;if(!(C>b||C<0||I>y||I<0)){var P;g(r.pickingFBO,function(){var j;if(P=h({x:Math.round(C),y:Math.round(y-(u+1)*Pr),width:1,height:1,data:new Uint8Array(1*1*4),framebuffer:r.pickingFBO}),P[0]!==0||P[1]!==0||P[2]!==0){var A=xs(P),S=r.layer.getSource().getFeatureById(A),M={x:l,y:u,type:f,lngLat:c,featureId:A,feature:S};S&&(r.layer.setCurrentPickId(A),r.triggerHoverOnLayer(M))}else{var O={x:l,y:u,lngLat:c,type:r.layer.getCurrentPickId()===null?"un"+f:"mouseout",featureId:null,feature:null};r.triggerHoverOnLayer(sO(sO({},O),{},{type:"unpick"})),r.triggerHoverOnLayer(O),r.layer.setCurrentPickId(null)}k&&r.highlightPickedFeature(P),T&&f==="click"&&((j=P)===null||j===void 0?void 0:j.toString())!==[0,0,0,0].toString()&&r.selectFeature(P)})}}}),r}return Oe(n,[{key:"getType",value:function(){return gu.Normal}},{key:"getName",value:function(){return"pixelPicking"}},{key:"init",value:function(a,i){pc(ke(n.prototype),"init",this).call(this,a,i),this.layer=a;var o=this.rendererService,s=o.createTexture2D,l=o.createFramebuffer,u=o.getViewportSize,c=u(),f=c.width,d=c.height;this.pickingFBO=l({color:s({width:f,height:d,wrapS:V.CLAMP_TO_EDGE,wrapT:V.CLAMP_TO_EDGE})}),this.interactionService.on(La.Hover,this.pickFromPickingFBO),this.interactionService.on(La.Select,this.selectFeatureHandle.bind(this)),this.interactionService.on(La.Active,this.highlightFeatureHandle.bind(this))}},{key:"render",value:function(a){var i=this;if(!this.alreadyInRendering){var o=this.rendererService,s=o.getViewportSize,l=o.useFramebuffer,u=o.clear,c=s(),f=c.width,d=c.height;this.alreadyInRendering=!0,(this.width!==f||this.height!==d)&&(this.pickingFBO.resize({width:f,height:d}),this.width=f,this.height=d),l(this.pickingFBO,function(){u({framebuffer:i.pickingFBO,color:[0,0,0,0],stencil:0,depth:1});var p=i.layer.multiPassRenderer.getRenderFlag();i.layer.multiPassRenderer.setRenderFlag(!1),a.hooks.beforePickingEncode.call(),a.render(),a.hooks.afterPickingEncode.call(),i.layer.multiPassRenderer.setRenderFlag(p),i.alreadyInRendering=!1})}}},{key:"triggerHoverOnLayer",value:function(a){this.layer.emit(a.type,a)}},{key:"highlightPickedFeature",value:function(a){var i=Le(a,3),o=i[0],s=i[1],l=i[2];this.layer.hooks.beforeHighlight.call([o,s,l]),this.layerService.renderLayers()}},{key:"selectFeature",value:function(a){var i=Le(a,3),o=i[0],s=i[1],l=i[2];this.layer.hooks.beforeSelect.call([o,s,l]),this.layerService.renderLayers()}},{key:"selectFeatureHandle",value:function(a){var i=a.featureId,o=lm(i);this.selectFeature(new Uint8Array(o))}},{key:"highlightFeatureHandle",value:function(a){var i=a.featureId,o=lm(i);this.highlightPickedFeature(new Uint8Array(o))}}]),n}(ly))||iO);function jce(e,t,n){var r=-1,a=e.length;t<0&&(t=-t>a?0:a+t),n=n>a?a:n,n<0&&(n+=a),a=t>n?0:n-t>>>0,t>>>=0;for(var i=Array(a);++r<a;)i[r]=e[r+t];return i}var Gce=jce,Hce=Gce;function Wce(e,t,n){var r=e.length;return n=n===void 0?r:n,!t&&n>=r?e:Hce(e,t,n)}var Yce=Wce,Xce="\\ud800-\\udfff",Zce="\\u0300-\\u036f",qce="\\ufe20-\\ufe2f",Kce="\\u20d0-\\u20ff",Qce=Zce+qce+Kce,Jce="\\ufe0e\\ufe0f",efe="\\u200d",tfe=RegExp("["+efe+Xce+Qce+Jce+"]");function nfe(e){return tfe.test(e)}var IF=nfe;function rfe(e){return e.split("")}var afe=rfe,LF="\\ud800-\\udfff",ife="\\u0300-\\u036f",ofe="\\ufe20-\\ufe2f",sfe="\\u20d0-\\u20ff",lfe=ife+ofe+sfe,ufe="\\ufe0e\\ufe0f",cfe="["+LF+"]",lk="["+lfe+"]",uk="\\ud83c[\\udffb-\\udfff]",ffe="(?:"+lk+"|"+uk+")",NF="[^"+LF+"]",FF="(?:\\ud83c[\\udde6-\\uddff]){2}",DF="[\\ud800-\\udbff][\\udc00-\\udfff]",dfe="\\u200d",BF=ffe+"?",zF="["+ufe+"]?",pfe="(?:"+dfe+"(?:"+[NF,FF,DF].join("|")+")"+zF+BF+")*",hfe=zF+BF+pfe,mfe="(?:"+[NF+lk+"?",lk,FF,DF,cfe].join("|")+")",gfe=RegExp(uk+"(?="+uk+")|"+mfe+hfe,"g");function vfe(e){return e.match(gfe)||[]}var bfe=vfe,yfe=afe,xfe=IF,_fe=bfe;function wfe(e){return xfe(e)?_fe(e):yfe(e)}var kfe=wfe;function Efe(e,t){for(var n=-1,r=e==null?0:e.length,a=Array(r);++n<r;)a[n]=t(e[n],n,e);return a}var Sfe=Efe,Cfe=Eu,Tfe=es,Afe="[object Symbol]";function Ofe(e){return typeof e=="symbol"||Tfe(e)&&Cfe(e)==Afe}var Mfe=Ofe,lO=Bm,Rfe=Sfe,Pfe=Mc,Ife=Mfe,Lfe=1/0,uO=lO?lO.prototype:void 0,cO=uO?uO.toString:void 0;function UF(e){if(typeof e=="string")return e;if(Pfe(e))return Rfe(e,UF)+"";if(Ife(e))return cO?cO.call(e):"";var t=e+"";return t=="0"&&1/e==-Lfe?"-0":t}var Nfe=UF,Ffe=Nfe;function Dfe(e){return e==null?"":Ffe(e)}var uy=Dfe,Bfe=Yce,zfe=IF,Ufe=kfe,$fe=uy;function Vfe(e){return function(t){t=$fe(t);var n=zfe(t)?Ufe(t):void 0,r=n?n[0]:t.charAt(0),a=n?Bfe(n,1).join(""):t.slice(1);return r[e]()+a}}var jfe=Vfe,Gfe=jfe,Hfe=Gfe("toUpperCase"),$F=Hfe,Wfe=uy,Yfe=$F;function Xfe(e){return Yfe(Wfe(e).toLowerCase())}var Zfe=Xfe;function qfe(e,t,n,r){var a=-1,i=e==null?0:e.length;for(r&&i&&(n=e[++a]);++a<i;)n=t(n,e[a],a,e);return n}var Kfe=qfe;function Qfe(e){return function(t){return e==null?void 0:e[t]}}var Jfe=Qfe,ede=Jfe,tde={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},nde=ede(tde),rde=nde,ade=rde,ide=uy,ode=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,sde="\\u0300-\\u036f",lde="\\ufe20-\\ufe2f",ude="\\u20d0-\\u20ff",cde=sde+lde+ude,fde="["+cde+"]",dde=RegExp(fde,"g");function pde(e){return e=ide(e),e&&e.replace(ode,ade).replace(dde,"")}var hde=pde,mde=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;function gde(e){return e.match(mde)||[]}var vde=gde,bde=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;function yde(e){return bde.test(e)}var xde=yde,VF="\\ud800-\\udfff",_de="\\u0300-\\u036f",wde="\\ufe20-\\ufe2f",kde="\\u20d0-\\u20ff",Ede=_de+wde+kde,jF="\\u2700-\\u27bf",GF="a-z\\xdf-\\xf6\\xf8-\\xff",Sde="\\xac\\xb1\\xd7\\xf7",Cde="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Tde="\\u2000-\\u206f",Ade=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",HF="A-Z\\xc0-\\xd6\\xd8-\\xde",Ode="\\ufe0e\\ufe0f",WF=Sde+Cde+Tde+Ade,YF="['\u2019]",fO="["+WF+"]",Mde="["+Ede+"]",XF="\\d+",Rde="["+jF+"]",ZF="["+GF+"]",qF="[^"+VF+WF+XF+jF+GF+HF+"]",Pde="\\ud83c[\\udffb-\\udfff]",Ide="(?:"+Mde+"|"+Pde+")",Lde="[^"+VF+"]",KF="(?:\\ud83c[\\udde6-\\uddff]){2}",QF="[\\ud800-\\udbff][\\udc00-\\udfff]",wf="["+HF+"]",Nde="\\u200d",dO="(?:"+ZF+"|"+qF+")",Fde="(?:"+wf+"|"+qF+")",pO="(?:"+YF+"(?:d|ll|m|re|s|t|ve))?",hO="(?:"+YF+"(?:D|LL|M|RE|S|T|VE))?",JF=Ide+"?",eD="["+Ode+"]?",Dde="(?:"+Nde+"(?:"+[Lde,KF,QF].join("|")+")"+eD+JF+")*",Bde="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",zde="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Ude=eD+JF+Dde,$de="(?:"+[Rde,KF,QF].join("|")+")"+Ude,Vde=RegExp([wf+"?"+ZF+"+"+pO+"(?="+[fO,wf,"$"].join("|")+")",Fde+"+"+hO+"(?="+[fO,wf+dO,"$"].join("|")+")",wf+"?"+dO+"+"+pO,wf+"+"+hO,zde,Bde,XF,$de].join("|"),"g");function jde(e){return e.match(Vde)||[]}var Gde=jde,Hde=vde,Wde=xde,Yde=uy,Xde=Gde;function Zde(e,t,n){return e=Yde(e),t=n?void 0:t,t===void 0?Wde(e)?Xde(e):Hde(e):e.match(t)||[]}var qde=Zde,Kde=Kfe,Qde=hde,Jde=qde,epe="['\u2019]",tpe=RegExp(epe,"g");function npe(e){return function(t){return Kde(Jde(Qde(t).replace(tpe,"")),e,"")}}var rpe=npe,ape=Zfe,ipe=rpe,ope=ipe(function(e,t,n){return t=t.toLowerCase(),e+(n?ape(t):t)}),spe=ope,mO,gO,vO,X1,bO;function yO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function jp(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?yO(Object(n),!0).forEach(function(r){m(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):yO(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var lpe=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,gl=(mO=sn(),gO=dn(xe.IShaderModuleService),mO(vO=(X1=function(){function e(){Ae(this,e),an(this,"shaderModuleService",bO,this),m(this,"rendererService",void 0),m(this,"config",void 0),m(this,"quad",lpe),m(this,"enabled",!0),m(this,"renderToScreen",!1),m(this,"model",void 0),m(this,"name",void 0),m(this,"optionsToUpdate",{})}return Oe(e,[{key:"getName",value:function(){return this.name}},{key:"setName",value:function(n){this.name=n}},{key:"getType",value:function(){return gu.PostProcessing}},{key:"init",value:function(n,r){this.config=r,this.rendererService=n.getContainer().get(xe.IRendererService),this.shaderModuleService=n.getContainer().get(xe.IShaderModuleService);var a=this.rendererService,i=a.createAttribute,o=a.createBuffer,s=a.createModel,l=this.setupShaders(),u=l.vs,c=l.fs,f=l.uniforms;this.model=s({vs:u,fs:c,attributes:{a_Position:i({buffer:o({data:[-4,-4,4,-4,0,4],type:V.FLOAT}),size:2})},uniforms:jp(jp({u_Texture:null},f),this.config&&this.convertOptionsToUniforms(this.config)),depth:{enable:!1},count:3,blend:{enable:this.getName()==="copy"}})}},{key:"render",value:function(n,r){var a=this,i=n.multiPassRenderer.getPostProcessor(),o=this.rendererService,s=o.useFramebuffer,l=o.getViewportSize,u=o.clear,c=l(),f=c.width,d=c.height;s(this.renderToScreen?null:i.getWriteFBO(),function(){u({framebuffer:i.getWriteFBO(),color:[0,0,0,0],depth:1,stencil:0});var p=jp({u_BloomFinal:0,u_Texture:i.getReadFBO(),u_ViewportSize:[f,d]},a.convertOptionsToUniforms(a.optionsToUpdate));r&&(p.u_BloomFinal=1,p.u_Texture2=r),a.model.draw({uniforms:p})})}},{key:"isEnabled",value:function(){return this.enabled}},{key:"setEnabled",value:function(n){this.enabled=n}},{key:"setRenderToScreen",value:function(n){this.renderToScreen=n}},{key:"updateOptions",value:function(n){this.optionsToUpdate=jp(jp({},this.optionsToUpdate),n)}},{key:"setupShaders",value:function(){throw new Error("Method not implemented.")}},{key:"convertOptionsToUniforms",value:function(n){var r={};return Object.keys(n).forEach(function(a){ol(n[a])||(r["u_".concat($F(spe(a)))]=n[a])}),r}}]),e}(),bO=rn(X1.prototype,"shaderModuleService",[gO],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),X1))||vO),xO,_O;function wO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function kO(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?wO(Object(n),!0).forEach(function(r){m(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):wO(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function upe(e){var t=cpe();return function(){var r=ke(e),a;if(t){var i=ke(this).constructor;a=Reflect.construct(r,arguments,i)}else a=r.apply(this,arguments);return It(this,a)}}function cpe(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var fpe=`varying vec2 v_UV;

uniform float u_BloomFinal: 0.0;
uniform sampler2D u_Texture;
uniform sampler2D u_Texture2;

uniform vec2 u_ViewportSize: [1.0, 1.0];
uniform float u_radius: 5.0;
uniform float u_intensity: 0.3;
uniform float u_baseRadio: 0.5;

// https://github.com/Jam3/glsl-fast-gaussian-blur/blob/master/9.glsl
vec4 blur9(sampler2D image, vec2 uv, vec2 resolution, vec2 direction) {
  vec4 color = vec4(0.0);
  vec2 off1 = vec2(1.3846153846) * direction;
  vec2 off2 = vec2(3.2307692308) * direction;
  color += texture2D(image, uv) * 0.2270270270;
  color += texture2D(image, uv + (off1 / resolution)) * 0.3162162162;
  color += texture2D(image, uv - (off1 / resolution)) * 0.3162162162;
  color += texture2D(image, uv + (off2 / resolution)) * 0.0702702703;
  color += texture2D(image, uv - (off2 / resolution)) * 0.0702702703;
  return color;
}

float luminance(vec4 color) {
  return  0.2125 * color.r + 0.7154 * color.g + 0.0721 * color.b;
}

void main() {
  // vec4 baseColor = texture2D(u_Texture, v_UV);

  float r = sqrt(u_radius);

  vec4 c1 = blur9(u_Texture, v_UV, u_ViewportSize, vec2(u_radius, 0.0));
  // c1 *= luminance(c1);
  vec4 c2 = blur9(u_Texture, v_UV, u_ViewportSize, vec2(0.0, u_radius));
  // c2 *= luminance(c2);
  vec4 c3 = blur9(u_Texture, v_UV, u_ViewportSize, vec2(r, r));
  // c3 *= luminance(c3);
  vec4 c4 = blur9(u_Texture, v_UV, u_ViewportSize, vec2(r, -r));
  // c4 *= luminance(c4);
  vec4 inbloomColor = (c1 + c2 + c3 + c4) * 0.25;

  // float lum = luminance(inbloomColor);
  // inbloomColor.rgb *= lum;

  if(u_BloomFinal > 0.0) {
    vec4 baseColor = texture2D(u_Texture2, v_UV);
    float baselum = luminance(baseColor);
    gl_FragColor = mix(inbloomColor, baseColor, u_baseRadio);
    if(baselum <= 0.2) {
      gl_FragColor = inbloomColor * u_intensity;
    }
  } else {
    gl_FragColor = inbloomColor;
  }
}`,dpe=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,ppe=(xO=sn(),xO(_O=function(e){Tt(n,e);var t=upe(n);function n(){return Ae(this,n),t.apply(this,arguments)}return Oe(n,[{key:"setupShaders",value:function(){this.shaderModuleService.registerModule("blur-pass",{vs:dpe,fs:fpe});var a=this.shaderModuleService.getModule("blur-pass"),i=a.vs,o=a.fs,s=a.uniforms,l=this.rendererService.getViewportSize(),u=l.width,c=l.height;return{vs:i,fs:o,uniforms:kO(kO({},s),{},{u_ViewportSize:[u,c]})}}},{key:"convertOptionsToUniforms",value:function(a){var i={};return ol(a.bloomRadius)||(i.u_radius=a.bloomRadius),ol(a.bloomIntensity)||(i.u_intensity=a.bloomIntensity),ol(a.bloomBaseRadio)||(i.u_baseRadio=a.bloomBaseRadio),i}}]),n}(gl))||_O),EO,SO;function CO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function TO(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?CO(Object(n),!0).forEach(function(r){m(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):CO(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function hpe(e){var t=mpe();return function(){var r=ke(e),a;if(t){var i=ke(this).constructor;a=Reflect.construct(r,arguments,i)}else a=r.apply(this,arguments);return It(this,a)}}function mpe(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var gpe=`varying vec2 v_UV;

uniform sampler2D u_Texture;

uniform vec2 u_ViewportSize: [1.0, 1.0];
uniform vec2 u_BlurDir: [1.0, 0.0];

// https://github.com/Jam3/glsl-fast-gaussian-blur/blob/master/9.glsl
vec4 blur9(sampler2D image, vec2 uv, vec2 resolution, vec2 direction) {
  vec4 color = vec4(0.0);
  vec2 off1 = vec2(1.3846153846) * direction;
  vec2 off2 = vec2(3.2307692308) * direction;
  color += texture2D(image, uv) * 0.2270270270;
  color += texture2D(image, uv + (off1 / resolution)) * 0.3162162162;
  color += texture2D(image, uv - (off1 / resolution)) * 0.3162162162;
  color += texture2D(image, uv + (off2 / resolution)) * 0.0702702703;
  color += texture2D(image, uv - (off2 / resolution)) * 0.0702702703;
  return color;
}

void main() {
  gl_FragColor = blur9(u_Texture, v_UV, u_ViewportSize, u_BlurDir);
}`,vpe=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,bpe=(EO=sn(),EO(SO=function(e){Tt(n,e);var t=hpe(n);function n(){return Ae(this,n),t.apply(this,arguments)}return Oe(n,[{key:"setupShaders",value:function(){this.shaderModuleService.registerModule("blur-pass",{vs:vpe,fs:gpe});var a=this.shaderModuleService.getModule("blur-pass"),i=a.vs,o=a.fs,s=a.uniforms,l=this.rendererService.getViewportSize(),u=l.width,c=l.height;return{vs:i,fs:o,uniforms:TO(TO({},s),{},{u_ViewportSize:[u,c]})}}},{key:"convertOptionsToUniforms",value:function(a){var i={};return ol(a.blurRadius)||(i.u_BlurDir=[a.blurRadius,0]),i}}]),n}(gl))||SO),AO,OO;function MO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function RO(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?MO(Object(n),!0).forEach(function(r){m(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):MO(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function ype(e){var t=xpe();return function(){var r=ke(e),a;if(t){var i=ke(this).constructor;a=Reflect.construct(r,arguments,i)}else a=r.apply(this,arguments);return It(this,a)}}function xpe(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var _pe=`varying vec2 v_UV;

uniform sampler2D u_Texture;

uniform vec2 u_ViewportSize: [1.0, 1.0];
uniform vec2 u_BlurDir: [1.0, 0.0];

// https://github.com/Jam3/glsl-fast-gaussian-blur/blob/master/9.glsl
vec4 blur9(sampler2D image, vec2 uv, vec2 resolution, vec2 direction) {
  vec4 color = vec4(0.0);
  vec2 off1 = vec2(1.3846153846) * direction;
  vec2 off2 = vec2(3.2307692308) * direction;
  color += texture2D(image, uv) * 0.2270270270;
  color += texture2D(image, uv + (off1 / resolution)) * 0.3162162162;
  color += texture2D(image, uv - (off1 / resolution)) * 0.3162162162;
  color += texture2D(image, uv + (off2 / resolution)) * 0.0702702703;
  color += texture2D(image, uv - (off2 / resolution)) * 0.0702702703;
  return color;
}

void main() {
  gl_FragColor = blur9(u_Texture, v_UV, u_ViewportSize, u_BlurDir);
}`,wpe=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,kpe=(AO=sn(),AO(OO=function(e){Tt(n,e);var t=ype(n);function n(){return Ae(this,n),t.apply(this,arguments)}return Oe(n,[{key:"setupShaders",value:function(){this.shaderModuleService.registerModule("blur-pass",{vs:wpe,fs:_pe});var a=this.shaderModuleService.getModule("blur-pass"),i=a.vs,o=a.fs,s=a.uniforms,l=this.rendererService.getViewportSize(),u=l.width,c=l.height;return{vs:i,fs:o,uniforms:RO(RO({},s),{},{u_ViewportSize:[u,c]})}}},{key:"convertOptionsToUniforms",value:function(a){var i={};return ol(a.blurRadius)||(i.u_BlurDir=[0,a.blurRadius]),i}}]),n}(gl))||OO),PO,IO;function LO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function NO(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?LO(Object(n),!0).forEach(function(r){m(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):LO(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Epe(e){var t=Spe();return function(){var r=ke(e),a;if(t){var i=ke(this).constructor;a=Reflect.construct(r,arguments,i)}else a=r.apply(this,arguments);return It(this,a)}}function Spe(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var Cpe=`varying vec2 v_UV;

uniform sampler2D u_Texture;
uniform vec2 u_ViewportSize: [1.0, 1.0];
uniform vec2 u_Center : [0.5, 0.5];
uniform float u_Angle : 0;
uniform float u_Size : 8;

#pragma include "common"

float scale = PI / u_Size;

float pattern(float u_Angle, vec2 texSize, vec2 texCoord) {
  float s = sin(u_Angle), c = cos(u_Angle);
  vec2 tex = texCoord * texSize - u_Center * texSize;
  vec2 point = vec2(
    c * tex.x - s * tex.y,
    s * tex.x + c * tex.y
  ) * scale;
  return (sin(point.x) * sin(point.y)) * 4.0;
}

// https://github.com/evanw/glfx.js/blob/master/src/filters/fun/colorhalftone.js
vec4 colorHalftone_filterColor(vec4 color, vec2 texSize, vec2 texCoord) {
  vec3 cmy = 1.0 - color.rgb;
  float k = min(cmy.x, min(cmy.y, cmy.z));
  cmy = (cmy - k) / (1.0 - k);
  cmy = clamp(
    cmy * 10.0 - 3.0 + vec3(
      pattern(u_Angle + 0.26179, texSize, texCoord),
      pattern(u_Angle + 1.30899, texSize, texCoord),
      pattern(u_Angle, texSize, texCoord)
    ),
    0.0,
    1.0
  );
  k = clamp(k * 10.0 - 5.0 + pattern(u_Angle + 0.78539, texSize, texCoord), 0.0, 1.0);
  return vec4(1.0 - cmy - k, color.a);
}

void main() {
  gl_FragColor = vec4(texture2D(u_Texture, v_UV));
  gl_FragColor = colorHalftone_filterColor(gl_FragColor, u_ViewportSize, v_UV);
}`,Tpe=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,Ape=(PO=sn(),PO(IO=function(e){Tt(n,e);var t=Epe(n);function n(){return Ae(this,n),t.apply(this,arguments)}return Oe(n,[{key:"setupShaders",value:function(){this.shaderModuleService.registerModule("colorhalftone-pass",{vs:Tpe,fs:Cpe});var a=this.shaderModuleService.getModule("colorhalftone-pass"),i=a.vs,o=a.fs,s=a.uniforms,l=this.rendererService.getViewportSize(),u=l.width,c=l.height;return{vs:i,fs:o,uniforms:NO(NO({},s),{},{u_ViewportSize:[u,c]})}}}]),n}(gl))||IO),FO,DO;function Ope(e){var t=Mpe();return function(){var r=ke(e),a;if(t){var i=ke(this).constructor;a=Reflect.construct(r,arguments,i)}else a=r.apply(this,arguments);return It(this,a)}}function Mpe(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var Rpe=`varying vec2 v_UV;

uniform sampler2D u_Texture;

void main() {
  gl_FragColor = vec4(texture2D(u_Texture, v_UV));
}`,Ppe=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,Ipe=(FO=sn(),FO(DO=function(e){Tt(n,e);var t=Ope(n);function n(){return Ae(this,n),t.apply(this,arguments)}return Oe(n,[{key:"setupShaders",value:function(){return this.shaderModuleService.registerModule("copy-pass",{vs:Ppe,fs:Rpe}),this.shaderModuleService.getModule("copy-pass")}}]),n}(gl))||DO),BO,zO;function UO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function $O(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?UO(Object(n),!0).forEach(function(r){m(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):UO(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Lpe(e){var t=Npe();return function(){var r=ke(e),a;if(t){var i=ke(this).constructor;a=Reflect.construct(r,arguments,i)}else a=r.apply(this,arguments);return It(this,a)}}function Npe(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var Fpe=`varying vec2 v_UV;

uniform sampler2D u_Texture;
uniform vec2 u_ViewportSize: [1.0, 1.0];
uniform vec2 u_Center : [0.5, 0.5];
uniform float u_Scale : 10;

// https://github.com/evanw/glfx.js/blob/master/src/filters/fun/hexagonalpixelate.js
vec4 hexagonalPixelate_sampleColor(sampler2D texture, vec2 texSize, vec2 texCoord) {
  vec2 tex = (texCoord * texSize - u_Center * texSize) / u_Scale;
  tex.y /= 0.866025404;
  tex.x -= tex.y * 0.5;
  vec2 a;
  if (tex.x + tex.y - floor(tex.x) - floor(tex.y) < 1.0) {
    a = vec2(floor(tex.x), floor(tex.y));
  }
  else a = vec2(ceil(tex.x), ceil(tex.y));
  vec2 b = vec2(ceil(tex.x), floor(tex.y));
  vec2 c = vec2(floor(tex.x), ceil(tex.y));
  vec3 TEX = vec3(tex.x, tex.y, 1.0 - tex.x - tex.y);
  vec3 A = vec3(a.x, a.y, 1.0 - a.x - a.y);
  vec3 B = vec3(b.x, b.y, 1.0 - b.x - b.y);
  vec3 C = vec3(c.x, c.y, 1.0 - c.x - c.y);
  float alen = length(TEX - A);
  float blen = length(TEX - B);
  float clen = length(TEX - C);
  vec2 choice;
  if (alen < blen) {
    if (alen < clen) choice = a;
    else choice = c;
  } else {
    if (blen < clen) choice = b;
    else choice = c;
  }
  choice.x += choice.y * 0.5;
  choice.y *= 0.866025404;
  choice *= u_Scale / texSize;
  return texture2D(texture, choice + u_Center);
}

void main() {
  gl_FragColor = vec4(texture2D(u_Texture, v_UV));
  gl_FragColor = hexagonalPixelate_sampleColor(u_Texture, u_ViewportSize, v_UV);
}`,Dpe=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,Bpe=(BO=sn(),BO(zO=function(e){Tt(n,e);var t=Lpe(n);function n(){return Ae(this,n),t.apply(this,arguments)}return Oe(n,[{key:"setupShaders",value:function(){this.shaderModuleService.registerModule("hexagonalpixelate-pass",{vs:Dpe,fs:Fpe});var a=this.shaderModuleService.getModule("hexagonalpixelate-pass"),i=a.vs,o=a.fs,s=a.uniforms,l=this.rendererService.getViewportSize(),u=l.width,c=l.height;return{vs:i,fs:o,uniforms:$O($O({},s),{},{u_ViewportSize:[u,c]})}}}]),n}(gl))||zO),VO,jO;function GO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function HO(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?GO(Object(n),!0).forEach(function(r){m(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):GO(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function zpe(e){var t=Upe();return function(){var r=ke(e),a;if(t){var i=ke(this).constructor;a=Reflect.construct(r,arguments,i)}else a=r.apply(this,arguments);return It(this,a)}}function Upe(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var $pe=`varying vec2 v_UV;

uniform sampler2D u_Texture;
uniform vec2 u_ViewportSize: [1.0, 1.0];
uniform float u_Strength : 0.6;

vec4 ink_sampleColor(sampler2D texture, vec2 texSize, vec2 texCoord) {
  vec2 dx = vec2(1.0 / texSize.x, 0.0);
  vec2 dy = vec2(0.0, 1.0 / texSize.y);
  vec4 color = texture2D(texture, texCoord);
  float bigTotal = 0.0;
  float smallTotal = 0.0;
  vec3 bigAverage = vec3(0.0);
  vec3 smallAverage = vec3(0.0);
  for (float x = -2.0; x <= 2.0; x += 1.0) {
    for (float y = -2.0; y <= 2.0; y += 1.0) {
      vec3 sample = texture2D(texture, texCoord + dx * x + dy * y).rgb;
      bigAverage += sample;
      bigTotal += 1.0;
      if (abs(x) + abs(y) < 2.0) {
        smallAverage += sample;
        smallTotal += 1.0;
      }
    }
  }
  vec3 edge = max(vec3(0.0), bigAverage / bigTotal - smallAverage / smallTotal);
  float power = u_Strength * u_Strength * u_Strength * u_Strength * u_Strength;
  return vec4(color.rgb - dot(edge, edge) * power * 100000.0, color.a);
}

void main() {
  gl_FragColor = vec4(texture2D(u_Texture, v_UV));
  gl_FragColor = ink_sampleColor(u_Texture, u_ViewportSize, v_UV);
}`,Vpe=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,jpe=(VO=sn(),VO(jO=function(e){Tt(n,e);var t=zpe(n);function n(){return Ae(this,n),t.apply(this,arguments)}return Oe(n,[{key:"setupShaders",value:function(){this.shaderModuleService.registerModule("ink-pass",{vs:Vpe,fs:$pe});var a=this.shaderModuleService.getModule("ink-pass"),i=a.vs,o=a.fs,s=a.uniforms,l=this.rendererService.getViewportSize(),u=l.width,c=l.height;return{vs:i,fs:o,uniforms:HO(HO({},s),{},{u_ViewportSize:[u,c]})}}}]),n}(gl))||jO),WO,YO;function Gpe(e){var t=Hpe();return function(){var r=ke(e),a;if(t){var i=ke(this).constructor;a=Reflect.construct(r,arguments,i)}else a=r.apply(this,arguments);return It(this,a)}}function Hpe(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var Wpe=`varying vec2 v_UV;

uniform sampler2D u_Texture;
uniform float u_Amount : 0.5;

float rand(vec2 co) {
  return fract(sin(dot(co.xy ,vec2(12.9898,78.233))) * 43758.5453);
}

// https://github.com/evanw/glfx.js/blob/master/src/filters/adjust/noise.js
vec4 noise_filterColor(vec4 color, vec2 texCoord) {
  float diff = (rand(texCoord) - 0.5) * u_Amount;
  color.r += diff;
  color.g += diff;
  color.b += diff;
  return color;
}

void main() {
  gl_FragColor = vec4(texture2D(u_Texture, v_UV));
  gl_FragColor = noise_filterColor(gl_FragColor, v_UV);
}`,Ype=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,Xpe=(WO=sn(),WO(YO=function(e){Tt(n,e);var t=Gpe(n);function n(){return Ae(this,n),t.apply(this,arguments)}return Oe(n,[{key:"setupShaders",value:function(){return this.shaderModuleService.registerModule("noise-pass",{vs:Ype,fs:Wpe}),this.shaderModuleService.getModule("noise-pass")}}]),n}(gl))||YO),XO,ZO;function Zpe(e){var t=qpe();return function(){var r=ke(e),a;if(t){var i=ke(this).constructor;a=Reflect.construct(r,arguments,i)}else a=r.apply(this,arguments);return It(this,a)}}function qpe(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var Kpe=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,Qpe=`varying vec2 v_UV;

uniform sampler2D u_Texture;

uniform float u_Amount : 0.5;

// https://github.com/evanw/glfx.js/blob/master/src/filters/adjust/sepia.js
vec4 sepia_filterColor(vec4 color) {
  float r = color.r;
  float g = color.g;
  float b = color.b;
  color.r =
    min(1.0, (r * (1.0 - (0.607 * u_Amount))) + (g * (0.769 * u_Amount)) + (b * (0.189 * u_Amount)));
  color.g = min(1.0, (r * 0.349 * u_Amount) + (g * (1.0 - (0.314 * u_Amount))) + (b * 0.168 * u_Amount));
  color.b = min(1.0, (r * 0.272 * u_Amount) + (g * 0.534 * u_Amount) + (b * (1.0 - (0.869 * u_Amount))));
  return color;
}

void main() {
  gl_FragColor = vec4(texture2D(u_Texture, v_UV));
  gl_FragColor = sepia_filterColor(gl_FragColor);
}`,Jpe=(XO=sn(),XO(ZO=function(e){Tt(n,e);var t=Zpe(n);function n(){return Ae(this,n),t.apply(this,arguments)}return Oe(n,[{key:"setupShaders",value:function(){return this.shaderModuleService.registerModule("sepia-pass",{vs:Kpe,fs:Qpe}),this.shaderModuleService.getModule("sepia-pass")}}]),n}(gl))||ZO),qO,KO,QO,JO,sf,eM,ehe=(qO=sn(),KO=dn(xe.IRendererService),QO=qoe(),qO(JO=(sf=function(){function e(){Ae(this,e),an(this,"rendererService",eM,this),m(this,"passes",[]),m(this,"readFBO",void 0),m(this,"writeFBO",void 0)}return Oe(e,[{key:"getReadFBO",value:function(){return this.readFBO}},{key:"getWriteFBO",value:function(){return this.writeFBO}},{key:"getCurrentFBOTex",value:function(){var n=this.rendererService,r=n.getViewportSize,a=n.createTexture2D,i=r(),o=i.width,s=i.height;return a({x:0,y:0,width:o,height:s,copy:!0})}},{key:"getReadFBOTex",value:function(){var n=this,r=this.rendererService.useFramebuffer;return new Promise(function(a,i){r(n.readFBO,lr(vn.mark(function o(){return vn.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:a(n.getCurrentFBOTex());case 1:case"end":return l.stop()}},o)})))})}},{key:"renderBloomPass",value:function(){var t=lr(vn.mark(function r(a,i){var o,s;return vn.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,this.getReadFBOTex();case 2:o=u.sent,s=0;case 4:if(!(s<4)){u.next=11;break}return u.next=7,i.render(a,o);case 7:this.swap(),s++,u.next=4;break;case 11:case"end":return u.stop()}},r,this)}));function n(r,a){return t.apply(this,arguments)}return n}()},{key:"render",value:function(){var t=lr(vn.mark(function r(a){var i,o;return vn.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:i=0;case 1:if(!(i<this.passes.length)){l.next=15;break}if(o=this.passes[i],o.setRenderToScreen(this.isLastEnabledPass(i)),o.getName()!=="bloom"){l.next=9;break}return l.next=7,this.renderBloomPass(a,o);case 7:l.next=12;break;case 9:return l.next=11,o.render(a);case 11:i!==this.passes.length-1&&this.swap();case 12:i++,l.next=1;break;case 15:case"end":return l.stop()}},r,this)}));function n(r){return t.apply(this,arguments)}return n}()},{key:"resize",value:function(n,r){this.readFBO.resize({width:n,height:r}),this.writeFBO.resize({width:n,height:r})}},{key:"add",value:function(n,r,a){n.init(r,a),this.passes.push(n)}},{key:"insert",value:function(n,r,a,i){n.init(a,i),this.passes.splice(r,0,n)}},{key:"getPostProcessingPassByName",value:function(n){return this.passes.find(function(r){return r.getName()===n})}},{key:"init",value:function(){var n=this.rendererService,r=n.createFramebuffer,a=n.createTexture2D;this.readFBO=r({color:a({width:1,height:1,wrapS:V.CLAMP_TO_EDGE,wrapT:V.CLAMP_TO_EDGE})}),this.writeFBO=r({color:a({width:1,height:1,wrapS:V.CLAMP_TO_EDGE,wrapT:V.CLAMP_TO_EDGE})})}},{key:"isLastEnabledPass",value:function(n){for(var r=n+1;r<this.passes.length;r++)if(this.passes[r].isEnabled())return!1;return!0}},{key:"swap",value:function(){var n=this.readFBO;this.readFBO=this.writeFBO,this.writeFBO=n}}]),e}(),eM=rn(sf.prototype,"rendererService",[KO],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),rn(sf.prototype,"init",[QO],Object.getOwnPropertyDescriptor(sf.prototype,"init"),sf.prototype),sf))||JO),tM,nM;function the(e){var t=nhe();return function(){var r=ke(e),a;if(t){var i=ke(this).constructor;a=Reflect.construct(r,arguments,i)}else a=r.apply(this,arguments);return It(this,a)}}function nhe(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var rhe=(tM=sn(),tM(nM=function(e){Tt(n,e);var t=the(n);function n(){return Ae(this,n),t.apply(this,arguments)}return Oe(n,[{key:"getType",value:function(){return gu.Normal}},{key:"getName",value:function(){return"render"}},{key:"init",value:function(a,i){pc(ke(n.prototype),"init",this).call(this,a,i)}},{key:"render",value:function(a){var i=this.rendererService,o=i.useFramebuffer,s=i.clear,l=a.multiPassRenderer.getPostProcessor().getReadFBO();o(l,function(){s({color:[0,0,0,0],depth:1,stencil:0,framebuffer:l}),a.multiPassRenderer.setRenderFlag(!1),a.models.forEach(function(u){u.draw({uniforms:a.layerModel.getUninforms()})}),a.multiPassRenderer.setRenderFlag(!0)})}}]),n}(ly))||nM),rM,aM,iM,Z1,oM;function sM(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function lM(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?sM(Object(n),!0).forEach(function(r){m(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):sM(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function ahe(e){var t=ihe();return function(){var r=ke(e),a;if(t){var i=ke(this).constructor;a=Reflect.construct(r,arguments,i)}else a=r.apply(this,arguments);return It(this,a)}}function ihe(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var ohe=`uniform float u_opacity : 1.0;
uniform float u_MixRatio : 0.5;

uniform sampler2D u_Diffuse1;
uniform sampler2D u_Diffuse2;

varying vec2 v_UV;

void main() {
  vec4 texel1 = texture2D(u_Diffuse1, v_UV);
  vec4 texel2 = texture2D(u_Diffuse2, v_UV);
  gl_FragColor = u_opacity * mix(texel1, texel2, u_MixRatio);
}
`,uM=`varying vec2 v_UV;

uniform sampler2D u_Texture;

void main() {
  gl_FragColor = vec4(texture2D(u_Texture, v_UV));
}`,she=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`;function cM(e,t){for(var n=0,r=1/t,a=e;a>0;)n=n+r*(a%t),a=Math.floor(a/t),r=r/t;return n}var lhe=1,uhe=(rM=sn(),aM=dn(xe.IShaderModuleService),rM(iM=(Z1=function(e){Tt(n,e);var t=ahe(n);function n(){var r;Ae(this,n);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return r=t.call.apply(t,[this].concat(i)),an(D(r),"shaderModuleService",oM,D(r)),m(D(r),"haltonSequence",[]),m(D(r),"accumulatingId",0),m(D(r),"frame",0),m(D(r),"timer",void 0),m(D(r),"sampleRenderTarget",void 0),m(D(r),"prevRenderTarget",void 0),m(D(r),"outputRenderTarget",void 0),m(D(r),"copyRenderTarget",void 0),m(D(r),"blendModel",void 0),m(D(r),"outputModel",void 0),m(D(r),"copyModel",void 0),r}return Oe(n,[{key:"getType",value:function(){return gu.Normal}},{key:"getName",value:function(){return"taa"}},{key:"init",value:function(a,i){pc(ke(n.prototype),"init",this).call(this,a,i);var o=this.rendererService,s=o.createFramebuffer,l=o.createTexture2D;this.sampleRenderTarget=s({color:l({width:1,height:1,wrapS:V.CLAMP_TO_EDGE,wrapT:V.CLAMP_TO_EDGE})}),this.prevRenderTarget=s({color:l({width:1,height:1,wrapS:V.CLAMP_TO_EDGE,wrapT:V.CLAMP_TO_EDGE})}),this.outputRenderTarget=s({color:l({width:1,height:1,wrapS:V.CLAMP_TO_EDGE,wrapT:V.CLAMP_TO_EDGE})}),this.copyRenderTarget=s({color:l({width:1,height:1,wrapS:V.CLAMP_TO_EDGE,wrapT:V.CLAMP_TO_EDGE})});for(var u=0;u<30;u++)this.haltonSequence.push([cM(u,2),cM(u,3)]);this.blendModel=this.createTriangleModel("blend-pass",ohe),this.outputModel=this.createTriangleModel("copy-pass",uM,{blend:{enable:!0,func:{srcRGB:V.ONE,dstRGB:V.ONE_MINUS_SRC_ALPHA,srcAlpha:V.ONE,dstAlpha:V.ONE_MINUS_SRC_ALPHA},equation:{rgb:V.FUNC_ADD,alpha:V.FUNC_ADD}}}),this.copyModel=this.createTriangleModel("copy-pass",uM)}},{key:"render",value:function(a){var i=this,o=this.rendererService,s=o.clear,l=o.getViewportSize,u=o.useFramebuffer,c=l(),f=c.width,d=c.height;this.sampleRenderTarget.resize({width:f,height:d}),this.prevRenderTarget.resize({width:f,height:d}),this.outputRenderTarget.resize({width:f,height:d}),this.copyRenderTarget.resize({width:f,height:d}),this.resetFrame(),this.stopAccumulating();var p=a.multiPassRenderer.getPostProcessor().getReadFBO();u(p,function(){s({color:[0,0,0,0],depth:1,stencil:0,framebuffer:p}),a.multiPassRenderer.setRenderFlag(!1),a.render(),a.multiPassRenderer.setRenderFlag(!0)});var h=function g(v){!i.accumulatingId||v!==i.accumulatingId||i.isFinished()||(i.doRender(a),tr.requestAnimationFrame(function(){g(v)}))};this.accumulatingId=lhe++,this.timer=tr.setTimeout(function(){h(i.accumulatingId)},50)}},{key:"doRender",value:function(a){var i=this,o=this.rendererService,s=o.clear,l=o.getViewportSize,u=o.useFramebuffer,c=l(),f=c.width,d=c.height,p=a.getLayerConfig(),h=p.jitterScale,g=h===void 0?1:h,v=this.haltonSequence[this.frame%this.haltonSequence.length];this.cameraService.jitterProjectionMatrix((v[0]*2-1)/f*g,(v[1]*2-1)/d*g),a.multiPassRenderer.setRenderFlag(!1),a.hooks.beforeRender.call(),u(this.sampleRenderTarget,function(){s({color:[0,0,0,0],depth:1,stencil:0,framebuffer:i.sampleRenderTarget}),a.render()}),a.hooks.afterRender.call(),a.multiPassRenderer.setRenderFlag(!0);var b=a.getLayerConfig();u(this.outputRenderTarget,function(){i.blendModel.draw({uniforms:{u_opacity:b.opacity||1,u_MixRatio:i.frame===0?1:.9,u_Diffuse1:i.sampleRenderTarget,u_Diffuse2:i.frame===0?a.multiPassRenderer.getPostProcessor().getReadFBO():i.prevRenderTarget}})}),this.frame===0&&s({color:[0,0,0,0],depth:1,stencil:0,framebuffer:this.copyRenderTarget}),this.frame>=1&&(u(this.copyRenderTarget,function(){i.outputModel.draw({uniforms:{u_Texture:i.outputRenderTarget}})}),u(a.multiPassRenderer.getPostProcessor().getReadFBO(),function(){i.copyModel.draw({uniforms:{u_Texture:i.copyRenderTarget}})}),a.multiPassRenderer.getPostProcessor().render(a));var y=this.prevRenderTarget;this.prevRenderTarget=this.outputRenderTarget,this.outputRenderTarget=y,this.frame++,this.cameraService.clearJitterProjectionMatrix()}},{key:"isFinished",value:function(){return this.frame>=this.haltonSequence.length}},{key:"resetFrame",value:function(){this.frame=0}},{key:"stopAccumulating",value:function(){this.accumulatingId=0,tr.clearTimeout(this.timer)}},{key:"createTriangleModel",value:function(a,i,o){this.shaderModuleService.registerModule(a,{vs:she,fs:i});var s=this.shaderModuleService.getModule(a),l=s.vs,u=s.fs,c=s.uniforms,f=this.rendererService,d=f.createAttribute,p=f.createBuffer,h=f.createModel;return h(lM({vs:l,fs:u,attributes:{a_Position:d({buffer:p({data:[-4,-4,4,-4,0,4],type:V.FLOAT}),size:2})},uniforms:lM({},c),depth:{enable:!1},count:3},o))}}]),n}(ly),oM=rn(Z1.prototype,"shaderModuleService",[aM],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Z1))||iM),za=new $E;za.bind(xe.IGlobalConfigService).to(qle).inSingletonScope();Aoe(sn(),Hi.exports.EventEmitter);za.bind(xe.IEventEmitter).to(Hi.exports.EventEmitter);var che=tse(za,!1),XE=function(t){var n=che.lazyInject(t);return function(r,a,i){n.call(this,r,a),i&&(i.initializer=function(){return r[a]})}},fhe=0;function dhe(){var e=new $E;return e.parent=za,e.bind(xe.SceneID).toConstantValue("".concat(fhe++)),e.bind(xe.IShaderModuleService).to(Pce).inSingletonScope(),e.bind(xe.ILayerService).to(fue).inSingletonScope(),e.bind(xe.ISceneService).to(kue).inSingletonScope(),e.bind(xe.ICameraService).to(Ble).inSingletonScope(),e.bind(xe.ICoordinateSystemService).to(Jle).inSingletonScope(),e.bind(xe.IInteractionService).to(rue).inSingletonScope(),e.bind(xe.IPickingService).to(sue).inSingletonScope(),e.bind(xe.IControlService).to($le).inSingletonScope(),e.bind(xe.IMarkerService).to(Vle).inSingletonScope(),e.bind(xe.IIconService).to(kse).inSingletonScope(),e.bind(xe.IFontService).to(yse).inSingletonScope(),e.bind(xe.IPopupService).to(jle).inSingletonScope(),e.bind(xe.INormalPass).to(Fce).whenTargetNamed("clear"),e.bind(xe.INormalPass).to(Vce).whenTargetNamed("pixelPicking"),e.bind(xe.INormalPass).to(rhe).whenTargetNamed("render"),e.bind(xe.INormalPass).to(uhe).whenTargetNamed("taa"),e.bind(xe.IFactoryNormalPass).toFactory(function(t){return function(n){return t.container.getNamed(xe.INormalPass,n)}}),e.bind(xe.IPostProcessingPass).to(Ipe).whenTargetNamed("copy"),e.bind(xe.IPostProcessingPass).to(ppe).whenTargetNamed("bloom"),e.bind(xe.IPostProcessingPass).to(bpe).whenTargetNamed("blurH"),e.bind(xe.IPostProcessingPass).to(kpe).whenTargetNamed("blurV"),e.bind(xe.IPostProcessingPass).to(Xpe).whenTargetNamed("noise"),e.bind(xe.IPostProcessingPass).to(Jpe).whenTargetNamed("sepia"),e.bind(xe.IPostProcessingPass).to(Ape).whenTargetNamed("colorHalftone"),e.bind(xe.IPostProcessingPass).to(Bpe).whenTargetNamed("hexagonalPixelate"),e.bind(xe.IPostProcessingPass).to(jpe).whenTargetNamed("ink"),e.bind(xe.IFactoryPostProcessingPass).toFactory(function(t){return function(n){var r=t.container.getNamed(xe.IPostProcessingPass,n);return r.setName(n),r}}),e}function ck(e){var t=new $E;return t.parent=e,t.bind(xe.IStyleAttributeService).to(bue).inSingletonScope(),t.bind(xe.IMultiPassRenderer).to(zce).inSingletonScope(),t.bind(xe.IPostProcessor).to(ehe).inSingletonScope(),t}var ho;(function(e){e.normal="normal",e.additive="additive",e.subtractive="subtractive",e.min="min",e.max="max",e.none="none"})(ho||(ho={}));var jn;(function(e){e.LINEAR="linear",e.SEQUENTIAL="sequential",e.POWER="power",e.LOG="log",e.IDENTITY="identity",e.TIME="time",e.QUANTILE="quantile",e.QUANTIZE="quantize",e.THRESHOLD="threshold",e.CAT="cat",e.DIVERGING="diverging"})(jn||(jn={}));var Ul;(function(e){e.CONSTANT="constant",e.VARIABLE="variable"})(Ul||(Ul={}));var kn;(function(e){e[e.Attribute=0]="Attribute",e[e.InstancedAttribute=1]="InstancedAttribute",e[e.Uniform=2]="Uniform"})(kn||(kn={}));var fM=["mapload","mapchange","mapAfterFrameChange"],Vu={ProjectionMatrix:"u_ProjectionMatrix",ViewMatrix:"u_ViewMatrix",ViewProjectionMatrix:"u_ViewProjectionMatrix",Zoom:"u_Zoom",ZoomScale:"u_ZoomScale",FocalDistance:"u_FocalDistance",CameraPosition:"u_CameraPosition"},q1=["loaded","maploaded","resize","destroy","dragstart","dragging","dragend","dragcancel"],vu;(function(e){e.TOPRIGHT="topright",e.TOPLEFT="topleft",e.BOTTOMRIGHT="bottomright",e.BOTTOMLEFT="bottomleft",e.TOPCENTER="topcenter",e.BOTTOMCENTER="bottomcenter",e.LEFTCENTER="leftcenter",e.RIGHTCENTER="rightcenter"})(vu||(vu={}));function dM(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function pM(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?dM(Object(n),!0).forEach(function(r){m(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):dM(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function phe(e){var t=hhe();return function(){var r=ke(e),a;if(t){var i=ke(this).constructor;a=Reflect.construct(r,arguments,i)}else a=r.apply(this,arguments);return It(this,a)}}function hhe(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var mhe=0,cy=function(e){Tt(n,e);var t=phe(n);function n(r){var a;return Ae(this,n),a=t.call(this),m(D(a),"controlOption",void 0),m(D(a),"container",void 0),m(D(a),"sceneContainer",void 0),m(D(a),"mapsService",void 0),m(D(a),"renderService",void 0),m(D(a),"layerService",void 0),m(D(a),"controlService",void 0),m(D(a),"isShow",void 0),a.controlOption=pM(pM({},a.getDefault()),r||{}),a}return Oe(n,[{key:"getDefault",value:function(){return{position:vu.TOPRIGHT,name:"".concat(mhe++)}}},{key:"setPosition",value:function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:vu.BOTTOMRIGHT,i=this.controlService;return i&&i.removeControl(this),this.controlOption.position=a,i&&i.addControl(this,this.sceneContainer),this}},{key:"addTo",value:function(a){this.mapsService=a.get(xe.IMapService),this.renderService=a.get(xe.IRendererService),this.layerService=a.get(xe.ILayerService),this.controlService=a.get(xe.IControlService),this.sceneContainer=a,this.isShow=!0,this.container=this.onAdd();var i=this.container,o=this.controlOption.position,s=this.controlService.controlCorners[o];return kc(i,"l7-control"),o.indexOf("bottom")!==-1?s.insertBefore(i,s.firstChild):s.appendChild(i),this}},{key:"onAdd",value:function(){throw new Error("Method not implemented.")}},{key:"onRemove",value:function(){throw new Error("Method not implemented.")}},{key:"hide",value:function(){var a=this.container;kc(a,"l7-control-hide"),this.isShow=!1}},{key:"show",value:function(){var a=this.container;am(a,"l7-control-hide"),this.isShow=!0}},{key:"remove",value:function(){if(!this.mapsService)return this;vd(this.container),this.onRemove()}},{key:"_refocusOnMap",value:function(a){if(this.mapsService&&a&&a.screenX>0&&a.screenY>0){var i=this.mapsService.getContainer();i!==null&&i.focus()}}}]),n}(Hi.exports.EventEmitter);function ghe(e){var t=vhe();return function(){var r=ke(e),a;if(t){var i=ke(this).constructor;a=Reflect.construct(r,arguments,i)}else a=r.apply(this,arguments);return It(this,a)}}function vhe(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(function(e){Tt(n,e);var t=ghe(n);function n(r){var a;return Ae(this,n),a=t.call(this,r),m(D(a),"layerControlInputs",void 0),m(D(a),"layers",void 0),m(D(a),"lastZIndex",void 0),m(D(a),"handlingClick",void 0),m(D(a),"layersLink",void 0),m(D(a),"baseLayersList",void 0),m(D(a),"separator",void 0),m(D(a),"overlaysList",void 0),m(D(a),"form",void 0),a.layerControlInputs=[],a.layers=[],a.lastZIndex=0,a.handlingClick=!1,a.initLayers(),Dd(["checkDisabledLayers","onLayerChange","collapse","extend","expand","onInputClick"],D(a)),a}return Oe(n,[{key:"getDefault",value:function(){return{collapsed:!0,position:vu.TOPRIGHT,autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,name:"layers"}}},{key:"onAdd",value:function(){var a=this;return this.initLayout(),this.update(),this.mapsService.on("zoomend",this.checkDisabledLayers),this.layers.forEach(function(i){i.layer.on("remove",a.onLayerChange),i.layer.on("add",a.onLayerChange)}),this.container}},{key:"addVisualLayer",value:function(a,i){return this.addLayer(a,i,!0),this.mapsService?this.update():this}},{key:"expand",value:function(){var a=this.renderService.getViewportSize(),i=a.height;kc(this.container,"l7-control-layers-expanded"),this.form.style.height="null";var o=i-(this.container.offsetTop+50);return o<this.form.clientHeight?(kc(this.form,"l7-control-layers-scrollbar"),this.form.style.height=o+"px"):am(this.form,"l7-control-layers-scrollbar"),this.checkDisabledLayers(),this}},{key:"collapse",value:function(){return am(this.container,"l7-control-layers-expanded"),this}},{key:"onRemove",value:function(){var a=this;!this.mapsService||(this.mapsService.off("click",this.collapse),this.layers.forEach(function(i){i.layer.off("remove",a.onLayerChange),i.layer.off("add",a.onLayerChange)}))}},{key:"initLayout",value:function(){var a="l7-control-layers",i=this.container=Tr("div",a),o=this.controlOption.collapsed;i.setAttribute("aria-haspopup","true");var s=this.form=Tr("form",a+"-list");o&&(this.mapsService.on("click",this.collapse),i.addEventListener("mouseenter",this.expand),i.addEventListener("mouseleave",this.collapse)),this.layersLink=Tr("a",a+"-toggle",i);var l=this.layersLink;l.title="Layers",o||this.expand(),this.baseLayersList=Tr("div",a+"-base",s),this.separator=Tr("div",a+"-separator",s),this.overlaysList=Tr("div",a+"-overlays",s),i.appendChild(s)}},{key:"initLayers",value:function(){var a=this,i=this.controlOption,o=i.baseLayers,s=o===void 0?{}:o,l=i.overlayers,u=l===void 0?{}:l;Object.keys(s).forEach(function(c,f){a.addLayer(s[c],c,!1)}),Object.keys(u).forEach(function(c,f){a.addLayer(u[c],c,!0)})}},{key:"update",value:function(){if(!this.container)return this;PT(this.baseLayersList),PT(this.overlaysList),this.layerControlInputs=[];var a,i,o,s,l=0;for(o=0;o<this.layers.length;o++)s=this.layers[o],this.addItem(s),i=i||s.overlay,a=a||!s.overlay,l+=s.overlay?0:1;return this.controlOption.hideSingleBase&&(a=a&&l>1,this.baseLayersList.style.display=a?"":"none"),this.separator.style.display=i&&a?"":"none",this}},{key:"checkDisabledLayers",value:function(){for(var a=this.layerControlInputs,i,o,s=this.mapsService.getZoom(),l=a.length-1;l>=0;l--)if(i=a[l],o=this.layerService.getLayer(i.layerId),o&&o.inited){var u=o.getMinZoom(),c=o.getMaxZoom();i.disabled=s<u||s>c}}},{key:"addLayer",value:function(a,i,o){this.mapsService&&(a.on("add",this.onLayerChange),a.on("remove",this.onLayerChange)),this.layers.push({layer:a,name:i,overlay:o});var s=this.controlOption,l=s.sortLayers,u=s.sortFunction,c=s.autoZIndex;l&&this.layers.sort(function(f,d){return u(f.layer,d.layer,f.name,d.name)}),c&&a.setZIndex&&(this.lastZIndex++,a.setZIndex(this.lastZIndex)),this.expandIfNotCollapsed()}},{key:"expandIfNotCollapsed",value:function(){return this.mapsService&&!this.controlOption.collapsed&&this.expand(),this}},{key:"onLayerChange",value:function(a){this.handlingClick||this.update();var i=this.layerService.getLayer(a.target.layerId),o=i!=null&&i.overlay?a.type==="add"?"overlayadd":"overlayremove":a.type==="add"?"baselayerchange":null;o&&this.emit(o,i)}},{key:"createRadioElement",value:function(a,i){var o='<input type="radio" class="l7-control-layers-selector" name="'+a+'"'+(i?' checked="checked"':"")+"/>",s=document.createElement("div");return s.innerHTML=o,s.firstChild}},{key:"addItem",value:function(a){var i=document.createElement("label"),o=this.layerService.getLayer(a.layer.id),s=o&&o.inited&&a.layer.isVisible(),l;a.overlay?(l=document.createElement("input"),l.type="checkbox",l.className="l7-control-layers-selector",l.defaultChecked=s):l=this.createRadioElement("l7-base-layers",s),this.layerControlInputs.push(l),l.layerId=a.layer.id,l.addEventListener("click",this.onInputClick);var u=document.createElement("span");u.innerHTML=" "+a.name;var c=document.createElement("div");i.appendChild(c),c.appendChild(l),c.appendChild(u);var f=a.overlay?this.overlaysList:this.baseLayersList;return f.appendChild(i),this.checkDisabledLayers(),i}},{key:"onInputClick",value:function(){var a=this.layerControlInputs,i,o,s=[],l=[];this.handlingClick=!0;for(var u=a.length-1;u>=0;u--)i=a[u],o=this.layerService.getLayer(i.layerId),i.checked?s.push(o):i.checked||l.push(o);l.forEach(function(c){c.hide()}),s.forEach(function(c){c.show()}),this.handlingClick=!1}}]),n})(cy);function bhe(e){var t=yhe();return function(){var r=ke(e),a;if(t){var i=ke(this).constructor;a=Reflect.construct(r,arguments,i)}else a=r.apply(this,arguments);return It(this,a)}}function yhe(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var xhe=function(e){Tt(n,e);var t=bhe(n);function n(){return Ae(this,n),t.apply(this,arguments)}return Oe(n,[{key:"getDefault",value:function(){return{position:vu.BOTTOMLEFT,name:"logo"}}},{key:"onAdd",value:function(){var a="l7-control-logo",i=Tr("div",a),o=Tr("a","l7-ctrl-logo");return o.target="_blank",o.rel="noopener nofollow",o.href="https://antv.alipay.com/l7",o.setAttribute("aria-label","AntV logo"),o.setAttribute("rel","noopener nofollow"),i.appendChild(o),i}},{key:"onRemove",value:function(){return null}}]),n}(cy);function _he(e){var t=whe();return function(){var r=ke(e),a;if(t){var i=ke(this).constructor;a=Reflect.construct(r,arguments,i)}else a=r.apply(this,arguments);return It(this,a)}}function whe(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(function(e){Tt(n,e);var t=_he(n);function n(r){var a;return Ae(this,n),a=t.call(this,r),m(D(a),"mScale",void 0),m(D(a),"iScale",void 0),Dd(["update"],D(a)),a}return Oe(n,[{key:"getDefault",value:function(){return{position:vu.BOTTOMLEFT,maxWidth:100,metric:!0,updateWhenIdle:!1,imperial:!1,name:"scale"}}},{key:"onAdd",value:function(){var a="l7-control-scale",i=Tr("div",a);this.addScales(a+"-line",i);var o=this.controlOption.updateWhenIdle;return this.mapsService.on(o?"moveend":"mapmove",this.update),this.mapsService.on(o?"zoomend":"zoomchange",this.update),this.update(),i}},{key:"onRemove",value:function(){var a=this.controlOption.updateWhenIdle;this.mapsService.off(a?"zoomend":"zoomchange",this.update),this.mapsService.off(a?"moveend":"mapmove",this.update)}},{key:"update",value:function(){var a=this.mapsService,i=this.controlOption.maxWidth,o=a.getSize()[1]/2,s=a.containerToLngLat([0,o]),l=a.containerToLngLat([i,o]),u=DY([s.lng,s.lat],[l.lng,l.lat]);this.updateScales(u)}},{key:"updateScales",value:function(a){var i=this.controlOption,o=i.metric,s=i.imperial;o&&a&&this.updateMetric(a),s&&a&&this.updateImperial(a)}},{key:"updateMetric",value:function(a){var i=this.getRoundNum(a),o=i<1e3?i+" m":i/1e3+" km";this.updateScale(this.mScale,o,i/a)}},{key:"updateImperial",value:function(a){var i=a*3.2808399,o,s,l;i>5280?(o=i/5280,s=this.getRoundNum(o),this.updateScale(this.iScale,s+" mi",s/o)):(l=this.getRoundNum(i),this.updateScale(this.iScale,l+" ft",l/i))}},{key:"updateScale",value:function(a,i,o){var s=this.controlOption.maxWidth;a.style.width=Math.round(s*o)+"px",a.innerHTML=i}},{key:"getRoundNum",value:function(a){var i=Math.pow(10,(Math.floor(a)+"").length-1),o=a/i;return o=o>=10?10:o>=5?5:o>=3?3:o>=2?2:1,i*o}},{key:"addScales",value:function(a,i){var o=this.controlOption,s=o.metric,l=o.imperial;s&&(this.mScale=Tr("div",a,i)),l&&(this.iScale=Tr("div",a,i))}}]),n})(cy);function khe(e){var t=Ehe();return function(){var r=ke(e),a;if(t){var i=ke(this).constructor;a=Reflect.construct(r,arguments,i)}else a=r.apply(this,arguments);return It(this,a)}}function Ehe(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(function(e){Tt(n,e);var t=khe(n);function n(r){var a;return Ae(this,n),a=t.call(this,r),m(D(a),"disabled",void 0),m(D(a),"zoomInButton",void 0),m(D(a),"zoomOutButton",void 0),Dd(["updateDisabled","zoomIn","zoomOut"],D(a)),a}return Oe(n,[{key:"getDefault",value:function(){return{position:vu.TOPLEFT,zoomInText:"+",zoomInTitle:"Zoom in",zoomOutText:"&#x2212;",zoomOutTitle:"Zoom out",name:"zoom"}}},{key:"onAdd",value:function(){var a="l7-control-zoom",i=Tr("div",a+" l7-bar");return this.zoomInButton=this.createButton(this.controlOption.zoomInText,this.controlOption.zoomInTitle,a+"-in",i,this.zoomIn),this.zoomOutButton=this.createButton(this.controlOption.zoomOutText,this.controlOption.zoomOutTitle,a+"-out",i,this.zoomOut),this.mapsService.on("zoomend",this.updateDisabled),this.mapsService.on("zoomchange",this.updateDisabled),this.updateDisabled(),i}},{key:"onRemove",value:function(){this.mapsService.off("zoomend",this.updateDisabled),this.mapsService.off("zoomchange",this.updateDisabled)}},{key:"disable",value:function(){return this.disabled=!0,this.updateDisabled(),this}},{key:"enable",value:function(){return this.disabled=!1,this.updateDisabled(),this}},{key:"zoomIn",value:function(){!this.disabled&&this.mapsService.getZoom()<this.mapsService.getMaxZoom()&&this.mapsService.zoomIn()}},{key:"zoomOut",value:function(){!this.disabled&&this.mapsService.getZoom()>this.mapsService.getMinZoom()&&this.mapsService.zoomOut()}},{key:"createButton",value:function(a,i,o,s,l){var u=Tr("a",o,s);return u.innerHTML=a,u.title=i,u.href="javascript:void(0)",u.addEventListener("click",l),u}},{key:"updateDisabled",value:function(){var a=this.mapsService,i="l7-disabled";am(this.zoomInButton,i),am(this.zoomOutButton,i),(this.disabled||a.getZoom()<=a.getMinZoom())&&kc(this.zoomOutButton,i),(this.disabled||a.getZoom()>=a.getMaxZoom())&&kc(this.zoomInButton,i)}}]),n})(cy);function hM(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function mM(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?hM(Object(n),!0).forEach(function(r){m(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):hM(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function She(e){var t=Che();return function(){var r=ke(e),a;if(t){var i=ke(this).constructor;a=Reflect.construct(r,arguments,i)}else a=r.apply(this,arguments);return It(this,a)}}function Che(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var The=function(e){Tt(n,e);var t=She(n);function n(r){var a;return Ae(this,n),a=t.call(this),m(D(a),"markerOption",void 0),m(D(a),"defaultMarker",void 0),m(D(a),"popup",void 0),m(D(a),"mapsService",void 0),m(D(a),"sceneSerive",void 0),m(D(a),"lngLat",void 0),m(D(a),"scene",void 0),m(D(a),"added",!1),m(D(a),"eventHandle",function(i){a.emit(i.type,{target:i,data:a.markerOption.extData,lngLat:a.lngLat})}),a.markerOption=mM(mM({},a.getDefault()),r),Dd(["update","onMove","onUp","addDragHandler","onMapClick"],D(a)),a.init(),a}return Oe(n,[{key:"getDefault",value:function(){return{element:void 0,anchor:Vv.BOTTOM,offsets:[0,0],color:"#5B8FF9",draggable:!1}}},{key:"addTo",value:function(a){this.scene=a,this.mapsService=a.get(xe.IMapService),this.sceneSerive=a.get(xe.ISceneService);var i=this.markerOption,o=i.element;return i.draggable,this.mapsService.getMarkerContainer().appendChild(o),this.registerMarkerEvent(o),this.mapsService.on("camerachange",this.update),this.mapsService.on("viewchange",this.update),this.update(),this.added=!0,this.emit("added"),this}},{key:"remove",value:function(){this.mapsService&&(this.mapsService.off("click",this.onMapClick),this.mapsService.off("move",this.update),this.mapsService.off("moveend",this.update),this.mapsService.off("mousedown",this.addDragHandler),this.mapsService.off("touchstart",this.addDragHandler),this.mapsService.off("mouseup",this.onUp),this.mapsService.off("touchend",this.onUp)),this.unRegisterMarkerEvent(),this.removeAllListeners();var a=this.markerOption.element;return a&&vd(a),this.popup&&this.popup.remove(),this}},{key:"setLnglat",value:function(a){return this.lngLat=a,Array.isArray(a)&&(this.lngLat={lng:a[0],lat:a[1]}),this.popup&&this.popup.setLnglat(this.lngLat),this.update(),this}},{key:"getLnglat",value:function(){return this.lngLat}},{key:"getElement",value:function(){return this.markerOption.element}},{key:"setElement",value:function(a){var i=this;if(!this.added)return this.once("added",function(){i.setElement(a)}),this;var o=this.markerOption.element;return o&&vd(o),this.markerOption.element=a,this.init(),this.mapsService.getMarkerContainer().appendChild(a),this.registerMarkerEvent(a),this.update(),this}},{key:"openPopup",value:function(){var a=this;if(!this.added)return this.once("added",function(){a.openPopup()}),this;var i=this.popup;return i?(i.isOpen()||i.addTo(this.scene),this):this}},{key:"closePopup",value:function(){var a=this;this.added||this.once("added",function(){a.closePopup()});var i=this.popup;return i&&i.remove(),this}},{key:"setPopup",value:function(a){return this.popup=a,this.lngLat&&this.popup.setLnglat(this.lngLat),this}},{key:"togglePopup",value:function(){var a=this.popup;if(a)a.isOpen()?a.remove():a.addTo(this.scene);else return this;return this}},{key:"getPopup",value:function(){return this.popup}},{key:"getOffset",value:function(){return this.markerOption.offsets}},{key:"setDraggable",value:function(a){throw new Error("Method not implemented.")}},{key:"isDraggable",value:function(){return this.markerOption.draggable}},{key:"getExtData",value:function(){return this.markerOption.extData}},{key:"setExtData",value:function(a){this.markerOption.extData=a}},{key:"update",value:function(){if(!!this.mapsService){var a=this.markerOption,i=a.element,o=a.anchor;this.updatePosition(),ON(i,"".concat(jv[o]))}}},{key:"onMapClick",value:function(a){var i=this.markerOption.element;this.popup&&i&&this.togglePopup()}},{key:"updatePosition",value:function(){if(!!this.mapsService){var a=this.markerOption,i=a.element,o=a.offsets,s=this.lngLat,l=s.lng,u=s.lat,c=this.mapsService.getBounds(),f=this.mapsService.lngLatToContainer([l,u]);if(i){i.style.display="block",i.style.whiteSpace="nowrap";var d=this.mapsService.getContainer(),p=0,h=0;if(d&&(p=d.scrollWidth,h=d.scrollHeight),Math.abs(c[0][0])>180||Math.abs(c[1][0])>180){if(f.x>p){var g=this.mapsService.lngLatToContainer([l-360,u]);f.x=g.x}if(f.x<0){var v=this.mapsService.lngLatToContainer([l+360,u]);f.x=v.x}}(f.x>p||f.x<0||f.y>h||f.y<0)&&(i.style.display="none"),i.style.left=f.x+o[0]+"px",i.style.top=f.y-o[1]+"px"}}}},{key:"init",value:function(){var a=this,i=this.markerOption.element,o=this.markerOption,s=o.color,l=o.anchor;if(!i){this.defaultMarker=!0,i=Tr("div"),this.markerOption.element=i;var u=document.createElementNS("http://www.w3.org/2000/svg","svg");u.setAttributeNS(null,"display","block"),u.setAttributeNS(null,"height","48px"),u.setAttributeNS(null,"width","48px"),u.setAttributeNS(null,"viewBox","0 0 1024 1024");var c=document.createElementNS("http://www.w3.org/2000/svg","path");c.setAttributeNS(null,"d","M512 490.666667C453.12 490.666667 405.333333 442.88 405.333333 384 405.333333 325.12 453.12 277.333333 512 277.333333 570.88 277.333333 618.666667 325.12 618.666667 384 618.666667 442.88 570.88 490.666667 512 490.666667M512 85.333333C346.88 85.333333 213.333333 218.88 213.333333 384 213.333333 608 512 938.666667 512 938.666667 512 938.666667 810.666667 608 810.666667 384 810.666667 218.88 677.12 85.333333 512 85.333333Z"),c.setAttributeNS(null,"fill",s),u.appendChild(c),i.appendChild(u)}kc(i,"l7-marker"),Object.keys(this.markerOption.style||{}).forEach(function(f){var d,p,h=((d=a.markerOption)===null||d===void 0?void 0:d.style)&&((p=a.markerOption)===null||p===void 0?void 0:p.style[f]);i&&(i.style[f]=h)}),i.addEventListener("click",function(f){a.onMapClick(f)}),i.addEventListener("click",this.eventHandle),UN(i,l,"marker")}},{key:"registerMarkerEvent",value:function(a){a.addEventListener("mousemove",this.eventHandle),a.addEventListener("click",this.eventHandle),a.addEventListener("mousedown",this.eventHandle),a.addEventListener("mouseup",this.eventHandle),a.addEventListener("dblclick",this.eventHandle),a.addEventListener("contextmenu",this.eventHandle),a.addEventListener("mouseover",this.eventHandle),a.addEventListener("mouseout",this.eventHandle)}},{key:"unRegisterMarkerEvent",value:function(){var a=this.getElement();a.removeEventListener("mousemove",this.eventHandle),a.removeEventListener("click",this.eventHandle),a.removeEventListener("mousedown",this.eventHandle),a.removeEventListener("mouseup",this.eventHandle),a.removeEventListener("dblclick",this.eventHandle),a.removeEventListener("contextmenu",this.eventHandle),a.removeEventListener("mouseover",this.eventHandle),a.removeEventListener("mouseout",this.eventHandle)}},{key:"addDragHandler",value:function(a){throw new Error("Method not implemented.")}},{key:"onUp",value:function(a){throw new Error("Method not implemented.")}}]),n}(Hi.exports.EventEmitter);function gM(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function vM(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?gM(Object(n),!0).forEach(function(r){m(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):gM(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Ahe(e){var t=Ohe();return function(){var r=ke(e),a;if(t){var i=ke(this).constructor;a=Reflect.construct(r,arguments,i)}else a=r.apply(this,arguments);return It(this,a)}}function Ohe(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(function(e){Tt(n,e);var t=Ahe(n);function n(r){var a,i;return Ae(this,n),i=t.call(this),m(D(i),"markers",[]),m(D(i),"markerLayerOption",void 0),m(D(i),"clusterIndex",void 0),m(D(i),"points",[]),m(D(i),"clusterMarkers",[]),m(D(i),"mapsService",void 0),m(D(i),"scene",void 0),m(D(i),"zoom",void 0),m(D(i),"bbox",void 0),i.markerLayerOption=AF(i.getDefault(),r),Dd(["update"],D(i)),i.zoom=((a=i.markerLayerOption.clusterOption)===null||a===void 0?void 0:a.zoom)||-99,i}return Oe(n,[{key:"getDefault",value:function(){return{cluster:!1,clusterOption:{radius:80,maxZoom:20,minZoom:0,zoom:-99,style:{},className:""}}}},{key:"addTo",value:function(a){return this.scene=a,this.mapsService=a.get(xe.IMapService),this.markerLayerOption.cluster&&(this.initCluster(),this.update(),this.mapsService.on("camerachange",this.update),this.mapsService.on("viewchange",this.update)),this.addMarkers(),this}},{key:"addMarker",value:function(a){var i=this.markerLayerOption.cluster;if(i&&(this.addPoint(a,this.markers.length),this.mapsService)){var o=this.mapsService.getZoom(),s=this.mapsService.getBounds();this.bbox=im(s,.5),this.zoom=Math.floor(o),this.getClusterMarker(this.bbox,this.zoom)}this.markers.push(a)}},{key:"removeMarker",value:function(a){this.markers.indexOf(a);var i=this.markers.indexOf(a);i>-1&&this.markers.splice(i,1)}},{key:"hide",value:function(){this.markers.map(function(a){a.getElement().style.opacity="0"}),this.clusterMarkers.map(function(a){a.getElement().style.opacity="0"})}},{key:"show",value:function(){this.markers.map(function(a){a.getElement().style.opacity="1"}),this.clusterMarkers.map(function(a){a.getElement().style.opacity="1"})}},{key:"getMarkers",value:function(){var a=this.markerLayerOption.cluster;return a?this.clusterMarkers:this.markers}},{key:"addMarkers",value:function(){var a=this;this.getMarkers().forEach(function(i){i.addTo(a.scene)})}},{key:"clear",value:function(){this.markers.forEach(function(a){a.remove()}),this.clusterMarkers.forEach(function(a){a.remove()}),this.mapsService.off("camerachange",this.update),this.markers=[],this.clusterMarkers=[]}},{key:"destroy",value:function(){this.clear(),this.removeAllListeners()}},{key:"addPoint",value:function(a,i){var o=a.getLnglat(),s=o.lng,l=o.lat,u={geometry:{type:"Point",coordinates:[s,l]},properties:vM(vM({},a.getExtData()),{},{marker_id:i})};this.points.push(u),this.clusterIndex&&this.clusterIndex.load(this.points)}},{key:"initCluster",value:function(){if(!!this.markerLayerOption.cluster){var a=this.markerLayerOption.clusterOption,i=a.radius,o=a.minZoom,s=o===void 0?0:o,l=a.maxZoom;this.clusterIndex=new D9({radius:i,minZoom:s,maxZoom:l}),this.clusterIndex.load(this.points)}}},{key:"getClusterMarker",value:function(a,i){var o=this,s=a[0].concat(a[1]),l=this.clusterIndex.getClusters(s,i);this.clusterMarkers.forEach(function(u){u.remove()}),this.clusterMarkers=[],l.forEach(function(u){var c,f=o.markerLayerOption.clusterOption,d=f.field,p=f.method;if(u.properties&&(c=u.properties)!==null&&c!==void 0&&c.cluster_id){var h,g=o.getLeaves((h=u.properties)===null||h===void 0?void 0:h.cluster_id);if(u.properties.clusterData=g,d&&p){var v=g==null?void 0:g.map(function(T){var C=m({},d,T.properties[d]);return C}),b=gE(v,d),y=_Y(p,b),x="point_"+p;u.properties[x]=y.toFixed(2)}}var k=o.clusterMarker(u);o.clusterMarkers.push(k),k.addTo(o.scene)})}},{key:"getLeaves",value:function(a){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1/0,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;return a?this.clusterIndex.getLeaves(a,i,o):null}},{key:"clusterMarker",value:function(a){var i=this.markerLayerOption.clusterOption,o=i,s=o.element,l=s===void 0?this.generateElement.bind(this):s,u=new The({element:l(a)}).setLnglat({lng:a.geometry.coordinates[0],lat:a.geometry.coordinates[1]});return u}},{key:"normalMarker",value:function(a){var i=a.properties.marker_id;return this.markers[i]}},{key:"update",value:function(){if(!!this.mapsService){var a=this.mapsService.getZoom(),i=this.mapsService.getBounds();(!this.bbox||Math.abs(a-this.zoom)>=1||!bE(this.bbox,i))&&(this.bbox=im(i,.5),this.zoom=Math.floor(a),this.getClusterMarker(this.bbox,this.zoom))}}},{key:"generateElement",value:function(a){var i=Tr("div","l7-marker-cluster"),o=Tr("div","",i),s=Tr("span","",o),l=this.markerLayerOption.clusterOption,u=l.field,c=l.method;a.properties.point_count=a.properties.point_count||1;var f=u&&c?a.properties["point_"+c]||a.properties[u]:a.properties.point_count;return s.textContent=f,i}}]),n})(Hi.exports.EventEmitter);function bM(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function yM(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?bM(Object(n),!0).forEach(function(r){m(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):bM(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Mhe(e){var t=Rhe();return function(){var r=ke(e),a;if(t){var i=ke(this).constructor;a=Reflect.construct(r,arguments,i)}else a=r.apply(this,arguments);return It(this,a)}}function Rhe(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(function(e){Tt(n,e);var t=Mhe(n);function n(r){var a;return Ae(this,n),a=t.call(this),m(D(a),"popupOption",void 0),m(D(a),"mapsService",void 0),m(D(a),"sceneSerive",void 0),m(D(a),"lngLat",void 0),m(D(a),"content",void 0),m(D(a),"closeButton",void 0),m(D(a),"timeoutInstance",void 0),m(D(a),"container",void 0),m(D(a),"tip",void 0),m(D(a),"scene",void 0),a.popupOption=yM(yM({},a.getdefault()),r),Dd(["update","onClickClose","remove"],D(a)),a}return Oe(n,[{key:"addTo",value:function(a){var i=this;return this.mapsService=a.get(xe.IMapService),this.sceneSerive=a.get(xe.ISceneService),this.mapsService.on("camerachange",this.update),this.mapsService.on("viewchange",this.update),this.scene=a,this.update(),this.popupOption.closeOnClick&&(this.timeoutInstance=setTimeout(function(){i.mapsService.on("click",i.onClickClose)},30)),this.emit("open"),this}},{key:"close",value:function(){this.remove()}},{key:"open",value:function(){this.addTo(this.scene)}},{key:"setHTML",value:function(a){var i=window.document.createDocumentFragment(),o=window.document.createElement("body"),s;for(o.innerHTML=a;s=o.firstChild,!!s;)i.appendChild(s);return this.setDOMContent(i)}},{key:"setLnglat",value:function(a){return this.lngLat=a,Array.isArray(a)&&(this.lngLat={lng:a[0],lat:a[1]}),this.mapsService&&(this.mapsService.on("camerachange",this.update),this.mapsService.on("viewchange",this.update)),this.update(),this}},{key:"getLnglat",value:function(){return this.lngLat}},{key:"setText",value:function(a){return this.setDOMContent(window.document.createTextNode(a))}},{key:"setMaxWidth",value:function(a){return this.popupOption.maxWidth=a,this.update(),this}},{key:"setDOMContent",value:function(a){return this.createContent(),this.content.appendChild(a),this.update(),this}},{key:"remove",value:function(){return this.content&&this.removeDom(this.content),this.container&&(this.removeDom(this.container),delete this.container),this.mapsService&&(this.mapsService.off("camerachange",this.update),this.mapsService.off("viewchange",this.update),this.mapsService.off("click",this.onClickClose),delete this.mapsService),clearTimeout(this.timeoutInstance),this.emit("close"),this}},{key:"isOpen",value:function(){return!!this.mapsService}},{key:"createContent",value:function(){this.content&&vd(this.content),this.content=Tr("div","l7-popup-content",this.container),this.popupOption.closeButton&&(this.closeButton=Tr("button","l7-popup-close-button",this.content),this.popupOption.closeButtonOffsets&&(this.closeButton.style.right=this.popupOption.closeButtonOffsets[0]+"px",this.closeButton.style.top=this.popupOption.closeButtonOffsets[1]+"px"),this.closeButton.setAttribute("aria-label","Close popup"),this.closeButton.innerHTML="&#215;",this.closeButton.addEventListener("click",this.onClickClose))}},{key:"creatDom",value:function(a,i,o){var s=window.document.createElement(a);return i!==void 0&&(s.className=i),o&&o.appendChild(s),s}},{key:"removeDom",value:function(a){a.parentNode&&a.parentNode.removeChild(a)}},{key:"getdefault",value:function(){return{closeButton:!0,closeOnClick:!0,maxWidth:"240px",offsets:[0,0],anchor:Vv.BOTTOM,className:"",stopPropagation:!0}}},{key:"onClickClose",value:function(a){a.stopPropagation&&a.stopPropagation(),this.remove()}},{key:"update",value:function(){var a=this,i=this.lngLat,o=this.popupOption,s=o.className,l=o.maxWidth,u=o.anchor;if(!(!this.mapsService||!i||!this.content)){var c=this.mapsService.getMarkerContainer();if(!this.container&&c){this.container=this.creatDom("div","l7-popup",c),this.tip=this.creatDom("div","l7-popup-tip",this.container),this.container.appendChild(this.content),s&&s.split(" ").forEach(function(d){return a.container.classList.add(d)});var f=this.popupOption.stopPropagation;f&&["mousemove","mousedown","mouseup","click","dblclick"].forEach(function(d){a.container.addEventListener(d,function(p){p.stopPropagation()})}),this.container.style.whiteSpace="nowrap"}l&&this.container.style.maxWidth!==l&&(this.container.style.maxWidth=l),this.updatePosition(),ON(this.container,"".concat(jv[u])),UN(this.container,u,"popup")}}},{key:"updatePosition",value:function(){if(!!this.mapsService){var a=this.lngLat,i=a.lng,o=a.lat,s=this.popupOption.offsets,l=this.mapsService.lngLatToContainer([i,o]);this.container.style.left=l.x+s[0]+"px",this.container.style.top=l.y-s[1]+"px"}}}]),n})(Hi.exports.EventEmitter);function Phe(e,t){var n=typeof my!="undefined"&&!!my&&typeof my.showToast=="function"&&my.isFRM!==!0,r=typeof wx!="undefined"&&wx!==null&&(typeof wx.request!="undefined"||typeof wx.miniProgram!="undefined");if(!(n||r)&&(t||(t=document),!!t)){var a=t.head||t.getElementsByTagName("head")[0];if(!a){a=t.createElement("head");var i=t.body||t.getElementsByTagName("body")[0];i?i.parentNode.insertBefore(a,i):t.documentElement.appendChild(a)}var o=t.createElement("style");return o.type="text/css",o.styleSheet?o.styleSheet.cssText=e:o.appendChild(t.createTextNode(e)),a.appendChild(o),o}}Phe(`.l7-marker-container {
  width: 100%;
  height: 100%;
  overflow: hidden;
  position: absolute;
}

.l7-marker {
  position: absolute !important;
  top: 0;
  left: 0;
  z-index: 5;
  cursor: pointer;
}

.l7-marker-cluster {
  background-clip: padding-box;
  border-radius: 20px;
  background-color: rgba(181, 226, 140, 0.6);
  width: 40px;
  height: 40px;
}
.l7-marker-cluster div {
  width: 30px;
  height: 30px;
  margin-left: 5px;
  margin-top: 5px;
  text-align: center;
  border-radius: 15px;
  font: 12px 'Helvetica Neue', Arial, Helvetica, sans-serif;
  background-color: rgba(110, 204, 57, 0.6);
}
.l7-marker-cluster span {
  line-height: 30px;
}

.l7-popup-anchor-bottom,
.l7-popup-anchor-bottom-left,
.l7-popup-anchor-bottom-right {
  -webkit-box-orient: vertical;
  -webkit-box-direction: reverse;
      -ms-flex-direction: column-reverse;
          flex-direction: column-reverse;
}

.l7-popup-close-button {
  position: absolute;
  right: 0;
  top: 0;
  border: 0;
  border-radius: 0 3px 0 0;
  cursor: pointer;
  background-color: transparent;
}

.l7-popup-close-button:hover {
  background-color: rgba(0, 0, 0, 0.05);
}

.l7-popup-content {
  position: relative;
  background: #fff;
  border-radius: 3px;
  -webkit-box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
          box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
  padding: 10px 10px 15px;
  pointer-events: auto;
}

/* layers control */

.l7-control-layers {
  -webkit-box-shadow: 0 1px 5px rgba(0, 0, 0, 0.4);
          box-shadow: 0 1px 5px rgba(0, 0, 0, 0.4);
  background: #fff;
  border-radius: 5px;
}
.l7-popup-anchor-top,
.l7-popup-anchor-top-left,
.l7-popup-anchor-top-right {
  -webkit-box-orient: vertical;
  -webkit-box-direction: normal;
      -ms-flex-direction: column;
          flex-direction: column;
}

.l7-popup-anchor-left {
  -webkit-box-orient: horizontal;
  -webkit-box-direction: normal;
      -ms-flex-direction: row;
          flex-direction: row;
}

.l7-popup-anchor-right {
  -webkit-box-orient: horizontal;
  -webkit-box-direction: reverse;
      -ms-flex-direction: row-reverse;
          flex-direction: row-reverse;
}
.l7-popup {
  position: absolute;
  top: 0;
  left: 0;
  display: -webkit-box;
  display: -ms-flexbox;
  display: flex;
  will-change: transform;
  pointer-events: none;
  z-index: 5;
}
.l7-popup-tip {
  width: 0;
  height: 0;
  border: 10px solid transparent;
  z-index: 1;
}
.l7-popup-anchor-top .l7-popup-tip {
  -webkit-align-self: center;
  -ms-flex-item-align: center;
      align-self: center;
  border-top: none;
  border-bottom-color: #fff;
}

.l7-popup-anchor-top-left .l7-popup-tip {
  -webkit-align-self: flex-start;
  -ms-flex-item-align: start;
      align-self: flex-start;
  border-top: none;
  border-left: none;
  border-bottom-color: #fff;
}

.l7-popup-anchor-top-right .l7-popup-tip {
  -webkit-align-self: flex-end;
  -ms-flex-item-align: end;
      align-self: flex-end;
  border-top: none;
  border-right: none;
  border-bottom-color: #fff;
}

.l7-popup-anchor-bottom .l7-popup-tip {
  -webkit-align-self: center;
  -ms-flex-item-align: center;
      align-self: center;
  border-bottom: none;
  border-top-color: #fff;
}

.l7-popup-anchor-bottom-left .l7-popup-tip {
  -webkit-align-self: flex-start;
  -ms-flex-item-align: start;
      align-self: flex-start;
  border-bottom: none;
  border-left: none;
  border-top-color: #fff;
}

.l7-popup-anchor-bottom-right .l7-popup-tip {
  -webkit-align-self: flex-end;
  -ms-flex-item-align: end;
      align-self: flex-end;
  border-bottom: none;
  border-right: none;
  border-top-color: #fff;
}

.l7-popup-anchor-left .l7-popup-tip {
  -webkit-align-self: center;
  -ms-flex-item-align: center;
      align-self: center;
  border-left: none;
  border-right-color: #fff;
}

.l7-popup-anchor-right .l7-popup-tip {
  -webkit-align-self: center;
  -ms-flex-item-align: center;
      align-self: center;
  border-right: none;
  border-left-color: #fff;
}

.l7-popup-close-button {
  position: absolute;
  right: 0;
  top: 0;
  border: 0;
  padding: 0;
  font-size: 25px;
  line-height: 20px;
  border-radius: 0 3px 0 0;
  cursor: pointer;
  background-color: transparent;
}

.l7-popup-close-button:hover {
  background-color: rgba(0, 0, 0, 0.05);
}

.l7-popup-content {
  position: relative;
  background: #fff;
  border-radius: 3px;
  -webkit-box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
          box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
  padding: 10px 10px 15px;
  pointer-events: auto;
}

.l7-popup-anchor-top-left .l7-popup-content {
  border-top-left-radius: 0;
}

.l7-popup-anchor-top-right .l7-popup-content {
  border-top-right-radius: 0;
}

.l7-popup-anchor-bottom-left .l7-popup-content {
  border-bottom-left-radius: 0;
}

.l7-popup-anchor-bottom-right .l7-popup-content {
  border-bottom-right-radius: 0;
}

.l7-popup-track-pointer {
  display: none;
}

.l7-popup-track-pointer * {
  pointer-events: none;
  -webkit-user-select: none;
     -moz-user-select: none;
      -ms-user-select: none;
          user-select: none;
}

.l7-map:hover .l7-popup-track-pointer {
  display: -webkit-box;
  display: -ms-flexbox;
  display: flex;
}

.l7-map:active .l7-popup-track-pointer {
  display: none;
}

.l7-popup-close-button:hover {
  background-color: rgba(0, 0, 0, 0.05);
}

.l7-popup-content {
  position: relative;
  background: #fff;
  border-radius: 3px;
  -webkit-box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
          box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
  padding: 10px 10px 15px;
  pointer-events: auto;
}

/* general toolbar styles */

.l7-bar {
  -webkit-box-shadow: 0 0 1px rgba(0, 0, 0, 0.3);
          box-shadow: 0 0 1px rgba(0, 0, 0, 0.3);
  border-radius: 4px;
}
.l7-bar a,
.l7-bar a:hover {
  background-color: #fff;
  width: 30px;
  height: 30px;
  font-size: 20px;
  display: block;
  text-align: center;
  text-decoration: none;
  color: #8e9dab;
}
.l7-bar a,
.l7-control-layers-toggle {
  background-position: 50% 50%;
  background-repeat: no-repeat;
  display: block;
}
.l7-bar a:hover {
  background-color: #f4f4f4;
}
.l7-bar a:first-child {
  border-top-left-radius: 2px;
  border-top-right-radius: 2px;
}
.l7-bar a:last-child {
  border-bottom-left-radius: 2px;
  border-bottom-right-radius: 2px;
  border-bottom: none;
}
.l7-bar a.l7-disabled {
  cursor: default;
  background-color: #f4f4f4;
  color: #bbb;
}

/* control positioning */

.l7-control-container {
  font: 12px/1.5 'Helvetica Neue', Arial, Helvetica, sans-serif;
}
.l7-control-hide {
  display: none;
}
.l7-control {
  position: relative;
  z-index: 800;
  pointer-events: visiblePainted; /* IE 9-10 doesn't have auto */
  pointer-events: auto;
}
.l7-control {
  float: left;
  clear: both;
}
.l7-top,
.l7-bottom {
  position: absolute;
  z-index: 1000;
  pointer-events: none;
}
.l7-top {
  top: 0;
}
.l7-right {
  right: 0;
}
.l7-bottom {
  bottom: 0;
}
.l7-left {
  left: 0;
}
.l7-center {
  display: -webkit-box;
  display: -ms-flexbox;
  display: flex;
  position: absolute;
  -webkit-box-pack: center;
      -ms-flex-pack: center;
          justify-content: center;
}
.l7-bottom.l7-center,
.l7-top.l7-center {
  width: 100%;
}
.l7-right.l7-center,
.l7-left.l7-center {
  height: 100%;
  -webkit-box-orient: vertical;
  -webkit-box-direction: normal;
      -ms-flex-direction: column;
          flex-direction: column;
}

.l7-top.l7-center,
.l7-left.l7-center {
  -webkit-box-align: start;
      -ms-flex-align: start;
          align-items: flex-start;
}

.l7-bottom.l7-center,
.l7-right.l7-center {
  -webkit-box-align: end;
      -ms-flex-align: end;
          align-items: flex-end;
}

.l7-center .l7-control {
  margin-right: 10px;
  margin-bottom: 10px;
}

.l7-control {
  float: left;
  clear: both;
}
.l7-right .l7-control {
  float: right;
}
.l7-top .l7-control {
  margin-top: 10px;
}
.l7-bottom .l7-control {
  margin-bottom: 10px;
}
.l7-left .l7-control {
  margin-left: 10px;
}
.l7-right .l7-control {
  margin-right: 10px;
}

/* attribution and scale controls */

.l7-control-container .l7-control-attribution {
  background: #fff;
  background: rgba(59, 58, 58, 0.7);
  margin: 0;
}
.l7-control-attribution,
.l7-control-scale-line {
  padding: 0 5px;
  color: #333;
}
.l7-control-attribution a {
  text-decoration: none;
}
.l7-control-attribution a:hover {
  text-decoration: underline;
}
.l7-container .l7-control-attribution,
.l7-container .l7-control-scale {
  font-size: 11px;
  padding: 5px 5px 2px 5px;
  background: rgba(255, 255, 255, 0.7);
}
.l7-left .l7-control-scale {
  margin-left: 5px;
}
.l7-bottom .l7-control-scale {
  margin-bottom: 5px;
}
.l7-control-scale-line {
  border: 2px solid #000;
  border-top: none;
  color: #000;
  line-height: 1.1;
  padding: 2px 5px 1px;
  font-size: 11px;
  white-space: nowrap;
  overflow: hidden;
  -webkit-box-sizing: border-box;
          box-sizing: border-box;

  background: #fff;
}
.l7-control-scale-line:not(:first-child) {
  border-top: 2px solid #777;
  border-bottom: none;
  margin-top: -2px;
}
.l7-control-scale-line:not(:first-child):not(:last-child) {
  border-bottom: 2px solid #777;
}

.l7-touch .l7-control-attribution,
.l7-touch .l7-control-layers,
.l7-touch .l7-bar {
  -webkit-box-shadow: none;
          box-shadow: none;
}
.l7-touch .l7-control-layers,
.l7-touch .l7-bar {
  border: 2px solid rgba(0, 0, 0, 0.2);
  background-clip: padding-box;
}
/*logo */

.l7-ctrl-logo {
  background-size: 100% 100%;
  width: 89px;
  height: 16px;
  margin: 0 0 -3px -3px;
  display: -webkit-box;
  display: -ms-flexbox;
  display: flex;
  background-repeat: no-repeat;
  cursor: pointer;
  background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAALIAAAAgCAYAAAHBIxK2AAAABGdBTUEAALGPC/xhBQAAIJZJREFUeAHtfAl8Tkf3/9z7PNmDRFbZSawhQcRSaqva1xCqpataqrT2UkuUUiqlaKtafe1VS1pUiypB0dIgIkpKRPZIELI/2/zO98akN48nltL3838//84nNzNzzpkzc+eee+bMOXMfxijNaMJ7LOrGO/HdYfZ8fb12gD2JJINJdR8WNHVQnRtSn7hilpz0u2DMKaEcFhZmhdzLNbiPyNVlwPxcm4Qh93Fr0gO4Ol5hfqiz6Q14G+QzGpYzQ9nXrUl7X/fgbrXdG3skX7m26+bNW2fQqJ5XmCs6RQKd6EQwB0zgtKgsvCidGF+N8wV/SBLqSKnXzx2WKIHw1xNxq2xtrKsBXqgrbePt1rivJFmloa5OoD129NcVQwa9Phxwaflw3ifvHCus1YIVjW7fwEF66dIhdYO/XV7Qk+9HY/5F7RA+w0G5TdRxq7gw10FBPWwA+3r9jpkYGcoJ5/7YiFxMiYCjLspsekOeCiJ1AhJJNER+8rfTX/j4BNcUMNCLMmhF+wC3cE9RZmMd/0IQjeTtGdwJjURD5EajsRQN1EwEHjAkUVce2LLhnKf8xGId3ZhkX4uxmj7MMKqJz0ZmMr3MJNZBmphV8WDBOCCgo+2QiE7DF3005wvU75e8vMLs4+P3HwwN7do5MzOu2NcjpPHRX/csCqjt2wvtxEAy8xJ3o+7j3jjkcurpn2xtrT0EPiS0oQPKSOfi/ygqL9H/qNbls8EXuer4+65xUa149QnBvGYFgapAN21EZ+pnuH3rrrnKdNA/zCRmjoqGzu36RoL21q38BLAAjRgo6iir63g1QAOcOoU27DAgwKtpPzVMKU+qBWIuve3Jx0zw4j/eQ0CASeNnjUi5mrYH72ZxUfFV0emJ479/BvrM9KxDAgZZEjziTp1d8+pL415sEdJloIAhF7QCZmnQoCkuLkkXNPfkozU8b4wVb30P4i4ADNQ41P08mtSBogHc27Vx70CPEHeUgRNwgUOuTqBR8wwODraGSIkrKipKxqVuI300mntri1jz9OOs0IHeHUdvms2t0iG+vn5nxmnan5QeUff6GGWttpidSjvGbCSZJdAAGTMwtjWSH2G5XrOp3oEv9wuWxqdeUPchZkW8OGqcedmcdujgUcMOH/zltmgL2YW2Fu22fbMz6q2xM+IEvmvHiCGyRq7AK3QLe959+T6v46co0uVBisLk0/9SqIIhcnQiVBPqULJ4dPVd2ypLg6Dx8wxuhAGDHrCOHTtqUfZ2b6KsYYIOuUiXL1/dKW4SMJRxkbbpG9nv5ecVutlt+PSoNvw7VPg8V4X5wqf4YQVp9g+NDQZDITr2cm/8lNIGlbvp+edGD/946eqJqOKmoBJRhjyjrclk0qlZAqeumw8YOEwE6ILdgh0raN9pcHeWx9n3mViPh9IKnlmBVBWI4bfoePDAEcOGPz9WWUDBzMe1cUdft5CnUfb2DvFR8rsz2avrkOdmT18wJisz5zDaqthVWjwAtzRgtBF9VbSdVofXIPWmB2CCouYqUBUFH59QbwwEqg0XykAi96/VuCEetRrm59msEfA+nqEtAUeqNEt324JGJEsDxpMi26gnaCpUxqJk6bahkGFp3akrZO8IBurcVGponpGW+VOdQP++uIAznzE1/cBBvRRZTc+OP0miUBJ78OiyxNxE6uX+KSP3vDIZuEE/z9BgWZZtHHj1oxZbkS6uJFNqIn+SWSy1AubjFtLd171xoHrQooyFQJRB7+0eHBrk2cxNtBW5mgYwoYNFXg5r7CvoFXWxajQ3mjiTc84wVkB2kTWt5NYk3lZ02SCvzphDDVrNZOY2p3mdA0wrhQoGSm5ig6SRyTsqwSxUaMKk+t4tXJIy4/IsoP82yNu7pYusKwk2WdslZmScvGHOyNs1tJ5GNrjVaeT2W2xsLCnuv5J6woQq/QtbXoLCMJqYtbWj208pKbGK4aamgWJR19XlCvpFEdxn6SDOl0byAjXB/cp8rlM/PteZ83k1T92PTuAw0Ly8GychmosWLB/v7xFSW+AeJQ/0auyLiYFEBgQ0dYKdDRsJfFOvpe0V76fgCVrgkNQTao63hAONr2vjFtAFltoTTFLzB415Al7RFdNipHRviWlLbzCHhZ05HxfEy9e7T/zX8FV+XLk+96e8Tl0xOJZfOpjdKp4kzboZXgGrouDj1rTunHnTQl1caoZ/unLNlKnTx32sNxobR0ZGakQTDCY8tEtEkG+LfihDg+NC2ccjpBXoyMTqVaLjTaFLduxe219XqH+67HYGKU5D0pbN30X5+vl0a9m6mZOPTxvFUIayPRAbM1RpS1uztp0a/SD6e9hcYlKVqgi7QEg/DAyRsAUsKSlNLyvT56Bs8e2Ias4LZzfnfEowJyOOVocZDs9jt8YnMDvUZzblZ+jis1rwtqg/KMHgwEThCUOCUS64U/An6iiL9oIGcFjwqMOQQB0JdTyEXd/tfR/1rMzsWCrPBxwPCxJMfJMELVYq0KO+fNkXk6CHRV/qXPSLXA0XZejpqiRZ0IgcY7hzu+AS2TB3quInaNnU2vzSlNqcT/fhHSqAVJgawAunEXxCPU4W9MMlcRN0ryZMAl2XcOHm6YlnYgMAToIOuxks+YBBErGrAa0YtKDDDkeYAaBFErjSUl2uKOfm5v1GE9y1nOLe/4IO+b3YchfKw0wy3lZ6m2arxyr4KV4RURH54qtS/fGufEMZZ7Hja/Ko0ptsgYML0+kKGM+4wbTbmGQUtPfLMfBrWWc3gIZenX4aJmUp9OQdqunk4nv2QmzMus0rO730wtj0qu2DqnuQjCYbrOjYrINq5JuRe/CKQp3QtRMweivm0yur+FBQf9xk6WFQX99Tvw2GDO0390jssWXW1vKf6n4q7Dc1EOXledJwQxF7RV/EomQbptMXssJlNyT5YSe4dq1m/s907eik1WprNKjdur9sW/1AWt7535Ur6/zvN2/lpcds/37eM892mEgTXGHuHD1y4qLRYK0YvrJsMly5knKu0tg0csmObbvfC2/ZbETK9bOnW4TU7xtGEw0a2geZbKysz/Xu9txQvV6fX6VOrMTw/hVsdF8b/tbGgX1feqF1m7Bq5hda+/o+pVgXm9Ztmzk0ctTBlMyEi/fnaoZ9g3HH1xmv5GgwI/m3+oAZUOzkj4fx7rQBt7qdxnhJDiuj/YlBe9dG1pLNbF9D8c2dem2xVMA3NQhjBk6WMyVaelmZVaL0+vmcB/Tz/zVa+8lIPlWW2SLMQh559ZSNCE2sbCq/FBuLyrrbLJVHsYZMr/sdfpiKJOv1pOxtyISp0tQRtHXqhNWQZffSy5d/LBOwJ5H71mrcAnzSSA2Z84ObJPlCbiujSZubkRefZI5X61hL5pavbzMvY4kuTCuzm6nXE4+Ztwf/lBRmcW1zcSkwxsXF6bWmEnbQSPJsoqWMZumwUqYC7QCVi3Y6tMmnCZdYDItiJezj0v3MaLJmRmXX58w0zKJ3w3ww2IwE+fk7JSUll9b2Crl4NfPcJXOav1OH7fyfdSs6cS7zl18Y65GRd36Pmk/S+dwex0/tHTN54pxNJ0/I2tTsM5WccqDFQgn9rW4nyphg4J95ut9gZis7p6Ym3BI4L9eQ+sS/ntrbLXDIE8/fLKaHVP7goyN5whKyKKMHcsWboSasqsznORfSRYEaz3v29uZt4JiDxMC8QVJLjzntg+ow+dBe7BhRJ1MwQ/AVkRbwQbBj7OtTXgVu49qt79LDrW/OX4yrqjEJ/OIPVrwlfM2CB/rW6XQ3wd9SgjsM41SsC9pLt+H0AptK2fdRjFdYHHwdhY0QOsL1VZDimkIHfLLD8xThcmCF+p3SjOxc0WlV+Zervm2x68dN/QQ+MLC2DVSHqOOVw6ZFXDRgCXjUBQ1y7Py+3bO+HyQLO0bArGV2auRrkxRv1orPPgjXF6XVARxJz0vCPvz4vbkoT50899yTenvAD0ljLx0L8Gr2Et4C9XXnTkEiecNKv/xiU/q1nHNXlQmN2iYVlpWwL0qLmSR3ZNFgQCpCogXuLDMa45WrTH8AcCVpTL8Q7ChbVDhAgO6XmwwGj7AWoa9lZ+UcBt3ufZvn6Ar0bUSbP/+42cJQ7NhbNjj3ybpW2p0G3LtP966DUIYk0TbZDr4Kk9Ho7lXLw1+0g6qo6Wtz8+f9sfmARQzqPZNWiCCBJ/NLtrOz9SkoKPxDlmT1SiJIHiuH6oAeF5e1o9XRGjWqa6pXrxbcqlm3YY7Wtifu6WDeU1xHF59an1cDki9wm8nnU7h3AV0fergDNrsln0+BtKUoP0yizYJr/57DhuJ1wnY5/mziepTVr6e3R0hrsbPLyck7BrxIZO/eAi2uuwE4I3Aok5rIAtzPPbjtxQuXtgCOOtQTwkqrPvlqMmBd2vcfDGeSpfGCXrS7H96SujCnBy+oj6LComSoEoGvUA0A6EvZ8DLaO9nYsUOoSzNy57Oi4mJyBu2SpuRcj2rGvZievUsRgleBf5gk6cpabd62egFoaYtr6NFl8DaUoz96LzTAq0kDlNWppLhE2UTg9Tuf8MdG2sw4DRjQU9H7e3b/FE2vomLoU3nJjm92rYSEwoXZuX3EJvDZsWtdz/+sjGlqMJqCXx/90jzALlz4syQl5awi7aj/EwnxPfC1srJy7ti232Sb6jZHRT+VJvm909I3pjKWayxjYdODeLkO1hnC2OLC/mhQWsJO6UvInCtjHQWDB+XKK2tvF3Dq5JkvVR4t/tzwiHk6namuefunwruvEq9ft86RW4Ef9sqQcK2WXRkzYtKBgtsFGYCNHjHpt3enzd+cnpvwo8pHbKQd2Wg9M3qDhjz9tqd+O7tao2XZqP+TKf8Ga3vyzP630EdGRpY+OTnutuiv0iQDqDOxVgaaSDLpjqMuResukoXHpwTw7jT5XnQlfHBBOgPcgxIiEqu+jG4NuoYN63a4mHzio0vJvy7Blhcwa2srWW0NAFZVgh0uaTSKj0LQYFERZVmy+WP1Z2uno25vZyd/tX5FO5T79x72faoF+xm4J5m4geLOPl7PHPvl1CeyLF1T875nkpdckq7qdOwIqY4aEz35i+XEXCYJ30MXs7dnSghSzaSqMunN2n36dZsBfG7uzYt3r0vpaVm/AHbkxJ4xJYWpD80PbapK6bmnL8+dvURRJXsPbXu5W49OU6n/ItA/zEapKr4PA8fC7OVVS1EXgwe8sq9Nh4aJ6nYWdyrFmayLvQsrIwleF8n4Jk9ntlCvo00gZ6ujE6UHBujQAZw2ZY52Cv8fvj/wwahXJu6VGFdu2sh4rdTs+M6+fl7dSAI+kTS0yfkbCWEndbhJIzPdjRu3TgcGBijqbcHc6Km21iz+b7C22KTEaGxFi1slHDyLsrGgKHr5kvYCsW3btkpeynskGYSrmaQnvTufLubhyL6WDGwK0zH9ypvSKMHoQXmuoaztz0diJoHu9VfePp6el3BYeOGstVYJ0Ys/VSR81OjhPmQqKAvbg3hqZNOd9PTsZNAt/3Rhi+5dW/cmy6SzaGfv7HS817NDlUUWsFWfrU9LzkxMFfjHyadMe3MZ7HPzCwJjMnK/8JbNI6rib1GSQfxpoTT7TRs+mYzLSJJoWkTYsKqYWIIbTNzWuaZTA0iWOT4l+2zKxx99fpXCUKxXv+5hn6/akP7n5eRztbw9O5rToi7cnx5+0rWIvi/uSU4/M2BgZJ/ZAwb2KiO9HynaXLp0rIAkTZeff/tc7MFju2Qm0T7r8RPcnJa43MjL1+PtocUif8SrE2ZkpWWX0Tmbex4q5q/KNFLLO8mcHSTXRc7nRsmzSkILCOzWsJkAypLjBXE4U+mdtmSCGclC+AEbC8US0Wh+u5Jz7jraIWREYfRGuJG064n7AAvxCHHIMxorpLcac4q9lHesYjLRb06qrgtZMoVpuecqzCi0tZRg2wq4pXEiKCDwlnIRMMD9WFvrjGqrwhK9RRj5kp+bwLgS37NI8C/wgTOgSPLyV7ibxoa9Rp7kV8nrVo1E3qSjJSr/CuNlBUxHTswSZmLFkhWTtLSGUqSEjO7yXEN1DZW1FBuQrQllxzK5FVuTc5HtnnOIwlRf1X6Waa1GM24KoNGQT69SkpiGFtIyYwwrMK1jb1+9/U9bApV6/7fyxGYAwewzZ1IdiosNBvF2PzHmD8FIWfcoKPIV7ZZ7Q8rImmJGPWPpR0jqdMxEAs5IgEkWCUm6mf6YRITIOXIFUC6heCvIyguhPIR5s1PE9TYrMixlWkM9ZqRwC2jLkywKSm4tPc005KKeOxe+qb+oKhE9fAUOvLLi0ubYH6AVNpoaLU++lnWezs8/OLbw8D09GUp8HkB7wHCEEwVHjBkOxqvX7x906kgOzMvn89qZWLm7SbSXmXwnqLHLMdVmWKAq5eolSY2wtDyp8aIcFNSqekl+Uftjhy5IbduGV0tKulrCdMEGrcRupeYm/iLoLOXkMpJqe4fUN+hZHRM3keQ9Wip3IGiSEIupmLjooXwByeoUA2daCrSw4nx2Kucye86qhJUq7MUKSznt+SqSHcq0KAqY1okZxqySrlcQUIEvJ7e+RDocW2JdmR3T8K0UT2lOwk1viKQnh2oUuaIqrFt120ct4ySGwaALHDPuVb8ZM9+OxjlFOh95oGXzrsvpxk2e/jb7ERB6VL6PQw9hS79427lUqzOOGBGZj5i64IcPYUp1paHDXxzs+UH07NUCvnrVumlzZ334h0ajuZqWc+68gKtz+Bq//CSmq4kbrRL/PDbPyalGKPDJySm7n27V+wtJywozshMPqduYl4Ugw/oHDm455A8ryDjEhp3CkV+/HxEYGKC0/XDRyreXLVmVbKeyE8HTPOE0DNmONhS3Gu0f4NPTHP+gOj7JGRwx4icYzRU7kUlfSzMW9+PJJMTLS03MztqahXs1YuuK8tmAqFgp70FM74eXxpeHTvhkR3eKY2wic6K5YmRoWBE51UdI825tuV/7h8Uh1qQzFAf26vusy8zZE1eKdt6+Xl1ooovbt+795fVUXRuC03rzzyecisZBYwoCsvETRgbcupFfunrl1mwSHtIW7EpqduKF5My4VBIG9w3rt7L+g3qtggsRI3t91IvzNq7d/sKVK1drk8bOtaSZ16zc3pw0sdV332/sLYSYzofd7tdj+H/Aw1O2/S0DhX8wlWvFv7eI0jpJqs1gs33brv09ej6TT7wqFKulIbt7utalw5RKxJwO4+yCEGMDFdjILbFCkNFw6k7py0XP8qu0Fm8nl4UTcW1nY81ORHXjPaL2SZcFcxq2xNbUXsSstB0oiCbA5TkWCCMvYQbda9KotCuVkCbTQGYyNCFb3ESh72wmayOlRbePV6L5m5UAOh+sK8wNh4tzxaeLF99lY6KjunGuri7h0BZf/GfZBfhQfDyaNEnPSUgw70o5bm8yuZrDUcdSTXftYL4EaiT5tobZJqXknsq+p52e+wB28vT+cfQyPYtyxOA+nw/oPXwPyiKl5ibE+Xs06UJb9x/OJB4OdXd3aUMmkPX2XWsnNAvu8EGZJDWhZfi62izyouPDRh2v9cabr/iGt2o6UvCa9c7CqfQFo0Gy0ZyJyyg/uiZw/0SuNocelX9qbvwv8F5+suxzv6VLPo211J6EvRZWnCXL5jUb+sKAoaDBh5SYKzyT1JxzRzAvlQQZRNN+kn6Oepq3JXn8gar+JKZBRPQbffnSJ+qEpAgdCTjnt/UbGCt7jkq+lbZwVmQqGPlcaVJWhRBHPcXd6ciG29xDbOecNtIGCm3VkKJLnqiy0JfcbIvxxx7fOc7Gxkpx6G3ZEDNn1rsLEy5cOb6GIkIuPXt3eef5FwaO3LxpByNteTM9Pb7yGO7az7+fPTBR+Km2bIyZPWPa/Pi1m1b0b0FONnt7Oz/0g0Su6oLLSVd+GP/G9G9154uLtZL2lsnGPo6XFjyDB0wx33JCC/8NBoavKQKBogB8noskH89jxs5dOw78MC7h5/VkUjiSQD+1fvPKDi8+/+ZhX0/lawzl5bv70jZ1dHTQTJ0xfr5gv+/HQ4vXr/smC/GC9Ixz6QL+T+aPo5ExrvT0E/BwX7I0RoR9TSajFebgmWc7TgINjk6OG/POKVnLctKzE06SECtNK2+67nKLOipdIEEOp7jI73QKg+lKWE3aDB56N5wPuUvCpInpCazEEM7yS86wQloh7tBVXFLEbpa8REL8fjkdl2Y158NItDOp/XnZimXM/ZW3lJY+WSH2dwttRt5o+6+3r+6C4A/6Tkq6EjNp4uz44pIS05wZi94V4164ZNYSN1cXKyz54hyowFnK+0X0GJGccXpneKuwQRcvJB3YvXPfAgSX6CPVeBK2avUb1huy79COLecuHp1Dx5fgU+wCId70zapnhNdZaGPwb9mq2SgBRx45uK87p1Xgjh3NjrV0FmHm92YtnirGggfYp09XV5PRFIBNIeDGohstke/9edtrCNmifC0l/YdXXxz3Cxy76dfPVz4DC4L/sYQvkhFh+HT1h62EEP+45+dFEGJ8xp6enXhSfUsWBRkEM45KubIDe5qE+DsE9XSlNM2lbMv0YP4OxaJIzsm+ePd6DivMb8vu6GKYviyJFRq7Se/d+hq4KMa104PZLBLgDXRiRkPhbU5h7s03PNgx4J9UCvBsGqDnBh/YoO07PDUefEtLyzK7tI9Yh80dQtTr1m7JPHL4+HLg6GxB9f2Hy0M1CNtg5wx4VUnWaO1bNn12YJBfizf69hr+5Zujpqx5PnLUp43rtZvVtFHHCBFAdHFxDlu28v1w8JEljf6FIaN/FseJ8DGe4I9wvYAj37Z113XZVnsaZxUyM8+nkYJJw5Gjn386/JFos3Tl+3NQ1nMpDB/aGbmpxkfL329Wu46fcqiD7je7U9u+n0M72jr5nhDt/ldzH7fgIJOJ+0+aNjaw34AeihI6ezph7YiX3zpGk3sjI/fsWfN7q1KQQUibvNIF51kECfMysmuNlFPUjy2sHchWvhzAyXNM9aWshDTsQOmD0vrShwWKkI704vZFddkXRDuXhJgsELKYS9n7CxKkF1b8KNFr8WQS3Gw6g74JztRNeefNDwXXyeNnzSIBI88gl40GpkRyhg4aeeD69RvKQ8aSHbNrfS+Exvy8yn9OQ7Q1z2kCd+D8BDZnGdcTTqTmJCTjRKgky3nQntezc0+JNl7etRT7WqM1XcOuX9ZoKnlvBB1yrdb6CmhwqU2cjNzEs/A2vPj82Nj0tMz9oLWzt/Pfd3DbYNjntJmr06x5Ywf6ZEIRbuBHvz5lWplOp7jrnvRxZPD/byZ8IE0u3IZ16wbaTpw8Zgn6pjBiQq9uQ2Po6/SyjJwEiy/qfQW5/AYkvviyNIEEcgIFqstweou07GgXA4sZ6cxrlNP89X9MDe7sILM9JK4v60CrYyUlejZy0Z/SrL+oHr8EB7w4q7hr78ZZcLMJritXL16jXr5FGZsoQdOqTfNRM2ZNrGvU81pVfXUGWnoZlN2seqOl8PgH/dFWtm4noF07te33KX0GmIv+GjdpOIzs4SCUN2xZ9Q5lyrPbuuW7uT/tPXjLykq6bMmzAfr/pVQs3WmG8W785rMRlCkr//w50eWrKWPx9zyHuzenvZs/MItOl1a85cGvajjbpJNYdYpd97C3YkfH2fGeK0qkdDCg3x4JoI3fXknH6hMNRnFLx9igZTnSwQd28IgExw9fpO9PTVbQVOR6CkFzslvP0pI/+36scLwRp+9A88a4Vxbt2bV3WHz8hUb0uzm3yn9i4H6tVbgHmCQqykcuptBX2/6uYXFk37d4+413pn62Jvo/YPLm+Nfmt+/QZouzs5PiL066dHnrhHEz4xB8QLDnkTv6hxuQtyWAPESKXV9VV5JReyM193QWBNTXlT4Y4boaeGF9fL26og3cbF9vjsmRtdqcq9nxVX6R9NCCDKYf50jfv+3EO5gYHYbjzItATZg1OzVG5t3IFrWmjeGPpL9cCQ8HXYpGw3rQB38XUX2SCd8ilOmMrouXzAmBpgJvsnUNg/u/shBlnMC2dD7Wzy24HTaAzVuFxtSrFxhBk6fd+u1X8+rXaT2Jlcmt6ZzVHQMYPKEk0SecYEVnd/WCpZNzjZoKjII28FrgvK9tDftjly//dkfQIL+WF5dF9nDyrl37WLeYZ+b3j+g5kzaX9s2aN3kV+OLC4iud2vXfiMMqdYJdfk2NBfT/jfTc0P49unXrVKXQiVEWFhUXvT12xgHaK+jpxf3doNH7IUjWf0DPZwXNvh8OHkFZMsiKshRw8/yRBBmNl+VLZ0fb8ZayzH4krdyEnpQnudbiKRxMAbry9Y5gJwnfOzpfUpZF804fp46dOwlxvY5dnnZ64aVIRbOC39ovN8/GAW9ZsrpoSYhBU82dnczPkbpiI5iUcrK1ra2Nl2M1x7oHf/lueOd2/TeYmEnxAID2iSSDdQbZVp6ff7J214IPZ3YnnnLdunUiyNSJuMvfSC/fi8eOnepAp6EOnss5Rydc/kp0EDORfuXOZeyoqSeDmzSIQVtg8Q3K4IGvzkSZW9vd87sdgP+3Ejw05n3hFxroMgffU6f7KBs4uM8fy5euTjFKRkf6ks4FRJ61PJojL7hTePH99z5Kwsuael3R2gBbTPcMwiKVBeBkxh0KtGw7mQ/dhbeUynihvrU2sKEr2JPb1Km7h238a+ylp4zc6IRNXsdObV3JTswqKCw0kUeCNmLxiWp68zLOBpTeLm5LGydt377dXJycnazhewUd/K/YLZPmk8aOf80/LSW96Ntvf8jFRGodXA5iyRf88Es5xQZda0GbkZZVtGP77ntocaKXlRW3wQOv5ugot+vUyqluUGB18CGT5hZ+jwuOfRx0FbzVOcLQaz7Z0Q6eCsDRHzayiodCI58URwXVbR6l/Lghavw6hYGZsDr/rYSNLSKQcfS7AwiOSGWF4eJewRAmRVAD59MPOjPytwUZncAN5yyzhVacDSFlbDJIbO1qkzQXuP9Gql+/bTXj7WLbUq1t4V3H+kN3q5zWOnq5Jn05Jdm6GvMTExPJnC9PCDgYC2/X1Mp6o38j1xv3m0Q1LT5wu985DghlzGcxdqUaKzvSRpLJXtaFhdUpND8mLsZhKQcPuhSTxRL+UWFCkM3bPexZC/N2/9b/nYF/Z+AxZuD/AA8zEhkTLyOGAAAAAElFTkSuQmCC');
}

/* layers control */

.l7-control-layers {
  -webkit-box-shadow: 0 1px 8px rgba(0, 0, 0, 0.4);
          box-shadow: 0 1px 8px rgba(0, 0, 0, 0.4);
  background: #fff;
  border-radius: 2px;
}
.l7-control-layers-toggle {
  background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAkCAYAAAGf7Ah0AAAABGdBTUEAALGPC/xhBQAABzdJREFUWAnVV3lslEUUn/l2F0tpwdAih1HEqCReDcphNCo1EkgFkXa5PNpuC0Fo2e7Wgko8KiaKWrvbK5672xYFpNtiRRuNiY0aURA14BGviBcVlaKltVa6+42/N9v5Mrtt05rwj/PHzjt+8743b+a9N8vYwKgMNlUQyemnMtAkaJajvb3dToQSGp8e6boopkr4VYgEMYwO0vhCTfMVzBcMf8bx086YyODcuM80zTqp9IWat+7evW8sMdIxIqqCLa6oiAaJpuEtcBqcc2HEWMZ0JclgZR/Nchf++ubrzKjJSguXS4tVjXvPjfb3/UAAacGTn/MOMb7QnjNpNqP/bKZ50Ai0tqYmCi0n4zbM+W+lBc7JBOa+QPhDwcTsxJXE2+32edKCL9h8hRDmRzpIOWydAylhrcMfDN+ugBRKSdP3KwPhsFJIPth02FISIYQwYsDYcVfWhy/Bon4JgumffMGmiGTwQ0B/sHml4q2ZFAD3WQIQVhx0IdFw8B189lolN+w8w5PnjPmlhJgtA8/vfn3iye7u3yGzDljDxZEG4097Cp3rSSjBtMHunp6vFR+HHoIxmbgTe1xHKssDHecLNFUjMzbqMs5ZlHF7ute17M84+TMHDzr+OvR9JwKdCms9yRkzJq6bPTsWXh05QOPUN+PUHyPWMPhm6UHd7vaUohWZPSRE8OqxpTyibQa/qcTlbEP0vwF7AWUAT3JM9dy69FfSNza+MU4awNE8iQtXSkJuGLleV852ov2h5jkwVof0mUs8aO4LhTuYYFOAjExId0wcFIPahpaLTkWiX9ECfHG/sLNi1i8+HODfgLFFRI96+INNi0cNTgTS1obKQh03aAuk9DeELzcj4pACYivvwvXrFK/PcQZiQWo+hmidpYMUjQC7EOB6xdNsGfAHwk/RDdOVw9Dm+NTUSWtWLDohDVQ37JkbiUT2DwMeVswZP+gtdM4x3HnLDhjcGM2XLWOISaenIGee9MCSgqgMht/H/q/SZYk0qviV3oKcj5XcioESyOoqIseFYDYloxnAGm/hcrcuk3JV2XBMl+pKqn6mENux11+w12m6jpqMMFn7rPPTHdwfCm8yTfG4tMaNu+GepPUFiqbM7T105ARSPQU+dY/LOC/N2gI65WEkyWUEtjmSppfkLvlRLaQ5VnZFDtGGzbheNRROKZmbu/AvUvh3tE4Wff2/0IUC+y2q+4VVoXBW1BSvkR7Rb8BW84lWJQBdlGozcs7GLy3Nd35OSqTxBqtfgkc1+sPjcqbDgEl6xK0dH5lv545LOCVL1/F+3CoY4eyY1+WcBiC2KYEHQBd5XDkyndE17xCm2Ug6BLcSwb3LigE1AlOYu6TS4HUwVEw0Df1osfBnLDwnpiFDCQPuvQ73Fkqxg8/hEVYLXt66MXbbzOK8bKre1hhkgDT0RDja3fEHytwZxCMLH0YWPkD0fxqjqUZDejDSV3z1LbexqPkEPJxKWLqtKOGbvPnZL460NlE/KgfkIZiRrfjShsQcG2QQDUwwXjcuZcID61Ys6ErUJ/LDOiCfLUzUjVQdEg0O4jn/ABEq0iuIjrEcwE0x/KGWNbjPj4BO00Gni0ZOoIPzLR5X9vMqqaQDqDzzENra4V5zp8sBZQcROYjsLvYUOPdbEVBKeiZ193QjCmwtZCM+ldS6EWYTH3wuNSV1i+pFCj/IAaWgGUfBq0N78qPM3DZcp9TxcTQeyzZm3ON2LatXpSlOP8BIB6qDLddHmHnFrBlpNZmZmdZbNXEB9XsRlZXFennqGHzoXW5DaId4iSoc/Q365EjnRjszPnYXZL9NDWUtGsqzCjAw7xprTypbn7fkaILcYqkInzzeX06C8emO8sKlS7stZQLxVMPes/+O9FVAvEpXob+utY6gZmfrtMjf/RUI+2odhF7wJbq+Gzf3zTj5CAwyaoEwozVoCzN1KKK00z7WUbZx9dIOklsO6CAZpu87i5gpHoJ8gtLh9vZixSO2KckV7qysf5Sc5uq2tjOix3rL0FW3IJuSNV0XM/iDs85LqxvqeKUD8n3LxUobt5WVuLJlS9IM4O9i09VRwWtxLWfpcix+hXjs8mZdjn19YuOiuKRgufzXqOuqQi2r8O+yAk/tl2Q/RMW7ETe8UdX1GJhHDM5qjDHJ5e7bs07qBp7ZsTe9t6/vUXykkLKEdLFbLgLJSUn3rrt1yXEdX/1C23jzVG+5Keg/B5r2wJD9g/NcaUAJq4MvXxxl/TWoATcoGc0Av4eUKnIXZlsvXpLHO0CS2KgOtGQgdeuwqWuUjGbUgrdszLHRXXDLF0oe54AS0kyPnc5Iz/2CmV7EeIzSwcjvsHQPXkUhld/kCP6Xu+DRNjg/SWHh+SnODF+aPeVh9XCydAPEsA4kAqsCzcuiTPiw7+maTj6SwGsVk/9gY9xbUpizR8MNS47aAd0C7s35CG8VdrxYyjl/FcdUgo73nY77X9D/Au9RDMh+aBoVAAAAAElFTkSuQmCC');
  width: 30px;
  height: 30px;
  background-size: 20px 20px;
}

.l7-touch .l7-control-layers-toggle {
  width: 44px;
  height: 44px;
}
.l7-control-layers .l7-control-layers-list,
.l7-control-layers-expanded .l7-control-layers-toggle {
  display: none;
}
.l7-control-layers-expanded .l7-control-layers-list {
  display: block;
  position: relative;
}
.l7-control-layers-expanded {
  padding: 6px 10px 6px 6px;
  color: #59626b;
  background: #fff;
}
.l7-control-layers-scrollbar {
  overflow-y: scroll;
  overflow-x: hidden;
  padding-right: 5px;
}
.l7-control-layers-selector {
  margin-top: 2px;
  position: relative;
  top: 1px;
}
.l7-control-layers label {
  display: block;
  padding: 8px;
}
.l7-control-layers label input[type='radio'],
.l7-control-layers label input[type='checkbox'] {
  width: 14px;
  height: 14px;
  margin: 0;
}
.l7-control-layers-separator {
  height: 0;
  border-top: 1px solid #d8d8d8;
  margin: 5px -10px 5px -6px;
}
.mapboxgl-ctrl-logo {
  display: none !important;
}
.amap-logo {
  display: none !important;
}
`);function Ihe(e){return e===void 0}var Lhe=Ihe,Pl,tD=(Pl={},m(Pl,ho.additive,{enable:!0,func:{srcRGB:V.ONE,dstRGB:V.ONE,srcAlpha:1,dstAlpha:1}}),m(Pl,ho.none,{enable:!1}),m(Pl,ho.normal,{enable:!0,func:{srcRGB:V.SRC_ALPHA,dstRGB:V.ONE_MINUS_SRC_ALPHA,srcAlpha:1,dstAlpha:1}}),m(Pl,ho.subtractive,{enable:!0,func:{srcRGB:V.ONE,dstRGB:V.ONE,srcAlpha:V.ZERO,dstAlpha:V.ONE_MINUS_SRC_COLOR},equation:{rgb:V.FUNC_SUBTRACT,alpha:V.FUNC_SUBTRACT}}),m(Pl,ho.max,{enable:!0,func:{srcRGB:V.ONE,dstRGB:V.ONE},equation:{rgb:V.MAX_EXT}}),m(Pl,ho.min,{enable:!0,func:{srcRGB:V.ONE,dstRGB:V.ONE},equation:{rgb:V.MIN_EXT}}),Pl),Nhe=Eu,Fhe=es,Dhe="[object Number]";function Bhe(e){return typeof e=="number"||Fhe(e)&&Nhe(e)==Dhe}var er=Bhe;function si(e,t,n,r,a){t.updateStyleAttribute(e,n,r,a)}function zhe(e,t){e.opacity&&sg("opacity",t,e.opacity),e.strokeWidth&&sg("strokeWidth",t,e.strokeWidth),e.strokeOpacity&&sg("strokeOpacity",t,e.strokeOpacity),e.stroke&&Uhe("stroke",t,e.stroke),e.offsets&&xM("offsets",t,e.offsets),e.textOffset&&xM("textOffset",t,e.textOffset),e.thetaOffset&&sg("thetaOffset",t,e.thetaOffset)}function sg(e,t,n){Wo(n)?si(e,t,n,function(r){return r}):er(n)?si(e,t,[n],void 0):Array.isArray(n)&&n.length===2?Wo(n[0])&&As(n[1])||Wo(n[0])&&Array.isArray(n[1])&&er(n[1][0])&&er(n[1][1])?si(e,t,n[0],n[1]):si(e,t,[1],void 0):si(e,t,[1],void 0)}function xM(e,t,n){Wo(n)?si(e,t,n,function(r){return r}):Array.isArray(n)&&n.length===2&&Wo(n[0])&&As(n[1])?si(e,t,n[0],n[1]):Array.isArray(n)&&n.length===2&&er(n[0])&&er(n[1])?si(e,t,n,void 0):si(e,t,[0,0],void 0)}function Uhe(e,t,n){Wo(n)?si(e,t,n,void 0):Array.isArray(n)&&n.length===2&&(Wo(n[0])&&As(n[1])||Wo(n[0])&&Array.isArray(n[1])&&n[1].length>0)?si(e,t,n[0],n[1]):si(e,t,"#fff",void 0)}var _M,K1,wM;function kM(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function EM(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?kM(Object(n),!0).forEach(function(r){m(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):kM(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var $he=(_M=XE(xe.IGlobalConfigService),K1=function(){function e(t){Ae(this,e),an(this,"configService",wM,this),m(this,"config",void 0),this.config=t}return Oe(e,[{key:"setContainer",value:function(n,r,a,i){n.bind(xe.MapConfig).toConstantValue(EM(EM({},this.config),{},{id:r,canvas:a,hasBaseMap:i})),n.bind(xe.IMapService).to(this.getServiceConstructor()).inSingletonScope()}},{key:"getServiceConstructor",value:function(){throw new Error("Method not implemented.")}}]),e}(),wM=rn(K1.prototype,"configService",[_M],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),K1),nD={exports:{}};(function(e,t){(function(n,r){e.exports=r()})(Qs,function(){function n(f){var d=[];return f.AMapUI&&d.push(r(f.AMapUI)),f.Loca&&d.push(a(f.Loca)),Promise.all(d)}function r(f){return new Promise(function(d,p){var h=[];if(f.plugins)for(var g=0;g<f.plugins.length;g+=1)o.AMapUI.plugins.indexOf(f.plugins[g])==-1&&h.push(f.plugins[g]);if(s.AMapUI===i.failed)p("\u524D\u6B21\u8BF7\u6C42 AMapUI \u5931\u8D25");else if(s.AMapUI===i.notload){s.AMapUI=i.loading,o.AMapUI.version=f.version||o.AMapUI.version,g=o.AMapUI.version;var v=document.body||document.head,b=document.createElement("script");b.type="text/javascript",b.src="https://webapi.amap.com/ui/"+g+"/main.js",b.onerror=function(y){s.AMapUI=i.failed,p("\u8BF7\u6C42 AMapUI \u5931\u8D25")},b.onload=function(){if(s.AMapUI=i.loaded,h.length)window.AMapUI.loadUI(h,function(){for(var y=0,x=h.length;y<x;y++){var k=h[y].split("/").slice(-1)[0];window.AMapUI[k]=arguments[y]}for(d();l.AMapUI.length;)l.AMapUI.splice(0,1)[0]()});else for(d();l.AMapUI.length;)l.AMapUI.splice(0,1)[0]()},v.appendChild(b)}else s.AMapUI===i.loaded?f.version&&f.version!==o.AMapUI.version?p("\u4E0D\u5141\u8BB8\u591A\u4E2A\u7248\u672C AMapUI \u6DF7\u7528"):h.length?window.AMapUI.loadUI(h,function(){for(var y=0,x=h.length;y<x;y++){var k=h[y].split("/").slice(-1)[0];window.AMapUI[k]=arguments[y]}d()}):d():f.version&&f.version!==o.AMapUI.version?p("\u4E0D\u5141\u8BB8\u591A\u4E2A\u7248\u672C AMapUI \u6DF7\u7528"):l.AMapUI.push(function(y){y?p(y):h.length?window.AMapUI.loadUI(h,function(){for(var x=0,k=h.length;x<k;x++){var T=h[x].split("/").slice(-1)[0];window.AMapUI[T]=arguments[x]}d()}):d()})})}function a(f){return new Promise(function(d,p){if(o.AMap.version.startsWith("2.0"))p("Loca \u6682\u4E0D\u9002\u914D JSAPI 2.0,\u8BF7\u4F7F\u7528 1.4.15");else if(s.Loca===i.failed)p("\u524D\u6B21\u8BF7\u6C42 Loca \u5931\u8D25");else if(s.Loca===i.notload){s.Loca=i.loading,o.Loca.version=f.version||o.Loca.version;var h=o.Loca.version,g=o.key,v=document.body||document.head,b=document.createElement("script");b.type="text/javascript",b.src="https://webapi.amap.com/loca?v="+h+"&key="+g,b.onerror=function(y){s.Loca=i.failed,p("\u8BF7\u6C42 AMapUI \u5931\u8D25")},b.onload=function(){for(s.Loca=i.loaded,d();l.Loca.length;)l.Loca.splice(0,1)[0]()},v.appendChild(b)}else s.Loca===i.loaded?f.version&&f.version!==o.Loca.version?p("\u4E0D\u5141\u8BB8\u591A\u4E2A\u7248\u672C Loca \u6DF7\u7528"):d():f.version&&f.version!==o.Loca.version?p("\u4E0D\u5141\u8BB8\u591A\u4E2A\u7248\u672C Loca \u6DF7\u7528"):l.Loca.push(function(y){y?p(y):p()})})}if(!window)throw Error("AMap JSAPI can only be used in Browser.");var i;(function(f){f.notload="notload",f.loading="loading",f.loaded="loaded",f.failed="failed"})(i||(i={}));var o={key:"",AMap:{version:"1.4.15",plugins:[]},AMapUI:{version:"1.1",plugins:[]},Loca:{version:"1.3.2"}},s={AMap:i.notload,AMapUI:i.notload,Loca:i.notload},l={AMap:[],AMapUI:[],Loca:[]},u=[],c=function(f){typeof f=="function"&&(s.AMap===i.loaded?f(window.AMap):u.push(f))};return{load:function(f){return new Promise(function(d,p){if(s.AMap==i.failed)p("");else if(s.AMap==i.notload){var h=f.key,g=f.version,v=f.plugins;h?(window.AMap&&location.host!=="lbs.amap.com"&&p("\u7981\u6B62\u591A\u79CDAPI\u52A0\u8F7D\u65B9\u5F0F\u6DF7\u7528"),o.key=h,o.AMap.version=g||o.AMap.version,o.AMap.plugins=v||o.AMap.plugins,s.AMap=i.loading,g=document.body||document.head,window.___onAPILoaded=function(y){if(delete window.___onAPILoaded,y)s.AMap=i.failed,p(y);else for(s.AMap=i.loaded,n(f).then(function(){d(window.AMap)}).catch(p);u.length;)u.splice(0,1)[0]()},v=document.createElement("script"),v.type="text/javascript",v.src="https://webapi.amap.com/maps?callback=___onAPILoaded&v="+o.AMap.version+"&key="+h+"&plugin="+o.AMap.plugins.join(","),v.onerror=function(y){s.AMap=i.failed,p(y)},g.appendChild(v)):p("\u8BF7\u586B\u5199key")}else if(s.AMap==i.loaded)if(f.key&&f.key!==o.key)p("\u591A\u4E2A\u4E0D\u4E00\u81F4\u7684 key");else if(f.version&&f.version!==o.AMap.version)p("\u4E0D\u5141\u8BB8\u591A\u4E2A\u7248\u672C JSAPI \u6DF7\u7528");else{if(h=[],f.plugins)for(g=0;g<f.plugins.length;g+=1)o.AMap.plugins.indexOf(f.plugins[g])==-1&&h.push(f.plugins[g]);h.length?window.AMap.plugin(h,function(){n(f).then(function(){d(window.AMap)}).catch(p)}):n(f).then(function(){d(window.AMap)}).catch(p)}else if(f.key&&f.key!==o.key)p("\u591A\u4E2A\u4E0D\u4E00\u81F4\u7684 key");else if(f.version&&f.version!==o.AMap.version)p("\u4E0D\u5141\u8BB8\u591A\u4E2A\u7248\u672C JSAPI \u6DF7\u7528");else{var b=[];if(f.plugins)for(g=0;g<f.plugins.length;g+=1)o.AMap.plugins.indexOf(f.plugins[g])==-1&&b.push(f.plugins[g]);c(function(){b.length?window.AMap.plugin(b,function(){n(f).then(function(){d(window.AMap)}).catch(p)}):n(f).then(function(){d(window.AMap)}).catch(p)})}})},reset:function(){delete window.AMap,delete window.AMapUI,delete window.Loca,o={key:"",AMap:{version:"1.4.15",plugins:[]},AMapUI:{version:"1.1",plugins:[]},Loca:{version:"1.3.2"}},s={AMap:i.notload,AMapUI:i.notload,Loca:i.notload},l={AMap:[],AMapUI:[],Loca:[]}}}})})(nD);var Vhe=nD.exports,jhe=function(){function e(t){Ae(this,e),m(this,"size",1e4),this.size=t||1e4}return Oe(e,[{key:"setSize",value:function(n){this.size=n}},{key:"getSize",value:function(){return[this.size,this.size]}},{key:"mercatorXfromLng",value:function(n){return(180+n)/360*this.size}},{key:"mercatorYfromLat",value:function(n){return(1-(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+n*Math.PI/360)))/360)*this.size}},{key:"lngFromMercatorX",value:function(n){return n/this.size*360-180}},{key:"latFromMercatorY",value:function(n){var r=180-(1-n/this.size)*360;return 360/Math.PI*Math.atan(Math.exp(r*Math.PI/180))-90}},{key:"project",value:function(n){var r=this.mercatorXfromLng(n[0]),a=this.mercatorYfromLat(n[1]);return[r,a]}},{key:"unproject",value:function(n){var r=this.lngFromMercatorX(n[0]),a=this.latFromMercatorY(n[1]);return[r,a]}}]),e}();function SM(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function CM(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?SM(Object(n),!0).forEach(function(r){m(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):SM(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function TM(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t={top:0,right:0,bottom:0,left:0};if(typeof e=="number")return{top:e,right:e,bottom:e,left:e};if(Array.isArray(e)){if(e.length===4)return{top:e[0],right:e[1],bottom:e[2],left:e[3]};if(e.length===2)return{top:e[0],right:e[1],bottom:e[0],left:e[1]}}return CM(CM({},t),e)}var Ar;(function(e){e["GAODE1.x"]="GAODE1.x",e["GAODE2.x"]="GAODE2.x",e.MAPBOX="MAPBOX",e.L7MAP="L7MAP",e.SIMPLE="SIMPLE",e.GLOBEL="GLOBEL"})(Ar||(Ar={}));var AM={dark:"amap://styles/c9f1d10cae34f8ab05e425462c5a58d7?isPublic=true",light:"amap://styles/c422f5c0cfced5be9fe3a83f05f28a68?isPublic=true",normal:"amap://styles/normal",blank:"amap://styles/07c17002b38775b32a7a76c66cf90e99?isPublic=true"},Ghe=function(){function e(){Ae(this,e),m(this,"projectionMatrix",vo()),m(this,"viewMatrix",vo()),m(this,"viewProjectionMatrix",vo()),m(this,"ViewProjectionMatrixUncentered",vo()),m(this,"viewUncenteredMatrix",vo()),m(this,"zoom",void 0),m(this,"center",void 0)}return Oe(e,[{key:"syncWithMapCamera",value:function(n){var r=n.zoom,a=r===void 0?1:r,i=n.center,o=i===void 0?[0,0]:i,s=n.offsetOrigin,l=s===void 0?[0,0]:s,u=n.cameraPosition,c=u===void 0?[0,0,0]:u,f=n.up,d=f===void 0?[0,1,0]:f,p=n.lookAt,h=p===void 0?[0,0,0]:p,g=n.aspect,v=g===void 0?1:g,b=n.near,y=b===void 0?.1:b,x=n.far,k=x===void 0?1e3:x,T=n.fov,C=T===void 0?45:T;this.zoom=a,this.center=o,pF(this.projectionMatrix,C/180*Math.PI,v,y,k);var I=Ya.apply(ad,$e(c)),P=Ya.apply(ad,$e(h)),j=Ya.apply(ad,$e(d));mF(this.viewMatrix,I,P,j),this.viewUncenteredMatrix=rF(this.viewMatrix),jE(this.viewMatrix,this.viewMatrix,Ya(-l[0],l[1],0)),il(this.viewProjectionMatrix,this.projectionMatrix,this.viewMatrix),il(this.ViewProjectionMatrixUncentered,this.projectionMatrix,this.viewMatrix)}},{key:"getZoom",value:function(){return this.zoom}},{key:"getZoomScale",value:function(){return 1048576}},{key:"getCenter",value:function(){var n=Le(this.center,2),r=n[0],a=n[1];return[r,a]}},{key:"getProjectionMatrix",value:function(){return this.projectionMatrix}},{key:"getModelMatrix",value:function(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}},{key:"getViewMatrix",value:function(){return this.viewMatrix}},{key:"getViewMatrixUncentered",value:function(){return this.viewUncenteredMatrix}},{key:"getViewProjectionMatrix",value:function(){return this.viewProjectionMatrix}},{key:"getViewProjectionMatrixUncentered",value:function(){return this.ViewProjectionMatrixUncentered}},{key:"getFocalDistance",value:function(){return 1}},{key:"projectFlat",value:function(n,r){var a=85.0511287798,i=Math.max(Math.min(a,n[1]),-a),o=256<<20,s=Math.PI/180,l=n[0]*s,u=i*s;u=Math.log(Math.tan(Math.PI/4+u/2));var c=.5/Math.PI,f=.5,d=-.5/Math.PI;return s=.5,l=o*(c*l+f)-215440491,u=-(o*(d*u+s)-106744817),[l,u]}}]),e}(),Hhe=["id","style","minZoom","maxZoom","token","mapInstance","plugin","version"],OM,MM,RM,PM,IM,LM,lf,NM,FM,DM,BM;function zM(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Whe(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?zM(Object(n),!0).forEach(function(r){m(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zM(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Yhe(e,t){var n=typeof my!="undefined"&&!!my&&typeof my.showToast=="function"&&my.isFRM!==!0,r=typeof wx!="undefined"&&wx!==null&&(typeof wx.request!="undefined"||typeof wx.miniProgram!="undefined");if(!(n||r)&&(t||(t=document),!!t)){var a=t.head||t.getElementsByTagName("head")[0];if(!a){a=t.createElement("head");var i=t.body||t.getElementsByTagName("body")[0];i?i.parentNode.insertBefore(a,i):t.documentElement.appendChild(a)}var o=t.createElement("style");return o.type="text/css",o.styleSheet?o.styleSheet.cssText=e:o.appendChild(t.createTextNode(e)),a.appendChild(o),o}}Yhe(`.amap-logo{
 display: none !important;
}
`);var Xhe=0;window.forceWebGL=!0;var UM="ff533602d57df6f8ab3b0fea226ae52f",Zhe="2.0",qhe="amap-script",Q1=!1,lg=[],Khe=(OM=sn(),MM=dn(xe.IGlobalConfigService),RM=dn(xe.MapConfig),PM=dn(xe.ICoordinateSystemService),IM=dn(xe.IEventEmitter),OM(LM=(lf=function(){function e(){var t=this;Ae(this,e),m(this,"version",Ar["GAODE2.x"]),m(this,"simpleMapCoord",new jhe),m(this,"map",void 0),m(this,"sceneCenter",void 0),m(this,"sceneCenterMKT",void 0),m(this,"bgColor","rgba(0, 0, 0, 0)"),an(this,"configService",NM,this),an(this,"config",FM,this),an(this,"coordinateSystemService",DM,this),an(this,"eventEmitter",BM,this),m(this,"markerContainer",void 0),m(this,"$mapContainer",void 0),m(this,"viewport",void 0),m(this,"cameraChangedCallback",void 0),m(this,"handleViewChanged",function(n){var r=t.map.customCoords.getCameraParams(),a=r.fov,i=r.near,o=r.far,s=r.aspect,l=r.position,u=r.lookAt,c=r.up;t.emit("mapchange");var f=t.map.customCoords.getCenter();t.cameraChangedCallback&&(t.viewport.syncWithMapCamera({aspect:s,far:o,fov:a,cameraPosition:l,lookAt:u,up:c,near:i,zoom:t.map.getZoom()-1,center:f,offsetOrigin:[l[0],l[1]]}),t.coordinateSystemService.setCoordinateSystem(Xl.P20_2),t.cameraChangedCallback(t.viewport))})}return Oe(e,[{key:"setBgColor",value:function(n){this.bgColor=n}},{key:"setCustomCoordCenter",value:function(n){this.sceneCenter=n,this.sceneCenterMKT=eg.apply(void 0,$e(n))}},{key:"getCustomCoordCenter",value:function(){return this.sceneCenterMKT}},{key:"lngLatToCoordByLayer",value:function(n,r){var a=eg.apply(void 0,$e(r));return this._sub(eg(n[0],n[1]),a)}},{key:"lngLatToCoordsByLayer",value:function(n,r){var a=this;return n.map(function(i){return typeof i[0]=="number"?a.lngLatToCoordByLayer(i,r):i.map(function(o){return a.lngLatToCoordByLayer(o,r)})})}},{key:"lngLatToCoord",value:function(n){return this.sceneCenter||(this.map.customCoords.setCenter(n),this.setCustomCoordCenter(n)),this._sub(eg(n[0],n[1]),this.sceneCenterMKT)}},{key:"lngLatToCoords",value:function(n){var r=this;return n.map(function(a){return typeof a[0]=="number"?r.lngLatToCoord(a):a.map(function(i){return r.lngLatToCoord(i)})})}},{key:"addMarkerContainer",value:function(){if(!!this.map){var n=this.map.getContainer();if(n!==null){var r=n.getElementsByClassName("amap-maps")[0];r.style.zIndex="auto",this.markerContainer=Tr("div","l7-marker-container2",r)}}}},{key:"getMarkerContainer",value:function(){return this.markerContainer}},{key:"on",value:function(n,r){fM.indexOf(n)!==-1?this.eventEmitter.on(n,r):this.map.on(n,r)}},{key:"off",value:function(n,r){fM.indexOf(n)!==-1?this.eventEmitter.off(n,r):this.map.off(n,r)}},{key:"getContainer",value:function(){return this.map.getContainer()}},{key:"getMapCanvasContainer",value:function(){var n;return(n=this.map.getContainer())===null||n===void 0?void 0:n.getElementsByClassName("amap-maps")[0]}},{key:"getSize",value:function(){var n=this.map.getSize();return[n.getWidth(),n.getHeight()]}},{key:"getType",value:function(){return"amap2"}},{key:"getZoom",value:function(){return this.map.getZoom()-1}},{key:"setZoom",value:function(n){return this.map.setZoom(n+1)}},{key:"getCenter",value:function(n){if(n!=null&&n.padding){var r=this.getCenter(),a=this.getSize(),i=Le(a,2);i[0],i[1];var o=TM(n.padding),s=this.lngLatToPixel([r.lng,r.lat]),l=[(o.right-o.left)/2,(o.bottom-o.top)/2],u=this.pixelToLngLat([s.x-l[0],s.y-l[1]]);return u}var c=this.map.getCenter();return{lng:c.getLng(),lat:c.getLat()}}},{key:"setCenter",value:function(n,r){if(r!=null&&r.padding){var a=TM(r.padding),i=this.lngLatToPixel(n),o=[(a.right-a.left)/2,(a.bottom-a.top)/2],s=this.pixelToLngLat([i.x+o[0],i.y+o[1]]);this.map.setCenter([s.lng,s.lat])}else this.map.setCenter(n)}},{key:"getPitch",value:function(){return this.map.getPitch()}},{key:"getRotation",value:function(){return 360-this.map.getRotation()}},{key:"getBounds",value:function(){var n=this.map.getBounds(),r=n.getNorthEast(),a=n.getSouthWest(),i=this.getCenter(),o=i.lng>r.getLng()||i.lng<a.getLng()?180-r.getLng():r.getLng(),s=i.lng<a.getLng()?a.getLng()-180:a.getLng();return[[s,a.getLat()],[o,r.getLat()]]}},{key:"getMinZoom",value:function(){var n=this.map.getZooms();return n[0]-1}},{key:"getMaxZoom",value:function(){var n=this.map.getZooms();return n[1]-1}},{key:"setRotation",value:function(n){return this.map.setRotation(n)}},{key:"setPitch",value:function(n){return this.map.setPitch(n)}},{key:"zoomIn",value:function(){this.map.zoomIn()}},{key:"zoomOut",value:function(){this.map.zoomOut()}},{key:"panTo",value:function(n){this.map.panTo(n)}},{key:"panBy",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;this.map.panBy(n,r)}},{key:"fitBounds",value:function(n){this.map.setBounds(new AMap.Bounds([n[0][0],n[0][1],n[1][0],n[1][1]]))}},{key:"setZoomAndCenter",value:function(n,r){this.map.setZoomAndCenter(n+1,r)}},{key:"setMapStyle",value:function(n){this.map.setMapStyle(this.getMapStyle(n))}},{key:"setMapStatus",value:function(n){this.map.setStatus(n)}},{key:"pixelToLngLat",value:function(n){var r=this.map.pixelToLngLat(new AMap.Pixel(n[0],n[1]));return{lng:r.getLng(),lat:r.getLat()}}},{key:"lngLatToPixel",value:function(n){var r=this.map.lnglatToPixel(new AMap.LngLat(n[0],n[1]));return{x:r.getX(),y:r.getY()}}},{key:"containerToLngLat",value:function(n){var r=new AMap.Pixel(n[0],n[1]),a=this.map.containerToLngLat(r);return{lng:a==null?void 0:a.getLng(),lat:a==null?void 0:a.getLat()}}},{key:"lngLatToContainer",value:function(n){var r=this.map.lngLatToContainer(n);return{x:r.getX(),y:r.getY()}}},{key:"lngLatToMercator",value:function(n,r){return{x:0,y:0,z:0}}},{key:"getModelMatrix",value:function(n,r,a){var i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:[1,1,1],o=this.map.customCoords.lngLatToCoord(n),s=vo();return jE(s,s,Ya(o[0],o[1],r)),sF(s,s,Ya(i[0],i[1],i[2])),GE(s,s,a[0]),HE(s,s,a[1]),lF(s,s,a[2]),s}},{key:"init",value:function(){var t=lr(vn.mark(function r(){var a=this,i,o,s,l,u,c,f,d,p,h,g,v,b,y,x,k;return vn.wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return i=this.config,o=i.id,s=i.style,l=s===void 0?"light":s,u=i.minZoom,c=u===void 0?0:u,f=i.maxZoom,d=f===void 0?18:f,p=i.token,h=p===void 0?UM:p,g=i.mapInstance,v=i.plugin,b=v===void 0?[]:v,y=i.version,x=y===void 0?Zhe:y,k=Nn(i,Hhe),C.next=3,new Promise(function(I){var P=function(){if(g){var A;a.map=g,a.$mapContainer=a.map.getContainer();var S=a.map.getCenter();(A=a.map.customCoords)===null||A===void 0||A.setCenter([S.lng,S.lat]),a.setCustomCoordCenter([S.lng,S.lat]),setTimeout(function(){a.map.on("viewchange",a.handleViewChanged),I()},30)}else{a.$mapContainer=a.creatAmapContainer(o);var M=Whe({mapStyle:a.getMapStyle(l),zooms:[c,d],viewMode:"3D"},k);M.zoom&&(M.zoom+=1);var O=new AMap.Map(a.$mapContainer,M);a.map=O;var R=O.getCenter();O.customCoords.setCenter([R.lng,R.lat]),a.setCustomCoordCenter([R.lng,R.lat]),O.on("viewchange",a.handleViewChanged),setTimeout(function(){I()},10)}};a.viewport=new Ghe,!Q1&&!g?(h===UM&&console.warn(a.configService.getSceneWarninfo("MapToken")),Q1=!0,b.push("Map3D"),Vhe.load({key:h,version:x,plugins:b}).then(function(j){P(),lg.length&&(lg.forEach(function(A){return A()}),lg=[])}).catch(function(j){throw new Error(j)})):Q1&&window.AMap||g?P():lg.push(P)});case 3:case"end":return C.stop()}},r,this)}));function n(){return t.apply(this,arguments)}return n}()},{key:"meterToCoord",value:function(n,r){var a=AMap.GeometryUtil.distance(Qf(AMap.LngLat,$e(n)),Qf(AMap.LngLat,$e(r))),i=this.lngLatToCoord(n),o=Le(i,2),s=o[0],l=o[1],u=this.lngLatToCoord(r),c=Le(u,2),f=c[0],d=c[1],p=Math.sqrt(Math.pow(s-f,2)+Math.pow(l-d,2));return p/a}},{key:"exportMap",value:function(n){var r,a=(r=this.getContainer())===null||r===void 0?void 0:r.getElementsByClassName("amap-layer")[0],i=n==="jpg"?a==null?void 0:a.toDataURL("image/jpeg"):a==null?void 0:a.toDataURL("image/png");return i}},{key:"emit",value:function(n){for(var r,a=arguments.length,i=new Array(a>1?a-1:0),o=1;o<a;o++)i[o-1]=arguments[o];(r=this.eventEmitter).emit.apply(r,[n].concat(i))}},{key:"once",value:function(n){for(var r,a=arguments.length,i=new Array(a>1?a-1:0),o=1;o<a;o++)i[o-1]=arguments[o];(r=this.eventEmitter).once.apply(r,[n].concat(i))}},{key:"destroy",value:function(){var n,r;this.map.destroy(),(n=this.$mapContainer)===null||n===void 0||(r=n.parentNode)===null||r===void 0||r.removeChild(this.$mapContainer),delete window.initAMap;var a=document.getElementById(qhe);a&&document.head.removeChild(a)}},{key:"getMapContainer",value:function(){return this.$mapContainer}},{key:"onCameraChanged",value:function(n){this.cameraChangedCallback=n}},{key:"initViewPort",value:function(){var n,r=(n=this.map.customCoords)===null||n===void 0?void 0:n.getCameraParams(),a=r.fov,i=r.near,o=r.far,s=r.aspect,l=r.position,u=r.lookAt,c=r.up;this.emit("mapchange");var f=this.map.customCoords.getCenter(),d=this.map.getZoom();this.cameraChangedCallback&&(this.viewport.syncWithMapCamera({aspect:s,far:o,fov:a,cameraPosition:l,lookAt:u,near:i,up:c,zoom:d-1,center:f,offsetOrigin:[l[0],l[1]]}),this.coordinateSystemService.setCoordinateSystem(Xl.P20_2),this.cameraChangedCallback(this.viewport))}},{key:"_sub",value:function(n,r){var a=[0,0];return a[0]=n[0]-r[0],a[1]=n[1]-r[1],a}},{key:"getMapStyle",value:function(n){return AM[n]?AM[n]:n}},{key:"creatAmapContainer",value:function(n){var r=n;typeof n=="string"&&(r=document.getElementById(n));var a=document.createElement("div");return a.style.cssText+=`
      position: absolute;
      top: 0;
      height: 100%;
      width: 100%;
    `,a.id="l7_amap_div"+Xhe++,r.appendChild(a),a}}]),e}(),NM=rn(lf.prototype,"configService",[MM],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),FM=rn(lf.prototype,"config",[RM],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),DM=rn(lf.prototype,"coordinateSystemService",[PM],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),BM=rn(lf.prototype,"eventEmitter",[IM],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),lf))||LM);function Qhe(e){var t=Jhe();return function(){var r=ke(e),a;if(t){var i=ke(this).constructor;a=Reflect.construct(r,arguments,i)}else a=r.apply(this,arguments);return It(this,a)}}function Jhe(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var eme=function(e){Tt(n,e);var t=Qhe(n);function n(){return Ae(this,n),t.apply(this,arguments)}return Oe(n,[{key:"getServiceConstructor",value:function(){return Khe}}]),n}($he);function tme(e,t){var n=[t[0]-e[0],t[1]-e[1]],r=NN(n),a=[e[0]+r[0]*1e-4,e[1]+r[1]*1e-4];return a}function nme(e,t){var n=this;e.length>0&&t.version===Ar["GAODE2.x"]&&(typeof e[0].coordinates[0]=="number"?e.filter(function(r){return!r.originCoordinates}).map(function(r){r.version=Ar["GAODE2.x"],r.originCoordinates=cloneDeep(r.coordinates),r.coordinates=n.mapService.lngLatToCoord(r.coordinates)}):e.filter(function(r){return!r.originCoordinates}).map(function(r){r.version=Ar["GAODE2.x"],r.originCoordinates=cloneDeep(r.coordinates),r.coordinates=n.mapService.lngLatToCoords(r.coordinates)}))}function rme(e,t){e.length>0&&t.version===Ar.SIMPLE&&e.map(function(n){n.simpleCoordinate||(n.coordinates=ame(n.coordinates,t),n.simpleCoordinate=!0)})}function ame(e,t){if(typeof e[0]=="number")return t.simpleMapCoord.unproject(e);if(e[0]&&e[0][0]instanceof Array){var n=[];return e.map(function(a){var i=[];a.map(function(o){i.push(t.simpleMapCoord.unproject(o))}),n.push(i)}),n}else{var r=[];return e.map(function(a){r.push(t.simpleMapCoord.unproject(a))}),r}}function ime(e,t,n){var r;if(!e.scale)return[];var a=(e==null||(r=e.scale)===null||r===void 0?void 0:r.scalers)||[],i=[];a.forEach(function(s){var l,u=s.field;(t.hasOwnProperty(u)||((l=e.scale)===null||l===void 0?void 0:l.type)==="variable")&&i.push(t[u])});var o=e.mapping?e.mapping(i):[];return e.name==="color"&&!zN(o[0])?[n]:o}function ome(e,t,n,r,a,i){var o=i==null?void 0:i.getLayerConfig(),s=o.arrow,l=s===void 0?{enable:!1}:s,u=t.map(function(c){var f={id:c._id,coordinates:c.coordinates};if(e.filter(function(h){return h.scale!==void 0}).forEach(function(h){var g=ime(h,c,a);h.needRemapping=!1,h.name==="color"&&(g=g.map(function(v){return Ts(v)})),f[h.name]=Array.isArray(g)&&g.length===1?g[0]:g,h.name==="shape"&&(f.shape=n.getIconFontKey(f[h.name]))}),f.shape==="line"&&l.enable){var d=f.coordinates,p=tme(d[0],d[1]);f.coordinates.splice(1,0,p,p)}return f});return nme(u,r),rme(u,r),u}function sme(e,t,n,r,a,i){var o=new $m(a,i),s=e.getBottomColor(),l=r.getLayerStyleAttributes()||[],u=o.data.dataArray,c=u,f=ome(l,c,t,n,s,e);return o.destroy(),f}function rD(e){return e.map(function(t){return typeof t=="string"&&(t=[t,{}]),t})}function aD(e,t,n,r){var a=e.multiPassRenderer,i=e.getLayerConfig();i.enablePicking;var o=i.enableTAA;return o?a.add(r("taa")):a.add(r("render")),rD(t).forEach(function(s){var l=Le(s,2),u=l[0],c=l[1];a.add(n(u),c)}),a.add(n("copy")),a}var lme=[["circle","cylinder"],["square","cylinder"],["triangle","cylinder"],["pentagon","cylinder"],["hexagon","cylinder"],["octogon","cylinder"],["hexagram","cylinder"],["rhombus","cylinder"],["vesica","cylinder"]];function ume(e,t,n){if(typeof t=="string"&&typeof n=="string"&&t!==n){if(e.type==="PointLayer"){e.dataState.dataSourceNeedUpdate=!0;return}lme.map(function(r){if(r.includes(t)&&r.includes(n)){e.dataState.dataSourceNeedUpdate=!0;return}})}}var cme=["passes"],fme=["moduleName","vertexShader","fragmentShader","triangulation","segmentNumber"],$M,J1,VM;function dme(e,t){var n=typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=pme(e))||t&&e&&typeof e.length=="number"){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(u){throw u},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i=!0,o=!1,s;return{s:function(){n=n.call(e)},n:function(){var u=n.next();return i=u.done,u},e:function(u){o=!0,s=u},f:function(){try{!i&&n.return!=null&&n.return()}finally{if(o)throw s}}}}function pme(e,t){if(!!e){if(typeof e=="string")return jM(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return jM(e,t)}}function jM(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function GM(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Ga(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?GM(Object(n),!0).forEach(function(r){m(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):GM(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function hme(e){var t=mme();return function(){var r=ke(e),a;if(t){var i=ke(this).constructor;a=Reflect.construct(r,arguments,i)}else a=r.apply(this,arguments);return It(this,a)}}function mme(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var HM=0,Gm=($M=XE(xe.IGlobalConfigService),J1=function(e){Tt(n,e);var t=hme(n);function n(){var r,a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Ae(this,n),r=t.call(this),m(D(r),"id","".concat(HM++)),m(D(r),"name","".concat(HM)),m(D(r),"type",void 0),m(D(r),"visible",!0),m(D(r),"zIndex",0),m(D(r),"minZoom",void 0),m(D(r),"maxZoom",void 0),m(D(r),"inited",!1),m(D(r),"layerModelNeedUpdate",!1),m(D(r),"pickedFeatureID",null),m(D(r),"selectedFeatureID",null),m(D(r),"styleNeedUpdate",!1),m(D(r),"rendering",void 0),m(D(r),"clusterZoom",0),m(D(r),"layerType",void 0),m(D(r),"triangulation",void 0),m(D(r),"dataState",{dataSourceNeedUpdate:!1,dataMappingNeedUpdate:!1,filterNeedUpdate:!1,featureScaleNeedUpdate:!1,StyleAttrNeedUpdate:!1}),m(D(r),"hooks",{init:new D1,afterInit:new D1,beforeRender:new D1,beforeRenderData:new yie,afterRender:new ds,beforePickingEncode:new ds,afterPickingEncode:new ds,beforeHighlight:new ds(["pickedColor"]),afterHighlight:new ds,beforeSelect:new ds(["pickedColor"]),afterSelect:new ds,beforeDestroy:new ds,afterDestroy:new ds}),m(D(r),"models",[]),m(D(r),"multiPassRenderer",void 0),m(D(r),"plugins",void 0),m(D(r),"sourceOption",void 0),m(D(r),"layerModel",void 0),m(D(r),"shapeOption",void 0),m(D(r),"sceneContainer",void 0),m(D(r),"tileLayer",void 0),m(D(r),"layerChildren",[]),m(D(r),"masks",[]),m(D(r),"isVector",!1),an(D(r),"configService",VM,D(r)),m(D(r),"shaderModuleService",void 0),m(D(r),"cameraService",void 0),m(D(r),"coordinateService",void 0),m(D(r),"iconService",void 0),m(D(r),"fontService",void 0),m(D(r),"pickingService",void 0),m(D(r),"rendererService",void 0),m(D(r),"layerService",void 0),m(D(r),"interactionService",void 0),m(D(r),"mapService",void 0),m(D(r),"styleAttributeService",void 0),m(D(r),"layerSource",void 0),m(D(r),"postProcessingPassFactory",void 0),m(D(r),"normalPassFactory",void 0),m(D(r),"animateOptions",{enable:!1}),m(D(r),"container",void 0),m(D(r),"encodedData",void 0),m(D(r),"configSchema",void 0),m(D(r),"currentPickId",null),m(D(r),"rawConfig",void 0),m(D(r),"needUpdateConfig",void 0),m(D(r),"pendingStyleAttributes",[]),m(D(r),"scaleOptions",{}),m(D(r),"animateStartTime",void 0),m(D(r),"aniamateStatus",!1),m(D(r),"bottomColor","rgba(0, 0, 0, 0)"),m(D(r),"isDestroied",!1),m(D(r),"sourceEvent",function(){r.dataState.dataSourceNeedUpdate=!0;var i=r.getLayerConfig(),o=i.autoFit,s=i.fitBoundsOptions;o&&r.fitBounds(s),r.reRender()}),r.name=a.name||r.id,r.zIndex=a.zIndex||0,r.rawConfig=a,r}return Oe(n,[{key:"addMaskLayer",value:function(a){this.masks.push(a)}},{key:"removeMaskLayer",value:function(a){var i=this.masks.indexOf(a);i>-1&&this.masks.splice(i,1),a.destroy()}},{key:"getAttribute",value:function(a){return this.styleAttributeService.getLayerStyleAttribute(a)}},{key:"getLayerConfig",value:function(){return this.configService.getLayerConfig(this.id)}},{key:"updateLayerConfig",value:function(a){if(!this.inited)this.needUpdateConfig=Ga(Ga({},this.needUpdateConfig),a);else{var i=this.container.get(xe.SceneID);zhe(a,this),this.configService.setLayerConfig(i,this.id,Ga(Ga(Ga({},this.configService.getLayerConfig(this.id)),this.needUpdateConfig),a)),this.needUpdateConfig={}}}},{key:"setContainer",value:function(a,i){this.container=a,this.sceneContainer=i}},{key:"getContainer",value:function(){return this.container}},{key:"setBottomColor",value:function(a){this.bottomColor=a}},{key:"getBottomColor",value:function(){return this.bottomColor}},{key:"addPlugin",value:function(a){return this.plugins.push(a),this}},{key:"init",value:function(){var a=this,i=this.container.get(xe.SceneID);this.configService.setLayerConfig(i,this.id,this.rawConfig),this.layerType=this.rawConfig.layerType,this.iconService=this.container.get(xe.IIconService),this.fontService=this.container.get(xe.IFontService),this.rendererService=this.container.get(xe.IRendererService),this.layerService=this.container.get(xe.ILayerService),this.interactionService=this.container.get(xe.IInteractionService),this.pickingService=this.container.get(xe.IPickingService),this.mapService=this.container.get(xe.IMapService);var o=this.getLayerConfig(),s=o.enableMultiPassRenderer,l=o.passes;s&&l!==null&&l!==void 0&&l.length&&l.length>0&&this.mapService.on("mapAfterFrameChange",function(){a.renderLayers()}),this.cameraService=this.container.get(xe.ICameraService),this.coordinateService=this.container.get(xe.ICoordinateSystemService),this.shaderModuleService=this.container.get(xe.IShaderModuleService),this.postProcessingPassFactory=this.container.get(xe.IFactoryPostProcessingPass),this.normalPassFactory=this.container.get(xe.IFactoryNormalPass),this.styleAttributeService=this.container.get(xe.IStyleAttributeService),this.multiPassRenderer=this.container.get(xe.IMultiPassRenderer),this.multiPassRenderer.setLayer(this),this.pendingStyleAttributes.forEach(function(d){var p=d.attributeName,h=d.attributeField,g=d.attributeValues,v=d.updateOptions;a.styleAttributeService.updateStyleAttribute(p,{scale:Ga({field:h},a.splitValuesAndCallbackInAttribute(g,a.getLayerConfig()[p]))},v)}),this.pendingStyleAttributes=[],this.plugins=this.container.getAll(xe.ILayerPlugin);var u=dme(this.plugins),c;try{for(u.s();!(c=u.n()).done;){var f=c.value;f.apply(this,{rendererService:this.rendererService,mapService:this.mapService,styleAttributeService:this.styleAttributeService,normalPassFactory:this.normalPassFactory,postProcessingPassFactory:this.postProcessingPassFactory})}}catch(d){u.e(d)}finally{u.f()}return this.hooks.init.call(),this.hooks.afterInit.call(),this.emit("inited",{target:this,type:"inited"}),this.emit("add",{target:this,type:"add"}),this}},{key:"updateModelData",value:function(a){a.attributes&&a.elements?this.models.map(function(i){i.updateAttributesAndElements(a.attributes,a.elements)}):console.warn("data error")}},{key:"createModelData",value:function(a,i){if(this.layerModel.createModelData)return this.layerModel.createModelData(i);var o=this.calculateEncodeData(a,i),s=this.triangulation;return o&&s?this.styleAttributeService.createAttributesAndIndices(o,s):{attributes:void 0,elements:void 0}}},{key:"calculateEncodeData",value:function(a,i){return this.inited?sme(this,this.fontService,this.mapService,this.styleAttributeService,a,i):(console.warn("layer not inited!"),null)}},{key:"prepareBuildModel",value:function(){this.inited=!0,this.updateLayerConfig(Ga(Ga({},this.getDefaultConfig()),this.rawConfig));var a=this.getLayerConfig(),i=a.animateOption;i!=null&&i.enable&&(this.layerService.startAnimate(),this.aniamateStatus=!0)}},{key:"color",value:function(a,i,o){return this.updateStyleAttribute("color",a,i,o),this}},{key:"texture",value:function(a,i,o){return this.updateStyleAttribute("texture",a,i,o),this}},{key:"rotate",value:function(a,i,o){return this.updateStyleAttribute("rotate",a,i,o),this}},{key:"size",value:function(a,i,o){return this.updateStyleAttribute("size",a,i,o),this}},{key:"filter",value:function(a,i,o){return this.updateStyleAttribute("filter",a,i,o),this}},{key:"shape",value:function(a,i,o){var s,l,u,c=(s=this.styleAttributeService)===null||s===void 0||(l=s.getLayerStyleAttribute("shape"))===null||l===void 0||(u=l.scale)===null||u===void 0?void 0:u.field,f=a;return this.shapeOption={field:a,values:i},this.updateStyleAttribute("shape",a,i,o),this.tileLayer||ume(this,c,f),this}},{key:"label",value:function(a,i,o){return this.pendingStyleAttributes.push({attributeName:"label",attributeField:a,attributeValues:i,updateOptions:o}),this}},{key:"animate",value:function(a){var i={};return kr(a)?(i.enable=!0,i=Ga(Ga({},i),a)):i.enable=a,this.updateLayerConfig({animateOption:i}),this}},{key:"source",value:function(a,i){return a!=null&&a.data?(this.setSource(a),this):(this.sourceOption={data:a,options:i},this.clusterZoom=0,this)}},{key:"setData",value:function(a,i){var o=this;return this.inited?this.layerSource.setData(a,i):this.on("inited",function(){var s=o.getSource();s?o.layerSource.setData(a,i):(o.source(new $m(a,i)),o.sourceEvent())}),this}},{key:"style",value:function(a){var i=this,o=this.getLayerConfig(),s=a.passes,l=Nn(a,cme);return s&&rD(s).forEach(function(u){var c=i.multiPassRenderer.getPostProcessor().getPostProcessingPassByName(u[0]);c&&c.updateOptions(u[1])}),this.rawConfig=Ga(Ga({},this.rawConfig),l),this.container&&(this.updateLayerConfig(this.rawConfig),this.styleNeedUpdate=!0),o&&o.mask===!0&&a.mask===!1&&(this.clearModels(),this.models=this.layerModel.buildModels()),this}},{key:"scale",value:function(a,i){return kr(a)?this.scaleOptions=Ga(Ga({},this.scaleOptions),a):this.scaleOptions[a]=i,this}},{key:"renderLayers",value:function(){this.rendering=!0,this.layerService.renderLayers(),this.rendering=!1}},{key:"render",value:function(){return this.tileLayer!==void 0?(this.tileLayer.render(),this):(this.getEncodedData().length!==0&&this.renderModels(),this)}},{key:"renderMultiPass",value:function(){var r=lr(vn.mark(function i(){return vn.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(this.getEncodedData().length===0){s.next=7;break}if(!(this.multiPassRenderer&&this.multiPassRenderer.getRenderFlag())){s.next=6;break}return s.next=4,this.multiPassRenderer.render();case 4:s.next=7;break;case 6:this.multiPassRenderer?this.renderModels():this.renderModels();case 7:case"end":return s.stop()}},i,this)}));function a(){return r.apply(this,arguments)}return a}()},{key:"active",value:function(a){var i={};return i.enableHighlight=kr(a)?!0:a,kr(a)?(i.enableHighlight=!0,a.color&&(i.highlightColor=a.color),a.mix&&(i.activeMix=a.mix)):i.enableHighlight=!!a,this.updateLayerConfig(i),this}},{key:"setActive",value:function(a,i){var o=this;if(kr(a)){var s=a.x,l=s===void 0?0:s,u=a.y,c=u===void 0?0:u;this.updateLayerConfig({highlightColor:kr(i)?i.color:this.getLayerConfig().highlightColor,activeMix:kr(i)?i.mix:this.getLayerConfig().activeMix}),this.pick({x:l,y:c})}else this.updateLayerConfig({pickedFeatureID:a,highlightColor:kr(i)?i.color:this.getLayerConfig().highlightColor,activeMix:kr(i)?i.mix:this.getLayerConfig().activeMix}),this.hooks.beforeSelect.call(lm(a)).then(function(){setTimeout(function(){o.reRender()},1)})}},{key:"select",value:function(a){var i={};return i.enableSelect=kr(a)?!0:a,kr(a)?(i.enableSelect=!0,a.color&&(i.selectColor=a.color),a.mix&&(i.selectMix=a.mix)):i.enableSelect=!!a,this.updateLayerConfig(i),this}},{key:"setSelect",value:function(a,i){var o=this;if(kr(a)){var s=a.x,l=s===void 0?0:s,u=a.y,c=u===void 0?0:u;this.updateLayerConfig({selectColor:kr(i)?i.color:this.getLayerConfig().selectColor,selectMix:kr(i)?i.mix:this.getLayerConfig().selectMix}),this.pick({x:l,y:c})}else this.updateLayerConfig({pickedFeatureID:a,selectColor:kr(i)?i.color:this.getLayerConfig().selectColor,selectMix:kr(i)?i.mix:this.getLayerConfig().selectMix}),this.hooks.beforeSelect.call(lm(a)).then(function(){setTimeout(function(){o.reRender()},1)})}},{key:"setBlend",value:function(a){return this.updateLayerConfig({blend:a}),this.layerModelNeedUpdate=!0,this.reRender(),this}},{key:"show",value:function(){return this.updateLayerConfig({visible:!0}),this.reRender(),this}},{key:"hide",value:function(){return this.type==="CanvasLayer"&&this.layerModel.clearCanvas&&this.layerModel.clearCanvas(),this.updateLayerConfig({visible:!1}),this.reRender(),this}},{key:"setIndex",value:function(a){return this.zIndex=a,this.layerService.updateLayerRenderList(),this.layerService.renderLayers(),this}},{key:"setCurrentPickId",value:function(a){this.currentPickId=a}},{key:"getCurrentPickId",value:function(){return this.currentPickId}},{key:"setCurrentSelectedId",value:function(a){this.selectedFeatureID=a}},{key:"getCurrentSelectedId",value:function(){return this.selectedFeatureID}},{key:"isVisible",value:function(){var a=this.mapService.getZoom(),i=this.getLayerConfig(),o=i.visible,s=i.minZoom,l=s===void 0?-1/0:s,u=i.maxZoom,c=u===void 0?1/0:u;return!!o&&a>=l&&a<=c}},{key:"setMultiPass",value:function(a,i){if(this.updateLayerConfig({enableMultiPassRenderer:a}),i&&this.updateLayerConfig({passes:i}),a){var o=this.getLayerConfig(),s=o.passes,l=s===void 0?[]:s;this.multiPassRenderer=aD(this,l,this.postProcessingPassFactory,this.normalPassFactory),this.multiPassRenderer.setRenderFlag(!0);var u=this.rendererService.getViewportSize(),c=u.width,f=u.height;this.multiPassRenderer.resize(c,f)}return this}},{key:"setMinZoom",value:function(a){return this.updateLayerConfig({minZoom:a}),this}},{key:"getMinZoom",value:function(){var a=this.getLayerConfig(),i=a.minZoom;return i}},{key:"getMaxZoom",value:function(){var a=this.getLayerConfig(),i=a.maxZoom;return i}},{key:"get",value:function(a){var i=this.getLayerConfig();return i[a]}},{key:"setMaxZoom",value:function(a){return this.updateLayerConfig({maxZoom:a}),this}},{key:"setAutoFit",value:function(a){return this.updateLayerConfig({autoFit:a}),this}},{key:"fitBounds",value:function(a){if(!this.inited)return this.updateLayerConfig({autoFit:!0}),this;var i=this.getSource(),o=i.extent,s=o.some(function(l){return Math.abs(l)===1/0});return s?this:(this.mapService.fitBounds([[o[0],o[1]],[o[2],o[3]]],a),this)}},{key:"destroy",value:function(){var a,i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.isDestroied||(this.layerChildren.map(function(o){return o.destroy()}),this.layerChildren=[],this.masks.map(function(o){return o.destroy()}),this.masks=[],this.hooks.beforeDestroy.call(),this.layerSource.off("update",this.sourceEvent),this.multiPassRenderer.destroy(),this.styleAttributeService.clearAllAttributes(),this.hooks.afterDestroy.call(),(a=this.layerModel)===null||a===void 0||a.clearModels(),this.models=[],this.layerService.cleanRemove(this,i),this.emit("remove",{target:this,type:"remove"}),this.emit("destroy",{target:this,type:"destroy"}),this.removeAllListeners(),this.isDestroied=!0)}},{key:"clear",value:function(){this.styleAttributeService.clearAllAttributes()}},{key:"clearModels",value:function(){this.models.forEach(function(a){return a.destroy()}),this.layerModel.clearModels(),this.models=[]}},{key:"isDirty",value:function(){return!!(this.styleAttributeService.getLayerStyleAttributes()||[]).filter(function(a){return a.needRescale||a.needRemapping||a.needRegenerateVertices}).length}},{key:"setSource",value:function(a){if(this.layerSource&&this.layerSource.off("update",this.sourceEvent),this.layerSource=a,this.clusterZoom=0,this.inited&&this.layerSource.cluster){var i=this.mapService.getZoom();this.layerSource.updateClusterData(i)}this.layerSource.on("update",this.sourceEvent)}},{key:"getSource",value:function(){return this.layerSource}},{key:"getScaleOptions",value:function(){return this.scaleOptions}},{key:"setEncodedData",value:function(a){this.encodedData=a}},{key:"getEncodedData",value:function(){return this.encodedData}},{key:"getScale",value:function(a){return this.styleAttributeService.getLayerAttributeScale(a)}},{key:"getLegendItems",value:function(a){var i=this.styleAttributeService.getLayerAttributeScale(a);if(!i)return[];if(i.invertExtent){var o=i.range().map(function(u){return m({value:i.invertExtent(u)},a,u)});return o}else if(i.ticks){var s=i.ticks().map(function(u){return m({value:u},a,i(u))});return s}else if(i!=null&&i.domain){var l=i.domain().filter(function(u){return!Lhe(u)}).map(function(u){return m({value:u},a,i(u))});return l}return[]}},{key:"pick",value:function(a){var i=a.x,o=a.y;this.interactionService.triggerHover({x:i,y:o})}},{key:"boxSelect",value:function(a,i){this.pickingService.boxPickLayer(this,a,i)}},{key:"buildLayerModel",value:function(a){var i=a.moduleName,o=a.vertexShader,s=a.fragmentShader,l=a.triangulation,u=a.segmentNumber,c=Nn(a,fme);this.shaderModuleService.registerModule(i,{vs:o,fs:s});var f=this.shaderModuleService.getModule(i),d=f.vs,p=f.fs,h=f.uniforms,g=this.rendererService.createModel,v=this.styleAttributeService.createAttributesAndIndices(this.encodedData,l,u),b=v.attributes,y=v.elements;return g(Ga({attributes:b,uniforms:h,fs:p,vs:d,elements:y,blend:tD[ho.normal]},c))}},{key:"createAttrubutes",value:function(a){var i=a.triangulation,o=this.styleAttributeService.createAttributes(this.encodedData,i),s=o.attributes;return s}},{key:"getTime",value:function(){return this.layerService.clock.getDelta()}},{key:"setAnimateStartTime",value:function(){this.animateStartTime=this.layerService.clock.getElapsedTime()}},{key:"stopAnimate",value:function(){this.aniamateStatus&&(this.layerService.stopAnimate(),this.aniamateStatus=!1,this.updateLayerConfig({animateOption:{enable:!1}}))}},{key:"getLayerAnimateTime",value:function(){return this.layerService.clock.getElapsedTime()-this.animateStartTime}},{key:"needPick",value:function(a){var i=this.getLayerConfig(),o=i.enableHighlight,s=o===void 0?!0:o,l=i.enableSelect,u=l===void 0?!0:l,c=this.eventNames().indexOf(a)!==-1||this.eventNames().indexOf("un"+a)!==-1;return(a==="click"||a==="dblclick")&&u&&(c=!0),a==="mousemove"&&(s||this.eventNames().indexOf("mouseenter")!==-1||this.eventNames().indexOf("unmousemove")!==-1||this.eventNames().indexOf("mouseout")!==-1)&&(c=!0),this.isVisible()&&c}},{key:"buildModels",value:function(){throw new Error("Method not implemented.")}},{key:"rebuildModels",value:function(){throw new Error("Method not implemented.")}},{key:"renderMulPass",value:function(){var r=lr(vn.mark(function i(o){return vn.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,o.render();case 2:case"end":return l.stop()}},i)}));function a(i){return r.apply(this,arguments)}return a}()},{key:"renderModels",value:function(a){var i=this;return this.getEncodedData().length>0&&(this.layerModelNeedUpdate&&this.layerModel&&(this.models=this.layerModel.buildModels(),this.hooks.beforeRender.call(),this.layerModelNeedUpdate=!1),this.layerModel.renderUpdate&&this.layerModel.renderUpdate(),this.models.forEach(function(o){o.draw({uniforms:i.layerModel.getUninforms()},a)})),this}},{key:"updateStyleAttribute",value:function(a,i,o,s){this.inited?this.styleAttributeService.updateStyleAttribute(a,{scale:Ga({field:i},this.splitValuesAndCallbackInAttribute(o,this.getLayerConfig()[i]))},s):this.pendingStyleAttributes.push({attributeName:a,attributeField:i,attributeValues:o,updateOptions:s})}},{key:"getShaderPickStat",value:function(){return this.layerService.getShaderPickStat()}},{key:"setEarthTime",value:function(a){console.warn("empty fn")}},{key:"getConfigSchema",value:function(){throw new Error("Method not implemented.")}},{key:"getModelType",value:function(){throw new Error("Method not implemented.")}},{key:"getDefaultConfig",value:function(){return{}}},{key:"reRender",value:function(){this.inited&&(this.layerService.updateLayerRenderList(),this.layerService.renderLayers())}},{key:"splitValuesAndCallbackInAttribute",value:function(a,i){return{values:As(a)?void 0:a||i,callback:As(a)?a:void 0}}}]),n}(Hi.exports.EventEmitter),VM=rn(J1.prototype,"configService",[$M],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),J1);function gme(e,t){for(var n=-1,r=e==null?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}var vme=gme,bme=MF,yme=vme,xme=RF,_me=1,wme=2;function kme(e,t,n,r,a,i){var o=n&_me,s=e.length,l=t.length;if(s!=l&&!(o&&l>s))return!1;var u=i.get(e),c=i.get(t);if(u&&c)return u==t&&c==e;var f=-1,d=!0,p=n&wme?new bme:void 0;for(i.set(e,t),i.set(t,e);++f<s;){var h=e[f],g=t[f];if(r)var v=o?r(g,h,f,t,e,i):r(h,g,f,e,t,i);if(v!==void 0){if(v)continue;d=!1;break}if(p){if(!yme(t,function(b,y){if(!xme(p,y)&&(h===b||a(h,b,n,r,i)))return p.push(y)})){d=!1;break}}else if(!(h===g||a(h,g,n,r,i))){d=!1;break}}return i.delete(e),i.delete(t),d}var iD=kme;function Eme(e){var t=-1,n=Array(e.size);return e.forEach(function(r,a){n[++t]=[a,r]}),n}var Sme=Eme,WM=Bm,YM=JN,Cme=Dm,Tme=iD,Ame=Sme,Ome=YE,Mme=1,Rme=2,Pme="[object Boolean]",Ime="[object Date]",Lme="[object Error]",Nme="[object Map]",Fme="[object Number]",Dme="[object RegExp]",Bme="[object Set]",zme="[object String]",Ume="[object Symbol]",$me="[object ArrayBuffer]",Vme="[object DataView]",XM=WM?WM.prototype:void 0,e_=XM?XM.valueOf:void 0;function jme(e,t,n,r,a,i,o){switch(n){case Vme:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case $me:return!(e.byteLength!=t.byteLength||!i(new YM(e),new YM(t)));case Pme:case Ime:case Fme:return Cme(+e,+t);case Lme:return e.name==t.name&&e.message==t.message;case Dme:case zme:return e==t+"";case Nme:var s=Ame;case Bme:var l=r&Mme;if(s||(s=Ome),e.size!=t.size&&!l)return!1;var u=o.get(e);if(u)return u==t;r|=Rme,o.set(e,t);var c=Tme(s(e),s(t),r,a,i,o);return o.delete(e),c;case Ume:if(e_)return e_.call(e)==e_.call(t)}return!1}var Gme=jme,ZM=_9,Hme=1,Wme=Object.prototype,Yme=Wme.hasOwnProperty;function Xme(e,t,n,r,a,i){var o=n&Hme,s=ZM(e),l=s.length,u=ZM(t),c=u.length;if(l!=c&&!o)return!1;for(var f=l;f--;){var d=s[f];if(!(o?d in t:Yme.call(t,d)))return!1}var p=i.get(e),h=i.get(t);if(p&&h)return p==t&&h==e;var g=!0;i.set(e,t),i.set(t,e);for(var v=o;++f<l;){d=s[f];var b=e[d],y=t[d];if(r)var x=o?r(y,b,d,t,e,i):r(b,y,d,e,t,i);if(!(x===void 0?b===y||a(b,y,n,r,i):x)){g=!1;break}v||(v=d=="constructor")}if(g&&!v){var k=e.constructor,T=t.constructor;k!=T&&"constructor"in e&&"constructor"in t&&!(typeof k=="function"&&k instanceof k&&typeof T=="function"&&T instanceof T)&&(g=!1)}return i.delete(e),i.delete(t),g}var Zme=Xme,t_=TE,qme=iD,Kme=Gme,Qme=Zme,qM=Jb,KM=Mc,QM=_d.exports,Jme=Qb,e0e=1,JM="[object Arguments]",eR="[object Array]",ug="[object Object]",t0e=Object.prototype,tR=t0e.hasOwnProperty;function n0e(e,t,n,r,a,i){var o=KM(e),s=KM(t),l=o?eR:qM(e),u=s?eR:qM(t);l=l==JM?ug:l,u=u==JM?ug:u;var c=l==ug,f=u==ug,d=l==u;if(d&&QM(e)){if(!QM(t))return!1;o=!0,c=!1}if(d&&!c)return i||(i=new t_),o||Jme(e)?qme(e,t,n,r,a,i):Kme(e,t,l,n,r,a,i);if(!(n&e0e)){var p=c&&tR.call(e,"__wrapped__"),h=f&&tR.call(t,"__wrapped__");if(p||h){var g=p?e.value():e,v=h?t.value():t;return i||(i=new t_),a(g,v,n,r,i)}}return d?(i||(i=new t_),Qme(e,t,n,r,a,i)):!1}var r0e=n0e,a0e=r0e,nR=es;function oD(e,t,n,r,a){return e===t?!0:e==null||t==null||!nR(e)&&!nR(t)?e!==e&&t!==t:a0e(e,t,n,r,oD,a)}var i0e=oD,o0e=i0e;function s0e(e,t){return o0e(e,t)}var qs=s0e,rR,n_,aR;function l0e(e,t){var n=typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=u0e(e))||t&&e&&typeof e.length=="number"){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(u){throw u},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i=!0,o=!1,s;return{s:function(){n=n.call(e)},n:function(){var u=n.next();return i=u.done,u},e:function(u){o=!0,s=u},f:function(){try{!i&&n.return!=null&&n.return()}finally{if(o)throw s}}}}function u0e(e,t){if(!!e){if(typeof e=="string")return iR(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return iR(e,t)}}function iR(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Qa=(rR=XE(xe.IGlobalConfigService),n_=function(){function e(t){Ae(this,e),m(this,"triangulation",void 0),m(this,"createTexture2D",void 0),m(this,"layer",void 0),m(this,"dataTexture",void 0),m(this,"DATA_TEXTURE_WIDTH",void 0),m(this,"rowCount",void 0),m(this,"cacheStyleProperties",void 0),m(this,"cellLength",void 0),m(this,"cellProperties",void 0),m(this,"cellTypeLayout",void 0),m(this,"stylePropertyesExist",void 0),m(this,"dataTextureTest",void 0),an(this,"configService",aR,this),m(this,"shaderModuleService",void 0),m(this,"rendererService",void 0),m(this,"iconService",void 0),m(this,"fontService",void 0),m(this,"styleAttributeService",void 0),m(this,"mapService",void 0),m(this,"cameraService",void 0),m(this,"layerService",void 0),m(this,"pickingService",void 0),this.layer=t,this.rendererService=t.getContainer().get(xe.IRendererService),this.pickingService=t.getContainer().get(xe.IPickingService),this.shaderModuleService=t.getContainer().get(xe.IShaderModuleService),this.styleAttributeService=t.getContainer().get(xe.IStyleAttributeService),this.mapService=t.getContainer().get(xe.IMapService),this.iconService=t.getContainer().get(xe.IIconService),this.fontService=t.getContainer().get(xe.IFontService),this.cameraService=t.getContainer().get(xe.ICameraService),this.layerService=t.getContainer().get(xe.ILayerService),this.registerBuiltinAttributes(),this.startModelAnimate();var n=this.rendererService.createTexture2D;this.createTexture2D=n,this.DATA_TEXTURE_WIDTH=1024,this.rowCount=1,this.cellLength=0,this.cellProperties=[],this.cacheStyleProperties={thetaOffset:void 0,opacity:void 0,strokeOpacity:void 0,strokeWidth:void 0,stroke:void 0,offsets:void 0},this.stylePropertyesExist={hasThetaOffset:0,hasOpacity:0,hasStrokeOpacity:0,hasStrokeWidth:0,hasStroke:0,hasOffsets:0},this.dataTextureTest=this.layerService.getOESTextureFloat(),this.dataTextureTest||(this.dataTexture=this.createTexture2D({data:new Uint8Array(4),mag:V.NEAREST,min:V.NEAREST,width:1,height:1}))}return Oe(e,[{key:"clearLastCalRes",value:function(){this.cellProperties=[],this.cellLength=0,this.stylePropertyesExist={hasThetaOffset:0,hasOpacity:0,hasStrokeOpacity:0,hasStrokeWidth:0,hasStroke:0,hasOffsets:0}}},{key:"getCellTypeLayout",value:function(){return this.dataTextureTest?[this.rowCount,this.DATA_TEXTURE_WIDTH,0,0,this.stylePropertyesExist.hasOpacity,this.stylePropertyesExist.hasStrokeOpacity,this.stylePropertyesExist.hasStrokeWidth,this.stylePropertyesExist.hasStroke,this.stylePropertyesExist.hasOffsets,this.stylePropertyesExist.hasThetaOffset,0,0,0,0,0,1]:[1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,-1]}},{key:"dataTextureNeedUpdate",value:function(n){var r=!1;return qs(n.thetaOffset,this.cacheStyleProperties.thetaOffset)||(r=!0,this.cacheStyleProperties.thetaOffset=n.thetaOffset),qs(n.opacity,this.cacheStyleProperties.opacity)||(r=!0,this.cacheStyleProperties.opacity=n.opacity),qs(n.strokeOpacity,this.cacheStyleProperties.strokeOpacity)||(r=!0,this.cacheStyleProperties.strokeOpacity=n.strokeOpacity),qs(n.strokeWidth,this.cacheStyleProperties.strokeWidth)||(r=!0,this.cacheStyleProperties.strokeWidth=n.strokeWidth),qs(n.stroke,this.cacheStyleProperties.stroke)||(r=!0,this.cacheStyleProperties.stroke=n.stroke),qs(n.offsets,this.cacheStyleProperties.offsets)||(r=!0,this.cacheStyleProperties.offsets=n.offsets),this.dataTexture===void 0&&(r=!0),r}},{key:"judgeStyleAttributes",value:function(n){this.clearLastCalRes(),n.opacity!==void 0&&!er(n.opacity)&&(this.cellProperties.push({attr:"opacity",count:1}),this.stylePropertyesExist.hasOpacity=1,this.cellLength+=1),n.strokeOpacity!==void 0&&!er(n.strokeOpacity)&&(this.cellProperties.push({attr:"strokeOpacity",count:1}),this.stylePropertyesExist.hasStrokeOpacity=1,this.cellLength+=1),n.strokeWidth!==void 0&&!er(n.strokeWidth)&&(this.cellProperties.push({attr:"strokeWidth",count:1}),this.stylePropertyesExist.hasStrokeWidth=1,this.cellLength+=1),n.stroke!==void 0&&!this.isStaticColor(n.stroke)&&(this.cellProperties.push({attr:"stroke",count:4}),this.stylePropertyesExist.hasStroke=1,this.cellLength+=4),n.offsets!==void 0&&!this.isOffsetStatic(n.offsets)&&(this.cellProperties.push({attr:"offsets",count:2}),this.stylePropertyesExist.hasOffsets=1,this.cellLength+=2),n.thetaOffset!==void 0&&!er(n.thetaOffset)&&(this.cellProperties.push({attr:"thetaOffset",count:1}),this.stylePropertyesExist.hasThetaOffset=1,this.cellLength+=1)}},{key:"isStaticColor",value:function(n){return Wo(n)?!!hu(n):!1}},{key:"getStrokeColor",value:function(n){if(this.isStaticColor(n)){var r=Ts(n);return r[0]=r[0]?r[0]:0,r[1]=r[1]?r[1]:0,r[2]=r[2]?r[2]:0,r[3]=r[3]?r[3]:0,r}else return[0,0,0,0]}},{key:"isOffsetStatic",value:function(n){return!!(Array.isArray(n)&&n.length===2&&er(n[0])&&er(n[1]))}},{key:"patchMod",value:function(n,r){for(var a=0;a<r;a++)n.push(-1)}},{key:"patchData",value:function(n,r,a){var i=l0e(a),o;try{for(i.s();!(o=i.n()).done;){var s=o.value,l=s.attr,u=s.count,c=r[l];c!==void 0?l==="stroke"?n.push.apply(n,$e(Ts(c))):l==="offsets"?this.isOffsetStatic(c)?n.push(-c[0],c[1]):n.push(0,0):n.push(er(c)?c:1):this.patchMod(n,u)}}catch(f){i.e(f)}finally{i.f()}}},{key:"calDataFrame",value:function(n,r,a){for(var i=r.length,o=Math.ceil(i*n/this.DATA_TEXTURE_WIDTH),s=o*this.DATA_TEXTURE_WIDTH,l=[],u=0;u<i;u++){var c=r[u];this.patchData(l,c,a)}for(var f=l.length;f<s;f++)l.push(-1);return{data:l,width:this.DATA_TEXTURE_WIDTH,height:o}}},{key:"getBlend",value:function(){var n=this.layer.getLayerConfig(),r=n.blend,a=r===void 0?"normal":r;return tD[ho[a]]}},{key:"getDefaultStyle",value:function(){return{}}},{key:"getUninforms",value:function(){throw new Error("Method not implemented.")}},{key:"getAnimateUniforms",value:function(){return{}}},{key:"needUpdate",value:function(){return!1}},{key:"buildModels",value:function(){throw new Error("Method not implemented.")}},{key:"initModels",value:function(){throw new Error("Method not implemented.")}},{key:"clearModels",value:function(){}},{key:"getAttribute",value:function(){throw new Error("Method not implemented.")}},{key:"render",value:function(){throw new Error("Method not implemented.")}},{key:"registerBuiltinAttributes",value:function(){throw new Error("Method not implemented.")}},{key:"animateOption2Array",value:function(n){return[n.enable?0:1,n.duration||4,n.interval||.2,n.trailLength||.1]}},{key:"startModelAnimate",value:function(){var n=this.layer.getLayerConfig(),r=n.animateOption;r.enable&&this.layer.setAnimateStartTime()}}]),e}(),aR=rn(n_.prototype,"configService",[rR],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),n_),ZE={exports:{}};ZE.exports=fy;ZE.exports.default=fy;function fy(e,t,n){n=n||2;var r=t&&t.length,a=r?t[0]*n:e.length,i=sD(e,0,a,n,!0),o=[];if(!i||i.next===i.prev)return o;var s,l,u,c,f,d,p;if(r&&(i=h0e(e,t,i,n)),e.length>80*n){s=u=e[0],l=c=e[1];for(var h=n;h<a;h+=n)f=e[h],d=e[h+1],f<s&&(s=f),d<l&&(l=d),f>u&&(u=f),d>c&&(c=d);p=Math.max(u-s,c-l),p=p!==0?1/p:0}return pm(i,o,n,s,l,p),o}function sD(e,t,n,r,a){var i,o;if(a===pk(e,t,n,r)>0)for(i=t;i<n;i+=r)o=oR(i,e[i],e[i+1],o);else for(i=n-r;i>=t;i-=r)o=oR(i,e[i],e[i+1],o);return o&&dy(o,o.next)&&(mm(o),o=o.next),o}function bu(e,t){if(!e)return e;t||(t=e);var n=e,r;do if(r=!1,!n.steiner&&(dy(n,n.next)||Lr(n.prev,n,n.next)===0)){if(mm(n),n=t=n.prev,n===n.next)break;r=!0}else n=n.next;while(r||n!==t);return t}function pm(e,t,n,r,a,i,o){if(!!e){!o&&i&&y0e(e,r,a,i);for(var s=e,l,u;e.prev!==e.next;){if(l=e.prev,u=e.next,i?f0e(e,r,a,i):c0e(e)){t.push(l.i/n),t.push(e.i/n),t.push(u.i/n),mm(e),e=u.next,s=u.next;continue}if(e=u,e===s){o?o===1?(e=d0e(bu(e),t,n),pm(e,t,n,r,a,i,2)):o===2&&p0e(e,t,n,r,a,i):pm(bu(e),t,n,r,a,i,1);break}}}}function c0e(e){var t=e.prev,n=e,r=e.next;if(Lr(t,n,r)>=0)return!1;for(var a=e.next.next;a!==e.prev;){if($f(t.x,t.y,n.x,n.y,r.x,r.y,a.x,a.y)&&Lr(a.prev,a,a.next)>=0)return!1;a=a.next}return!0}function f0e(e,t,n,r){var a=e.prev,i=e,o=e.next;if(Lr(a,i,o)>=0)return!1;for(var s=a.x<i.x?a.x<o.x?a.x:o.x:i.x<o.x?i.x:o.x,l=a.y<i.y?a.y<o.y?a.y:o.y:i.y<o.y?i.y:o.y,u=a.x>i.x?a.x>o.x?a.x:o.x:i.x>o.x?i.x:o.x,c=a.y>i.y?a.y>o.y?a.y:o.y:i.y>o.y?i.y:o.y,f=fk(s,l,t,n,r),d=fk(u,c,t,n,r),p=e.prevZ,h=e.nextZ;p&&p.z>=f&&h&&h.z<=d;){if(p!==e.prev&&p!==e.next&&$f(a.x,a.y,i.x,i.y,o.x,o.y,p.x,p.y)&&Lr(p.prev,p,p.next)>=0||(p=p.prevZ,h!==e.prev&&h!==e.next&&$f(a.x,a.y,i.x,i.y,o.x,o.y,h.x,h.y)&&Lr(h.prev,h,h.next)>=0))return!1;h=h.nextZ}for(;p&&p.z>=f;){if(p!==e.prev&&p!==e.next&&$f(a.x,a.y,i.x,i.y,o.x,o.y,p.x,p.y)&&Lr(p.prev,p,p.next)>=0)return!1;p=p.prevZ}for(;h&&h.z<=d;){if(h!==e.prev&&h!==e.next&&$f(a.x,a.y,i.x,i.y,o.x,o.y,h.x,h.y)&&Lr(h.prev,h,h.next)>=0)return!1;h=h.nextZ}return!0}function d0e(e,t,n){var r=e;do{var a=r.prev,i=r.next.next;!dy(a,i)&&lD(a,r,r.next,i)&&hm(a,i)&&hm(i,a)&&(t.push(a.i/n),t.push(r.i/n),t.push(i.i/n),mm(r),mm(r.next),r=e=i),r=r.next}while(r!==e);return bu(r)}function p0e(e,t,n,r,a,i){var o=e;do{for(var s=o.next.next;s!==o.prev;){if(o.i!==s.i&&w0e(o,s)){var l=uD(o,s);o=bu(o,o.next),l=bu(l,l.next),pm(o,t,n,r,a,i),pm(l,t,n,r,a,i);return}s=s.next}o=o.next}while(o!==e)}function h0e(e,t,n,r){var a=[],i,o,s,l,u;for(i=0,o=t.length;i<o;i++)s=t[i]*r,l=i<o-1?t[i+1]*r:e.length,u=sD(e,s,l,r,!1),u===u.next&&(u.steiner=!0),a.push(_0e(u));for(a.sort(m0e),i=0;i<a.length;i++)n=g0e(a[i],n),n=bu(n,n.next);return n}function m0e(e,t){return e.x-t.x}function g0e(e,t){var n=v0e(e,t);if(!n)return t;var r=uD(n,e),a=bu(n,n.next);return bu(r,r.next),t===n?a:t}function v0e(e,t){var n=t,r=e.x,a=e.y,i=-1/0,o;do{if(a<=n.y&&a>=n.next.y&&n.next.y!==n.y){var s=n.x+(a-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(s<=r&&s>i){if(i=s,s===r){if(a===n.y)return n;if(a===n.next.y)return n.next}o=n.x<n.next.x?n:n.next}}n=n.next}while(n!==t);if(!o)return null;if(r===i)return o;var l=o,u=o.x,c=o.y,f=1/0,d;n=o;do r>=n.x&&n.x>=u&&r!==n.x&&$f(a<c?r:i,a,u,c,a<c?i:r,a,n.x,n.y)&&(d=Math.abs(a-n.y)/(r-n.x),hm(n,e)&&(d<f||d===f&&(n.x>o.x||n.x===o.x&&b0e(o,n)))&&(o=n,f=d)),n=n.next;while(n!==l);return o}function b0e(e,t){return Lr(e.prev,e,t.prev)<0&&Lr(t.next,e,e.next)<0}function y0e(e,t,n,r){var a=e;do a.z===null&&(a.z=fk(a.x,a.y,t,n,r)),a.prevZ=a.prev,a.nextZ=a.next,a=a.next;while(a!==e);a.prevZ.nextZ=null,a.prevZ=null,x0e(a)}function x0e(e){var t,n,r,a,i,o,s,l,u=1;do{for(n=e,e=null,i=null,o=0;n;){for(o++,r=n,s=0,t=0;t<u&&(s++,r=r.nextZ,!!r);t++);for(l=u;s>0||l>0&&r;)s!==0&&(l===0||!r||n.z<=r.z)?(a=n,n=n.nextZ,s--):(a=r,r=r.nextZ,l--),i?i.nextZ=a:e=a,a.prevZ=i,i=a;n=r}i.nextZ=null,u*=2}while(o>1);return e}function fk(e,t,n,r,a){return e=32767*(e-n)*a,t=32767*(t-r)*a,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,e|t<<1}function _0e(e){var t=e,n=e;do(t.x<n.x||t.x===n.x&&t.y<n.y)&&(n=t),t=t.next;while(t!==e);return n}function $f(e,t,n,r,a,i,o,s){return(a-o)*(t-s)-(e-o)*(i-s)>=0&&(e-o)*(r-s)-(n-o)*(t-s)>=0&&(n-o)*(i-s)-(a-o)*(r-s)>=0}function w0e(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!k0e(e,t)&&(hm(e,t)&&hm(t,e)&&E0e(e,t)&&(Lr(e.prev,e,t.prev)||Lr(e,t.prev,t))||dy(e,t)&&Lr(e.prev,e,e.next)>0&&Lr(t.prev,t,t.next)>0)}function Lr(e,t,n){return(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y)}function dy(e,t){return e.x===t.x&&e.y===t.y}function lD(e,t,n,r){var a=fg(Lr(e,t,n)),i=fg(Lr(e,t,r)),o=fg(Lr(n,r,e)),s=fg(Lr(n,r,t));return!!(a!==i&&o!==s||a===0&&cg(e,n,t)||i===0&&cg(e,r,t)||o===0&&cg(n,e,r)||s===0&&cg(n,t,r))}function cg(e,t,n){return t.x<=Math.max(e.x,n.x)&&t.x>=Math.min(e.x,n.x)&&t.y<=Math.max(e.y,n.y)&&t.y>=Math.min(e.y,n.y)}function fg(e){return e>0?1:e<0?-1:0}function k0e(e,t){var n=e;do{if(n.i!==e.i&&n.next.i!==e.i&&n.i!==t.i&&n.next.i!==t.i&&lD(n,n.next,e,t))return!0;n=n.next}while(n!==e);return!1}function hm(e,t){return Lr(e.prev,e,e.next)<0?Lr(e,t,e.next)>=0&&Lr(e,e.prev,t)>=0:Lr(e,t,e.prev)<0||Lr(e,e.next,t)<0}function E0e(e,t){var n=e,r=!1,a=(e.x+t.x)/2,i=(e.y+t.y)/2;do n.y>i!=n.next.y>i&&n.next.y!==n.y&&a<(n.next.x-n.x)*(i-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next;while(n!==e);return r}function uD(e,t){var n=new dk(e.i,e.x,e.y),r=new dk(t.i,t.x,t.y),a=e.next,i=t.prev;return e.next=t,t.prev=e,n.next=a,a.prev=n,r.next=n,n.prev=r,i.next=r,r.prev=i,r}function oR(e,t,n,r){var a=new dk(e,t,n);return r?(a.next=r.next,a.prev=r,r.next.prev=a,r.next=a):(a.prev=a,a.next=a),a}function mm(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function dk(e,t,n){this.i=e,this.x=t,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}fy.deviation=function(e,t,n,r){var a=t&&t.length,i=a?t[0]*n:e.length,o=Math.abs(pk(e,0,i,n));if(a)for(var s=0,l=t.length;s<l;s++){var u=t[s]*n,c=s<l-1?t[s+1]*n:e.length;o-=Math.abs(pk(e,u,c,n))}var f=0;for(s=0;s<r.length;s+=3){var d=r[s]*n,p=r[s+1]*n,h=r[s+2]*n;f+=Math.abs((e[d]-e[h])*(e[p+1]-e[d+1])-(e[d]-e[p])*(e[h+1]-e[d+1]))}return o===0&&f===0?0:Math.abs((f-o)/o)};function pk(e,t,n,r){for(var a=0,i=t,o=n-r;i<n;i+=r)a+=(e[o]-e[i])*(e[i+1]+e[o+1]),o=i;return a}fy.flatten=function(e){for(var t=e[0][0].length,n={vertices:[],holes:[],dimensions:t},r=0,a=0;a<e.length;a++){for(var i=0;i<e[a].length;i++)for(var o=0;o<t;o++)n.vertices.push(e[a][i][o]);a>0&&(r+=e[a-1].length,n.holes.push(r))}return n};var Zv=ZE.exports,S0e=100;function sR(e){return e/180*Math.acos(-1)}function cD(e){var t=sR(e[0])+Math.PI/2,n=sR(e[1]),r=S0e+Math.random()*.4,a=r*Math.cos(n)*Math.cos(t),i=r*Math.cos(n)*Math.sin(t),o=r*Math.sin(n);return[i,o,a]}var dg=ta();ta();var ea=ta(),Il=ta(),uf=ta();function r_(e,t,n,r,a){ps(e,n,r),Oh(e,e),t=ok(-e[1],e[0]);var i=ok(-n[1],n[0]);return[a/Qg(t,i),t]}function Ll(e,t){return Dle(e,-t[1],t[0])}function cf(e,t,n){return sk(e,t,n),Oh(e,e),e}function a_(e,t){return e[0]===t[0]&&e[1]===t[1]}var C0e=function(){function e(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Ae(this,e),m(this,"complex",void 0),m(this,"join",void 0),m(this,"cap",void 0),m(this,"miterLimit",void 0),m(this,"thickness",void 0),m(this,"normal",void 0),m(this,"lastFlip",-1),m(this,"miter",ok(0,0)),m(this,"started",!1),m(this,"dash",!1),m(this,"totalDistance",0),m(this,"currentIndex",0),this.join=t.join||"miter",this.cap=t.cap||"butt",this.miterLimit=t.miterLimit||10,this.thickness=t.thickness||1,this.dash=t.dash||!1,this.complex={positions:[],indices:[],normals:[],startIndex:0,indexes:[]}}return Oe(e,[{key:"extrude_gaode2",value:function(n,r){var a=this.complex;if(n.length<=1)return a;this.lastFlip=-1,this.started=!1,this.normal=null,this.totalDistance=0;for(var i=n.length,o=a.startIndex,s=1;s<i;s++){var l,u,c,f=n[s-1];f.push((l=r[s-1][2])!==null&&l!==void 0?l:0);var d=r[s-1],p=n[s];p.push((u=r[s][2])!==null&&u!==void 0?u:0);var h=r[s],g=s<n.length-1?[].concat($e(n[s+1]),[(c=r[s+1][2])!==null&&c!==void 0?c:0]):null,v=s<r.length-1?r[s+1]:null,b=this.segment_gaode2(a,o,f,p,g,d,h,v);o+=b}if(this.dash)for(var y=0;y<a.positions.length/6;y++)a.positions[y*6+5]=this.totalDistance;return a.startIndex=a.positions.length/6,a}},{key:"simpleExtrude_gaode2",value:function(n,r){var a=this.complex;if(n.length<=1)return a;this.lastFlip=-1,this.started=!1,this.normal=null,this.totalDistance=0;for(var i=n.length,o=a.startIndex,s=1;s<i;s++){var l,u,c,f=n[s-1];f.push((l=r[s-1][2])!==null&&l!==void 0?l:0);var d=r[s-1],p=n[s];p.push((u=r[s][2])!==null&&u!==void 0?u:0);var h=r[s],g=s<n.length-1?[].concat($e(n[s+1]),[(c=r[s+1][2])!==null&&c!==void 0?c:0]):null,v=s<r.length-1?r[s+1]:null,b=this.simpleSegment(a,o,f,p,g,d,h,v);o+=b}if(this.dash)for(var y=0;y<a.positions.length/6;y++)a.positions[y*6+5]=this.totalDistance;return a.startIndex=a.positions.length/6,a}},{key:"extrude",value:function(n){var r=this.complex;if(n.length<=1)return r;this.lastFlip=-1,this.started=!1,this.normal=null,this.totalDistance=0;for(var a=n.length,i=r.startIndex,o=1;o<a;o++){var s=n[o-1],l=n[o],u=o<n.length-1?n[o+1]:null,c=this.segment(r,i,s,l,u);i+=c}if(this.dash)for(var f=0;f<r.positions.length/6;f++)r.positions[f*6+5]=this.totalDistance;return r.startIndex=r.positions.length/6,r}},{key:"simpleExtrude",value:function(n){var r=this.complex;if(n.length<=1)return r;this.lastFlip=-1,this.started=!1,this.normal=null,this.totalDistance=0;for(var a=n.length,i=r.startIndex,o=1;o<a;o++){var s=n[o-1],l=n[o],u=o<n.length-1?n[o+1]:null,c=this.simpleSegment(r,i,s,l,u);i+=c}if(this.dash)for(var f=0;f<r.positions.length/6;f++)r.positions[f*6+5]=this.totalDistance;return r.startIndex=r.positions.length/6,r}},{key:"segment_gaode2",value:function(n,r,a,i,o,s,l,u){var c=0,f=n.indices,d=n.positions,p=n.normals,h=this.cap==="square",g=this.join==="bevel",v=ms([l[0],l[1]]),b=ms([s[0],s[1]]);cf(ea,i,a);var y=0;if(this.dash&&(y=this.lineSegmentDistance(v,b),this.totalDistance+=y),this.normal||(this.normal=ta(),Ll(this.normal,ea)),!this.started)if(this.started=!0,h){var x=ta(),k=ta();ps(x,this.normal,ea),ps(k,this.normal,ea),p.push(k[0],k[1],0),p.push(x[0],x[1],0),d.push(a[0],a[1],a[2]|0,this.totalDistance-y,-this.thickness,a[2]|0),this.complex.indexes.push(this.currentIndex),d.push(a[0],a[1],a[2]|0,this.totalDistance-y,this.thickness,a[2]|0),this.complex.indexes.push(this.currentIndex),this.currentIndex++}else this.extrusions(d,p,a,this.normal,this.thickness,this.totalDistance-y);if(f.push(r+0,r+1,r+2),o){a_(i,o)&&ps(o,i,Oh(o,Kg(o,i,a))),cf(Il,o,i);var I=r_(uf,ta(),ea,Il,this.thickness),P=Le(I,2),j=P[0],A=P[1],S=Qg(uf,this.normal)<0?-1:1,M=g;if(!M&&this.join==="miter"){var O=j;O>this.miterLimit&&(M=!0)}M?(p.push(this.normal[0],this.normal[1],0),p.push(A[0],A[1],0),d.push(i[0],i[1],i[2]|0,this.totalDistance,-this.thickness*S,i[2]|0),this.complex.indexes.push(this.currentIndex),d.push(i[0],i[1],i[2]|0,this.totalDistance,this.thickness*S,i[2]|0),this.complex.indexes.push(this.currentIndex),this.currentIndex++,f.push.apply(f,$e(this.lastFlip!==-S?[r,r+2,r+3]:[r+2,r+1,r+3])),f.push(r+2,r+3,r+4),Ll(dg,Il),Bp(this.normal,dg),p.push(this.normal[0],this.normal[1],0),d.push(i[0],i[1],i[2]|0,this.totalDistance,-this.thickness*S,i[2]|0),this.complex.indexes.push(this.currentIndex),this.currentIndex++,c+=3):(this.extrusions(d,p,i,A,j,this.totalDistance),f.push.apply(f,$e(this.lastFlip===1?[r,r+2,r+3]:[r+2,r+1,r+3])),S=-1,Bp(this.normal,A),c+=2),this.lastFlip=S}else{if(Ll(this.normal,ea),h){var T=ta(),C=ta();sk(C,ea,this.normal),ps(T,ea,this.normal),p.push(C[0],C[1],0),p.push(T[0],T[1],0),d.push(i[0],i[1],i[2]|0,this.totalDistance,this.thickness,i[2]|0),this.complex.indexes.push(this.currentIndex),d.push(i[0],i[1],i[2]|0,this.totalDistance,this.thickness,i[2]|0),this.complex.indexes.push(this.currentIndex),this.currentIndex++}else this.extrusions(d,p,i,this.normal,this.thickness,this.totalDistance);f.push.apply(f,$e(this.lastFlip===1?[r,r+2,r+3]:[r+2,r+1,r+3])),c+=2}return c}},{key:"simpleSegment",value:function(n,r,a,i,o){var s=0,l=n.indices,u=n.positions,c=n.normals,f=ms([i[0],i[1]]),d=ms([a[0],a[1]]);cf(ea,f,d);var p=0;if(this.dash&&(p=this.lineSegmentDistance(f,d),this.totalDistance+=p),this.normal||(this.normal=ta(),Ll(this.normal,ea)),this.started||(this.started=!0,this.extrusions(u,c,a,this.normal,this.thickness,this.totalDistance-p)),l.push(r+0,r+1,r+2),!o)Ll(this.normal,ea),this.extrusions(u,c,i,this.normal,this.thickness,this.totalDistance),l.push.apply(l,$e(this.lastFlip===1?[r,r+2,r+3]:[r+2,r+1,r+3])),s+=2;else{var h=ms([o[0],o[1]]);a_(f,h)&&ps(h,f,Oh(h,Kg(h,f,d))),cf(Il,h,f);var g=r_(uf,ta(),ea,Il,this.thickness),v=Le(g,2),b=v[0],y=v[1],x=Qg(uf,this.normal)<0?-1:1;this.extrusions(u,c,i,y,b,this.totalDistance),l.push.apply(l,$e(this.lastFlip===1?[r,r+2,r+3]:[r+2,r+1,r+3])),x=-1,Bp(this.normal,y),s+=2,this.lastFlip=x}return s}},{key:"segment",value:function(n,r,a,i,o){var s=0,l=n.indices,u=n.positions,c=n.normals,f=this.cap==="square",d=this.join==="bevel",p=ms([i[0],i[1]]),h=ms([a[0],a[1]]);cf(ea,p,h);var g=0;if(this.dash&&(g=this.lineSegmentDistance(p,h),this.totalDistance+=g),this.normal||(this.normal=ta(),Ll(this.normal,ea)),!this.started)if(this.started=!0,f){var v=ta(),b=ta();ps(v,this.normal,ea),ps(b,this.normal,ea),c.push(b[0],b[1],0),c.push(v[0],v[1],0),u.push(a[0],a[1],a[2]|0,this.totalDistance-g,-this.thickness,a[2]|0),this.complex.indexes.push(this.currentIndex),u.push(a[0],a[1],a[2]|0,this.totalDistance-g,this.thickness,a[2]|0),this.complex.indexes.push(this.currentIndex),this.currentIndex++}else this.extrusions(u,c,a,this.normal,this.thickness,this.totalDistance-g);if(l.push(r+0,r+1,r+2),o){var k=ms([o[0],o[1]]);a_(p,k)&&ps(k,p,Oh(k,Kg(k,p,h))),cf(Il,k,p);var T=r_(uf,ta(),ea,Il,this.thickness),C=Le(T,2),I=C[0],P=C[1],j=Qg(uf,this.normal)<0?-1:1,A=d;if(!A&&this.join==="miter"){var S=I;S>this.miterLimit&&(A=!0)}A?(c.push(this.normal[0],this.normal[1],0),c.push(P[0],P[1],0),u.push(i[0],i[1],i[2]|0,this.totalDistance,-this.thickness*j,i[2]|0),this.complex.indexes.push(this.currentIndex),u.push(i[0],i[1],i[2]|0,this.totalDistance,this.thickness*j,i[2]|0),this.complex.indexes.push(this.currentIndex),this.currentIndex++,l.push.apply(l,$e(this.lastFlip!==-j?[r,r+2,r+3]:[r+2,r+1,r+3])),l.push(r+2,r+3,r+4),Ll(dg,Il),Bp(this.normal,dg),c.push(this.normal[0],this.normal[1],0),u.push(i[0],i[1],i[2]|0,this.totalDistance,-this.thickness*j,i[2]|0),this.complex.indexes.push(this.currentIndex),this.currentIndex++,s+=3):(this.extrusions(u,c,i,P,I,this.totalDistance),l.push.apply(l,$e(this.lastFlip===1?[r,r+2,r+3]:[r+2,r+1,r+3])),j=-1,Bp(this.normal,P),s+=2),this.lastFlip=j}else{if(Ll(this.normal,ea),f){var y=ta(),x=ta();sk(x,ea,this.normal),ps(y,ea,this.normal),c.push(x[0],x[1],0),c.push(y[0],y[1],0),u.push(i[0],i[1],i[2]|0,this.totalDistance,this.thickness,i[2]|0),this.complex.indexes.push(this.currentIndex),u.push(i[0],i[1],i[2]|0,this.totalDistance,this.thickness,i[2]|0),this.complex.indexes.push(this.currentIndex),this.currentIndex++}else this.extrusions(u,c,i,this.normal,this.thickness,this.totalDistance);l.push.apply(l,$e(this.lastFlip===1?[r,r+2,r+3]:[r+2,r+1,r+3])),s+=2}return s}},{key:"extrusions",value:function(n,r,a,i,o,s){r.push(i[0],i[1],0),r.push(i[0],i[1],0),n.push(a[0],a[1],a[2]|0,s,-o,a[2]|0),this.complex.indexes.push(this.currentIndex),n.push(a[0],a[1],a[2]|0,s,o,a[2]|0),this.complex.indexes.push(this.currentIndex),this.currentIndex++}},{key:"lineSegmentDistance",value:function(n,r){var a=r[0]-n[0],i=r[1]-n[1];return Math.sqrt(a*a+i*i)}}]),e}();function hc(e){if(er(e[0]))return e;if(er(e[0][0]))throw new Error("\u5F53\u524D\u6570\u636E\u4E0D\u652F\u6301\u6807\u6CE8");if(er(e[0][0][0])){var t=e,n=0,r=0,a=0;return t.forEach(function(i){i.forEach(function(o){n+=o[0],r+=o[1],a++})}),[n/a,r/a,0]}else throw new Error("\u5F53\u524D\u6570\u636E\u4E0D\u652F\u6301\u6807\u6CE8")}function T0e(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,n=e[0][0],r=e[0][e[0].length-1];n[0]===r[0]&&n[1]===r[1]&&(e[0]=e[0].slice(0,e[0].length-1));for(var a=e[0].length,i=Zv.flatten(e),o=i.vertices,s=i.dimensions,l=[],u=[],c=[],f=0;f<o.length/s;f++)s===2?l.push(o[f*2],o[f*2+1],1,-1,-1):l.push(o[f*3],o[f*3+1],1,-1,-1),c.push(0,0,1);var d=Zv(i.vertices,i.holes,i.dimensions);u.push.apply(u,$e(d));for(var p=function(v){var b=i.vertices.slice(v*s,(v+1)*s),y=i.vertices.slice((v+1)*s,(v+2)*s);y.length===0&&(y=i.vertices.slice(0,s));var x=l.length/5;l.push(b[0],b[1],1,0,0,y[0],y[1],1,.1,0,b[0],b[1],0,0,.8,y[0],y[1],0,.1,.8);var k=A0e([y[0],y[1],1],[b[0],b[1],0],[b[0],b[1],1],t);c.push.apply(c,$e(k).concat($e(k),$e(k),$e(k))),u.push.apply(u,$e([1,2,0,3,2,1].map(function(T){return T+x})))},h=0;h<a;h++)p(h);return{positions:l,index:u,normals:c}}function A0e(e,t,n){var r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,a=zf(),i=zf(),o=zf();r&&(e=M1(e),t=M1(t),n=M1(n));var s=Ya.apply(ad,$e(e)),l=Ya.apply(ad,$e(t)),u=Ya.apply(ad,$e(n));ik(a,u,l),ik(i,s,l),SF(o,a,i);var c=zf();return Uf(c,o),c}var to,Ju;(function(e){e.CYLINDER="cylinder",e.SQUARECOLUMN="squareColumn",e.TRIANGLECOLUMN="triangleColumn",e.HEXAGONCOLUMN="hexagonColumn",e.PENTAGONCOLUMN="pentagonColumn"})(Ju||(Ju={}));var ec;(function(e){e.CIRCLE="circle",e.SQUARE="square",e.TRIANGLE="triangle",e.HEXAGON="hexagon",e.PENTAGON="pentagon"})(ec||(ec={}));function Hm(e){for(var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=Math.PI*2/e,r=[],a=0;a<e;a++)r.push(n*a+t*Math.PI/12);var i=r.map(function(o){var s=Math.sin(o+Math.PI/4),l=Math.cos(o+Math.PI/4);return[s,l,0]});return i}function lR(){return Hm(30)}function uR(){return Hm(4)}function cR(){return Hm(3)}function fR(){return Hm(6,1)}function dR(){return Hm(5)}var i_=(to={},m(to,ec.CIRCLE,lR),m(to,ec.HEXAGON,fR),m(to,ec.TRIANGLE,cR),m(to,ec.SQUARE,uR),m(to,ec.PENTAGON,dR),m(to,Ju.CYLINDER,lR),m(to,Ju.HEXAGONCOLUMN,fR),m(to,Ju.TRIANGLECOLUMN,cR),m(to,Ju.SQUARECOLUMN,uR),m(to,Ju.PENTAGONCOLUMN,dR),to),pg={};function Cs(e){var t=hc(e.coordinates);return{vertices:[].concat($e(t),$e(t),$e(t),$e(t)),indices:[0,1,2,2,3,0],size:t.length}}function pR(e){var t=hc(e.coordinates),n=cD(t);return{vertices:[].concat($e(n),$e(n),$e(n),$e(n)),indices:[0,1,2,2,3,0],size:n.length}}function O0e(e){var t=e.shape,n=M0e(t,!1),r=n.positions,a=n.index,i=n.normals;return{vertices:r,indices:a,normals:i,size:5}}function fD(e){var t=hc(e.coordinates);return{vertices:$e(t),indices:[0],size:t.length}}function hR(e){var t=e.coordinates,n=e.originCoordinates,r=e.version,a=new C0e({dash:!0,join:"bevel"});if(r==="GAODE2.x"){var i=t;Array.isArray(i[0][0])||(i=[t]);var o=n;Array.isArray(o[0][0])||(o=[n]);for(var s=0;s<i.length;s++){var l=i[s],u=o[s];a.extrude_gaode2(l,u)}}else{var c=t;c[0]&&!Array.isArray(c[0][0])&&(c=[t]),c.forEach(function(d){a.extrude(d)})}var f=a.complex;return{vertices:f.positions,indices:f.indices,normals:f.normals,indexes:f.indexes,size:6}}function dD(e){var t=e.coordinates,n=Zv.flatten(t),r=n.vertices,a=n.dimensions,i=n.holes;return{indices:Zv(r,i,a),vertices:r,size:a}}function pD(e){var t=e.coordinates,n=[].concat($e(t[0]),[0,0,1,t[1][0],t[0][1],0,1,1],$e(t[1]),[0,1,0],$e(t[0]),[0,0,1],$e(t[1]),[0,1,0,t[0][0],t[1][1],0,0,0]),r=[0,1,2,3,4,5];return{vertices:n,indices:r,size:5}}function M0e(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(pg&&pg[e])return pg[e];var n=i_[e]?i_[e]():i_.cylinder(),r=T0e([n],t);return pg[e]=r,r}function R0e(e){var t=P0e();return function(){var r=ke(e),a;if(t){var i=ke(this).constructor;a=Reflect.construct(r,arguments,i)}else a=r.apply(this,arguments);return It(this,a)}}function P0e(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var I0e=`precision mediump float;
uniform float u_opacity: 1.0;
uniform sampler2D u_texture;
varying vec2 v_texCoord;
void main() {
  vec4 color = texture2D(u_texture,vec2(v_texCoord.x,v_texCoord.y));
  gl_FragColor = color;
  gl_FragColor.a *= u_opacity;
}
`,L0e=`precision highp float;
uniform mat4 u_ModelMatrix;
uniform mat4 u_Mvp;
attribute vec3 a_Position;
attribute vec2 a_Uv;
varying vec2 v_texCoord;
#pragma include "projection"
void main() {
   v_texCoord = a_Uv;
   vec4 project_pos = project_position(vec4(a_Position, 1.0));
   // gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy,0., 1.0));
   if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
      gl_Position = u_Mvp * (vec4(project_pos.xy,0., 1.0));
   } else {
      gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy,0., 1.0));
   }
}
`,N0e=function(e){Tt(n,e);var t=R0e(n);function n(){var r;Ae(this,n);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return r=t.call.apply(t,[this].concat(i)),m(D(r),"texture",void 0),r}return Oe(n,[{key:"getUninforms",value:function(){var a=this.layer.getLayerConfig(),i=a.opacity;return{u_opacity:i||1,u_texture:this.texture}}},{key:"initModels",value:function(){var a=this,i=this.layer.getLayerConfig(),o=i.mask,s=o===void 0?!1:o,l=i.maskInside,u=l===void 0?!0:l,c=this.layer.getSource(),f=this.rendererService.createTexture2D;if(this.texture=f({height:0,width:0}),Bi){var d=this.layerService.sceneService.getSceneConfig().canvas,p=d.createImage();p.crossOrigin="anonymous",p.src=c.data.originData,p.onload=function(){a.texture=f({data:p,width:p.width,height:p.height}),a.layerService.updateLayerRenderList(),a.layerService.renderLayers()}}else c.data.images.then(function(h){a.texture=f({data:h[0],width:h[0].width,height:h[0].height}),a.layerService.updateLayerRenderList(),a.layerService.renderLayers()});return[this.layer.buildLayerModel({moduleName:"RasterImage",vertexShader:L0e,fragmentShader:I0e,triangulation:pD,primitive:V.TRIANGLES,depth:{enable:!1},blend:this.getBlend(),stencil:Vi(s,u)})]}},{key:"buildModels",value:function(){return this.initModels()}},{key:"getConfigSchema",value:function(){return{properties:{opacity:{type:"number",minimum:0,maximum:1}}}}},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"uv",type:kn.Attribute,descriptor:{name:"a_Uv",buffer:{usage:V.DYNAMIC_DRAW,data:[],type:V.FLOAT},size:2,update:function(i,o,s,l){return[s[3],s[4]]}}})}}]),n}(Qa),F0e={image:N0e},D0e=F0e;function B0e(e){var t=z0e();return function(){var r=ke(e),a;if(t){var i=ke(this).constructor;a=Reflect.construct(r,arguments,i)}else a=r.apply(this,arguments);return It(this,a)}}function z0e(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var U0e=function(e){Tt(n,e);var t=B0e(n);function n(){var r;Ae(this,n);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return r=t.call.apply(t,[this].concat(i)),m(D(r),"type","ImageLayer"),r}return Oe(n,[{key:"buildModels",value:function(){var a=this.getModelType();this.layerModel=new D0e[a](this),this.models=this.layerModel.initModels()}},{key:"rebuildModels",value:function(){this.models=this.layerModel.buildModels()}},{key:"getConfigSchema",value:function(){return{properties:{opacity:{type:"number",minimum:0,maximum:1}}}}},{key:"getDefaultConfig",value:function(){var a=this.getModelType(),i={image:{}};return i[a]}},{key:"getModelType",value:function(){return"image"}}]),n}(Gm);function $0e(e){var t=V0e();return function(){var r=ke(e),a;if(t){var i=ke(this).constructor;a=Reflect.construct(r,arguments,i)}else a=r.apply(this,arguments);return It(this,a)}}function V0e(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var j0e=`uniform float u_opacity;
varying vec4 v_Color;

void main() {
  gl_FragColor = v_Color;
  gl_FragColor.a *= u_opacity;
}
`,G0e=`attribute vec4 a_Color;
attribute vec3 a_Position;
uniform mat4 u_ModelMatrix;
uniform mat4 u_Mvp;

varying vec4 v_Color;

#pragma include "projection"

void main() {

  v_Color = a_Color;
  vec4 project_pos = project_position(vec4(a_Position, 1.0));
  // gl_Position = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));

  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
    gl_Position = u_Mvp * (vec4(project_pos.xyz, 1.0));
  } else {
    gl_Position = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));
  }
}

`,H0e=function(e){Tt(n,e);var t=$0e(n);function n(){return Ae(this,n),t.apply(this,arguments)}return Oe(n,[{key:"getUninforms",value:function(){var a=this.layer.getLayerConfig(),i=a.opacity,o=i===void 0?0:i;return{u_opacity:er(o)?o:0}}},{key:"initModels",value:function(){return this.buildModels()}},{key:"buildModels",value:function(){return[this.layer.buildLayerModel({moduleName:"mask",vertexShader:G0e,fragmentShader:j0e,triangulation:dD,blend:this.getBlend(),depth:{enable:!1},stencil:{enable:!0,mask:255,func:{cmp:V.ALWAYS,ref:1,mask:255},opFront:{fail:V.REPLACE,zfail:V.REPLACE,zpass:V.REPLACE}}})]}},{key:"clearModels",value:function(){var a;(a=this.dataTexture)===null||a===void 0||a.destroy(),this.layerService.clear()}},{key:"registerBuiltinAttributes",value:function(){return""}}]),n}(Qa),W0e={fill:H0e},Y0e=W0e;function X0e(e){var t=Z0e();return function(){var r=ke(e),a;if(t){var i=ke(this).constructor;a=Reflect.construct(r,arguments,i)}else a=r.apply(this,arguments);return It(this,a)}}function Z0e(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var hD=function(e){Tt(n,e);var t=X0e(n);function n(){var r;Ae(this,n);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return r=t.call.apply(t,[this].concat(i)),m(D(r),"type","MaskLayer"),r}return Oe(n,[{key:"buildModels",value:function(){var a=this.getModelType();this.layerModel=new Y0e[a](this),this.models=this.layerModel.initModels()}},{key:"rebuildModels",value:function(){this.models=this.layerModel.buildModels()}},{key:"getConfigSchema",value:function(){return{properties:{opacity:{type:"number",minimum:0,maximum:1}}}}},{key:"getModelType",value:function(){return"fill"}}]),n}(Gm);function mD(e,t){t.map(function(n){var r=ck(e.sceneContainer);n.setContainer(r,e.sceneContainer),n.init()})}function gD(e,t){var n,r=t.getAttribute("shape");if(r&&(n=r.scale)!==null&&n!==void 0&&n.field){var a;return((a=r.scale)===null||a===void 0?void 0:a.values)==="text"?[r.scale.field,r.scale.values]:r.scale.field}switch(e){case"PolygonLayer":return"fill";case"LineLayer":return"tileline";case"PointLayer":return"circle";case"RasterLayer":return"image";default:return""}}function q0e(e,t){switch(e){case"PolygonLayer":return!0;case"LineLayer":return!0;case"PointLayer":return!1;case"RasterLayer":return t;default:return t}}function K0e(e,t,n,r){var a,i,o,s,l=(e==null||(a=e.bboxPolygon)===null||a===void 0?void 0:a.bbox)||[0,0,10,-10],u=Le(l,4),c=u[0],f=c===void 0?0:c,d=u[1],p=d===void 0?0:d,h=u[2],g=h===void 0?10:h,v=u[3],b=v===void 0?-10:v,y=t.lngLatToContainer([f,p]),x=t.lngLatToContainer([g,b]),k=x.x-y.x,T=y.y-x.y,C=[(n-y.x)/k,(r-x.y)/T],I=(e==null||(i=e.data)===null||i===void 0?void 0:i.width)||1,P=(e==null||(o=e.data)===null||o===void 0?void 0:o.height)||1,j=Math.floor(C[0]*I),A=Math.floor(C[1]*P),S=Math.max(0,A-1)*I+j,M=e==null||(s=e.data)===null||s===void 0?void 0:s.data[S];return M}function Q0e(e){var t=J0e();return function(){var r=ke(e),a;if(t){var i=ke(this).constructor;a=Reflect.construct(r,arguments,i)}else a=r.apply(this,arguments);return It(this,a)}}function J0e(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var ege=`#define LineTexture 1.0
uniform float u_blur : 0.99;
uniform float u_opacity : 1.0;
uniform float u_textureBlend;

uniform float u_borderWidth: 0.0;
uniform vec4 u_borderColor;
varying vec4 v_color;

// line texture
uniform float u_line_texture;
uniform sampler2D u_texture;
uniform vec2 u_textSize;

varying vec2 v_iconMapUV;

#pragma include "picking"

varying mat4 styleMappingMat;

void main() {
  float opacity = styleMappingMat[0][0];
  float d_distance_ratio = styleMappingMat[3].r; // \u5F53\u524D\u70B9\u4F4D\u8DDD\u79BB\u5360\u7EBF\u603B\u957F\u7684\u6BD4\u4F8B
  gl_FragColor = v_color;
  // anti-alias
  // float blur = 1.0 - smoothstep(u_blur, 1., length(v_normal.xy));
  gl_FragColor.a *= opacity; // \u5168\u5C40\u900F\u660E\u5EA6


  if(u_line_texture == LineTexture) { // while load texture
    float aDistance = styleMappingMat[3].g;      // \u5F53\u524D\u9876\u70B9\u7684\u8DDD\u79BB
    float d_texPixelLen = styleMappingMat[3].b;  // \u8D34\u56FE\u7684\u50CF\u7D20\u957F\u5EA6\uFF0C\u6839\u636E\u5730\u56FE\u5C42\u7EA7\u7F29\u653E
    float u = fract(mod(aDistance, d_texPixelLen)/d_texPixelLen);
    float v = styleMappingMat[3].a;  // \u7EBF\u56FE\u5C42\u8D34\u56FE\u90E8\u5206\u7684 v \u5750\u6807\u503C

    // v = max(smoothstep(0.95, 1.0, v), v);
    vec2 uv= v_iconMapUV / u_textSize + vec2(u, v) / u_textSize * 64.;
    
    // gl_FragColor = filterColor(gl_FragColor + texture2D(u_texture, vec2(u, v)));
    // gl_FragColor = filterColor(gl_FragColor + texture2D(u_texture, uv));
     vec4 pattern = texture2D(u_texture, uv);

    if(u_textureBlend == 0.0) { // normal
      pattern.a = 0.0;
      gl_FragColor += pattern;
    } else { // replace
        pattern.a *= opacity;
        if(gl_FragColor.a <= 0.0) {
          pattern.a = 0.0;
        }
        gl_FragColor = pattern;
    }
  } 

  float v = styleMappingMat[3].a;
  float borderWidth = min(0.5, u_borderWidth);
  // \u7ED8\u5236 border
  if(borderWidth > 0.01) {
    float borderOuterWidth = borderWidth/2.0;

    if(v >= 1.0 - borderWidth || v <= borderWidth) {
      if(v > borderWidth) {
        float linear = smoothstep(0.0, 1.0, (v - (1.0 - borderWidth))/borderWidth);
        gl_FragColor.rgb = mix(gl_FragColor.rgb, u_borderColor.rgb, linear);
      } else if(v <= borderWidth) {
        float linear = smoothstep(0.0, 1.0, v/borderWidth);
        gl_FragColor.rgb = mix(u_borderColor.rgb, gl_FragColor.rgb, linear);
      }
    }

    if(v < borderOuterWidth) {
      gl_FragColor.a = mix(0.0, gl_FragColor.a, v/borderOuterWidth);
    } else if(v > 1.0 - borderOuterWidth) {
      gl_FragColor.a = mix(gl_FragColor.a, 0.0, (v - (1.0 - borderOuterWidth))/borderOuterWidth);
    }
  }

  gl_FragColor = filterColor(gl_FragColor);
}
`,tge=`
attribute float a_Miter;
attribute vec4 a_Color;
attribute vec2 a_Size;
attribute vec3 a_Normal;
attribute vec3 a_Position;

attribute vec2 a_iconMapUV;

// dash line
attribute float a_Total_Distance;
attribute vec2 a_DistanceAndIndex;

uniform vec2 u_tileOrigin;
uniform float u_coord;

uniform mat4 u_ModelMatrix;
uniform mat4 u_Mvp;
uniform float u_icon_step: 100;

uniform float u_heightfixed: 0.0;
uniform float u_vertexScale: 1.0;

#pragma include "projection"
#pragma include "picking"

varying vec4 v_color;

// texV \u7EBF\u56FE\u5C42 - \u8D34\u56FE\u90E8\u5206\u7684 v \u5750\u6807\uFF08\u7EBF\u7684\u5BBD\u5EA6\u65B9\u5411\uFF09
varying vec2 v_iconMapUV;


uniform float u_linearColor: 0;
uniform float u_arrow: 0.0;
uniform float u_arrowHeight: 3.0;
uniform float u_arrowWidth: 2.0;
uniform float u_tailWidth: 1.0;

uniform float u_opacity: 1.0;
varying mat4 styleMappingMat; // \u7528\u4E8E\u5C06\u5728\u9876\u70B9\u7740\u8272\u5668\u4E2D\u8BA1\u7B97\u597D\u7684\u6837\u5F0F\u503C\u4F20\u9012\u7ED9\u7247\u5143

#pragma include "styleMapping"
#pragma include "styleMappingCalOpacity"

vec2 calculateArrow(vec2 offset) {
  /*
  * \u5728\u652F\u6301\u7BAD\u5934\u7684\u65F6\u5019\uFF0C\u7B2C\u4E8C\u3001\u7B2C\u4E09\u7EC4\u9876\u70B9\u662F\u989D\u5916\u63D2\u5165\u7528\u4E8E\u6784\u5EFA\u9876\u70B9\u7684
  */
  float arrowFlag = -1.0;
  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) {
    // \u9AD8\u5FB7 2.0 \u7684\u65CB\u8F6C\u89D2\u5EA6\u4E0D\u540C
    arrowFlag = 1.0;
  }
  float pi = arrowFlag * 3.1415926/2.;
  if(a_Miter < 0.) {
    // \u6839\u636E\u7EBF\u7684\u4E24\u4FA7\u504F\u79FB\u4E0D\u540C\u3001\u65CB\u8F6C\u7684\u65B9\u5411\u76F8\u53CD
    pi = -pi;
  }
  highp float angle_sin = sin(pi);
  highp float angle_cos = cos(pi);
  // \u8BA1\u7B97\u5782\u76F4\u4E0E\u7EBF\u65B9\u5411\u7684\u65CB\u8F6C\u77E9\u9635
  mat2 rotation_matrix = mat2(angle_cos, -1.0 * angle_sin, angle_sin, angle_cos);
  float arrowWidth = u_arrowWidth;
  float arrowHeight = u_arrowHeight;

  vec2 arrowOffset = vec2(0.0);
  /*
  * a_DistanceAndIndex.y \u7528\u4E8E\u6807\u8BB0\u5F53\u524D\u9876\u70B9\u5C5E\u4E8E\u54EA\u4E00\u7EC4\uFF08\u4E24\u4E2A\u9876\u70B9\u4E00\u7EC4\uFF0C\u6784\u6210\u7EBF\u7684\u5176\u5B9E\u662F\u77E9\u5F62\uFF0C\u6700\u7B80\u9700\u8981\u56DB\u4E2A\u9876\u70B9\u3001\u4E24\u7EC4\u9876\u70B9\u6784\u6210\uFF09
  */
  if(a_DistanceAndIndex.y == 0.0) {
    // \u7BAD\u5934\u5C16\u90E8
    offset = vec2(0.0);
  } else if(a_DistanceAndIndex.y == 1.0) {
    // \u7BAD\u5934\u4E24\u4FA7
    arrowOffset = rotation_matrix*(offset * arrowHeight);
    offset += arrowOffset; // \u6CBF\u7EBF\u504F\u79FB
    offset = offset * arrowWidth; // \u5782\u76F4\u7EBF\u5411\u5916\u504F\u79FB\uFF08\u662F\u6784\u5EFA\u7BAD\u5934\u4E24\u4FA7\u7684\u9876\u70B9\uFF09
  } else if(a_DistanceAndIndex.y == 2.0 || a_DistanceAndIndex.y == 3.0 || a_DistanceAndIndex.y == 4.0) {
    // \u504F\u79FB\u5176\u4F59\u7684\u70B9\u4F4D\uFF08\u5C06\u957F\u5EA6\u8BA9\u4F4D\u7ED9\u7BAD\u5934\uFF09
    arrowOffset = rotation_matrix*(offset * arrowHeight) * arrowWidth;
    offset += arrowOffset;// \u6CBF\u7EBF\u504F\u79FB
  }

  return offset;
}

void main() {
  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97
  styleMappingMat = mat4(
    0.0, 0.0, 0.0, 0.0, // opacity - strokeOpacity - strokeWidth - empty
    0.0, 0.0, 0.0, 0.0, // strokeR - strokeG - strokeB - strokeA
    0.0, 0.0, 0.0, 0.0, // offsets[0] - offsets[1]
    0.0, 0.0, 0.0, 0.0  // distance_ratio/distance/pixelLen/texV
  );

  float rowCount = u_cellTypeLayout[0][0];    // \u5F53\u524D\u7684\u6570\u636E\u7EB9\u7406\u6709\u51E0\u884C
  float columnCount = u_cellTypeLayout[0][1]; // \u5F53\u770B\u5230\u6570\u636E\u7EB9\u7406\u6709\u51E0\u5217
  float columnWidth = 1.0/columnCount;  // \u5217\u5BBD
  float rowHeight = 1.0/rowCount;       // \u884C\u9AD8
  float cellCount = calCellCount(); // opacity - strokeOpacity - strokeWidth - stroke - offsets
  float id = a_vertexId; // \u7B2Cn\u4E2A\u9876\u70B9
  float cellCurrentRow = floor(id * cellCount / columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u884C
  float cellCurrentColumn = mod(id * cellCount, columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u5217
  
  // cell \u56FA\u5B9A\u987A\u5E8F opacity -> strokeOpacity -> strokeWidth -> stroke ... 
  // \u6309\u987A\u5E8F\u4ECE cell \u4E2D\u53D6\u503C\u3001\u82E5\u6CA1\u6709\u5219\u81EA\u52A8\u5F80\u4E0B\u53D6\u503C
  float textureOffset = 0.0; // \u5728 cell \u4E2D\u53D6\u503C\u7684\u504F\u79FB\u91CF

  vec2 opacityAndOffset = calOpacityAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);
  styleMappingMat[0][0] = opacityAndOffset.r;
  textureOffset = opacityAndOffset.g;
  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97

  float d_texPixelLen;    // \u8D34\u56FE\u7684\u50CF\u7D20\u957F\u5EA6\uFF0C\u6839\u636E\u5730\u56FE\u5C42\u7EA7\u7F29\u653E

  v_iconMapUV = a_iconMapUV;
  d_texPixelLen = project_float_pixel(u_icon_step);
  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) {
    d_texPixelLen *= 10.0;
  }

  v_color = a_Color;

  vec3 size = a_Miter * setPickingSize(a_Size.x) * reverse_offset_normal(a_Normal);
  
  vec2 offset = project_pixel(size.xy);

  float lineDistance = a_DistanceAndIndex.x;
  float currentLinePointRatio = lineDistance / a_Total_Distance;
 
  if(u_arrow > 0.0) {
      //  \u8BA1\u7B97\u7BAD\u5934
    offset = calculateArrow(offset);

    if(a_DistanceAndIndex.y > 4.0) {
      offset *= mix(1.0, u_tailWidth, currentLinePointRatio);
    }
  }

  float lineOffsetWidth = length(offset + offset * sign(a_Miter)); // \u7EBF\u6A2A\u5411\u504F\u79FB\u7684\u8DDD\u79BB\uFF08\u5411\u4E24\u4FA7\u504F\u79FB\u7684\u548C\uFF09
  float linePixelSize = project_pixel(a_Size.x) * 2.0;  // \u5B9A\u70B9\u4F4D\u7F6E\u504F\u79FB\uFF0C\u6309\u5730\u56FE\u7B49\u7EA7\u7F29\u653E\u540E\u7684\u8DDD\u79BB \u5355\u4FA7 * 2
  float texV = lineOffsetWidth/linePixelSize; // \u7EBF\u56FE\u5C42\u8D34\u56FE\u90E8\u5206\u7684 v \u5750\u6807\u503C

  // \u8BBE\u7F6E\u6570\u636E\u96C6\u7684\u53C2\u6570
  styleMappingMat[3][0] = currentLinePointRatio; // \u5F53\u524D\u70B9\u4F4D\u8DDD\u79BB\u5360\u7EBF\u603B\u957F\u7684\u6BD4\u4F8B
  styleMappingMat[3][1] = lineDistance;       // \u5F53\u524D\u9876\u70B9\u7684\u8DDD\u79BB
  styleMappingMat[3][2] = d_texPixelLen;    // \u8D34\u56FE\u7684\u50CF\u7D20\u957F\u5EA6\uFF0C\u6839\u636E\u5730\u56FE\u5C42\u7EA7\u7F29\u653E
  styleMappingMat[3][3] = texV;             // \u7EBF\u56FE\u5C42\u8D34\u56FE\u90E8\u5206\u7684 v \u5750\u6807\u503C

  vec4 project_pos = project_position(vec4(a_Position.xy, 0, 1.0));

  // gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offset, a_Size.y, 1.0));

  float h = float(a_Position.z) * u_vertexScale; // \u7EBF\u9876\u70B9\u7684\u9AD8\u5EA6 - \u517C\u5BB9\u4E0D\u5B58\u5728\u7B2C\u4E09\u4E2A\u6570\u503C\u7684\u60C5\u51B5 vertex height
  float lineHeight = a_Size.y; // size \u7B2C\u4E8C\u4E2A\u53C2\u6570\u4EE3\u8868\u7684\u9AD8\u5EA6 [linewidth, lineheight]

if(u_coord > 0.0) {
    if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
    lineHeight *= 0.2; // \u4FDD\u6301\u548C amap/mapbox \u4E00\u81F4\u7684\u6548\u679C
    h *= 0.2;
    if(u_heightfixed < 1.0) {
      lineHeight = project_pixel(a_Size.y);
    }
    gl_Position = u_Mvp * (vec4(project_pos.xy + offset, lineHeight + h, 1.0));
  } else {
    // mapbox -  amap
    
    // \u517C\u5BB9 mapbox \u5728\u7EBF\u9AD8\u5EA6\u4E0A\u7684\u6548\u679C\u8868\u73B0\u57FA\u672C\u4E00\u81F4
    if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
      // mapbox
      // \u4FDD\u6301\u9AD8\u5EA6\u76F8\u5BF9\u4E0D\u53D8
      float mapboxZoomScale = 4.0/pow(2.0, 21.0 - u_Zoom);
      h *= mapboxZoomScale;
      if(u_heightfixed > 0.0) {
        lineHeight *= mapboxZoomScale;
      }
      
    } else {
      // amap
      // lineHeight \u9876\u70B9\u504F\u79FB\u9AD8\u5EA6
      if(u_heightfixed < 1.0) {
        lineHeight *= pow(2.0, 20.0 - u_Zoom);
      }
    }

    gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offset, lineHeight + h, 1.0));
  }
} else {
  vec2 pointPos = a_Position.xy;
  vec4 tileWorld = vec4(project_mvt_offset_position(vec4(u_tileOrigin, 0.0, 1.0)).xyz, 1.0); // \u74E6\u7247\u8D77\u59CB\u70B9\u7684\u4E16\u754C\u5750\u6807

  vec2 pointOffset =  pointPos *  pow(2.0, u_Zoom); // \u74E6\u7247\u5185\u7684\u70B9\u7684\u504F\u79FB\u5750\u6807
  
  tileWorld.xy += pointOffset;

  tileWorld.xy += offset;

  if (u_CoordinateSystem == COORDINATE_SYSTEM_METER_OFFSET || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
    // Needs to be divided with project_uCommonUnitsPerMeter
    tileWorld.w *= u_PixelsPerMeter.z;
  }

  gl_Position = u_ViewProjectionMatrix * tileWorld + u_ViewportCenterProjection;
}


  setPickingColor(a_PickingColor);


}
`,nge=function(e){Tt(n,e);var t=Q0e(n);function n(){var r;Ae(this,n);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return r=t.call.apply(t,[this].concat(i)),m(D(r),"texture",void 0),m(D(r),"updateTexture",function(){var s=r.rendererService.createTexture2D;if(r.texture){r.texture.update({data:r.iconService.getCanvas()}),r.layer.render();return}r.texture=s({data:r.iconService.getCanvas(),mag:V.NEAREST,min:V.NEAREST,premultiplyAlpha:!1,width:1024,height:r.iconService.canvasHeight||128})}),r}return Oe(n,[{key:"getUninforms",value:function(){var a=this.layer.getLayerConfig(),i=a.opacity,o=i===void 0?1:i,s=a.textureBlend,l=s===void 0?"normal":s,u=a.lineTexture,c=u===void 0?!1:u,f=a.iconStep,d=f===void 0?100:f,p=a.vertexHeightScale,h=p===void 0?20:p,g=a.borderWidth,v=g===void 0?0:g,b=a.borderColor,y=b===void 0?"#ccc":b,x=a.heightfixed,k=x===void 0?!1:x,T=a.arrow,C=T===void 0?{enable:!1,arrowWidth:2,arrowHeight:3,tailWidth:1}:T,I=a.coord,P=I===void 0?"lnglat":I,j=a.tileOrigin;if(this.rendererService.getDirty()&&this.texture.bind(),this.dataTextureTest&&this.dataTextureNeedUpdate({opacity:o})){this.judgeStyleAttributes({opacity:o});var A=this.layer.getEncodedData(),S=this.calDataFrame(this.cellLength,A,this.cellProperties),M=S.data,O=S.width,R=S.height;this.rowCount=R,this.dataTexture=this.cellLength>0&&M.length>0?this.createTexture2D({flipY:!0,data:M,format:V.LUMINANCE,type:V.FLOAT,width:O,height:R}):this.createTexture2D({flipY:!0,data:[1],format:V.LUMINANCE,type:V.FLOAT,width:1,height:1})}return{u_tileOrigin:j||[0,0],u_coord:P==="lnglat"?1:0,u_dataTexture:this.dataTexture,u_cellTypeLayout:this.getCellTypeLayout(),u_opacity:Number(o),u_textureBlend:l==="normal"?0:1,u_texture:this.texture,u_line_texture:c?1:0,u_icon_step:d,u_textSize:[1024,this.iconService.canvasHeight||128],u_borderWidth:v,u_borderColor:Ts(y),u_heightfixed:Number(k),u_vertexScale:h,u_arrow:Number(C.enable),u_arrowHeight:C.arrowHeight||3,u_arrowWidth:C.arrowWidth||2,u_tailWidth:C.tailWidth===void 0?1:C.tailWidth}}},{key:"initModels",value:function(){return this.updateTexture(),this.iconService.on("imageUpdate",this.updateTexture),this.buildModels()}},{key:"clearModels",value:function(){var a,i;(a=this.texture)===null||a===void 0||a.destroy(),(i=this.dataTexture)===null||i===void 0||i.destroy(),this.iconService.off("imageUpdate",this.updateTexture)}},{key:"buildModels",value:function(){var a=this.layer.getLayerConfig(),i=a.mask,o=i===void 0?!1:i,s=a.maskInside,l=s===void 0?!0:s,u=a.depth,c=u===void 0?!1:u,f=this.getShaders(),d=f.frag,p=f.vert,h=f.type;return this.layer.triangulation=hR,[this.layer.buildLayerModel({moduleName:h,vertexShader:p,fragmentShader:d,triangulation:hR,primitive:V.TRIANGLES,blend:this.getBlend(),depth:{enable:c},stencil:Vi(o,l)})]}},{key:"getShaders",value:function(){return{frag:ege,vert:tge,type:"line_tile"}}},{key:"registerBuiltinAttributes",value:function(){var a=this;this.styleAttributeService.registerStyleAttribute({name:"distanceAndIndex",type:kn.Attribute,descriptor:{name:"a_DistanceAndIndex",buffer:{usage:V.STATIC_DRAW,data:[],type:V.FLOAT},size:2,update:function(o,s,l,u,c,f){return f===void 0?[l[3],10]:[l[3],f]}}}),this.styleAttributeService.registerStyleAttribute({name:"total_distance",type:kn.Attribute,descriptor:{name:"a_Total_Distance",buffer:{usage:V.STATIC_DRAW,data:[],type:V.FLOAT},size:1,update:function(o,s,l,u){return[l[5]]}}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:kn.Attribute,descriptor:{name:"a_Size",buffer:{usage:V.DYNAMIC_DRAW,data:[],type:V.FLOAT},size:2,update:function(o,s,l,u){var c=o.size,f=c===void 0?1:c;return Array.isArray(f)?[f[0],f[1]]:[f,0]}}}),this.styleAttributeService.registerStyleAttribute({name:"normal",type:kn.Attribute,descriptor:{name:"a_Normal",buffer:{usage:V.STATIC_DRAW,data:[],type:V.FLOAT},size:3,update:function(o,s,l,u,c){return c}}}),this.styleAttributeService.registerStyleAttribute({name:"miter",type:kn.Attribute,descriptor:{name:"a_Miter",buffer:{usage:V.STATIC_DRAW,data:[],type:V.FLOAT},size:1,update:function(o,s,l,u){return[l[4]]}}}),this.styleAttributeService.registerStyleAttribute({name:"uv",type:kn.Attribute,descriptor:{name:"a_iconMapUV",buffer:{usage:V.DYNAMIC_DRAW,data:[],type:V.FLOAT},size:2,update:function(o,s,l,u){var c=a.iconService.getIconMap(),f=o.texture,d=c[f]||{x:0,y:0},p=d.x,h=d.y;return[p,h]}}})}}]),n}(Qa);function rge(e,t){var n=typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=age(e))||t&&e&&typeof e.length=="number"){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(u){throw u},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i=!0,o=!1,s;return{s:function(){n=n.call(e)},n:function(){var u=n.next();return i=u.done,u},e:function(u){o=!0,s=u},f:function(){try{!i&&n.return!=null&&n.return()}finally{if(o)throw s}}}}function age(e,t){if(!!e){if(typeof e=="string")return mR(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return mR(e,t)}}function mR(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ige=function(){function e(t,n,r){Ae(this,e),m(this,"boxCells",[]),m(this,"xCellCount",void 0),m(this,"yCellCount",void 0),m(this,"boxKeys",void 0),m(this,"bboxes",void 0),m(this,"width",void 0),m(this,"height",void 0),m(this,"xScale",void 0),m(this,"yScale",void 0),m(this,"boxUid",void 0);var a=this.boxCells;this.xCellCount=Math.ceil(t/r),this.yCellCount=Math.ceil(n/r);for(var i=0;i<this.xCellCount*this.yCellCount;i++)a.push([]);this.boxKeys=[],this.bboxes=[],this.width=t,this.height=n,this.xScale=this.xCellCount/t,this.yScale=this.yCellCount/n,this.boxUid=0}return Oe(e,[{key:"insert",value:function(n,r,a,i,o){this.forEachCell(r,a,i,o,this.insertBoxCell,this.boxUid++),this.boxKeys.push(n),this.bboxes.push(r),this.bboxes.push(a),this.bboxes.push(i),this.bboxes.push(o)}},{key:"query",value:function(n,r,a,i,o){return this.queryHitTest(n,r,a,i,!1,o)}},{key:"hitTest",value:function(n,r,a,i,o){return this.queryHitTest(n,r,a,i,!0,o)}},{key:"insertBoxCell",value:function(n,r,a,i,o,s){this.boxCells[o].push(s)}},{key:"queryHitTest",value:function(n,r,a,i,o,s){if(a<0||n>this.width||i<0||r>this.height)return o?!1:[];var l=[];if(n<=0&&r<=0&&this.width<=a&&this.height<=i){if(o)return!0;for(var u=0;u<this.boxKeys.length;u++)l.push({key:this.boxKeys[u],x1:this.bboxes[u*4],y1:this.bboxes[u*4+1],x2:this.bboxes[u*4+2],y2:this.bboxes[u*4+3]});return s?l.filter(s):l}var c={hitTest:o,seenUids:{box:{},circle:{}}};return this.forEachCell(n,r,a,i,this.queryCell,l,c,s),o?l.length>0:l}},{key:"queryCell",value:function(n,r,a,i,o,s,l,u){var c=l.seenUids,f=this.boxCells[o];if(f!==null){var d=this.bboxes,p=rge(f),h;try{for(p.s();!(h=p.n()).done;){var g=h.value;if(!c.box[g]){c.box[g]=!0;var v=g*4;if(n<=d[v+2]&&r<=d[v+3]&&a>=d[v+0]&&i>=d[v+1]&&(!u||u(this.boxKeys[g]))){if(l.hitTest)return s.push(!0),!0;s.push({key:this.boxKeys[g],x1:d[v],y1:d[v+1],x2:d[v+2],y2:d[v+3]})}}}}catch(b){p.e(b)}finally{p.f()}}return!1}},{key:"forEachCell",value:function(n,r,a,i,o,s,l,u){for(var c=this.convertToXCellCoord(n),f=this.convertToYCellCoord(r),d=this.convertToXCellCoord(a),p=this.convertToYCellCoord(i),h=c;h<=d;h++)for(var g=f;g<=p;g++){var v=this.xCellCount*g+h;if(o.call(this,n,r,a,i,v,s,l,u))return}}},{key:"convertToXCellCoord",value:function(n){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(n*this.xScale)))}},{key:"convertToYCellCoord",value:function(n){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(n*this.yScale)))}}]),e}(),oge=ige,sge=function(){function e(t,n){Ae(this,e),m(this,"width",void 0),m(this,"height",void 0),m(this,"grid",void 0),m(this,"viewportPadding",100),m(this,"screenRightBoundary",void 0),m(this,"screenBottomBoundary",void 0),m(this,"gridRightBoundary",void 0),m(this,"gridBottomBoundary",void 0),this.width=t,this.height=n,this.viewportPadding=Math.max(t,n),this.grid=new oge(t+this.viewportPadding,n+this.viewportPadding,25),this.screenRightBoundary=t+this.viewportPadding,this.screenBottomBoundary=n+this.viewportPadding,this.gridRightBoundary=t+2*this.viewportPadding,this.gridBottomBoundary=n+2*this.viewportPadding}return Oe(e,[{key:"placeCollisionBox",value:function(n){var r=n.x1+n.anchorPointX+this.viewportPadding,a=n.y1+n.anchorPointY+this.viewportPadding,i=n.x2+n.anchorPointX+this.viewportPadding,o=n.y2+n.anchorPointY+this.viewportPadding;return!this.isInsideGrid(r,a,i,o)||this.grid.hitTest(r,a,i,o)?{box:[]}:{box:[r,a,i,o]}}},{key:"insertCollisionBox",value:function(n,r){var a={featureIndex:r};this.grid.insert(a,n[0],n[1],n[2],n[3])}},{key:"project",value:function(n,r,a){var i=Fle(r,a,0,1),o=CF(),s=aF.apply(nle,$e(n));return TF(o,i,s),{x:(o[0]/o[3]+1)/2*this.width+this.viewportPadding,y:(-o[1]/o[3]+1)/2*this.height+this.viewportPadding}}},{key:"isInsideGrid",value:function(n,r,a,i){return a>=0&&n<this.gridRightBoundary&&i>=0&&r<this.gridBottomBoundary}}]),e}();function vD(e,t){var n=typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=lge(e))||t&&e&&typeof e.length=="number"){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(u){throw u},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i=!0,o=!1,s;return{s:function(){n=n.call(e)},n:function(){var u=n.next();return i=u.done,u},e:function(u){o=!0,s=u},f:function(){try{!i&&n.return!=null&&n.return()}finally{if(o)throw s}}}}function lge(e,t){if(!!e){if(typeof e=="string")return gR(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return gR(e,t)}}function gR(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function bD(e){var t=.5,n=.5;switch(e){case"right":case"top-right":case"bottom-right":t=1;break;case"left":case"top-left":case"bottom-left":t=0;break;default:t=.5}switch(e){case"bottom":case"bottom-right":case"bottom-left":n=1;break;case"top":case"top-right":case"top-left":n=0;break;default:n=.5}return{horizontalAlign:t,verticalAlign:n}}function yD(e,t,n,r,a){if(!!a){var i=e[r],o=i.glyph;if(o)for(var s=t[o].advance*i.scale,l=(e[r].x+s)*a,u=n;u<=r;u++)e[u].x-=l}}function xD(e,t,n,r,a,i,o){var s=(t-n)*a,l=(-r*o+.5)*i,u=vD(e),c;try{for(u.s();!(c=u.n()).done;){var f=c.value;f.x+=s,f.y+=l}}catch(d){u.e(d)}finally{u.f()}}function uge(e,t,n,r,a,i,o){var s=-8,l=0,u=s,c=0,f=e.positionedGlyphs,d=i==="right"?1:i==="left"?0:.5,p=f.length;n.forEach(function(y){if(y.split("").forEach(function(k){var T=t[k],C=0;T&&(f.push({glyph:k,x:l,y:u+C,vertical:!1,scale:1,metrics:T}),l+=T.advance+o)}),f.length!==p){var x=l-o;c=Math.max(x,c),yD(f,t,p,f.length-1,d)}l=0,u-=r+5});var h=bD(a),g=h.horizontalAlign,v=h.verticalAlign;xD(f,d,g,v,c,r,n.length);var b=u-s;e.top+=-v*b,e.bottom=e.top-b,e.left+=-g*c,e.right=e.left+c}function cge(e,t,n,r,a,i,o){var s=-8,l=0,u=s,c=0,f=e.positionedGlyphs,d=i==="right"?1:i==="left"?0:.5,p=f.length;n.forEach(function(y){var x=t[y],k=0;if(x&&(f.push({glyph:y,x:x.advance/2,y:u+k,vertical:!1,scale:1,metrics:x}),l+=x.advance+o),f.length!==p){var T=l-o;c=Math.max(T,c),yD(f,t,p,f.length-1,d)}l=0,u-=r+5});var h=bD(a),g=h.horizontalAlign,v=h.verticalAlign;xD(f,d,g,v,c,r,n.length);var b=u-s;e.top+=-v*b,e.bottom=e.top-b,e.left+=-g*c,e.right=e.left+c}function fge(e,t,n,r,a,i){var o=arguments.length>6&&arguments[6]!==void 0?arguments[6]:[0,0],s=arguments.length>7?arguments[7]:void 0,l=e.split(`
`),u=[],c={positionedGlyphs:u,top:o[1],bottom:o[1],left:o[0],right:o[0],lineCount:l.length,text:e};return s?cge(c,t,l,n,r,a,i):uge(c,t,l,n,r,a,i),u.length?c:!1}function dge(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[0,0],n=arguments.length>2?arguments[2]:void 0,r=e.positionedGlyphs,a=r===void 0?[]:r,i=[],o=vD(a),s;try{for(o.s();!(s=o.n()).done;){var l=s.value,u=l.metrics,c=4,f=u.advance*l.scale/2,d=n?[l.x+f,l.y]:[0,0],p=n?[0,0]:[l.x+f+t[0],l.y+t[1]],h=(0-c)*l.scale-f+p[0],g=(0-c)*l.scale+p[1],v=h+u.width*l.scale,b=g+u.height*l.scale,y={x:h,y:g},x={x:v,y:g},k={x:h,y:b},T={x:v,y:b};i.push({tl:y,tr:x,bl:k,br:T,tex:u,glyphOffset:d})}}catch(C){o.e(C)}finally{o.f()}return i}function pge(e,t){var n=typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=hge(e))||t&&e&&typeof e.length=="number"){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(u){throw u},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i=!0,o=!1,s;return{s:function(){n=n.call(e)},n:function(){var u=n.next();return i=u.done,u},e:function(u){o=!0,s=u},f:function(){try{!i&&n.return!=null&&n.return()}finally{if(o)throw s}}}}function hge(e,t){if(!!e){if(typeof e=="string")return vR(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return vR(e,t)}}function vR(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function mge(e){var t=gge();return function(){var r=ke(e),a;if(t){var i=ke(this).constructor;a=Reflect.construct(r,arguments,i)}else a=r.apply(this,arguments);return It(this,a)}}function gge(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var bR=`#define SDF_PX 8.0
#define EDGE_GAMMA 0.105
#define FONT_SIZE 48.0
uniform sampler2D u_sdf_map;
uniform float u_gamma_scale : 0.5;
// uniform float u_font_size : 24.0;
uniform float u_opacity : 1.0;
uniform vec4 u_stroke_color : [0, 0, 0, 1];
uniform float u_stroke_width : 2.0;
uniform float u_halo_blur : 0.5;
uniform float u_DevicePixelRatio;

varying vec4 v_color;
varying vec2 v_uv;
varying float v_gamma_scale;
varying float v_fontScale;

varying mat4 styleMappingMat; // \u4F20\u9012\u4ECE\u7247\u5143\u4E2D\u4F20\u9012\u7684\u6620\u5C04\u6570\u636E

#pragma include "picking"
void main() {
  // get style data mapping
  float opacity = styleMappingMat[0][0];
  float strokeWidth = styleMappingMat[0][2];
  vec4 textrueStroke = vec4(
    styleMappingMat[1][0],
    styleMappingMat[1][1],
    styleMappingMat[1][2],
    styleMappingMat[1][3]
  );

  // get sdf from atlas
  float dist = texture2D(u_sdf_map, v_uv).a;

  // float fontScale = u_font_size / FONT_SIZE;

  // lowp float buff = (6.0 - u_stroke_width / v_fontScale) / SDF_PX;
  lowp float buff = (6.0 - strokeWidth / v_fontScale) / SDF_PX;
  highp float gamma = (u_halo_blur * 1.19 / SDF_PX + EDGE_GAMMA) / (v_fontScale * u_gamma_scale) / 1.0;

  highp float gamma_scaled = gamma * v_gamma_scale;

  highp float alpha = smoothstep(buff - gamma_scaled, buff + gamma_scaled, dist);
  // gl_FragColor = mix(vec4(v_color.rgb, v_color.a * u_opacity), vec4(u_stroke_color.rgb, u_stroke_color.a * u_opacity), smoothstep(0., 0.5, 1. - dist));
  gl_FragColor = mix(vec4(v_color.rgb, v_color.a * opacity), vec4(textrueStroke.rgb, textrueStroke.a * opacity), smoothstep(0., 0.5, 1. - dist));
  gl_FragColor.a= gl_FragColor.a * alpha;
  gl_FragColor = filterColor(gl_FragColor);
}
`,yR=`#define SDF_PX 8.0
#define EDGE_GAMMA 0.105
#define FONT_SIZE 24.0
attribute vec3 a_Position;
attribute vec2 a_tex;
attribute vec2 a_textOffsets;
attribute vec4 a_Color;
attribute float a_Size;
attribute float a_Rotate;

uniform vec2 u_sdf_map_size;
uniform mat4 u_ModelMatrix;
uniform mat4 u_Mvp;
uniform float u_raisingHeight: 0.0;

varying vec2 v_uv;
varying float v_gamma_scale;
varying vec4 v_color;
varying float v_fontScale;

varying mat4 styleMappingMat; // \u7528\u4E8E\u5C06\u5728\u9876\u70B9\u7740\u8272\u5668\u4E2D\u8BA1\u7B97\u597D\u7684\u6837\u5F0F\u503C\u4F20\u9012\u7ED9\u7247\u5143

uniform float u_opacity : 1;
uniform float u_stroke_width : 2;
uniform vec4 u_stroke_color : [0.0, 0.0, 0.0, 0.0];

#pragma include "styleMapping"
#pragma include "styleMappingCalOpacity"
#pragma include "styleMappingCalStrokeWidth"

#pragma include "projection"
#pragma include "picking"

void main() {
  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97
   styleMappingMat = mat4(
    0.0, 0.0, 0.0, 0.0, // opacity - strokeOpacity - strokeWidth - empty
    0.0, 0.0, 0.0, 0.0, // strokeR - strokeG - strokeB - strokeA
    0.0, 0.0, 0.0, 0.0, // offsets[0] - offsets[1]
    0.0, 0.0, 0.0, 0.0
  );

  float rowCount = u_cellTypeLayout[0][0];    // \u5F53\u524D\u7684\u6570\u636E\u7EB9\u7406\u6709\u51E0\u884C
  float columnCount = u_cellTypeLayout[0][1]; // \u5F53\u770B\u5230\u6570\u636E\u7EB9\u7406\u6709\u51E0\u5217
  float columnWidth = 1.0/columnCount;  // \u5217\u5BBD
  float rowHeight = 1.0/rowCount;       // \u884C\u9AD8
  float cellCount = calCellCount(); // opacity - strokeOpacity - strokeWidth - stroke - offsets
  float id = a_vertexId; // \u7B2Cn\u4E2A\u9876\u70B9
  float cellCurrentRow = floor(id * cellCount / columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u884C
  float cellCurrentColumn = mod(id * cellCount, columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u5217
  
  // cell \u56FA\u5B9A\u987A\u5E8F opacity -> strokeOpacity -> strokeWidth -> stroke ... 
  // \u6309\u987A\u5E8F\u4ECE cell \u4E2D\u53D6\u503C\u3001\u82E5\u6CA1\u6709\u5219\u81EA\u52A8\u5F80\u4E0B\u53D6\u503C
  float textureOffset = 0.0; // \u5728 cell \u4E2D\u53D6\u503C\u7684\u504F\u79FB\u91CF

  vec2 opacityAndOffset = calOpacityAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);
  styleMappingMat[0][0] = opacityAndOffset.r;
  textureOffset = opacityAndOffset.g;

   vec2 strokeWidthAndOffset = calStrokeWidthAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);
  styleMappingMat[0][2] = strokeWidthAndOffset.r;
  textureOffset = strokeWidthAndOffset.g;

  vec4 textrueStroke = vec4(-1.0, -1.0, -1.0, -1.0);
  if(hasStroke()) {
    vec2 valueRPos = nextPos(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset);
    styleMappingMat[1][0] = pos2value(valueRPos, columnWidth, rowHeight); // R
    textureOffset += 1.0;

    vec2 valueGPos = nextPos(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset);
    styleMappingMat[1][1] = pos2value(valueGPos, columnWidth, rowHeight); // G
    textureOffset += 1.0;

    vec2 valueBPos = nextPos(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset);
    styleMappingMat[1][2] = pos2value(valueBPos, columnWidth, rowHeight); // B
    textureOffset += 1.0;

    vec2 valueAPos = nextPos(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset);
    styleMappingMat[1][3] = pos2value(valueAPos, columnWidth, rowHeight); // A
    textureOffset += 1.0;
  } else {
    if(u_stroke_color == vec4(0.0)) {
      styleMappingMat[1][0] = v_color.r;
      styleMappingMat[1][1] = v_color.g;
      styleMappingMat[1][2] = v_color.b;
      styleMappingMat[1][3] = v_color.a;
    } else {
      styleMappingMat[1][0] = u_stroke_color.r;
      styleMappingMat[1][1] = u_stroke_color.g;
      styleMappingMat[1][2] = u_stroke_color.b;
      styleMappingMat[1][3] = u_stroke_color.a;
    }
  }
  
  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97

  v_color = a_Color;
  v_uv = a_tex / u_sdf_map_size;

  // \u6587\u672C\u7F29\u653E\u6BD4\u4F8B
  float fontScale = a_Size / FONT_SIZE;
  v_fontScale = fontScale;

  vec4 project_pos = project_position(vec4(a_Position, 1.0));
  // vec4 projected_position  = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));

  highp float angle_sin = sin(a_Rotate);
  highp float angle_cos = cos(a_Rotate);
  mat2 rotation_matrix = mat2(angle_cos, -1.0 * angle_sin, angle_sin, angle_cos);
  
  // gl_Position = vec4(projected_position.xy / projected_position.w + rotation_matrix * a_textOffsets * fontScale / u_ViewportSize * 2.0 * u_DevicePixelRatio, 0.0, 1.0);

  float raiseHeight = u_raisingHeight;
  if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
    float mapboxZoomScale = 4.0/pow(2.0, 21.0 - u_Zoom);
    raiseHeight = u_raisingHeight * mapboxZoomScale;
  }

  vec4 projected_position;
  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
   projected_position  = u_Mvp * (vec4(a_Position.xyz + vec3(0.0, 0.0, raiseHeight), 1.0));
  } else { // else
   projected_position  = project_common_position_to_clipspace(vec4(project_pos.xyz + vec3(0.0, 0.0, raiseHeight), 1.0));
  }

  gl_Position = vec4(
    projected_position.xy / projected_position.w + rotation_matrix * a_textOffsets * fontScale / u_ViewportSize * 2.0 * u_DevicePixelRatio, 0.0, 1.0);
  v_gamma_scale = gl_Position.w;
  setPickingColor(a_PickingColor);

}
`;function xR(e){var t=this,n=e.id,r=[],a=[];if(!t.glyphInfoMap||!t.glyphInfoMap[n])return{vertices:[],indices:[],size:7};var i=t.glyphInfoMap[n].centroid,o=i.length===2?[i[0],i[1],0]:i;return t.glyphInfoMap[n].glyphQuads.forEach(function(s,l){r.push.apply(r,$e(o).concat([s.tex.x,s.tex.y+s.tex.height,s.tl.x,s.tl.y],$e(o),[s.tex.x+s.tex.width,s.tex.y+s.tex.height,s.tr.x,s.tr.y],$e(o),[s.tex.x+s.tex.width,s.tex.y,s.br.x,s.br.y],$e(o),[s.tex.x,s.tex.y,s.bl.x,s.bl.y])),a.push(0+l*4,1+l*4,2+l*4,2+l*4,3+l*4,0+l*4)}),{vertices:r,indices:a,size:7}}var _D=function(e){Tt(n,e);var t=mge(n);function n(){var r;Ae(this,n);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return r=t.call.apply(t,[this].concat(i)),m(D(r),"glyphInfo",void 0),m(D(r),"glyphInfoMap",{}),m(D(r),"texture",void 0),m(D(r),"currentZoom",-1),m(D(r),"extent",void 0),m(D(r),"textureHeight",0),m(D(r),"textCount",0),m(D(r),"preTextStyle",{}),m(D(r),"buildModels",function(){var s=r.layer.getLayerConfig(),l=s.mask,u=l===void 0?!1:l,c=s.maskInside,f=c===void 0?!0:c;return r.initGlyph(),r.updateTexture(),r.filterGlyphs(),r.reBuildModel(),[r.layer.buildLayerModel({moduleName:"pointText",vertexShader:yR,fragmentShader:bR,triangulation:xR.bind(D(r)),depth:{enable:!1},blend:r.getBlend(),stencil:Vi(u,f)})]}),r}return Oe(n,[{key:"getUninforms",value:function(){var a=this.layer.getLayerConfig(),i=a.opacity,o=i===void 0?1:i,s=a.stroke,l=s===void 0?"#fff":s,u=a.strokeWidth,c=u===void 0?0:u,f=a.textAnchor,d=f===void 0?"center":f,p=a.textAllowOverlap,h=p===void 0?!1:p,g=a.halo,v=g===void 0?.5:g,b=a.gamma,y=b===void 0?2:b,x=a.raisingHeight,k=x===void 0?0:x,T=this.fontService,C=T.canvas,I=T.mapping;if(Object.keys(I).length!==this.textCount&&(this.updateTexture(),this.textCount=Object.keys(I).length),this.preTextStyle={textAnchor:d,textAllowOverlap:h},this.dataTextureTest&&this.dataTextureNeedUpdate({opacity:o,strokeWidth:c,stroke:l})){this.judgeStyleAttributes({opacity:o,strokeWidth:c,stroke:l});var P=this.layer.getEncodedData(),j=this.calDataFrame(this.cellLength,P,this.cellProperties),A=j.data,S=j.width,M=j.height;this.rowCount=M,this.dataTexture=this.cellLength>0&&A.length>0?this.createTexture2D({flipY:!0,data:A,format:V.LUMINANCE,type:V.FLOAT,width:S,height:M}):this.createTexture2D({flipY:!0,data:[1],format:V.LUMINANCE,type:V.FLOAT,width:1,height:1})}return{u_dataTexture:this.dataTexture,u_cellTypeLayout:this.getCellTypeLayout(),u_raisingHeight:Number(k),u_opacity:er(o)?o:1,u_stroke_width:er(c)?c:1,u_stroke_color:this.getStrokeColor(l),u_sdf_map:this.texture,u_halo_blur:v,u_gamma_scale:y,u_sdf_map_size:[C.width,C.height]}}},{key:"initModels",value:function(){this.layer.on("remapping",this.buildModels),this.extent=this.textExtent();var a=this.layer.getLayerConfig(),i=a.textAnchor,o=i===void 0?"center":i,s=a.textAllowOverlap,l=s===void 0?!0:s;return this.preTextStyle={textAnchor:o,textAllowOverlap:l},this.buildModels()}},{key:"needUpdate",value:function(){var a=this.layer.getLayerConfig(),i=a.textAllowOverlap,o=i===void 0?!1:i,s=this.mapService.getZoom(),l=this.mapService.getBounds(),u=bE(this.extent,l);return!o&&(Math.abs(this.currentZoom-s)>1||!u)||o!==this.preTextStyle.textAllowOverlap?(this.reBuildModel(),!0):!1}},{key:"clearModels",value:function(){var a,i;(a=this.texture)===null||a===void 0||a.destroy(),(i=this.dataTexture)===null||i===void 0||i.destroy(),this.layer.off("remapping",this.buildModels)}},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"rotate",type:kn.Attribute,descriptor:{name:"a_Rotate",buffer:{usage:V.DYNAMIC_DRAW,data:[],type:V.FLOAT},size:1,update:function(i,o,s,l){var u=i.rotate,c=u===void 0?0:u;return Array.isArray(c)?[c[0]]:[c]}}}),this.styleAttributeService.registerStyleAttribute({name:"textOffsets",type:kn.Attribute,descriptor:{name:"a_textOffsets",buffer:{usage:V.STATIC_DRAW,data:[],type:V.FLOAT},size:2,update:function(i,o,s,l){return[s[5],s[6]]}}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:kn.Attribute,descriptor:{name:"a_Size",buffer:{usage:V.DYNAMIC_DRAW,data:[],type:V.FLOAT},size:1,update:function(i,o,s,l){var u=i.size,c=u===void 0?12:u;return Array.isArray(c)?[c[0]]:[c]}}}),this.styleAttributeService.registerStyleAttribute({name:"textUv",type:kn.Attribute,descriptor:{name:"a_tex",buffer:{usage:V.DYNAMIC_DRAW,data:[],type:V.FLOAT},size:2,update:function(i,o,s,l){return[s[3],s[4]]}}})}},{key:"textExtent",value:function(){var a=this.mapService.getBounds();return im(a,.5)}},{key:"initTextFont",value:function(){var a=this.layer.getLayerConfig(),i=a.fontWeight,o=i===void 0?"400":i,s=a.fontFamily,l=s===void 0?"sans-serif":s,u=this.layer.getEncodedData(),c=[];u.forEach(function(f){var d=f.shape,p=d===void 0?"":d;p=p.toString();var h=pge(p),g;try{for(h.s();!(g=h.n()).done;){var v=g.value;c.indexOf(v)===-1&&c.push(v)}}catch(b){h.e(b)}finally{h.f()}}),this.fontService.setFontOptions({characterSet:c,fontWeight:o,fontFamily:l,iconfont:!1})}},{key:"initIconFontTex",value:function(){var a=this.layer.getLayerConfig(),i=a.fontWeight,o=i===void 0?"400":i,s=a.fontFamily,l=s===void 0?"sans-serif":s,u=this.layer.getEncodedData(),c=[];u.forEach(function(f){var d=f.shape,p=d===void 0?"":d;p="".concat(p),c.indexOf(p)===-1&&c.push(p)}),this.fontService.setFontOptions({characterSet:c,fontWeight:o,fontFamily:l,iconfont:!0})}},{key:"generateGlyphLayout",value:function(a){var i=this,o=this.fontService.mapping,s=this.layer.getLayerConfig(),l=s.spacing,u=l===void 0?2:l,c=s.textAnchor,f=c===void 0?"center":c,d=this.layer.getEncodedData();this.glyphInfo=d.map(function(p){var h=p.shape,g=h===void 0?"":h,v=p.id,b=p.size,y=b===void 0?1:b,x=p.textOffset,k=x===void 0?[0,0]:x,T=fge(g.toString(),o,y,f,"left",u,k,a),C=dge(T,k,!1);return p.shaping=T,p.glyphQuads=C,p.centroid=hc(p.coordinates),p.originCentroid=p.version==="GAODE2.x"?hc(p.originCoordinates):p.originCentroid=p.centroid,i.glyphInfoMap[v]={shaping:T,glyphQuads:C,centroid:hc(p.coordinates)},p})}},{key:"filterGlyphs",value:function(){var a=this,i=this.layer.getLayerConfig(),o=i.padding,s=o===void 0?[4,4]:o,l=i.textAllowOverlap,u=l===void 0?!1:l;if(!u){this.glyphInfoMap={},this.currentZoom=this.mapService.getZoom(),this.extent=this.textExtent();var c=this.rendererService.getViewportSize(),f=c.width,d=c.height,p=new sge(f,d),h=this.glyphInfo.filter(function(g){var v=g.shaping,b=g.id,y=b===void 0?0:b,x=g.version==="GAODE2.x"?g.originCentroid:g.centroid,k=g.size,T=k/24,C=a.mapService.lngLatToContainer(x),I=p.placeCollisionBox({x1:v.left*T-s[0],x2:v.right*T+s[0],y1:v.top*T-s[1],y2:v.bottom*T+s[1],anchorPointX:C.x,anchorPointY:C.y}),P=I.box;return P&&P.length?(p.insertCollisionBox(P,y),!0):!1});h.forEach(function(g){a.glyphInfoMap[g.id]=g})}}},{key:"initGlyph",value:function(){var a=this.layer.getLayerConfig(),i=a.iconfont,o=i===void 0?!1:i;o?this.initIconFontTex():this.initTextFont(),this.generateGlyphLayout(o)}},{key:"updateTexture",value:function(){var a=this.rendererService.createTexture2D,i=this.fontService.canvas;this.textureHeight=i.height,this.texture&&this.texture.destroy(),this.texture=a({data:i,mag:V.LINEAR,min:V.LINEAR,width:i.width,height:i.height})}},{key:"reBuildModel",value:function(){var a=this.layer.getLayerConfig(),i=a.mask,o=i===void 0?!1:i,s=a.maskInside,l=s===void 0?!0:s;this.filterGlyphs(),this.layer.models=[this.layer.buildLayerModel({moduleName:"pointText",vertexShader:yR,fragmentShader:bR,triangulation:xR.bind(this),depth:{enable:!1},blend:this.getBlend(),stencil:Vi(o,l)})]}}]),n}(Qa);function vge(e){var t=bge();return function(){var r=ke(e),a;if(t){var i=ke(this).constructor;a=Reflect.construct(r,arguments,i)}else a=r.apply(this,arguments);return It(this,a)}}function bge(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var yge=`uniform float u_additive;
varying mat4 styleMappingMat; // \u4F20\u9012\u4ECE\u7247\u5143\u4E2D\u4F20\u9012\u7684\u6620\u5C04\u6570\u636E

varying vec4 v_data;
varying vec4 v_color;
varying float v_radius;

#pragma include "sdf_2d"
#pragma include "picking"

void main() {
  int shape = int(floor(v_data.w + 0.5));

  vec4 textrueStroke = vec4(
    styleMappingMat[1][0],
    styleMappingMat[1][1],
    styleMappingMat[1][2],
    styleMappingMat[1][3]
  );

  float opacity = styleMappingMat[0][0];
  float stroke_opacity = styleMappingMat[0][1];
  float strokeWidth = styleMappingMat[0][2];
  vec4 strokeColor = textrueStroke == vec4(0) ? v_color : textrueStroke;

  lowp float antialiasblur = v_data.z;
  float r = v_radius / (v_radius + strokeWidth);

  float outer_df;
  float inner_df;
  // 'circle', 'triangle', 'square', 'pentagon', 'hexagon', 'octogon', 'hexagram', 'rhombus', 'vesica'
  if (shape == 0) {
    outer_df = sdCircle(v_data.xy, 1.0);
    inner_df = sdCircle(v_data.xy, r);
  } else if (shape == 1) {
    outer_df = sdEquilateralTriangle(1.1 * v_data.xy);
    inner_df = sdEquilateralTriangle(1.1 / r * v_data.xy);
  } else if (shape == 2) {
    outer_df = sdBox(v_data.xy, vec2(1.));
    inner_df = sdBox(v_data.xy, vec2(r));
  } else if (shape == 3) {
    outer_df = sdPentagon(v_data.xy, 0.8);
    inner_df = sdPentagon(v_data.xy, r * 0.8);
  } else if (shape == 4) {
    outer_df = sdHexagon(v_data.xy, 0.8);
    inner_df = sdHexagon(v_data.xy, r * 0.8);
  } else if (shape == 5) {
    outer_df = sdOctogon(v_data.xy, 1.0);
    inner_df = sdOctogon(v_data.xy, r);
  } else if (shape == 6) {
    outer_df = sdHexagram(v_data.xy, 0.52);
    inner_df = sdHexagram(v_data.xy, r * 0.52);
  } else if (shape == 7) {
    outer_df = sdRhombus(v_data.xy, vec2(1.0));
    inner_df = sdRhombus(v_data.xy, vec2(r));
  } else if (shape == 8) {
    outer_df = sdVesica(v_data.xy, 1.1, 0.8);
    inner_df = sdVesica(v_data.xy, r * 1.1, r * 0.8);
  }


  float opacity_t = smoothstep(0.0, antialiasblur, outer_df);

  float color_t = strokeWidth < 0.01 ? 0.0 : smoothstep(
    antialiasblur,
    0.0,
    inner_df
  );

  if(strokeWidth < 0.01) {
    gl_FragColor = vec4(v_color.rgb, v_color.a * opacity);
  } else {
    gl_FragColor = mix(vec4(v_color.rgb, v_color.a * opacity), strokeColor * stroke_opacity, color_t);
  }

  if(u_additive > 0.0) {
    gl_FragColor *= opacity_t;
    gl_FragColor = filterColorAlpha(gl_FragColor, gl_FragColor.a);
  } else {
    gl_FragColor.a *= opacity_t;
    gl_FragColor = filterColor(gl_FragColor);
  }
}
`,xge=`attribute vec4 a_Color;
attribute vec3 a_Position;
attribute vec3 a_Extrude;
attribute float a_Size;
attribute float a_Shape;

varying mat4 styleMappingMat; // \u7528\u4E8E\u5C06\u5728\u9876\u70B9\u7740\u8272\u5668\u4E2D\u8BA1\u7B97\u597D\u7684\u6837\u5F0F\u503C\u4F20\u9012\u7ED9\u7247\u5143

uniform mat4 u_ModelMatrix;
uniform mat4 u_Mvp;
uniform float u_isMeter;

uniform vec2 u_tileOrigin;
uniform float u_coord;

varying vec4 v_data;
varying vec4 v_color;
varying float v_radius;

uniform float u_opacity : 1;
uniform float u_stroke_opacity : 1;
uniform float u_stroke_width : 2;
uniform vec4 u_stroke_color : [0.0, 0.0, 0.0, 0.0];
uniform vec2 u_offsets;

uniform float u_blur : 0.0;

#pragma include "styleMapping"
#pragma include "styleMappingCalOpacity"
#pragma include "styleMappingCalStrokeOpacity"
#pragma include "styleMappingCalStrokeWidth"

#pragma include "projection"
#pragma include "picking"

void main() {
  vec3 extrude = a_Extrude;
  float shape_type = a_Shape;
  float newSize = setPickingSize(a_Size);

  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97
  styleMappingMat = mat4(
    0.0, 0.0, 0.0, 0.0, // opacity - strokeOpacity - strokeWidth - empty
    0.0, 0.0, 0.0, 0.0, // strokeR - strokeG - strokeB - strokeA
    0.0, 0.0, 0.0, 0.0, // offsets[0] - offsets[1]
    0.0, 0.0, 0.0, 0.0
  );

  float rowCount = u_cellTypeLayout[0][0];    // \u5F53\u524D\u7684\u6570\u636E\u7EB9\u7406\u6709\u51E0\u884C
  float columnCount = u_cellTypeLayout[0][1]; // \u5F53\u770B\u5230\u6570\u636E\u7EB9\u7406\u6709\u51E0\u5217
  float columnWidth = 1.0/columnCount;  // \u5217\u5BBD
  float rowHeight = 1.0/rowCount;       // \u884C\u9AD8
  float cellCount = calCellCount(); // opacity - strokeOpacity - strokeWidth - stroke - offsets
  float id = a_vertexId; // \u7B2Cn\u4E2A\u9876\u70B9
  float cellCurrentRow = floor(id * cellCount / columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u884C
  float cellCurrentColumn = mod(id * cellCount, columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u5217
  
  // cell \u56FA\u5B9A\u987A\u5E8F opacity -> strokeOpacity -> strokeWidth -> stroke ... 
  // \u6309\u987A\u5E8F\u4ECE cell \u4E2D\u53D6\u503C\u3001\u82E5\u6CA1\u6709\u5219\u81EA\u52A8\u5F80\u4E0B\u53D6\u503C
  float textureOffset = 0.0; // \u5728 cell \u4E2D\u53D6\u503C\u7684\u504F\u79FB\u91CF

  vec2 opacityAndOffset = calOpacityAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);
  styleMappingMat[0][0] = opacityAndOffset.r;
  textureOffset = opacityAndOffset.g;

  vec2 strokeOpacityAndOffset = calStrokeOpacityAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);
  styleMappingMat[0][1] = strokeOpacityAndOffset.r;
  textureOffset = strokeOpacityAndOffset.g;

  vec2 strokeWidthAndOffset = calStrokeWidthAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);
  styleMappingMat[0][2] = strokeWidthAndOffset.r;
  textureOffset = strokeWidthAndOffset.g;

  vec4 textrueStroke = vec4(-1.0, -1.0, -1.0, -1.0);
  if(hasStroke()) {
    vec2 valueRPos = nextPos(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset);
    styleMappingMat[1][0] = pos2value(valueRPos, columnWidth, rowHeight); // R
    textureOffset += 1.0;

    vec2 valueGPos = nextPos(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset);
    styleMappingMat[1][1] = pos2value(valueGPos, columnWidth, rowHeight); // G
    textureOffset += 1.0;

    vec2 valueBPos = nextPos(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset);
    styleMappingMat[1][2] = pos2value(valueBPos, columnWidth, rowHeight); // B
    textureOffset += 1.0;

    vec2 valueAPos = nextPos(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset);
    styleMappingMat[1][3] = pos2value(valueAPos, columnWidth, rowHeight); // A
    textureOffset += 1.0;
  } else {
    if(u_stroke_color == vec4(0.0)) {
      styleMappingMat[1][0] = v_color.r;
      styleMappingMat[1][1] = v_color.g;
      styleMappingMat[1][2] = v_color.b;
      styleMappingMat[1][3] = v_color.a;
    } else {
      styleMappingMat[1][0] = u_stroke_color.r;
      styleMappingMat[1][1] = u_stroke_color.g;
      styleMappingMat[1][2] = u_stroke_color.b;
      styleMappingMat[1][3] = u_stroke_color.a;
    }
  }

  vec2 textrueOffsets = vec2(0.0, 0.0);
  if(hasOffsets()) {
    vec2 valueXPos = nextPos(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset);
    textrueOffsets.r = pos2value(valueXPos, columnWidth, rowHeight); // x
    textureOffset += 1.0;

    vec2 valueYPos = nextPos(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset);
    textrueOffsets.g = pos2value(valueYPos, columnWidth, rowHeight); // x
    textureOffset += 1.0;
  } else {
    textrueOffsets = u_offsets;
  }

  // cal style mapping

  v_color = a_Color;
  v_radius = newSize;

  // anti-alias
  //  float antialiased_blur = -max(u_blur, antialiasblur);
  float antialiasblur = -max(2.0 / u_DevicePixelRatio / a_Size, u_blur);

  vec2 offset = (extrude.xy * (newSize + u_stroke_width) + textrueOffsets);
  vec3 aPosition = a_Position;
  if(u_isMeter < 1.0) {
    // \u4E0D\u4EE5\u7C73\u4E3A\u5B9E\u9645\u5355\u4F4D
    offset = project_pixel(offset);
  } else {
    // \u4EE5\u7C73\u4E3A\u5B9E\u9645\u5355\u4F4D
    antialiasblur *= pow(19.0 - u_Zoom, 2.0);
    antialiasblur = max(antialiasblur, -0.01);
    // offset *= 0.5;

    if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
      aPosition.xy += offset;
      offset.x = 0.0;
      offset.y = 0.0;
    }
  }

  v_data = vec4(extrude.x, extrude.y, antialiasblur,shape_type);

  vec4 project_pos = project_position(vec4(aPosition.xy, 0.0, 1.0));

  if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
    float mapboxZoomScale = 4.0/pow(2.0, 21.0 - u_Zoom);
  }

if(u_coord > 0.0) {
  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
    gl_Position = u_Mvp * vec4(project_pos.xy + offset, 0.0, 1.0);
  } else {
    gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offset, 0.0, 1.0));
  }
} else {
  gl_PointSize = 24.0;
  vec2 pointPos = a_Position.xy;
  vec4 world = vec4(project_mvt_offset_position(vec4(u_tileOrigin, 0.0, 1.0)).xyz, 1.0); // \u74E6\u7247\u8D77\u59CB\u70B9\u7684\u4E16\u754C\u5750\u6807

  vec2 pointOffset =  pointPos *  pow(2.0, u_Zoom); // \u74E6\u7247\u5185\u7684\u70B9\u7684\u504F\u79FB\u5750\u6807
  
  world.xy += offset;
  world.xy += pointOffset;

  if (u_CoordinateSystem == COORDINATE_SYSTEM_METER_OFFSET || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
    // Needs to be divided with project_uCommonUnitsPerMeter
    world.w *= u_PixelsPerMeter.z;
  }

  gl_Position = u_ViewProjectionMatrix * world + u_ViewportCenterProjection;
}

 
  setPickingColor(a_PickingColor);


}
`,Jg=function(e){Tt(n,e);var t=vge(n);function n(){var r;Ae(this,n);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return r=t.call.apply(t,[this].concat(i)),m(D(r),"meter2coord",1),m(D(r),"isMeter",!1),r}return Oe(n,[{key:"getUninforms",value:function(){var a=this.layer.getLayerConfig(),i=a.opacity,o=i===void 0?1:i,s=a.strokeOpacity,l=s===void 0?1:s,u=a.strokeWidth,c=u===void 0?0:u,f=a.stroke,d=f===void 0?"rgba(0,0,0,0)":f,p=a.offsets,h=p===void 0?[0,0]:p,g=a.blend,v=a.blur,b=v===void 0?0:v,y=a.coord,x=y===void 0?"lnglat":y,k=a.tileOrigin;if(this.dataTextureTest&&this.dataTextureNeedUpdate({opacity:o,strokeOpacity:l,strokeWidth:c,stroke:d,offsets:h})){this.judgeStyleAttributes({opacity:o,strokeOpacity:l,strokeWidth:c,stroke:d,offsets:h});var T=this.layer.getEncodedData(),C=this.calDataFrame(this.cellLength,T,this.cellProperties),I=C.data,P=C.width,j=C.height;this.rowCount=j,this.dataTexture=this.cellLength>0&&I.length>0?this.createTexture2D({flipY:!0,data:I,format:V.LUMINANCE,type:V.FLOAT,width:P,height:j}):this.createTexture2D({flipY:!0,data:[1],format:V.LUMINANCE,type:V.FLOAT,width:1,height:1})}return{u_tileOrigin:k||[0,0],u_coord:x==="lnglat"?1:0,u_isMeter:Number(this.isMeter),u_blur:b,u_additive:g==="additive"?1:0,u_dataTexture:this.dataTexture,u_cellTypeLayout:this.getCellTypeLayout(),u_opacity:Number(o),u_stroke_opacity:Number(l),u_stroke_width:Number(c),u_stroke_color:this.getStrokeColor(d),u_offsets:this.isOffsetStatic(h)?h:[0,0]}}},{key:"getAttribute",value:function(){return this.styleAttributeService.createAttributesAndIndices(this.layer.getEncodedData(),Cs)}},{key:"initModels",value:function(){var a=this.layer.getLayerConfig(),i=a.unit,o=i===void 0?"l7size":i,s=this.mapService.version;return o==="meter"&&s!==Ar.L7MAP&&s!==Ar.GLOBEL&&(this.isMeter=!0,this.calMeter2Coord()),this.buildModels()}},{key:"calMeter2Coord",value:function(){var a=Le(this.layer.getSource().extent,4),i=a[0],o=a[1],s=a[2],l=a[3],u=[(i+s)/2,(o+l)/2],c=this.mapService.version;if(c===Ar.MAPBOX&&window.mapboxgl.MercatorCoordinate){var f=window.mapboxgl.MercatorCoordinate.fromLngLat({lng:u[0],lat:u[1]},0),d=1,p=d*f.meterInMercatorCoordinateUnits(),h=new window.mapboxgl.MercatorCoordinate(f.x-p,f.y,f.z),g=h.toLngLat();this.meter2coord=u[0]-g.lng;return}var v=this.mapService.meterToCoord(u,[i,o]),b=this.mapService.meterToCoord(u,[s===i?s+.1:s,l===o?o+.1:l]);this.meter2coord=(v+b)/2,Boolean(this.meter2coord)||(this.meter2coord=7.70681090738883)}},{key:"buildModels",value:function(){var a=this.layer.getLayerConfig(),i=a.mask,o=i===void 0?!1:i,s=a.maskInside,l=s===void 0?!0:s,u=this.getShaders(),c=u.frag,f=u.vert,d=u.type;return this.layer.triangulation=Cs,[this.layer.buildLayerModel({moduleName:d,vertexShader:f,fragmentShader:c,triangulation:Cs,depth:{enable:!1},blend:this.getBlend(),stencil:Vi(o,l),cull:{enable:!0,face:Hb(this.mapService.version)}})]}},{key:"getShaders",value:function(){return{frag:yge,vert:xge,type:"point_fill_tile"}}},{key:"clearModels",value:function(){var a;(a=this.dataTexture)===null||a===void 0||a.destroy()}},{key:"registerBuiltinAttributes",value:function(){var a=this;this.styleAttributeService.registerStyleAttribute({name:"extrude",type:kn.Attribute,descriptor:{name:"a_Extrude",buffer:{usage:V.DYNAMIC_DRAW,data:[],type:V.FLOAT},size:3,update:function(o,s,l,u){var c=[1,1,0,-1,1,0,-1,-1,0,1,-1,0],f=u%4*3;return[c[f],c[f+1],c[f+2]]}}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:kn.Attribute,descriptor:{name:"a_Size",buffer:{usage:V.DYNAMIC_DRAW,data:[],type:V.FLOAT},size:1,update:function(o,s,l,u){var c=o.size,f=c===void 0?5:c;return Array.isArray(f)?[f[0]*a.meter2coord]:[f*a.meter2coord]}}}),this.styleAttributeService.registerStyleAttribute({name:"shape",type:kn.Attribute,descriptor:{name:"a_Shape",buffer:{usage:V.DYNAMIC_DRAW,data:[],type:V.FLOAT},size:1,update:function(o,s,l,u){var c=o.shape,f=c===void 0?2:c,d=a.layer.getLayerConfig().shape2d,p=d.indexOf(f);return[p]}}})}}]),n}(Qa);function _ge(e){var t=wge();return function(){var r=ke(e),a;if(t){var i=ke(this).constructor;a=Reflect.construct(r,arguments,i)}else a=r.apply(this,arguments);return It(this,a)}}function wge(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var kge=`uniform float u_opacity: 1.0;
varying vec4 v_Color;
varying mat4 styleMappingMat; // \u4F20\u9012\u4ECE\u7247\u5143\u4E2D\u4F20\u9012\u7684\u6620\u5C04\u6570\u636E

#pragma include "picking"

void main() {
  float opacity = styleMappingMat[0][0];
  gl_FragColor = v_Color;
  gl_FragColor.a *= opacity;
  gl_FragColor = filterColor(gl_FragColor);
}
`,Ege=`attribute vec4 a_Color;
attribute vec3 a_Position;

uniform mat4 u_ModelMatrix;
uniform mat4 u_Mvp;

uniform float u_opacity: 1.0;

uniform vec2 u_tileOrigin;
uniform float u_coord;

varying vec4 v_Color;
varying mat4 styleMappingMat; // \u7528\u4E8E\u5C06\u5728\u9876\u70B9\u7740\u8272\u5668\u4E2D\u8BA1\u7B97\u597D\u7684\u6837\u5F0F\u503C\u4F20\u9012\u7ED9\u7247\u5143

#pragma include "styleMapping"
#pragma include "styleMappingCalOpacity"

#pragma include "projection"
#pragma include "picking"

void main() {
  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97
styleMappingMat = mat4(
    0.0, 0.0, 0.0, 0.0, // opacity - strokeOpacity - strokeWidth - empty
    0.0, 0.0, 0.0, 0.0, // strokeR - strokeG - strokeB - strokeA
    0.0, 0.0, 0.0, 0.0, // offsets[0] - offsets[1]
    0.0, 0.0, 0.0, 0.0
  );

  float rowCount = u_cellTypeLayout[0][0];    // \u5F53\u524D\u7684\u6570\u636E\u7EB9\u7406\u6709\u51E0\u884C
  float columnCount = u_cellTypeLayout[0][1]; // \u5F53\u770B\u5230\u6570\u636E\u7EB9\u7406\u6709\u51E0\u5217
  float columnWidth = 1.0/columnCount;  // \u5217\u5BBD
  float rowHeight = 1.0/rowCount;       // \u884C\u9AD8
  float cellCount = calCellCount(); // opacity - strokeOpacity - strokeWidth - stroke - offsets
  float id = a_vertexId; // \u7B2Cn\u4E2A\u9876\u70B9
  float cellCurrentRow = floor(id * cellCount / columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u884C
  float cellCurrentColumn = mod(id * cellCount, columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u5217
  
  // cell \u56FA\u5B9A\u987A\u5E8F opacity -> strokeOpacity -> strokeWidth -> stroke ... 
  // \u6309\u987A\u5E8F\u4ECE cell \u4E2D\u53D6\u503C\u3001\u82E5\u6CA1\u6709\u5219\u81EA\u52A8\u5F80\u4E0B\u53D6\u503C
  float textureOffset = 0.0; // \u5728 cell \u4E2D\u53D6\u503C\u7684\u504F\u79FB\u91CF

  vec2 opacityAndOffset = calOpacityAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);
  styleMappingMat[0][0] = opacityAndOffset.r;
  textureOffset = opacityAndOffset.g;
  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97

  v_Color = a_Color;
  vec4 project_pos = project_position(vec4(a_Position, 1.0));


  if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
    float mapboxZoomScale = 4.0/pow(2.0, 21.0 - u_Zoom);
    project_pos.z *= mapboxZoomScale;
  }

if(u_coord > 0.0) {
  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
    gl_Position = u_Mvp * (vec4(project_pos.xyz, 1.0));
  } else {
    gl_Position = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));
  }
} else {
    vec2 pointPos = a_Position.xy;
    vec4 world = vec4(project_mvt_offset_position(vec4(u_tileOrigin, 0.0, 1.0)).xyz, 1.0); // \u74E6\u7247\u8D77\u59CB\u70B9\u7684\u4E16\u754C\u5750\u6807

    vec2 pointOffset =  pointPos *  pow(2.0, u_Zoom); // \u74E6\u7247\u5185\u7684\u70B9\u7684\u504F\u79FB\u5750\u6807
    
    world.xy += pointOffset;

    if (u_CoordinateSystem == COORDINATE_SYSTEM_METER_OFFSET || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
      // Needs to be divided with project_uCommonUnitsPerMeter
      world.w *= u_PixelsPerMeter.z;
    }

    gl_Position = u_ViewProjectionMatrix * world + u_ViewportCenterProjection;
}


  setPickingColor(a_PickingColor);
}

`,Sge=function(e){Tt(n,e);var t=_ge(n);function n(){return Ae(this,n),t.apply(this,arguments)}return Oe(n,[{key:"getUninforms",value:function(){var a=this.layer.getLayerConfig(),i=a.opacity,o=i===void 0?1:i,s=a.tileOrigin,l=a.coord,u=l===void 0?"lnglat":l;if(this.dataTextureTest&&this.dataTextureNeedUpdate({opacity:o})){this.judgeStyleAttributes({opacity:o});var c=this.layer.getEncodedData(),f=this.calDataFrame(this.cellLength,c,this.cellProperties),d=f.data,p=f.width,h=f.height;this.rowCount=h,this.dataTexture=this.cellLength>0&&d.length>0?this.createTexture2D({flipY:!0,data:d,format:V.LUMINANCE,type:V.FLOAT,width:p,height:h}):this.createTexture2D({flipY:!0,data:[1],format:V.LUMINANCE,type:V.FLOAT,width:1,height:1})}return{u_tileOrigin:s||[0,0],u_coord:u==="lnglat"?1:0,u_dataTexture:this.dataTexture,u_cellTypeLayout:this.getCellTypeLayout(),u_opacity:o}}},{key:"initModels",value:function(){return this.buildModels()}},{key:"buildModels",value:function(){var a=this.getModelParams(),i=a.frag,o=a.vert,s=a.triangulation,l=a.type,u=this.layer.getLayerConfig(),c=u.mask,f=c===void 0?!1:c,d=u.maskInside,p=d===void 0?!0:d;return this.layer.triangulation=s,[this.layer.buildLayerModel({moduleName:l,vertexShader:o,fragmentShader:i,triangulation:s,blend:this.getBlend(),depth:{enable:!1},stencil:Vi(f,p)})]}},{key:"clearModels",value:function(){var a;(a=this.dataTexture)===null||a===void 0||a.destroy()}},{key:"registerBuiltinAttributes",value:function(){}},{key:"getModelParams",value:function(){return{frag:kge,vert:Ege,type:"polygon_tile",triangulation:dD}}}]),n}(Qa);function Cge(e){var t=Tge();return function(){var r=ke(e),a;if(t){var i=ke(this).constructor;a=Reflect.construct(r,arguments,i)}else a=r.apply(this,arguments);return It(this,a)}}function Tge(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var Age=function(e){Tt(n,e);var t=Cge(n);function n(){var r;Ae(this,n);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return r=t.call.apply(t,[this].concat(i)),m(D(r),"isVector",!0),m(D(r),"type",r.layerType),m(D(r),"pickedID",null),r}return Oe(n,[{key:"getPickID",value:function(){return this.pickedID}},{key:"setPickID",value:function(){return this.pickedID}},{key:"buildModels",value:function(){var a=this.getModelType();this.layerModel=new a(this),this.models=this.layerModel.initModels()}},{key:"rebuildModels",value:function(){this.models=this.layerModel.buildModels()}},{key:"getModelType",value:function(){switch(this.layerType){case"PolygonLayer":return Sge;case"LineLayer":return nge;case"PointLayer":return this.getPointModel();default:return Jg}}},{key:"getPointModel",value:function(){var a=this.getEncodedData(),i=this.getLayerConfig(),o=i.shape2d,s=a.find(function(u){return u.hasOwnProperty("shape")});if(s){var l=s.shape;return(o==null?void 0:o.indexOf(l))!==-1?Jg:_D}else return Jg}},{key:"getConfigSchema",value:function(){return{properties:{opacity:{type:"number",minimum:0,maximum:1}}}}},{key:"getDefaultConfig",value:function(){return{}}}]),n}(Gm);/**
 * splaytree v3.1.1
 * Fast Splay tree for Node and browser
 *
 * @author Alexander Milevski <info@w8r.name>
 * @license MIT
 * @preserve
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */function Oge(e,t){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,a,i,o;return o={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function s(u){return function(c){return l([u,c])}}function l(u){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,a&&(i=u[0]&2?a.return:u[0]?a.throw||((i=a.return)&&i.call(a),0):a.next)&&!(i=i.call(a,u[1])).done)return i;switch(a=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return n.label++,{value:u[1],done:!1};case 5:n.label++,a=u[1],u=[0];continue;case 7:u=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){n=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){n.label=u[1];break}if(u[0]===6&&n.label<i[1]){n.label=i[1],i=u;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(u);break}i[2]&&n.ops.pop(),n.trys.pop();continue}u=t.call(e,n)}catch(c){u=[6,c],a=0}finally{r=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}var yu=function(){function e(t,n){this.next=null,this.key=t,this.data=n,this.left=null,this.right=null}return e}();function Mge(e,t){return e>t?1:e<t?-1:0}function Hl(e,t,n){for(var r=new yu(null,null),a=r,i=r;;){var o=n(e,t.key);if(o<0){if(t.left===null)break;if(n(e,t.left.key)<0){var s=t.left;if(t.left=s.right,s.right=t,t=s,t.left===null)break}i.left=t,i=t,t=t.left}else if(o>0){if(t.right===null)break;if(n(e,t.right.key)>0){var s=t.right;if(t.right=s.left,s.left=t,t=s,t.right===null)break}a.right=t,a=t,t=t.right}else break}return a.right=t.left,i.left=t.right,t.left=r.right,t.right=r.left,t}function o_(e,t,n,r){var a=new yu(e,t);if(n===null)return a.left=a.right=null,a;n=Hl(e,n,r);var i=r(e,n.key);return i<0?(a.left=n.left,a.right=n,n.left=null):i>=0&&(a.right=n.right,a.left=n,n.right=null),a}function _R(e,t,n){var r=null,a=null;if(t){t=Hl(e,t,n);var i=n(t.key,e);i===0?(r=t.left,a=t.right):i<0?(a=t.right,t.right=null,r=t):(r=t.left,t.left=null,a=t)}return{left:r,right:a}}function Rge(e,t,n){return t===null?e:(e===null||(t=Hl(e.key,t,n),t.left=e),t)}function hk(e,t,n,r,a){if(e){r(""+t+(n?"\u2514\u2500\u2500 ":"\u251C\u2500\u2500 ")+a(e)+`
`);var i=t+(n?"    ":"\u2502   ");e.left&&hk(e.left,i,!1,r,a),e.right&&hk(e.right,i,!0,r,a)}}var qE=function(){function e(t){t===void 0&&(t=Mge),this._root=null,this._size=0,this._comparator=t}return e.prototype.insert=function(t,n){return this._size++,this._root=o_(t,n,this._root,this._comparator)},e.prototype.add=function(t,n){var r=new yu(t,n);this._root===null&&(r.left=r.right=null,this._size++,this._root=r);var a=this._comparator,i=Hl(t,this._root,a),o=a(t,i.key);return o===0?this._root=i:(o<0?(r.left=i.left,r.right=i,i.left=null):o>0&&(r.right=i.right,r.left=i,i.right=null),this._size++,this._root=r),this._root},e.prototype.remove=function(t){this._root=this._remove(t,this._root,this._comparator)},e.prototype._remove=function(t,n,r){var a;if(n===null)return null;n=Hl(t,n,r);var i=r(t,n.key);return i===0?(n.left===null?a=n.right:(a=Hl(t,n.left,r),a.right=n.right),this._size--,a):n},e.prototype.pop=function(){var t=this._root;if(t){for(;t.left;)t=t.left;return this._root=Hl(t.key,this._root,this._comparator),this._root=this._remove(t.key,this._root,this._comparator),{key:t.key,data:t.data}}return null},e.prototype.findStatic=function(t){for(var n=this._root,r=this._comparator;n;){var a=r(t,n.key);if(a===0)return n;a<0?n=n.left:n=n.right}return null},e.prototype.find=function(t){return this._root&&(this._root=Hl(t,this._root,this._comparator),this._comparator(t,this._root.key)!==0)?null:this._root},e.prototype.contains=function(t){for(var n=this._root,r=this._comparator;n;){var a=r(t,n.key);if(a===0)return!0;a<0?n=n.left:n=n.right}return!1},e.prototype.forEach=function(t,n){for(var r=this._root,a=[],i=!1;!i;)r!==null?(a.push(r),r=r.left):a.length!==0?(r=a.pop(),t.call(n,r),r=r.right):i=!0;return this},e.prototype.range=function(t,n,r,a){for(var i=[],o=this._comparator,s=this._root,l;i.length!==0||s;)if(s)i.push(s),s=s.left;else{if(s=i.pop(),l=o(s.key,n),l>0)break;if(o(s.key,t)>=0&&r.call(a,s))return this;s=s.right}return this},e.prototype.keys=function(){var t=[];return this.forEach(function(n){var r=n.key;return t.push(r)}),t},e.prototype.values=function(){var t=[];return this.forEach(function(n){var r=n.data;return t.push(r)}),t},e.prototype.min=function(){return this._root?this.minNode(this._root).key:null},e.prototype.max=function(){return this._root?this.maxNode(this._root).key:null},e.prototype.minNode=function(t){if(t===void 0&&(t=this._root),t)for(;t.left;)t=t.left;return t},e.prototype.maxNode=function(t){if(t===void 0&&(t=this._root),t)for(;t.right;)t=t.right;return t},e.prototype.at=function(t){for(var n=this._root,r=!1,a=0,i=[];!r;)if(n)i.push(n),n=n.left;else if(i.length>0){if(n=i.pop(),a===t)return n;a++,n=n.right}else r=!0;return null},e.prototype.next=function(t){var n=this._root,r=null;if(t.right){for(r=t.right;r.left;)r=r.left;return r}for(var a=this._comparator;n;){var i=a(t.key,n.key);if(i===0)break;i<0?(r=n,n=n.left):n=n.right}return r},e.prototype.prev=function(t){var n=this._root,r=null;if(t.left!==null){for(r=t.left;r.right;)r=r.right;return r}for(var a=this._comparator;n;){var i=a(t.key,n.key);if(i===0)break;i<0?n=n.left:(r=n,n=n.right)}return r},e.prototype.clear=function(){return this._root=null,this._size=0,this},e.prototype.toList=function(){return Ige(this._root)},e.prototype.load=function(t,n,r){n===void 0&&(n=[]),r===void 0&&(r=!1);var a=t.length,i=this._comparator;if(r&&vk(t,n,0,a-1,i),this._root===null)this._root=mk(t,n,0,a),this._size=a;else{var o=Lge(this.toList(),Pge(t,n),i);a=this._size+a,this._root=gk({head:o},0,a)}return this},e.prototype.isEmpty=function(){return this._root===null},Object.defineProperty(e.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"root",{get:function(){return this._root},enumerable:!0,configurable:!0}),e.prototype.toString=function(t){t===void 0&&(t=function(r){return String(r.key)});var n=[];return hk(this._root,"",!0,function(r){return n.push(r)},t),n.join("")},e.prototype.update=function(t,n,r){var a=this._comparator,i=_R(t,this._root,a),o=i.left,s=i.right;a(t,n)<0?s=o_(n,r,s,a):o=o_(n,r,o,a),this._root=Rge(o,s,a)},e.prototype.split=function(t){return _R(t,this._root,this._comparator)},e.prototype[Symbol.iterator]=function(){var t;return Oge(this,function(n){switch(n.label){case 0:t=this.minNode(),n.label=1;case 1:return t?[4,t]:[3,3];case 2:return n.sent(),t=this.next(t),[3,1];case 3:return[2]}})},e}();function mk(e,t,n,r){var a=r-n;if(a>0){var i=n+Math.floor(a/2),o=e[i],s=t[i],l=new yu(o,s);return l.left=mk(e,t,n,i),l.right=mk(e,t,i+1,r),l}return null}function Pge(e,t){for(var n=new yu(null,null),r=n,a=0;a<e.length;a++)r=r.next=new yu(e[a],t[a]);return r.next=null,n.next}function Ige(e){for(var t=e,n=[],r=!1,a=new yu(null,null),i=a;!r;)t?(n.push(t),t=t.left):n.length>0?(t=i=i.next=n.pop(),t=t.right):r=!0;return i.next=null,a.next}function gk(e,t,n){var r=n-t;if(r>0){var a=t+Math.floor(r/2),i=gk(e,t,a),o=e.head;return o.left=i,e.head=e.head.next,o.right=gk(e,a+1,n),o}return null}function Lge(e,t,n){for(var r=new yu(null,null),a=r,i=e,o=t;i!==null&&o!==null;)n(i.key,o.key)<0?(a.next=i,i=i.next):(a.next=o,o=o.next),a=a.next;return i!==null?a.next=i:o!==null&&(a.next=o),r.next}function vk(e,t,n,r,a){if(!(n>=r)){for(var i=e[n+r>>1],o=n-1,s=r+1;;){do o++;while(a(e[o],i)<0);do s--;while(a(e[s],i)>0);if(o>=s)break;var l=e[o];e[o]=e[s],e[s]=l,l=t[o],t[o]=t[s],t[s]=l}vk(e,t,n,s,a),vk(e,t,s+1,r,a)}}function So(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function wR(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ci(e,t,n){return t&&wR(e.prototype,t),n&&wR(e,n),e}var Gp=function(t,n){return t.ll.x<=n.x&&n.x<=t.ur.x&&t.ll.y<=n.y&&n.y<=t.ur.y},bk=function(t,n){if(n.ur.x<t.ll.x||t.ur.x<n.ll.x||n.ur.y<t.ll.y||t.ur.y<n.ll.y)return null;var r=t.ll.x<n.ll.x?n.ll.x:t.ll.x,a=t.ur.x<n.ur.x?t.ur.x:n.ur.x,i=t.ll.y<n.ll.y?n.ll.y:t.ll.y,o=t.ur.y<n.ur.y?t.ur.y:n.ur.y;return{ll:{x:r,y:i},ur:{x:a,y:o}}},Zl=Number.EPSILON;Zl===void 0&&(Zl=Math.pow(2,-52));var Nge=Zl*Zl,yk=function(t,n){if(-Zl<t&&t<Zl&&-Zl<n&&n<Zl)return 0;var r=t-n;return r*r<Nge*t*n?0:t<n?-1:1},Fge=function(){function e(){So(this,e),this.reset()}return ci(e,[{key:"reset",value:function(){this.xRounder=new kR,this.yRounder=new kR}},{key:"round",value:function(n,r){return{x:this.xRounder.round(n),y:this.yRounder.round(r)}}}]),e}(),kR=function(){function e(){So(this,e),this.tree=new qE,this.round(0)}return ci(e,[{key:"round",value:function(n){var r=this.tree.add(n),a=this.tree.prev(r);if(a!==null&&yk(r.key,a.key)===0)return this.tree.remove(n),a.key;var i=this.tree.next(r);return i!==null&&yk(r.key,i.key)===0?(this.tree.remove(n),i.key):n}}]),e}(),gm=new Fge,Mh=function(t,n){return t.x*n.y-t.y*n.x},wD=function(t,n){return t.x*n.x+t.y*n.y},ER=function(t,n,r){var a={x:n.x-t.x,y:n.y-t.y},i={x:r.x-t.x,y:r.y-t.y},o=Mh(a,i);return yk(o,0)},qv=function(t){return Math.sqrt(wD(t,t))},Dge=function(t,n,r){var a={x:n.x-t.x,y:n.y-t.y},i={x:r.x-t.x,y:r.y-t.y};return Mh(i,a)/qv(i)/qv(a)},Bge=function(t,n,r){var a={x:n.x-t.x,y:n.y-t.y},i={x:r.x-t.x,y:r.y-t.y};return wD(i,a)/qv(i)/qv(a)},SR=function(t,n,r){return n.y===0?null:{x:t.x+n.x/n.y*(r-t.y),y:r}},CR=function(t,n,r){return n.x===0?null:{x:r,y:t.y+n.y/n.x*(r-t.x)}},zge=function(t,n,r,a){if(n.x===0)return CR(r,a,t.x);if(a.x===0)return CR(t,n,r.x);if(n.y===0)return SR(r,a,t.y);if(a.y===0)return SR(t,n,r.y);var i=Mh(n,a);if(i==0)return null;var o={x:r.x-t.x,y:r.y-t.y},s=Mh(o,n)/i,l=Mh(o,a)/i,u=t.x+l*n.x,c=r.x+s*a.x,f=t.y+l*n.y,d=r.y+s*a.y,p=(u+c)/2,h=(f+d)/2;return{x:p,y:h}},gs=function(){ci(e,null,[{key:"compare",value:function(n,r){var a=e.comparePoints(n.point,r.point);return a!==0?a:(n.point!==r.point&&n.link(r),n.isLeft!==r.isLeft?n.isLeft?1:-1:Kv.compare(n.segment,r.segment))}},{key:"comparePoints",value:function(n,r){return n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0}}]);function e(t,n){So(this,e),t.events===void 0?t.events=[this]:t.events.push(this),this.point=t,this.isLeft=n}return ci(e,[{key:"link",value:function(n){if(n.point===this.point)throw new Error("Tried to link already linked events");for(var r=n.point.events,a=0,i=r.length;a<i;a++){var o=r[a];this.point.events.push(o),o.point=this.point}this.checkForConsuming()}},{key:"checkForConsuming",value:function(){for(var n=this.point.events.length,r=0;r<n;r++){var a=this.point.events[r];if(a.segment.consumedBy===void 0)for(var i=r+1;i<n;i++){var o=this.point.events[i];o.consumedBy===void 0&&a.otherSE.point.events===o.otherSE.point.events&&a.segment.consume(o.segment)}}}},{key:"getAvailableLinkedEvents",value:function(){for(var n=[],r=0,a=this.point.events.length;r<a;r++){var i=this.point.events[r];i!==this&&!i.segment.ringOut&&i.segment.isInResult()&&n.push(i)}return n}},{key:"getLeftmostComparator",value:function(n){var r=this,a=new Map,i=function(s){var l=s.otherSE;a.set(s,{sine:Dge(r.point,n.point,l.point),cosine:Bge(r.point,n.point,l.point)})};return function(o,s){a.has(o)||i(o),a.has(s)||i(s);var l=a.get(o),u=l.sine,c=l.cosine,f=a.get(s),d=f.sine,p=f.cosine;return u>=0&&d>=0?c<p?1:c>p?-1:0:u<0&&d<0?c<p?-1:c>p?1:0:d<u?-1:d>u?1:0}}}]),e}(),Uge=0,Kv=function(){ci(e,null,[{key:"compare",value:function(n,r){var a=n.leftSE.point.x,i=r.leftSE.point.x,o=n.rightSE.point.x,s=r.rightSE.point.x;if(s<a)return 1;if(o<i)return-1;var l=n.leftSE.point.y,u=r.leftSE.point.y,c=n.rightSE.point.y,f=r.rightSE.point.y;if(a<i){if(u<l&&u<c)return 1;if(u>l&&u>c)return-1;var d=n.comparePoint(r.leftSE.point);if(d<0)return 1;if(d>0)return-1;var p=r.comparePoint(n.rightSE.point);return p!==0?p:-1}if(a>i){if(l<u&&l<f)return-1;if(l>u&&l>f)return 1;var h=r.comparePoint(n.leftSE.point);if(h!==0)return h;var g=n.comparePoint(r.rightSE.point);return g<0?1:g>0?-1:1}if(l<u)return-1;if(l>u)return 1;if(o<s){var v=r.comparePoint(n.rightSE.point);if(v!==0)return v}if(o>s){var b=n.comparePoint(r.rightSE.point);if(b<0)return 1;if(b>0)return-1}if(o!==s){var y=c-l,x=o-a,k=f-u,T=s-i;if(y>x&&k<T)return 1;if(y<x&&k>T)return-1}return o>s?1:o<s||c<f?-1:c>f?1:n.id<r.id?-1:n.id>r.id?1:0}}]);function e(t,n,r,a){So(this,e),this.id=++Uge,this.leftSE=t,t.segment=this,t.otherSE=n,this.rightSE=n,n.segment=this,n.otherSE=t,this.rings=r,this.windings=a}return ci(e,[{key:"replaceRightSE",value:function(n){this.rightSE=n,this.rightSE.segment=this,this.rightSE.otherSE=this.leftSE,this.leftSE.otherSE=this.rightSE}},{key:"bbox",value:function(){var n=this.leftSE.point.y,r=this.rightSE.point.y;return{ll:{x:this.leftSE.point.x,y:n<r?n:r},ur:{x:this.rightSE.point.x,y:n>r?n:r}}}},{key:"vector",value:function(){return{x:this.rightSE.point.x-this.leftSE.point.x,y:this.rightSE.point.y-this.leftSE.point.y}}},{key:"isAnEndpoint",value:function(n){return n.x===this.leftSE.point.x&&n.y===this.leftSE.point.y||n.x===this.rightSE.point.x&&n.y===this.rightSE.point.y}},{key:"comparePoint",value:function(n){if(this.isAnEndpoint(n))return 0;var r=this.leftSE.point,a=this.rightSE.point,i=this.vector();if(r.x===a.x)return n.x===r.x?0:n.x<r.x?1:-1;var o=(n.y-r.y)/i.y,s=r.x+o*i.x;if(n.x===s)return 0;var l=(n.x-r.x)/i.x,u=r.y+l*i.y;return n.y===u?0:n.y<u?-1:1}},{key:"getIntersection",value:function(n){var r=this.bbox(),a=n.bbox(),i=bk(r,a);if(i===null)return null;var o=this.leftSE.point,s=this.rightSE.point,l=n.leftSE.point,u=n.rightSE.point,c=Gp(r,l)&&this.comparePoint(l)===0,f=Gp(a,o)&&n.comparePoint(o)===0,d=Gp(r,u)&&this.comparePoint(u)===0,p=Gp(a,s)&&n.comparePoint(s)===0;if(f&&c)return p&&!d?s:!p&&d?u:null;if(f)return d&&o.x===u.x&&o.y===u.y?null:o;if(c)return p&&s.x===l.x&&s.y===l.y?null:l;if(p&&d)return null;if(p)return s;if(d)return u;var h=zge(o,this.vector(),l,n.vector());return h===null||!Gp(i,h)?null:gm.round(h.x,h.y)}},{key:"split",value:function(n){var r=[],a=n.events!==void 0,i=new gs(n,!0),o=new gs(n,!1),s=this.rightSE;this.replaceRightSE(o),r.push(o),r.push(i);var l=new e(i,s,this.rings.slice(),this.windings.slice());return gs.comparePoints(l.leftSE.point,l.rightSE.point)>0&&l.swapEvents(),gs.comparePoints(this.leftSE.point,this.rightSE.point)>0&&this.swapEvents(),a&&(i.checkForConsuming(),o.checkForConsuming()),r}},{key:"swapEvents",value:function(){var n=this.rightSE;this.rightSE=this.leftSE,this.leftSE=n,this.leftSE.isLeft=!0,this.rightSE.isLeft=!1;for(var r=0,a=this.windings.length;r<a;r++)this.windings[r]*=-1}},{key:"consume",value:function(n){for(var r=this,a=n;r.consumedBy;)r=r.consumedBy;for(;a.consumedBy;)a=a.consumedBy;var i=e.compare(r,a);if(i!==0){if(i>0){var o=r;r=a,a=o}if(r.prev===a){var s=r;r=a,a=s}for(var l=0,u=a.rings.length;l<u;l++){var c=a.rings[l],f=a.windings[l],d=r.rings.indexOf(c);d===-1?(r.rings.push(c),r.windings.push(f)):r.windings[d]+=f}a.rings=null,a.windings=null,a.consumedBy=r,a.leftSE.consumedBy=r.leftSE,a.rightSE.consumedBy=r.rightSE}}},{key:"prevInResult",value:function(){return this._prevInResult!==void 0?this._prevInResult:(this.prev?this.prev.isInResult()?this._prevInResult=this.prev:this._prevInResult=this.prev.prevInResult():this._prevInResult=null,this._prevInResult)}},{key:"beforeState",value:function(){if(this._beforeState!==void 0)return this._beforeState;if(!this.prev)this._beforeState={rings:[],windings:[],multiPolys:[]};else{var n=this.prev.consumedBy||this.prev;this._beforeState=n.afterState()}return this._beforeState}},{key:"afterState",value:function(){if(this._afterState!==void 0)return this._afterState;var n=this.beforeState();this._afterState={rings:n.rings.slice(0),windings:n.windings.slice(0),multiPolys:[]};for(var r=this._afterState.rings,a=this._afterState.windings,i=this._afterState.multiPolys,o=0,s=this.rings.length;o<s;o++){var l=this.rings[o],u=this.windings[o],c=r.indexOf(l);c===-1?(r.push(l),a.push(u)):a[c]+=u}for(var f=[],d=[],p=0,h=r.length;p<h;p++)if(a[p]!==0){var g=r[p],v=g.poly;if(d.indexOf(v)===-1)if(g.isExterior)f.push(v);else{d.indexOf(v)===-1&&d.push(v);var b=f.indexOf(g.poly);b!==-1&&f.splice(b,1)}}for(var y=0,x=f.length;y<x;y++){var k=f[y].multiPoly;i.indexOf(k)===-1&&i.push(k)}return this._afterState}},{key:"isInResult",value:function(){if(this.consumedBy)return!1;if(this._isInResult!==void 0)return this._isInResult;var n=this.beforeState().multiPolys,r=this.afterState().multiPolys;switch(Vo.type){case"union":{var a=n.length===0,i=r.length===0;this._isInResult=a!==i;break}case"intersection":{var o,s;n.length<r.length?(o=n.length,s=r.length):(o=r.length,s=n.length),this._isInResult=s===Vo.numMultiPolys&&o<s;break}case"xor":{var l=Math.abs(n.length-r.length);this._isInResult=l%2===1;break}case"difference":{var u=function(f){return f.length===1&&f[0].isSubject};this._isInResult=u(n)!==u(r);break}default:throw new Error("Unrecognized operation type found ".concat(Vo.type))}return this._isInResult}}],[{key:"fromRing",value:function(n,r,a){var i,o,s,l=gs.comparePoints(n,r);if(l<0)i=n,o=r,s=1;else if(l>0)i=r,o=n,s=-1;else throw new Error("Tried to create degenerate segment at [".concat(n.x,", ").concat(n.y,"]"));var u=new gs(i,!0),c=new gs(o,!1);return new e(u,c,[a],[s])}}]),e}(),TR=function(){function e(t,n,r){if(So(this,e),!Array.isArray(t)||t.length===0)throw new Error("Input geometry is not a valid Polygon or MultiPolygon");if(this.poly=n,this.isExterior=r,this.segments=[],typeof t[0][0]!="number"||typeof t[0][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");var a=gm.round(t[0][0],t[0][1]);this.bbox={ll:{x:a.x,y:a.y},ur:{x:a.x,y:a.y}};for(var i=a,o=1,s=t.length;o<s;o++){if(typeof t[o][0]!="number"||typeof t[o][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");var l=gm.round(t[o][0],t[o][1]);l.x===i.x&&l.y===i.y||(this.segments.push(Kv.fromRing(i,l,this)),l.x<this.bbox.ll.x&&(this.bbox.ll.x=l.x),l.y<this.bbox.ll.y&&(this.bbox.ll.y=l.y),l.x>this.bbox.ur.x&&(this.bbox.ur.x=l.x),l.y>this.bbox.ur.y&&(this.bbox.ur.y=l.y),i=l)}(a.x!==i.x||a.y!==i.y)&&this.segments.push(Kv.fromRing(i,a,this))}return ci(e,[{key:"getSweepEvents",value:function(){for(var n=[],r=0,a=this.segments.length;r<a;r++){var i=this.segments[r];n.push(i.leftSE),n.push(i.rightSE)}return n}}]),e}(),$ge=function(){function e(t,n){if(So(this,e),!Array.isArray(t))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");this.exteriorRing=new TR(t[0],this,!0),this.bbox={ll:{x:this.exteriorRing.bbox.ll.x,y:this.exteriorRing.bbox.ll.y},ur:{x:this.exteriorRing.bbox.ur.x,y:this.exteriorRing.bbox.ur.y}},this.interiorRings=[];for(var r=1,a=t.length;r<a;r++){var i=new TR(t[r],this,!1);i.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=i.bbox.ll.x),i.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=i.bbox.ll.y),i.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=i.bbox.ur.x),i.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=i.bbox.ur.y),this.interiorRings.push(i)}this.multiPoly=n}return ci(e,[{key:"getSweepEvents",value:function(){for(var n=this.exteriorRing.getSweepEvents(),r=0,a=this.interiorRings.length;r<a;r++)for(var i=this.interiorRings[r].getSweepEvents(),o=0,s=i.length;o<s;o++)n.push(i[o]);return n}}]),e}(),AR=function(){function e(t,n){if(So(this,e),!Array.isArray(t))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");try{typeof t[0][0][0]=="number"&&(t=[t])}catch{}this.polys=[],this.bbox={ll:{x:Number.POSITIVE_INFINITY,y:Number.POSITIVE_INFINITY},ur:{x:Number.NEGATIVE_INFINITY,y:Number.NEGATIVE_INFINITY}};for(var r=0,a=t.length;r<a;r++){var i=new $ge(t[r],this);i.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=i.bbox.ll.x),i.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=i.bbox.ll.y),i.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=i.bbox.ur.x),i.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=i.bbox.ur.y),this.polys.push(i)}this.isSubject=n}return ci(e,[{key:"getSweepEvents",value:function(){for(var n=[],r=0,a=this.polys.length;r<a;r++)for(var i=this.polys[r].getSweepEvents(),o=0,s=i.length;o<s;o++)n.push(i[o]);return n}}]),e}(),Vge=function(){ci(e,null,[{key:"factory",value:function(n){for(var r=[],a=0,i=n.length;a<i;a++){var o=n[a];if(!(!o.isInResult()||o.ringOut)){for(var s=null,l=o.leftSE,u=o.rightSE,c=[l],f=l.point,d=[];s=l,l=u,c.push(l),l.point!==f;)for(;;){var p=l.getAvailableLinkedEvents();if(p.length===0){var h=c[0].point,g=c[c.length-1].point;throw new Error("Unable to complete output ring starting at [".concat(h.x,",")+" ".concat(h.y,"]. Last matching segment found ends at")+" [".concat(g.x,", ").concat(g.y,"]."))}if(p.length===1){u=p[0].otherSE;break}for(var v=null,b=0,y=d.length;b<y;b++)if(d[b].point===l.point){v=b;break}if(v!==null){var x=d.splice(v)[0],k=c.splice(x.index);k.unshift(k[0].otherSE),r.push(new e(k.reverse()));continue}d.push({index:c.length,point:l.point});var T=l.getLeftmostComparator(s);u=p.sort(T)[0].otherSE;break}r.push(new e(c))}}return r}}]);function e(t){So(this,e),this.events=t;for(var n=0,r=t.length;n<r;n++)t[n].segment.ringOut=this;this.poly=null}return ci(e,[{key:"getGeom",value:function(){for(var n=this.events[0].point,r=[n],a=1,i=this.events.length-1;a<i;a++){var o=this.events[a].point,s=this.events[a+1].point;ER(o,n,s)!==0&&(r.push(o),n=o)}if(r.length===1)return null;var l=r[0],u=r[1];ER(l,n,u)===0&&r.shift(),r.push(r[0]);for(var c=this.isExteriorRing()?1:-1,f=this.isExteriorRing()?0:r.length-1,d=this.isExteriorRing()?r.length:-1,p=[],h=f;h!=d;h+=c)p.push([r[h].x,r[h].y]);return p}},{key:"isExteriorRing",value:function(){if(this._isExteriorRing===void 0){var n=this.enclosingRing();this._isExteriorRing=n?!n.isExteriorRing():!0}return this._isExteriorRing}},{key:"enclosingRing",value:function(){return this._enclosingRing===void 0&&(this._enclosingRing=this._calcEnclosingRing()),this._enclosingRing}},{key:"_calcEnclosingRing",value:function(){for(var n=this.events[0],r=1,a=this.events.length;r<a;r++){var i=this.events[r];gs.compare(n,i)>0&&(n=i)}for(var o=n.segment.prevInResult(),s=o?o.prevInResult():null;;){if(!o)return null;if(!s)return o.ringOut;if(s.ringOut!==o.ringOut)return s.ringOut.enclosingRing()!==o.ringOut?o.ringOut:o.ringOut.enclosingRing();o=s.prevInResult(),s=o?o.prevInResult():null}}}]),e}(),OR=function(){function e(t){So(this,e),this.exteriorRing=t,t.poly=this,this.interiorRings=[]}return ci(e,[{key:"addInterior",value:function(n){this.interiorRings.push(n),n.poly=this}},{key:"getGeom",value:function(){var n=[this.exteriorRing.getGeom()];if(n[0]===null)return null;for(var r=0,a=this.interiorRings.length;r<a;r++){var i=this.interiorRings[r].getGeom();i!==null&&n.push(i)}return n}}]),e}(),jge=function(){function e(t){So(this,e),this.rings=t,this.polys=this._composePolys(t)}return ci(e,[{key:"getGeom",value:function(){for(var n=[],r=0,a=this.polys.length;r<a;r++){var i=this.polys[r].getGeom();i!==null&&n.push(i)}return n}},{key:"_composePolys",value:function(n){for(var r=[],a=0,i=n.length;a<i;a++){var o=n[a];if(!o.poly)if(o.isExteriorRing())r.push(new OR(o));else{var s=o.enclosingRing();s.poly||r.push(new OR(s)),s.poly.addInterior(o)}}return r}}]),e}(),Gge=function(){function e(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Kv.compare;So(this,e),this.queue=t,this.tree=new qE(n),this.segments=[]}return ci(e,[{key:"process",value:function(n){var r=n.segment,a=[];if(n.consumedBy)return n.isLeft?this.queue.remove(n.otherSE):this.tree.remove(r),a;var i=n.isLeft?this.tree.insert(r):this.tree.find(r);if(!i)throw new Error("Unable to find segment #".concat(r.id," ")+"[".concat(r.leftSE.point.x,", ").concat(r.leftSE.point.y,"] -> ")+"[".concat(r.rightSE.point.x,", ").concat(r.rightSE.point.y,"] ")+"in SweepLine tree. Please submit a bug report.");for(var o=i,s=i,l=void 0,u=void 0;l===void 0;)o=this.tree.prev(o),o===null?l=null:o.key.consumedBy===void 0&&(l=o.key);for(;u===void 0;)s=this.tree.next(s),s===null?u=null:s.key.consumedBy===void 0&&(u=s.key);if(n.isLeft){var c=null;if(l){var f=l.getIntersection(r);if(f!==null&&(r.isAnEndpoint(f)||(c=f),!l.isAnEndpoint(f)))for(var d=this._splitSafely(l,f),p=0,h=d.length;p<h;p++)a.push(d[p])}var g=null;if(u){var v=u.getIntersection(r);if(v!==null&&(r.isAnEndpoint(v)||(g=v),!u.isAnEndpoint(v)))for(var b=this._splitSafely(u,v),y=0,x=b.length;y<x;y++)a.push(b[y])}if(c!==null||g!==null){var k=null;if(c===null)k=g;else if(g===null)k=c;else{var T=gs.comparePoints(c,g);k=T<=0?c:g}this.queue.remove(r.rightSE),a.push(r.rightSE);for(var C=r.split(k),I=0,P=C.length;I<P;I++)a.push(C[I])}a.length>0?(this.tree.remove(r),a.push(n)):(this.segments.push(r),r.prev=l)}else{if(l&&u){var j=l.getIntersection(u);if(j!==null){if(!l.isAnEndpoint(j))for(var A=this._splitSafely(l,j),S=0,M=A.length;S<M;S++)a.push(A[S]);if(!u.isAnEndpoint(j))for(var O=this._splitSafely(u,j),R=0,G=O.length;R<G;R++)a.push(O[R])}}this.tree.remove(r)}return a}},{key:"_splitSafely",value:function(n,r){this.tree.remove(n);var a=n.rightSE;this.queue.remove(a);var i=n.split(r);return i.push(a),n.consumedBy===void 0&&this.tree.insert(n),i}}]),e}(),MR=typeof process!="undefined"&&{}.POLYGON_CLIPPING_MAX_QUEUE_SIZE||1e6,Hge=typeof process!="undefined"&&{}.POLYGON_CLIPPING_MAX_SWEEPLINE_SEGMENTS||1e6,Wge=function(){function e(){So(this,e)}return ci(e,[{key:"run",value:function(n,r,a){Vo.type=n,gm.reset();for(var i=[new AR(r,!0)],o=0,s=a.length;o<s;o++)i.push(new AR(a[o],!1));if(Vo.numMultiPolys=i.length,Vo.type==="difference")for(var l=i[0],u=1;u<i.length;)bk(i[u].bbox,l.bbox)!==null?u++:i.splice(u,1);if(Vo.type==="intersection"){for(var c=0,f=i.length;c<f;c++)for(var d=i[c],p=c+1,h=i.length;p<h;p++)if(bk(d.bbox,i[p].bbox)===null)return[]}for(var g=new qE(gs.compare),v=0,b=i.length;v<b;v++)for(var y=i[v].getSweepEvents(),x=0,k=y.length;x<k;x++)if(g.insert(y[x]),g.size>MR)throw new Error("Infinite loop when putting segment endpoints in a priority queue (queue size too big). Please file a bug report.");for(var T=new Gge(g),C=g.size,I=g.pop();I;){var P=I.key;if(g.size===C){var j=P.segment;throw new Error("Unable to pop() ".concat(P.isLeft?"left":"right"," SweepEvent ")+"[".concat(P.point.x,", ").concat(P.point.y,"] from segment #").concat(j.id," ")+"[".concat(j.leftSE.point.x,", ").concat(j.leftSE.point.y,"] -> ")+"[".concat(j.rightSE.point.x,", ").concat(j.rightSE.point.y,"] from queue. ")+"Please file a bug report.")}if(g.size>MR)throw new Error("Infinite loop when passing sweep line over endpoints (queue size too big). Please file a bug report.");if(T.segments.length>Hge)throw new Error("Infinite loop when passing sweep line over endpoints (too many sweep line segments). Please file a bug report.");for(var A=T.process(P),S=0,M=A.length;S<M;S++){var O=A[S];O.consumedBy===void 0&&g.insert(O)}C=g.size,I=g.pop()}gm.reset();var R=Vge.factory(T.segments),G=new jge(R);return G.getGeom()}}]),e}(),Vo=new Wge,Yge=function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];return Vo.run("union",t,r)},Xge=function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];return Vo.run("intersection",t,r)},Zge=function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];return Vo.run("xor",t,r)},qge=function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];return Vo.run("difference",t,r)},Kge={union:Yge,intersection:Xge,xor:Zge,difference:qge};function Qge(e,t,n){n===void 0&&(n={});var r=_T(e),a=_T(t),i=Kge.union(r.coordinates,a.coordinates);return i.length===0?null:i.length===1?fE(i[0],n.properties):rW(i,n.properties)}function RR(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function s_(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?RR(Object(n),!0).forEach(function(r){m(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):RR(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var Wm=function(){function e(t){Ae(this,e),m(this,"type",void 0),m(this,"parentLayer",void 0),m(this,"mapService",void 0),m(this,"rendererService",void 0),m(this,"outSideEventTimer",null),m(this,"zoomOffset",void 0),m(this,"tilesetManager",void 0),m(this,"layers",void 0),m(this,"eventCache",{click:0,mousemove:0,mouseup:0,mousedown:0,contextmenu:0}),this.parentLayer=t.parent,this.mapService=t.mapService,this.rendererService=t.rendererService;var n=this.parentLayer.getSource();this.zoomOffset=n.parser.zoomOffset||0,this.tilesetManager=n.tileset}return Oe(e,[{key:"createTile",value:function(n,r){return{layers:[],layerIDList:[]}}},{key:"getFeatureData",value:function(n,r){var a={features:[],featureId:null,vectorTileLayer:null,source:null},i=r.sourceLayer,o=r.featureId;if(!i)return a;var s=n.data.layers[i],l=s==null?void 0:s.features;if(Array.isArray(l)&&l.length>0){var u=new $m({type:"FeatureCollection",features:l},{parser:{type:"geojson",featureId:o}});return{features:l,featureId:o,vectorTileLayer:s,source:u}}else return a}},{key:"createLayer",value:function(n){var r=n.L7Layer,a=n.tile,i=n.initOptions,o=n.vectorTileLayer,s=n.source,l=i.mask,u=i.color,c=i.layerType,f=i.size,d=i.shape,p=r||Age,h=new p(s_({visible:a.isVisible,tileOrigin:o==null?void 0:o.l7TileOrigin,coord:o==null?void 0:o.l7TileCoord},this.getLayerInitOption(i)));h.isVector&&(this.emitEvent([h]),h.type=c,h.select(!0)),h.source(s),this.setScale(h),this.setStyleAttributeField(h,"shape",d),this.setStyleAttributeField(h,"color",u),this.setStyleAttributeField(h,"size",f);var g=[h];if(l&&h.isVector){var v=new hD().source({type:"FeatureCollection",features:[a.bboxPolygon]}).shape("fill");g.push(v),h.addMaskLayer(v)}return mD(this.parentLayer,g),this.layers=[h],h}},{key:"updateStyle",value:function(n){return""}},{key:"getDefautStyleAttributeField",value:function(n,r){switch(r){case"size":return 2;case"color":return"#fff";case"shape":return gD(this.parentLayer.type,n);default:return""}}},{key:"setStyleAttributeField",value:function(n,r,a){if(Array.isArray(a)){n[r].apply(n,$e(a));return}if(typeof a=="string"){n[r](a);return}var i=this.getDefautStyleAttributeField(n,r);if(!a)return n[r](i),n;var o=this.parseScaleValue(a,r);o.length===0?n[r](i):n[r].apply(n,$e(o))}},{key:"parseScaleValue",value:function(n,r){if(r==="shape")return typeof n=="string"?[n]:n!=null&&n.field?[n==null?void 0:n.field]:[];var a=n,i=a.field,o=a.values,s=a.callback;return i&&o&&Array.isArray(o)?[i,o]:i&&s?[i,s]:i?[i]:[]}},{key:"getTile",value:function(n,r){var a=this.mapService.getZoom(),i=Math.ceil(a)+this.zoomOffset,o=Xw(n,r,i),s=this.tilesetManager.tiles.filter(function(u){return u.key==="".concat(o[0],",").concat(o[1],",").concat(i)}),l=s[0];return l}},{key:"emitEvent",value:function(n,r){var a=this;n.map(function(i){i.once("inited",function(){i.on("click",function(o){if(a.eventCache.click=1,a.parentLayer.type==="RasterLayer"){var s=o.lngLat,l=s.lng,u=s.lat,c=a.getTile(l,u);a.getFeatureAndEmitEvent(i,"subLayerClick",o,r,c)}else a.getFeatureAndEmitEvent(i,"subLayerClick",o)}),i.on("mousemove",function(o){if(a.eventCache.mousemove=1,a.parentLayer.type==="RasterLayer"){var s=o.lngLat,l=s.lng,u=s.lat,c=a.getTile(l,u);a.getFeatureAndEmitEvent(i,"subLayerMouseMove",o,r,c)}else a.getFeatureAndEmitEvent(i,"subLayerMouseMove",o)}),i.on("mouseup",function(o){a.eventCache.mouseup=1,a.getFeatureAndEmitEvent(i,"subLayerMouseUp",o)}),i.on("mouseenter",function(o){if(a.parentLayer.type==="RasterLayer"){var s=o.lngLat,l=s.lng,u=s.lat,c=a.getTile(l,u);a.getFeatureAndEmitEvent(i,"subLayerMouseMove",o,r,c)}else a.getFeatureAndEmitEvent(i,"subLayerMouseEnter",o)}),i.on("mouseout",function(o){a.getFeatureAndEmitEvent(i,"subLayerMouseOut",o)}),i.on("mousedown",function(o){a.eventCache.mousedown=1,a.getFeatureAndEmitEvent(i,"subLayerMouseDown",o)}),i.on("contextmenu",function(o){a.eventCache.contextmenu=1,a.getFeatureAndEmitEvent(i,"subLayerContextmenu",o)}),i.on("unclick",function(o){return a.handleOutsideEvent("click","subLayerUnClick",i,o)}),i.on("unmouseup",function(o){return a.handleOutsideEvent("mouseup","subLayerUnMouseUp",i,o)}),i.on("unmousedown",function(o){return a.handleOutsideEvent("mousedown","subLayerUnMouseDown",i,o)}),i.on("uncontextmenu",function(o){return a.handleOutsideEvent("contextmenu","subLayerUnContextmenu",i,o)})})})}},{key:"getCombineFeature",value:function(n){var r=null,a=n[0];return n.map(function(i){var o=fE(i.coordinates);r===null&&(r=o),r=Qge(r,o)}),a&&(r.properties=s_({},a)),r}},{key:"getFeatureAndEmitEvent",value:function(n,r,a,i,o){if(i===!1)a.value=K0e(o,this.mapService,a.x,a.y);else{var s=a.featureId,l=this.getAllFeatures(s);try{a.feature=this.getCombineFeature(l)}catch{console.warn("Combine Featuer Err! Return First Feature!"),a.feature=l[0]}}this.parentLayer.emit(r,a)}},{key:"setScale",value:function(n){var r=this.parentLayer.tileLayer.scaleField,a=Object.keys(r);a.map(function(i){n.scale(i,r[i])})}},{key:"getAllFeatures",value:function(n){var r=this.parentLayer.tileLayer.children,a=[];return r.map(function(i){var o=i.getSource();o.data.dataArray.map(function(s){s._id===n&&a.push(s)})}),a}},{key:"getLayerInitOption",value:function(n){var r=s_({},n);return delete r.color,delete r.shape,delete r.size,delete r.coords,delete r.sourceLayer,delete r.coords,r}},{key:"handleOutsideEvent",value:function(n,r,a,i){var o=this;this.outSideEventTimer&&(clearTimeout(this.outSideEventTimer),this.outSideEventTimer=null),this.outSideEventTimer=setTimeout(function(){o.eventCache[n]>0?o.eventCache[n]=0:o.getFeatureAndEmitEvent(a,r,i)},64)}}]),e}();function Jge(e){var t=eve();return function(){var r=ke(e),a;if(t){var i=ke(this).constructor;a=Reflect.construct(r,arguments,i)}else a=r.apply(this,arguments);return It(this,a)}}function eve(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var tve=function(e){Tt(n,e);var t=Jge(n);function n(r){var a;return Ae(this,n),a=t.call(this,r),m(D(a),"parentLayer",void 0),a.parentLayer=r.parent,a}return Oe(n,[{key:"createTile",value:function(a,i){var o=this.getFeatureData(a,i),s=o.features,l=o.vectorTileLayer,u=o.source;if(s.length===0)return{layers:[],layerIDList:[]};var c=this.createLayer({tile:a,initOptions:i,vectorTileLayer:l,source:u});return{layers:[c],layerIDList:[c.id]}}}]),n}(Wm);function nve(e){var t=rve();return function(){var r=ke(e),a;if(t){var i=ke(this).constructor;a=Reflect.construct(r,arguments,i)}else a=r.apply(this,arguments);return It(this,a)}}function rve(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var ave=function(e){Tt(n,e);var t=nve(n);function n(r){var a;return Ae(this,n),a=t.call(this,r),m(D(a),"parentLayer",void 0),a.parentLayer=r.parent,a}return Oe(n,[{key:"createTile",value:function(a,i){var o=this.getFeatureData(a,i),s=o.features,l=o.vectorTileLayer,u=o.source;if(s.length===0)return{layers:[],layerIDList:[]};var c=this.createLayer({tile:a,initOptions:i,vectorTileLayer:l,source:u});return{layers:[c],layerIDList:[c.id]}}}]),n}(Wm);function ive(e){var t=ove();return function(){var r=ke(e),a;if(t){var i=ke(this).constructor;a=Reflect.construct(r,arguments,i)}else a=r.apply(this,arguments);return It(this,a)}}function ove(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var sve=function(e){Tt(n,e);var t=ive(n);function n(r){var a;return Ae(this,n),a=t.call(this,r),m(D(a),"parentLayer",void 0),a.parentLayer=r.parent,a}return Oe(n,[{key:"createTile",value:function(a,i){var o=this.getFeatureData(a,i),s=o.features,l=o.vectorTileLayer,u=o.source;if(s.length===0)return{layers:[],layerIDList:[]};var c=this.createLayer({tile:a,initOptions:i,vectorTileLayer:l,source:u});return{layers:[c],layerIDList:[c.id]}}}]),n}(Wm);function lve(e){var t=uve();return function(){var r=ke(e),a;if(t){var i=ke(this).constructor;a=Reflect.construct(r,arguments,i)}else a=r.apply(this,arguments);return It(this,a)}}function uve(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var PR=function(e){Tt(n,e);var t=lve(n);function n(r){var a;return Ae(this,n),a=t.call(this,r),m(D(a),"parentLayer",void 0),a.parentLayer=r.parent,a}return Oe(n,[{key:"createTile",value:function(a,i){var o=new $m(a.data,{parser:{type:"image",extent:a.bounds}}),s=this.createLayer({L7Layer:U0e,tile:a,initOptions:i,source:o});return{layers:[s],layerIDList:[s.id]}}}]),n}(Wm);function cve(e){var t=fve();return function(){var r=ke(e),a;if(t){var i=ke(this).constructor;a=Reflect.construct(r,arguments,i)}else a=r.apply(this,arguments);return It(this,a)}}function fve(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var dve=`precision mediump float;
uniform float u_opacity: 1.0;
uniform sampler2D u_texture;
uniform sampler2D u_colorTexture;
uniform float u_min;
uniform float u_max;
uniform vec2 u_domain;
uniform float u_noDataValue;
uniform bool u_clampLow: true;
uniform bool u_clampHigh: true;
varying vec2 v_texCoord;

void main() {

  float value = texture2D(u_texture,vec2(v_texCoord.x,v_texCoord.y)).r;
  if (value == u_noDataValue)
    gl_FragColor = vec4(0.0, 0, 0, 0.0);
  else if ((!u_clampLow && value < u_domain[0]) || (!u_clampHigh && value > u_domain[1]))
    gl_FragColor = vec4(0, 0, 0, 0);
  else {
    float normalisedValue =(value - u_domain[0]) / (u_domain[1] -u_domain[0]);
    vec4 color = texture2D(u_colorTexture,vec2(normalisedValue, 0));
    gl_FragColor = color;
    gl_FragColor.a =  gl_FragColor.a * u_opacity ;
  }


}
`,pve=`precision highp float;
uniform mat4 u_ModelMatrix;
uniform mat4 u_Mvp;
attribute vec3 a_Position;
attribute vec2 a_Uv;
varying vec2 v_texCoord;
#pragma include "projection"
void main() {
   v_texCoord = a_Uv;
   vec4 project_pos = project_position(vec4(a_Position, 1.0));
   gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy,0., 1.0));

   if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
      gl_Position = u_Mvp * (vec4(project_pos.xy,0., 1.0));
   } else {
      gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy,0., 1.0));
   }
}
`,hve=function(e){Tt(n,e);var t=cve(n);function n(){var r;Ae(this,n);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return r=t.call.apply(t,[this].concat(i)),m(D(r),"texture",void 0),m(D(r),"colorTexture",void 0),m(D(r),"rampColors",void 0),r}return Oe(n,[{key:"getUninforms",value:function(){var a=this.layer.getLayerConfig(),i=a.opacity,o=i===void 0?1:i,s=a.clampLow,l=s===void 0?!0:s,u=a.clampHigh,c=u===void 0?!0:u,f=a.noDataValue,d=f===void 0?-9999999:f,p=a.domain,h=p===void 0?[0,1]:p,g=a.rampColors;return qs(this.rampColors,g)||(this.updateColorTexure(),this.rampColors=g),{u_opacity:o||1,u_texture:this.texture,u_domain:h,u_clampLow:l,u_clampHigh:typeof c!="undefined"?c:l,u_noDataValue:d,u_colorTexture:this.colorTexture}}},{key:"initModels",value:function(){var a=this.layer.getLayerConfig(),i=a.mask,o=i===void 0?!1:i,s=a.maskInside,l=s===void 0?!0:s,u=a.rampColorsData,c=a.rampColors,f=this.layer.getSource(),d=this.rendererService.createTexture2D,p=f.data.dataArray[0];this.texture=d({data:p.data,width:p.width,height:p.height,format:V.LUMINANCE,type:V.FLOAT});var h=u||$v(c);return this.colorTexture=d({data:h.data,width:h.width,height:h.height,flipY:!1}),[this.layer.buildLayerModel({moduleName:"RasterImageData",vertexShader:pve,fragmentShader:dve,triangulation:pD,primitive:V.TRIANGLES,depth:{enable:!1},blend:this.getBlend(),stencil:Vi(o,l)})]}},{key:"buildModels",value:function(){return this.initModels()}},{key:"clearModels",value:function(){var a,i;(a=this.texture)===null||a===void 0||a.destroy(),(i=this.colorTexture)===null||i===void 0||i.destroy()}},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"uv",type:kn.Attribute,descriptor:{name:"a_Uv",buffer:{usage:V.DYNAMIC_DRAW,data:[],type:V.FLOAT},size:2,update:function(i,o,s,l){return[s[3],s[4]]}}})}},{key:"updateColorTexure",value:function(){var a=this.rendererService.createTexture2D,i=this.layer.getLayerConfig(),o=i.rampColors,s=$v(o);this.colorTexture=a({data:s.data,width:s.width,height:s.height,flipY:!1})}}]),n}(Qa);function mve(e){var t=gve();return function(){var r=ke(e),a;if(t){var i=ke(this).constructor;a=Reflect.construct(r,arguments,i)}else a=r.apply(this,arguments);return It(this,a)}}function gve(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var vve=function(e){Tt(n,e);var t=mve(n);function n(){var r;Ae(this,n);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return r=t.call.apply(t,[this].concat(i)),m(D(r),"type",r.layerType),r}return Oe(n,[{key:"buildModels",value:function(){var a=this.getModelType();this.layerModel=new a(this),this.models=this.layerModel.initModels()}},{key:"rebuildModels",value:function(){this.models=this.layerModel.buildModels()}},{key:"getModelType",value:function(){return hve}},{key:"getConfigSchema",value:function(){return{properties:{opacity:{type:"number",minimum:0,maximum:1}}}}},{key:"getDefaultConfig",value:function(){return{}}}]),n}(Gm);function bve(e){var t=yve();return function(){var r=ke(e),a;if(t){var i=ke(this).constructor;a=Reflect.construct(r,arguments,i)}else a=r.apply(this,arguments);return It(this,a)}}function yve(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var xve=function(e){Tt(n,e);var t=bve(n);function n(r){var a;return Ae(this,n),a=t.call(this,r),m(D(a),"parentLayer",void 0),a.parentLayer=r.parent,a}return Oe(n,[{key:"createTile",value:function(a,i){var o=i.opacity,s=i.domain,l=i.clampHigh,u=i.clampLow,c=i.rampColors,f=i.rampColorsData,d=i.mask,p=a.data;if(!p.data)return console.warn("raster data not exist!"),{layers:[],layerIDList:[]};var h=new vve({visible:a.isVisible,mask:d}).source(p.data,{parser:{type:"raster",width:p.width,height:p.height,extent:a.bboxPolygon.bbox}}).style({opacity:o,domain:s,clampHigh:l,clampLow:u,rampColors:c,rampColorsData:f});return this.emitEvent([h],!1),mD(this.parentLayer,[h]),{layers:[h],layerIDList:[h.id]}}}]),n}(Wm);function _ve(e,t){switch(e){case"PolygonLayer":return sve;case"LineLayer":return tve;case"PointLayer":return ave;case"RasterLayer":return t.dataType==="arraybuffer"?xve:PR;default:return console.warn("Current Tile Not Exist!"),PR}}function wve(e){var t=kve();return function(){var r=ke(e),a;if(t){var i=ke(this).constructor;a=Reflect.construct(r,arguments,i)}else a=r.apply(this,arguments);return It(this,a)}}function kve(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var Eve=function(e){Tt(n,e);var t=wve(n);function n(){var r;return Ae(this,n),r=t.call(this),m(D(r),"cacheConfig",void 0),m(D(r),"checkConfigList",[]),r.cacheConfig=new Map,r}return Oe(n,[{key:"setConfig",value:function(a,i){this.checkConfigList.includes(a)||this.checkConfigList.push(a),this.cacheConfig.set(a,i)}},{key:"removeConfig",value:function(a){var i=this.checkConfigList.indexOf(a);i>-1&&(this.cacheConfig.delete(a),this.checkConfigList.splice(i,1))}},{key:"checkConfig",value:function(a){var i=this;if(!!a.inited){var o=a.getLayerConfig(),s=[];this.checkConfigList.map(function(l){var u=i.cacheConfig.get(l),c;if(["color","size","shape"].includes(l)){var f;c=(f=a.getAttribute(l))===null||f===void 0?void 0:f.scale}else{if(!(l in o))return;c=o[l]}qs(u,c)||(s.push(l),i.setConfig(l,c))}),s.length>0&&(console.warn("tile config cache update!",s),this.emit("updateConfig",s))}}},{key:"getAttributeScale",value:function(a,i){var o=a.getAttribute(i),s={field:void 0,values:void 0,callback:void 0};if(o&&o.scale){var l=o.scale,u=l.field,c=l.values,f=l.callback;s.field=u,s.values=c,s.callback=f}return s}}]),n}(EE);function Sve(e){var t=Cve();return function(){var r=ke(e),a;if(t){var i=ke(this).constructor;a=Reflect.construct(r,arguments,i)}else a=r.apply(this,arguments);return It(this,a)}}function Cve(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var Tve=function(e){Tt(n,e);var t=Sve(n);function n(r,a,i,o,s){var l;return Ae(this,n),l=t.call(this),m(D(l),"isLastPicked",!1),m(D(l),"rendererService",void 0),m(D(l),"pickingService",void 0),m(D(l),"layerService",void 0),m(D(l),"children",void 0),m(D(l),"parent",void 0),l.parent=r,l.rendererService=a,l.pickingService=i,l.layerService=s,l.children=o,l}return Oe(n,[{key:"normalRender",value:function(a){var i=this;a.filter(function(o){return o.inited}).filter(function(o){return o.isVisible()}).map(function(o){o.hooks.beforeRenderData.call(),o.hooks.beforeRender.call(),o.masks.length>0&&(i.rendererService.clear({stencil:0,depth:1,framebuffer:null}),o.masks.map(function(s){s.hooks.beforeRender.call(),s.render(),s.hooks.afterRender.call()})),o.render(),o.hooks.afterRender.call()})}},{key:"pickRender",value:function(a,i){var o=this;this.parent.type==="RasterLayer"&&this.renderMask(this.parent);var s=a.filter(function(l){return o.parent.needPick(i.type)&&l.inited&&l.isVisible()}).some(function(l){l.hooks.beforePickingEncode.call(),l.masks.length>0&&(o.rendererService.clear({stencil:0,depth:1,framebuffer:null}),l.masks.map(function(c){c.hooks.beforeRender.call(),c.render(),c.hooks.afterRender.call()})),l.renderModels(!0),l.hooks.afterPickingEncode.call();var u=o.pickingService.pickFromPickingFBO(l,i);return u&&o.parent.type!=="RasterLayer"&&(o.emit("pick",{type:i.type,pickedColors:o.pickingService.pickedColors,layer:l}),o.pickingService.pickedTileLayers=[o.parent]),u});return this.parent.type!=="RasterLayer"&&!s&&this.isLastPicked&&i.type!=="click"&&(this.pickingService.pickedTileLayers=[],this.emit("unpick",{}),this.beforeHighlight([0,0,0])),this.isLastPicked=s,s}},{key:"clearPick",value:function(){this.children.filter(function(a){return a.inited&&a.isVisible()}).map(function(a){a.hooks.beforeSelect.call([0,0,0])}),this.pickingService.pickedTileLayers=[]}},{key:"beforeHighlight",value:function(a){this.children.filter(function(i){return i.inited&&i.isVisible()}).map(function(i){i.hooks.beforeHighlight.call(a)})}},{key:"beforeSelect",value:function(a){this.children.filter(function(i){return i.inited&&i.isVisible()}).map(function(i){i.hooks.beforeSelect.call(a)})}},{key:"renderMask",value:function(a){a.inited&&a.isVisible()&&(a.hooks.beforeRender.call(),a.masks.length>0&&(this.rendererService.clear({stencil:0,depth:1,framebuffer:null}),a.masks.map(function(i){i.hooks.beforeRender.call(),i.render(),i.hooks.afterRender.call()})),a.hooks.afterRender.call())}}]),n}(Hi.exports.EventEmitter),Ave=function(){function e(t,n,r,a,i){Ae(this,e),m(this,"sourceLayer",void 0),m(this,"parent",void 0),m(this,"children",void 0),m(this,"mapService",void 0),m(this,"rendererService",void 0),m(this,"tilePickManager",void 0),m(this,"tileConfigManager",void 0),m(this,"tileFactory",void 0),m(this,"initOptions",void 0),m(this,"rampColorsData",void 0),this.parent=t,this.children=t.layerChildren,this.mapService=n,this.rendererService=r,this.tilePickManager=new Tve(t,r,a,this.children,i),this.tileConfigManager=new Eve,this.setSubLayerInitOptipn(),this.setConfigListener(),this.initTileFactory()}return Oe(e,[{key:"createTile",value:function(n){return this.tileFactory.createTile(n,this.initOptions)}},{key:"updateLayersConfig",value:function(n,r,a){n.map(function(i){r==="mask"?i.style({mask:a}):i.updateLayerConfig(m({},r,a))})}},{key:"addChild",value:function(n){this.children.push(n)}},{key:"addChilds",value:function(n){var r;(r=this.children).push.apply(r,$e(n))}},{key:"removeChilds",value:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,a=[],i=[];this.children.filter(function(o){n.includes(o.id)?a.push(o):i.push(o)}),a.map(function(o){return o.destroy(r)}),this.children=i}},{key:"removeChild",value:function(n){var r=this.children.indexOf(n);r>-1&&this.children.splice(r,1),n.destroy()}},{key:"getChilds",value:function(n){return this.children.filter(function(r){return n.includes(r.id)})}},{key:"getChild",value:function(n){return this.children.filter(function(r){return r.id===n})[0]}},{key:"clearChild",value:function(){this.children.forEach(function(n){n.destroy()}),this.children.slice(0,this.children.length)}},{key:"hasChild",value:function(n){return this.children.includes(n)}},{key:"render",value:function(){var n,r;(n=this.tileConfigManager)===null||n===void 0||n.checkConfig(this.parent),(r=this.tilePickManager)===null||r===void 0||r.normalRender(this.children)}},{key:"pickLayers",value:function(n){var r;return(r=this.tilePickManager)===null||r===void 0?void 0:r.pickRender(this.children,n)}},{key:"setSubLayerInitOptipn",value:function(){var n,r=this.parent.getLayerConfig(),a=r.zIndex,i=a===void 0?0:a,o=r.opacity,s=o===void 0?1:o,l=r.mask,u=l===void 0?!1:l,c=r.stroke,f=c===void 0?"#fff":c,d=r.strokeWidth,p=d===void 0?0:d,h=r.strokeOpacity,g=h===void 0?1:h,v=r.clampLow,b=v===void 0?!0:v,y=r.clampHigh,x=y===void 0?!0:y,k=r.domain,T=k===void 0?[0,1]:k,C=r.rampColors,I=C===void 0?{colors:["rgb(166,97,26)","rgb(223,194,125)","rgb(245,245,245)","rgb(128,205,193)","rgb(1,133,113)"],positions:[0,.25,.5,.75,1]}:C,P=r.featureId,j=P===void 0?"id":P,A=r.sourceLayer,S=this.tileConfigManager.getAttributeScale(this.parent,"color"),M=this.tileConfigManager.getAttributeScale(this.parent,"size"),O=this.parent.getSource(),R=(O==null||(n=O.data)===null||n===void 0?void 0:n.tilesetOptions)||{},G=R.coords,ee=gD(this.parent.type,this.parent);I&&(this.rampColorsData=$v(I)),this.initOptions={layerType:this.parent.type,shape:ee,zIndex:i,opacity:s,sourceLayer:A,coords:G,featureId:j,color:S,size:M,mask:q0e(this.parent.type,u),stroke:f,strokeWidth:p,strokeOpacity:g,clampLow:b,clampHigh:x,domain:T,rampColors:I,rampColorsData:this.rampColorsData}}},{key:"setConfigListener",value:function(){var n=this;if(this.tileConfigManager.setConfig("opacity",this.initOptions.opacity),this.tileConfigManager.setConfig("zIndex",this.initOptions.zIndex),this.tileConfigManager.setConfig("mask",this.initOptions.mask),this.parent.type==="RasterLayer")this.tileConfigManager.setConfig("rampColors",this.initOptions.rampColors),this.tileConfigManager.setConfig("domain",this.initOptions.domain),this.tileConfigManager.setConfig("clampHigh",this.initOptions.clampHigh),this.tileConfigManager.setConfig("clampLow",this.initOptions.clampLow);else{var r,a,i;this.tileConfigManager.setConfig("stroke",this.initOptions.stroke),this.tileConfigManager.setConfig("strokeWidth",this.initOptions.strokeWidth),this.tileConfigManager.setConfig("strokeOpacity",this.initOptions.strokeOpacity),this.tileConfigManager.setConfig("color",(r=this.parent.getAttribute("color"))===null||r===void 0?void 0:r.scale),this.tileConfigManager.setConfig("shape",(a=this.parent.getAttribute("shape"))===null||a===void 0?void 0:a.scale),this.tileConfigManager.setConfig("size",(i=this.parent.getAttribute("size"))===null||i===void 0?void 0:i.scale)}this.tileConfigManager.on("updateConfig",function(o){o.map(function(s){return n.updateStyle(s),""})})}},{key:"updateStyle",value:function(n){var r=this,a=null;if(["size","color","shape"].includes(n)){var i,o=(i=this.parent.getAttribute(n))===null||i===void 0?void 0:i.scale;if(!o)return;a=o,this.children.map(function(u){return r.tileFactory.setStyleAttributeField(u,n,o),""})}else{var s=this.parent.getLayerConfig();if(!(n in s))return;var l=s[n];a=l,this.updateLayersConfig(this.children,n,l),n==="rampColors"&&l&&(this.rampColorsData=$v(l))}this.initOptions[n]=a}},{key:"initTileFactory",value:function(){var n=this.parent.getSource(),r=_ve(this.parent.type,n.parser);this.tileFactory=new r({parent:this.parent,mapService:this.mapService,rendererService:this.rendererService})}}]),e}();function IR(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function no(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?IR(Object(n),!0).forEach(function(r){m(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):IR(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var Ove=function(){function e(t){var n,r=t.parent,a=t.rendererService,i=t.mapService,o=t.layerService,s=t.pickingService;Ae(this,e),m(this,"type","baseTile"),m(this,"sourceLayer",void 0),m(this,"parent",void 0),m(this,"initedTileset",!1),m(this,"tilesetManager",void 0),m(this,"tileLayerManager",void 0),m(this,"scaleField",void 0),m(this,"lastViewStates",void 0),m(this,"timer",void 0),m(this,"mapService",void 0),m(this,"layerService",void 0),m(this,"pickColors",{select:null,active:null});var l=r.getSource(),u=(l==null||(n=l.data)===null||n===void 0?void 0:n.tilesetOptions)||{},c=u.sourceLayer;u.coords,u.featureId,this.sourceLayer=c,this.parent=r,this.mapService=i,this.layerService=o,this.tileLayerManager=new Ave(r,i,a,s,o),this.initTileSetManager(),this.bindSubLayerEvent(),this.bindSubLayerPick(),this.scaleField=this.parent.getScaleOptions()}return Oe(e,[{key:"children",get:function(){return this.tileLayerManager.children}},{key:"render",value:function(){this.tileLayerManager&&this.tileLayerManager.render()}},{key:"clearPick",value:function(n){n==="mousemove"&&this.tileLayerManager.tilePickManager.clearPick()}},{key:"clearPickState",value:function(){var n=this;this.children.filter(function(r){return r.inited&&r.isVisible()}).filter(function(r){return r.getCurrentSelectedId()!==null}).map(function(r){n.selectFeature(r,new Uint8Array([0,0,0,0])),r.setCurrentSelectedId(null)})}},{key:"pickLayers",value:function(n){return this.tileLayerManager.pickLayers(n)}},{key:"tileLoaded",value:function(n){}},{key:"tileError",value:function(n){console.warn("error:",n)}},{key:"tileUnLoad",value:function(n){this.tileLayerManager.removeChilds(n.layerIDList,!1)}},{key:"tileUpdate",value:function(){var n=this;!this.tilesetManager||(this.tilesetManager.tiles.filter(function(r){return r.isLoaded}).map(function(r){if(r.layerIDList.length===0){var a=n.tileLayerManager.createTile(r),i=a.layers,o=a.layerIDList;r.layerIDList=o,n.tileLayerManager.addChilds(i)}else{if(!r.isVisibleChange)return;var s=n.tileLayerManager.getChilds(r.layerIDList);n.tileLayerManager.updateLayersConfig(s,"visible",r.isVisible)}}),this.tilesetManager.isLoaded&&this.parent.emit("tiles-loaded",this.tilesetManager.currentTiles))}},{key:"setPickState",value:function(n){var r=this;if(this.pickColors.select){var a=xs(this.pickColors.select);n.map(function(o){r.selectFeature(o,r.pickColors.select),o.setCurrentSelectedId(a)})}if(this.pickColors.active){var i=xs(this.pickColors.active);n.filter(function(o){return o.inited&&o.isVisible()}).map(function(o){o.hooks.beforeHighlight.call(r.pickColors.active),o.setCurrentPickId(i)})}}},{key:"bindSubLayerPick",value:function(){var n=this;this.tileLayerManager.tilePickManager.on("pick",function(r){var a=Le(r.pickedColors,3),i=a[0],o=a[1],s=a[2];if(r.type==="click"){var l=n.children.filter(function(u){return u.inited&&u.isVisible()&&u.isVector}).filter(function(u){return u!==r.layer});n.setSelect(l,[i,o,s])}else n.setHighlight([i,o,s])}),this.tileLayerManager.tilePickManager.on("unpick",function(){n.pickColors.active=null})}},{key:"setHighlight",value:function(n){var r=xs(n);this.pickColors.active=n,this.children.filter(function(a){return a.inited&&a.isVisible()&&a.isVector}).filter(function(a){return a.getPickID()!==r}).map(function(a){a.setPickID(r),a.hooks.beforeHighlight.call(n)})}},{key:"setSelect",value:function(n,r){var a=this,i=xs(r);n.map(function(s){s.getCurrentSelectedId()===null||i!==s.getCurrentSelectedId()?(a.selectFeature(s,r),s.setCurrentSelectedId(i),a.pickColors.select=r):(a.selectFeature(s,new Uint8Array([0,0,0,0])),s.setCurrentSelectedId(null),a.pickColors.select=null)});var o=this.layerService.getRenderList();o.filter(function(s){return s.inited&&!s.isVector&&s.isVisible()&&s.needPick("click")}).filter(function(s){return s.getCurrentSelectedId()!==null}).map(function(s){a.selectFeature(s,new Uint8Array([0,0,0,0])),s.setCurrentSelectedId(null)})}},{key:"selectFeature",value:function(n,r){var a=Le(r,3),i=a[0],o=a[1],s=a[2];n.hooks.beforeSelect.call([i,o,s])}},{key:"bindSubLayerEvent",value:function(){var n=this;this.parent.on("subLayerClick",function(r){n.parent.emit("click",no({},r))}),this.parent.on("subLayerMouseMove",function(r){return n.parent.emit("mousemove",no({},r))}),this.parent.on("subLayerMouseUp",function(r){return n.parent.emit("mouseup",no({},r))}),this.parent.on("subLayerMouseEnter",function(r){return n.parent.emit("mouseenter",no({},r))}),this.parent.on("subLayerMouseOut",function(r){return n.parent.emit("mouseout",no({},r))}),this.parent.on("subLayerMouseDown",function(r){return n.parent.emit("mousedown",no({},r))}),this.parent.on("subLayerContextmenu",function(r){return n.parent.emit("contextmenu",no({},r))}),this.parent.on("subLayerUnClick",function(r){return n.parent.emit("unclick",no({},r))}),this.parent.on("subLayerUnMouseMove",function(r){return n.parent.emit("unmousemove",no({},r))}),this.parent.on("subLayerUnMouseUp",function(r){return n.parent.emit("unmouseup",no({},r))}),this.parent.on("subLayerUnMouseDown",function(r){return n.parent.emit("unmousedown",no({},r))}),this.parent.on("subLayerUnContextmenu",function(r){return n.parent.emit("uncontextmenu",no({},r))})}},{key:"initTileSetManager",value:function(){var n,r=this.parent.getSource();this.tilesetManager=r.tileset,this.initedTileset||(this.bindTilesetEvent(),this.initedTileset=!0);var a=this.getCurrentView(),i=a.latLonBounds,o=a.zoom;(n=this.tilesetManager)===null||n===void 0||n.update(o,i)}},{key:"mapchange",value:function(){var n,r=this.getCurrentView(),a=r.latLonBounds,i=r.zoom;if(this.mapService.version==="GAODE1.x"){var o=this.parent.getLayerConfig(),s=o.visible;i<3&&s?(this.parent.updateLayerConfig({visible:!1}),this.layerService.updateLayerRenderList()):i>=3&&!s&&(this.parent.updateLayerConfig({visible:!0}),this.layerService.updateLayerRenderList())}this.lastViewStates&&this.lastViewStates.zoom===i&&this.lastViewStates.latLonBounds.toString()===a.toString()||(this.lastViewStates={zoom:i,latLonBounds:a},this.timer&&(clearTimeout(this.timer),this.timer=null),(n=this.tilesetManager)===null||n===void 0||n.update(i,a))}},{key:"bindTilesetEvent",value:function(){var n=this;!this.tilesetManager||(this.tilesetManager.on("tile-loaded",function(r){}),this.tilesetManager.on("tile-unload",function(r){n.tileUnLoad(r)}),this.tilesetManager.on("tile-error",function(r,a){n.tileError(r)}),this.tilesetManager.on("tile-update",function(){n.tileUpdate()}),this.mapService.on("zoomend",function(){return n.mapchange()}),this.mapService.on("moveend",function(){return n.mapchange()}))}},{key:"getCurrentView",value:function(){var n=this.mapService.getBounds(),r=[n[0][0],n[0][1],n[1][0],n[1][1]],a=this.mapService.getZoom();return{latLonBounds:r,zoom:a}}}]),e}();function Mve(e){var t=Rve();return function(){var r=ke(e),a;if(t){var i=ke(this).constructor;a=Reflect.construct(r,arguments,i)}else a=r.apply(this,arguments);return It(this,a)}}function Rve(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var Pve=function(e){Tt(n,e);var t=Mve(n);function n(){var r;Ae(this,n);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return r=t.call.apply(t,[this].concat(i)),m(D(r),"type","TMS"),r}return Oe(n,[{key:"tileUnLoad",value:function(a){this.tileLayerManager.removeChilds(a.layerIDList,!1)}},{key:"tileUpdate",value:function(){var a=this;!this.tilesetManager||(this.tilesetManager.tiles.filter(function(i){return i.isLoaded}).map(function(i){var o;if((o=i.data)!==null&&o!==void 0&&o.layers&&a.sourceLayer){var s=i.data.layers[a.sourceLayer],l=s==null?void 0:s.features;if(!(Array.isArray(l)&&l.length>0))return}if(i.parentLayerIDList.includes(a.parent.id)){if(!i.isVisibleChange)return;var p=a.tileLayerManager.getChilds(i.layerIDList);a.tileLayerManager.updateLayersConfig(p,"visible",i.isVisible),a.setPickState(p)}else{var u,c=a.tileLayerManager.createTile(i),f=c.layers,d=c.layerIDList;i.parentLayerIDList.push(a.parent.id),(u=i.layerIDList).push.apply(u,$e(d)),a.tileLayerManager.addChilds(f),a.setPickState(f)}}),this.parent.renderLayers(),this.tilesetManager.isLoaded&&this.parent.emit("tiles-loaded",this.tilesetManager.currentTiles))}}]),n}(Ove);function Ive(e){var t=Lve();return function(){var r=ke(e),a;if(t){var i=ke(this).constructor;a=Reflect.construct(r,arguments,i)}else a=r.apply(this,arguments);return It(this,a)}}function Lve(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var Nve=function(e){Tt(n,e);var t=Ive(n);function n(){return Ae(this,n),t.apply(this,arguments)}return Oe(n,[{key:"getUninforms",value:function(){return{}}},{key:"initModels",value:function(){var a;return(a=this.layer.getSource())!==null&&a!==void 0&&a.data.isTile&&(this.layer.tileLayer=new Pve({parent:this.layer,rendererService:this.rendererService,mapService:this.mapService,layerService:this.layerService,pickingService:this.pickingService})),this.buildModels()}},{key:"buildModels",value:function(){return[]}},{key:"registerBuiltinAttributes",value:function(){}}]),n}(Qa);function Fve(e){var t=Dve();return function(){var r=ke(e),a;if(t){var i=ke(this).constructor;a=Reflect.construct(r,arguments,i)}else a=r.apply(this,arguments);return It(this,a)}}function Dve(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var Bve=`varying vec4 v_color;
uniform float u_opacity: 1.0;

uniform float u_pickLight: 0.0;

#pragma include "picking"

varying mat4 styleMappingMat; // \u4F20\u9012\u4ECE\u7247\u5143\u4E2D\u4F20\u9012\u7684\u6620\u5C04\u6570\u636E

uniform float u_linearColor: 0;
uniform vec4 u_sourceColor;
uniform vec4 u_targetColor;

uniform float u_opacitylinear: 0.0;
uniform float u_opacitylinear_dir: 1.0;

void main() {
  float opacity = styleMappingMat[0][0];
  float lightWeight = styleMappingMat[1][3];
  float barLinearZ = styleMappingMat[2][3];

  // \u8BBE\u7F6E\u5706\u67F1\u7684\u5E95\u8272
  if(u_linearColor == 1.0) { // \u4F7F\u7528\u6E10\u53D8\u989C\u8272
    gl_FragColor = mix(u_sourceColor, u_targetColor, barLinearZ);
    gl_FragColor.rgb *= lightWeight;
  } else { // \u4F7F\u7528 color \u65B9\u6CD5\u4F20\u5165\u7684\u989C\u8272
     gl_FragColor = v_color;
  }

  // \u5E94\u7528\u900F\u660E\u5EA6
  gl_FragColor.a *= opacity;

  // \u5F00\u542F\u900F\u660E\u5EA6\u6E10\u53D8
  if(u_opacitylinear > 0.0) {
    gl_FragColor.a *= u_opacitylinear_dir > 0.0 ? (1.0 - barLinearZ): barLinearZ;
  }

  // picking
  if(u_pickLight > 0.0) {
    gl_FragColor = filterColorAlpha(gl_FragColor, lightWeight);
  } else {
    gl_FragColor = filterColor(gl_FragColor);
  }
}
`,zve=`precision highp float;

#define pi 3.1415926535
#define ambientRatio 0.5
#define diffuseRatio 0.3
#define specularRatio 0.2

attribute vec3 a_Position;
attribute vec3 a_Pos;
attribute vec4 a_Color;
attribute vec3 a_Size;
attribute vec3 a_Normal;

uniform float u_heightfixed: 0.0; // \u9ED8\u8BA4\u4E0D\u56FA\u5B9A
uniform float u_globel;
uniform float u_r;
uniform mat4 u_ModelMatrix;
uniform mat4 u_Mvp;
varying vec4 v_color;

uniform float u_opacity : 1;
uniform float u_lightEnable: 1;

varying mat4 styleMappingMat; // \u7528\u4E8E\u5C06\u5728\u9876\u70B9\u7740\u8272\u5668\u4E2D\u8BA1\u7B97\u597D\u7684\u6837\u5F0F\u503C\u4F20\u9012\u7ED9\u7247\u5143

#pragma include "styleMapping"
#pragma include "styleMappingCalOpacity"

#pragma include "projection"
#pragma include "light"
#pragma include "picking"

float getYRadian(float x, float z) {
  if(x > 0.0 && z > 0.0) {
    return atan(x/z);
  } else if(x > 0.0 && z <= 0.0){
    return atan(-z/x) + pi/2.0;
  } else if(x <= 0.0 && z <= 0.0) {
    return  pi + atan(x/z); //atan(x/z) + 
  } else {
    return atan(z/-x) + pi*3.0/2.0;
  }
}

float getXRadian(float y, float r) {
  return atan(y/r);
}

void main() {

  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97
  styleMappingMat = mat4(
    0.0, 0.0, 0.0, 0.0, // opacity - strokeOpacity - strokeWidth - empty
    0.0, 0.0, 0.0, 0.0, // strokeR - strokeG - strokeB - strokeA - lightWeight
    0.0, 0.0, 0.0, 0.0, // offsets[0] - offsets[1] - linearZ(\u5782\u76F4\u65B9\u5411 0 - 1 \u7684\u503C)
    0.0, 0.0, 0.0, 0.0
  );

  float rowCount = u_cellTypeLayout[0][0];    // \u5F53\u524D\u7684\u6570\u636E\u7EB9\u7406\u6709\u51E0\u884C
  float columnCount = u_cellTypeLayout[0][1]; // \u5F53\u770B\u5230\u6570\u636E\u7EB9\u7406\u6709\u51E0\u5217
  float columnWidth = 1.0/columnCount;  // \u5217\u5BBD
  float rowHeight = 1.0/rowCount;       // \u884C\u9AD8
  float cellCount = calCellCount(); // opacity - strokeOpacity - strokeWidth - stroke - offsets
  float id = a_vertexId; // \u7B2Cn\u4E2A\u9876\u70B9
  float cellCurrentRow = floor(id * cellCount / columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u884C
  float cellCurrentColumn = mod(id * cellCount, columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u5217
  
  // cell \u56FA\u5B9A\u987A\u5E8F opacity -> strokeOpacity -> strokeWidth -> stroke ... 
  // \u6309\u987A\u5E8F\u4ECE cell \u4E2D\u53D6\u503C\u3001\u82E5\u6CA1\u6709\u5219\u81EA\u52A8\u5F80\u4E0B\u53D6\u503C
  float textureOffset = 0.0; // \u5728 cell \u4E2D\u53D6\u503C\u7684\u504F\u79FB\u91CF

  vec2 opacityAndOffset = calOpacityAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);
  styleMappingMat[0][0] = opacityAndOffset.r;
  textureOffset = opacityAndOffset.g;
  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97
  vec3 size = a_Size * a_Position;

  // a_Position.z \u662F\u5728\u6784\u5EFA\u7F51\u683C\u7684\u65F6\u5019\u4F20\u5165\u7684\u6807\u51C6\u503C 0 - 1\uFF0C\u5728\u63D2\u503C\u5668\u63D2\u503C\u53EF\u4EE5\u83B7\u53D6 0\uFF5E1 \u7EBF\u6027\u6E10\u53D8\u7684\u503C
  styleMappingMat[2][3] =  a_Position.z;

  vec3 offset = size; // \u63A7\u5236\u5706\u67F1\u4F53\u7684\u5927\u5C0F - \u4ECE\u6807\u51C6\u5355\u4F4D\u5706\u67F1\u4F53\u8FDB\u884C\u504F\u79FB
  if(u_heightfixed < 1.0) { // \u5706\u67F1\u4F53\u4E0D\u56FA\u5B9A\u9AD8\u5EA6
    
    if (u_CoordinateSystem == COORDINATE_SYSTEM_P20 || u_CoordinateSystem == COORDINATE_SYSTEM_P20_OFFSET) {
      // P20 \u5750\u6807\u7CFB\u4E0B\uFF0C\u4E3A\u4E86\u548C Web \u58A8\u5361\u6258\u5750\u6807\u7CFB\u7EDF\u4E00\uFF0Czoom \u9ED8\u8BA4\u51CF1
      offset = offset * pow(2.0, (19.0 - u_Zoom));
    }
    if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) {
      // P20_2 \u5750\u6807\u7CFB\u4E0B\uFF0C\u4E3A\u4E86\u548C Web \u58A8\u5361\u6258\u5750\u6807\u7CFB\u7EDF\u4E00\uFF0Czoom \u9ED8\u8BA4\u51CF3
      offset = offset * pow(2.0, (19.0 - 3.0 - u_Zoom));
    }
  } else {// \u5706\u67F1\u4F53\u56FA\u5B9A\u9AD8\u5EA6 \uFF08 \u5904\u7406 mapbox \uFF09
    if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
      offset *= 4.0/pow(2.0, 21.0 - u_Zoom);
    }
  }


  vec4 project_pos = project_position(vec4(a_Pos.xy, 0., 1.0));

  // u_r \u63A7\u5236\u5706\u67F1\u7684\u751F\u957F
  vec4 pos = vec4(project_pos.xy + offset.xy, offset.z * u_r, 1.0);

  // \u5706\u67F1\u5149\u7167\u6548\u679C
  float lightWeight = 1.0;
  if(u_lightEnable > 0.0) { // \u53D6\u6D88\u4E09\u5143\u8868\u8FBE\u5F0F\uFF0C\u589E\u5F3A\u5065\u58EE\u6027
    lightWeight = calc_lighting(pos);
  }
  styleMappingMat[1][3] = lightWeight;

  v_color =vec4(a_Color.rgb * lightWeight, a_Color.w);

  // gl_Position = project_common_position_to_clipspace(pos);

  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
    gl_Position = u_Mvp * pos;
  } else {
    gl_Position = project_common_position_to_clipspace(pos);
  }
  
  if(u_globel > 0.0) {
    // \u5728\u5730\u7403\u6A21\u5F0F\u4E0B\uFF0C\u5C06\u539F\u672C\u5782\u76F4\u4E8E xy \u5E73\u9762\u7684\u5706\u67F1\u8C03\u6574\u59FF\u6001\u5230\u9002\u5E94\u5706\u7684\u89D2\u5EA6
    //\u65CB\u8F6C\u77E9\u9635mx\uFF0C\u521B\u5EFA\u7ED5x\u8F74\u65CB\u8F6C\u77E9\u9635
    float r = sqrt(a_Pos.z*a_Pos.z + a_Pos.x*a_Pos.x);
    float xRadian = getXRadian(a_Pos.y, r);
    float xcos = cos(xRadian);//\u6C42\u89E3\u65CB\u8F6C\u89D2\u5EA6\u4F59\u5F26\u503C
    float xsin = sin(xRadian);//\u6C42\u89E3\u65CB\u8F6C\u89D2\u5EA6\u6B63\u5F26\u503C
    mat4 mx = mat4(
      1,0,0,0,  
      0,xcos,-xsin,0,  
      0,xsin,xcos,0,  
      0,0,0,1);

    //\u65CB\u8F6C\u77E9\u9635my\uFF0C\u521B\u5EFA\u7ED5y\u8F74\u65CB\u8F6C\u77E9\u9635
    float yRadian = getYRadian(a_Pos.x, a_Pos.z);
    float ycos = cos(yRadian);//\u6C42\u89E3\u65CB\u8F6C\u89D2\u5EA6\u4F59\u5F26\u503C
    float ysin = sin(yRadian);//\u6C42\u89E3\u65CB\u8F6C\u89D2\u5EA6\u6B63\u5F26\u503C
    mat4 my = mat4(
      ycos,0,-ysin,0,  
      0,1,0,0,  
      ysin,0,ycos,0,  
      0,0,0,1);

    gl_Position = u_ViewProjectionMatrix * vec4(( my * mx *  vec4(a_Position * a_Size, 1.0)).xyz + a_Pos, 1.0);
  }

  setPickingColor(a_PickingColor);
}
`,Uve=function(e){Tt(n,e);var t=Fve(n);function n(){var r;Ae(this,n);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return r=t.call.apply(t,[this].concat(i)),m(D(r),"raiseCount",0),m(D(r),"raiserepeat",0),r}return Oe(n,[{key:"getUninforms",value:function(){var a=this.layer.getLayerConfig(),i=a.animateOption,o=i===void 0?{enable:!1,speed:.01,repeat:!1}:i,s=a.opacity,l=s===void 0?1:s,u=a.sourceColor,c=a.targetColor,f=a.pickLight,d=f===void 0?!1:f,p=a.heightfixed,h=p===void 0?!1:p,g=a.opacityLinear,v=g===void 0?{enable:!1,dir:"up"}:g,b=a.lightEnable,y=b===void 0?!0:b;if(this.dataTextureTest&&this.dataTextureNeedUpdate({opacity:l})){this.judgeStyleAttributes({opacity:l});var x=this.layer.getEncodedData(),k=this.calDataFrame(this.cellLength,x,this.cellProperties),T=k.data,C=k.width,I=k.height;this.rowCount=I,this.dataTexture=this.cellLength>0&&T.length>0?this.createTexture2D({flipY:!0,data:T,format:V.LUMINANCE,type:V.FLOAT,width:C,height:I}):this.createTexture2D({flipY:!0,data:[1],format:V.LUMINANCE,type:V.FLOAT,width:1,height:1})}var P=0,j=[0,0,0,0],A=[0,0,0,0];if(u&&c&&(j=Ts(u),A=Ts(c),P=1),this.raiseCount<1&&this.raiserepeat>0&&o.enable){var S=o.speed,M=S===void 0?.01:S;o.repeat,this.raiseCount+=M,this.raiseCount>=1&&(this.raiserepeat>1?(this.raiseCount=0,this.raiserepeat--):this.raiseCount=1)}return{u_pickLight:Number(d),u_heightfixed:Number(h),u_r:o.enable&&this.raiserepeat>0?this.raiseCount:1,u_globel:this.mapService.version==="GLOBEL"?1:0,u_dataTexture:this.dataTexture,u_cellTypeLayout:this.getCellTypeLayout(),u_opacity:er(l)?l:1,u_linearColor:P,u_sourceColor:j,u_targetColor:A,u_opacitylinear:Number(v.enable),u_opacitylinear_dir:v.dir==="up"?1:0,u_lightEnable:Number(y)}}},{key:"initModels",value:function(){return this.buildModels()}},{key:"buildModels",value:function(){var a=this.layer.getLayerConfig(),i=a.depth,o=i===void 0?!0:i,s=a.animateOption.repeat,l=s===void 0?1:s;return this.raiserepeat=l,[this.layer.buildLayerModel({moduleName:"pointExtrude2",vertexShader:zve,fragmentShader:Bve,triangulation:O0e,blend:this.getBlend(),cull:{enable:!0,face:Hb(this.mapService.version)},depth:{enable:o}})]}},{key:"clearModels",value:function(){var a;(a=this.dataTexture)===null||a===void 0||a.destroy()}},{key:"registerBuiltinAttributes",value:function(){var a=this.mapService.version==="GLOBEL";this.styleAttributeService.registerStyleAttribute({name:"size",type:kn.Attribute,descriptor:{name:"a_Size",buffer:{usage:V.DYNAMIC_DRAW,data:[],type:V.FLOAT},size:3,update:function(o,s,l,u){var c=o.size;if(c){var f=[];return Array.isArray(c)&&(f=c.length===2?[c[0],c[0],c[1]]:c),Array.isArray(c)||(f=[c,c,c]),f}else return[2,2,2]}}}),this.styleAttributeService.registerStyleAttribute({name:"normal",type:kn.Attribute,descriptor:{name:"a_Normal",buffer:{usage:V.STATIC_DRAW,data:[],type:V.FLOAT},size:3,update:function(o,s,l,u,c){return c}}}),this.styleAttributeService.registerStyleAttribute({name:"pos",type:kn.Attribute,descriptor:{name:"a_Pos",buffer:{usage:V.DYNAMIC_DRAW,data:[],type:V.FLOAT},size:3,update:function(o,s){var l=hc(o.coordinates);return a?cD([l[0],l[1]]):[l[0],l[1],0]}}})}}]),n}(Qa);function $ve(e){var t=Vve();return function(){var r=ke(e),a;if(t){var i=ke(this).constructor;a=Reflect.construct(r,arguments,i)}else a=r.apply(this,arguments);return It(this,a)}}function Vve(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var LR=`
uniform float u_additive;

varying mat4 styleMappingMat; // \u4F20\u9012\u4ECE\u7247\u5143\u4E2D\u4F20\u9012\u7684\u6620\u5C04\u6570\u636E

varying vec4 v_data;
varying vec4 v_color;
varying float v_radius;
uniform float u_time;
uniform vec4 u_aimate: [ 0, 2., 1.0, 0.2 ];

#pragma include "sdf_2d"
#pragma include "picking"

void main() {

  vec4 textrueStroke = vec4(
    styleMappingMat[1][0],
    styleMappingMat[1][1],
    styleMappingMat[1][2],
    styleMappingMat[1][3]
  );

  float opacity = styleMappingMat[0][0];

  lowp float antialiasblur = v_data.z;
  float r = v_radius / (v_radius);

  float outer_df;
  float inner_df;
  // 'circle', 'triangle', 'square', 'pentagon', 'hexagon', 'octogon', 'hexagram', 'rhombus', 'vesica'
  
  outer_df = sdCircle(v_data.xy, 1.0);
  inner_df = sdCircle(v_data.xy, r);


  float opacity_t = smoothstep(0.0, antialiasblur, outer_df);

  float color_t = smoothstep(
    antialiasblur,
    0.0,
    inner_df
  );
  float PI = 3.14159;
  float N_RINGS = 3.0;
  float FREQ = 1.0;

 gl_FragColor = vec4(v_color.rgb, v_color.a * opacity);

  float d = length(v_data.xy);
  if(d > 0.5) {
    discard;
  }
  float intensity = clamp(cos(d * PI), 0.0, 1.0) * clamp(cos(2.0 * PI * (d * 2.0 * u_aimate.z - u_aimate.y * u_time)), 0.0, 1.0);
  
  // TODO: \u6839\u636E\u53E0\u52A0\u6A21\u5F0F\u9009\u62E9\u6548\u679C
  if(u_additive > 0.0) {
    gl_FragColor *= intensity;
    // TODO: \u4F18\u5316\u6C34\u6CE2\u70B9 blend additive \u6A21\u5F0F\u4E0B\u6709\u7684\u62FE\u53D6\u6548\u679C 
    gl_FragColor = filterColorAlpha(gl_FragColor, gl_FragColor.a);
  } else {
    gl_FragColor = vec4(gl_FragColor.xyz, gl_FragColor.a * intensity);
    gl_FragColor = filterColor(gl_FragColor);
  }
}
`,jve=`
uniform float u_globel;
uniform float u_additive;

varying mat4 styleMappingMat; // \u4F20\u9012\u4ECE\u7247\u5143\u4E2D\u4F20\u9012\u7684\u6620\u5C04\u6570\u636E

varying vec4 v_data;
varying vec4 v_color;
varying float v_radius;

#pragma include "sdf_2d"
#pragma include "picking"


void main() {
  int shape = int(floor(v_data.w + 0.5));

  vec4 textrueStroke = vec4(
    styleMappingMat[1][0],
    styleMappingMat[1][1],
    styleMappingMat[1][2],
    styleMappingMat[1][3]
  );

  float opacity = styleMappingMat[0][0];
  float stroke_opacity = styleMappingMat[0][1];
  float strokeWidth = styleMappingMat[0][2];
  vec4 strokeColor = textrueStroke == vec4(0) ? v_color : textrueStroke;

  lowp float antialiasblur = v_data.z;
  float r = v_radius / (v_radius + strokeWidth);

  float outer_df;
  float inner_df;
  // 'circle', 'triangle', 'square', 'pentagon', 'hexagon', 'octogon', 'hexagram', 'rhombus', 'vesica'
  if (shape == 0) {
    outer_df = sdCircle(v_data.xy, 1.0);
    inner_df = sdCircle(v_data.xy, r);
  } else if (shape == 1) {
    outer_df = sdEquilateralTriangle(1.1 * v_data.xy);
    inner_df = sdEquilateralTriangle(1.1 / r * v_data.xy);
  } else if (shape == 2) {
    outer_df = sdBox(v_data.xy, vec2(1.));
    inner_df = sdBox(v_data.xy, vec2(r));
  } else if (shape == 3) {
    outer_df = sdPentagon(v_data.xy, 0.8);
    inner_df = sdPentagon(v_data.xy, r * 0.8);
  } else if (shape == 4) {
    outer_df = sdHexagon(v_data.xy, 0.8);
    inner_df = sdHexagon(v_data.xy, r * 0.8);
  } else if (shape == 5) {
    outer_df = sdOctogon(v_data.xy, 1.0);
    inner_df = sdOctogon(v_data.xy, r);
  } else if (shape == 6) {
    outer_df = sdHexagram(v_data.xy, 0.52);
    inner_df = sdHexagram(v_data.xy, r * 0.52);
  } else if (shape == 7) {
    outer_df = sdRhombus(v_data.xy, vec2(1.0));
    inner_df = sdRhombus(v_data.xy, vec2(r));
  } else if (shape == 8) {
    outer_df = sdVesica(v_data.xy, 1.1, 0.8);
    inner_df = sdVesica(v_data.xy, r * 1.1, r * 0.8);
  }

  if(u_globel > 0.0) {
    // TODO: \u5730\u7403\u6A21\u5F0F\u4E0B\u907F\u514D\u591A\u4F59\u7247\u5143\u7ED8\u5236\uFF0C\u540C\u65F6\u4E5F\u80FD\u907F\u514D\u6709\u7528\u7247\u5143\u5728\u900F\u660E\u4E14\u91CD\u53E0\u7684\u60C5\u51B5\u4E0B\u65E0\u6CD5\u5199\u5165
    // \u4ED8\u51FA\u7684\u4EE3\u4EF7\u662F\u8FB9\u7F18\u4F1A\u6709\u4E00\u4E9B\u952F\u9F7F
    if(outer_df > antialiasblur + 0.018) discard;
  }
  float opacity_t = smoothstep(0.0, antialiasblur, outer_df);

  float color_t = strokeWidth < 0.01 ? 0.0 : smoothstep(
    antialiasblur,
    0.0,
    inner_df
  );

  if(strokeWidth < 0.01) {
    gl_FragColor = vec4(v_color.rgb, v_color.a * opacity);
  } else {
    gl_FragColor = mix(vec4(v_color.rgb, v_color.a * opacity), strokeColor * stroke_opacity, color_t);
  }

  if(u_additive > 0.0) {
    gl_FragColor *= opacity_t;
    gl_FragColor = filterColorAlpha(gl_FragColor, gl_FragColor.a);
  } else {
    gl_FragColor.a *= opacity_t;
    gl_FragColor = filterColor(gl_FragColor);
  }
}
`,l_=`attribute vec4 a_Color;
attribute vec3 a_Position;
attribute vec3 a_Extrude;
attribute float a_Size;
attribute float a_Shape;

varying mat4 styleMappingMat; // \u7528\u4E8E\u5C06\u5728\u9876\u70B9\u7740\u8272\u5668\u4E2D\u8BA1\u7B97\u597D\u7684\u6837\u5F0F\u503C\u4F20\u9012\u7ED9\u7247\u5143

uniform float u_globel;
uniform mat4 u_ModelMatrix;
uniform mat4 u_Mvp;
uniform float u_isMeter;

varying vec4 v_data;
varying vec4 v_color;
varying float v_radius;

uniform float u_opacity : 1;
uniform float u_stroke_opacity : 1;
uniform float u_stroke_width : 2;
uniform vec4 u_stroke_color : [0.0, 0.0, 0.0, 0.0];
uniform vec2 u_offsets;

uniform float u_blur : 0.0;
uniform float u_raisingHeight: 0.0;

#pragma include "styleMapping"
#pragma include "styleMappingCalOpacity"
#pragma include "styleMappingCalStrokeOpacity"
#pragma include "styleMappingCalStrokeWidth"

#pragma include "projection"
#pragma include "picking"


void main() {
  vec3 extrude = a_Extrude;
  float shape_type = a_Shape;
  float newSize = setPickingSize(a_Size);

  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97
  styleMappingMat = mat4(
    0.0, 0.0, 0.0, 0.0, // opacity - strokeOpacity - strokeWidth - empty
    0.0, 0.0, 0.0, 0.0, // strokeR - strokeG - strokeB - strokeA
    0.0, 0.0, 0.0, 0.0, // offsets[0] - offsets[1]
    0.0, 0.0, 0.0, 0.0
  );

  float rowCount = u_cellTypeLayout[0][0];    // \u5F53\u524D\u7684\u6570\u636E\u7EB9\u7406\u6709\u51E0\u884C
  float columnCount = u_cellTypeLayout[0][1]; // \u5F53\u770B\u5230\u6570\u636E\u7EB9\u7406\u6709\u51E0\u5217
  float columnWidth = 1.0/columnCount;  // \u5217\u5BBD
  float rowHeight = 1.0/rowCount;       // \u884C\u9AD8
  float cellCount = calCellCount(); // opacity - strokeOpacity - strokeWidth - stroke - offsets
  float id = a_vertexId; // \u7B2Cn\u4E2A\u9876\u70B9
  float cellCurrentRow = floor(id * cellCount / columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u884C
  float cellCurrentColumn = mod(id * cellCount, columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u5217
  
  // cell \u56FA\u5B9A\u987A\u5E8F opacity -> strokeOpacity -> strokeWidth -> stroke ... 
  // \u6309\u987A\u5E8F\u4ECE cell \u4E2D\u53D6\u503C\u3001\u82E5\u6CA1\u6709\u5219\u81EA\u52A8\u5F80\u4E0B\u53D6\u503C
  float textureOffset = 0.0; // \u5728 cell \u4E2D\u53D6\u503C\u7684\u504F\u79FB\u91CF

  vec2 opacityAndOffset = calOpacityAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);
  styleMappingMat[0][0] = opacityAndOffset.r;
  textureOffset = opacityAndOffset.g;

  vec2 strokeOpacityAndOffset = calStrokeOpacityAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);
  styleMappingMat[0][1] = strokeOpacityAndOffset.r;
  textureOffset = strokeOpacityAndOffset.g;

  vec2 strokeWidthAndOffset = calStrokeWidthAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);
  styleMappingMat[0][2] = strokeWidthAndOffset.r;
  textureOffset = strokeWidthAndOffset.g;

  vec4 textrueStroke = vec4(-1.0, -1.0, -1.0, -1.0);
  if(hasStroke()) {
    vec2 valueRPos = nextPos(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset);
    styleMappingMat[1][0] = pos2value(valueRPos, columnWidth, rowHeight); // R
    textureOffset += 1.0;

    vec2 valueGPos = nextPos(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset);
    styleMappingMat[1][1] = pos2value(valueGPos, columnWidth, rowHeight); // G
    textureOffset += 1.0;

    vec2 valueBPos = nextPos(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset);
    styleMappingMat[1][2] = pos2value(valueBPos, columnWidth, rowHeight); // B
    textureOffset += 1.0;

    vec2 valueAPos = nextPos(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset);
    styleMappingMat[1][3] = pos2value(valueAPos, columnWidth, rowHeight); // A
    textureOffset += 1.0;
  } else {
    if(u_stroke_color == vec4(0.0)) {
      styleMappingMat[1][0] = v_color.r;
      styleMappingMat[1][1] = v_color.g;
      styleMappingMat[1][2] = v_color.b;
      styleMappingMat[1][3] = v_color.a;
    } else {
      styleMappingMat[1][0] = u_stroke_color.r;
      styleMappingMat[1][1] = u_stroke_color.g;
      styleMappingMat[1][2] = u_stroke_color.b;
      styleMappingMat[1][3] = u_stroke_color.a;
    }
  }

  vec2 textrueOffsets = vec2(0.0, 0.0);
  if(hasOffsets()) {
    vec2 valueXPos = nextPos(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset);
    textrueOffsets.r = pos2value(valueXPos, columnWidth, rowHeight); // x
    textureOffset += 1.0;

    vec2 valueYPos = nextPos(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset);
    textrueOffsets.g = pos2value(valueYPos, columnWidth, rowHeight); // x
    textureOffset += 1.0;
  } else {
    textrueOffsets = u_offsets;
  }

  // cal style mapping

  // unpack color(vec2)
  v_color = a_Color;

  // radius(16-bit)
  v_radius = newSize;

  // TODO: billboard
  // anti-alias
  //  float antialiased_blur = -max(u_blur, antialiasblur);
  float antialiasblur = -max(2.0 / u_DevicePixelRatio / a_Size, u_blur);

  vec2 offset = (extrude.xy * (newSize + u_stroke_width) + textrueOffsets);
  vec3 aPosition = a_Position;
  if(u_isMeter < 1.0) {
    // \u4E0D\u4EE5\u7C73\u4E3A\u5B9E\u9645\u5355\u4F4D
    offset = project_pixel(offset);
  } else {
    // \u4EE5\u7C73\u4E3A\u5B9E\u9645\u5355\u4F4D
    antialiasblur *= pow(19.0 - u_Zoom, 2.0);
    antialiasblur = max(antialiasblur, -0.01);
    // offset *= 0.5;

    if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
      aPosition.xy += offset;
      offset.x = 0.0;
      offset.y = 0.0;
    }
  }

  // TODP: /abs(extrude.x) \u662F\u4E3A\u4E86\u517C\u5BB9\u5730\u7403\u6A21\u5F0F
  v_data = vec4(extrude.x/abs(extrude.x), extrude.y/abs(extrude.y), antialiasblur,shape_type);


  // vec4 project_pos = project_position(vec4(a_Position.xy, 0.0, 1.0));
  vec4 project_pos = project_position(vec4(aPosition.xy, 0.0, 1.0));
  // gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offset, project_pixel(setPickingOrder(0.0)), 1.0));

  float raiseHeight = u_raisingHeight;
  if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
    float mapboxZoomScale = 4.0/pow(2.0, 21.0 - u_Zoom);
    raiseHeight = u_raisingHeight * mapboxZoomScale;
  }

  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
    gl_Position = u_Mvp * vec4(project_pos.xy + offset, raiseHeight, 1.0);
  } else {
    gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offset, u_raisingHeight, 1.0));
  }

  if(u_globel > 0.0) {
    gl_Position = u_ViewProjectionMatrix * vec4(a_Position + extrude * newSize * 0.1, 1.0);
  }
 
  // gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offset, 0.0, 1.0));

  setPickingColor(a_PickingColor);
}
`,Gve=function(e){Tt(n,e);var t=$ve(n);function n(){var r;Ae(this,n);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return r=t.call.apply(t,[this].concat(i)),m(D(r),"meter2coord",1),m(D(r),"isMeter",!1),r}return Oe(n,[{key:"getUninforms",value:function(){var a=this.layer.getLayerConfig(),i=a.opacity,o=i===void 0?1:i,s=a.strokeOpacity,l=s===void 0?1:s,u=a.strokeWidth,c=u===void 0?0:u,f=a.stroke,d=f===void 0?"rgba(0,0,0,0)":f,p=a.offsets,h=p===void 0?[0,0]:p,g=a.blend,v=a.blur,b=v===void 0?0:v,y=a.raisingHeight,x=y===void 0?0:y;if(this.dataTextureTest&&this.dataTextureNeedUpdate({opacity:o,strokeOpacity:l,strokeWidth:c,stroke:d,offsets:h})){this.judgeStyleAttributes({opacity:o,strokeOpacity:l,strokeWidth:c,stroke:d,offsets:h});var k=this.layer.getEncodedData(),T=this.calDataFrame(this.cellLength,k,this.cellProperties),C=T.data,I=T.width,P=T.height;this.rowCount=P,this.dataTexture=this.cellLength>0&&C.length>0?this.createTexture2D({flipY:!0,data:C,format:V.LUMINANCE,type:V.FLOAT,width:I,height:P}):this.createTexture2D({flipY:!0,data:[1],format:V.LUMINANCE,type:V.FLOAT,width:1,height:1})}return{u_raisingHeight:Number(x),u_isMeter:Number(this.isMeter),u_blur:b,u_additive:g==="additive"?1:0,u_globel:this.mapService.version===Ar.GLOBEL?1:0,u_dataTexture:this.dataTexture,u_cellTypeLayout:this.getCellTypeLayout(),u_opacity:er(o)?o:1,u_stroke_opacity:er(l)?l:1,u_stroke_width:er(c)?c:1,u_stroke_color:this.getStrokeColor(d),u_offsets:this.isOffsetStatic(h)?h:[0,0]}}},{key:"getAnimateUniforms",value:function(){var a=this.layer.getLayerConfig(),i=a.animateOption,o=i===void 0?{enable:!1}:i;return{u_aimate:this.animateOption2Array(o),u_time:this.layer.getLayerAnimateTime()}}},{key:"getAttribute",value:function(){return this.styleAttributeService.createAttributesAndIndices(this.layer.getEncodedData(),Cs)}},{key:"initModels",value:function(){var a=this.layer.getLayerConfig(),i=a.unit,o=i===void 0?"l7size":i,s=this.mapService.version;return o==="meter"&&s!==Ar.L7MAP&&s!==Ar.GLOBEL&&(this.isMeter=!0,this.calMeter2Coord()),this.buildModels()}},{key:"calMeter2Coord",value:function(){var a=Le(this.layer.getSource().extent,4),i=a[0],o=a[1],s=a[2],l=a[3],u=[(i+s)/2,(o+l)/2],c=this.mapService.version;if(c===Ar.MAPBOX&&window.mapboxgl.MercatorCoordinate){var f=window.mapboxgl.MercatorCoordinate.fromLngLat({lng:u[0],lat:u[1]},0),d=1,p=d*f.meterInMercatorCoordinateUnits(),h=new window.mapboxgl.MercatorCoordinate(f.x-p,f.y,f.z),g=h.toLngLat();this.meter2coord=u[0]-g.lng;return}var v=this.mapService.meterToCoord(u,[i,o]),b=this.mapService.meterToCoord(u,[s===i?s+.1:s,l===o?o+.1:l]);this.meter2coord=(v+b)/2,Boolean(this.meter2coord)||(this.meter2coord=7.70681090738883)}},{key:"buildModels",value:function(){var a=this.layer.getLayerConfig(),i=a.mask,o=i===void 0?!1:i,s=a.maskInside,l=s===void 0?!0:s,u=a.animateOption,c=u===void 0?{enable:!1}:u,f=this.getShaders(c),d=f.frag,p=f.vert,h=f.type,g=this.mapService.version==="GLOBEL";return this.layer.triangulation=g?pR:Cs,[this.layer.buildLayerModel({moduleName:"pointfill_"+h,vertexShader:p,fragmentShader:d,triangulation:g?pR:Cs,depth:{enable:g},blend:this.getBlend(),stencil:Vi(o,l),cull:{enable:!0,face:Hb(this.mapService.version)}})]}},{key:"getShaders",value:function(a){if(a.enable)switch(a.type){case"wave":return{frag:LR,vert:l_,type:"wave"};default:return{frag:LR,vert:l_,type:"wave"}}else return{frag:jve,vert:l_,type:"normal"}}},{key:"clearModels",value:function(){var a;(a=this.dataTexture)===null||a===void 0||a.destroy()}},{key:"animateOption2Array",value:function(a){return[a.enable?0:1,a.speed||1,a.rings||3,0]}},{key:"registerBuiltinAttributes",value:function(){var a=this,i=this.mapService.version==="GLOBEL";this.styleAttributeService.registerStyleAttribute({name:"extrude",type:kn.Attribute,descriptor:{name:"a_Extrude",buffer:{usage:V.DYNAMIC_DRAW,data:[],type:V.FLOAT},size:3,update:function(s,l,u,c){var f;if(i){var d=Le(u,3),p=d[0],h=d[1],g=d[2],v=Ya(0,0,1),b=Ya(p,0,g),y=p>=0?ak(v,b):Math.PI*2-ak(v,b),x=Math.PI*2-Math.asin(h/100),k=vo();HE(k,k,y),GE(k,k,x);var T=Ya(1,1,0);ch(T,T,k),Uf(T,T);var C=Ya(-1,1,0);ch(C,C,k),Uf(C,C);var I=Ya(-1,-1,0);ch(I,I,k),Uf(I,I);var P=Ya(1,-1,0);ch(P,P,k),Uf(P,P),f=[].concat($e(T),$e(C),$e(I),$e(P))}else f=[1,1,0,-1,1,0,-1,-1,0,1,-1,0];var j=c%4*3;return[f[j],f[j+1],f[j+2]]}}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:kn.Attribute,descriptor:{name:"a_Size",buffer:{usage:V.DYNAMIC_DRAW,data:[],type:V.FLOAT},size:1,update:function(s,l,u,c){var f=s.size,d=f===void 0?5:f;return Array.isArray(d)?[d[0]*a.meter2coord]:[d*a.meter2coord]}}}),this.styleAttributeService.registerStyleAttribute({name:"shape",type:kn.Attribute,descriptor:{name:"a_Shape",buffer:{usage:V.DYNAMIC_DRAW,data:[],type:V.FLOAT},size:1,update:function(s,l,u,c){var f=s.shape,d=f===void 0?2:f,p=a.layer.getLayerConfig().shape2d,h=p.indexOf(d);return[h]}}})}}]),n}(Qa);function Hve(e){var t=Wve();return function(){var r=ke(e),a;if(t){var i=ke(this).constructor;a=Reflect.construct(r,arguments,i)}else a=r.apply(this,arguments);return It(this,a)}}function Wve(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var Yve=`uniform sampler2D u_texture;
uniform vec2 u_textSize;

varying mat4 styleMappingMat; // \u4F20\u9012\u4ECE\u7247\u5143\u4E2D\u4F20\u9012\u7684\u6620\u5C04\u6570\u636E

#pragma include "sdf_2d"
#pragma include "picking"
varying vec2 v_uv; // \u672C\u8EAB\u7684 uv \u5750\u6807
varying vec2 v_Iconuv;

void main() {

  float opacity = styleMappingMat[0][0];

  vec2 pos = v_Iconuv / u_textSize + v_uv / u_textSize * 64.;
  gl_FragColor = texture2D(u_texture, pos);
  gl_FragColor.a *= opacity;

  gl_FragColor = filterColor(gl_FragColor);
}
`,Xve=`attribute vec4 a_Color;
attribute vec3 a_Position;
attribute vec3 a_Extrude;
attribute float a_Size;
attribute vec2 a_Uv;
attribute float a_Rotate;

varying mat4 styleMappingMat; // \u7528\u4E8E\u5C06\u5728\u9876\u70B9\u7740\u8272\u5668\u4E2D\u8BA1\u7B97\u597D\u7684\u6837\u5F0F\u503C\u4F20\u9012\u7ED9\u7247\u5143

uniform mat4 u_ModelMatrix;
uniform mat4 u_Mvp;
uniform mat2 u_RotateMatrix;
uniform float u_isMeter;

varying vec2 v_uv; // \u672C\u8EAB\u7684 uv \u5750\u6807
varying vec2 v_Iconuv; // icon \u8D34\u56FE\u7684 uv \u5750\u6807

uniform float u_opacity : 1;
uniform vec2 u_offsets;

#pragma include "styleMapping"
#pragma include "styleMappingCalOpacity"

#pragma include "projection"
#pragma include "picking"

void main() {
  vec3 extrude = a_Extrude;

  v_uv = (a_Extrude.xy + 1.0)/2.0;
  v_uv.y = 1.0 - v_uv.y;
  v_Iconuv = a_Uv;

  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97
  styleMappingMat = mat4(
    0.0, 0.0, 0.0, 0.0, // opacity - empty - empty - empty
    0.0, 0.0, 0.0, 0.0, // empty - empty - empty - empty
    0.0, 0.0, 0.0, 0.0, // offsets[0] - offsets[1]
    0.0, 0.0, 0.0, 0.0
  );

  float rowCount = u_cellTypeLayout[0][0];    // \u5F53\u524D\u7684\u6570\u636E\u7EB9\u7406\u6709\u51E0\u884C
  float columnCount = u_cellTypeLayout[0][1]; // \u5F53\u770B\u5230\u6570\u636E\u7EB9\u7406\u6709\u51E0\u5217
  float columnWidth = 1.0/columnCount;  // \u5217\u5BBD
  float rowHeight = 1.0/rowCount;       // \u884C\u9AD8
  float cellCount = calCellCount(); // opacity - strokeOpacity - strokeWidth - stroke - offsets
  float id = a_vertexId; // \u7B2Cn\u4E2A\u9876\u70B9
  float cellCurrentRow = floor(id * cellCount / columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u884C
  float cellCurrentColumn = mod(id * cellCount, columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u5217
  
  // cell \u56FA\u5B9A\u987A\u5E8F opacity -> strokeOpacity -> strokeWidth -> stroke ... 
  // \u6309\u987A\u5E8F\u4ECE cell \u4E2D\u53D6\u503C\u3001\u82E5\u6CA1\u6709\u5219\u81EA\u52A8\u5F80\u4E0B\u53D6\u503C
  float textureOffset = 0.0; // \u5728 cell \u4E2D\u53D6\u503C\u7684\u504F\u79FB\u91CF

  vec2 opacityAndOffset = calOpacityAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);
  styleMappingMat[0][0] = opacityAndOffset.r;
  textureOffset = opacityAndOffset.g;

  vec2 textrueOffsets = vec2(0.0, 0.0);
  if(hasOffsets()) {
    vec2 valueXPos = nextPos(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset);
    textrueOffsets.r = pos2value(valueXPos, columnWidth, rowHeight); // x
    textureOffset += 1.0;

    vec2 valueYPos = nextPos(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset);
    textrueOffsets.g = pos2value(valueYPos, columnWidth, rowHeight); // x
    textureOffset += 1.0;
  } else {
    textrueOffsets = u_offsets;
  }

  // cal style mapping

  highp float angle_sin = sin(a_Rotate);
  highp float angle_cos = cos(a_Rotate);
  mat2 rotation_matrix = mat2(angle_cos, -1.0 * angle_sin, angle_sin, angle_cos);

  // vec2 offset = (u_RotateMatrix * extrude.xy * (a_Size) + textrueOffsets);
  vec2 offset = (rotation_matrix * u_RotateMatrix * extrude.xy * (a_Size) + textrueOffsets);
  vec3 aPosition = a_Position;
  if(u_isMeter < 1.0) {
    // \u4E0D\u4EE5\u7C73\u4E3A\u5B9E\u9645\u5355\u4F4D
    offset = project_pixel(offset);
  } else {
    // \u4EE5\u7C73\u4E3A\u5B9E\u9645\u5355\u4F4D

    if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
      aPosition.xy += offset;
      offset.x = 0.0;
      offset.y = 0.0;
    }
  }


  // vec4 project_pos = project_position(vec4(a_Position.xy, 0.0, 1.0));
  vec4 project_pos = project_position(vec4(aPosition.xy, 0.0, 1.0));
  // gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offset, project_pixel(setPickingOrder(0.0)), 1.0));

  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
    gl_Position = u_Mvp * vec4(project_pos.xy + offset, 0.0, 1.0);
  } else {
    gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offset, project_pixel(setPickingOrder(0.0)), 1.0));
  }
 
  // gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offset, 0.0, 1.0));

  setPickingColor(a_PickingColor);
}
`,Zve=function(e){Tt(n,e);var t=Hve(n);function n(){var r;Ae(this,n);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return r=t.call.apply(t,[this].concat(i)),m(D(r),"meter2coord",1),m(D(r),"texture",void 0),m(D(r),"isMeter",!1),m(D(r),"radian",0),m(D(r),"updateTexture",function(){var s=r.rendererService.createTexture2D;if(r.texture){r.texture.update({data:r.iconService.getCanvas(),mag:"linear",min:"linear mipmap nearest",mipmap:!0}),r.layer.renderLayers();return}r.texture=s({data:r.iconService.getCanvas(),mag:V.LINEAR,min:V.LINEAR_MIPMAP_LINEAR,premultiplyAlpha:!1,width:1024,height:r.iconService.canvasHeight||128,mipmap:!0})}),r}return Oe(n,[{key:"getUninforms",value:function(){var a=this.layer.getLayerConfig(),i=a.opacity,o=i===void 0?1:i,s=a.offsets,l=s===void 0?[0,0]:s,u=a.rotation;this.rendererService.getDirty()&&this.texture.bind();var c=1;if((this.mapService.version==="GAODE2.x"||this.mapService.version==="GAODE1.x")&&(c=-1),this.radian=u!==void 0?c*Math.PI*u/180:c*Math.PI*(this.mapService.getRotation()%360)/180,this.dataTextureTest&&this.dataTextureNeedUpdate({opacity:o,offsets:l})){this.judgeStyleAttributes({opacity:o,offsets:l});var f=this.layer.getEncodedData(),d=this.calDataFrame(this.cellLength,f,this.cellProperties),p=d.data,h=d.width,g=d.height;this.rowCount=g,this.dataTexture=this.cellLength>0&&p.length>0?this.createTexture2D({flipY:!0,data:p,format:V.LUMINANCE,type:V.FLOAT,width:h,height:g}):this.createTexture2D({flipY:!0,data:[1],format:V.LUMINANCE,type:V.FLOAT,width:1,height:1})}return{u_isMeter:Number(this.isMeter),u_RotateMatrix:new Float32Array([Math.cos(this.radian),Math.sin(this.radian),-Math.sin(this.radian),Math.cos(this.radian)]),u_dataTexture:this.dataTexture,u_cellTypeLayout:this.getCellTypeLayout(),u_texture:this.texture,u_textSize:[1024,this.iconService.canvasHeight||128],u_opacity:er(o)?o:1,u_offsets:this.isOffsetStatic(l)?l:[0,0]}}},{key:"getAttribute",value:function(){return this.styleAttributeService.createAttributesAndIndices(this.layer.getEncodedData(),Cs)}},{key:"initModels",value:function(){this.updateTexture(),this.iconService.on("imageUpdate",this.updateTexture);var a=this.layer.getLayerConfig(),i=a.unit,o=i===void 0?"l7size":i,s=this.mapService.version;return o==="meter"&&s!==Ar.L7MAP&&s!==Ar.GLOBEL&&(this.isMeter=!0,this.calMeter2Coord()),this.buildModels()}},{key:"calMeter2Coord",value:function(){var a=Le(this.layer.getSource().extent,4),i=a[0],o=a[1],s=a[2],l=a[3],u=[(i+s)/2,(o+l)/2],c=this.mapService.version;if(c===Ar.MAPBOX&&window.mapboxgl.MercatorCoordinate){var f=window.mapboxgl.MercatorCoordinate.fromLngLat({lng:u[0],lat:u[1]},0),d=1,p=d*f.meterInMercatorCoordinateUnits(),h=new window.mapboxgl.MercatorCoordinate(f.x-p,f.y,f.z),g=h.toLngLat();this.meter2coord=u[0]-g.lng;return}var v=this.mapService.meterToCoord(u,[i,o]),b=this.mapService.meterToCoord(u,[s===i?s+.1:s,l===o?o+.1:l]);this.meter2coord=(v+b)/2,Boolean(this.meter2coord)||(this.meter2coord=7.70681090738883)}},{key:"buildModels",value:function(){var a=this.layer.getLayerConfig(),i=a.mask,o=i===void 0?!1:i,s=a.maskInside,l=s===void 0?!0:s,u=this.getShaders(),c=u.frag,f=u.vert,d=u.type;return[this.layer.buildLayerModel({moduleName:d,vertexShader:f,fragmentShader:c,triangulation:Cs,depth:{enable:!1},blend:this.getBlend(),stencil:Vi(o,l),cull:{enable:!0,face:Hb(this.mapService.version)}})]}},{key:"getShaders",value:function(){return{frag:Yve,vert:Xve,type:"point_fillImage"}}},{key:"clearModels",value:function(){var a,i;this.iconService.off("imageUpdate",this.updateTexture),(a=this.texture)===null||a===void 0||a.destroy(),(i=this.dataTexture)===null||i===void 0||i.destroy()}},{key:"registerBuiltinAttributes",value:function(){var a=this;this.styleAttributeService.registerStyleAttribute({name:"rotate",type:kn.Attribute,descriptor:{name:"a_Rotate",buffer:{usage:V.DYNAMIC_DRAW,data:[],type:V.FLOAT},size:1,update:function(o,s,l,u){var c=o.rotate,f=c===void 0?0:c;return Array.isArray(f)?[f[0]]:[f]}}}),this.styleAttributeService.registerStyleAttribute({name:"uv",type:kn.Attribute,descriptor:{name:"a_Uv",buffer:{usage:V.DYNAMIC_DRAW,data:[],type:V.FLOAT},size:2,update:function(o,s,l,u){var c=a.iconService.getIconMap(),f=o.shape,d=c[f]||{x:0,y:0},p=d.x,h=d.y;return[p,h]}}}),this.styleAttributeService.registerStyleAttribute({name:"extrude",type:kn.Attribute,descriptor:{name:"a_Extrude",buffer:{usage:V.DYNAMIC_DRAW,data:[],type:V.FLOAT},size:3,update:function(o,s,l,u){var c=[1,1,0,-1,1,0,-1,-1,0,1,-1,0],f=u%4*3;return[c[f],c[f+1],c[f+2]]}}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:kn.Attribute,descriptor:{name:"a_Size",buffer:{usage:V.DYNAMIC_DRAW,data:[],type:V.FLOAT},size:1,update:function(o,s,l,u){var c=o.size,f=c===void 0?5:c;return Array.isArray(f)?[f[0]*a.meter2coord]:[f*a.meter2coord]}}})}}]),n}(Qa);function qve(e){var t=Kve();return function(){var r=ke(e),a;if(t){var i=ke(this).constructor;a=Reflect.construct(r,arguments,i)}else a=r.apply(this,arguments);return It(this,a)}}function Kve(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var Qve=`
uniform sampler2D u_texture;
varying vec4 v_color;
varying vec2 v_uv;
uniform vec2 u_textSize;
uniform float u_opacity : 1;

varying mat4 styleMappingMat; // \u4F20\u9012\u4ECE\u7247\u5143\u4E2D\u4F20\u9012\u7684\u6620\u5C04\u6570\u636E

#pragma include "picking"

void main(){
      float opacity = styleMappingMat[0][0];
      float size = styleMappingMat[1][0];
      vec2 pos = v_uv / u_textSize + gl_PointCoord / u_textSize * 64.;
      vec4 textureColor;

      // Y = 0.299R + 0.587G + 0.114B // \u4EAE\u5EA6\u63D0\u53D6
     
      textureColor = texture2D(u_texture, pos);

      // Tip: \u53BB\u9664\u8FB9\u7F18\u90E8\u5206 mipmap \u5BFC\u81F4\u7684\u6DF7\u5408\u53D8\u6697
      float fragmengTocenter = distance(vec2(0.5), gl_PointCoord);
      if(fragmengTocenter >= 0.5) {
            float luma = 0.299 * textureColor.r + 0.587 * textureColor.g + 0.114 * textureColor.b;
            textureColor.a *= luma;
      }
      
      

      if(all(lessThan(v_color, vec4(1.0+0.00001))) && all(greaterThan(v_color, vec4(1.0-0.00001))) || v_color==vec4(1.0)){
            gl_FragColor= textureColor;
      }else {
            gl_FragColor= step(0.01, textureColor.z) * v_color;
      }

      gl_FragColor.a = gl_FragColor.a * opacity;
      gl_FragColor = filterColor(gl_FragColor);
}
`,Jve=`precision highp float;
attribute vec3 a_Position;
attribute vec4 a_Color;
attribute vec2 a_Uv;
attribute float a_Size;
varying vec4 v_color;
varying vec2 v_uv;
uniform mat4 u_ModelMatrix;
uniform mat4 u_Mvp;
uniform vec2 u_offsets;

uniform float u_opacity : 1;

varying mat4 styleMappingMat; // \u7528\u4E8E\u5C06\u5728\u9876\u70B9\u7740\u8272\u5668\u4E2D\u8BA1\u7B97\u597D\u7684\u6837\u5F0F\u503C\u4F20\u9012\u7ED9\u7247\u5143

#pragma include "styleMapping"
#pragma include "styleMappingCalOpacity"

#pragma include "projection"
#pragma include "picking"

void main() {
  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97
  styleMappingMat = mat4(
    0.0, 0.0, 0.0, 0.0, // opacity - strokeOpacity - strokeWidth - empty
    0.0, 0.0, 0.0, 0.0, // strokeR - strokeG - strokeB - strokeA
    0.0, 0.0, 0.0, 0.0, // offsets[0] - offsets[1]
    0.0, 0.0, 0.0, 0.0
  );

  float rowCount = u_cellTypeLayout[0][0];    // \u5F53\u524D\u7684\u6570\u636E\u7EB9\u7406\u6709\u51E0\u884C
  float columnCount = u_cellTypeLayout[0][1]; // \u5F53\u770B\u5230\u6570\u636E\u7EB9\u7406\u6709\u51E0\u5217
  float columnWidth = 1.0/columnCount;  // \u5217\u5BBD
  float rowHeight = 1.0/rowCount;       // \u884C\u9AD8
  float cellCount = calCellCount(); // opacity - strokeOpacity - strokeWidth - stroke - offsets
  float id = a_vertexId; // \u7B2Cn\u4E2A\u9876\u70B9
  float cellCurrentRow = floor(id * cellCount / columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u884C
  float cellCurrentColumn = mod(id * cellCount, columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u5217
  
  // cell \u56FA\u5B9A\u987A\u5E8F opacity -> strokeOpacity -> strokeWidth -> stroke ... 
  // \u6309\u987A\u5E8F\u4ECE cell \u4E2D\u53D6\u503C\u3001\u82E5\u6CA1\u6709\u5219\u81EA\u52A8\u5F80\u4E0B\u53D6\u503C
  float textureOffset = 0.0; // \u5728 cell \u4E2D\u53D6\u503C\u7684\u504F\u79FB\u91CF

  vec2 opacityAndOffset = calOpacityAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);
  styleMappingMat[0][0] = opacityAndOffset.r;
  textureOffset = opacityAndOffset.g;

  styleMappingMat[1][0] = a_Size;

  vec2 textrueOffsets = vec2(0.0, 0.0);
  if(hasOffsets()) {
    vec2 valueXPos = nextPos(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset);
    textrueOffsets.r = pos2value(valueXPos, columnWidth, rowHeight); // x
    textureOffset += 1.0;

    vec2 valueYPos = nextPos(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset);
    textrueOffsets.g = pos2value(valueYPos, columnWidth, rowHeight); // x
    textureOffset += 1.0;
  } else {
    textrueOffsets = u_offsets;
  }

  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97
   v_color = a_Color;
   v_uv = a_Uv;
   vec4 project_pos = project_position(vec4(a_Position, 1.0));
   
  //  vec2 offset = project_pixel(u_offsets);
  vec2 offset = project_pixel(textrueOffsets);

  //  gl_Position = project_common_position_to_clipspace(vec4(vec2(project_pos.xy + offset),project_pos.z, 1.0));

  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
    gl_Position = u_Mvp * vec4(vec2(project_pos.xy + offset),project_pos.z, 1.0);
  } else {
    gl_Position = project_common_position_to_clipspace(vec4(vec2(project_pos.xy + offset),project_pos.z, 1.0));
  }
  gl_PointSize = a_Size * 2.0 * u_DevicePixelRatio;

  setPickingColor(a_PickingColor);
}
`,ebe=function(e){Tt(n,e);var t=qve(n);function n(){var r;Ae(this,n);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return r=t.call.apply(t,[this].concat(i)),m(D(r),"texture",void 0),r}return Oe(n,[{key:"getUninforms",value:function(){var a=this.layer.getLayerConfig(),i=a.opacity;return{u_opacity:i||1,u_texture:this.texture,u_textSize:[1024,this.iconService.canvasHeight||128]}}},{key:"initModels",value:function(){var a=this;return this.initIconFontGlyphs(),this.registerBuiltinAttributes(),this.updateTexture(),this.iconService.on("imageUpdate",function(){a.updateTexture(),a.layer.render()}),[this.layer.buildLayerModel({moduleName:"pointiconImage",vertexShader:Jve,fragmentShader:Qve,triangulation:fD,primitive:V.POINTS,depth:{enable:!1},blend:this.getBlend()})]}},{key:"clearModels",value:function(){var a;(a=this.dataTexture)===null||a===void 0||a.destroy()}},{key:"registerBuiltinAttributes",value:function(){var a=this;this.styleAttributeService.registerStyleAttribute({name:"size",type:kn.Attribute,descriptor:{name:"a_Size",buffer:{usage:V.DYNAMIC_DRAW,data:[],type:V.FLOAT},size:1,update:function(o,s,l,u){var c=o.size;return Array.isArray(c)?[c[0]]:[c]}}}),this.styleAttributeService.registerStyleAttribute({name:"uv",type:kn.Attribute,descriptor:{name:"a_Uv",buffer:{usage:V.DYNAMIC_DRAW,data:[],type:V.FLOAT},size:2,update:function(o,s,l,u){var c=a.fontService.mapping,f=o.shape,d=a.fontService.getGlyph(f),p=c[d],h=p.x,g=p.y;return[h,g]}}})}},{key:"updateTexture",value:function(){var a=this.rendererService.createTexture2D,i=this.fontService.canvas;this.texture=a({data:i,mag:V.LINEAR,min:V.LINEAR,width:i.width,height:i.height})}},{key:"initIconFontGlyphs",value:function(){var a=this,i=this.layer.getLayerConfig(),o=i.fontWeight,s=o===void 0?"normal":o,l=i.fontFamily,u=l===void 0?"sans-serif":l,c=this.layer.getEncodedData(),f=[];c.forEach(function(d){var p=d.shape,h=p===void 0?"":p;h=h.toString();var g=a.fontService.getGlyph(h);f.indexOf(g)===-1&&f.push(g)}),this.fontService.setFontOptions({characterSet:f,fontWeight:s,fontFamily:u,fontSize:48})}}]),n}(Qa);function tbe(e){var t=nbe();return function(){var r=ke(e),a;if(t){var i=ke(this).constructor;a=Reflect.construct(r,arguments,i)}else a=r.apply(this,arguments);return It(this,a)}}function nbe(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var rbe=`
uniform sampler2D u_texture;
varying vec4 v_color;
varying vec2 v_uv;
uniform vec2 u_textSize;
uniform float u_opacity : 1;

varying mat4 styleMappingMat; // \u4F20\u9012\u4ECE\u7247\u5143\u4E2D\u4F20\u9012\u7684\u6620\u5C04\u6570\u636E

#pragma include "picking"

void main(){
      float opacity = styleMappingMat[0][0];
      float size = styleMappingMat[1][0];
      vec2 pos = v_uv / u_textSize + gl_PointCoord / u_textSize * 64.;
      vec4 textureColor;

      // Y = 0.299R + 0.587G + 0.114B // \u4EAE\u5EA6\u63D0\u53D6
     
      textureColor = texture2D(u_texture, pos);

      // Tip: \u53BB\u9664\u8FB9\u7F18\u90E8\u5206 mipmap \u5BFC\u81F4\u7684\u6DF7\u5408\u53D8\u6697
      float fragmengTocenter = distance(vec2(0.5), gl_PointCoord);
      if(fragmengTocenter >= 0.5) {
            float luma = 0.299 * textureColor.r + 0.587 * textureColor.g + 0.114 * textureColor.b;
            textureColor.a *= luma;
      }
      
      

      if(all(lessThan(v_color, vec4(1.0+0.00001))) && all(greaterThan(v_color, vec4(1.0-0.00001))) || v_color==vec4(1.0)){
            gl_FragColor= textureColor;
      }else {
            gl_FragColor= step(0.01, textureColor.z) * v_color;
      }

      gl_FragColor.a = gl_FragColor.a * opacity;
      gl_FragColor = filterColor(gl_FragColor);
}
`,abe=`precision highp float;
attribute vec3 a_Position;
attribute vec4 a_Color;
attribute vec2 a_Uv;
attribute float a_Size;
varying vec4 v_color;
varying vec2 v_uv;
uniform mat4 u_ModelMatrix;
uniform mat4 u_Mvp;
uniform vec2 u_offsets;

uniform float u_opacity : 1;

varying mat4 styleMappingMat; // \u7528\u4E8E\u5C06\u5728\u9876\u70B9\u7740\u8272\u5668\u4E2D\u8BA1\u7B97\u597D\u7684\u6837\u5F0F\u503C\u4F20\u9012\u7ED9\u7247\u5143

#pragma include "styleMapping"
#pragma include "styleMappingCalOpacity"

#pragma include "projection"
#pragma include "picking"

void main() {
  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97
  styleMappingMat = mat4(
    0.0, 0.0, 0.0, 0.0, // opacity - strokeOpacity - strokeWidth - empty
    0.0, 0.0, 0.0, 0.0, // strokeR - strokeG - strokeB - strokeA
    0.0, 0.0, 0.0, 0.0, // offsets[0] - offsets[1]
    0.0, 0.0, 0.0, 0.0
  );

  float rowCount = u_cellTypeLayout[0][0];    // \u5F53\u524D\u7684\u6570\u636E\u7EB9\u7406\u6709\u51E0\u884C
  float columnCount = u_cellTypeLayout[0][1]; // \u5F53\u770B\u5230\u6570\u636E\u7EB9\u7406\u6709\u51E0\u5217
  float columnWidth = 1.0/columnCount;  // \u5217\u5BBD
  float rowHeight = 1.0/rowCount;       // \u884C\u9AD8
  float cellCount = calCellCount(); // opacity - strokeOpacity - strokeWidth - stroke - offsets
  float id = a_vertexId; // \u7B2Cn\u4E2A\u9876\u70B9
  float cellCurrentRow = floor(id * cellCount / columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u884C
  float cellCurrentColumn = mod(id * cellCount, columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u5217
  
  // cell \u56FA\u5B9A\u987A\u5E8F opacity -> strokeOpacity -> strokeWidth -> stroke ... 
  // \u6309\u987A\u5E8F\u4ECE cell \u4E2D\u53D6\u503C\u3001\u82E5\u6CA1\u6709\u5219\u81EA\u52A8\u5F80\u4E0B\u53D6\u503C
  float textureOffset = 0.0; // \u5728 cell \u4E2D\u53D6\u503C\u7684\u504F\u79FB\u91CF

  vec2 opacityAndOffset = calOpacityAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);
  styleMappingMat[0][0] = opacityAndOffset.r;
  textureOffset = opacityAndOffset.g;

  styleMappingMat[1][0] = a_Size;

  vec2 textrueOffsets = vec2(0.0, 0.0);
  if(hasOffsets()) {
    vec2 valueXPos = nextPos(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset);
    textrueOffsets.r = pos2value(valueXPos, columnWidth, rowHeight); // x
    textureOffset += 1.0;

    vec2 valueYPos = nextPos(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset);
    textrueOffsets.g = pos2value(valueYPos, columnWidth, rowHeight); // x
    textureOffset += 1.0;
  } else {
    textrueOffsets = u_offsets;
  }

  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97
   v_color = a_Color;
   v_uv = a_Uv;
   vec4 project_pos = project_position(vec4(a_Position, 1.0));
   
  //  vec2 offset = project_pixel(u_offsets);
  vec2 offset = project_pixel(textrueOffsets);

  //  gl_Position = project_common_position_to_clipspace(vec4(vec2(project_pos.xy + offset),project_pos.z, 1.0));

  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
    gl_Position = u_Mvp * vec4(vec2(project_pos.xy + offset),project_pos.z, 1.0);
  } else {
    gl_Position = project_common_position_to_clipspace(vec4(vec2(project_pos.xy + offset),project_pos.z, 1.0));
  }
  gl_PointSize = a_Size * 2.0 * u_DevicePixelRatio;

  setPickingColor(a_PickingColor);
}
`,ibe=function(e){Tt(n,e);var t=tbe(n);function n(){var r;Ae(this,n);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return r=t.call.apply(t,[this].concat(i)),m(D(r),"texture",void 0),m(D(r),"updateTexture",function(){var s=r.rendererService.createTexture2D;if(r.texture){r.texture.update({data:r.iconService.getCanvas(),mag:"linear",min:"linear mipmap nearest",mipmap:!0}),r.layer.renderLayers();return}r.texture=s({data:r.iconService.getCanvas(),mag:V.LINEAR,min:V.LINEAR_MIPMAP_LINEAR,premultiplyAlpha:!1,width:1024,height:r.iconService.canvasHeight||128,mipmap:!0})}),r}return Oe(n,[{key:"getUninforms",value:function(){var a=this.layer.getLayerConfig(),i=a.opacity,o=i===void 0?1:i,s=a.offsets,l=s===void 0?[0,0]:s;if(this.rendererService.getDirty()&&this.texture.bind(),this.dataTextureTest&&this.dataTextureNeedUpdate({opacity:o,offsets:l})){this.judgeStyleAttributes({opacity:o,offsets:l});var u=this.layer.getEncodedData(),c=this.calDataFrame(this.cellLength,u,this.cellProperties),f=c.data,d=c.width,p=c.height;this.rowCount=p,this.dataTexture=this.cellLength>0&&f.length>0?this.createTexture2D({flipY:!0,data:f,format:V.LUMINANCE,type:V.FLOAT,width:d,height:p}):this.createTexture2D({flipY:!0,data:[1],format:V.LUMINANCE,type:V.FLOAT,width:1,height:1})}return{u_dataTexture:this.dataTexture,u_cellTypeLayout:this.getCellTypeLayout(),u_texture:this.texture,u_textSize:[1024,this.iconService.canvasHeight||128],u_opacity:er(o)?o:1,u_offsets:this.isOffsetStatic(l)?l:[0,0]}}},{key:"initModels",value:function(){return this.registerBuiltinAttributes(),this.updateTexture(),this.iconService.on("imageUpdate",this.updateTexture),this.buildModels()}},{key:"clearModels",value:function(){var a,i;(a=this.texture)===null||a===void 0||a.destroy(),(i=this.dataTexture)===null||i===void 0||i.destroy(),this.iconService.off("imageUpdate",this.updateTexture)}},{key:"buildModels",value:function(){var a=this.layer.getLayerConfig(),i=a.mask,o=i===void 0?!1:i,s=a.maskInside,l=s===void 0?!0:s;return[this.layer.buildLayerModel({moduleName:"pointImage",vertexShader:abe,fragmentShader:rbe,triangulation:fD,primitive:V.POINTS,depth:{enable:!1},blend:this.getBlend(),stencil:Vi(o,l)})]}},{key:"registerBuiltinAttributes",value:function(){var a=this;this.styleAttributeService.registerStyleAttribute({name:"size",type:kn.Attribute,descriptor:{name:"a_Size",buffer:{usage:V.DYNAMIC_DRAW,data:[],type:V.FLOAT},size:1,update:function(o,s,l,u){var c=o.size,f=c===void 0?5:c;return Array.isArray(f)?[f[0]]:[f]}}}),this.styleAttributeService.registerStyleAttribute({name:"uv",type:kn.Attribute,descriptor:{name:"a_Uv",buffer:{usage:V.DYNAMIC_DRAW,data:[],type:V.FLOAT},size:2,update:function(o,s,l,u){var c=a.iconService.getIconMap(),f=o.shape,d=c[f]||{x:0,y:0},p=d.x,h=d.y;return[p,h]}}})}}]),n}(Qa);function obe(e){var t=sbe();return function(){var r=ke(e),a;if(t){var i=ke(this).constructor;a=Reflect.construct(r,arguments,i)}else a=r.apply(this,arguments);return It(this,a)}}function sbe(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var lbe=`
uniform float u_opacity : 1;
uniform vec2 u_offsets;
varying vec4 v_color;
varying mat4 styleMappingMat; // \u4F20\u9012\u4ECE\u7247\u5143\u4E2D\u4F20\u9012\u7684\u6620\u5C04\u6570\u636E

#pragma include "picking"
void main() {
  float opacity = styleMappingMat[0][0];

  gl_FragColor = v_color;
  // gl_FragColor.a =gl_FragColor.a * u_opacity;
  gl_FragColor.a =gl_FragColor.a * opacity;
  gl_FragColor = filterColor(gl_FragColor);
}
`,ube=`
attribute vec3 a_Position;
uniform mat4 u_ModelMatrix;
uniform mat4 u_Mvp;
attribute float a_Size;
attribute vec4 a_Color;
varying vec4 v_color;

uniform float u_opacity : 1;
uniform vec2 u_offsets;

varying mat4 styleMappingMat; // \u7528\u4E8E\u5C06\u5728\u9876\u70B9\u7740\u8272\u5668\u4E2D\u8BA1\u7B97\u597D\u7684\u6837\u5F0F\u503C\u4F20\u9012\u7ED9\u7247\u5143

#pragma include "styleMapping"
#pragma include "styleMappingCalOpacity"

#pragma include "projection"
#pragma include "picking"
#pragma include "project"
void main() {
  v_color = a_Color;

  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97
styleMappingMat = mat4(
    0.0, 0.0, 0.0, 0.0, // opacity - strokeOpacity - strokeWidth - empty
    0.0, 0.0, 0.0, 0.0, // strokeR - strokeG - strokeB - strokeA
    0.0, 0.0, 0.0, 0.0, // offsets[0] - offsets[1]
    0.0, 0.0, 0.0, 0.0
  );

  float rowCount = u_cellTypeLayout[0][0];    // \u5F53\u524D\u7684\u6570\u636E\u7EB9\u7406\u6709\u51E0\u884C
  float columnCount = u_cellTypeLayout[0][1]; // \u5F53\u770B\u5230\u6570\u636E\u7EB9\u7406\u6709\u51E0\u5217
  float columnWidth = 1.0/columnCount;  // \u5217\u5BBD
  float rowHeight = 1.0/rowCount;       // \u884C\u9AD8
  float cellCount = calCellCount(); // opacity - strokeOpacity - strokeWidth - stroke - offsets
  float id = a_vertexId; // \u7B2Cn\u4E2A\u9876\u70B9
  float cellCurrentRow = floor(id * cellCount / columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u884C
  float cellCurrentColumn = mod(id * cellCount, columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u5217
  
  // cell \u56FA\u5B9A\u987A\u5E8F opacity -> strokeOpacity -> strokeWidth -> stroke ... 
  // \u6309\u987A\u5E8F\u4ECE cell \u4E2D\u53D6\u503C\u3001\u82E5\u6CA1\u6709\u5219\u81EA\u52A8\u5F80\u4E0B\u53D6\u503C
  float textureOffset = 0.0; // \u5728 cell \u4E2D\u53D6\u503C\u7684\u504F\u79FB\u91CF

  vec2 opacityAndOffset = calOpacityAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);
  styleMappingMat[0][0] = opacityAndOffset.r;
  textureOffset = opacityAndOffset.g;

  vec2 textrueOffsets = vec2(0.0, 0.0);
  if(hasOffsets()) {
    vec2 valueXPos = nextPos(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset);
    textrueOffsets.r = pos2value(valueXPos, columnWidth, rowHeight); // x
    textureOffset += 1.0;

    vec2 valueYPos = nextPos(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset);
    textrueOffsets.g = pos2value(valueYPos, columnWidth, rowHeight); // x
    textureOffset += 1.0;
  } else {
    textrueOffsets = u_offsets;
  }

  // cal style mapping
  
  // vec2 offset = project_pixel(u_offsets);
  vec2 offset = project_pixel(textrueOffsets);
  // vec4 project_pos = project_position(vec4(a_Position, 1.0)) + vec4(a_Size / 2.,-a_Size /2.,0.,0.);
  // gl_Position = project_common_position_to_clipspace(vec4(vec2(project_pos.xy+offset),project_pos.z,project_pos.w));\\
  // 
  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
    // vec2 offset = project_pixel((u_offsets));
    gl_Position = u_Mvp * vec4(a_Position.xy + offset, a_Position.z, 1.0);
  } else { // else
    // vec2 offset = project_pixel(u_offsets);
    vec4 project_pos = project_position(vec4(a_Position, 1.0)) + vec4(a_Size / 2.,-a_Size /2.,0.,0.);
    gl_Position = project_common_position_to_clipspace(vec4(vec2(project_pos.xy+offset),project_pos.z,project_pos.w));
  }

  gl_PointSize = a_Size * 2.0 * u_DevicePixelRatio;
  setPickingColor(a_PickingColor);
}
`;function NR(e){var t=e.coordinates;return{vertices:$e(t),indices:[0],size:t.length}}var cbe=function(e){Tt(n,e);var t=obe(n);function n(){return Ae(this,n),t.apply(this,arguments)}return Oe(n,[{key:"getDefaultStyle",value:function(){return{blend:"additive"}}},{key:"getUninforms",value:function(){var a=this.layer.getLayerConfig(),i=a.opacity,o=i===void 0?1:i,s=a.offsets,l=s===void 0?[0,0]:s;if(this.dataTextureTest&&this.dataTextureNeedUpdate({opacity:o,offsets:l})){this.judgeStyleAttributes({opacity:o,offsets:l});var u=this.layer.getEncodedData(),c=this.calDataFrame(this.cellLength,u,this.cellProperties),f=c.data,d=c.width,p=c.height;this.rowCount=p,this.dataTexture=this.cellLength>0&&f.length>0?this.createTexture2D({flipY:!0,data:f,format:V.LUMINANCE,type:V.FLOAT,width:d,height:p}):this.createTexture2D({flipY:!0,data:[1],format:V.LUMINANCE,type:V.FLOAT,width:1,height:1})}return{u_dataTexture:this.dataTexture,u_cellTypeLayout:this.getCellTypeLayout(),u_opacity:er(o)?o:1,u_offsets:this.isOffsetStatic(l)?l:[0,0]}}},{key:"initModels",value:function(){return this.buildModels()}},{key:"buildModels",value:function(){var a=this.layer.getLayerConfig(),i=a.mask,o=i===void 0?!1:i,s=a.maskInside,l=s===void 0?!0:s;return this.layer.triangulation=NR,[this.layer.buildLayerModel({moduleName:"normalpoint",vertexShader:ube,fragmentShader:lbe,triangulation:NR,depth:{enable:!1},primitive:V.POINTS,blend:this.getBlend(),stencil:Vi(o,l)})]}},{key:"clearModels",value:function(){var a;(a=this.dataTexture)===null||a===void 0||a.destroy()}},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"size",type:kn.Attribute,descriptor:{name:"a_Size",buffer:{usage:V.DYNAMIC_DRAW,data:[],type:V.FLOAT},size:1,update:function(i,o,s,l){var u=i.size,c=u===void 0?1:u;return Array.isArray(c)?[c[0]]:[c]}}})}},{key:"defaultStyleOptions",value:function(){return{blend:ho.additive}}}]),n}(Qa);function fbe(e){var t=dbe();return function(){var r=ke(e),a;if(t){var i=ke(this).constructor;a=Reflect.construct(r,arguments,i)}else a=r.apply(this,arguments);return It(this,a)}}function dbe(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var pbe=`
uniform float u_additive;

varying mat4 styleMappingMat; // \u4F20\u9012\u4ECE\u7247\u5143\u4E2D\u4F20\u9012\u7684\u6620\u5C04\u6570\u636E

varying vec4 v_data;
varying vec4 v_color;
varying float v_radius;

#pragma include "sdf_2d"
#pragma include "picking"

void main() {
  int shape = int(floor(v_data.w + 0.5));

  vec4 textrueStroke = vec4(
    styleMappingMat[1][0],
    styleMappingMat[1][1],
    styleMappingMat[1][2],
    styleMappingMat[1][3]
  );

  float opacity = styleMappingMat[0][0];

  lowp float antialiasblur = v_data.z;
  float r = v_radius / (v_radius);

  float outer_df = sdCircle(v_data.xy, 1.0);
  float inner_df = sdCircle(v_data.xy, r);

  float opacity_t = smoothstep(0.0, antialiasblur, outer_df);

  gl_FragColor = vec4(v_color.rgb, v_color.a * opacity);

  if(u_additive > 0.0) {
    gl_FragColor *= opacity_t;
  } else {
    gl_FragColor.a *= opacity_t;
  }

  if(gl_FragColor.a > 0.0) {
    gl_FragColor = filterColor(gl_FragColor);
  }

  vec2 extrude =  styleMappingMat[2].ba;
  vec2 dir = normalize(extrude);
  vec2 baseDir = vec2(1.0, 0.0);
  float pi = 3.14159265359;
  // full circle
  // float rades = dot(dir, baseDir);
  // float flag = sign(dir.y);
  // float radar_v = (flag - 1.0) * -0.5 + flag * acos(rades)/pi/2.0;
  
  // half circle
  float flag = sign(dir.y);
  float rades = dot(dir, baseDir);
  float radar_v = (flag - 1.0) * -0.5 * acos(rades)/pi;
  // simple AA
  if(radar_v > 0.99) {
    radar_v = 1.0 - (radar_v - 0.99)/0.01;
  }

  gl_FragColor.a *= radar_v;
}
`,hbe=`attribute vec4 a_Color;
attribute vec3 a_Position;
attribute vec3 a_Extrude;
attribute float a_Size;
attribute float a_Shape;
uniform float u_speed: 1.0;
uniform float u_time;

varying mat4 styleMappingMat; // \u7528\u4E8E\u5C06\u5728\u9876\u70B9\u7740\u8272\u5668\u4E2D\u8BA1\u7B97\u597D\u7684\u6837\u5F0F\u503C\u4F20\u9012\u7ED9\u7247\u5143

uniform mat4 u_ModelMatrix;
uniform mat4 u_Mvp;
uniform float u_isMeter;

varying vec4 v_data;
varying vec4 v_color;
varying float v_radius;

uniform float u_opacity : 1;
uniform vec2 u_offsets;

#pragma include "styleMapping"
#pragma include "styleMappingCalOpacity"

#pragma include "projection"
#pragma include "picking"

void main() {
  vec3 extrude = a_Extrude;
  float shape_type = a_Shape;
  float newSize = setPickingSize(a_Size);

  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97
  styleMappingMat = mat4(
    0.0, 0.0, 0.0, 0.0, // opacity - empty - empty - empty
    0.0, 0.0, 0.0, 0.0, // empty - empty - empty - empty
    0.0, 0.0, 0.0, 0.0, // offsets[0] - offsets[1] - a_Extrude.x - a_Extrude.y
    0.0, 0.0, 0.0, 0.0  // 
  );

  float time = u_time * u_speed;
  mat2 rotateMatrix = mat2( 
    cos(time), sin(time), 
    -sin(time), cos(time)
  );
  styleMappingMat[2].ba = rotateMatrix * a_Extrude.xy;

  float rowCount = u_cellTypeLayout[0][0];    // \u5F53\u524D\u7684\u6570\u636E\u7EB9\u7406\u6709\u51E0\u884C
  float columnCount = u_cellTypeLayout[0][1]; // \u5F53\u770B\u5230\u6570\u636E\u7EB9\u7406\u6709\u51E0\u5217
  float columnWidth = 1.0/columnCount;  // \u5217\u5BBD
  float rowHeight = 1.0/rowCount;       // \u884C\u9AD8
  float cellCount = calCellCount(); // opacity - strokeOpacity - strokeWidth - stroke - offsets
  float id = a_vertexId; // \u7B2Cn\u4E2A\u9876\u70B9
  float cellCurrentRow = floor(id * cellCount / columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u884C
  float cellCurrentColumn = mod(id * cellCount, columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u5217
  
  // cell \u56FA\u5B9A\u987A\u5E8F opacity -> strokeOpacity -> empty -> empty ... 
  // \u6309\u987A\u5E8F\u4ECE cell \u4E2D\u53D6\u503C\u3001\u82E5\u6CA1\u6709\u5219\u81EA\u52A8\u5F80\u4E0B\u53D6\u503C
  float textureOffset = 0.0; // \u5728 cell \u4E2D\u53D6\u503C\u7684\u504F\u79FB\u91CF

  vec2 opacityAndOffset = calOpacityAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);
  styleMappingMat[0][0] = opacityAndOffset.r;
  textureOffset = opacityAndOffset.g;


  vec2 textrueOffsets = vec2(0.0, 0.0);
  if(hasOffsets()) {
    vec2 valueXPos = nextPos(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset);
    textrueOffsets.r = pos2value(valueXPos, columnWidth, rowHeight); // x
    textureOffset += 1.0;

    vec2 valueYPos = nextPos(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset);
    textrueOffsets.g = pos2value(valueYPos, columnWidth, rowHeight); // x
    textureOffset += 1.0;
  } else {
    textrueOffsets = u_offsets;
  }

  // cal style mapping

  // unpack color(vec2)
  v_color = a_Color;

  // radius(16-bit)
  v_radius = newSize;

  // anti-alias
  float blur = 0.0;
  float antialiasblur = -max(2.0 / u_DevicePixelRatio / a_Size, blur);

  vec2 offset = (extrude.xy * (newSize) + textrueOffsets);
  vec3 aPosition = a_Position;
  if(u_isMeter < 1.0) {
    // \u4E0D\u4EE5\u7C73\u4E3A\u5B9E\u9645\u5355\u4F4D
    offset = project_pixel(offset);
  } else {
    // \u4EE5\u7C73\u4E3A\u5B9E\u9645\u5355\u4F4D
    antialiasblur *= pow(19.0 - u_Zoom, 2.0);
    antialiasblur = max(antialiasblur, -0.01);
    // offset *= 0.5;

    if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
      aPosition.xy += offset;
      offset.x = 0.0;
      offset.y = 0.0;
    }
  }

  v_data = vec4(extrude.x, extrude.y, antialiasblur,shape_type);

  vec4 project_pos = project_position(vec4(aPosition.xy, 0.0, 1.0));

  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
    gl_Position = u_Mvp * vec4(project_pos.xy + offset, 0.0, 1.0);
  } else {
    gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offset, project_pixel(setPickingOrder(0.0)), 1.0));
  }

  setPickingColor(a_PickingColor);
}
`,mbe=function(e){Tt(n,e);var t=fbe(n);function n(){var r;Ae(this,n);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return r=t.call.apply(t,[this].concat(i)),m(D(r),"meter2coord",1),m(D(r),"isMeter",!1),r}return Oe(n,[{key:"getUninforms",value:function(){var a=this.layer.getLayerConfig(),i=a.opacity,o=i===void 0?1:i,s=a.offsets,l=s===void 0?[0,0]:s,u=a.blend,c=a.speed,f=c===void 0?1:c;if(this.dataTextureTest&&this.dataTextureNeedUpdate({opacity:o,offsets:l})){this.judgeStyleAttributes({opacity:o,offsets:l});var d=this.layer.getEncodedData(),p=this.calDataFrame(this.cellLength,d,this.cellProperties),h=p.data,g=p.width,v=p.height;this.rowCount=v,this.dataTexture=this.cellLength>0&&h.length>0?this.createTexture2D({flipY:!0,data:h,format:V.LUMINANCE,type:V.FLOAT,width:g,height:v}):this.createTexture2D({flipY:!0,data:[1],format:V.LUMINANCE,type:V.FLOAT,width:1,height:1})}return{u_isMeter:Number(this.isMeter),u_speed:f,u_additive:u==="additive"?1:0,u_dataTexture:this.dataTexture,u_cellTypeLayout:this.getCellTypeLayout(),u_opacity:er(o)?o:1,u_offsets:this.isOffsetStatic(l)?l:[0,0]}}},{key:"getAnimateUniforms",value:function(){var a=this.layer.getLayerConfig(),i=a.animateOption,o=i===void 0?{enable:!1}:i;return{u_aimate:this.animateOption2Array(o),u_time:this.layer.getLayerAnimateTime()}}},{key:"getAttribute",value:function(){return this.styleAttributeService.createAttributesAndIndices(this.layer.getEncodedData(),Cs)}},{key:"initModels",value:function(){var a=this.layer.getLayerConfig(),i=a.unit,o=i===void 0?"l7size":i,s=this.mapService.version;return o==="meter"&&s!==Ar.L7MAP&&s!==Ar.GLOBEL&&(this.isMeter=!0,this.calMeter2Coord()),this.buildModels()}},{key:"calMeter2Coord",value:function(){var a=Le(this.layer.getSource().extent,4),i=a[0],o=a[1],s=a[2],l=a[3],u=[(i+s)/2,(o+l)/2],c=this.mapService.version;if(c===Ar.MAPBOX&&window.mapboxgl.MercatorCoordinate){var f=window.mapboxgl.MercatorCoordinate.fromLngLat({lng:u[0],lat:u[1]},0),d=1,p=d*f.meterInMercatorCoordinateUnits(),h=new window.mapboxgl.MercatorCoordinate(f.x-p,f.y,f.z),g=h.toLngLat();this.meter2coord=u[0]-g.lng;return}var v=this.mapService.meterToCoord(u,[i,o]),b=this.mapService.meterToCoord(u,[s===i?s+.1:s,l===o?o+.1:l]);this.meter2coord=(v+b)/2,Boolean(this.meter2coord)||(this.meter2coord=7.70681090738883)}},{key:"buildModels",value:function(){var a=this.layer.getLayerConfig(),i=a.mask,o=i===void 0?!1:i,s=a.maskInside,l=s===void 0?!0:s,u=this.getShaders(),c=u.frag,f=u.vert,d=u.type;return[this.layer.buildLayerModel({moduleName:d,vertexShader:f,fragmentShader:c,triangulation:Cs,depth:{enable:!1},blend:this.getBlend(),stencil:Vi(o,l)})]}},{key:"getShaders",value:function(){return{frag:pbe,vert:hbe,type:"point_radar"}}},{key:"clearModels",value:function(){var a;(a=this.dataTexture)===null||a===void 0||a.destroy()}},{key:"animateOption2Array",value:function(a){return[a.enable?0:1,a.speed||1,a.rings||3,0]}},{key:"registerBuiltinAttributes",value:function(){var a=this;this.styleAttributeService.registerStyleAttribute({name:"extrude",type:kn.Attribute,descriptor:{name:"a_Extrude",buffer:{usage:V.DYNAMIC_DRAW,data:[],type:V.FLOAT},size:3,update:function(o,s,l,u){var c;c=[1,1,0,-1,1,0,-1,-1,0,1,-1,0];var f=u%4*3;return[c[f],c[f+1],c[f+2]]}}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:kn.Attribute,descriptor:{name:"a_Size",buffer:{usage:V.DYNAMIC_DRAW,data:[],type:V.FLOAT},size:1,update:function(o,s,l,u){var c=o.size,f=c===void 0?5:c;return Array.isArray(f)?[f[0]*a.meter2coord]:[f*a.meter2coord]}}}),this.styleAttributeService.registerStyleAttribute({name:"shape",type:kn.Attribute,descriptor:{name:"a_Shape",buffer:{usage:V.DYNAMIC_DRAW,data:[],type:V.FLOAT},size:1,update:function(o,s,l,u){var c=o.shape,f=c===void 0?2:c,d=a.layer.getLayerConfig().shape2d,p=d.indexOf(f);return[p]}}})}}]),n}(Qa);function gbe(e){var t=vbe();return function(){var r=ke(e),a;if(t){var i=ke(this).constructor;a=Reflect.construct(r,arguments,i)}else a=r.apply(this,arguments);return It(this,a)}}function vbe(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var bbe=`
uniform float u_opacity : 1;
uniform vec2 u_offsets;
uniform float u_additive;

uniform float u_stroke_opacity : 1;

uniform vec4 u_stroke_color : [0.0, 0.0, 0.0, 0.0];

varying vec4 v_color;
varying mat4 styleMappingMat; // \u4F20\u9012\u4ECE\u7247\u5143\u4E2D\u4F20\u9012\u7684\u6620\u5C04\u6570\u636E
varying float v_blur;
varying float v_innerRadius;

#pragma include "picking"
void main() {
  vec2 center = vec2(0.5);

  float opacity = styleMappingMat[0][0];
  // Tip: \u7247\u5143\u5230\u4E2D\u5FC3\u70B9\u7684\u8DDD\u79BB 0 - 1
  float fragmengTocenter = distance(center, gl_PointCoord) * 2.0;
  // Tip: \u7247\u5143\u7684\u526A\u5207\u6210\u5706\u5F62
  float circleClipOpacity = 1.0 - smoothstep(v_blur, 1.0, fragmengTocenter);


  if(v_innerRadius < 0.99) {
    // \u5F53\u5B58\u5728 stroke \u4E14 stroke > 0.01
    float blurWidth = (1.0 - v_blur)/2.0;
    vec4 stroke = vec4(u_stroke_color.rgb, u_stroke_opacity);
    if(fragmengTocenter > v_innerRadius + blurWidth) {
      gl_FragColor = stroke;
    } else if(fragmengTocenter > v_innerRadius - blurWidth){
      float mixR = (fragmengTocenter - (v_innerRadius - blurWidth)) / (blurWidth * 2.0);
      gl_FragColor = mix(v_color, stroke, mixR);
    } else {
      gl_FragColor = v_color;
    }
  } else {
    // \u5F53\u4E0D\u5B58\u5728 stroke \u6216 stroke <= 0.01
    gl_FragColor = v_color;
  }

  gl_FragColor.a *= opacity;

  gl_FragColor = filterColor(gl_FragColor);
  
  if(u_additive > 0.0) {
    gl_FragColor *= circleClipOpacity;
  } else {
    gl_FragColor.a *= circleClipOpacity;
  }

}
`,ybe=`
attribute vec3 a_Position;
uniform mat4 u_ModelMatrix;
uniform mat4 u_Mvp;
attribute float a_Size;
attribute vec4 a_Color;
varying vec4 v_color;

uniform float u_opacity : 1;
uniform vec2 u_offsets;
uniform float u_stroke_width;

varying mat4 styleMappingMat; // \u7528\u4E8E\u5C06\u5728\u9876\u70B9\u7740\u8272\u5668\u4E2D\u8BA1\u7B97\u597D\u7684\u6837\u5F0F\u503C\u4F20\u9012\u7ED9\u7247\u5143
varying float v_blur;
varying float v_innerRadius;

#pragma include "styleMapping"
#pragma include "styleMappingCalOpacity"

#pragma include "projection"
#pragma include "picking"
#pragma include "project"
void main() {
  v_color = a_Color;
  v_blur = 1.0 - max(2.0/a_Size, 0.05);
  v_innerRadius = max((a_Size - u_stroke_width) / a_Size, 0.0);

  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97
styleMappingMat = mat4(
    0.0, 0.0, 0.0, 0.0, // opacity - strokeOpacity - strokeWidth - empty
    0.0, 0.0, 0.0, 0.0, // strokeR - strokeG - strokeB - strokeA
    0.0, 0.0, 0.0, 0.0, // offsets[0] - offsets[1]
    0.0, 0.0, 0.0, 0.0
  );

  float rowCount = u_cellTypeLayout[0][0];    // \u5F53\u524D\u7684\u6570\u636E\u7EB9\u7406\u6709\u51E0\u884C
  float columnCount = u_cellTypeLayout[0][1]; // \u5F53\u770B\u5230\u6570\u636E\u7EB9\u7406\u6709\u51E0\u5217
  float columnWidth = 1.0/columnCount;  // \u5217\u5BBD
  float rowHeight = 1.0/rowCount;       // \u884C\u9AD8
  float cellCount = calCellCount(); // opacity - strokeOpacity - strokeWidth - stroke - offsets
  float id = a_vertexId; // \u7B2Cn\u4E2A\u9876\u70B9
  float cellCurrentRow = floor(id * cellCount / columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u884C
  float cellCurrentColumn = mod(id * cellCount, columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u5217
  
  // cell \u56FA\u5B9A\u987A\u5E8F opacity -> strokeOpacity -> strokeWidth -> stroke ... 
  // \u6309\u987A\u5E8F\u4ECE cell \u4E2D\u53D6\u503C\u3001\u82E5\u6CA1\u6709\u5219\u81EA\u52A8\u5F80\u4E0B\u53D6\u503C
  float textureOffset = 0.0; // \u5728 cell \u4E2D\u53D6\u503C\u7684\u504F\u79FB\u91CF

  vec2 opacityAndOffset = calOpacityAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);
  styleMappingMat[0][0] = opacityAndOffset.r;
  textureOffset = opacityAndOffset.g;

  vec2 textrueOffsets = vec2(0.0, 0.0);
  if(hasOffsets()) {
    vec2 valueXPos = nextPos(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset);
    textrueOffsets.r = pos2value(valueXPos, columnWidth, rowHeight); // x
    textureOffset += 1.0;

    vec2 valueYPos = nextPos(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset);
    textrueOffsets.g = pos2value(valueYPos, columnWidth, rowHeight); // x
    textureOffset += 1.0;
  } else {
    textrueOffsets = u_offsets;
  }

  // cal style mapping
  
  vec2 offset = project_pixel(textrueOffsets);
  
  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
    gl_Position = u_Mvp * vec4(a_Position.xy + offset, a_Position.z, 1.0);
  } else { // else
    vec4 project_pos = project_position(vec4(a_Position, 1.0)) + vec4(a_Size / 2.,-a_Size /2.,0.,0.);
    gl_Position = project_common_position_to_clipspace(vec4(vec2(project_pos.xy+offset),project_pos.z,project_pos.w));
  }

  gl_PointSize = a_Size * 2.0 * u_DevicePixelRatio;
  setPickingColor(a_PickingColor);
}
`;function FR(e){var t=e.coordinates;return{vertices:$e(t),indices:[0],size:t.length}}var xbe=function(e){Tt(n,e);var t=gbe(n);function n(){return Ae(this,n),t.apply(this,arguments)}return Oe(n,[{key:"getDefaultStyle",value:function(){return{blend:"additive"}}},{key:"getUninforms",value:function(){var a=this.layer.getLayerConfig(),i=a.opacity,o=i===void 0?1:i,s=a.offsets,l=s===void 0?[0,0]:s,u=a.blend,c=a.strokeOpacity,f=c===void 0?1:c,d=a.strokeWidth,p=d===void 0?0:d,h=a.stroke,g=h===void 0?"#fff":h;if(this.dataTextureTest&&this.dataTextureNeedUpdate({opacity:o,offsets:l})){this.judgeStyleAttributes({opacity:o,offsets:l});var v=this.layer.getEncodedData(),b=this.calDataFrame(this.cellLength,v,this.cellProperties),y=b.data,x=b.width,k=b.height;this.rowCount=k,this.dataTexture=this.cellLength>0&&y.length>0?this.createTexture2D({flipY:!0,data:y,format:V.LUMINANCE,type:V.FLOAT,width:x,height:k}):this.createTexture2D({flipY:!0,data:[1],format:V.LUMINANCE,type:V.FLOAT,width:1,height:1})}return{u_additive:u==="additive"?1:0,u_dataTexture:this.dataTexture,u_cellTypeLayout:this.getCellTypeLayout(),u_opacity:er(o)?o:1,u_offsets:this.isOffsetStatic(l)?l:[0,0],u_stroke_opacity:er(f)?f:1,u_stroke_width:er(p)?p:1,u_stroke_color:this.getStrokeColor(g)}}},{key:"initModels",value:function(){return this.buildModels()}},{key:"buildModels",value:function(){var a=this.layer.getLayerConfig(),i=a.mask,o=i===void 0?!1:i,s=a.maskInside,l=s===void 0?!0:s;return this.layer.triangulation=FR,[this.layer.buildLayerModel({moduleName:"simplepoint",vertexShader:ybe,fragmentShader:bbe,triangulation:FR,depth:{enable:!1},primitive:V.POINTS,blend:this.getBlend(),stencil:Vi(o,l)})]}},{key:"clearModels",value:function(){var a;(a=this.dataTexture)===null||a===void 0||a.destroy()}},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"size",type:kn.Attribute,descriptor:{name:"a_Size",buffer:{usage:V.DYNAMIC_DRAW,data:[],type:V.FLOAT},size:1,update:function(i,o,s,l){var u=i.size,c=u===void 0?1:u;return Array.isArray(c)?[c[0]]:[c]}}})}},{key:"defaultStyleOptions",value:function(){return{blend:ho.additive}}}]),n}(Qa),_be={fillImage:Zve,fill:Gve,radar:mbe,image:ibe,normal:cbe,simplePoint:xbe,extrude:Uve,text:_D,icon:ebe,vectorpoint:Nve,tile:Jg},wbe=_be;function kbe(e,t){var n=typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=Ebe(e))||t&&e&&typeof e.length=="number"){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(u){throw u},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i=!0,o=!1,s;return{s:function(){n=n.call(e)},n:function(){var u=n.next();return i=u.done,u},e:function(u){o=!0,s=u},f:function(){try{!i&&n.return!=null&&n.return()}finally{if(o)throw s}}}}function Ebe(e,t){if(!!e){if(typeof e=="string")return DR(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return DR(e,t)}}function DR(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Sbe(e){var t=Cbe();return function(){var r=ke(e),a;if(t){var i=ke(this).constructor;a=Reflect.construct(r,arguments,i)}else a=r.apply(this,arguments);return It(this,a)}}function Cbe(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var Tbe=function(e){Tt(n,e);var t=Sbe(n);function n(){var r;Ae(this,n);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return r=t.call.apply(t,[this].concat(i)),m(D(r),"type","PointLayer"),r}return Oe(n,[{key:"buildModels",value:function(){var a=this.getModelType();this.layerModel=new wbe[a](this),this.models=this.layerModel.initModels()}},{key:"rebuildModels",value:function(){this.models=this.layerModel.buildModels()}},{key:"getModelTypeWillEmptyData",value:function(){if(this.shapeOption){var a=this.shapeOption,i=a.field,o=a.values,s=this.getLayerConfig(),l=s.shape2d;s.shape3d;var u=this.iconService.getIconMap();if(i&&(l==null?void 0:l.indexOf(i))!==-1)return"fill";if(o&&o instanceof Array){var c=kbe(o),f;try{for(c.s();!(f=c.n()).done;){var d=f.value;if(typeof d=="string"&&u.hasOwnProperty(d))return"image"}}catch(p){c.e(p)}finally{c.f()}}}return"normal"}},{key:"getConfigSchema",value:function(){return{properties:{opacity:{type:"number",minimum:0,maximum:1}}}}},{key:"getDefaultConfig",value:function(){var a=this.getModelType(),i={fillImage:{},normal:{blend:"additive"},radar:{},simplePoint:{},fill:{blend:"normal"},extrude:{},image:{},icon:{},text:{blend:"normal"},vectorpoint:{},tile:{}};return i[a]}},{key:"getModelType",value:function(){var a=["fillImage","fill","radar","image","normal","simplePoint","extrude","text","icon","vectorpoint","tile"];if(this.layerSource.parser.type==="mvt")return"vectorpoint";if(this.layerType&&a.includes(this.layerType))return this.layerType;var i=this.getEncodedData(),o=this.getLayerConfig(),s=o.shape2d,l=o.shape3d,u=this.iconService.getIconMap(),c=i.find(function(d){return d.hasOwnProperty("shape")});if(c){var f=c.shape;return f==="dot"?"normal":f==="simple"?"simplePoint":f==="radar"?"radar":f==="fillImage"?"fillImage":(s==null?void 0:s.indexOf(f))!==-1?"fill":(l==null?void 0:l.indexOf(f))!==-1?"extrude":u.hasOwnProperty(f)?"image":this.fontService.getGlyph(f)!==""?"icon":"text"}else return this.getModelTypeWillEmptyData()}}]),n}(Gm),BR,zR,UR,$R,VR,Hp,jR,GR,HR;function WR(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Abe(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?WR(Object(n),!0).forEach(function(r){m(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):WR(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var Obe=(BR=sn(),zR=dn(xe.IGlobalConfigService),UR=dn(xe.IMapService),$R=dn(xe.IFontService),BR(VR=(Hp=function(){function e(){Ae(this,e),an(this,"configService",jR,this),an(this,"mapService",GR,this),an(this,"fontService",HR,this)}return Oe(e,[{key:"apply",value:function(n,r){var a=this,i=r.styleAttributeService;n.hooks.init.tap("DataMappingPlugin",function(){a.generateMaping(n,{styleAttributeService:i})}),n.hooks.beforeRenderData.tap("DataMappingPlugin",function(){return n.dataState.dataMappingNeedUpdate=!1,a.generateMaping(n,{styleAttributeService:i}),!0}),n.hooks.beforeRender.tap("DataMappingPlugin",function(){if(!n.layerModelNeedUpdate){var o=n.getBottomColor(),s=i.getLayerStyleAttributes()||[],l=i.getLayerStyleAttribute("filter"),u=n.getSource().data.dataArray,c=s.filter(function(d){return d.needRemapping}),f=u;l!=null&&l.needRemapping&&l!==null&&l!==void 0&&l.scale&&(f=u.filter(function(d){return a.applyAttributeMapping(l,d,o)[0]})),c.length&&(l!=null&&l.needRemapping?(n.setEncodedData(a.mapping(n,s,f,void 0,o)),l.needRemapping=!1):n.setEncodedData(a.mapping(n,c,f,n.getEncodedData(),o)),n.emit("remapping",null))}})}},{key:"generateMaping",value:function(n,r){var a=this,i=r.styleAttributeService,o=n.getBottomColor(),s=i.getLayerStyleAttributes()||[],l=i.getLayerStyleAttribute("filter"),u=n.getSource().data.dataArray,c=u;l!=null&&l.scale&&(c=u.filter(function(f){return a.applyAttributeMapping(l,f,o)[0]})),n.setEncodedData(this.mapping(n,s,c,void 0,o)),n.emit("dataUpdate",null)}},{key:"getArrowPoints",value:function(n,r){var a=[r[0]-n[0],r[1]-n[1]],i=NN(a),o=[n[0]+i[0]*1e-4,n[1]+i[1]*1e-4];return o}},{key:"mapping",value:function(n,r,a,i,o){var s=this,l=n.getLayerConfig(),u=l.arrow,c=u===void 0?{enable:!1}:u,f=a.map(function(d,p){var h=i?i[p]:{},g=Abe({id:d._id,coordinates:d.coordinates},h);if(r.filter(function(y){return y.scale!==void 0}).forEach(function(y){var x=s.applyAttributeMapping(y,d,o);y.needRemapping=!1,y.name==="color"&&(x=x.map(function(k){return Ts(k)})),g[y.name]=Array.isArray(x)&&x.length===1?x[0]:x,y.name==="shape"&&(g.shape=s.fontService.getIconFontKey(g[y.name]))}),g.shape==="line"&&c.enable){var v=g.coordinates,b=s.getArrowPoints(v[0],v[1]);g.coordinates.splice(1,0,b,b)}return g});return this.adjustData2Amap2Coordinates(f,n),this.adjustData2SimpleCoordinates(f),f}},{key:"adjustData2Amap2Coordinates",value:function(n,r){var a=this;if(n.length>0&&this.mapService.version===Ar["GAODE2.x"]){var i=this.getLayerCenter(r);typeof n[0].coordinates[0]=="number"?n.filter(function(o){return!o.originCoordinates}).map(function(o){o.version=Ar["GAODE2.x"],o.originCoordinates=nd(o.coordinates),o.coordinates=a.mapService.lngLatToCoordByLayer(o.coordinates,i)}):n.filter(function(o){return!o.originCoordinates}).map(function(o){o.version=Ar["GAODE2.x"],o.originCoordinates=nd(o.coordinates),o.coordinates=a.mapService.lngLatToCoordsByLayer(o.coordinates,i)})}}},{key:"getLayerCenter",value:function(n){var r=n.getSource();return r.center}},{key:"adjustData2SimpleCoordinates",value:function(n){var r=this;n.length>0&&this.mapService.version===Ar.SIMPLE&&n.map(function(a){a.simpleCoordinate||(a.coordinates=r.unProjectCoordinates(a.coordinates),a.simpleCoordinate=!0)})}},{key:"unProjectCoordinates",value:function(n){var r=this;if(typeof n[0]=="number")return this.mapService.simpleMapCoord.unproject(n);if(n[0]&&n[0][0]instanceof Array){var a=[];return n.map(function(o){var s=[];o.map(function(l){s.push(r.mapService.simpleMapCoord.unproject(l))}),a.push(s)}),a}else{var i=[];return n.map(function(o){i.push(r.mapService.simpleMapCoord.unproject(o))}),i}}},{key:"applyAttributeMapping",value:function(n,r,a){var i;if(!n.scale)return[];var o=(n==null||(i=n.scale)===null||i===void 0?void 0:i.scalers)||[],s=[];o.forEach(function(u){var c,f=u.field;(r.hasOwnProperty(f)||((c=n.scale)===null||c===void 0?void 0:c.type)==="variable")&&s.push(r[f])});var l=n.mapping?n.mapping(s):[];return n.name==="color"&&!zN(l[0])?[a]:l}}]),e}(),jR=rn(Hp.prototype,"configService",[zR],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),GR=rn(Hp.prototype,"mapService",[UR],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),HR=rn(Hp.prototype,"fontService",[$R],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Hp))||VR),YR,XR,Mbe=(YR=sn(),YR(XR=function(){function e(){Ae(this,e),m(this,"mapService",void 0)}return Oe(e,[{key:"apply",value:function(n){var r=this;this.mapService=n.getContainer().get(xe.IMapService),n.hooks.init.tap("DataSourcePlugin",function(){var a=n.getSource();if(!a){var i=n.sourceOption||{data:Hie,options:Wie},o=i.data,s=i.options;n.setSource(new $m(o,s))}r.updateClusterData(n)}),n.hooks.beforeRenderData.tap("DataSourcePlugin",function(){var a=r.updateClusterData(n),i=n.dataState.dataSourceNeedUpdate;return n.dataState.dataSourceNeedUpdate=!1,a||i})}},{key:"updateClusterData",value:function(n){var r=n.getSource(),a=r.cluster,i=r.clusterOptions,o=i.zoom,s=o===void 0?0:o;i.maxZoom;var l=this.mapService.getZoom()-1,u=n.dataState.dataSourceNeedUpdate;return a&&(u||Math.abs(n.clusterZoom-l)>=1)?(s!==Math.floor(l)&&r.updateClusterData(Math.floor(l)),n.clusterZoom=l,!0):!1}}]),e}())||XR);function KE(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function kD(e){return e.length===1&&(e=Rbe(e)),{left:function(t,n,r,a){for(r==null&&(r=0),a==null&&(a=t.length);r<a;){var i=r+a>>>1;e(t[i],n)<0?r=i+1:a=i}return r},right:function(t,n,r,a){for(r==null&&(r=0),a==null&&(a=t.length);r<a;){var i=r+a>>>1;e(t[i],n)>0?a=i:r=i+1}return r}}}function Rbe(e){return function(t,n){return KE(e(t),n)}}var Pbe=kD(KE),py=Pbe.right;function Ibe(e){return e===null?NaN:+e}function ZR(e,t){var n=e.length,r=-1,a,i,o;if(t==null){for(;++r<n;)if((a=e[r])!=null&&a>=a)for(i=o=a;++r<n;)(a=e[r])!=null&&(i>a&&(i=a),o<a&&(o=a))}else for(;++r<n;)if((a=t(e[r],r,e))!=null&&a>=a)for(i=o=a;++r<n;)(a=t(e[r],r,e))!=null&&(i>a&&(i=a),o<a&&(o=a));return[i,o]}var xk=Math.sqrt(50),_k=Math.sqrt(10),wk=Math.sqrt(2);function ED(e,t,n){var r,a=-1,i,o,s;if(t=+t,e=+e,n=+n,e===t&&n>0)return[e];if((r=t<e)&&(i=e,e=t,t=i),(s=ev(e,t,n))===0||!isFinite(s))return[];if(s>0)for(e=Math.ceil(e/s),t=Math.floor(t/s),o=new Array(i=Math.ceil(t-e+1));++a<i;)o[a]=(e+a)*s;else for(e=Math.floor(e*s),t=Math.ceil(t*s),o=new Array(i=Math.ceil(e-t+1));++a<i;)o[a]=(e-a)/s;return r&&o.reverse(),o}function ev(e,t,n){var r=(t-e)/Math.max(0,n),a=Math.floor(Math.log(r)/Math.LN10),i=r/Math.pow(10,a);return a>=0?(i>=xk?10:i>=_k?5:i>=wk?2:1)*Math.pow(10,a):-Math.pow(10,-a)/(i>=xk?10:i>=_k?5:i>=wk?2:1)}function kk(e,t,n){var r=Math.abs(t-e)/Math.max(0,n),a=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),i=r/a;return i>=xk?a*=10:i>=_k?a*=5:i>=wk&&(a*=2),t<e?-a:a}function Lbe(e,t,n){if(n==null&&(n=Ibe),!!(r=e.length)){if((t=+t)<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,a=(r-1)*t,i=Math.floor(a),o=+n(e[i],i,e),s=+n(e[i+1],i+1,e);return o+(s-o)*(a-i)}}function Nbe(e,t,n,r,a){var i=e*e,o=i*e;return((1-3*e+3*i-o)*t+(4-6*i+3*o)*n+(1+3*e+3*i-3*o)*r+o*a)/6}function Fbe(e){var t=e.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),a=e[r],i=e[r+1],o=r>0?e[r-1]:2*a-i,s=r<t-1?e[r+2]:2*i-a;return Nbe((n-r/t)*t,o,a,i,s)}}function QE(e){return function(){return e}}function SD(e,t){return function(n){return e+n*t}}function Dbe(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function Bbe(e,t){var n=t-e;return n?SD(e,n>180||n<-180?n-360*Math.round(n/360):n):QE(isNaN(e)?t:e)}function zbe(e){return(e=+e)==1?Rh:function(t,n){return n-t?Dbe(t,n,e):QE(isNaN(t)?n:t)}}function Rh(e,t){var n=t-e;return n?SD(e,n):QE(isNaN(e)?t:e)}(function e(t){var n=zbe(t);function r(a,i){var o=n((a=yd(a)).r,(i=yd(i)).r),s=n(a.g,i.g),l=n(a.b,i.b),u=n(a.opacity,i.opacity);return function(c){return a.r=o(c),a.g=s(c),a.b=l(c),a.opacity=u(c),a+""}}return r.gamma=e,r})(1);function Ube(e){return function(t){var n=t.length,r=new Array(n),a=new Array(n),i=new Array(n),o,s;for(o=0;o<n;++o)s=yd(t[o]),r[o]=s.r||0,a[o]=s.g||0,i[o]=s.b||0;return r=e(r),a=e(a),i=e(i),s.opacity=1,function(l){return s.r=r(l),s.g=a(l),s.b=i(l),s+""}}}var $be=Ube(Fbe);function CD(e){return function t(n){n=+n;function r(a,i){var o=e((a=Yw(a)).h,(i=Yw(i)).h),s=Rh(a.s,i.s),l=Rh(a.l,i.l),u=Rh(a.opacity,i.opacity);return function(c){return a.h=o(c),a.s=s(c),a.l=l(Math.pow(c,n)),a.opacity=u(c),a+""}}return r.gamma=t,r}(1)}CD(Bbe);CD(Rh);function Su(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function TD(e,t){switch(arguments.length){case 0:break;case 1:this.interpolator(e);break;default:this.interpolator(t).domain(e);break}return this}var co="$";function Qv(){}Qv.prototype=Jv.prototype={constructor:Qv,has:function(e){return co+e in this},get:function(e){return this[co+e]},set:function(e,t){return this[co+e]=t,this},remove:function(e){var t=co+e;return t in this&&delete this[t]},clear:function(){for(var e in this)e[0]===co&&delete this[e]},keys:function(){var e=[];for(var t in this)t[0]===co&&e.push(t.slice(1));return e},values:function(){var e=[];for(var t in this)t[0]===co&&e.push(this[t]);return e},entries:function(){var e=[];for(var t in this)t[0]===co&&e.push({key:t.slice(1),value:this[t]});return e},size:function(){var e=0;for(var t in this)t[0]===co&&++e;return e},empty:function(){for(var e in this)if(e[0]===co)return!1;return!0},each:function(e){for(var t in this)t[0]===co&&e(this[t],t.slice(1),this)}};function Jv(e,t){var n=new Qv;if(e instanceof Qv)e.each(function(s,l){n.set(l,s)});else if(Array.isArray(e)){var r=-1,a=e.length,i;if(t==null)for(;++r<a;)n.set(r,e[r]);else for(;++r<a;)n.set(t(i=e[r],r,e),i)}else if(e)for(var o in e)n.set(o,e[o]);return n}function qR(){}var ju=Jv.prototype;qR.prototype={constructor:qR,has:ju.has,add:function(e){return e+="",this[co+e]=e,this},remove:ju.remove,clear:ju.clear,values:ju.keys,size:ju.size,empty:ju.empty,each:ju.each};var AD=Array.prototype,eb=AD.map,Sc=AD.slice,KR={name:"implicit"};function tb(){var e=Jv(),t=[],n=[],r=KR;function a(i){var o=i+"",s=e.get(o);if(!s){if(r!==KR)return r;e.set(o,s=t.push(i))}return n[(s-1)%n.length]}return a.domain=function(i){if(!arguments.length)return t.slice();t=[],e=Jv();for(var o=-1,s=i.length,l,u;++o<s;)e.has(u=(l=i[o])+"")||e.set(u,t.push(l));return a},a.range=function(i){return arguments.length?(n=Sc.call(i),a):n.slice()},a.unknown=function(i){return arguments.length?(r=i,a):r},a.copy=function(){return tb(t,n).unknown(r)},Su.apply(a,arguments),a}function JE(e){return function(){return e}}function Vbe(e,t){return function(n){return e+n*t}}function jbe(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function Gbe(e){return(e=+e)==1?OD:function(t,n){return n-t?jbe(t,n,e):JE(isNaN(t)?n:t)}}function OD(e,t){var n=t-e;return n?Vbe(e,n):JE(isNaN(e)?t:e)}var QR=function e(t){var n=Gbe(t);function r(a,i){var o=n((a=yd(a)).r,(i=yd(i)).r),s=n(a.g,i.g),l=n(a.b,i.b),u=OD(a.opacity,i.opacity);return function(c){return a.r=o(c),a.g=s(c),a.b=l(c),a.opacity=u(c),a+""}}return r.gamma=e,r}(1);function Hbe(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),a;return function(i){for(a=0;a<n;++a)r[a]=e[a]*(1-i)+t[a]*i;return r}}function Wbe(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function Ybe(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,a=new Array(r),i=new Array(n),o;for(o=0;o<r;++o)a[o]=e3(e[o],t[o]);for(;o<n;++o)i[o]=t[o];return function(s){for(o=0;o<r;++o)i[o]=a[o](s);return i}}function Xbe(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function nb(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function Zbe(e,t){var n={},r={},a;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(a in t)a in e?n[a]=e3(e[a],t[a]):r[a]=t[a];return function(i){for(a in n)r[a]=n[a](i);return r}}var Ek=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,u_=new RegExp(Ek.source,"g");function qbe(e){return function(){return e}}function Kbe(e){return function(t){return e(t)+""}}function Qbe(e,t){var n=Ek.lastIndex=u_.lastIndex=0,r,a,i,o=-1,s=[],l=[];for(e=e+"",t=t+"";(r=Ek.exec(e))&&(a=u_.exec(t));)(i=a.index)>n&&(i=t.slice(n,i),s[o]?s[o]+=i:s[++o]=i),(r=r[0])===(a=a[0])?s[o]?s[o]+=a:s[++o]=a:(s[++o]=null,l.push({i:o,x:nb(r,a)})),n=u_.lastIndex;return n<t.length&&(i=t.slice(n),s[o]?s[o]+=i:s[++o]=i),s.length<2?l[0]?Kbe(l[0].x):qbe(t):(t=l.length,function(u){for(var c=0,f;c<t;++c)s[(f=l[c]).i]=f.x(u);return s.join("")})}function e3(e,t){var n=typeof t,r;return t==null||n==="boolean"?JE(t):(n==="number"?nb:n==="string"?(r=hu(t))?(t=r,QR):Qbe:t instanceof hu?QR:t instanceof Date?Xbe:Wbe(t)?Hbe:Array.isArray(t)?Ybe:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?Zbe:nb)(e,t)}function Jbe(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}function eye(e){return function(){return e}}function Sk(e){return+e}var JR=[0,1];function Xa(e){return e}function Ck(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:eye(isNaN(t)?NaN:.5)}function eP(e){var t=e[0],n=e[e.length-1],r;return t>n&&(r=t,t=n,n=r),function(a){return Math.max(t,Math.min(n,a))}}function tye(e,t,n){var r=e[0],a=e[1],i=t[0],o=t[1];return a<r?(r=Ck(a,r),i=n(o,i)):(r=Ck(r,a),i=n(i,o)),function(s){return i(r(s))}}function nye(e,t,n){var r=Math.min(e.length,t.length)-1,a=new Array(r),i=new Array(r),o=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<r;)a[o]=Ck(e[o],e[o+1]),i[o]=n(t[o],t[o+1]);return function(s){var l=py(e,s,1,r)-1;return i[l](a[l](s))}}function hy(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function t3(){var e=JR,t=JR,n=e3,r,a,i,o=Xa,s,l,u;function c(){return s=Math.min(e.length,t.length)>2?nye:tye,l=u=null,f}function f(d){return isNaN(d=+d)?i:(l||(l=s(e.map(r),t,n)))(r(o(d)))}return f.invert=function(d){return o(a((u||(u=s(t,e.map(r),nb)))(d)))},f.domain=function(d){return arguments.length?(e=eb.call(d,Sk),o===Xa||(o=eP(e)),c()):e.slice()},f.range=function(d){return arguments.length?(t=Sc.call(d),c()):t.slice()},f.rangeRound=function(d){return t=Sc.call(d),n=Jbe,c()},f.clamp=function(d){return arguments.length?(o=d?eP(e):Xa,f):o!==Xa},f.interpolate=function(d){return arguments.length?(n=d,c()):n},f.unknown=function(d){return arguments.length?(i=d,f):i},function(d,p){return r=d,a=p,c()}}function MD(e,t){return t3()(e,t)}function rye(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function rb(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function wd(e){return e=rb(Math.abs(e)),e?e[1]:NaN}function aye(e,t){return function(n,r){for(var a=n.length,i=[],o=0,s=e[0],l=0;a>0&&s>0&&(l+s+1>r&&(s=Math.max(1,r-l)),i.push(n.substring(a-=s,a+s)),!((l+=s+1)>r));)s=e[o=(o+1)%e.length];return i.reverse().join(t)}}function iye(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var oye=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function ab(e){if(!(t=oye.exec(e)))throw new Error("invalid format: "+e);var t;return new n3({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}ab.prototype=n3.prototype;function n3(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}n3.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function sye(e){e:for(var t=e.length,n=1,r=-1,a;n<t;++n)switch(e[n]){case".":r=a=n;break;case"0":r===0&&(r=n),a=n;break;default:if(!+e[n])break e;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(a+1):e}var RD;function lye(e,t){var n=rb(e,t);if(!n)return e+"";var r=n[0],a=n[1],i=a-(RD=Math.max(-8,Math.min(8,Math.floor(a/3)))*3)+1,o=r.length;return i===o?r:i>o?r+new Array(i-o+1).join("0"):i>0?r.slice(0,i)+"."+r.slice(i):"0."+new Array(1-i).join("0")+rb(e,Math.max(0,t+i-1))[0]}function tP(e,t){var n=rb(e,t);if(!n)return e+"";var r=n[0],a=n[1];return a<0?"0."+new Array(-a).join("0")+r:r.length>a+1?r.slice(0,a+1)+"."+r.slice(a+1):r+new Array(a-r.length+2).join("0")}var nP={"%":function(e,t){return(e*100).toFixed(t)},b:function(e){return Math.round(e).toString(2)},c:function(e){return e+""},d:rye,e:function(e,t){return e.toExponential(t)},f:function(e,t){return e.toFixed(t)},g:function(e,t){return e.toPrecision(t)},o:function(e){return Math.round(e).toString(8)},p:function(e,t){return tP(e*100,t)},r:tP,s:lye,X:function(e){return Math.round(e).toString(16).toUpperCase()},x:function(e){return Math.round(e).toString(16)}};function rP(e){return e}var aP=Array.prototype.map,iP=["y","z","a","f","p","n","\xB5","m","","k","M","G","T","P","E","Z","Y"];function uye(e){var t=e.grouping===void 0||e.thousands===void 0?rP:aye(aP.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",a=e.decimal===void 0?".":e.decimal+"",i=e.numerals===void 0?rP:iye(aP.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",s=e.minus===void 0?"-":e.minus+"",l=e.nan===void 0?"NaN":e.nan+"";function u(f){f=ab(f);var d=f.fill,p=f.align,h=f.sign,g=f.symbol,v=f.zero,b=f.width,y=f.comma,x=f.precision,k=f.trim,T=f.type;T==="n"?(y=!0,T="g"):nP[T]||(x===void 0&&(x=12),k=!0,T="g"),(v||d==="0"&&p==="=")&&(v=!0,d="0",p="=");var C=g==="$"?n:g==="#"&&/[boxX]/.test(T)?"0"+T.toLowerCase():"",I=g==="$"?r:/[%p]/.test(T)?o:"",P=nP[T],j=/[defgprs%]/.test(T);x=x===void 0?6:/[gprs]/.test(T)?Math.max(1,Math.min(21,x)):Math.max(0,Math.min(20,x));function A(S){var M=C,O=I,R,G,ee;if(T==="c")O=P(S)+O,S="";else{S=+S;var re=S<0||1/S<0;if(S=isNaN(S)?l:P(Math.abs(S),x),k&&(S=sye(S)),re&&+S==0&&h!=="+"&&(re=!1),M=(re?h==="("?h:s:h==="-"||h==="("?"":h)+M,O=(T==="s"?iP[8+RD/3]:"")+O+(re&&h==="("?")":""),j){for(R=-1,G=S.length;++R<G;)if(ee=S.charCodeAt(R),48>ee||ee>57){O=(ee===46?a+S.slice(R+1):S.slice(R))+O,S=S.slice(0,R);break}}}y&&!v&&(S=t(S,1/0));var X=M.length+S.length+O.length,K=X<b?new Array(b-X+1).join(d):"";switch(y&&v&&(S=t(K+S,K.length?b-O.length:1/0),K=""),p){case"<":S=M+S+O+K;break;case"=":S=M+K+S+O;break;case"^":S=K.slice(0,X=K.length>>1)+M+S+O+K.slice(X);break;default:S=K+M+S+O;break}return i(S)}return A.toString=function(){return f+""},A}function c(f,d){var p=u((f=ab(f),f.type="f",f)),h=Math.max(-8,Math.min(8,Math.floor(wd(d)/3)))*3,g=Math.pow(10,-h),v=iP[8+h/3];return function(b){return p(g*b)+v}}return{format:u,formatPrefix:c}}var hg,r3,PD;cye({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"});function cye(e){return hg=uye(e),r3=hg.format,PD=hg.formatPrefix,hg}function fye(e){return Math.max(0,-wd(Math.abs(e)))}function dye(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(wd(t)/3)))*3-wd(Math.abs(e)))}function pye(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,wd(t)-wd(e))+1}function hye(e,t,n,r){var a=kk(e,t,n),i;switch(r=ab(r==null?",f":r),r.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(t));return r.precision==null&&!isNaN(i=dye(a,o))&&(r.precision=i),PD(r,o)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(i=pye(a,Math.max(Math.abs(e),Math.abs(t))))&&(r.precision=i-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(i=fye(a))&&(r.precision=i-(r.type==="%")*2);break}}return r3(r)}function Wd(e){var t=e.domain;return e.ticks=function(n){var r=t();return ED(r[0],r[r.length-1],n==null?10:n)},e.tickFormat=function(n,r){var a=t();return hye(a[0],a[a.length-1],n==null?10:n,r)},e.nice=function(n){n==null&&(n=10);var r=t(),a=0,i=r.length-1,o=r[a],s=r[i],l;return s<o&&(l=o,o=s,s=l,l=a,a=i,i=l),l=ev(o,s,n),l>0?(o=Math.floor(o/l)*l,s=Math.ceil(s/l)*l,l=ev(o,s,n)):l<0&&(o=Math.ceil(o*l)/l,s=Math.floor(s*l)/l,l=ev(o,s,n)),l>0?(r[a]=Math.floor(o/l)*l,r[i]=Math.ceil(s/l)*l,t(r)):l<0&&(r[a]=Math.ceil(o*l)/l,r[i]=Math.floor(s*l)/l,t(r)),e},e}function ID(){var e=MD(Xa,Xa);return e.copy=function(){return hy(e,ID())},Su.apply(e,arguments),Wd(e)}function LD(e){var t;function n(r){return isNaN(r=+r)?t:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(e=eb.call(r,Sk),n):e.slice()},n.unknown=function(r){return arguments.length?(t=r,n):t},n.copy=function(){return LD(e).unknown(t)},e=arguments.length?eb.call(e,Sk):[0,1],Wd(n)}function ND(e,t){e=e.slice();var n=0,r=e.length-1,a=e[n],i=e[r],o;return i<a&&(o=n,n=r,r=o,o=a,a=i,i=o),e[n]=t.floor(a),e[r]=t.ceil(i),e}function oP(e){return Math.log(e)}function sP(e){return Math.exp(e)}function mye(e){return-Math.log(-e)}function gye(e){return-Math.exp(-e)}function vye(e){return isFinite(e)?+("1e"+e):e<0?0:e}function bye(e){return e===10?vye:e===Math.E?Math.exp:function(t){return Math.pow(e,t)}}function yye(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),function(t){return Math.log(t)/e})}function lP(e){return function(t){return-e(-t)}}function xye(e){var t=e(oP,sP),n=t.domain,r=10,a,i;function o(){return a=yye(r),i=bye(r),n()[0]<0?(a=lP(a),i=lP(i),e(mye,gye)):e(oP,sP),t}return t.base=function(s){return arguments.length?(r=+s,o()):r},t.domain=function(s){return arguments.length?(n(s),o()):n()},t.ticks=function(s){var l=n(),u=l[0],c=l[l.length-1],f;(f=c<u)&&(d=u,u=c,c=d);var d=a(u),p=a(c),h,g,v,b=s==null?10:+s,y=[];if(!(r%1)&&p-d<b){if(d=Math.round(d)-1,p=Math.round(p)+1,u>0){for(;d<p;++d)for(g=1,h=i(d);g<r;++g)if(v=h*g,!(v<u)){if(v>c)break;y.push(v)}}else for(;d<p;++d)for(g=r-1,h=i(d);g>=1;--g)if(v=h*g,!(v<u)){if(v>c)break;y.push(v)}}else y=ED(d,p,Math.min(p-d,b)).map(i);return f?y.reverse():y},t.tickFormat=function(s,l){if(l==null&&(l=r===10?".0e":","),typeof l!="function"&&(l=r3(l)),s===1/0)return l;s==null&&(s=10);var u=Math.max(1,r*s/t.ticks().length);return function(c){var f=c/i(Math.round(a(c)));return f*r<r-.5&&(f*=r),f<=u?l(c):""}},t.nice=function(){return n(ND(n(),{floor:function(s){return i(Math.floor(a(s)))},ceil:function(s){return i(Math.ceil(a(s)))}}))},t}function FD(){var e=xye(t3()).domain([1,10]);return e.copy=function(){return hy(e,FD()).base(e.base())},Su.apply(e,arguments),e}function uP(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function _ye(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function wye(e){return e<0?-e*e:e*e}function kye(e){var t=e(Xa,Xa),n=1;function r(){return n===1?e(Xa,Xa):n===.5?e(_ye,wye):e(uP(n),uP(1/n))}return t.exponent=function(a){return arguments.length?(n=+a,r()):n},Wd(t)}function DD(){var e=kye(t3());return e.copy=function(){return hy(e,DD()).exponent(e.exponent())},Su.apply(e,arguments),e}function BD(){var e=[],t=[],n=[],r;function a(){var o=0,s=Math.max(1,t.length);for(n=new Array(s-1);++o<s;)n[o-1]=Lbe(e,o/s);return i}function i(o){return isNaN(o=+o)?r:t[py(n,o)]}return i.invertExtent=function(o){var s=t.indexOf(o);return s<0?[NaN,NaN]:[s>0?n[s-1]:e[0],s<n.length?n[s]:e[e.length-1]]},i.domain=function(o){if(!arguments.length)return e.slice();e=[];for(var s=0,l=o.length,u;s<l;++s)u=o[s],u!=null&&!isNaN(u=+u)&&e.push(u);return e.sort(KE),a()},i.range=function(o){return arguments.length?(t=Sc.call(o),a()):t.slice()},i.unknown=function(o){return arguments.length?(r=o,i):r},i.quantiles=function(){return n.slice()},i.copy=function(){return BD().domain(e).range(t).unknown(r)},Su.apply(i,arguments)}function zD(){var e=0,t=1,n=1,r=[.5],a=[0,1],i;function o(l){return l<=l?a[py(r,l,0,n)]:i}function s(){var l=-1;for(r=new Array(n);++l<n;)r[l]=((l+1)*t-(l-n)*e)/(n+1);return o}return o.domain=function(l){return arguments.length?(e=+l[0],t=+l[1],s()):[e,t]},o.range=function(l){return arguments.length?(n=(a=Sc.call(l)).length-1,s()):a.slice()},o.invertExtent=function(l){var u=a.indexOf(l);return u<0?[NaN,NaN]:u<1?[e,r[0]]:u>=n?[r[n-1],t]:[r[u-1],r[u]]},o.unknown=function(l){return arguments.length&&(i=l),o},o.thresholds=function(){return r.slice()},o.copy=function(){return zD().domain([e,t]).range(a).unknown(i)},Su.apply(Wd(o),arguments)}function UD(){var e=[.5],t=[0,1],n,r=1;function a(i){return i<=i?t[py(e,i,0,r)]:n}return a.domain=function(i){return arguments.length?(e=Sc.call(i),r=Math.min(e.length,t.length-1),a):e.slice()},a.range=function(i){return arguments.length?(t=Sc.call(i),r=Math.min(e.length,t.length-1),a):t.slice()},a.invertExtent=function(i){var o=t.indexOf(i);return[e[o-1],e[o]]},a.unknown=function(i){return arguments.length?(n=i,a):n},a.copy=function(){return UD().domain(e).range(t).unknown(n)},Su.apply(a,arguments)}var c_=new Date,f_=new Date;function pi(e,t,n,r){function a(i){return e(i=arguments.length===0?new Date:new Date(+i)),i}return a.floor=function(i){return e(i=new Date(+i)),i},a.ceil=function(i){return e(i=new Date(i-1)),t(i,1),e(i),i},a.round=function(i){var o=a(i),s=a.ceil(i);return i-o<s-i?o:s},a.offset=function(i,o){return t(i=new Date(+i),o==null?1:Math.floor(o)),i},a.range=function(i,o,s){var l=[],u;if(i=a.ceil(i),s=s==null?1:Math.floor(s),!(i<o)||!(s>0))return l;do l.push(u=new Date(+i)),t(i,s),e(i);while(u<i&&i<o);return l},a.filter=function(i){return pi(function(o){if(o>=o)for(;e(o),!i(o);)o.setTime(o-1)},function(o,s){if(o>=o)if(s<0)for(;++s<=0;)for(;t(o,-1),!i(o););else for(;--s>=0;)for(;t(o,1),!i(o););})},n&&(a.count=function(i,o){return c_.setTime(+i),f_.setTime(+o),e(c_),e(f_),Math.floor(n(c_,f_))},a.every=function(i){return i=Math.floor(i),!isFinite(i)||!(i>0)?null:i>1?a.filter(r?function(o){return r(o)%i===0}:function(o){return a.count(0,o)%i===0}):a}),a}var ib=pi(function(){},function(e,t){e.setTime(+e+t)},function(e,t){return t-e});ib.every=function(e){return e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?pi(function(t){t.setTime(Math.floor(t/e)*e)},function(t,n){t.setTime(+t+n*e)},function(t,n){return(n-t)/e}):ib};var Eye=ib;ib.range;var ob=1e3,vm=6e4,cP=36e5,$D=864e5,VD=6048e5,jD=pi(function(e){e.setTime(e-e.getMilliseconds())},function(e,t){e.setTime(+e+t*ob)},function(e,t){return(t-e)/ob},function(e){return e.getUTCSeconds()}),Sye=jD;jD.range;var GD=pi(function(e){e.setTime(e-e.getMilliseconds()-e.getSeconds()*ob)},function(e,t){e.setTime(+e+t*vm)},function(e,t){return(t-e)/vm},function(e){return e.getMinutes()}),Cye=GD;GD.range;var HD=pi(function(e){e.setTime(e-e.getMilliseconds()-e.getSeconds()*ob-e.getMinutes()*vm)},function(e,t){e.setTime(+e+t*cP)},function(e,t){return(t-e)/cP},function(e){return e.getHours()}),Tye=HD;HD.range;var WD=pi(function(e){e.setHours(0,0,0,0)},function(e,t){e.setDate(e.getDate()+t)},function(e,t){return(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*vm)/$D},function(e){return e.getDate()-1}),a3=WD;WD.range;function Rc(e){return pi(function(t){t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},function(t,n){t.setDate(t.getDate()+n*7)},function(t,n){return(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*vm)/VD})}var i3=Rc(0),sb=Rc(1),Aye=Rc(2),Oye=Rc(3),kd=Rc(4),Mye=Rc(5),Rye=Rc(6);i3.range;sb.range;Aye.range;Oye.range;kd.range;Mye.range;Rye.range;var YD=pi(function(e){e.setDate(1),e.setHours(0,0,0,0)},function(e,t){e.setMonth(e.getMonth()+t)},function(e,t){return t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12},function(e){return e.getMonth()}),Pye=YD;YD.range;var o3=pi(function(e){e.setMonth(0,1),e.setHours(0,0,0,0)},function(e,t){e.setFullYear(e.getFullYear()+t)},function(e,t){return t.getFullYear()-e.getFullYear()},function(e){return e.getFullYear()});o3.every=function(e){return!isFinite(e=Math.floor(e))||!(e>0)?null:pi(function(t){t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},function(t,n){t.setFullYear(t.getFullYear()+n*e)})};var Ed=o3;o3.range;var XD=pi(function(e){e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCDate(e.getUTCDate()+t)},function(e,t){return(t-e)/$D},function(e){return e.getUTCDate()-1}),ZD=XD;XD.range;function Pc(e){return pi(function(t){t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},function(t,n){t.setUTCDate(t.getUTCDate()+n*7)},function(t,n){return(n-t)/VD})}var qD=Pc(0),lb=Pc(1),Iye=Pc(2),Lye=Pc(3),Sd=Pc(4),Nye=Pc(5),Fye=Pc(6);qD.range;lb.range;Iye.range;Lye.range;Sd.range;Nye.range;Fye.range;var s3=pi(function(e){e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCFullYear(e.getUTCFullYear()+t)},function(e,t){return t.getUTCFullYear()-e.getUTCFullYear()},function(e){return e.getUTCFullYear()});s3.every=function(e){return!isFinite(e=Math.floor(e))||!(e>0)?null:pi(function(t){t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},function(t,n){t.setUTCFullYear(t.getUTCFullYear()+n*e)})};var bm=s3;s3.range;function d_(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function p_(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Wp(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function Dye(e){var t=e.dateTime,n=e.date,r=e.time,a=e.periods,i=e.days,o=e.shortDays,s=e.months,l=e.shortMonths,u=Yp(a),c=Xp(a),f=Yp(i),d=Xp(i),p=Yp(o),h=Xp(o),g=Yp(s),v=Xp(s),b=Yp(l),y=Xp(l),x={a:re,A:X,b:K,B:ae,c:null,d:gP,e:gP,f:oxe,g:gxe,G:bxe,H:rxe,I:axe,j:ixe,L:KD,m:sxe,M:lxe,p:le,q:ue,Q:yP,s:xP,S:uxe,u:cxe,U:fxe,V:dxe,w:pxe,W:hxe,x:null,X:null,y:mxe,Y:vxe,Z:yxe,"%":bP},k={a:ge,A:be,b:ze,B:Lt,c:null,d:vP,e:vP,f:kxe,g:Ixe,G:Nxe,H:xxe,I:_xe,j:wxe,L:JD,m:Exe,M:Sxe,p:Rt,q:qt,Q:yP,s:xP,S:Cxe,u:Txe,U:Axe,V:Oxe,w:Mxe,W:Rxe,x:null,X:null,y:Pxe,Y:Lxe,Z:Fxe,"%":bP},T={a:A,A:S,b:M,B:O,c:R,d:hP,e:hP,f:Jye,g:pP,G:dP,H:mP,I:mP,j:Zye,L:Qye,m:Xye,M:qye,p:j,q:Yye,Q:txe,s:nxe,S:Kye,u:Vye,U:jye,V:Gye,w:$ye,W:Hye,x:G,X:ee,y:pP,Y:dP,Z:Wye,"%":exe};x.x=C(n,x),x.X=C(r,x),x.c=C(t,x),k.x=C(n,k),k.X=C(r,k),k.c=C(t,k);function C(Me,Qe){return function(et){var ve=[],ft=-1,kt=0,xt=Me.length,Ct,ht,Gt;for(et instanceof Date||(et=new Date(+et));++ft<xt;)Me.charCodeAt(ft)===37&&(ve.push(Me.slice(kt,ft)),(ht=fP[Ct=Me.charAt(++ft)])!=null?Ct=Me.charAt(++ft):ht=Ct==="e"?" ":"0",(Gt=Qe[Ct])&&(Ct=Gt(et,ht)),ve.push(Ct),kt=ft+1);return ve.push(Me.slice(kt,ft)),ve.join("")}}function I(Me,Qe){return function(et){var ve=Wp(1900,void 0,1),ft=P(ve,Me,et+="",0),kt,xt;if(ft!=et.length)return null;if("Q"in ve)return new Date(ve.Q);if("s"in ve)return new Date(ve.s*1e3+("L"in ve?ve.L:0));if(Qe&&!("Z"in ve)&&(ve.Z=0),"p"in ve&&(ve.H=ve.H%12+ve.p*12),ve.m===void 0&&(ve.m="q"in ve?ve.q:0),"V"in ve){if(ve.V<1||ve.V>53)return null;"w"in ve||(ve.w=1),"Z"in ve?(kt=p_(Wp(ve.y,0,1)),xt=kt.getUTCDay(),kt=xt>4||xt===0?lb.ceil(kt):lb(kt),kt=ZD.offset(kt,(ve.V-1)*7),ve.y=kt.getUTCFullYear(),ve.m=kt.getUTCMonth(),ve.d=kt.getUTCDate()+(ve.w+6)%7):(kt=d_(Wp(ve.y,0,1)),xt=kt.getDay(),kt=xt>4||xt===0?sb.ceil(kt):sb(kt),kt=a3.offset(kt,(ve.V-1)*7),ve.y=kt.getFullYear(),ve.m=kt.getMonth(),ve.d=kt.getDate()+(ve.w+6)%7)}else("W"in ve||"U"in ve)&&("w"in ve||(ve.w="u"in ve?ve.u%7:"W"in ve?1:0),xt="Z"in ve?p_(Wp(ve.y,0,1)).getUTCDay():d_(Wp(ve.y,0,1)).getDay(),ve.m=0,ve.d="W"in ve?(ve.w+6)%7+ve.W*7-(xt+5)%7:ve.w+ve.U*7-(xt+6)%7);return"Z"in ve?(ve.H+=ve.Z/100|0,ve.M+=ve.Z%100,p_(ve)):d_(ve)}}function P(Me,Qe,et,ve){for(var ft=0,kt=Qe.length,xt=et.length,Ct,ht;ft<kt;){if(ve>=xt)return-1;if(Ct=Qe.charCodeAt(ft++),Ct===37){if(Ct=Qe.charAt(ft++),ht=T[Ct in fP?Qe.charAt(ft++):Ct],!ht||(ve=ht(Me,et,ve))<0)return-1}else if(Ct!=et.charCodeAt(ve++))return-1}return ve}function j(Me,Qe,et){var ve=u.exec(Qe.slice(et));return ve?(Me.p=c[ve[0].toLowerCase()],et+ve[0].length):-1}function A(Me,Qe,et){var ve=p.exec(Qe.slice(et));return ve?(Me.w=h[ve[0].toLowerCase()],et+ve[0].length):-1}function S(Me,Qe,et){var ve=f.exec(Qe.slice(et));return ve?(Me.w=d[ve[0].toLowerCase()],et+ve[0].length):-1}function M(Me,Qe,et){var ve=b.exec(Qe.slice(et));return ve?(Me.m=y[ve[0].toLowerCase()],et+ve[0].length):-1}function O(Me,Qe,et){var ve=g.exec(Qe.slice(et));return ve?(Me.m=v[ve[0].toLowerCase()],et+ve[0].length):-1}function R(Me,Qe,et){return P(Me,t,Qe,et)}function G(Me,Qe,et){return P(Me,n,Qe,et)}function ee(Me,Qe,et){return P(Me,r,Qe,et)}function re(Me){return o[Me.getDay()]}function X(Me){return i[Me.getDay()]}function K(Me){return l[Me.getMonth()]}function ae(Me){return s[Me.getMonth()]}function le(Me){return a[+(Me.getHours()>=12)]}function ue(Me){return 1+~~(Me.getMonth()/3)}function ge(Me){return o[Me.getUTCDay()]}function be(Me){return i[Me.getUTCDay()]}function ze(Me){return l[Me.getUTCMonth()]}function Lt(Me){return s[Me.getUTCMonth()]}function Rt(Me){return a[+(Me.getUTCHours()>=12)]}function qt(Me){return 1+~~(Me.getUTCMonth()/3)}return{format:function(Me){var Qe=C(Me+="",x);return Qe.toString=function(){return Me},Qe},parse:function(Me){var Qe=I(Me+="",!1);return Qe.toString=function(){return Me},Qe},utcFormat:function(Me){var Qe=C(Me+="",k);return Qe.toString=function(){return Me},Qe},utcParse:function(Me){var Qe=I(Me+="",!0);return Qe.toString=function(){return Me},Qe}}}var fP={"-":"",_:" ",0:"0"},ka=/^\s*\d+/,Bye=/^%/,zye=/[\\^$*+?|[\]().{}]/g;function Hn(e,t,n){var r=e<0?"-":"",a=(r?-e:e)+"",i=a.length;return r+(i<n?new Array(n-i+1).join(t)+a:a)}function Uye(e){return e.replace(zye,"\\$&")}function Yp(e){return new RegExp("^(?:"+e.map(Uye).join("|")+")","i")}function Xp(e){for(var t={},n=-1,r=e.length;++n<r;)t[e[n].toLowerCase()]=n;return t}function $ye(e,t,n){var r=ka.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function Vye(e,t,n){var r=ka.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function jye(e,t,n){var r=ka.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function Gye(e,t,n){var r=ka.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function Hye(e,t,n){var r=ka.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function dP(e,t,n){var r=ka.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function pP(e,t,n){var r=ka.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function Wye(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function Yye(e,t,n){var r=ka.exec(t.slice(n,n+1));return r?(e.q=r[0]*3-3,n+r[0].length):-1}function Xye(e,t,n){var r=ka.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function hP(e,t,n){var r=ka.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function Zye(e,t,n){var r=ka.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function mP(e,t,n){var r=ka.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function qye(e,t,n){var r=ka.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function Kye(e,t,n){var r=ka.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function Qye(e,t,n){var r=ka.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function Jye(e,t,n){var r=ka.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function exe(e,t,n){var r=Bye.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function txe(e,t,n){var r=ka.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function nxe(e,t,n){var r=ka.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function gP(e,t){return Hn(e.getDate(),t,2)}function rxe(e,t){return Hn(e.getHours(),t,2)}function axe(e,t){return Hn(e.getHours()%12||12,t,2)}function ixe(e,t){return Hn(1+a3.count(Ed(e),e),t,3)}function KD(e,t){return Hn(e.getMilliseconds(),t,3)}function oxe(e,t){return KD(e,t)+"000"}function sxe(e,t){return Hn(e.getMonth()+1,t,2)}function lxe(e,t){return Hn(e.getMinutes(),t,2)}function uxe(e,t){return Hn(e.getSeconds(),t,2)}function cxe(e){var t=e.getDay();return t===0?7:t}function fxe(e,t){return Hn(i3.count(Ed(e)-1,e),t,2)}function QD(e){var t=e.getDay();return t>=4||t===0?kd(e):kd.ceil(e)}function dxe(e,t){return e=QD(e),Hn(kd.count(Ed(e),e)+(Ed(e).getDay()===4),t,2)}function pxe(e){return e.getDay()}function hxe(e,t){return Hn(sb.count(Ed(e)-1,e),t,2)}function mxe(e,t){return Hn(e.getFullYear()%100,t,2)}function gxe(e,t){return e=QD(e),Hn(e.getFullYear()%100,t,2)}function vxe(e,t){return Hn(e.getFullYear()%1e4,t,4)}function bxe(e,t){var n=e.getDay();return e=n>=4||n===0?kd(e):kd.ceil(e),Hn(e.getFullYear()%1e4,t,4)}function yxe(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+Hn(t/60|0,"0",2)+Hn(t%60,"0",2)}function vP(e,t){return Hn(e.getUTCDate(),t,2)}function xxe(e,t){return Hn(e.getUTCHours(),t,2)}function _xe(e,t){return Hn(e.getUTCHours()%12||12,t,2)}function wxe(e,t){return Hn(1+ZD.count(bm(e),e),t,3)}function JD(e,t){return Hn(e.getUTCMilliseconds(),t,3)}function kxe(e,t){return JD(e,t)+"000"}function Exe(e,t){return Hn(e.getUTCMonth()+1,t,2)}function Sxe(e,t){return Hn(e.getUTCMinutes(),t,2)}function Cxe(e,t){return Hn(e.getUTCSeconds(),t,2)}function Txe(e){var t=e.getUTCDay();return t===0?7:t}function Axe(e,t){return Hn(qD.count(bm(e)-1,e),t,2)}function eB(e){var t=e.getUTCDay();return t>=4||t===0?Sd(e):Sd.ceil(e)}function Oxe(e,t){return e=eB(e),Hn(Sd.count(bm(e),e)+(bm(e).getUTCDay()===4),t,2)}function Mxe(e){return e.getUTCDay()}function Rxe(e,t){return Hn(lb.count(bm(e)-1,e),t,2)}function Pxe(e,t){return Hn(e.getUTCFullYear()%100,t,2)}function Ixe(e,t){return e=eB(e),Hn(e.getUTCFullYear()%100,t,2)}function Lxe(e,t){return Hn(e.getUTCFullYear()%1e4,t,4)}function Nxe(e,t){var n=e.getUTCDay();return e=n>=4||n===0?Sd(e):Sd.ceil(e),Hn(e.getUTCFullYear()%1e4,t,4)}function Fxe(){return"+0000"}function bP(){return"%"}function yP(e){return+e}function xP(e){return Math.floor(+e/1e3)}var ff,tB;Dxe({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function Dxe(e){return ff=Dye(e),tB=ff.format,ff.parse,ff.utcFormat,ff.utcParse,ff}var fh=1e3,dh=fh*60,ph=dh*60,ym=ph*24,Bxe=ym*7,_P=ym*30,h_=ym*365;function zxe(e){return new Date(e)}function Uxe(e){return e instanceof Date?+e:+new Date(+e)}function nB(e,t,n,r,a,i,o,s,l){var u=MD(Xa,Xa),c=u.invert,f=u.domain,d=l(".%L"),p=l(":%S"),h=l("%I:%M"),g=l("%I %p"),v=l("%a %d"),b=l("%b %d"),y=l("%B"),x=l("%Y"),k=[[o,1,fh],[o,5,5*fh],[o,15,15*fh],[o,30,30*fh],[i,1,dh],[i,5,5*dh],[i,15,15*dh],[i,30,30*dh],[a,1,ph],[a,3,3*ph],[a,6,6*ph],[a,12,12*ph],[r,1,ym],[r,2,2*ym],[n,1,Bxe],[t,1,_P],[t,3,3*_P],[e,1,h_]];function T(I){return(o(I)<I?d:i(I)<I?p:a(I)<I?h:r(I)<I?g:t(I)<I?n(I)<I?v:b:e(I)<I?y:x)(I)}function C(I,P,j,A){if(I==null&&(I=10),typeof I=="number"){var S=Math.abs(j-P)/I,M=kD(function(O){return O[2]}).right(k,S);M===k.length?(A=kk(P/h_,j/h_,I),I=e):M?(M=k[S/k[M-1][2]<k[M][2]/S?M-1:M],A=M[1],I=M[0]):(A=Math.max(kk(P,j,I),1),I=s)}return A==null?I:I.every(A)}return u.invert=function(I){return new Date(c(I))},u.domain=function(I){return arguments.length?f(eb.call(I,Uxe)):f().map(zxe)},u.ticks=function(I,P){var j=f(),A=j[0],S=j[j.length-1],M=S<A,O;return M&&(O=A,A=S,S=O),O=C(I,A,S,P),O=O?O.range(A,S+1):[],M?O.reverse():O},u.tickFormat=function(I,P){return P==null?T:l(P)},u.nice=function(I,P){var j=f();return(I=C(I,j[0],j[j.length-1],P))?f(ND(j,I)):u},u.copy=function(){return hy(u,nB(e,t,n,r,a,i,o,s,l))},u}function $xe(){return Su.apply(nB(Ed,Pye,i3,a3,Tye,Cye,Sye,Eye,tB).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function Vxe(){var e=0,t=1,n,r,a,i,o=Xa,s=!1,l;function u(c){return isNaN(c=+c)?l:o(a===0?.5:(c=(i(c)-n)*a,s?Math.max(0,Math.min(1,c)):c))}return u.domain=function(c){return arguments.length?(n=i(e=+c[0]),r=i(t=+c[1]),a=n===r?0:1/(r-n),u):[e,t]},u.clamp=function(c){return arguments.length?(s=!!c,u):s},u.interpolator=function(c){return arguments.length?(o=c,u):o},u.unknown=function(c){return arguments.length?(l=c,u):l},function(c){return i=c,n=c(e),r=c(t),a=n===r?0:1/(r-n),u}}function rB(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function aB(){var e=Wd(Vxe()(Xa));return e.copy=function(){return rB(e,aB())},TD.apply(e,arguments)}function jxe(){var e=0,t=.5,n=1,r,a,i,o,s,l=Xa,u,c=!1,f;function d(p){return isNaN(p=+p)?f:(p=.5+((p=+u(p))-a)*(p<a?o:s),l(c?Math.max(0,Math.min(1,p)):p))}return d.domain=function(p){return arguments.length?(r=u(e=+p[0]),a=u(t=+p[1]),i=u(n=+p[2]),o=r===a?0:.5/(a-r),s=a===i?0:.5/(i-a),d):[e,t,n]},d.clamp=function(p){return arguments.length?(c=!!p,d):c},d.interpolator=function(p){return arguments.length?(l=p,d):l},d.unknown=function(p){return arguments.length?(f=p,d):f},function(p){return u=p,r=p(e),a=p(t),i=p(n),o=r===a?0:.5/(a-r),s=a===i?0:.5/(i-a),d}}function iB(){var e=Wd(jxe()(Xa));return e.copy=function(){return rB(e,iB())},TD.apply(e,arguments)}var Mi,wP,kP,EP,m_,SP;function CP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function TP(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?CP(Object(n),!0).forEach(function(r){m(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):CP(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var Gxe=/^(?:(?!0000)[0-9]{4}([-/.]+)(?:(?:0?[1-9]|1[0-2])\1(?:0?[1-9]|1[0-9]|2[0-8])|(?:0?[13-9]|1[0-2])\1(?:29|30)|(?:0?[13578]|1[02])\1(?:31))|(?:[0-9]{2}(?:0[48]|[2468][048]|[13579][26])|(?:0[48]|[2468][048]|[13579][26])00)([-/.]?)0?2\2(?:29))(\s+([01]|([01][0-9]|2[0-3])):([0-9]|[0-5][0-9]):([0-9]|[0-5][0-9]))?$/,Hxe=(Mi={},m(Mi,jn.LINEAR,ID),m(Mi,jn.POWER,DD),m(Mi,jn.LOG,FD),m(Mi,jn.IDENTITY,LD),m(Mi,jn.SEQUENTIAL,aB),m(Mi,jn.TIME,$xe),m(Mi,jn.QUANTILE,BD),m(Mi,jn.QUANTIZE,zD),m(Mi,jn.THRESHOLD,UD),m(Mi,jn.CAT,tb),m(Mi,jn.DIVERGING,iB),Mi),Wxe=(wP=sn(),kP=dn(xe.IGlobalConfigService),wP(EP=(m_=function(){function e(){Ae(this,e),an(this,"configService",SP,this),m(this,"scaleCache",{}),m(this,"scaleOptions",{})}return Oe(e,[{key:"apply",value:function(n,r){var a=this,i=r.styleAttributeService;n.hooks.init.tap("FeatureScalePlugin",function(){a.scaleOptions=n.getScaleOptions();var o=i.getLayerStyleAttributes(),s=n.getSource().data.dataArray;s.length!==0&&a.caculateScalesForAttributes(o||[],s)}),n.hooks.beforeRenderData.tap("FeatureScalePlugin",function(){a.scaleOptions=n.getScaleOptions();var o=i.getLayerStyleAttributes(),s=n.getSource().data.dataArray;return a.caculateScalesForAttributes(o||[],s),n.layerModelNeedUpdate=!0,!0}),n.hooks.beforeRender.tap("FeatureScalePlugin",function(){if(!n.layerModelNeedUpdate){a.scaleOptions=n.getScaleOptions();var o=i.getLayerStyleAttributes();if(o){var s=n.getSource().data.dataArray;if(s.length===0)return;var l=o.filter(function(u){return u.needRescale});l.length&&a.caculateScalesForAttributes(l,s)}}})}},{key:"isNumber",value:function(n){return!isNaN(parseFloat(n))&&isFinite(n)}},{key:"caculateScalesForAttributes",value:function(n,r){var a=this;this.scaleCache={},n.forEach(function(i){if(i.scale){var o=i.scale;i.name,o.names=a.parseFields(i.scale.field||[]);var s=[];o.names.forEach(function(l){var u;s.push(a.createScale(l,i.name,(u=i.scale)===null||u===void 0?void 0:u.values,r))}),s.some(function(l){return l.type===Ul.VARIABLE})?(o.type=Ul.VARIABLE,s.forEach(function(l){var u;if(!o.callback&&o.values!=="text")switch((u=l.option)===null||u===void 0?void 0:u.type){case jn.LOG:case jn.LINEAR:case jn.POWER:if(o.values&&o.values.length>2){var c=l.scale.ticks(o.values.length);l.scale.domain(c)}o.values?l.scale.range(o.values):l.scale.range(l.option.domain);break;case jn.QUANTILE:case jn.QUANTIZE:case jn.THRESHOLD:l.scale.range(o.values);break;case jn.CAT:o.values?l.scale.range(o.values):l.scale.range(l.option.domain);break;case jn.DIVERGING:case jn.SEQUENTIAL:l.scale.interpolator($be(o.values));break}if(o.values==="text"){var f;l.scale.range((f=l.option)===null||f===void 0?void 0:f.domain)}})):(o.type=Ul.CONSTANT,o.defaultValues=s.map(function(l,u){return l.scale(o.names[u])})),o.scalers=s.map(function(l){return{field:l.field,func:l.scale,option:l.option}}),i.needRescale=!1}})}},{key:"parseFields",value:function(n){return Array.isArray(n)?n:Wo(n)?n.split("*"):[n]}},{key:"createScale",value:function(n,r,a,i){var o,s,l=this.scaleOptions[r]&&((o=this.scaleOptions[r])===null||o===void 0?void 0:o.field)===n?this.scaleOptions[r]:this.scaleOptions[n],u={field:n,scale:void 0,type:Ul.VARIABLE,option:l};if(!i||!i.length)return l&&l.type?u.scale=this.createDefaultScale(l):(u.scale=tb([n]),u.type=Ul.CONSTANT),u;var c=(s=i.find(function(p){return!ol(p[n])}))===null||s===void 0?void 0:s[n];if(this.isNumber(n)||ol(c)&&!l)u.scale=tb([n]),u.type=Ul.CONSTANT;else{var f=l&&l.type||this.getDefaultType(c);a==="text"&&(f=jn.CAT);var d=this.createScaleConfig(f,n,l,i);u.scale=this.createDefaultScale(d),u.option=d}return u}},{key:"getDefaultType",value:function(n){var r=jn.LINEAR;return typeof n=="string"&&(r=Gxe.test(n)?jn.TIME:jn.CAT),r}},{key:"createScaleConfig",value:function(n,r,a,i){var o={type:n},s=(i==null?void 0:i.map(function(c){return c[r]}))||[];if(a!=null&&a.domain)o.domain=a==null?void 0:a.domain;else if(n!==jn.CAT&&n!==jn.QUANTILE&&n!==jn.DIVERGING)o.domain=ZR(s);else if(n===jn.CAT)o.domain=PF(s);else if(n===jn.QUANTILE)o.domain=s;else if(n===jn.DIVERGING){var l=ZR(s),u=(a==null?void 0:a.neutral)!==void 0?a==null?void 0:a.neutral:(l[0]+l[1])/2;o.domain=[l[0],u,l[1]]}return TP(TP({},o),a)}},{key:"createDefaultScale",value:function(n){var r=n.type,a=n.domain,i=n.unknown,o=n.clamp,s=n.nice,l=Hxe[r]();return a&&l.domain&&l.domain(a),i&&l.unknown(i),o!==void 0&&l.clamp&&l.clamp(o),s!==void 0&&l.nice&&l.nice(s),l}}]),e}(),SP=rn(m_.prototype,"configService",[kP],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),m_))||EP),AP,OP,MP,RP,mg,PP,IP;function LP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Yxe(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?LP(Object(n),!0).forEach(function(r){m(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):LP(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var Xxe=(AP=sn(),OP=dn(xe.ICameraService),MP=dn(xe.IRendererService),AP(RP=(mg=function(){function e(){Ae(this,e),an(this,"cameraService",PP,this),an(this,"rendererService",IP,this)}return Oe(e,[{key:"apply",value:function(n){n.hooks.beforeRender.tap("LayerAnimateStylePlugin",function(){n.models.forEach(function(r){r.addUniforms(Yxe({},n.layerModel.getAnimateUniforms()))})})}}]),e}(),PP=rn(mg.prototype,"cameraService",[OP],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),IP=rn(mg.prototype,"rendererService",[MP],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),mg))||RP),NP,FP,Zxe=(NP=sn(),NP(FP=function(){function e(){Ae(this,e)}return Oe(e,[{key:"apply",value:function(n){n.hooks.init.tap("LayerModelPlugin",function(){n.prepareBuildModel(),n.buildModels(),n.styleNeedUpdate=!1}),n.hooks.beforeRenderData.tap("DataSourcePlugin",function(){return n.prepareBuildModel(),n.clearModels(),n.buildModels(),n.layerModelNeedUpdate=!1,!1})}}]),e}())||FP),DP,BP,qxe=(DP=sn(),DP(BP=function(){function e(){Ae(this,e)}return Oe(e,[{key:"apply",value:function(n){n.hooks.afterInit.tap("LayerStylePlugin",function(){n.updateLayerConfig({});var r=n.getLayerConfig(),a=r.autoFit,i=r.fitBoundsOptions;a&&setTimeout(function(){n.fitBounds(i)},100)})}}]),e}())||BP),zP,UP,Kxe=["type"];function $P(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function hh(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?$P(Object(n),!0).forEach(function(r){m(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$P(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var VP={directional:{lights:"u_DirectionalLights",num:"u_NumOfDirectionalLights"},spot:{lights:"u_SpotLights",num:"u_NumOfSpotLights"}},Qxe={type:"directional",direction:[1,10.5,12],ambient:[.2,.2,.2],diffuse:[.6,.6,.6],specular:[.1,.1,.1]},Jxe={direction:[0,0,0],ambient:[0,0,0],diffuse:[0,0,0],specular:[0,0,0]},e1e={position:[0,0,0],direction:[0,0,0],ambient:[0,0,0],diffuse:[0,0,0],specular:[0,0,0],constant:1,linear:0,quadratic:0,angle:14,exponent:40,blur:5};function t1e(e){var t={u_DirectionalLights:new Array(3).fill(hh({},Jxe)),u_NumOfDirectionalLights:0,u_SpotLights:new Array(3).fill(hh({},e1e)),u_NumOfSpotLights:0};return(!e||!e.length)&&(e=[Qxe]),e.forEach(function(n,r){var a=n.type,i=a===void 0?"directional":a,o=Nn(n,Kxe),s=VP[i].lights,l=VP[i].num,u=t[l];t[s][u]=hh(hh({},t[s][u]),o),t[l]++}),t}var n1e=(zP=sn(),zP(UP=function(){function e(){Ae(this,e)}return Oe(e,[{key:"apply",value:function(n){n.hooks.beforeRender.tap("LightingPlugin",function(){var r=n.getLayerConfig(),a=r.enableLighting;a&&n.models.forEach(function(i){return i.addUniforms(hh({},t1e()))})})}}]),e}())||UP),jP,GP,HP,g_,WP,r1e=(jP=sn(),GP=dn(xe.IGlobalConfigService),jP(HP=(g_=function(){function e(){Ae(this,e),an(this,"configService",WP,this),m(this,"enabled",void 0)}return Oe(e,[{key:"apply",value:function(n,r){var a=this,i=r.rendererService,o=r.postProcessingPassFactory,s=r.normalPassFactory;n.hooks.init.tap("MultiPassRendererPlugin",function(){var l=n.getLayerConfig(),u=l.enableMultiPassRenderer,c=l.passes,f=c===void 0?[]:c;a.enabled=!!u&&n.getLayerConfig().enableMultiPassRenderer!==!1,a.enabled&&(n.multiPassRenderer=aD(n,f,o,s),n.multiPassRenderer.setRenderFlag(!0))}),n.hooks.beforeRender.tap("MultiPassRendererPlugin",function(){if(a.enabled){var l=i.getViewportSize(),u=l.width,c=l.height;n.multiPassRenderer.resize(u,c)}})}}]),e}(),WP=rn(g_.prototype,"configService",[GP],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),g_))||HP),YP,XP,gg={NONE:0,ENCODE:1,HIGHLIGHT:2},a1e=(YP=sn(),YP(XP=function(){function e(){Ae(this,e)}return Oe(e,[{key:"apply",value:function(n,r){r.rendererService;var a=r.styleAttributeService;n.hooks.init.tap("PixelPickingPlugin",function(){a.registerStyleAttribute({name:"pickingColor",type:kn.Attribute,descriptor:{name:"a_PickingColor",buffer:{data:[],type:V.FLOAT},size:3,update:function(o,s){var l=o.id;return lm(l)}}})}),n.hooks.beforePickingEncode.tap("PixelPickingPlugin",function(){var i=n.getLayerConfig(),o=i.enablePicking;o&&n.isVisible()&&n.models.forEach(function(s){return s.addUniforms({u_PickingStage:gg.ENCODE})})}),n.hooks.afterPickingEncode.tap("PixelPickingPlugin",function(){var i=n.getLayerConfig(),o=i.enablePicking;o&&n.isVisible()&&n.models.forEach(function(s){return s.addUniforms({u_PickingStage:gg.HIGHLIGHT})})}),n.hooks.beforeHighlight.tap("PixelPickingPlugin",function(i){var o=n.getLayerConfig(),s=o.highlightColor,l=o.activeMix,u=l===void 0?0:l,c=typeof s=="string"?Ts(s):s||[1,0,0,1];n.updateLayerConfig({pickedFeatureID:xs(new Uint8Array(i))}),n.models.forEach(function(f){return f.addUniforms({u_PickingStage:gg.HIGHLIGHT,u_PickingColor:i,u_HighlightColor:c.map(function(d){return d*255}),u_activeMix:u})})}),n.hooks.beforeSelect.tap("PixelPickingPlugin",function(i){var o=n.getLayerConfig(),s=o.selectColor,l=o.selectMix,u=l===void 0?0:l,c=typeof s=="string"?Ts(s):s||[1,0,0,1];n.updateLayerConfig({pickedFeatureID:xs(new Uint8Array(i))}),n.models.forEach(function(f){return f.addUniforms({u_PickingStage:gg.HIGHLIGHT,u_PickingColor:i,u_HighlightColor:c.map(function(d){return d*255}),u_activeMix:u,u_CurrentSelectedId:i,u_SelectColor:c.map(function(d){return d*255}),u_EnableSelect:1})})})}}]),e}())||XP),ZP,qP,i1e=(ZP=sn(),ZP(qP=function(){function e(){Ae(this,e)}return Oe(e,[{key:"apply",value:function(n,r){var a=this,i=r.styleAttributeService;n.hooks.init.tap("RegisterStyleAttributePlugin",function(){a.registerBuiltinAttributes(i)})}},{key:"registerBuiltinAttributes",value:function(n){n.registerStyleAttribute({name:"position",type:kn.Attribute,descriptor:{name:"a_Position",buffer:{data:[],type:V.FLOAT},size:3,update:function(a,i,o){return o.length===2?[o[0],o[1],0]:[o[0],o[1],o[2]]}}}),n.registerStyleAttribute({name:"filter",type:kn.Attribute,descriptor:{name:"filter",buffer:{usage:V.DYNAMIC_DRAW,data:[],type:V.FLOAT},size:1,update:function(a,i){var o=a.filter;return o?[1]:[0]}}}),n.registerStyleAttribute({name:"color",type:kn.Attribute,descriptor:{name:"a_Color",buffer:{usage:V.DYNAMIC_DRAW,data:[],type:V.FLOAT},size:4,update:function(a,i){var o=a.color;return!o||!o.length?[1,1,1,1]:o}}}),n.registerStyleAttribute({name:"vertexId",type:kn.Attribute,descriptor:{name:"a_vertexId",buffer:{usage:V.DYNAMIC_DRAW,data:[],type:V.FLOAT},size:1,update:function(a,i,o,s){return[i]}}})}}]),e}())||qP),KP,QP,JP,e8,t8,n8,df,r8,a8,i8,o8,o1e=(KP=sn(),QP=dn(xe.ICameraService),JP=dn(xe.ICoordinateSystemService),e8=dn(xe.IRendererService),t8=dn(xe.IMapService),KP(n8=(df=function(){function e(){Ae(this,e),an(this,"cameraService",r8,this),an(this,"coordinateSystemService",a8,this),an(this,"rendererService",i8,this),an(this,"mapService",o8,this)}return Oe(e,[{key:"apply",value:function(n){var r=this,a=this.mapService.version,i=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],o=[0,0];n.hooks.beforeRender.tap("ShaderUniformPlugin",function(){var s=n.getLayerConfig().tileOrigin;if(r.coordinateSystemService.refresh(s),a==="GAODE2.x"){var l=r.getLayerCenter(n);r.mapService.map.customCoords.setCenter(l),r.mapService.setCustomCoordCenter(l),i=r.mapService.map.customCoords.getMVPMatrix(),o=r.mapService.getCustomCoordCenter()}var u=r.rendererService.getViewportSize(),c=u.width,f=u.height;n.models.forEach(function(d){var p;d.addUniforms((p={},m(p,Vu.ProjectionMatrix,r.cameraService.getProjectionMatrix()),m(p,Vu.ViewMatrix,r.cameraService.getViewMatrix()),m(p,Vu.ViewProjectionMatrix,r.cameraService.getViewProjectionMatrix()),m(p,Vu.Zoom,r.cameraService.getZoom()),m(p,Vu.ZoomScale,r.cameraService.getZoomScale()),m(p,Vu.FocalDistance,r.cameraService.getFocalDistance()),m(p,Vu.CameraPosition,r.cameraService.getCameraPosition()),m(p,Uu.CoordinateSystem,r.coordinateSystemService.getCoordinateSystem()),m(p,Uu.ViewportCenter,r.coordinateSystemService.getViewportCenter()),m(p,Uu.ViewportCenterProjection,r.coordinateSystemService.getViewportCenterProjection()),m(p,Uu.PixelsPerDegree,r.coordinateSystemService.getPixelsPerDegree()),m(p,Uu.PixelsPerDegree2,r.coordinateSystemService.getPixelsPerDegree2()),m(p,Uu.PixelsPerMeter,r.coordinateSystemService.getPixelsPerMeter()),m(p,Uu.Mvp,i),m(p,"u_SceneCenterMKT",o),m(p,"u_ViewportSize",[c,f]),m(p,"u_ModelMatrix",r.cameraService.getModelMatrix()),m(p,"u_DevicePixelRatio",tr.devicePixelRatio),m(p,"u_PickingBuffer",n.getLayerConfig().pickingBuffer||0),m(p,"u_shaderPick",Number(n.getShaderPickStat())),p))})})}},{key:"getLayerCenter",value:function(n){var r=n.getSource();return r.center}}]),e}(),r8=rn(df.prototype,"cameraService",[QP],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),a8=rn(df.prototype,"coordinateSystemService",[JP],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),i8=rn(df.prototype,"rendererService",[e8],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),o8=rn(df.prototype,"mapService",[t8],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),df))||n8),s8,l8,s1e=(s8=sn(),s8(l8=function(){function e(){Ae(this,e)}return Oe(e,[{key:"apply",value:function(n){n.hooks.beforeRender.tap("UpdateModelPlugin",function(){n.layerModel&&n.layerModel.needUpdate()})}}]),e}())||l8),u8,c8,l1e=(u8=sn(),u8(c8=function(){function e(){Ae(this,e)}return Oe(e,[{key:"apply",value:function(n,r){var a=this,i=r.styleAttributeService;n.hooks.init.tap("UpdateStyleAttributePlugin",function(){a.initStyleAttribute(n,{styleAttributeService:i})}),n.hooks.beforeRender.tap("UpdateStyleAttributePlugin",function(){n.layerModelNeedUpdate||a.updateStyleAtrribute(n,{styleAttributeService:i})})}},{key:"updateStyleAtrribute",value:function(n,r){var a=r.styleAttributeService,i=a.getLayerStyleAttributes()||[],o=a.getLayerStyleAttribute("filter");if(a.getLayerStyleAttribute("shape"),o&&o.needRegenerateVertices){n.layerModelNeedUpdate=!0,i.forEach(function(s){return s.needRegenerateVertices=!1});return}i.filter(function(s){return s.needRegenerateVertices}).forEach(function(s){a.updateAttributeByFeatureRange(s.name,n.getEncodedData(),s.featureRange.startIndex,s.featureRange.endIndex),s.needRegenerateVertices=!1})}},{key:"initStyleAttribute",value:function(n,r){var a=r.styleAttributeService,i=a.getLayerStyleAttributes()||[];i.filter(function(o){return o.needRegenerateVertices}).forEach(function(o){a.updateAttributeByFeatureRange(o.name,n.getEncodedData(),o.featureRange.startIndex,o.featureRange.endIndex),o.needRegenerateVertices=!1})}}]),e}())||c8);za.bind(xe.ILayerPlugin).to(Mbe).inRequestScope();za.bind(xe.ILayerPlugin).to(i1e).inRequestScope();za.bind(xe.ILayerPlugin).to(Wxe).inRequestScope();za.bind(xe.ILayerPlugin).to(Obe).inRequestScope();za.bind(xe.ILayerPlugin).to(qxe).inRequestScope();za.bind(xe.ILayerPlugin).to(l1e).inRequestScope();za.bind(xe.ILayerPlugin).to(s1e).inRequestScope();za.bind(xe.ILayerPlugin).to(r1e).inRequestScope();za.bind(xe.ILayerPlugin).to(o1e).inRequestScope();za.bind(xe.ILayerPlugin).to(Xxe).inRequestScope();za.bind(xe.ILayerPlugin).to(n1e).inRequestScope();za.bind(xe.ILayerPlugin).to(a1e).inRequestScope();za.bind(xe.ILayerPlugin).to(Zxe).inRequestScope();var oB={exports:{}},v_={3:"abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile",5:"class enum extends super const export import",6:"enum",strict:"implements interface let package private protected public static yield",strictBind:"eval arguments"},b_="break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this",u1e={5:b_,"5module":b_+" export import",6:b_+" const class extends export import super"},c1e=/^in(stanceof)?$/,l3="\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u08A0-\u08B4\u08B6-\u08C7\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309B-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\u9FFC\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7BF\uA7C2-\uA7CA\uA7F5-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC",sB="\u200C\u200D\xB7\u0300-\u036F\u0387\u0483-\u0487\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u0669\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u06F0-\u06F9\u0711\u0730-\u074A\u07A6-\u07B0\u07C0-\u07C9\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u08D3-\u08E1\u08E3-\u0903\u093A-\u093C\u093E-\u094F\u0951-\u0957\u0962\u0963\u0966-\u096F\u0981-\u0983\u09BC\u09BE-\u09C4\u09C7\u09C8\u09CB-\u09CD\u09D7\u09E2\u09E3\u09E6-\u09EF\u09FE\u0A01-\u0A03\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A66-\u0A71\u0A75\u0A81-\u0A83\u0ABC\u0ABE-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AE2\u0AE3\u0AE6-\u0AEF\u0AFA-\u0AFF\u0B01-\u0B03\u0B3C\u0B3E-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B55-\u0B57\u0B62\u0B63\u0B66-\u0B6F\u0B82\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD7\u0BE6-\u0BEF\u0C00-\u0C04\u0C3E-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C66-\u0C6F\u0C81-\u0C83\u0CBC\u0CBE-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0CE6-\u0CEF\u0D00-\u0D03\u0D3B\u0D3C\u0D3E-\u0D44\u0D46-\u0D48\u0D4A-\u0D4D\u0D57\u0D62\u0D63\u0D66-\u0D6F\u0D81-\u0D83\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0E50-\u0E59\u0EB1\u0EB4-\u0EBC\u0EC8-\u0ECD\u0ED0-\u0ED9\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E\u0F3F\u0F71-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102B-\u103E\u1040-\u1049\u1056-\u1059\u105E-\u1060\u1062-\u1064\u1067-\u106D\u1071-\u1074\u1082-\u108D\u108F-\u109D\u135D-\u135F\u1369-\u1371\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17B4-\u17D3\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u18A9\u1920-\u192B\u1930-\u193B\u1946-\u194F\u19D0-\u19DA\u1A17-\u1A1B\u1A55-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AB0-\u1ABD\u1ABF\u1AC0\u1B00-\u1B04\u1B34-\u1B44\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1B82\u1BA1-\u1BAD\u1BB0-\u1BB9\u1BE6-\u1BF3\u1C24-\u1C37\u1C40-\u1C49\u1C50-\u1C59\u1CD0-\u1CD2\u1CD4-\u1CE8\u1CED\u1CF4\u1CF7-\u1CF9\u1DC0-\u1DF9\u1DFB-\u1DFF\u203F\u2040\u2054\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA620-\uA629\uA66F\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA823-\uA827\uA82C\uA880\uA881\uA8B4-\uA8C5\uA8D0-\uA8D9\uA8E0-\uA8F1\uA8FF-\uA909\uA926-\uA92D\uA947-\uA953\uA980-\uA983\uA9B3-\uA9C0\uA9D0-\uA9D9\uA9E5\uA9F0-\uA9F9\uAA29-\uAA36\uAA43\uAA4C\uAA4D\uAA50-\uAA59\uAA7B-\uAA7D\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEB-\uAAEF\uAAF5\uAAF6\uABE3-\uABEA\uABEC\uABED\uABF0-\uABF9\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFF10-\uFF19\uFF3F",f1e=new RegExp("["+l3+"]"),d1e=new RegExp("["+l3+sB+"]");l3=sB=null;var lB=[0,11,2,25,2,18,2,1,2,14,3,13,35,122,70,52,268,28,4,48,48,31,14,29,6,37,11,29,3,35,5,7,2,4,43,157,19,35,5,35,5,39,9,51,157,310,10,21,11,7,153,5,3,0,2,43,2,1,4,0,3,22,11,22,10,30,66,18,2,1,11,21,11,25,71,55,7,1,65,0,16,3,2,2,2,28,43,28,4,28,36,7,2,27,28,53,11,21,11,18,14,17,111,72,56,50,14,50,14,35,349,41,7,1,79,28,11,0,9,21,107,20,28,22,13,52,76,44,33,24,27,35,30,0,3,0,9,34,4,0,13,47,15,3,22,0,2,0,36,17,2,24,85,6,2,0,2,3,2,14,2,9,8,46,39,7,3,1,3,21,2,6,2,1,2,4,4,0,19,0,13,4,159,52,19,3,21,2,31,47,21,1,2,0,185,46,42,3,37,47,21,0,60,42,14,0,72,26,230,43,117,63,32,7,3,0,3,7,2,1,2,23,16,0,2,0,95,7,3,38,17,0,2,0,29,0,11,39,8,0,22,0,12,45,20,0,35,56,264,8,2,36,18,0,50,29,113,6,2,1,2,37,22,0,26,5,2,1,2,31,15,0,328,18,190,0,80,921,103,110,18,195,2749,1070,4050,582,8634,568,8,30,114,29,19,47,17,3,32,20,6,18,689,63,129,74,6,0,67,12,65,1,2,0,29,6135,9,1237,43,8,8952,286,50,2,18,3,9,395,2309,106,6,12,4,8,8,9,5991,84,2,70,2,1,3,0,3,1,3,3,2,11,2,0,2,6,2,64,2,3,3,7,2,6,2,27,2,3,2,4,2,0,4,6,2,339,3,24,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,7,2357,44,11,6,17,0,370,43,1301,196,60,67,8,0,1205,3,2,26,2,1,2,0,3,0,2,9,2,3,2,0,2,0,7,0,5,0,2,0,2,0,2,2,2,1,2,0,3,0,2,0,2,0,2,0,2,0,2,1,2,0,3,3,2,6,2,3,2,3,2,0,2,9,2,16,6,2,2,4,2,16,4421,42717,35,4148,12,221,3,5761,15,7472,3104,541,1507,4938],p1e=[509,0,227,0,150,4,294,9,1368,2,2,1,6,3,41,2,5,0,166,1,574,3,9,9,370,1,154,10,176,2,54,14,32,9,16,3,46,10,54,9,7,2,37,13,2,9,6,1,45,0,13,2,49,13,9,3,2,11,83,11,7,0,161,11,6,9,7,3,56,1,2,6,3,1,3,2,10,0,11,1,3,6,4,4,193,17,10,9,5,0,82,19,13,9,214,6,3,8,28,1,83,16,16,9,82,12,9,9,84,14,5,9,243,14,166,9,71,5,2,1,3,3,2,0,2,1,13,9,120,6,3,6,4,0,29,9,41,6,2,3,9,0,10,10,47,15,406,7,2,7,17,9,57,21,2,13,123,5,4,0,2,1,2,6,2,0,9,9,49,4,2,1,2,4,9,9,330,3,19306,9,135,4,60,6,26,9,1014,0,2,54,8,3,82,0,12,1,19628,1,5319,4,4,5,9,7,3,6,31,3,149,2,1418,49,513,54,5,49,9,0,15,0,23,4,2,14,1361,6,2,16,3,6,2,1,2,4,262,6,10,9,419,13,1495,6,110,6,6,9,4759,9,787719,239];function Tk(e,t){for(var n=65536,r=0;r<t.length;r+=2){if(n+=t[r],n>e)return!1;if(n+=t[r+1],n>=e)return!0}}function xu(e,t){return e<65?e===36:e<91?!0:e<97?e===95:e<123?!0:e<=65535?e>=170&&f1e.test(String.fromCharCode(e)):t===!1?!1:Tk(e,lB)}function Cd(e,t){return e<48?e===36:e<58?!0:e<65?!1:e<91?!0:e<97?e===95:e<123?!0:e<=65535?e>=170&&d1e.test(String.fromCharCode(e)):t===!1?!1:Tk(e,lB)||Tk(e,p1e)}var Vn=function(t,n){n===void 0&&(n={}),this.label=t,this.keyword=n.keyword,this.beforeExpr=!!n.beforeExpr,this.startsExpr=!!n.startsExpr,this.isLoop=!!n.isLoop,this.isAssign=!!n.isAssign,this.prefix=!!n.prefix,this.postfix=!!n.postfix,this.binop=n.binop||null,this.updateContext=null};function ro(e,t){return new Vn(e,{beforeExpr:!0,binop:t})}var ao={beforeExpr:!0},Ri={startsExpr:!0},u3={};function Ln(e,t){return t===void 0&&(t={}),t.keyword=e,u3[e]=new Vn(e,t)}var z={num:new Vn("num",Ri),regexp:new Vn("regexp",Ri),string:new Vn("string",Ri),name:new Vn("name",Ri),eof:new Vn("eof"),bracketL:new Vn("[",{beforeExpr:!0,startsExpr:!0}),bracketR:new Vn("]"),braceL:new Vn("{",{beforeExpr:!0,startsExpr:!0}),braceR:new Vn("}"),parenL:new Vn("(",{beforeExpr:!0,startsExpr:!0}),parenR:new Vn(")"),comma:new Vn(",",ao),semi:new Vn(";",ao),colon:new Vn(":",ao),dot:new Vn("."),question:new Vn("?",ao),questionDot:new Vn("?."),arrow:new Vn("=>",ao),template:new Vn("template"),invalidTemplate:new Vn("invalidTemplate"),ellipsis:new Vn("...",ao),backQuote:new Vn("`",Ri),dollarBraceL:new Vn("${",{beforeExpr:!0,startsExpr:!0}),eq:new Vn("=",{beforeExpr:!0,isAssign:!0}),assign:new Vn("_=",{beforeExpr:!0,isAssign:!0}),incDec:new Vn("++/--",{prefix:!0,postfix:!0,startsExpr:!0}),prefix:new Vn("!/~",{beforeExpr:!0,prefix:!0,startsExpr:!0}),logicalOR:ro("||",1),logicalAND:ro("&&",2),bitwiseOR:ro("|",3),bitwiseXOR:ro("^",4),bitwiseAND:ro("&",5),equality:ro("==/!=/===/!==",6),relational:ro("</>/<=/>=",7),bitShift:ro("<</>>/>>>",8),plusMin:new Vn("+/-",{beforeExpr:!0,binop:9,prefix:!0,startsExpr:!0}),modulo:ro("%",10),star:ro("*",10),slash:ro("/",10),starstar:new Vn("**",{beforeExpr:!0}),coalesce:ro("??",1),_break:Ln("break"),_case:Ln("case",ao),_catch:Ln("catch"),_continue:Ln("continue"),_debugger:Ln("debugger"),_default:Ln("default",ao),_do:Ln("do",{isLoop:!0,beforeExpr:!0}),_else:Ln("else",ao),_finally:Ln("finally"),_for:Ln("for",{isLoop:!0}),_function:Ln("function",Ri),_if:Ln("if"),_return:Ln("return",ao),_switch:Ln("switch"),_throw:Ln("throw",ao),_try:Ln("try"),_var:Ln("var"),_const:Ln("const"),_while:Ln("while",{isLoop:!0}),_with:Ln("with"),_new:Ln("new",{beforeExpr:!0,startsExpr:!0}),_this:Ln("this",Ri),_super:Ln("super",Ri),_class:Ln("class",Ri),_extends:Ln("extends",ao),_export:Ln("export"),_import:Ln("import",Ri),_null:Ln("null",Ri),_true:Ln("true",Ri),_false:Ln("false",Ri),_in:Ln("in",{beforeExpr:!0,binop:7}),_instanceof:Ln("instanceof",{beforeExpr:!0,binop:7}),_typeof:Ln("typeof",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_void:Ln("void",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_delete:Ln("delete",{beforeExpr:!0,prefix:!0,startsExpr:!0})},Co=/\r\n?|\n|\u2028|\u2029/,xm=new RegExp(Co.source,"g");function Ym(e,t){return e===10||e===13||!t&&(e===8232||e===8233)}var uB=/[\u1680\u2000-\u200a\u202f\u205f\u3000\ufeff]/,mo=/(?:\s|\/\/.*|\/\*[^]*?\*\/)*/g,cB=Object.prototype,h1e=cB.hasOwnProperty,m1e=cB.toString;function gy(e,t){return h1e.call(e,t)}var f8=Array.isArray||function(e){return m1e.call(e)==="[object Array]"};function oc(e){return new RegExp("^(?:"+e.replace(/ /g,"|")+")$")}var _m=function(t,n){this.line=t,this.column=n};_m.prototype.offset=function(t){return new _m(this.line,this.column+t)};var vy=function(t,n,r){this.start=n,this.end=r,t.sourceFile!==null&&(this.source=t.sourceFile)};function fB(e,t){for(var n=1,r=0;;){xm.lastIndex=r;var a=xm.exec(e);if(a&&a.index<t)++n,r=a.index+a[0].length;else return new _m(n,t-r)}}var Ak={ecmaVersion:10,sourceType:"script",onInsertedSemicolon:null,onTrailingComma:null,allowReserved:null,allowReturnOutsideFunction:!1,allowImportExportEverywhere:!1,allowAwaitOutsideFunction:!1,allowHashBang:!1,locations:!1,onToken:null,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null,preserveParens:!1};function g1e(e){var t={};for(var n in Ak)t[n]=e&&gy(e,n)?e[n]:Ak[n];if(t.ecmaVersion>=2015&&(t.ecmaVersion-=2009),t.allowReserved==null&&(t.allowReserved=t.ecmaVersion<5),f8(t.onToken)){var r=t.onToken;t.onToken=function(a){return r.push(a)}}return f8(t.onComment)&&(t.onComment=v1e(t,t.onComment)),t}function v1e(e,t){return function(n,r,a,i,o,s){var l={type:n?"Block":"Line",value:r,start:a,end:i};e.locations&&(l.loc=new vy(this,o,s)),e.ranges&&(l.range=[a,i]),t.push(l)}}var wm=1,Xm=2,c3=wm|Xm,dB=4,pB=8,hB=16,mB=32,gB=64,vB=128;function f3(e,t){return Xm|(e?dB:0)|(t?pB:0)}var d8=0,d3=1,sl=2,bB=3,yB=4,xB=5,ra=function(t,n,r){this.options=t=g1e(t),this.sourceFile=t.sourceFile,this.keywords=oc(u1e[t.ecmaVersion>=6?6:t.sourceType==="module"?"5module":5]);var a="";if(t.allowReserved!==!0){for(var i=t.ecmaVersion;!(a=v_[i]);i--);t.sourceType==="module"&&(a+=" await")}this.reservedWords=oc(a);var o=(a?a+" ":"")+v_.strict;this.reservedWordsStrict=oc(o),this.reservedWordsStrictBind=oc(o+" "+v_.strictBind),this.input=String(n),this.containsEsc=!1,r?(this.pos=r,this.lineStart=this.input.lastIndexOf(`
`,r-1)+1,this.curLine=this.input.slice(0,this.lineStart).split(Co).length):(this.pos=this.lineStart=0,this.curLine=1),this.type=z.eof,this.value=null,this.start=this.end=this.pos,this.startLoc=this.endLoc=this.curPosition(),this.lastTokEndLoc=this.lastTokStartLoc=null,this.lastTokStart=this.lastTokEnd=this.pos,this.context=this.initialContext(),this.exprAllowed=!0,this.inModule=t.sourceType==="module",this.strict=this.inModule||this.strictDirective(this.pos),this.potentialArrowAt=-1,this.yieldPos=this.awaitPos=this.awaitIdentPos=0,this.labels=[],this.undefinedExports={},this.pos===0&&t.allowHashBang&&this.input.slice(0,2)==="#!"&&this.skipLineComment(2),this.scopeStack=[],this.enterScope(wm),this.regexpState=null},Ic={inFunction:{configurable:!0},inGenerator:{configurable:!0},inAsync:{configurable:!0},allowSuper:{configurable:!0},allowDirectSuper:{configurable:!0},treatFunctionsAsVar:{configurable:!0}};ra.prototype.parse=function(){var t=this.options.program||this.startNode();return this.nextToken(),this.parseTopLevel(t)};Ic.inFunction.get=function(){return(this.currentVarScope().flags&Xm)>0};Ic.inGenerator.get=function(){return(this.currentVarScope().flags&pB)>0};Ic.inAsync.get=function(){return(this.currentVarScope().flags&dB)>0};Ic.allowSuper.get=function(){return(this.currentThisScope().flags&gB)>0};Ic.allowDirectSuper.get=function(){return(this.currentThisScope().flags&vB)>0};Ic.treatFunctionsAsVar.get=function(){return this.treatFunctionsAsVarInScope(this.currentScope())};ra.prototype.inNonArrowFunction=function(){return(this.currentThisScope().flags&Xm)>0};ra.extend=function(){for(var t=[],n=arguments.length;n--;)t[n]=arguments[n];for(var r=this,a=0;a<t.length;a++)r=t[a](r);return r};ra.parse=function(t,n){return new this(n,t).parse()};ra.parseExpressionAt=function(t,n,r){var a=new this(r,t,n);return a.nextToken(),a.parseExpression()};ra.tokenizer=function(t,n){return new this(n,t)};Object.defineProperties(ra.prototype,Ic);var hi=ra.prototype,b1e=/^(?:'((?:\\.|[^'\\])*?)'|"((?:\\.|[^"\\])*?)")/;hi.strictDirective=function(e){for(;;){mo.lastIndex=e,e+=mo.exec(this.input)[0].length;var t=b1e.exec(this.input.slice(e));if(!t)return!1;if((t[1]||t[2])==="use strict"){mo.lastIndex=e+t[0].length;var n=mo.exec(this.input),r=n.index+n[0].length,a=this.input.charAt(r);return a===";"||a==="}"||Co.test(n[0])&&!(/[(`.[+\-/*%<>=,?^&]/.test(a)||a==="!"&&this.input.charAt(r+1)==="=")}e+=t[0].length,mo.lastIndex=e,e+=mo.exec(this.input)[0].length,this.input[e]===";"&&e++}};hi.eat=function(e){return this.type===e?(this.next(),!0):!1};hi.isContextual=function(e){return this.type===z.name&&this.value===e&&!this.containsEsc};hi.eatContextual=function(e){return this.isContextual(e)?(this.next(),!0):!1};hi.expectContextual=function(e){this.eatContextual(e)||this.unexpected()};hi.canInsertSemicolon=function(){return this.type===z.eof||this.type===z.braceR||Co.test(this.input.slice(this.lastTokEnd,this.start))};hi.insertSemicolon=function(){if(this.canInsertSemicolon())return this.options.onInsertedSemicolon&&this.options.onInsertedSemicolon(this.lastTokEnd,this.lastTokEndLoc),!0};hi.semicolon=function(){!this.eat(z.semi)&&!this.insertSemicolon()&&this.unexpected()};hi.afterTrailingComma=function(e,t){if(this.type===e)return this.options.onTrailingComma&&this.options.onTrailingComma(this.lastTokStart,this.lastTokStartLoc),t||this.next(),!0};hi.expect=function(e){this.eat(e)||this.unexpected()};hi.unexpected=function(e){this.raise(e!=null?e:this.start,"Unexpected token")};function by(){this.shorthandAssign=this.trailingComma=this.parenthesizedAssign=this.parenthesizedBind=this.doubleProto=-1}hi.checkPatternErrors=function(e,t){if(!!e){e.trailingComma>-1&&this.raiseRecoverable(e.trailingComma,"Comma is not permitted after the rest element");var n=t?e.parenthesizedAssign:e.parenthesizedBind;n>-1&&this.raiseRecoverable(n,"Parenthesized pattern")}};hi.checkExpressionErrors=function(e,t){if(!e)return!1;var n=e.shorthandAssign,r=e.doubleProto;if(!t)return n>=0||r>=0;n>=0&&this.raise(n,"Shorthand property assignments are valid only in destructuring patterns"),r>=0&&this.raiseRecoverable(r,"Redefinition of __proto__ property")};hi.checkYieldAwaitInDefaultParams=function(){this.yieldPos&&(!this.awaitPos||this.yieldPos<this.awaitPos)&&this.raise(this.yieldPos,"Yield expression cannot be a default value"),this.awaitPos&&this.raise(this.awaitPos,"Await expression cannot be a default value")};hi.isSimpleAssignTarget=function(e){return e.type==="ParenthesizedExpression"?this.isSimpleAssignTarget(e.expression):e.type==="Identifier"||e.type==="MemberExpression"};var _n=ra.prototype;_n.parseTopLevel=function(e){var t={};for(e.body||(e.body=[]);this.type!==z.eof;){var n=this.parseStatement(null,!0,t);e.body.push(n)}if(this.inModule)for(var r=0,a=Object.keys(this.undefinedExports);r<a.length;r+=1){var i=a[r];this.raiseRecoverable(this.undefinedExports[i].start,"Export '"+i+"' is not defined")}return this.adaptDirectivePrologue(e.body),this.next(),e.sourceType=this.options.sourceType,this.finishNode(e,"Program")};var p3={kind:"loop"},y1e={kind:"switch"};_n.isLet=function(e){if(this.options.ecmaVersion<6||!this.isContextual("let"))return!1;mo.lastIndex=this.pos;var t=mo.exec(this.input),n=this.pos+t[0].length,r=this.input.charCodeAt(n);if(r===91)return!0;if(e)return!1;if(r===123)return!0;if(xu(r,!0)){for(var a=n+1;Cd(this.input.charCodeAt(a),!0);)++a;var i=this.input.slice(n,a);if(!c1e.test(i))return!0}return!1};_n.isAsyncFunction=function(){if(this.options.ecmaVersion<8||!this.isContextual("async"))return!1;mo.lastIndex=this.pos;var e=mo.exec(this.input),t=this.pos+e[0].length;return!Co.test(this.input.slice(this.pos,t))&&this.input.slice(t,t+8)==="function"&&(t+8===this.input.length||!Cd(this.input.charAt(t+8)))};_n.parseStatement=function(e,t,n){var r=this.type,a=this.startNode(),i;switch(this.isLet(e)&&(r=z._var,i="let"),r){case z._break:case z._continue:return this.parseBreakContinueStatement(a,r.keyword);case z._debugger:return this.parseDebuggerStatement(a);case z._do:return this.parseDoStatement(a);case z._for:return this.parseForStatement(a);case z._function:return e&&(this.strict||e!=="if"&&e!=="label")&&this.options.ecmaVersion>=6&&this.unexpected(),this.parseFunctionStatement(a,!1,!e);case z._class:return e&&this.unexpected(),this.parseClass(a,!0);case z._if:return this.parseIfStatement(a);case z._return:return this.parseReturnStatement(a);case z._switch:return this.parseSwitchStatement(a);case z._throw:return this.parseThrowStatement(a);case z._try:return this.parseTryStatement(a);case z._const:case z._var:return i=i||this.value,e&&i!=="var"&&this.unexpected(),this.parseVarStatement(a,i);case z._while:return this.parseWhileStatement(a);case z._with:return this.parseWithStatement(a);case z.braceL:return this.parseBlock(!0,a);case z.semi:return this.parseEmptyStatement(a);case z._export:case z._import:if(this.options.ecmaVersion>10&&r===z._import){mo.lastIndex=this.pos;var o=mo.exec(this.input),s=this.pos+o[0].length,l=this.input.charCodeAt(s);if(l===40||l===46)return this.parseExpressionStatement(a,this.parseExpression())}return this.options.allowImportExportEverywhere||(t||this.raise(this.start,"'import' and 'export' may only appear at the top level"),this.inModule||this.raise(this.start,"'import' and 'export' may appear only with 'sourceType: module'")),r===z._import?this.parseImport(a):this.parseExport(a,n);default:if(this.isAsyncFunction())return e&&this.unexpected(),this.next(),this.parseFunctionStatement(a,!0,!e);var u=this.value,c=this.parseExpression();return r===z.name&&c.type==="Identifier"&&this.eat(z.colon)?this.parseLabeledStatement(a,u,c,e):this.parseExpressionStatement(a,c)}};_n.parseBreakContinueStatement=function(e,t){var n=t==="break";this.next(),this.eat(z.semi)||this.insertSemicolon()?e.label=null:this.type!==z.name?this.unexpected():(e.label=this.parseIdent(),this.semicolon());for(var r=0;r<this.labels.length;++r){var a=this.labels[r];if((e.label==null||a.name===e.label.name)&&(a.kind!=null&&(n||a.kind==="loop")||e.label&&n))break}return r===this.labels.length&&this.raise(e.start,"Unsyntactic "+t),this.finishNode(e,n?"BreakStatement":"ContinueStatement")};_n.parseDebuggerStatement=function(e){return this.next(),this.semicolon(),this.finishNode(e,"DebuggerStatement")};_n.parseDoStatement=function(e){return this.next(),this.labels.push(p3),e.body=this.parseStatement("do"),this.labels.pop(),this.expect(z._while),e.test=this.parseParenExpression(),this.options.ecmaVersion>=6?this.eat(z.semi):this.semicolon(),this.finishNode(e,"DoWhileStatement")};_n.parseForStatement=function(e){this.next();var t=this.options.ecmaVersion>=9&&(this.inAsync||!this.inFunction&&this.options.allowAwaitOutsideFunction)&&this.eatContextual("await")?this.lastTokStart:-1;if(this.labels.push(p3),this.enterScope(0),this.expect(z.parenL),this.type===z.semi)return t>-1&&this.unexpected(t),this.parseFor(e,null);var n=this.isLet();if(this.type===z._var||this.type===z._const||n){var r=this.startNode(),a=n?"let":this.value;return this.next(),this.parseVar(r,!0,a),this.finishNode(r,"VariableDeclaration"),(this.type===z._in||this.options.ecmaVersion>=6&&this.isContextual("of"))&&r.declarations.length===1?(this.options.ecmaVersion>=9&&(this.type===z._in?t>-1&&this.unexpected(t):e.await=t>-1),this.parseForIn(e,r)):(t>-1&&this.unexpected(t),this.parseFor(e,r))}var i=new by,o=this.parseExpression(!0,i);return this.type===z._in||this.options.ecmaVersion>=6&&this.isContextual("of")?(this.options.ecmaVersion>=9&&(this.type===z._in?t>-1&&this.unexpected(t):e.await=t>-1),this.toAssignable(o,!1,i),this.checkLVal(o),this.parseForIn(e,o)):(this.checkExpressionErrors(i,!0),t>-1&&this.unexpected(t),this.parseFor(e,o))};_n.parseFunctionStatement=function(e,t,n){return this.next(),this.parseFunction(e,Ph|(n?0:Ok),!1,t)};_n.parseIfStatement=function(e){return this.next(),e.test=this.parseParenExpression(),e.consequent=this.parseStatement("if"),e.alternate=this.eat(z._else)?this.parseStatement("if"):null,this.finishNode(e,"IfStatement")};_n.parseReturnStatement=function(e){return!this.inFunction&&!this.options.allowReturnOutsideFunction&&this.raise(this.start,"'return' outside of function"),this.next(),this.eat(z.semi)||this.insertSemicolon()?e.argument=null:(e.argument=this.parseExpression(),this.semicolon()),this.finishNode(e,"ReturnStatement")};_n.parseSwitchStatement=function(e){this.next(),e.discriminant=this.parseParenExpression(),e.cases=[],this.expect(z.braceL),this.labels.push(y1e),this.enterScope(0);for(var t,n=!1;this.type!==z.braceR;)if(this.type===z._case||this.type===z._default){var r=this.type===z._case;t&&this.finishNode(t,"SwitchCase"),e.cases.push(t=this.startNode()),t.consequent=[],this.next(),r?t.test=this.parseExpression():(n&&this.raiseRecoverable(this.lastTokStart,"Multiple default clauses"),n=!0,t.test=null),this.expect(z.colon)}else t||this.unexpected(),t.consequent.push(this.parseStatement(null));return this.exitScope(),t&&this.finishNode(t,"SwitchCase"),this.next(),this.labels.pop(),this.finishNode(e,"SwitchStatement")};_n.parseThrowStatement=function(e){return this.next(),Co.test(this.input.slice(this.lastTokEnd,this.start))&&this.raise(this.lastTokEnd,"Illegal newline after throw"),e.argument=this.parseExpression(),this.semicolon(),this.finishNode(e,"ThrowStatement")};var x1e=[];_n.parseTryStatement=function(e){if(this.next(),e.block=this.parseBlock(),e.handler=null,this.type===z._catch){var t=this.startNode();if(this.next(),this.eat(z.parenL)){t.param=this.parseBindingAtom();var n=t.param.type==="Identifier";this.enterScope(n?mB:0),this.checkLVal(t.param,n?yB:sl),this.expect(z.parenR)}else this.options.ecmaVersion<10&&this.unexpected(),t.param=null,this.enterScope(0);t.body=this.parseBlock(!1),this.exitScope(),e.handler=this.finishNode(t,"CatchClause")}return e.finalizer=this.eat(z._finally)?this.parseBlock():null,!e.handler&&!e.finalizer&&this.raise(e.start,"Missing catch or finally clause"),this.finishNode(e,"TryStatement")};_n.parseVarStatement=function(e,t){return this.next(),this.parseVar(e,!1,t),this.semicolon(),this.finishNode(e,"VariableDeclaration")};_n.parseWhileStatement=function(e){return this.next(),e.test=this.parseParenExpression(),this.labels.push(p3),e.body=this.parseStatement("while"),this.labels.pop(),this.finishNode(e,"WhileStatement")};_n.parseWithStatement=function(e){return this.strict&&this.raise(this.start,"'with' in strict mode"),this.next(),e.object=this.parseParenExpression(),e.body=this.parseStatement("with"),this.finishNode(e,"WithStatement")};_n.parseEmptyStatement=function(e){return this.next(),this.finishNode(e,"EmptyStatement")};_n.parseLabeledStatement=function(e,t,n,r){for(var a=0,i=this.labels;a<i.length;a+=1){var o=i[a];o.name===t&&this.raise(n.start,"Label '"+t+"' is already declared")}for(var s=this.type.isLoop?"loop":this.type===z._switch?"switch":null,l=this.labels.length-1;l>=0;l--){var u=this.labels[l];if(u.statementStart===e.start)u.statementStart=this.start,u.kind=s;else break}return this.labels.push({name:t,kind:s,statementStart:this.start}),e.body=this.parseStatement(r?r.indexOf("label")===-1?r+"label":r:"label"),this.labels.pop(),e.label=n,this.finishNode(e,"LabeledStatement")};_n.parseExpressionStatement=function(e,t){return e.expression=t,this.semicolon(),this.finishNode(e,"ExpressionStatement")};_n.parseBlock=function(e,t,n){for(e===void 0&&(e=!0),t===void 0&&(t=this.startNode()),t.body=[],this.expect(z.braceL),e&&this.enterScope(0);this.type!==z.braceR;){var r=this.parseStatement(null);t.body.push(r)}return n&&(this.strict=!1),this.next(),e&&this.exitScope(),this.finishNode(t,"BlockStatement")};_n.parseFor=function(e,t){return e.init=t,this.expect(z.semi),e.test=this.type===z.semi?null:this.parseExpression(),this.expect(z.semi),e.update=this.type===z.parenR?null:this.parseExpression(),this.expect(z.parenR),e.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(e,"ForStatement")};_n.parseForIn=function(e,t){var n=this.type===z._in;return this.next(),t.type==="VariableDeclaration"&&t.declarations[0].init!=null&&(!n||this.options.ecmaVersion<8||this.strict||t.kind!=="var"||t.declarations[0].id.type!=="Identifier")?this.raise(t.start,(n?"for-in":"for-of")+" loop variable declaration may not have an initializer"):t.type==="AssignmentPattern"&&this.raise(t.start,"Invalid left-hand side in for-loop"),e.left=t,e.right=n?this.parseExpression():this.parseMaybeAssign(),this.expect(z.parenR),e.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(e,n?"ForInStatement":"ForOfStatement")};_n.parseVar=function(e,t,n){for(e.declarations=[],e.kind=n;;){var r=this.startNode();if(this.parseVarId(r,n),this.eat(z.eq)?r.init=this.parseMaybeAssign(t):n==="const"&&!(this.type===z._in||this.options.ecmaVersion>=6&&this.isContextual("of"))?this.unexpected():r.id.type!=="Identifier"&&!(t&&(this.type===z._in||this.isContextual("of")))?this.raise(this.lastTokEnd,"Complex binding patterns require an initialization value"):r.init=null,e.declarations.push(this.finishNode(r,"VariableDeclarator")),!this.eat(z.comma))break}return e};_n.parseVarId=function(e,t){e.id=this.parseBindingAtom(),this.checkLVal(e.id,t==="var"?d3:sl,!1)};var Ph=1,Ok=2,_B=4;_n.parseFunction=function(e,t,n,r){this.initFunction(e),(this.options.ecmaVersion>=9||this.options.ecmaVersion>=6&&!r)&&(this.type===z.star&&t&Ok&&this.unexpected(),e.generator=this.eat(z.star)),this.options.ecmaVersion>=8&&(e.async=!!r),t&Ph&&(e.id=t&_B&&this.type!==z.name?null:this.parseIdent(),e.id&&!(t&Ok)&&this.checkLVal(e.id,this.strict||e.generator||e.async?this.treatFunctionsAsVar?d3:sl:bB));var a=this.yieldPos,i=this.awaitPos,o=this.awaitIdentPos;return this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(f3(e.async,e.generator)),t&Ph||(e.id=this.type===z.name?this.parseIdent():null),this.parseFunctionParams(e),this.parseFunctionBody(e,n,!1),this.yieldPos=a,this.awaitPos=i,this.awaitIdentPos=o,this.finishNode(e,t&Ph?"FunctionDeclaration":"FunctionExpression")};_n.parseFunctionParams=function(e){this.expect(z.parenL),e.params=this.parseBindingList(z.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams()};_n.parseClass=function(e,t){this.next();var n=this.strict;this.strict=!0,this.parseClassId(e,t),this.parseClassSuper(e);var r=this.startNode(),a=!1;for(r.body=[],this.expect(z.braceL);this.type!==z.braceR;){var i=this.parseClassElement(e.superClass!==null);i&&(r.body.push(i),i.type==="MethodDefinition"&&i.kind==="constructor"&&(a&&this.raise(i.start,"Duplicate constructor in the same class"),a=!0))}return this.strict=n,this.next(),e.body=this.finishNode(r,"ClassBody"),this.finishNode(e,t?"ClassDeclaration":"ClassExpression")};_n.parseClassElement=function(e){var t=this;if(this.eat(z.semi))return null;var n=this.startNode(),r=function(l,u){u===void 0&&(u=!1);var c=t.start,f=t.startLoc;return t.eatContextual(l)?t.type!==z.parenL&&(!u||!t.canInsertSemicolon())?!0:(n.key&&t.unexpected(),n.computed=!1,n.key=t.startNodeAt(c,f),n.key.name=l,t.finishNode(n.key,"Identifier"),!1):!1};n.kind="method",n.static=r("static");var a=this.eat(z.star),i=!1;a||(this.options.ecmaVersion>=8&&r("async",!0)?(i=!0,a=this.options.ecmaVersion>=9&&this.eat(z.star)):r("get")?n.kind="get":r("set")&&(n.kind="set")),n.key||this.parsePropertyName(n);var o=n.key,s=!1;return!n.computed&&!n.static&&(o.type==="Identifier"&&o.name==="constructor"||o.type==="Literal"&&o.value==="constructor")?(n.kind!=="method"&&this.raise(o.start,"Constructor can't have get/set modifier"),a&&this.raise(o.start,"Constructor can't be a generator"),i&&this.raise(o.start,"Constructor can't be an async method"),n.kind="constructor",s=e):n.static&&o.type==="Identifier"&&o.name==="prototype"&&this.raise(o.start,"Classes may not have a static property named prototype"),this.parseClassMethod(n,a,i,s),n.kind==="get"&&n.value.params.length!==0&&this.raiseRecoverable(n.value.start,"getter should have no params"),n.kind==="set"&&n.value.params.length!==1&&this.raiseRecoverable(n.value.start,"setter should have exactly one param"),n.kind==="set"&&n.value.params[0].type==="RestElement"&&this.raiseRecoverable(n.value.params[0].start,"Setter cannot use rest params"),n};_n.parseClassMethod=function(e,t,n,r){return e.value=this.parseMethod(t,n,r),this.finishNode(e,"MethodDefinition")};_n.parseClassId=function(e,t){this.type===z.name?(e.id=this.parseIdent(),t&&this.checkLVal(e.id,sl,!1)):(t===!0&&this.unexpected(),e.id=null)};_n.parseClassSuper=function(e){e.superClass=this.eat(z._extends)?this.parseExprSubscripts():null};_n.parseExport=function(e,t){if(this.next(),this.eat(z.star))return this.options.ecmaVersion>=11&&(this.eatContextual("as")?(e.exported=this.parseIdent(!0),this.checkExport(t,e.exported.name,this.lastTokStart)):e.exported=null),this.expectContextual("from"),this.type!==z.string&&this.unexpected(),e.source=this.parseExprAtom(),this.semicolon(),this.finishNode(e,"ExportAllDeclaration");if(this.eat(z._default)){this.checkExport(t,"default",this.lastTokStart);var n;if(this.type===z._function||(n=this.isAsyncFunction())){var r=this.startNode();this.next(),n&&this.next(),e.declaration=this.parseFunction(r,Ph|_B,!1,n)}else if(this.type===z._class){var a=this.startNode();e.declaration=this.parseClass(a,"nullableID")}else e.declaration=this.parseMaybeAssign(),this.semicolon();return this.finishNode(e,"ExportDefaultDeclaration")}if(this.shouldParseExportStatement())e.declaration=this.parseStatement(null),e.declaration.type==="VariableDeclaration"?this.checkVariableExport(t,e.declaration.declarations):this.checkExport(t,e.declaration.id.name,e.declaration.id.start),e.specifiers=[],e.source=null;else{if(e.declaration=null,e.specifiers=this.parseExportSpecifiers(t),this.eatContextual("from"))this.type!==z.string&&this.unexpected(),e.source=this.parseExprAtom();else{for(var i=0,o=e.specifiers;i<o.length;i+=1){var s=o[i];this.checkUnreserved(s.local),this.checkLocalExport(s.local)}e.source=null}this.semicolon()}return this.finishNode(e,"ExportNamedDeclaration")};_n.checkExport=function(e,t,n){!e||(gy(e,t)&&this.raiseRecoverable(n,"Duplicate export '"+t+"'"),e[t]=!0)};_n.checkPatternExport=function(e,t){var n=t.type;if(n==="Identifier")this.checkExport(e,t.name,t.start);else if(n==="ObjectPattern")for(var r=0,a=t.properties;r<a.length;r+=1){var i=a[r];this.checkPatternExport(e,i)}else if(n==="ArrayPattern")for(var o=0,s=t.elements;o<s.length;o+=1){var l=s[o];l&&this.checkPatternExport(e,l)}else n==="Property"?this.checkPatternExport(e,t.value):n==="AssignmentPattern"?this.checkPatternExport(e,t.left):n==="RestElement"?this.checkPatternExport(e,t.argument):n==="ParenthesizedExpression"&&this.checkPatternExport(e,t.expression)};_n.checkVariableExport=function(e,t){if(!!e)for(var n=0,r=t;n<r.length;n+=1){var a=r[n];this.checkPatternExport(e,a.id)}};_n.shouldParseExportStatement=function(){return this.type.keyword==="var"||this.type.keyword==="const"||this.type.keyword==="class"||this.type.keyword==="function"||this.isLet()||this.isAsyncFunction()};_n.parseExportSpecifiers=function(e){var t=[],n=!0;for(this.expect(z.braceL);!this.eat(z.braceR);){if(n)n=!1;else if(this.expect(z.comma),this.afterTrailingComma(z.braceR))break;var r=this.startNode();r.local=this.parseIdent(!0),r.exported=this.eatContextual("as")?this.parseIdent(!0):r.local,this.checkExport(e,r.exported.name,r.exported.start),t.push(this.finishNode(r,"ExportSpecifier"))}return t};_n.parseImport=function(e){return this.next(),this.type===z.string?(e.specifiers=x1e,e.source=this.parseExprAtom()):(e.specifiers=this.parseImportSpecifiers(),this.expectContextual("from"),e.source=this.type===z.string?this.parseExprAtom():this.unexpected()),this.semicolon(),this.finishNode(e,"ImportDeclaration")};_n.parseImportSpecifiers=function(){var e=[],t=!0;if(this.type===z.name){var n=this.startNode();if(n.local=this.parseIdent(),this.checkLVal(n.local,sl),e.push(this.finishNode(n,"ImportDefaultSpecifier")),!this.eat(z.comma))return e}if(this.type===z.star){var r=this.startNode();return this.next(),this.expectContextual("as"),r.local=this.parseIdent(),this.checkLVal(r.local,sl),e.push(this.finishNode(r,"ImportNamespaceSpecifier")),e}for(this.expect(z.braceL);!this.eat(z.braceR);){if(t)t=!1;else if(this.expect(z.comma),this.afterTrailingComma(z.braceR))break;var a=this.startNode();a.imported=this.parseIdent(!0),this.eatContextual("as")?a.local=this.parseIdent():(this.checkUnreserved(a.imported),a.local=a.imported),this.checkLVal(a.local,sl),e.push(this.finishNode(a,"ImportSpecifier"))}return e};_n.adaptDirectivePrologue=function(e){for(var t=0;t<e.length&&this.isDirectiveCandidate(e[t]);++t)e[t].directive=e[t].expression.raw.slice(1,-1)};_n.isDirectiveCandidate=function(e){return e.type==="ExpressionStatement"&&e.expression.type==="Literal"&&typeof e.expression.value=="string"&&(this.input[e.start]==='"'||this.input[e.start]==="'")};var vl=ra.prototype;vl.toAssignable=function(e,t,n){if(this.options.ecmaVersion>=6&&e)switch(e.type){case"Identifier":this.inAsync&&e.name==="await"&&this.raise(e.start,"Cannot use 'await' as identifier inside an async function");break;case"ObjectPattern":case"ArrayPattern":case"RestElement":break;case"ObjectExpression":e.type="ObjectPattern",n&&this.checkPatternErrors(n,!0);for(var r=0,a=e.properties;r<a.length;r+=1){var i=a[r];this.toAssignable(i,t),i.type==="RestElement"&&(i.argument.type==="ArrayPattern"||i.argument.type==="ObjectPattern")&&this.raise(i.argument.start,"Unexpected token")}break;case"Property":e.kind!=="init"&&this.raise(e.key.start,"Object pattern can't contain getter or setter"),this.toAssignable(e.value,t);break;case"ArrayExpression":e.type="ArrayPattern",n&&this.checkPatternErrors(n,!0),this.toAssignableList(e.elements,t);break;case"SpreadElement":e.type="RestElement",this.toAssignable(e.argument,t),e.argument.type==="AssignmentPattern"&&this.raise(e.argument.start,"Rest elements cannot have a default value");break;case"AssignmentExpression":e.operator!=="="&&this.raise(e.left.end,"Only '=' operator can be used for specifying default value."),e.type="AssignmentPattern",delete e.operator,this.toAssignable(e.left,t);case"AssignmentPattern":break;case"ParenthesizedExpression":this.toAssignable(e.expression,t,n);break;case"ChainExpression":this.raiseRecoverable(e.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":if(!t)break;default:this.raise(e.start,"Assigning to rvalue")}else n&&this.checkPatternErrors(n,!0);return e};vl.toAssignableList=function(e,t){for(var n=e.length,r=0;r<n;r++){var a=e[r];a&&this.toAssignable(a,t)}if(n){var i=e[n-1];this.options.ecmaVersion===6&&t&&i&&i.type==="RestElement"&&i.argument.type!=="Identifier"&&this.unexpected(i.argument.start)}return e};vl.parseSpread=function(e){var t=this.startNode();return this.next(),t.argument=this.parseMaybeAssign(!1,e),this.finishNode(t,"SpreadElement")};vl.parseRestBinding=function(){var e=this.startNode();return this.next(),this.options.ecmaVersion===6&&this.type!==z.name&&this.unexpected(),e.argument=this.parseBindingAtom(),this.finishNode(e,"RestElement")};vl.parseBindingAtom=function(){if(this.options.ecmaVersion>=6)switch(this.type){case z.bracketL:var e=this.startNode();return this.next(),e.elements=this.parseBindingList(z.bracketR,!0,!0),this.finishNode(e,"ArrayPattern");case z.braceL:return this.parseObj(!0)}return this.parseIdent()};vl.parseBindingList=function(e,t,n){for(var r=[],a=!0;!this.eat(e);)if(a?a=!1:this.expect(z.comma),t&&this.type===z.comma)r.push(null);else{if(n&&this.afterTrailingComma(e))break;if(this.type===z.ellipsis){var i=this.parseRestBinding();this.parseBindingListItem(i),r.push(i),this.type===z.comma&&this.raise(this.start,"Comma is not permitted after the rest element"),this.expect(e);break}else{var o=this.parseMaybeDefault(this.start,this.startLoc);this.parseBindingListItem(o),r.push(o)}}return r};vl.parseBindingListItem=function(e){return e};vl.parseMaybeDefault=function(e,t,n){if(n=n||this.parseBindingAtom(),this.options.ecmaVersion<6||!this.eat(z.eq))return n;var r=this.startNodeAt(e,t);return r.left=n,r.right=this.parseMaybeAssign(),this.finishNode(r,"AssignmentPattern")};vl.checkLVal=function(e,t,n){switch(t===void 0&&(t=d8),e.type){case"Identifier":t===sl&&e.name==="let"&&this.raiseRecoverable(e.start,"let is disallowed as a lexically bound name"),this.strict&&this.reservedWordsStrictBind.test(e.name)&&this.raiseRecoverable(e.start,(t?"Binding ":"Assigning to ")+e.name+" in strict mode"),n&&(gy(n,e.name)&&this.raiseRecoverable(e.start,"Argument name clash"),n[e.name]=!0),t!==d8&&t!==xB&&this.declareName(e.name,t,e.start);break;case"ChainExpression":this.raiseRecoverable(e.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":t&&this.raiseRecoverable(e.start,"Binding member expression");break;case"ObjectPattern":for(var r=0,a=e.properties;r<a.length;r+=1){var i=a[r];this.checkLVal(i,t,n)}break;case"Property":this.checkLVal(e.value,t,n);break;case"ArrayPattern":for(var o=0,s=e.elements;o<s.length;o+=1){var l=s[o];l&&this.checkLVal(l,t,n)}break;case"AssignmentPattern":this.checkLVal(e.left,t,n);break;case"RestElement":this.checkLVal(e.argument,t,n);break;case"ParenthesizedExpression":this.checkLVal(e.expression,t,n);break;default:this.raise(e.start,(t?"Binding":"Assigning to")+" rvalue")}};var Cn=ra.prototype;Cn.checkPropClash=function(e,t,n){if(!(this.options.ecmaVersion>=9&&e.type==="SpreadElement")&&!(this.options.ecmaVersion>=6&&(e.computed||e.method||e.shorthand))){var r=e.key,a;switch(r.type){case"Identifier":a=r.name;break;case"Literal":a=String(r.value);break;default:return}var i=e.kind;if(this.options.ecmaVersion>=6){a==="__proto__"&&i==="init"&&(t.proto&&(n?n.doubleProto<0&&(n.doubleProto=r.start):this.raiseRecoverable(r.start,"Redefinition of __proto__ property")),t.proto=!0);return}a="$"+a;var o=t[a];if(o){var s;i==="init"?s=this.strict&&o.init||o.get||o.set:s=o.init||o[i],s&&this.raiseRecoverable(r.start,"Redefinition of property")}else o=t[a]={init:!1,get:!1,set:!1};o[i]=!0}};Cn.parseExpression=function(e,t){var n=this.start,r=this.startLoc,a=this.parseMaybeAssign(e,t);if(this.type===z.comma){var i=this.startNodeAt(n,r);for(i.expressions=[a];this.eat(z.comma);)i.expressions.push(this.parseMaybeAssign(e,t));return this.finishNode(i,"SequenceExpression")}return a};Cn.parseMaybeAssign=function(e,t,n){if(this.isContextual("yield")){if(this.inGenerator)return this.parseYield(e);this.exprAllowed=!1}var r=!1,a=-1,i=-1;t?(a=t.parenthesizedAssign,i=t.trailingComma,t.parenthesizedAssign=t.trailingComma=-1):(t=new by,r=!0);var o=this.start,s=this.startLoc;(this.type===z.parenL||this.type===z.name)&&(this.potentialArrowAt=this.start);var l=this.parseMaybeConditional(e,t);if(n&&(l=n.call(this,l,o,s)),this.type.isAssign){var u=this.startNodeAt(o,s);return u.operator=this.value,u.left=this.type===z.eq?this.toAssignable(l,!1,t):l,r||(t.parenthesizedAssign=t.trailingComma=t.doubleProto=-1),t.shorthandAssign>=u.left.start&&(t.shorthandAssign=-1),this.checkLVal(l),this.next(),u.right=this.parseMaybeAssign(e),this.finishNode(u,"AssignmentExpression")}else r&&this.checkExpressionErrors(t,!0);return a>-1&&(t.parenthesizedAssign=a),i>-1&&(t.trailingComma=i),l};Cn.parseMaybeConditional=function(e,t){var n=this.start,r=this.startLoc,a=this.parseExprOps(e,t);if(this.checkExpressionErrors(t))return a;if(this.eat(z.question)){var i=this.startNodeAt(n,r);return i.test=a,i.consequent=this.parseMaybeAssign(),this.expect(z.colon),i.alternate=this.parseMaybeAssign(e),this.finishNode(i,"ConditionalExpression")}return a};Cn.parseExprOps=function(e,t){var n=this.start,r=this.startLoc,a=this.parseMaybeUnary(t,!1);return this.checkExpressionErrors(t)||a.start===n&&a.type==="ArrowFunctionExpression"?a:this.parseExprOp(a,n,r,-1,e)};Cn.parseExprOp=function(e,t,n,r,a){var i=this.type.binop;if(i!=null&&(!a||this.type!==z._in)&&i>r){var o=this.type===z.logicalOR||this.type===z.logicalAND,s=this.type===z.coalesce;s&&(i=z.logicalAND.binop);var l=this.value;this.next();var u=this.start,c=this.startLoc,f=this.parseExprOp(this.parseMaybeUnary(null,!1),u,c,i,a),d=this.buildBinary(t,n,e,f,l,o||s);return(o&&this.type===z.coalesce||s&&(this.type===z.logicalOR||this.type===z.logicalAND))&&this.raiseRecoverable(this.start,"Logical expressions and coalesce expressions cannot be mixed. Wrap either by parentheses"),this.parseExprOp(d,t,n,r,a)}return e};Cn.buildBinary=function(e,t,n,r,a,i){var o=this.startNodeAt(e,t);return o.left=n,o.operator=a,o.right=r,this.finishNode(o,i?"LogicalExpression":"BinaryExpression")};Cn.parseMaybeUnary=function(e,t){var n=this.start,r=this.startLoc,a;if(this.isContextual("await")&&(this.inAsync||!this.inFunction&&this.options.allowAwaitOutsideFunction))a=this.parseAwait(),t=!0;else if(this.type.prefix){var i=this.startNode(),o=this.type===z.incDec;i.operator=this.value,i.prefix=!0,this.next(),i.argument=this.parseMaybeUnary(null,!0),this.checkExpressionErrors(e,!0),o?this.checkLVal(i.argument):this.strict&&i.operator==="delete"&&i.argument.type==="Identifier"?this.raiseRecoverable(i.start,"Deleting local variable in strict mode"):t=!0,a=this.finishNode(i,o?"UpdateExpression":"UnaryExpression")}else{if(a=this.parseExprSubscripts(e),this.checkExpressionErrors(e))return a;for(;this.type.postfix&&!this.canInsertSemicolon();){var s=this.startNodeAt(n,r);s.operator=this.value,s.prefix=!1,s.argument=a,this.checkLVal(a),this.next(),a=this.finishNode(s,"UpdateExpression")}}return!t&&this.eat(z.starstar)?this.buildBinary(n,r,a,this.parseMaybeUnary(null,!1),"**",!1):a};Cn.parseExprSubscripts=function(e){var t=this.start,n=this.startLoc,r=this.parseExprAtom(e);if(r.type==="ArrowFunctionExpression"&&this.input.slice(this.lastTokStart,this.lastTokEnd)!==")")return r;var a=this.parseSubscripts(r,t,n);return e&&a.type==="MemberExpression"&&(e.parenthesizedAssign>=a.start&&(e.parenthesizedAssign=-1),e.parenthesizedBind>=a.start&&(e.parenthesizedBind=-1)),a};Cn.parseSubscripts=function(e,t,n,r){for(var a=this.options.ecmaVersion>=8&&e.type==="Identifier"&&e.name==="async"&&this.lastTokEnd===e.end&&!this.canInsertSemicolon()&&e.end-e.start===5&&this.potentialArrowAt===e.start,i=!1;;){var o=this.parseSubscript(e,t,n,r,a,i);if(o.optional&&(i=!0),o===e||o.type==="ArrowFunctionExpression"){if(i){var s=this.startNodeAt(t,n);s.expression=o,o=this.finishNode(s,"ChainExpression")}return o}e=o}};Cn.parseSubscript=function(e,t,n,r,a,i){var o=this.options.ecmaVersion>=11,s=o&&this.eat(z.questionDot);r&&s&&this.raise(this.lastTokStart,"Optional chaining cannot appear in the callee of new expressions");var l=this.eat(z.bracketL);if(l||s&&this.type!==z.parenL&&this.type!==z.backQuote||this.eat(z.dot)){var u=this.startNodeAt(t,n);u.object=e,u.property=l?this.parseExpression():this.parseIdent(this.options.allowReserved!=="never"),u.computed=!!l,l&&this.expect(z.bracketR),o&&(u.optional=s),e=this.finishNode(u,"MemberExpression")}else if(!r&&this.eat(z.parenL)){var c=new by,f=this.yieldPos,d=this.awaitPos,p=this.awaitIdentPos;this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0;var h=this.parseExprList(z.parenR,this.options.ecmaVersion>=8,!1,c);if(a&&!s&&!this.canInsertSemicolon()&&this.eat(z.arrow))return this.checkPatternErrors(c,!1),this.checkYieldAwaitInDefaultParams(),this.awaitIdentPos>0&&this.raise(this.awaitIdentPos,"Cannot use 'await' as identifier inside an async function"),this.yieldPos=f,this.awaitPos=d,this.awaitIdentPos=p,this.parseArrowExpression(this.startNodeAt(t,n),h,!0);this.checkExpressionErrors(c,!0),this.yieldPos=f||this.yieldPos,this.awaitPos=d||this.awaitPos,this.awaitIdentPos=p||this.awaitIdentPos;var g=this.startNodeAt(t,n);g.callee=e,g.arguments=h,o&&(g.optional=s),e=this.finishNode(g,"CallExpression")}else if(this.type===z.backQuote){(s||i)&&this.raise(this.start,"Optional chaining cannot appear in the tag of tagged template expressions");var v=this.startNodeAt(t,n);v.tag=e,v.quasi=this.parseTemplate({isTagged:!0}),e=this.finishNode(v,"TaggedTemplateExpression")}return e};Cn.parseExprAtom=function(e){this.type===z.slash&&this.readRegexp();var t,n=this.potentialArrowAt===this.start;switch(this.type){case z._super:return this.allowSuper||this.raise(this.start,"'super' keyword outside a method"),t=this.startNode(),this.next(),this.type===z.parenL&&!this.allowDirectSuper&&this.raise(t.start,"super() call outside constructor of a subclass"),this.type!==z.dot&&this.type!==z.bracketL&&this.type!==z.parenL&&this.unexpected(),this.finishNode(t,"Super");case z._this:return t=this.startNode(),this.next(),this.finishNode(t,"ThisExpression");case z.name:var r=this.start,a=this.startLoc,i=this.containsEsc,o=this.parseIdent(!1);if(this.options.ecmaVersion>=8&&!i&&o.name==="async"&&!this.canInsertSemicolon()&&this.eat(z._function))return this.parseFunction(this.startNodeAt(r,a),0,!1,!0);if(n&&!this.canInsertSemicolon()){if(this.eat(z.arrow))return this.parseArrowExpression(this.startNodeAt(r,a),[o],!1);if(this.options.ecmaVersion>=8&&o.name==="async"&&this.type===z.name&&!i)return o=this.parseIdent(!1),(this.canInsertSemicolon()||!this.eat(z.arrow))&&this.unexpected(),this.parseArrowExpression(this.startNodeAt(r,a),[o],!0)}return o;case z.regexp:var s=this.value;return t=this.parseLiteral(s.value),t.regex={pattern:s.pattern,flags:s.flags},t;case z.num:case z.string:return this.parseLiteral(this.value);case z._null:case z._true:case z._false:return t=this.startNode(),t.value=this.type===z._null?null:this.type===z._true,t.raw=this.type.keyword,this.next(),this.finishNode(t,"Literal");case z.parenL:var l=this.start,u=this.parseParenAndDistinguishExpression(n);return e&&(e.parenthesizedAssign<0&&!this.isSimpleAssignTarget(u)&&(e.parenthesizedAssign=l),e.parenthesizedBind<0&&(e.parenthesizedBind=l)),u;case z.bracketL:return t=this.startNode(),this.next(),t.elements=this.parseExprList(z.bracketR,!0,!0,e),this.finishNode(t,"ArrayExpression");case z.braceL:return this.parseObj(!1,e);case z._function:return t=this.startNode(),this.next(),this.parseFunction(t,0);case z._class:return this.parseClass(this.startNode(),!1);case z._new:return this.parseNew();case z.backQuote:return this.parseTemplate();case z._import:return this.options.ecmaVersion>=11?this.parseExprImport():this.unexpected();default:this.unexpected()}};Cn.parseExprImport=function(){var e=this.startNode();this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword import");var t=this.parseIdent(!0);switch(this.type){case z.parenL:return this.parseDynamicImport(e);case z.dot:return e.meta=t,this.parseImportMeta(e);default:this.unexpected()}};Cn.parseDynamicImport=function(e){if(this.next(),e.source=this.parseMaybeAssign(),!this.eat(z.parenR)){var t=this.start;this.eat(z.comma)&&this.eat(z.parenR)?this.raiseRecoverable(t,"Trailing comma is not allowed in import()"):this.unexpected(t)}return this.finishNode(e,"ImportExpression")};Cn.parseImportMeta=function(e){this.next();var t=this.containsEsc;return e.property=this.parseIdent(!0),e.property.name!=="meta"&&this.raiseRecoverable(e.property.start,"The only valid meta property for import is 'import.meta'"),t&&this.raiseRecoverable(e.start,"'import.meta' must not contain escaped characters"),this.options.sourceType!=="module"&&this.raiseRecoverable(e.start,"Cannot use 'import.meta' outside a module"),this.finishNode(e,"MetaProperty")};Cn.parseLiteral=function(e){var t=this.startNode();return t.value=e,t.raw=this.input.slice(this.start,this.end),t.raw.charCodeAt(t.raw.length-1)===110&&(t.bigint=t.raw.slice(0,-1).replace(/_/g,"")),this.next(),this.finishNode(t,"Literal")};Cn.parseParenExpression=function(){this.expect(z.parenL);var e=this.parseExpression();return this.expect(z.parenR),e};Cn.parseParenAndDistinguishExpression=function(e){var t=this.start,n=this.startLoc,r,a=this.options.ecmaVersion>=8;if(this.options.ecmaVersion>=6){this.next();var i=this.start,o=this.startLoc,s=[],l=!0,u=!1,c=new by,f=this.yieldPos,d=this.awaitPos,p;for(this.yieldPos=0,this.awaitPos=0;this.type!==z.parenR;)if(l?l=!1:this.expect(z.comma),a&&this.afterTrailingComma(z.parenR,!0)){u=!0;break}else if(this.type===z.ellipsis){p=this.start,s.push(this.parseParenItem(this.parseRestBinding())),this.type===z.comma&&this.raise(this.start,"Comma is not permitted after the rest element");break}else s.push(this.parseMaybeAssign(!1,c,this.parseParenItem));var h=this.start,g=this.startLoc;if(this.expect(z.parenR),e&&!this.canInsertSemicolon()&&this.eat(z.arrow))return this.checkPatternErrors(c,!1),this.checkYieldAwaitInDefaultParams(),this.yieldPos=f,this.awaitPos=d,this.parseParenArrowList(t,n,s);(!s.length||u)&&this.unexpected(this.lastTokStart),p&&this.unexpected(p),this.checkExpressionErrors(c,!0),this.yieldPos=f||this.yieldPos,this.awaitPos=d||this.awaitPos,s.length>1?(r=this.startNodeAt(i,o),r.expressions=s,this.finishNodeAt(r,"SequenceExpression",h,g)):r=s[0]}else r=this.parseParenExpression();if(this.options.preserveParens){var v=this.startNodeAt(t,n);return v.expression=r,this.finishNode(v,"ParenthesizedExpression")}else return r};Cn.parseParenItem=function(e){return e};Cn.parseParenArrowList=function(e,t,n){return this.parseArrowExpression(this.startNodeAt(e,t),n)};var _1e=[];Cn.parseNew=function(){this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword new");var e=this.startNode(),t=this.parseIdent(!0);if(this.options.ecmaVersion>=6&&this.eat(z.dot)){e.meta=t;var n=this.containsEsc;return e.property=this.parseIdent(!0),e.property.name!=="target"&&this.raiseRecoverable(e.property.start,"The only valid meta property for new is 'new.target'"),n&&this.raiseRecoverable(e.start,"'new.target' must not contain escaped characters"),this.inNonArrowFunction()||this.raiseRecoverable(e.start,"'new.target' can only be used in functions"),this.finishNode(e,"MetaProperty")}var r=this.start,a=this.startLoc,i=this.type===z._import;return e.callee=this.parseSubscripts(this.parseExprAtom(),r,a,!0),i&&e.callee.type==="ImportExpression"&&this.raise(r,"Cannot use new with import()"),this.eat(z.parenL)?e.arguments=this.parseExprList(z.parenR,this.options.ecmaVersion>=8,!1):e.arguments=_1e,this.finishNode(e,"NewExpression")};Cn.parseTemplateElement=function(e){var t=e.isTagged,n=this.startNode();return this.type===z.invalidTemplate?(t||this.raiseRecoverable(this.start,"Bad escape sequence in untagged template literal"),n.value={raw:this.value,cooked:null}):n.value={raw:this.input.slice(this.start,this.end).replace(/\r\n?/g,`
`),cooked:this.value},this.next(),n.tail=this.type===z.backQuote,this.finishNode(n,"TemplateElement")};Cn.parseTemplate=function(e){e===void 0&&(e={});var t=e.isTagged;t===void 0&&(t=!1);var n=this.startNode();this.next(),n.expressions=[];var r=this.parseTemplateElement({isTagged:t});for(n.quasis=[r];!r.tail;)this.type===z.eof&&this.raise(this.pos,"Unterminated template literal"),this.expect(z.dollarBraceL),n.expressions.push(this.parseExpression()),this.expect(z.braceR),n.quasis.push(r=this.parseTemplateElement({isTagged:t}));return this.next(),this.finishNode(n,"TemplateLiteral")};Cn.isAsyncProp=function(e){return!e.computed&&e.key.type==="Identifier"&&e.key.name==="async"&&(this.type===z.name||this.type===z.num||this.type===z.string||this.type===z.bracketL||this.type.keyword||this.options.ecmaVersion>=9&&this.type===z.star)&&!Co.test(this.input.slice(this.lastTokEnd,this.start))};Cn.parseObj=function(e,t){var n=this.startNode(),r=!0,a={};for(n.properties=[],this.next();!this.eat(z.braceR);){if(r)r=!1;else if(this.expect(z.comma),this.options.ecmaVersion>=5&&this.afterTrailingComma(z.braceR))break;var i=this.parseProperty(e,t);e||this.checkPropClash(i,a,t),n.properties.push(i)}return this.finishNode(n,e?"ObjectPattern":"ObjectExpression")};Cn.parseProperty=function(e,t){var n=this.startNode(),r,a,i,o;if(this.options.ecmaVersion>=9&&this.eat(z.ellipsis))return e?(n.argument=this.parseIdent(!1),this.type===z.comma&&this.raise(this.start,"Comma is not permitted after the rest element"),this.finishNode(n,"RestElement")):(this.type===z.parenL&&t&&(t.parenthesizedAssign<0&&(t.parenthesizedAssign=this.start),t.parenthesizedBind<0&&(t.parenthesizedBind=this.start)),n.argument=this.parseMaybeAssign(!1,t),this.type===z.comma&&t&&t.trailingComma<0&&(t.trailingComma=this.start),this.finishNode(n,"SpreadElement"));this.options.ecmaVersion>=6&&(n.method=!1,n.shorthand=!1,(e||t)&&(i=this.start,o=this.startLoc),e||(r=this.eat(z.star)));var s=this.containsEsc;return this.parsePropertyName(n),!e&&!s&&this.options.ecmaVersion>=8&&!r&&this.isAsyncProp(n)?(a=!0,r=this.options.ecmaVersion>=9&&this.eat(z.star),this.parsePropertyName(n,t)):a=!1,this.parsePropertyValue(n,e,r,a,i,o,t,s),this.finishNode(n,"Property")};Cn.parsePropertyValue=function(e,t,n,r,a,i,o,s){if((n||r)&&this.type===z.colon&&this.unexpected(),this.eat(z.colon))e.value=t?this.parseMaybeDefault(this.start,this.startLoc):this.parseMaybeAssign(!1,o),e.kind="init";else if(this.options.ecmaVersion>=6&&this.type===z.parenL)t&&this.unexpected(),e.kind="init",e.method=!0,e.value=this.parseMethod(n,r);else if(!t&&!s&&this.options.ecmaVersion>=5&&!e.computed&&e.key.type==="Identifier"&&(e.key.name==="get"||e.key.name==="set")&&this.type!==z.comma&&this.type!==z.braceR&&this.type!==z.eq){(n||r)&&this.unexpected(),e.kind=e.key.name,this.parsePropertyName(e),e.value=this.parseMethod(!1);var l=e.kind==="get"?0:1;if(e.value.params.length!==l){var u=e.value.start;e.kind==="get"?this.raiseRecoverable(u,"getter should have no params"):this.raiseRecoverable(u,"setter should have exactly one param")}else e.kind==="set"&&e.value.params[0].type==="RestElement"&&this.raiseRecoverable(e.value.params[0].start,"Setter cannot use rest params")}else this.options.ecmaVersion>=6&&!e.computed&&e.key.type==="Identifier"?((n||r)&&this.unexpected(),this.checkUnreserved(e.key),e.key.name==="await"&&!this.awaitIdentPos&&(this.awaitIdentPos=a),e.kind="init",t?e.value=this.parseMaybeDefault(a,i,e.key):this.type===z.eq&&o?(o.shorthandAssign<0&&(o.shorthandAssign=this.start),e.value=this.parseMaybeDefault(a,i,e.key)):e.value=e.key,e.shorthand=!0):this.unexpected()};Cn.parsePropertyName=function(e){if(this.options.ecmaVersion>=6){if(this.eat(z.bracketL))return e.computed=!0,e.key=this.parseMaybeAssign(),this.expect(z.bracketR),e.key;e.computed=!1}return e.key=this.type===z.num||this.type===z.string?this.parseExprAtom():this.parseIdent(this.options.allowReserved!=="never")};Cn.initFunction=function(e){e.id=null,this.options.ecmaVersion>=6&&(e.generator=e.expression=!1),this.options.ecmaVersion>=8&&(e.async=!1)};Cn.parseMethod=function(e,t,n){var r=this.startNode(),a=this.yieldPos,i=this.awaitPos,o=this.awaitIdentPos;return this.initFunction(r),this.options.ecmaVersion>=6&&(r.generator=e),this.options.ecmaVersion>=8&&(r.async=!!t),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(f3(t,r.generator)|gB|(n?vB:0)),this.expect(z.parenL),r.params=this.parseBindingList(z.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams(),this.parseFunctionBody(r,!1,!0),this.yieldPos=a,this.awaitPos=i,this.awaitIdentPos=o,this.finishNode(r,"FunctionExpression")};Cn.parseArrowExpression=function(e,t,n){var r=this.yieldPos,a=this.awaitPos,i=this.awaitIdentPos;return this.enterScope(f3(n,!1)|hB),this.initFunction(e),this.options.ecmaVersion>=8&&(e.async=!!n),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,e.params=this.toAssignableList(t,!0),this.parseFunctionBody(e,!0,!1),this.yieldPos=r,this.awaitPos=a,this.awaitIdentPos=i,this.finishNode(e,"ArrowFunctionExpression")};Cn.parseFunctionBody=function(e,t,n){var r=t&&this.type!==z.braceL,a=this.strict,i=!1;if(r)e.body=this.parseMaybeAssign(),e.expression=!0,this.checkParams(e,!1);else{var o=this.options.ecmaVersion>=7&&!this.isSimpleParamList(e.params);(!a||o)&&(i=this.strictDirective(this.end),i&&o&&this.raiseRecoverable(e.start,"Illegal 'use strict' directive in function with non-simple parameter list"));var s=this.labels;this.labels=[],i&&(this.strict=!0),this.checkParams(e,!a&&!i&&!t&&!n&&this.isSimpleParamList(e.params)),this.strict&&e.id&&this.checkLVal(e.id,xB),e.body=this.parseBlock(!1,void 0,i&&!a),e.expression=!1,this.adaptDirectivePrologue(e.body.body),this.labels=s}this.exitScope()};Cn.isSimpleParamList=function(e){for(var t=0,n=e;t<n.length;t+=1){var r=n[t];if(r.type!=="Identifier")return!1}return!0};Cn.checkParams=function(e,t){for(var n={},r=0,a=e.params;r<a.length;r+=1){var i=a[r];this.checkLVal(i,d3,t?null:n)}};Cn.parseExprList=function(e,t,n,r){for(var a=[],i=!0;!this.eat(e);){if(i)i=!1;else if(this.expect(z.comma),t&&this.afterTrailingComma(e))break;var o=void 0;n&&this.type===z.comma?o=null:this.type===z.ellipsis?(o=this.parseSpread(r),r&&this.type===z.comma&&r.trailingComma<0&&(r.trailingComma=this.start)):o=this.parseMaybeAssign(!1,r),a.push(o)}return a};Cn.checkUnreserved=function(e){var t=e.start,n=e.end,r=e.name;if(this.inGenerator&&r==="yield"&&this.raiseRecoverable(t,"Cannot use 'yield' as identifier inside a generator"),this.inAsync&&r==="await"&&this.raiseRecoverable(t,"Cannot use 'await' as identifier inside an async function"),this.keywords.test(r)&&this.raise(t,"Unexpected keyword '"+r+"'"),!(this.options.ecmaVersion<6&&this.input.slice(t,n).indexOf("\\")!==-1)){var a=this.strict?this.reservedWordsStrict:this.reservedWords;a.test(r)&&(!this.inAsync&&r==="await"&&this.raiseRecoverable(t,"Cannot use keyword 'await' outside an async function"),this.raiseRecoverable(t,"The keyword '"+r+"' is reserved"))}};Cn.parseIdent=function(e,t){var n=this.startNode();return this.type===z.name?n.name=this.value:this.type.keyword?(n.name=this.type.keyword,(n.name==="class"||n.name==="function")&&(this.lastTokEnd!==this.lastTokStart+1||this.input.charCodeAt(this.lastTokStart)!==46)&&this.context.pop()):this.unexpected(),this.next(!!e),this.finishNode(n,"Identifier"),e||(this.checkUnreserved(n),n.name==="await"&&!this.awaitIdentPos&&(this.awaitIdentPos=n.start)),n};Cn.parseYield=function(e){this.yieldPos||(this.yieldPos=this.start);var t=this.startNode();return this.next(),this.type===z.semi||this.canInsertSemicolon()||this.type!==z.star&&!this.type.startsExpr?(t.delegate=!1,t.argument=null):(t.delegate=this.eat(z.star),t.argument=this.parseMaybeAssign(e)),this.finishNode(t,"YieldExpression")};Cn.parseAwait=function(){this.awaitPos||(this.awaitPos=this.start);var e=this.startNode();return this.next(),e.argument=this.parseMaybeUnary(null,!1),this.finishNode(e,"AwaitExpression")};var ub=ra.prototype;ub.raise=function(e,t){var n=fB(this.input,e);t+=" ("+n.line+":"+n.column+")";var r=new SyntaxError(t);throw r.pos=e,r.loc=n,r.raisedAt=this.pos,r};ub.raiseRecoverable=ub.raise;ub.curPosition=function(){if(this.options.locations)return new _m(this.curLine,this.pos-this.lineStart)};var Cu=ra.prototype,w1e=function(t){this.flags=t,this.var=[],this.lexical=[],this.functions=[]};Cu.enterScope=function(e){this.scopeStack.push(new w1e(e))};Cu.exitScope=function(){this.scopeStack.pop()};Cu.treatFunctionsAsVarInScope=function(e){return e.flags&Xm||!this.inModule&&e.flags&wm};Cu.declareName=function(e,t,n){var r=!1;if(t===sl){var a=this.currentScope();r=a.lexical.indexOf(e)>-1||a.functions.indexOf(e)>-1||a.var.indexOf(e)>-1,a.lexical.push(e),this.inModule&&a.flags&wm&&delete this.undefinedExports[e]}else if(t===yB){var i=this.currentScope();i.lexical.push(e)}else if(t===bB){var o=this.currentScope();this.treatFunctionsAsVar?r=o.lexical.indexOf(e)>-1:r=o.lexical.indexOf(e)>-1||o.var.indexOf(e)>-1,o.functions.push(e)}else for(var s=this.scopeStack.length-1;s>=0;--s){var l=this.scopeStack[s];if(l.lexical.indexOf(e)>-1&&!(l.flags&mB&&l.lexical[0]===e)||!this.treatFunctionsAsVarInScope(l)&&l.functions.indexOf(e)>-1){r=!0;break}if(l.var.push(e),this.inModule&&l.flags&wm&&delete this.undefinedExports[e],l.flags&c3)break}r&&this.raiseRecoverable(n,"Identifier '"+e+"' has already been declared")};Cu.checkLocalExport=function(e){this.scopeStack[0].lexical.indexOf(e.name)===-1&&this.scopeStack[0].var.indexOf(e.name)===-1&&(this.undefinedExports[e.name]=e)};Cu.currentScope=function(){return this.scopeStack[this.scopeStack.length-1]};Cu.currentVarScope=function(){for(var e=this.scopeStack.length-1;;e--){var t=this.scopeStack[e];if(t.flags&c3)return t}};Cu.currentThisScope=function(){for(var e=this.scopeStack.length-1;;e--){var t=this.scopeStack[e];if(t.flags&c3&&!(t.flags&hB))return t}};var h3=function(t,n,r){this.type="",this.start=n,this.end=0,t.options.locations&&(this.loc=new vy(t,r)),t.options.directSourceFile&&(this.sourceFile=t.options.directSourceFile),t.options.ranges&&(this.range=[n,0])},yy=ra.prototype;yy.startNode=function(){return new h3(this,this.start,this.startLoc)};yy.startNodeAt=function(e,t){return new h3(this,e,t)};function wB(e,t,n,r){return e.type=t,e.end=n,this.options.locations&&(e.loc.end=r),this.options.ranges&&(e.range[1]=n),e}yy.finishNode=function(e,t){return wB.call(this,e,t,this.lastTokEnd,this.lastTokEndLoc)};yy.finishNodeAt=function(e,t,n,r){return wB.call(this,e,t,n,r)};var Fo=function(t,n,r,a,i){this.token=t,this.isExpr=!!n,this.preserveSpace=!!r,this.override=a,this.generator=!!i},qr={b_stat:new Fo("{",!1),b_expr:new Fo("{",!0),b_tmpl:new Fo("${",!1),p_stat:new Fo("(",!1),p_expr:new Fo("(",!0),q_tmpl:new Fo("`",!0,!0,function(e){return e.tryReadTemplateToken()}),f_stat:new Fo("function",!1),f_expr:new Fo("function",!0),f_expr_gen:new Fo("function",!0,!1,null,!0),f_gen:new Fo("function",!1,!1,null,!0)},xy=ra.prototype;xy.initialContext=function(){return[qr.b_stat]};xy.braceIsBlock=function(e){var t=this.curContext();return t===qr.f_expr||t===qr.f_stat?!0:e===z.colon&&(t===qr.b_stat||t===qr.b_expr)?!t.isExpr:e===z._return||e===z.name&&this.exprAllowed?Co.test(this.input.slice(this.lastTokEnd,this.start)):e===z._else||e===z.semi||e===z.eof||e===z.parenR||e===z.arrow?!0:e===z.braceL?t===qr.b_stat:e===z._var||e===z._const||e===z.name?!1:!this.exprAllowed};xy.inGeneratorContext=function(){for(var e=this.context.length-1;e>=1;e--){var t=this.context[e];if(t.token==="function")return t.generator}return!1};xy.updateContext=function(e){var t,n=this.type;n.keyword&&e===z.dot?this.exprAllowed=!1:(t=n.updateContext)?t.call(this,e):this.exprAllowed=n.beforeExpr};z.parenR.updateContext=z.braceR.updateContext=function(){if(this.context.length===1){this.exprAllowed=!0;return}var e=this.context.pop();e===qr.b_stat&&this.curContext().token==="function"&&(e=this.context.pop()),this.exprAllowed=!e.isExpr};z.braceL.updateContext=function(e){this.context.push(this.braceIsBlock(e)?qr.b_stat:qr.b_expr),this.exprAllowed=!0};z.dollarBraceL.updateContext=function(){this.context.push(qr.b_tmpl),this.exprAllowed=!0};z.parenL.updateContext=function(e){var t=e===z._if||e===z._for||e===z._with||e===z._while;this.context.push(t?qr.p_stat:qr.p_expr),this.exprAllowed=!0};z.incDec.updateContext=function(){};z._function.updateContext=z._class.updateContext=function(e){e.beforeExpr&&e!==z.semi&&e!==z._else&&!(e===z._return&&Co.test(this.input.slice(this.lastTokEnd,this.start)))&&!((e===z.colon||e===z.braceL)&&this.curContext()===qr.b_stat)?this.context.push(qr.f_expr):this.context.push(qr.f_stat),this.exprAllowed=!1};z.backQuote.updateContext=function(){this.curContext()===qr.q_tmpl?this.context.pop():this.context.push(qr.q_tmpl),this.exprAllowed=!1};z.star.updateContext=function(e){if(e===z._function){var t=this.context.length-1;this.context[t]===qr.f_expr?this.context[t]=qr.f_expr_gen:this.context[t]=qr.f_gen}this.exprAllowed=!0};z.name.updateContext=function(e){var t=!1;this.options.ecmaVersion>=6&&e!==z.dot&&(this.value==="of"&&!this.exprAllowed||this.value==="yield"&&this.inGeneratorContext())&&(t=!0),this.exprAllowed=t};var kB="ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS",EB=kB+" Extended_Pictographic",k1e=EB,E1e={9:kB,10:EB,11:k1e},p8="Cased_Letter LC Close_Punctuation Pe Connector_Punctuation Pc Control Cc cntrl Currency_Symbol Sc Dash_Punctuation Pd Decimal_Number Nd digit Enclosing_Mark Me Final_Punctuation Pf Format Cf Initial_Punctuation Pi Letter L Letter_Number Nl Line_Separator Zl Lowercase_Letter Ll Mark M Combining_Mark Math_Symbol Sm Modifier_Letter Lm Modifier_Symbol Sk Nonspacing_Mark Mn Number N Open_Punctuation Ps Other C Other_Letter Lo Other_Number No Other_Punctuation Po Other_Symbol So Paragraph_Separator Zp Private_Use Co Punctuation P punct Separator Z Space_Separator Zs Spacing_Mark Mc Surrogate Cs Symbol S Titlecase_Letter Lt Unassigned Cn Uppercase_Letter Lu",SB="Adlam Adlm Ahom Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb",CB=SB+" Dogra Dogr Gunjala_Gondi Gong Hanifi_Rohingya Rohg Makasar Maka Medefaidrin Medf Old_Sogdian Sogo Sogdian Sogd",S1e=CB+" Elymaic Elym Nandinagari Nand Nyiakeng_Puachue_Hmong Hmnp Wancho Wcho",C1e={9:SB,10:CB,11:S1e},TB={};function m3(e){var t=TB[e]={binary:oc(E1e[e]+" "+p8),nonBinary:{General_Category:oc(p8),Script:oc(C1e[e])}};t.nonBinary.Script_Extensions=t.nonBinary.Script,t.nonBinary.gc=t.nonBinary.General_Category,t.nonBinary.sc=t.nonBinary.Script,t.nonBinary.scx=t.nonBinary.Script_Extensions}m3(9);m3(10);m3(11);var Qt=ra.prototype,bl=function(t){this.parser=t,this.validFlags="gim"+(t.options.ecmaVersion>=6?"uy":"")+(t.options.ecmaVersion>=9?"s":""),this.unicodeProperties=TB[t.options.ecmaVersion>=11?11:t.options.ecmaVersion],this.source="",this.flags="",this.start=0,this.switchU=!1,this.switchN=!1,this.pos=0,this.lastIntValue=0,this.lastStringValue="",this.lastAssertionIsQuantifiable=!1,this.numCapturingParens=0,this.maxBackReference=0,this.groupNames=[],this.backReferenceNames=[]};bl.prototype.reset=function(t,n,r){var a=r.indexOf("u")!==-1;this.start=t|0,this.source=n+"",this.flags=r,this.switchU=a&&this.parser.options.ecmaVersion>=6,this.switchN=a&&this.parser.options.ecmaVersion>=9};bl.prototype.raise=function(t){this.parser.raiseRecoverable(this.start,"Invalid regular expression: /"+this.source+"/: "+t)};bl.prototype.at=function(t,n){n===void 0&&(n=!1);var r=this.source,a=r.length;if(t>=a)return-1;var i=r.charCodeAt(t);if(!(n||this.switchU)||i<=55295||i>=57344||t+1>=a)return i;var o=r.charCodeAt(t+1);return o>=56320&&o<=57343?(i<<10)+o-56613888:i};bl.prototype.nextIndex=function(t,n){n===void 0&&(n=!1);var r=this.source,a=r.length;if(t>=a)return a;var i=r.charCodeAt(t),o;return!(n||this.switchU)||i<=55295||i>=57344||t+1>=a||(o=r.charCodeAt(t+1))<56320||o>57343?t+1:t+2};bl.prototype.current=function(t){return t===void 0&&(t=!1),this.at(this.pos,t)};bl.prototype.lookahead=function(t){return t===void 0&&(t=!1),this.at(this.nextIndex(this.pos,t),t)};bl.prototype.advance=function(t){t===void 0&&(t=!1),this.pos=this.nextIndex(this.pos,t)};bl.prototype.eat=function(t,n){return n===void 0&&(n=!1),this.current(n)===t?(this.advance(n),!0):!1};function cb(e){return e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode((e>>10)+55296,(e&1023)+56320))}Qt.validateRegExpFlags=function(e){for(var t=e.validFlags,n=e.flags,r=0;r<n.length;r++){var a=n.charAt(r);t.indexOf(a)===-1&&this.raise(e.start,"Invalid regular expression flag"),n.indexOf(a,r+1)>-1&&this.raise(e.start,"Duplicate regular expression flag")}};Qt.validateRegExpPattern=function(e){this.regexp_pattern(e),!e.switchN&&this.options.ecmaVersion>=9&&e.groupNames.length>0&&(e.switchN=!0,this.regexp_pattern(e))};Qt.regexp_pattern=function(e){e.pos=0,e.lastIntValue=0,e.lastStringValue="",e.lastAssertionIsQuantifiable=!1,e.numCapturingParens=0,e.maxBackReference=0,e.groupNames.length=0,e.backReferenceNames.length=0,this.regexp_disjunction(e),e.pos!==e.source.length&&(e.eat(41)&&e.raise("Unmatched ')'"),(e.eat(93)||e.eat(125))&&e.raise("Lone quantifier brackets")),e.maxBackReference>e.numCapturingParens&&e.raise("Invalid escape");for(var t=0,n=e.backReferenceNames;t<n.length;t+=1){var r=n[t];e.groupNames.indexOf(r)===-1&&e.raise("Invalid named capture referenced")}};Qt.regexp_disjunction=function(e){for(this.regexp_alternative(e);e.eat(124);)this.regexp_alternative(e);this.regexp_eatQuantifier(e,!0)&&e.raise("Nothing to repeat"),e.eat(123)&&e.raise("Lone quantifier brackets")};Qt.regexp_alternative=function(e){for(;e.pos<e.source.length&&this.regexp_eatTerm(e););};Qt.regexp_eatTerm=function(e){return this.regexp_eatAssertion(e)?(e.lastAssertionIsQuantifiable&&this.regexp_eatQuantifier(e)&&e.switchU&&e.raise("Invalid quantifier"),!0):(e.switchU?this.regexp_eatAtom(e):this.regexp_eatExtendedAtom(e))?(this.regexp_eatQuantifier(e),!0):!1};Qt.regexp_eatAssertion=function(e){var t=e.pos;if(e.lastAssertionIsQuantifiable=!1,e.eat(94)||e.eat(36))return!0;if(e.eat(92)){if(e.eat(66)||e.eat(98))return!0;e.pos=t}if(e.eat(40)&&e.eat(63)){var n=!1;if(this.options.ecmaVersion>=9&&(n=e.eat(60)),e.eat(61)||e.eat(33))return this.regexp_disjunction(e),e.eat(41)||e.raise("Unterminated group"),e.lastAssertionIsQuantifiable=!n,!0}return e.pos=t,!1};Qt.regexp_eatQuantifier=function(e,t){return t===void 0&&(t=!1),this.regexp_eatQuantifierPrefix(e,t)?(e.eat(63),!0):!1};Qt.regexp_eatQuantifierPrefix=function(e,t){return e.eat(42)||e.eat(43)||e.eat(63)||this.regexp_eatBracedQuantifier(e,t)};Qt.regexp_eatBracedQuantifier=function(e,t){var n=e.pos;if(e.eat(123)){var r=0,a=-1;if(this.regexp_eatDecimalDigits(e)&&(r=e.lastIntValue,e.eat(44)&&this.regexp_eatDecimalDigits(e)&&(a=e.lastIntValue),e.eat(125)))return a!==-1&&a<r&&!t&&e.raise("numbers out of order in {} quantifier"),!0;e.switchU&&!t&&e.raise("Incomplete quantifier"),e.pos=n}return!1};Qt.regexp_eatAtom=function(e){return this.regexp_eatPatternCharacters(e)||e.eat(46)||this.regexp_eatReverseSolidusAtomEscape(e)||this.regexp_eatCharacterClass(e)||this.regexp_eatUncapturingGroup(e)||this.regexp_eatCapturingGroup(e)};Qt.regexp_eatReverseSolidusAtomEscape=function(e){var t=e.pos;if(e.eat(92)){if(this.regexp_eatAtomEscape(e))return!0;e.pos=t}return!1};Qt.regexp_eatUncapturingGroup=function(e){var t=e.pos;if(e.eat(40)){if(e.eat(63)&&e.eat(58)){if(this.regexp_disjunction(e),e.eat(41))return!0;e.raise("Unterminated group")}e.pos=t}return!1};Qt.regexp_eatCapturingGroup=function(e){if(e.eat(40)){if(this.options.ecmaVersion>=9?this.regexp_groupSpecifier(e):e.current()===63&&e.raise("Invalid group"),this.regexp_disjunction(e),e.eat(41))return e.numCapturingParens+=1,!0;e.raise("Unterminated group")}return!1};Qt.regexp_eatExtendedAtom=function(e){return e.eat(46)||this.regexp_eatReverseSolidusAtomEscape(e)||this.regexp_eatCharacterClass(e)||this.regexp_eatUncapturingGroup(e)||this.regexp_eatCapturingGroup(e)||this.regexp_eatInvalidBracedQuantifier(e)||this.regexp_eatExtendedPatternCharacter(e)};Qt.regexp_eatInvalidBracedQuantifier=function(e){return this.regexp_eatBracedQuantifier(e,!0)&&e.raise("Nothing to repeat"),!1};Qt.regexp_eatSyntaxCharacter=function(e){var t=e.current();return AB(t)?(e.lastIntValue=t,e.advance(),!0):!1};function AB(e){return e===36||e>=40&&e<=43||e===46||e===63||e>=91&&e<=94||e>=123&&e<=125}Qt.regexp_eatPatternCharacters=function(e){for(var t=e.pos,n=0;(n=e.current())!==-1&&!AB(n);)e.advance();return e.pos!==t};Qt.regexp_eatExtendedPatternCharacter=function(e){var t=e.current();return t!==-1&&t!==36&&!(t>=40&&t<=43)&&t!==46&&t!==63&&t!==91&&t!==94&&t!==124?(e.advance(),!0):!1};Qt.regexp_groupSpecifier=function(e){if(e.eat(63)){if(this.regexp_eatGroupName(e)){e.groupNames.indexOf(e.lastStringValue)!==-1&&e.raise("Duplicate capture group name"),e.groupNames.push(e.lastStringValue);return}e.raise("Invalid group")}};Qt.regexp_eatGroupName=function(e){if(e.lastStringValue="",e.eat(60)){if(this.regexp_eatRegExpIdentifierName(e)&&e.eat(62))return!0;e.raise("Invalid capture group name")}return!1};Qt.regexp_eatRegExpIdentifierName=function(e){if(e.lastStringValue="",this.regexp_eatRegExpIdentifierStart(e)){for(e.lastStringValue+=cb(e.lastIntValue);this.regexp_eatRegExpIdentifierPart(e);)e.lastStringValue+=cb(e.lastIntValue);return!0}return!1};Qt.regexp_eatRegExpIdentifierStart=function(e){var t=e.pos,n=this.options.ecmaVersion>=11,r=e.current(n);return e.advance(n),r===92&&this.regexp_eatRegExpUnicodeEscapeSequence(e,n)&&(r=e.lastIntValue),T1e(r)?(e.lastIntValue=r,!0):(e.pos=t,!1)};function T1e(e){return xu(e,!0)||e===36||e===95}Qt.regexp_eatRegExpIdentifierPart=function(e){var t=e.pos,n=this.options.ecmaVersion>=11,r=e.current(n);return e.advance(n),r===92&&this.regexp_eatRegExpUnicodeEscapeSequence(e,n)&&(r=e.lastIntValue),A1e(r)?(e.lastIntValue=r,!0):(e.pos=t,!1)};function A1e(e){return Cd(e,!0)||e===36||e===95||e===8204||e===8205}Qt.regexp_eatAtomEscape=function(e){return this.regexp_eatBackReference(e)||this.regexp_eatCharacterClassEscape(e)||this.regexp_eatCharacterEscape(e)||e.switchN&&this.regexp_eatKGroupName(e)?!0:(e.switchU&&(e.current()===99&&e.raise("Invalid unicode escape"),e.raise("Invalid escape")),!1)};Qt.regexp_eatBackReference=function(e){var t=e.pos;if(this.regexp_eatDecimalEscape(e)){var n=e.lastIntValue;if(e.switchU)return n>e.maxBackReference&&(e.maxBackReference=n),!0;if(n<=e.numCapturingParens)return!0;e.pos=t}return!1};Qt.regexp_eatKGroupName=function(e){if(e.eat(107)){if(this.regexp_eatGroupName(e))return e.backReferenceNames.push(e.lastStringValue),!0;e.raise("Invalid named reference")}return!1};Qt.regexp_eatCharacterEscape=function(e){return this.regexp_eatControlEscape(e)||this.regexp_eatCControlLetter(e)||this.regexp_eatZero(e)||this.regexp_eatHexEscapeSequence(e)||this.regexp_eatRegExpUnicodeEscapeSequence(e,!1)||!e.switchU&&this.regexp_eatLegacyOctalEscapeSequence(e)||this.regexp_eatIdentityEscape(e)};Qt.regexp_eatCControlLetter=function(e){var t=e.pos;if(e.eat(99)){if(this.regexp_eatControlLetter(e))return!0;e.pos=t}return!1};Qt.regexp_eatZero=function(e){return e.current()===48&&!_y(e.lookahead())?(e.lastIntValue=0,e.advance(),!0):!1};Qt.regexp_eatControlEscape=function(e){var t=e.current();return t===116?(e.lastIntValue=9,e.advance(),!0):t===110?(e.lastIntValue=10,e.advance(),!0):t===118?(e.lastIntValue=11,e.advance(),!0):t===102?(e.lastIntValue=12,e.advance(),!0):t===114?(e.lastIntValue=13,e.advance(),!0):!1};Qt.regexp_eatControlLetter=function(e){var t=e.current();return OB(t)?(e.lastIntValue=t%32,e.advance(),!0):!1};function OB(e){return e>=65&&e<=90||e>=97&&e<=122}Qt.regexp_eatRegExpUnicodeEscapeSequence=function(e,t){t===void 0&&(t=!1);var n=e.pos,r=t||e.switchU;if(e.eat(117)){if(this.regexp_eatFixedHexDigits(e,4)){var a=e.lastIntValue;if(r&&a>=55296&&a<=56319){var i=e.pos;if(e.eat(92)&&e.eat(117)&&this.regexp_eatFixedHexDigits(e,4)){var o=e.lastIntValue;if(o>=56320&&o<=57343)return e.lastIntValue=(a-55296)*1024+(o-56320)+65536,!0}e.pos=i,e.lastIntValue=a}return!0}if(r&&e.eat(123)&&this.regexp_eatHexDigits(e)&&e.eat(125)&&O1e(e.lastIntValue))return!0;r&&e.raise("Invalid unicode escape"),e.pos=n}return!1};function O1e(e){return e>=0&&e<=1114111}Qt.regexp_eatIdentityEscape=function(e){if(e.switchU)return this.regexp_eatSyntaxCharacter(e)?!0:e.eat(47)?(e.lastIntValue=47,!0):!1;var t=e.current();return t!==99&&(!e.switchN||t!==107)?(e.lastIntValue=t,e.advance(),!0):!1};Qt.regexp_eatDecimalEscape=function(e){e.lastIntValue=0;var t=e.current();if(t>=49&&t<=57){do e.lastIntValue=10*e.lastIntValue+(t-48),e.advance();while((t=e.current())>=48&&t<=57);return!0}return!1};Qt.regexp_eatCharacterClassEscape=function(e){var t=e.current();if(M1e(t))return e.lastIntValue=-1,e.advance(),!0;if(e.switchU&&this.options.ecmaVersion>=9&&(t===80||t===112)){if(e.lastIntValue=-1,e.advance(),e.eat(123)&&this.regexp_eatUnicodePropertyValueExpression(e)&&e.eat(125))return!0;e.raise("Invalid property name")}return!1};function M1e(e){return e===100||e===68||e===115||e===83||e===119||e===87}Qt.regexp_eatUnicodePropertyValueExpression=function(e){var t=e.pos;if(this.regexp_eatUnicodePropertyName(e)&&e.eat(61)){var n=e.lastStringValue;if(this.regexp_eatUnicodePropertyValue(e)){var r=e.lastStringValue;return this.regexp_validateUnicodePropertyNameAndValue(e,n,r),!0}}if(e.pos=t,this.regexp_eatLoneUnicodePropertyNameOrValue(e)){var a=e.lastStringValue;return this.regexp_validateUnicodePropertyNameOrValue(e,a),!0}return!1};Qt.regexp_validateUnicodePropertyNameAndValue=function(e,t,n){gy(e.unicodeProperties.nonBinary,t)||e.raise("Invalid property name"),e.unicodeProperties.nonBinary[t].test(n)||e.raise("Invalid property value")};Qt.regexp_validateUnicodePropertyNameOrValue=function(e,t){e.unicodeProperties.binary.test(t)||e.raise("Invalid property name")};Qt.regexp_eatUnicodePropertyName=function(e){var t=0;for(e.lastStringValue="";MB(t=e.current());)e.lastStringValue+=cb(t),e.advance();return e.lastStringValue!==""};function MB(e){return OB(e)||e===95}Qt.regexp_eatUnicodePropertyValue=function(e){var t=0;for(e.lastStringValue="";R1e(t=e.current());)e.lastStringValue+=cb(t),e.advance();return e.lastStringValue!==""};function R1e(e){return MB(e)||_y(e)}Qt.regexp_eatLoneUnicodePropertyNameOrValue=function(e){return this.regexp_eatUnicodePropertyValue(e)};Qt.regexp_eatCharacterClass=function(e){if(e.eat(91)){if(e.eat(94),this.regexp_classRanges(e),e.eat(93))return!0;e.raise("Unterminated character class")}return!1};Qt.regexp_classRanges=function(e){for(;this.regexp_eatClassAtom(e);){var t=e.lastIntValue;if(e.eat(45)&&this.regexp_eatClassAtom(e)){var n=e.lastIntValue;e.switchU&&(t===-1||n===-1)&&e.raise("Invalid character class"),t!==-1&&n!==-1&&t>n&&e.raise("Range out of order in character class")}}};Qt.regexp_eatClassAtom=function(e){var t=e.pos;if(e.eat(92)){if(this.regexp_eatClassEscape(e))return!0;if(e.switchU){var n=e.current();(n===99||IB(n))&&e.raise("Invalid class escape"),e.raise("Invalid escape")}e.pos=t}var r=e.current();return r!==93?(e.lastIntValue=r,e.advance(),!0):!1};Qt.regexp_eatClassEscape=function(e){var t=e.pos;if(e.eat(98))return e.lastIntValue=8,!0;if(e.switchU&&e.eat(45))return e.lastIntValue=45,!0;if(!e.switchU&&e.eat(99)){if(this.regexp_eatClassControlLetter(e))return!0;e.pos=t}return this.regexp_eatCharacterClassEscape(e)||this.regexp_eatCharacterEscape(e)};Qt.regexp_eatClassControlLetter=function(e){var t=e.current();return _y(t)||t===95?(e.lastIntValue=t%32,e.advance(),!0):!1};Qt.regexp_eatHexEscapeSequence=function(e){var t=e.pos;if(e.eat(120)){if(this.regexp_eatFixedHexDigits(e,2))return!0;e.switchU&&e.raise("Invalid escape"),e.pos=t}return!1};Qt.regexp_eatDecimalDigits=function(e){var t=e.pos,n=0;for(e.lastIntValue=0;_y(n=e.current());)e.lastIntValue=10*e.lastIntValue+(n-48),e.advance();return e.pos!==t};function _y(e){return e>=48&&e<=57}Qt.regexp_eatHexDigits=function(e){var t=e.pos,n=0;for(e.lastIntValue=0;RB(n=e.current());)e.lastIntValue=16*e.lastIntValue+PB(n),e.advance();return e.pos!==t};function RB(e){return e>=48&&e<=57||e>=65&&e<=70||e>=97&&e<=102}function PB(e){return e>=65&&e<=70?10+(e-65):e>=97&&e<=102?10+(e-97):e-48}Qt.regexp_eatLegacyOctalEscapeSequence=function(e){if(this.regexp_eatOctalDigit(e)){var t=e.lastIntValue;if(this.regexp_eatOctalDigit(e)){var n=e.lastIntValue;t<=3&&this.regexp_eatOctalDigit(e)?e.lastIntValue=t*64+n*8+e.lastIntValue:e.lastIntValue=t*8+n}else e.lastIntValue=t;return!0}return!1};Qt.regexp_eatOctalDigit=function(e){var t=e.current();return IB(t)?(e.lastIntValue=t-48,e.advance(),!0):(e.lastIntValue=0,!1)};function IB(e){return e>=48&&e<=55}Qt.regexp_eatFixedHexDigits=function(e,t){var n=e.pos;e.lastIntValue=0;for(var r=0;r<t;++r){var a=e.current();if(!RB(a))return e.pos=n,!1;e.lastIntValue=16*e.lastIntValue+PB(a),e.advance()}return!0};var g3=function(t){this.type=t.type,this.value=t.value,this.start=t.start,this.end=t.end,t.options.locations&&(this.loc=new vy(t,t.startLoc,t.endLoc)),t.options.ranges&&(this.range=[t.start,t.end])},Rn=ra.prototype;Rn.next=function(e){!e&&this.type.keyword&&this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword "+this.type.keyword),this.options.onToken&&this.options.onToken(new g3(this)),this.lastTokEnd=this.end,this.lastTokStart=this.start,this.lastTokEndLoc=this.endLoc,this.lastTokStartLoc=this.startLoc,this.nextToken()};Rn.getToken=function(){return this.next(),new g3(this)};typeof Symbol!="undefined"&&(Rn[Symbol.iterator]=function(){var e=this;return{next:function(){var t=e.getToken();return{done:t.type===z.eof,value:t}}}});Rn.curContext=function(){return this.context[this.context.length-1]};Rn.nextToken=function(){var e=this.curContext();if((!e||!e.preserveSpace)&&this.skipSpace(),this.start=this.pos,this.options.locations&&(this.startLoc=this.curPosition()),this.pos>=this.input.length)return this.finishToken(z.eof);if(e.override)return e.override(this);this.readToken(this.fullCharCodeAtPos())};Rn.readToken=function(e){return xu(e,this.options.ecmaVersion>=6)||e===92?this.readWord():this.getTokenFromCode(e)};Rn.fullCharCodeAtPos=function(){var e=this.input.charCodeAt(this.pos);if(e<=55295||e>=57344)return e;var t=this.input.charCodeAt(this.pos+1);return(e<<10)+t-56613888};Rn.skipBlockComment=function(){var e=this.options.onComment&&this.curPosition(),t=this.pos,n=this.input.indexOf("*/",this.pos+=2);if(n===-1&&this.raise(this.pos-2,"Unterminated comment"),this.pos=n+2,this.options.locations){xm.lastIndex=t;for(var r;(r=xm.exec(this.input))&&r.index<this.pos;)++this.curLine,this.lineStart=r.index+r[0].length}this.options.onComment&&this.options.onComment(!0,this.input.slice(t+2,n),t,this.pos,e,this.curPosition())};Rn.skipLineComment=function(e){for(var t=this.pos,n=this.options.onComment&&this.curPosition(),r=this.input.charCodeAt(this.pos+=e);this.pos<this.input.length&&!Ym(r);)r=this.input.charCodeAt(++this.pos);this.options.onComment&&this.options.onComment(!1,this.input.slice(t+e,this.pos),t,this.pos,n,this.curPosition())};Rn.skipSpace=function(){e:for(;this.pos<this.input.length;){var e=this.input.charCodeAt(this.pos);switch(e){case 32:case 160:++this.pos;break;case 13:this.input.charCodeAt(this.pos+1)===10&&++this.pos;case 10:case 8232:case 8233:++this.pos,this.options.locations&&(++this.curLine,this.lineStart=this.pos);break;case 47:switch(this.input.charCodeAt(this.pos+1)){case 42:this.skipBlockComment();break;case 47:this.skipLineComment(2);break;default:break e}break;default:if(e>8&&e<14||e>=5760&&uB.test(String.fromCharCode(e)))++this.pos;else break e}}};Rn.finishToken=function(e,t){this.end=this.pos,this.options.locations&&(this.endLoc=this.curPosition());var n=this.type;this.type=e,this.value=t,this.updateContext(n)};Rn.readToken_dot=function(){var e=this.input.charCodeAt(this.pos+1);if(e>=48&&e<=57)return this.readNumber(!0);var t=this.input.charCodeAt(this.pos+2);return this.options.ecmaVersion>=6&&e===46&&t===46?(this.pos+=3,this.finishToken(z.ellipsis)):(++this.pos,this.finishToken(z.dot))};Rn.readToken_slash=function(){var e=this.input.charCodeAt(this.pos+1);return this.exprAllowed?(++this.pos,this.readRegexp()):e===61?this.finishOp(z.assign,2):this.finishOp(z.slash,1)};Rn.readToken_mult_modulo_exp=function(e){var t=this.input.charCodeAt(this.pos+1),n=1,r=e===42?z.star:z.modulo;return this.options.ecmaVersion>=7&&e===42&&t===42&&(++n,r=z.starstar,t=this.input.charCodeAt(this.pos+2)),t===61?this.finishOp(z.assign,n+1):this.finishOp(r,n)};Rn.readToken_pipe_amp=function(e){var t=this.input.charCodeAt(this.pos+1);if(t===e){if(this.options.ecmaVersion>=12){var n=this.input.charCodeAt(this.pos+2);if(n===61)return this.finishOp(z.assign,3)}return this.finishOp(e===124?z.logicalOR:z.logicalAND,2)}return t===61?this.finishOp(z.assign,2):this.finishOp(e===124?z.bitwiseOR:z.bitwiseAND,1)};Rn.readToken_caret=function(){var e=this.input.charCodeAt(this.pos+1);return e===61?this.finishOp(z.assign,2):this.finishOp(z.bitwiseXOR,1)};Rn.readToken_plus_min=function(e){var t=this.input.charCodeAt(this.pos+1);return t===e?t===45&&!this.inModule&&this.input.charCodeAt(this.pos+2)===62&&(this.lastTokEnd===0||Co.test(this.input.slice(this.lastTokEnd,this.pos)))?(this.skipLineComment(3),this.skipSpace(),this.nextToken()):this.finishOp(z.incDec,2):t===61?this.finishOp(z.assign,2):this.finishOp(z.plusMin,1)};Rn.readToken_lt_gt=function(e){var t=this.input.charCodeAt(this.pos+1),n=1;return t===e?(n=e===62&&this.input.charCodeAt(this.pos+2)===62?3:2,this.input.charCodeAt(this.pos+n)===61?this.finishOp(z.assign,n+1):this.finishOp(z.bitShift,n)):t===33&&e===60&&!this.inModule&&this.input.charCodeAt(this.pos+2)===45&&this.input.charCodeAt(this.pos+3)===45?(this.skipLineComment(4),this.skipSpace(),this.nextToken()):(t===61&&(n=2),this.finishOp(z.relational,n))};Rn.readToken_eq_excl=function(e){var t=this.input.charCodeAt(this.pos+1);return t===61?this.finishOp(z.equality,this.input.charCodeAt(this.pos+2)===61?3:2):e===61&&t===62&&this.options.ecmaVersion>=6?(this.pos+=2,this.finishToken(z.arrow)):this.finishOp(e===61?z.eq:z.prefix,1)};Rn.readToken_question=function(){var e=this.options.ecmaVersion;if(e>=11){var t=this.input.charCodeAt(this.pos+1);if(t===46){var n=this.input.charCodeAt(this.pos+2);if(n<48||n>57)return this.finishOp(z.questionDot,2)}if(t===63){if(e>=12){var r=this.input.charCodeAt(this.pos+2);if(r===61)return this.finishOp(z.assign,3)}return this.finishOp(z.coalesce,2)}}return this.finishOp(z.question,1)};Rn.getTokenFromCode=function(e){switch(e){case 46:return this.readToken_dot();case 40:return++this.pos,this.finishToken(z.parenL);case 41:return++this.pos,this.finishToken(z.parenR);case 59:return++this.pos,this.finishToken(z.semi);case 44:return++this.pos,this.finishToken(z.comma);case 91:return++this.pos,this.finishToken(z.bracketL);case 93:return++this.pos,this.finishToken(z.bracketR);case 123:return++this.pos,this.finishToken(z.braceL);case 125:return++this.pos,this.finishToken(z.braceR);case 58:return++this.pos,this.finishToken(z.colon);case 96:if(this.options.ecmaVersion<6)break;return++this.pos,this.finishToken(z.backQuote);case 48:var t=this.input.charCodeAt(this.pos+1);if(t===120||t===88)return this.readRadixNumber(16);if(this.options.ecmaVersion>=6){if(t===111||t===79)return this.readRadixNumber(8);if(t===98||t===66)return this.readRadixNumber(2)}case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.readNumber(!1);case 34:case 39:return this.readString(e);case 47:return this.readToken_slash();case 37:case 42:return this.readToken_mult_modulo_exp(e);case 124:case 38:return this.readToken_pipe_amp(e);case 94:return this.readToken_caret();case 43:case 45:return this.readToken_plus_min(e);case 60:case 62:return this.readToken_lt_gt(e);case 61:case 33:return this.readToken_eq_excl(e);case 63:return this.readToken_question();case 126:return this.finishOp(z.prefix,1)}this.raise(this.pos,"Unexpected character '"+v3(e)+"'")};Rn.finishOp=function(e,t){var n=this.input.slice(this.pos,this.pos+t);return this.pos+=t,this.finishToken(e,n)};Rn.readRegexp=function(){for(var e,t,n=this.pos;;){this.pos>=this.input.length&&this.raise(n,"Unterminated regular expression");var r=this.input.charAt(this.pos);if(Co.test(r)&&this.raise(n,"Unterminated regular expression"),e)e=!1;else{if(r==="[")t=!0;else if(r==="]"&&t)t=!1;else if(r==="/"&&!t)break;e=r==="\\"}++this.pos}var a=this.input.slice(n,this.pos);++this.pos;var i=this.pos,o=this.readWord1();this.containsEsc&&this.unexpected(i);var s=this.regexpState||(this.regexpState=new bl(this));s.reset(n,a,o),this.validateRegExpFlags(s),this.validateRegExpPattern(s);var l=null;try{l=new RegExp(a,o)}catch{}return this.finishToken(z.regexp,{pattern:a,flags:o,value:l})};Rn.readInt=function(e,t,n){for(var r=this.options.ecmaVersion>=12&&t===void 0,a=n&&this.input.charCodeAt(this.pos)===48,i=this.pos,o=0,s=0,l=0,u=t==null?1/0:t;l<u;++l,++this.pos){var c=this.input.charCodeAt(this.pos),f=void 0;if(r&&c===95){a&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed in legacy octal numeric literals"),s===95&&this.raiseRecoverable(this.pos,"Numeric separator must be exactly one underscore"),l===0&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed at the first of digits"),s=c;continue}if(c>=97?f=c-97+10:c>=65?f=c-65+10:c>=48&&c<=57?f=c-48:f=1/0,f>=e)break;s=c,o=o*e+f}return r&&s===95&&this.raiseRecoverable(this.pos-1,"Numeric separator is not allowed at the last of digits"),this.pos===i||t!=null&&this.pos-i!==t?null:o};function P1e(e,t){return t?parseInt(e,8):parseFloat(e.replace(/_/g,""))}function LB(e){return typeof BigInt!="function"?null:BigInt(e.replace(/_/g,""))}Rn.readRadixNumber=function(e){var t=this.pos;this.pos+=2;var n=this.readInt(e);return n==null&&this.raise(this.start+2,"Expected number in radix "+e),this.options.ecmaVersion>=11&&this.input.charCodeAt(this.pos)===110?(n=LB(this.input.slice(t,this.pos)),++this.pos):xu(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(z.num,n)};Rn.readNumber=function(e){var t=this.pos;!e&&this.readInt(10,void 0,!0)===null&&this.raise(t,"Invalid number");var n=this.pos-t>=2&&this.input.charCodeAt(t)===48;n&&this.strict&&this.raise(t,"Invalid number");var r=this.input.charCodeAt(this.pos);if(!n&&!e&&this.options.ecmaVersion>=11&&r===110){var a=LB(this.input.slice(t,this.pos));return++this.pos,xu(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(z.num,a)}n&&/[89]/.test(this.input.slice(t,this.pos))&&(n=!1),r===46&&!n&&(++this.pos,this.readInt(10),r=this.input.charCodeAt(this.pos)),(r===69||r===101)&&!n&&(r=this.input.charCodeAt(++this.pos),(r===43||r===45)&&++this.pos,this.readInt(10)===null&&this.raise(t,"Invalid number")),xu(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number");var i=P1e(this.input.slice(t,this.pos),n);return this.finishToken(z.num,i)};Rn.readCodePoint=function(){var e=this.input.charCodeAt(this.pos),t;if(e===123){this.options.ecmaVersion<6&&this.unexpected();var n=++this.pos;t=this.readHexChar(this.input.indexOf("}",this.pos)-this.pos),++this.pos,t>1114111&&this.invalidStringToken(n,"Code point out of bounds")}else t=this.readHexChar(4);return t};function v3(e){return e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode((e>>10)+55296,(e&1023)+56320))}Rn.readString=function(e){for(var t="",n=++this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated string constant");var r=this.input.charCodeAt(this.pos);if(r===e)break;r===92?(t+=this.input.slice(n,this.pos),t+=this.readEscapedChar(!1),n=this.pos):(Ym(r,this.options.ecmaVersion>=10)&&this.raise(this.start,"Unterminated string constant"),++this.pos)}return t+=this.input.slice(n,this.pos++),this.finishToken(z.string,t)};var NB={};Rn.tryReadTemplateToken=function(){this.inTemplateElement=!0;try{this.readTmplToken()}catch(e){if(e===NB)this.readInvalidTemplateToken();else throw e}this.inTemplateElement=!1};Rn.invalidStringToken=function(e,t){if(this.inTemplateElement&&this.options.ecmaVersion>=9)throw NB;this.raise(e,t)};Rn.readTmplToken=function(){for(var e="",t=this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated template");var n=this.input.charCodeAt(this.pos);if(n===96||n===36&&this.input.charCodeAt(this.pos+1)===123)return this.pos===this.start&&(this.type===z.template||this.type===z.invalidTemplate)?n===36?(this.pos+=2,this.finishToken(z.dollarBraceL)):(++this.pos,this.finishToken(z.backQuote)):(e+=this.input.slice(t,this.pos),this.finishToken(z.template,e));if(n===92)e+=this.input.slice(t,this.pos),e+=this.readEscapedChar(!0),t=this.pos;else if(Ym(n)){switch(e+=this.input.slice(t,this.pos),++this.pos,n){case 13:this.input.charCodeAt(this.pos)===10&&++this.pos;case 10:e+=`
`;break;default:e+=String.fromCharCode(n);break}this.options.locations&&(++this.curLine,this.lineStart=this.pos),t=this.pos}else++this.pos}};Rn.readInvalidTemplateToken=function(){for(;this.pos<this.input.length;this.pos++)switch(this.input[this.pos]){case"\\":++this.pos;break;case"$":if(this.input[this.pos+1]!=="{")break;case"`":return this.finishToken(z.invalidTemplate,this.input.slice(this.start,this.pos))}this.raise(this.start,"Unterminated template")};Rn.readEscapedChar=function(e){var t=this.input.charCodeAt(++this.pos);switch(++this.pos,t){case 110:return`
`;case 114:return"\r";case 120:return String.fromCharCode(this.readHexChar(2));case 117:return v3(this.readCodePoint());case 116:return"	";case 98:return"\b";case 118:return"\v";case 102:return"\f";case 13:this.input.charCodeAt(this.pos)===10&&++this.pos;case 10:return this.options.locations&&(this.lineStart=this.pos,++this.curLine),"";case 56:case 57:if(e){var n=this.pos-1;return this.invalidStringToken(n,"Invalid escape sequence in template string"),null}default:if(t>=48&&t<=55){var r=this.input.substr(this.pos-1,3).match(/^[0-7]+/)[0],a=parseInt(r,8);return a>255&&(r=r.slice(0,-1),a=parseInt(r,8)),this.pos+=r.length-1,t=this.input.charCodeAt(this.pos),(r!=="0"||t===56||t===57)&&(this.strict||e)&&this.invalidStringToken(this.pos-1-r.length,e?"Octal literal in template string":"Octal literal in strict mode"),String.fromCharCode(a)}return Ym(t)?"":String.fromCharCode(t)}};Rn.readHexChar=function(e){var t=this.pos,n=this.readInt(16,e);return n===null&&this.invalidStringToken(t,"Bad character escape sequence"),n};Rn.readWord1=function(){this.containsEsc=!1;for(var e="",t=!0,n=this.pos,r=this.options.ecmaVersion>=6;this.pos<this.input.length;){var a=this.fullCharCodeAtPos();if(Cd(a,r))this.pos+=a<=65535?1:2;else if(a===92){this.containsEsc=!0,e+=this.input.slice(n,this.pos);var i=this.pos;this.input.charCodeAt(++this.pos)!==117&&this.invalidStringToken(this.pos,"Expecting Unicode escape sequence \\uXXXX"),++this.pos;var o=this.readCodePoint();(t?xu:Cd)(o,r)||this.invalidStringToken(i,"Invalid Unicode escape"),e+=v3(o),n=this.pos}else break;t=!1}return e+this.input.slice(n,this.pos)};Rn.readWord=function(){var e=this.readWord1(),t=z.name;return this.keywords.test(e)&&(t=u3[e]),this.finishToken(t,e)};var I1e="7.4.1";ra.acorn={Parser:ra,version:I1e,defaultOptions:Ak,Position:_m,SourceLocation:vy,getLineInfo:fB,Node:h3,TokenType:Vn,tokTypes:z,keywordTypes:u3,TokContext:Fo,tokContexts:qr,isIdentifierChar:Cd,isIdentifierStart:xu,Token:g3,isNewLine:Ym,lineBreak:Co,lineBreakG:xm,nonASCIIwhitespace:uB};function L1e(e,t){return ra.parse(e,t)}function Lc(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}function Td(e){var t=typeof Map=="function"?new Map:void 0;return Td=function(r){if(r===null||!F1e(r))return r;if(typeof r!="function")throw new TypeError("Super expression must either be null or a function");if(typeof t!="undefined"){if(t.has(r))return t.get(r);t.set(r,a)}function a(){return tv(r,arguments,Mk(this).constructor)}return a.prototype=Object.create(r.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),fb(a,r)},Td(e)}function N1e(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function tv(e,t,n){return N1e()?tv=Reflect.construct:tv=function(a,i,o){var s=[null];s.push.apply(s,i);var l=Function.bind.apply(a,s),u=new l;return o&&fb(u,o.prototype),u},tv.apply(null,arguments)}function F1e(e){return Function.toString.call(e).indexOf("[native code]")!==-1}function fb(e,t){return fb=Object.setPrototypeOf||function(r,a){return r.__proto__=a,r},fb(e,t)}function Mk(e){return Mk=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},Mk(e)}var D1e=function(e){Lc(t,e);function t(){return e.apply(this,arguments)||this}return t}(Td(Error)),B1e=function(e){Lc(t,e);function t(){return e.apply(this,arguments)||this}return t}(Td(SyntaxError)),Rk=function(e){Lc(t,e);function t(){return e.apply(this,arguments)||this}return t}(Td(ReferenceError)),z1e=function(e){Lc(t,e);function t(){return e.apply(this,arguments)||this}return t}(Td(TypeError)),Pk=function(e){Lc(t,e);function t(){return e.apply(this,arguments)||this}return t}(D1e),U1e=function(e){Lc(t,e);function t(){return e.apply(this,arguments)||this}return t}(B1e),Do=function(e){Lc(t,e);function t(){return e.apply(this,arguments)||this}return t}(Rk),Ha={UnknownError:[3001,"%0",Pk],ExecutionTimeOutError:[3002,"Script execution timed out after %0ms",Pk],NodeTypeSyntaxError:[1001,"Unknown node type: %0",Do],BinaryOperatorSyntaxError:[1002,"Unknown binary operator: %0",Do],LogicalOperatorSyntaxError:[1003,"Unknown logical operator: %0",Do],UnaryOperatorSyntaxError:[1004,"Unknown unary operator: %0",Do],UpdateOperatorSyntaxError:[1005,"Unknown update operator: %0",Do],ObjectStructureSyntaxError:[1006,"Unknown object structure: %0",Do],AssignmentExpressionSyntaxError:[1007,"Unknown assignment expression: %0",Do],VariableTypeSyntaxError:[1008,"Unknown variable type: %0",Do],ParamTypeSyntaxError:[1009,"Unknown param type: %0",Do],AssignmentTypeSyntaxError:[1010,"Unknown assignment type: %0",Do],FunctionUndefinedReferenceError:[2001,"%0 is not a function",Rk],VariableUndefinedReferenceError:[2002,"%0 is not defined",Rk],IsNotConstructor:[2003,"%0 is not a constructor",z1e]};function $1e(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function nv(e,t,n){return $1e()?nv=Reflect.construct:nv=function(a,i,o){var s=[null];s.push.apply(s,i);var l=Function.bind.apply(a,s),u=new l;return o&&Ik(u,o.prototype),u},nv.apply(null,arguments)}function Ik(e,t){return Ik=Object.setPrototypeOf||function(r,a){return r.__proto__=a,r},Ik(e,t)}var V1e="0.0.3";function h8(e,t){Object.defineProperty(e,"name",{value:t,writable:!1,enumerable:!1,configurable:!0})}var j1e=Object.prototype.hasOwnProperty,Gu=Symbol("Break"),Hu=Symbol("Continue"),m8=Symbol("DefaultCase"),xa=Symbol("EmptyStatementReturn"),g8=Symbol("WithScopeName"),v8=Symbol("SuperScopeName"),b8=Symbol("RootScopeName"),y8=Symbol("GlobalScopeName");function y_(e){return typeof e=="function"}var $l=function(){function e(n){this.interpreter=n}var t=e.prototype;return t.generator=function(){var r=this.interpreter;function a(){return this.getCurrentScope()}function i(){return this.getGlobalScope()}function o(){return this.getCurrentContext()}return{getOptions:r.getOptions.bind(r),getCurrentScope:a.bind(r),getGlobalScope:i.bind(r),getCurrentContext:o.bind(r),getExecStartTime:r.getExecStartTime.bind(r)}},e}();function b3(e,t,n){if(n===void 0&&(n=!0),!(e instanceof $l))throw new Error("Illegal call");if(typeof t!="string")return t;if(!!t){var r=e.generator(),a=r.getOptions(),i={timeout:a.timeout,_initEnv:function(){n||this.setCurrentContext(r.getCurrentContext()),this.execStartTime=r.getExecStartTime(),this.execEndTime=this.execStartTime}},o=n?r.getGlobalScope():r.getCurrentScope(),s=new ts(o,i);return s.evaluate(t)}}Object.defineProperty(b3,"__IS_EVAL_FUNC",{value:!0,writable:!1,enumerable:!1,configurable:!1});function y3(e){if(!(e instanceof $l))throw new Error("Illegal call");for(var t=e.generator(),n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];var i=r.pop(),o=new ts(t.getGlobalScope(),t.getOptions()),s=`
		    (function anonymous(`+r.join(",")+`){
		        `+i+`
		    });
		    `;return o.evaluate(s)}Object.defineProperty(y3,"__IS_FUNCTION_FUNC",{value:!0,writable:!1,enumerable:!1,configurable:!1});var ls=function(t){this.value=t},Wu=function(t){this.value=t},Nl=function(t){this.value=t},kf=function(t,n,r){n===void 0&&(n=null),this.name=r,this.parent=n,this.data=t,this.labelStack=[]};function vg(){}function G1e(e,t){return e===void 0&&(e=null),new kf(Object.create(null),e,t)}function H1e(e){return Object.create(e)}var Rs={NaN:NaN,Infinity:1/0,undefined:void 0,Object,Array,String,Boolean,Number,Date,RegExp,Error,URIError,TypeError,RangeError,SyntaxError,ReferenceError,Float32Array,Float64Array,Uint32Array,Math,parseInt,parseFloat,isNaN,isFinite,decodeURI,decodeURIComponent,encodeURI,encodeURIComponent,escape,unescape,eval:b3,Function:y3};typeof JSON!="undefined"&&(Rs.JSON=JSON);typeof Promise!="undefined"&&(Rs.Promise=Promise);typeof Set!="undefined"&&(Rs.Set=Set);typeof Map!="undefined"&&(Rs.Map=Map);typeof Symbol!="undefined"&&(Rs.Symbol=Symbol);typeof Proxy!="undefined"&&(Rs.Proxy=Proxy);typeof WeakMap!="undefined"&&(Rs.WeakMap=WeakMap);typeof WeakSet!="undefined"&&(Rs.WeakSet=WeakSet);typeof Reflect!="undefined"&&(Rs.Reflect=Reflect);var ts=function(){function e(n,r){n===void 0&&(n=e.global),r===void 0&&(r={}),this.sourceList=[],this.collectDeclVars=Object.create(null),this.collectDeclFuncs=Object.create(null),this.isVarDeclMode=!1,this.lastExecNode=null,this.isRunning=!1,this.options={ecmaVersion:r.ecmaVersion||e.ecmaVersion,timeout:r.timeout||0,rootContext:r.rootContext,globalContextInFunction:r.globalContextInFunction===void 0?e.globalContextInFunction:r.globalContextInFunction,_initEnv:r._initEnv},this.context=n||Object.create(null),this.callStack=[],this.initEnvironment(this.context)}var t=e.prototype;return t.initEnvironment=function(r){var a;if(r instanceof kf)a=r;else{var i=null,o=this.createSuperScope(r);this.options.rootContext&&(i=new kf(H1e(this.options.rootContext),o,b8)),a=new kf(r,i||o,y8)}this.globalScope=a,this.currentScope=this.globalScope,this.globalContext=a.data,this.currentContext=a.data,this.collectDeclVars=Object.create(null),this.collectDeclFuncs=Object.create(null),this.execStartTime=Date.now(),this.execEndTime=this.execStartTime;var s=this.options._initEnv;s&&s.call(this)},t.getExecStartTime=function(){return this.execStartTime},t.getExecutionTime=function(){return this.execEndTime-this.execStartTime},t.setExecTimeout=function(r){r===void 0&&(r=0),this.options.timeout=r},t.getOptions=function(){return this.options},t.getGlobalScope=function(){return this.globalScope},t.getCurrentScope=function(){return this.currentScope},t.getCurrentContext=function(){return this.currentContext},t.isInterruptThrow=function(r){return r instanceof Pk||r instanceof Do||r instanceof U1e},t.createSuperScope=function(r){var a=Object.assign({},Rs),i=Object.keys(a);return i.forEach(function(o){o in r&&delete a[o]}),new kf(a,null,v8)},t.setCurrentContext=function(r){this.currentContext=r},t.setCurrentScope=function(r){this.currentScope=r},t.evaluate=function(r){r===void 0&&(r="");var a;if(!!r)return a=L1e(r,{ranges:!0,locations:!0,ecmaVersion:this.options.ecmaVersion||e.ecmaVersion}),this.evaluateNode(a,r)},t.appendCode=function(r){return this.evaluate(r)},t.evaluateNode=function(r,a){var i=this;a===void 0&&(a=""),this.value=void 0,this.source=a,this.sourceList.push(a),this.isRunning=!0,this.execStartTime=Date.now(),this.execEndTime=this.execStartTime,this.collectDeclVars=Object.create(null),this.collectDeclFuncs=Object.create(null);var o=this.getCurrentScope(),s=this.getCurrentContext(),l=o.labelStack.concat([]),u=this.callStack.concat([]),c=function(){i.setCurrentScope(o),i.setCurrentContext(s),o.labelStack=l,i.callStack=u};try{var f=this.createClosure(r);this.addDeclarationsToScope(this.collectDeclVars,this.collectDeclFuncs,this.getCurrentScope()),f()}catch(d){throw d}finally{c(),this.execEndTime=Date.now()}return this.isRunning=!1,this.getValue()},t.createErrorMessage=function(r,a,i){var o=r[1].replace("%0",String(a));return i!==null&&(o+=this.getNodePosition(i||this.lastExecNode)),o},t.createError=function(r,a){return new a(r)},t.createThrowError=function(r,a){return this.createError(r,a)},t.createInternalThrowError=function(r,a,i){return this.createError(this.createErrorMessage(r,a,i),r[2])},t.checkTimeout=function(){if(!this.isRunning)return!1;var r=this.options.timeout||0,a=Date.now();return a-this.execStartTime>r},t.getNodePosition=function(r){if(r){var a="";return r.loc?" ["+r.loc.start.line+":"+r.loc.start.column+"]"+a:""}return""},t.createClosure=function(r){var a=this,i;switch(r.type){case"BinaryExpression":i=this.binaryExpressionHandler(r);break;case"LogicalExpression":i=this.logicalExpressionHandler(r);break;case"UnaryExpression":i=this.unaryExpressionHandler(r);break;case"UpdateExpression":i=this.updateExpressionHandler(r);break;case"ObjectExpression":i=this.objectExpressionHandler(r);break;case"ArrayExpression":i=this.arrayExpressionHandler(r);break;case"CallExpression":i=this.callExpressionHandler(r);break;case"NewExpression":i=this.newExpressionHandler(r);break;case"MemberExpression":i=this.memberExpressionHandler(r);break;case"ThisExpression":i=this.thisExpressionHandler(r);break;case"SequenceExpression":i=this.sequenceExpressionHandler(r);break;case"Literal":i=this.literalHandler(r);break;case"Identifier":i=this.identifierHandler(r);break;case"AssignmentExpression":i=this.assignmentExpressionHandler(r);break;case"FunctionDeclaration":i=this.functionDeclarationHandler(r);break;case"VariableDeclaration":i=this.variableDeclarationHandler(r);break;case"BlockStatement":case"Program":i=this.programHandler(r);break;case"ExpressionStatement":i=this.expressionStatementHandler(r);break;case"EmptyStatement":i=this.emptyStatementHandler(r);break;case"ReturnStatement":i=this.returnStatementHandler(r);break;case"FunctionExpression":i=this.functionExpressionHandler(r);break;case"IfStatement":i=this.ifStatementHandler(r);break;case"ConditionalExpression":i=this.conditionalExpressionHandler(r);break;case"ForStatement":i=this.forStatementHandler(r);break;case"WhileStatement":i=this.whileStatementHandler(r);break;case"DoWhileStatement":i=this.doWhileStatementHandler(r);break;case"ForInStatement":i=this.forInStatementHandler(r);break;case"WithStatement":i=this.withStatementHandler(r);break;case"ThrowStatement":i=this.throwStatementHandler(r);break;case"TryStatement":i=this.tryStatementHandler(r);break;case"ContinueStatement":i=this.continueStatementHandler(r);break;case"BreakStatement":i=this.breakStatementHandler(r);break;case"SwitchStatement":i=this.switchStatementHandler(r);break;case"LabeledStatement":i=this.labeledStatementHandler(r);break;case"DebuggerStatement":i=this.debuggerStatementHandler(r);break;default:throw this.createInternalThrowError(Ha.NodeTypeSyntaxError,r.type,r)}return function(){var o=a.options.timeout;if(o&&o>0&&a.checkTimeout())throw a.createInternalThrowError(Ha.ExecutionTimeOutError,o,null);return a.lastExecNode=r,i.apply(void 0,arguments)}},t.binaryExpressionHandler=function(r){var a=this,i=this.createClosure(r.left),o=this.createClosure(r.right);return function(){var s=i(),l=o();switch(r.operator){case"==":return s==l;case"!=":return s!=l;case"===":return s===l;case"!==":return s!==l;case"<":return s<l;case"<=":return s<=l;case">":return s>l;case">=":return s>=l;case"<<":return s<<l;case">>":return s>>l;case">>>":return s>>>l;case"+":return s+l;case"-":return s-l;case"*":return s*l;case"**":return Math.pow(s,l);case"/":return s/l;case"%":return s%l;case"|":return s|l;case"^":return s^l;case"&":return s&l;case"in":return s in l;case"instanceof":return s instanceof l;default:throw a.createInternalThrowError(Ha.BinaryOperatorSyntaxError,r.operator,r)}}},t.logicalExpressionHandler=function(r){var a=this,i=this.createClosure(r.left),o=this.createClosure(r.right);return function(){switch(r.operator){case"||":return i()||o();case"&&":return i()&&o();default:throw a.createInternalThrowError(Ha.LogicalOperatorSyntaxError,r.operator,r)}}},t.unaryExpressionHandler=function(r){var a=this;switch(r.operator){case"delete":var i=this.createObjectGetter(r.argument),o=this.createNameGetter(r.argument);return function(){var c=i(),f=o();return delete c[f]};default:var s;if(r.operator==="typeof"&&r.argument.type==="Identifier"){var l=this.createObjectGetter(r.argument),u=this.createNameGetter(r.argument);s=function(){return l()[u()]}}else s=this.createClosure(r.argument);return function(){var c=s();switch(r.operator){case"-":return-c;case"+":return+c;case"!":return!c;case"~":return~c;case"void":return;case"typeof":return typeof c;default:throw a.createInternalThrowError(Ha.UnaryOperatorSyntaxError,r.operator,r)}}}},t.updateExpressionHandler=function(r){var a=this,i=this.createObjectGetter(r.argument),o=this.createNameGetter(r.argument);return function(){var s=i(),l=o();switch(a.assertVariable(s,l,r),r.operator){case"++":return r.prefix?++s[l]:s[l]++;case"--":return r.prefix?--s[l]:s[l]--;default:throw a.createInternalThrowError(Ha.UpdateOperatorSyntaxError,r.operator,r)}}},t.objectExpressionHandler=function(r){var a=this,i=[];function o(l){return l.type==="Identifier"?l.name:l.type==="Literal"?l.value:this.throwError(Ha.ObjectStructureSyntaxError,l.type,l)}var s=Object.create(null);return r.properties.forEach(function(l){var u=l.kind,c=o(l.key);(!s[c]||u==="init")&&(s[c]={}),s[c][u]=a.createClosure(l.value),i.push({key:c,property:l})}),function(){for(var l={},u=i.length,c=0;c<u;c++){var f=i[c],d=f.key,p=s[d],h=p.init?p.init():void 0,g=p.get?p.get():function(){},v=p.set?p.set():function(k){};if("set"in p||"get"in p){var b={configurable:!0,enumerable:!0,get:g,set:v};Object.defineProperty(l,d,b)}else{var y=f.property,x=y.kind;y.key.type==="Identifier"&&y.value.type==="FunctionExpression"&&x==="init"&&!y.value.id&&h8(h,y.key.name),l[d]=h}}return l}},t.arrayExpressionHandler=function(r){var a=this,i=r.elements.map(function(o){return o&&a.createClosure(o)});return function(){for(var o=i.length,s=Array(o),l=0;l<o;l++){var u=i[l];u&&(s[l]=u())}return s}},t.safeObjectGet=function(r,a,i){return r[a]},t.createCallFunctionGetter=function(r){var a=this;switch(r.type){case"MemberExpression":var i=this.createClosure(r.object),o=this.createMemberKeyGetter(r),s=this.source;return function(){var u=i(),c=o(),f=a.safeObjectGet(u,c,r);if(!f||!y_(f)){var d=s.slice(r.start,r.end);throw a.createInternalThrowError(Ha.FunctionUndefinedReferenceError,d,r)}return f.__IS_EVAL_FUNC?function(p){return f(new $l(a),p,!0)}:f.__IS_FUNCTION_FUNC?function(){for(var p=arguments.length,h=new Array(p),g=0;g<p;g++)h[g]=arguments[g];return f.apply(void 0,[new $l(a)].concat(h))}:f.bind(u)};default:var l=this.createClosure(r);return function(){var u="";r.type==="Identifier"&&(u=r.name);var c=l();if(!c||!y_(c))throw a.createInternalThrowError(Ha.FunctionUndefinedReferenceError,u,r);if(r.type==="Identifier"&&c.__IS_EVAL_FUNC&&u==="eval")return function(p){var h=a.getScopeFromName(u,a.getCurrentScope()),g=h.name===v8||h.name===y8||h.name===b8;return c(new $l(a),p,!g)};if(c.__IS_EVAL_FUNC)return function(p){return c(new $l(a),p,!0)};if(c.__IS_FUNCTION_FUNC)return function(){for(var p=arguments.length,h=new Array(p),g=0;g<p;g++)h[g]=arguments[g];return c.apply(void 0,[new $l(a)].concat(h))};var f=a.options.globalContextInFunction;if(r.type==="Identifier"){var d=a.getIdentifierScope(r);d.name===g8&&(f=d.data)}return c.bind(f)}}},t.callExpressionHandler=function(r){var a=this,i=this.createCallFunctionGetter(r.callee),o=r.arguments.map(function(s){return a.createClosure(s)});return function(){return i().apply(void 0,o.map(function(s){return s()}))}},t.functionExpressionHandler=function(r){var a=this,i=this,o=this.source,s=this.collectDeclVars,l=this.collectDeclFuncs;this.collectDeclVars=Object.create(null),this.collectDeclFuncs=Object.create(null);var u=r.id?r.id.name:"",c=r.params.length,f=r.params.map(function(g){return a.createParamNameGetter(g)}),d=this.createClosure(r.body),p=this.collectDeclVars,h=this.collectDeclFuncs;return this.collectDeclVars=s,this.collectDeclFuncs=l,function(){var g=i.getCurrentScope(),v=function b(){for(var y=arguments.length,x=new Array(y),k=0;k<y;k++)x[k]=arguments[k];i.callStack.push(""+u);var T=i.getCurrentScope(),C=G1e(g,"FunctionScope("+u+")");i.setCurrentScope(C),i.addDeclarationsToScope(p,h,C),u&&(C.data[u]=b),C.data.arguments=arguments,f.forEach(function(j,A){C.data[j()]=x[A]});var I=i.getCurrentContext();i.setCurrentContext(this);var P=d();if(i.setCurrentContext(I),i.setCurrentScope(T),i.callStack.pop(),P instanceof ls)return P.value};return h8(v,u),Object.defineProperty(v,"length",{value:c,writable:!1,enumerable:!1,configurable:!0}),Object.defineProperty(v,"toString",{value:function(){return o.slice(r.start,r.end)},writable:!0,configurable:!0,enumerable:!1}),Object.defineProperty(v,"valueOf",{value:function(){return o.slice(r.start,r.end)},writable:!0,configurable:!0,enumerable:!1}),v}},t.newExpressionHandler=function(r){var a=this,i=this.source,o=this.createClosure(r.callee),s=r.arguments.map(function(l){return a.createClosure(l)});return function(){var l=o();if(!y_(l)||l.__IS_EVAL_FUNC){var u=r.callee,c=i.slice(u.start,u.end);throw a.createInternalThrowError(Ha.IsNotConstructor,c,r)}return l.__IS_FUNCTION_FUNC?l.apply(void 0,[new $l(a)].concat(s.map(function(f){return f()}))):nv(l,s.map(function(f){return f()}))}},t.memberExpressionHandler=function(r){var a=this.createClosure(r.object),i=this.createMemberKeyGetter(r);return function(){var o=a(),s=i();return o[s]}},t.thisExpressionHandler=function(r){var a=this;return function(){return a.getCurrentContext()}},t.sequenceExpressionHandler=function(r){var a=this,i=r.expressions.map(function(o){return a.createClosure(o)});return function(){for(var o,s=i.length,l=0;l<s;l++){var u=i[l];o=u()}return o}},t.literalHandler=function(r){return function(){return r.regex?new RegExp(r.regex.pattern,r.regex.flags):r.value}},t.identifierHandler=function(r){var a=this;return function(){var i=a.getCurrentScope(),o=a.getScopeDataFromName(r.name,i);return a.assertVariable(o,r.name,r),o[r.name]}},t.getIdentifierScope=function(r){var a=this.getCurrentScope(),i=this.getScopeFromName(r.name,a);return i},t.assignmentExpressionHandler=function(r){var a=this;r.left.type==="Identifier"&&r.right.type==="FunctionExpression"&&!r.right.id&&(r.right.id={type:"Identifier",name:r.left.name});var i=this.createObjectGetter(r.left),o=this.createNameGetter(r.left),s=this.createClosure(r.right);return function(){var l=i(),u=o(),c=s();switch(r.operator!=="="&&a.assertVariable(l,u,r),r.operator){case"=":return l[u]=c;case"+=":return l[u]+=c;case"-=":return l[u]-=c;case"*=":return l[u]*=c;case"**=":return l[u]=Math.pow(l[u],c);case"/=":return l[u]/=c;case"%=":return l[u]%=c;case"<<=":return l[u]<<=c;case">>=":return l[u]>>=c;case">>>=":return l[u]>>>=c;case"&=":return l[u]&=c;case"^=":return l[u]^=c;case"|=":return l[u]|=c;default:throw a.createInternalThrowError(Ha.AssignmentExpressionSyntaxError,r.type,r)}}},t.functionDeclarationHandler=function(r){if(r.id){var a=this.functionExpressionHandler(r);Object.defineProperty(a,"isFunctionDeclareClosure",{value:!0,writable:!1,configurable:!1,enumerable:!1}),this.funcDeclaration(r.id.name,a)}return function(){return xa}},t.getVariableName=function(r){if(r.type==="Identifier")return r.name;throw this.createInternalThrowError(Ha.VariableTypeSyntaxError,r.type,r)},t.variableDeclarationHandler=function(r){for(var a=this,i,o=[],s=0;s<r.declarations.length;s++){var l=r.declarations[s];this.varDeclaration(this.getVariableName(l.id)),l.init&&o.push({type:"AssignmentExpression",operator:"=",left:l.id,right:l.init})}return o.length&&(i=this.createClosure({type:"BlockStatement",body:o})),function(){if(i){var u=a.isVarDeclMode;a.isVarDeclMode=!0,i(),a.isVarDeclMode=u}return xa}},t.assertVariable=function(r,a,i){if(r===this.globalScope.data&&!(a in r))throw this.createInternalThrowError(Ha.VariableUndefinedReferenceError,a,i)},t.programHandler=function(r){var a=this,i=r.body.map(function(o){return a.createClosure(o)});return function(){for(var o=xa,s=0;s<i.length;s++){var l=i[s],u=a.setValue(l());if(u!==xa&&(o=u,o instanceof ls||o instanceof Wu||o instanceof Nl||o===Gu||o===Hu))break}return o}},t.expressionStatementHandler=function(r){return this.createClosure(r.expression)},t.emptyStatementHandler=function(r){return function(){return xa}},t.returnStatementHandler=function(r){var a=r.argument?this.createClosure(r.argument):vg;return function(){return new ls(a())}},t.ifStatementHandler=function(r){var a=this.createClosure(r.test),i=this.createClosure(r.consequent),o=r.alternate?this.createClosure(r.alternate):function(){return xa};return function(){return a()?i():o()}},t.conditionalExpressionHandler=function(r){return this.ifStatementHandler(r)},t.forStatementHandler=function(r){var a=this,i=vg,o=r.test?this.createClosure(r.test):function(){return!0},s=vg,l=this.createClosure(r.body);return r.type==="ForStatement"&&(i=r.init?this.createClosure(r.init):i,s=r.update?this.createClosure(r.update):vg),function(u){var c,f=xa,d=r.type==="DoWhileStatement";for(u&&u.type==="LabeledStatement"&&(c=u.label.name),i();d||o();s()){d=!1;var p=a.setValue(l());if(!(p===xa||p===Hu)){if(p===Gu)break;if(f=p,f instanceof Nl&&f.value===c){f=xa;continue}if(f instanceof ls||f instanceof Wu||f instanceof Nl)break}}return f}},t.whileStatementHandler=function(r){return this.forStatementHandler(r)},t.doWhileStatementHandler=function(r){return this.forStatementHandler(r)},t.forInStatementHandler=function(r){var a=this,i=r.left,o=this.createClosure(r.right),s=this.createClosure(r.body);return r.left.type==="VariableDeclaration"&&(this.createClosure(r.left)(),i=r.left.declarations[0].id),function(l){var u,c=xa,f;l&&l.type==="LabeledStatement"&&(u=l.label.name);var d=o();for(f in d){a.assignmentExpressionHandler({type:"AssignmentExpression",operator:"=",left:i,right:{type:"Literal",value:f}})();var p=a.setValue(s());if(!(p===xa||p===Hu)){if(p===Gu)break;if(c=p,c instanceof Nl&&c.value===u){c=xa;continue}if(c instanceof ls||c instanceof Wu||c instanceof Nl)break}}return c}},t.withStatementHandler=function(r){var a=this,i=this.createClosure(r.object),o=this.createClosure(r.body);return function(){var s=i(),l=a.getCurrentScope(),u=new kf(s,l,g8);a.setCurrentScope(u);var c=a.setValue(o());return a.setCurrentScope(l),c}},t.throwStatementHandler=function(r){var a=this,i=this.createClosure(r.argument);return function(){throw a.setValue(void 0),i()}},t.tryStatementHandler=function(r){var a=this,i=this.createClosure(r.block),o=r.handler?this.catchClauseHandler(r.handler):null,s=r.finalizer?this.createClosure(r.finalizer):null;return function(){var l=a.getCurrentScope(),u=a.getCurrentContext(),c=l.labelStack.concat([]),f=a.callStack.concat([]),d=xa,p,h,g=function(){a.setCurrentScope(l),a.setCurrentContext(u),l.labelStack=c,a.callStack=f};try{d=a.setValue(i()),d instanceof ls&&(p=d)}catch(v){if(g(),a.isInterruptThrow(v))throw v;if(o)try{d=a.setValue(o(v)),d instanceof ls&&(p=d)}catch(b){if(g(),a.isInterruptThrow(b))throw b;h=b}}if(s)try{d=s(),d instanceof ls&&(p=d)}catch(v){if(g(),a.isInterruptThrow(v))throw v;h=v}if(h)throw h;return p||d}},t.catchClauseHandler=function(r){var a=this,i=this.createParamNameGetter(r.param),o=this.createClosure(r.body);return function(s){var l,u=a.getCurrentScope(),c=u.data,f=i(),d=j1e.call(c,f),p=c[f];return c[f]=s,l=o(),d?c[f]=p:delete c[f],l}},t.continueStatementHandler=function(r){return function(){return r.label?new Nl(r.label.name):Hu}},t.breakStatementHandler=function(r){return function(){return r.label?new Wu(r.label.name):Gu}},t.switchStatementHandler=function(r){var a=this,i=this.createClosure(r.discriminant),o=r.cases.map(function(s){return a.switchCaseHandler(s)});return function(){for(var s=i(),l=!1,u,c,f,d=0;d<o.length;d++){var p=o[d](),h=p.testClosure();if(h===m8){f=p;continue}if(l||h===s){if(l=!0,c=a.setValue(p.bodyClosure()),c===xa)continue;if(c===Gu||(u=c,u instanceof ls||u instanceof Wu||u instanceof Nl||u===Hu))break}}if(!l&&f){c=a.setValue(f.bodyClosure());var g=c===xa||c===Gu||c===Hu;g||(u=c)}return u}},t.switchCaseHandler=function(r){var a=r.test?this.createClosure(r.test):function(){return m8},i=this.createClosure({type:"BlockStatement",body:r.consequent});return function(){return{testClosure:a,bodyClosure:i}}},t.labeledStatementHandler=function(r){var a=this,i=r.label.name,o=this.createClosure(r.body);return function(){var s,l=a.getCurrentScope();return l.labelStack.push(i),s=o(r),s instanceof Wu&&s.value===i&&(s=xa),l.labelStack.pop(),s}},t.debuggerStatementHandler=function(r){return function(){debugger;return xa}},t.createParamNameGetter=function(r){if(r.type==="Identifier")return function(){return r.name};throw this.createInternalThrowError(Ha.ParamTypeSyntaxError,r.type,r)},t.createObjectKeyGetter=function(r){var a;return r.type==="Identifier"?a=function(){return r.name}:a=this.createClosure(r),function(){return a()}},t.createMemberKeyGetter=function(r){return r.computed?this.createClosure(r.property):this.createObjectKeyGetter(r.property)},t.createObjectGetter=function(r){var a=this;switch(r.type){case"Identifier":return function(){return a.getScopeDataFromName(r.name,a.getCurrentScope())};case"MemberExpression":return this.createClosure(r.object);default:throw this.createInternalThrowError(Ha.AssignmentTypeSyntaxError,r.type,r)}},t.createNameGetter=function(r){switch(r.type){case"Identifier":return function(){return r.name};case"MemberExpression":return this.createMemberKeyGetter(r);default:throw this.createInternalThrowError(Ha.AssignmentTypeSyntaxError,r.type,r)}},t.varDeclaration=function(r){var a=this.collectDeclVars;a[r]=void 0},t.funcDeclaration=function(r,a){var i=this.collectDeclFuncs;i[r]=a},t.addDeclarationsToScope=function(r,a,i){var o=i.data;for(var s in a){var l=a[s];o[s]=l&&l()}for(var u in r)u in o||(o[u]=void 0)},t.getScopeValue=function(r,a){var i=this.getScopeFromName(r,a);return i.data[r]},t.getScopeDataFromName=function(r,a){return this.getScopeFromName(r,a).data},t.getScopeFromName=function(r,a){var i=a;do if(r in i.data)return i;while(i=i.parent);return this.globalScope},t.setValue=function(r){var a=this.callStack.length;return this.isVarDeclMode||a||r===xa||r===Gu||r===Hu||r instanceof Wu||r instanceof Nl||(this.value=r instanceof ls?r.value:r),r},t.getValue=function(){return this.value},e}();ts.version=V1e;ts.eval=b3;ts.Function=y3;ts.ecmaVersion=5;ts.globalContextInFunction=void 0;ts.global=Object.create(null);function W1e(e){return e===void 0&&(e=Object.create(null)),e}function FB(e,t,n){t===void 0&&(t=[]),n===void 0&&(n={});var r=n.parsingContext,a=n.timeout===void 0?0:n.timeout,i=`
    (function anonymous(`+t.join(",")+`){
         `+e+`
    });
    `,o=new ts(r,{ecmaVersion:n.ecmaVersion,timeout:a,rootContext:n.rootContext,globalContextInFunction:n.globalContextInFunction});return o.evaluate(i)}function km(e,t,n){var r=new ts(t,n);return r.evaluate(e)}var Y1e=km,X1e=function(){function e(n){this._code=n}var t=e.prototype;return t.runInContext=function(r){return km(this._code,r)},t.runInNewContext=function(r){return km(this._code,r)},e}(),Z1e=Object.freeze(Object.defineProperty({__proto__:null,createContext:W1e,compileFunction:FB,runInContext:km,runInNewContext:Y1e,Script:X1e},Symbol.toStringTag,{value:"Module"})),x8=function(e,t,n){return km(e,t,n)};function q1e(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t.pop();return FB(r||"",t)}var K1e=Object.freeze(Object.defineProperty({__proto__:null,Interpreter:ts,vm:Z1e,evaluate:x8,Function:q1e,default:x8},Symbol.toStringTag,{value:"Module"})),Q1e=kj(K1e);(function(e,t){(function(n,r){e.exports=r(Q1e)})(Qs,function(n){var r=function(w){return w instanceof Uint8Array||w instanceof Uint16Array||w instanceof Uint32Array||w instanceof Int8Array||w instanceof Int16Array||w instanceof Int32Array||w instanceof Float32Array||w instanceof Float64Array||w instanceof Uint8ClampedArray},a=function(w,F){for(var Y=Object.keys(F),pe=0;pe<Y.length;++pe)w[Y[pe]]=F[Y[pe]];return w},i=`
`;function o(w){return typeof atob!="undefined"?atob(w):"base64:"+w}function s(w){var F=new Error("(regl) "+w);throw console.error(F),F}function l(w,F){w||s(F)}function u(w){return w?": "+w:""}function c(w,F,Y){w in F||s("unknown parameter ("+w+")"+u(Y)+". possible values: "+Object.keys(F).join())}function f(w,F){r(w)||s("invalid parameter type"+u(F)+". must be a typed array")}function d(w,F){switch(F){case"number":return typeof w=="number";case"object":return typeof w=="object";case"string":return typeof w=="string";case"boolean":return typeof w=="boolean";case"function":return typeof w=="function";case"undefined":return typeof w=="undefined";case"symbol":return typeof w=="symbol"}}function p(w,F,Y){d(w,F)||s("invalid parameter type"+u(Y)+". expected "+F+", got "+typeof w)}function h(w,F){w>=0&&(w|0)===w||s("invalid parameter type, ("+w+")"+u(F)+". must be a nonnegative integer")}function g(w,F,Y){F.indexOf(w)<0&&s("invalid value"+u(Y)+". must be one of: "+F)}var v=["gl","canvas","container","attributes","pixelRatio","extensions","optionalExtensions","profile","onDone"];function b(w){Object.keys(w).forEach(function(F){v.indexOf(F)<0&&s('invalid regl constructor argument "'+F+'". must be one of '+v)})}function y(w,F){for(w=w+"";w.length<F;)w=" "+w;return w}function x(){this.name="unknown",this.lines=[],this.index={},this.hasErrors=!1}function k(w,F){this.number=w,this.line=F,this.errors=[]}function T(w,F,Y){this.file=w,this.line=F,this.message=Y}function C(){var w=new Error,F=(w.stack||w).toString(),Y=/compileProcedure.*\n\s*at.*\((.*)\)/.exec(F);if(Y)return Y[1];var pe=/compileProcedure.*\n\s*at\s+(.*)(\n|$)/.exec(F);return pe?pe[1]:"unknown"}function I(){var w=new Error,F=(w.stack||w).toString(),Y=/at REGLCommand.*\n\s+at.*\((.*)\)/.exec(F);if(Y)return Y[1];var pe=/at REGLCommand.*\n\s+at\s+(.*)\n/.exec(F);return pe?pe[1]:"unknown"}function P(w,F){var Y=w.split(`
`),pe=1,Se=0,de={unknown:new x,0:new x};de.unknown.name=de[0].name=F||C(),de.unknown.lines.push(new k(0,""));for(var we=0;we<Y.length;++we){var Pe=Y[we],De=/^\s*#\s*(\w+)\s+(.+)\s*$/.exec(Pe);if(De)switch(De[1]){case"line":var je=/(\d+)(\s+\d+)?/.exec(De[2]);je&&(pe=je[1]|0,je[2]&&(Se=je[2]|0,Se in de||(de[Se]=new x)));break;case"define":var He=/SHADER_NAME(_B64)?\s+(.*)$/.exec(De[2]);He&&(de[Se].name=He[1]?o(He[2]):He[2]);break}de[Se].lines.push(new k(pe++,Pe))}return Object.keys(de).forEach(function(We){var Ke=de[We];Ke.lines.forEach(function(Be){Ke.index[Be.number]=Be})}),de}function j(w){var F=[];return w.split(`
`).forEach(function(Y){if(!(Y.length<5)){var pe=/^ERROR:\s+(\d+):(\d+):\s*(.*)$/.exec(Y);pe?F.push(new T(pe[1]|0,pe[2]|0,pe[3].trim())):Y.length>0&&F.push(new T("unknown",0,Y))}}),F}function A(w,F){F.forEach(function(Y){var pe=w[Y.file];if(pe){var Se=pe.index[Y.line];if(Se){Se.errors.push(Y),pe.hasErrors=!0;return}}w.unknown.hasErrors=!0,w.unknown.lines[0].errors.push(Y)})}function S(w,F,Y,pe,Se){if(!w.getShaderParameter(F,w.COMPILE_STATUS)){var de=w.getShaderInfoLog(F),we=pe===w.FRAGMENT_SHADER?"fragment":"vertex";X(Y,"string",we+" shader source must be a string",Se);var Pe=P(Y,Se),De=j(de);A(Pe,De),Object.keys(Pe).forEach(function(je){var He=Pe[je];if(!He.hasErrors)return;var We=[""],Ke=[""];function Be(Ge,ie){We.push(Ge),Ke.push(ie||"")}Be("file number "+je+": "+He.name+`
`,"color:red;text-decoration:underline;font-weight:bold"),He.lines.forEach(function(Ge){if(Ge.errors.length>0){Be(y(Ge.number,4)+"|  ","background-color:yellow; font-weight:bold"),Be(Ge.line+i,"color:red; background-color:yellow; font-weight:bold");var ie=0;Ge.errors.forEach(function(ye){var Ve=ye.message,dt=/^\s*'(.*)'\s*:\s*(.*)$/.exec(Ve);if(dt){var Ne=dt[1];switch(Ve=dt[2],Ne){case"assign":Ne="=";break}ie=Math.max(Ge.line.indexOf(Ne,ie),0)}else ie=0;Be(y("| ",6)),Be(y("^^^",ie+3)+i,"font-weight:bold"),Be(y("| ",6)),Be(Ve+i,"font-weight:bold")}),Be(y("| ",6)+i)}else Be(y(Ge.number,4)+"|  "),Be(Ge.line+i,"color:red")}),typeof document!="undefined"&&!window.chrome?(Ke[0]=We.join("%c"),console.log.apply(console,Ke)):console.log(We.join(""))}),l.raise("Error compiling "+we+" shader, "+Pe[0].name)}}function M(w,F,Y,pe,Se){if(!w.getProgramParameter(F,w.LINK_STATUS)){var de=w.getProgramInfoLog(F),we=P(Y,Se),Pe=P(pe,Se),De='Error linking program with vertex shader, "'+Pe[0].name+'", and fragment shader "'+we[0].name+'"';typeof document!="undefined"?console.log("%c"+De+i+"%c"+de,"color:red;text-decoration:underline;font-weight:bold","color:red"):console.log(De+i+de),l.raise(De)}}function O(w){w._commandRef=C()}function R(w,F,Y,pe){O(w);function Se(De){return De?pe.id(De):0}w._fragId=Se(w.static.frag),w._vertId=Se(w.static.vert);function de(De,je){Object.keys(je).forEach(function(He){De[pe.id(He)]=!0})}var we=w._uniformSet={};de(we,F.static),de(we,F.dynamic);var Pe=w._attributeSet={};de(Pe,Y.static),de(Pe,Y.dynamic),w._hasCount="count"in w.static||"count"in w.dynamic||"elements"in w.static||"elements"in w.dynamic}function G(w,F){var Y=I();s(w+" in command "+(F||C())+(Y==="unknown"?"":" called from "+Y))}function ee(w,F,Y){w||G(F,Y||C())}function re(w,F,Y,pe){w in F||G("unknown parameter ("+w+")"+u(Y)+". possible values: "+Object.keys(F).join(),pe||C())}function X(w,F,Y,pe){d(w,F)||G("invalid parameter type"+u(Y)+". expected "+F+", got "+typeof w,pe||C())}function K(w){w()}function ae(w,F,Y){w.texture?g(w.texture._texture.internalformat,F,"unsupported texture format for attachment"):g(w.renderbuffer._renderbuffer.format,Y,"unsupported renderbuffer format for attachment")}var le=33071,ue=9728,ge=9984,be=9985,ze=9986,Lt=9987,Rt=5120,qt=5121,Me=5122,Qe=5123,et=5124,ve=5125,ft=5126,kt=32819,xt=32820,Ct=33635,ht=34042,Gt=36193,Ht={};Ht[Rt]=Ht[qt]=1,Ht[Me]=Ht[Qe]=Ht[Gt]=Ht[Ct]=Ht[kt]=Ht[xt]=2,Ht[et]=Ht[ve]=Ht[ft]=Ht[ht]=4;function yn(w,F){return w===xt||w===kt||w===Ct?2:w===ht?4:Ht[w]*F}function or(w){return!(w&w-1)&&!!w}function Qn(w,F,Y){var pe,Se=F.width,de=F.height,we=F.channels;l(Se>0&&Se<=Y.maxTextureSize&&de>0&&de<=Y.maxTextureSize,"invalid texture shape"),(w.wrapS!==le||w.wrapT!==le)&&l(or(Se)&&or(de),"incompatible wrap mode for texture, both width and height must be power of 2"),F.mipmask===1?Se!==1&&de!==1&&l(w.minFilter!==ge&&w.minFilter!==ze&&w.minFilter!==be&&w.minFilter!==Lt,"min filter requires mipmap"):(l(or(Se)&&or(de),"texture must be a square power of 2 to support mipmapping"),l(F.mipmask===(Se<<1)-1,"missing or incomplete mipmap data")),F.type===ft&&(Y.extensions.indexOf("oes_texture_float_linear")<0&&l(w.minFilter===ue&&w.magFilter===ue,"filter not supported, must enable oes_texture_float_linear"),l(!w.genMipmaps,"mipmap generation not supported with float textures"));var Pe=F.images;for(pe=0;pe<16;++pe)if(Pe[pe]){var De=Se>>pe,je=de>>pe;l(F.mipmask&1<<pe,"missing mipmap data");var He=Pe[pe];if(l(He.width===De&&He.height===je,"invalid shape for mip images"),l(He.format===F.format&&He.internalformat===F.internalformat&&He.type===F.type,"incompatible type for mip image"),!He.compressed)if(He.data){var We=Math.ceil(yn(He.type,we)*De/He.unpackAlignment)*He.unpackAlignment;l(He.data.byteLength===We*je,"invalid data for image, buffer size is inconsistent with image format")}else He.element||He.copy}else w.genMipmaps||l((F.mipmask&1<<pe)===0,"extra mipmap data");F.compressed&&l(!w.genMipmaps,"mipmap generation for compressed images not supported")}function mr(w,F,Y,pe){var Se=w.width,de=w.height,we=w.channels;l(Se>0&&Se<=pe.maxTextureSize&&de>0&&de<=pe.maxTextureSize,"invalid texture shape"),l(Se===de,"cube map must be square"),l(F.wrapS===le&&F.wrapT===le,"wrap mode not supported by cube map");for(var Pe=0;Pe<Y.length;++Pe){var De=Y[Pe];l(De.width===Se&&De.height===de,"inconsistent cube map face shape"),F.genMipmaps&&(l(!De.compressed,"can not generate mipmap for compressed textures"),l(De.mipmask===1,"can not specify mipmaps and generate mipmaps"));for(var je=De.images,He=0;He<16;++He){var We=je[He];if(We){var Ke=Se>>He,Be=de>>He;l(De.mipmask&1<<He,"missing mipmap data"),l(We.width===Ke&&We.height===Be,"invalid shape for mip images"),l(We.format===w.format&&We.internalformat===w.internalformat&&We.type===w.type,"incompatible type for mip image"),We.compressed||(We.data?l(We.data.byteLength===Ke*Be*Math.max(yn(We.type,we),We.unpackAlignment),"invalid data for image, buffer size is inconsistent with image format"):We.element||We.copy)}}}}var E=a(l,{optional:K,raise:s,commandRaise:G,command:ee,parameter:c,commandParameter:re,constructor:b,type:p,commandType:X,isTypedArray:f,nni:h,oneOf:g,shaderError:S,linkError:M,callSite:I,saveCommandRef:O,saveDrawInfo:R,framebufferFormat:ae,guessCommand:C,texture2D:Qn,textureCube:mr}),Ce=0,Fe=0,ut=5,Et=6;function Jt(w,F){this.id=Ce++,this.type=w,this.data=F}function At(w){return w.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}function Nt(w){if(w.length===0)return[];var F=w.charAt(0),Y=w.charAt(w.length-1);if(w.length>1&&F===Y&&(F==='"'||F==="'"))return['"'+At(w.substr(1,w.length-2))+'"'];var pe=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(w);if(pe)return Nt(w.substr(0,pe.index)).concat(Nt(pe[1])).concat(Nt(w.substr(pe.index+pe[0].length)));var Se=w.split(".");if(Se.length===1)return['"'+At(w)+'"'];for(var de=[],we=0;we<Se.length;++we)de=de.concat(Nt(Se[we]));return de}function Ot(w){return"["+Nt(w).join("][")+"]"}function Wt(w,F){return new Jt(w,Ot(F+""))}function $t(w){return typeof w=="function"&&!w._reglType||w instanceof Jt}function Pn(w,F){if(typeof w=="function")return new Jt(Fe,w);if(typeof w=="number"||typeof w=="boolean")return new Jt(ut,w);if(Array.isArray(w))return new Jt(Et,w.map(function(Y,pe){return Pn(Y,F+"["+pe+"]")}));if(w instanceof Jt)return w;E(!1,"invalid option type in uniform "+F)}var Yn={DynamicVariable:Jt,define:Wt,isDynamic:$t,unbox:Pn,accessor:Ot},Sa={next:typeof requestAnimationFrame=="function"?function(w){return requestAnimationFrame(w)}:function(w){return setTimeout(w,16)},cancel:typeof cancelAnimationFrame=="function"?function(w){return cancelAnimationFrame(w)}:clearTimeout},ti=typeof my!="undefined"&&!!my&&typeof my.showToast=="function"&&my.isFRM!==!0,Dr=ti?function(){return+new Date}:typeof performance!="undefined"&&performance.now?function(){return performance.now()}:function(){return+new Date};function ni(){var w={"":0},F=[""];return{id:function(Y){var pe=w[Y];return pe||(pe=w[Y]=F.length,F.push(Y),pe)},str:function(Y){return F[Y]}}}function jr(w,F,Y){var pe=document.createElement("canvas");a(pe.style,{border:0,margin:0,padding:0,top:0,left:0,width:"100%",height:"100%"}),w.appendChild(pe),w===document.body&&(pe.style.position="absolute",a(w.style,{margin:0,padding:0}));function Se(){var Pe=window.innerWidth,De=window.innerHeight;if(w!==document.body){var je=pe.getBoundingClientRect();Pe=je.right-je.left,De=je.bottom-je.top}pe.width=Y*Pe,pe.height=Y*De}var de;w!==document.body&&typeof ResizeObserver=="function"?(de=new ResizeObserver(function(){setTimeout(Se)}),de.observe(w)):window.addEventListener("resize",Se,!1);function we(){de?de.disconnect():window.removeEventListener("resize",Se),w.removeChild(pe)}return Se(),{canvas:pe,onDestroy:we}}function mi(w,F){function Y(pe){try{return w.getContext(pe,F)}catch{return null}}return Y("webgl")||Y("experimental-webgl")||Y("webgl-experimental")}function Ua(w){return typeof w.nodeName=="string"&&typeof w.appendChild=="function"&&typeof w.getBoundingClientRect=="function"}function Ti(w){return typeof w.drawArrays=="function"||typeof w.drawElements=="function"}function Ca(w){return typeof w=="string"?w.split():(E(Array.isArray(w),"invalid extension array"),w)}function Gr(w){return typeof w=="string"?(E(typeof document!="undefined","not supported outside of DOM"),document.querySelector(w)):w}function en(w){var F=w||{},Y,pe,Se,de,we={},Pe=[],De=[],je=typeof window=="undefined"?1:window.devicePixelRatio,He=!1,We=function(Ge){Ge&&E.raise(Ge)},Ke=function(){};if(typeof F=="string"?(E(typeof document!="undefined","selector queries only supported in DOM environments"),Y=document.querySelector(F),E(Y,"invalid query string for element")):typeof F=="object"?Ua(F)?Y=F:Ti(F)?(de=F,Se=de.canvas):(E.constructor(F),"gl"in F?de=F.gl:"canvas"in F?Se=Gr(F.canvas):"container"in F&&(pe=Gr(F.container)),"attributes"in F&&(we=F.attributes,E.type(we,"object","invalid context attributes")),"extensions"in F&&(Pe=Ca(F.extensions)),"optionalExtensions"in F&&(De=Ca(F.optionalExtensions)),"onDone"in F&&(E.type(F.onDone,"function","invalid or missing onDone callback"),We=F.onDone),"profile"in F&&(He=!!F.profile),"pixelRatio"in F&&(je=+F.pixelRatio,E(je>0,"invalid pixel ratio"))):E.raise("invalid arguments to regl"),Y&&(Y.nodeName.toLowerCase()==="canvas"?Se=Y:pe=Y),!de){if(!Se){E(typeof document!="undefined","must manually specify webgl context outside of DOM environments");var Be=jr(pe||document.body,We,je);if(!Be)return null;Se=Be.canvas,Ke=Be.onDestroy}we.premultipliedAlpha===void 0&&(we.premultipliedAlpha=!0),de=mi(Se,we)}return de?{gl:de,canvas:Se,container:pe,extensions:Pe,optionalExtensions:De,pixelRatio:je,profile:He,onDone:We,onDestroy:Ke}:(Ke(),We("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}function pn(w,F){var Y={};function pe(Pe){E.type(Pe,"string","extension name must be string");var De=Pe.toLowerCase(),je;try{je=Y[De]=Se(Pe)}catch{}return!!je}function Se(Pe){return w.getExtension(Pe)?w.getExtension(Pe):w.getExtension(Pe.toLowerCase())?w.getExtension(Pe.toLowerCase()):null}for(var de=0;de<F.extensions.length;++de){var we=F.extensions[de];if(!pe(we))return F.onDestroy(),F.onDone('"'+we+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}return F.optionalExtensions.forEach(pe),{extensions:Y,restore:function(){Object.keys(Y).forEach(function(Pe){if(Y[Pe]&&!pe(Pe))throw new Error("(regl): error restoring extension "+Pe)})}}}function hn(w,F){for(var Y=Array(w),pe=0;pe<w;++pe)Y[pe]=F(pe);return Y}var Br=5120,Ta=5121,Oo=5122,Mo=5123,Zi=5124,ar=5125,mn=5126;function nn(w){for(var F=16;F<=1<<28;F*=16)if(w<=F)return F;return 0}function Zn(w){var F,Y;return F=(w>65535)<<4,w>>>=F,Y=(w>255)<<3,w>>>=Y,F|=Y,Y=(w>15)<<2,w>>>=Y,F|=Y,Y=(w>3)<<1,w>>>=Y,F|=Y,F|w>>1}function Dn(){var w=hn(8,function(){return[]});function F(de){var we=nn(de),Pe=w[Zn(we)>>2];return Pe.length>0?Pe.pop():new ArrayBuffer(we)}function Y(de){w[Zn(de.byteLength)>>2].push(de)}function pe(de,we){var Pe=null;switch(de){case Br:Pe=new Int8Array(F(we),0,we);break;case Ta:Pe=new Uint8Array(F(we),0,we);break;case Oo:Pe=new Int16Array(F(2*we),0,we);break;case Mo:Pe=new Uint16Array(F(2*we),0,we);break;case Zi:Pe=new Int32Array(F(4*we),0,we);break;case ar:Pe=new Uint32Array(F(4*we),0,we);break;case mn:Pe=new Float32Array(F(4*we),0,we);break;default:return null}return Pe.length!==we?Pe.subarray(0,we):Pe}function Se(de){Y(de.buffer)}return{alloc:F,free:Y,allocType:pe,freeType:Se}}var gn=Dn();gn.zero=Dn();var oa=3408,sa=3410,ri=3411,qi=3412,En=3413,on=3414,Bn=3415,zr=33901,Aa=33902,ai=3379,Ro=3386,Tu=34921,_l=36347,Po=36348,va=35661,Ki=35660,An=34930,xn=36349,zn=34076,qn=34024,gr=7936,Qi=7937,rs=7938,wl=35724,Ai=34047,Bc=36063,ep=34852,kl=3553,zc=34067,tp=34069,Uc=33984,ii=6408,np=5126,rp=5121,Au=36160,o0=36053,tx=36064,nx=16384,N=function(w,F){var Y=1;F.ext_texture_filter_anisotropic&&(Y=w.getParameter(Ai));var pe=1,Se=1;F.webgl_draw_buffers&&(pe=w.getParameter(ep),Se=w.getParameter(Bc));var de=!!F.oes_texture_float;if(de){var we=w.createTexture();w.bindTexture(kl,we),w.texImage2D(kl,0,ii,1,1,0,ii,np,null);var Pe=w.createFramebuffer();if(w.bindFramebuffer(Au,Pe),w.framebufferTexture2D(Au,tx,kl,we,0),w.bindTexture(kl,null),w.checkFramebufferStatus(Au)!==o0)de=!1;else{w.viewport(0,0,1,1),w.clearColor(1,0,0,1),w.clear(nx);var De=gn.allocType(np,4);w.readPixels(0,0,1,1,ii,np,De),w.getError()?de=!1:(w.deleteFramebuffer(Pe),w.deleteTexture(we),de=De[0]===1),gn.freeType(De)}}var je=typeof navigator!="undefined"&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent)),He=!0;if(!je){var We=w.createTexture(),Ke=gn.allocType(rp,36);w.activeTexture(Uc),w.bindTexture(zc,We),w.texImage2D(tp,0,ii,3,3,0,ii,rp,Ke),gn.freeType(Ke),w.bindTexture(zc,null),w.deleteTexture(We),He=!w.getError()}return{colorBits:[w.getParameter(sa),w.getParameter(ri),w.getParameter(qi),w.getParameter(En)],depthBits:w.getParameter(on),stencilBits:w.getParameter(Bn),subpixelBits:w.getParameter(oa),extensions:Object.keys(F).filter(function(Be){return!!F[Be]}),maxAnisotropic:Y,maxDrawbuffers:pe,maxColorAttachments:Se,pointSizeDims:w.getParameter(zr),lineWidthDims:w.getParameter(Aa),maxViewportDims:w.getParameter(Ro),maxCombinedTextureUnits:w.getParameter(va),maxCubeMapSize:w.getParameter(zn),maxRenderbufferSize:w.getParameter(qn),maxTextureUnits:w.getParameter(An),maxTextureSize:w.getParameter(ai),maxAttributes:w.getParameter(Tu),maxVertexUniforms:w.getParameter(_l),maxVertexTextureUnits:w.getParameter(Ki),maxVaryingVectors:w.getParameter(Po),maxFragmentUniforms:w.getParameter(xn),glsl:w.getParameter(wl),renderer:w.getParameter(Qi),vendor:w.getParameter(gr),version:w.getParameter(rs),readFloat:de,npotTextureCube:He}};function U(w){return!!w&&typeof w=="object"&&Array.isArray(w.shape)&&Array.isArray(w.stride)&&typeof w.offset=="number"&&w.shape.length===w.stride.length&&(Array.isArray(w.data)||r(w.data))}var Q=function(w){return Object.keys(w).map(function(F){return w[F]})},_e={shape:Oa,flatten:la};function qe(w,F,Y){for(var pe=0;pe<F;++pe)Y[pe]=w[pe]}function Pt(w,F,Y,pe){for(var Se=0,de=0;de<F;++de)for(var we=w[de],Pe=0;Pe<Y;++Pe)pe[Se++]=we[Pe]}function Sn(w,F,Y,pe,Se,de){for(var we=de,Pe=0;Pe<F;++Pe)for(var De=w[Pe],je=0;je<Y;++je)for(var He=De[je],We=0;We<pe;++We)Se[we++]=He[We]}function Hr(w,F,Y,pe,Se){for(var de=1,we=Y+1;we<F.length;++we)de*=F[we];var Pe=F[Y];if(F.length-Y===4){var De=F[Y+1],je=F[Y+2],He=F[Y+3];for(we=0;we<Pe;++we)Sn(w[we],De,je,He,pe,Se),Se+=de}else for(we=0;we<Pe;++we)Hr(w[we],F,Y+1,pe,Se),Se+=de}function la(w,F,Y,pe){var Se=1;if(F.length)for(var de=0;de<F.length;++de)Se*=F[de];else Se=0;var we=pe||gn.allocType(Y,Se);switch(F.length){case 0:break;case 1:qe(w,F[0],we);break;case 2:Pt(w,F[0],F[1],we);break;case 3:Sn(w,F[0],F[1],F[2],we,0);break;default:Hr(w,F,0,we,0)}return we}function Oa(w){for(var F=[],Y=w;Y.length;Y=Y[0])F.push(Y.length);return F}var gi={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121},f$=5120,d$=5122,p$=5124,h$=5121,m$=5123,g$=5125,v$=5126,b$=5126,Ou={int8:f$,int16:d$,int32:p$,uint8:h$,uint16:m$,uint32:g$,float:v$,float32:b$},y$=35048,x$=35040,s0={dynamic:y$,stream:x$,static:35044},rx=_e.flatten,gS=_e.shape,vS=35044,_$=35040,ax=5121,ix=5126,El=[];El[5120]=1,El[5122]=2,El[5124]=4,El[5121]=1,El[5123]=2,El[5125]=4,El[5126]=4;function l0(w){return gi[Object.prototype.toString.call(w)]|0}function bS(w,F){for(var Y=0;Y<F.length;++Y)w[Y]=F[Y]}function yS(w,F,Y,pe,Se,de,we){for(var Pe=0,De=0;De<Y;++De)for(var je=0;je<pe;++je)w[Pe++]=F[Se*De+de*je+we]}function w$(w,F,Y,pe){var Se=0,de={};function we(ie){this.id=Se++,this.buffer=w.createBuffer(),this.type=ie,this.usage=vS,this.byteLength=0,this.dimension=1,this.dtype=ax,this.persistentData=null,Y.profile&&(this.stats={size:0})}we.prototype.bind=function(){w.bindBuffer(this.type,this.buffer)},we.prototype.destroy=function(){Ke(this)};var Pe=[];function De(ie,ye){var Ve=Pe.pop();return Ve||(Ve=new we(ie)),Ve.bind(),We(Ve,ye,_$,0,1,!1),Ve}function je(ie){Pe.push(ie)}function He(ie,ye,Ve){ie.byteLength=ye.byteLength,w.bufferData(ie.type,ye,Ve)}function We(ie,ye,Ve,dt,Ne,lt){var rt;if(ie.usage=Ve,Array.isArray(ye)){if(ie.dtype=dt||ix,ye.length>0){var Ft;if(Array.isArray(ye[0])){rt=gS(ye);for(var Te=1,Ee=1;Ee<rt.length;++Ee)Te*=rt[Ee];ie.dimension=Te,Ft=rx(ye,rt,ie.dtype),He(ie,Ft,Ve),lt?ie.persistentData=Ft:gn.freeType(Ft)}else if(typeof ye[0]=="number"){ie.dimension=Ne;var gt=gn.allocType(ie.dtype,ye.length);bS(gt,ye),He(ie,gt,Ve),lt?ie.persistentData=gt:gn.freeType(gt)}else r(ye[0])?(ie.dimension=ye[0].length,ie.dtype=dt||l0(ye[0])||ix,Ft=rx(ye,[ye.length,ye[0].length],ie.dtype),He(ie,Ft,Ve),lt?ie.persistentData=Ft:gn.freeType(Ft)):E.raise("invalid buffer data")}}else if(r(ye))ie.dtype=dt||l0(ye),ie.dimension=Ne,He(ie,ye,Ve),lt&&(ie.persistentData=new Uint8Array(new Uint8Array(ye.buffer)));else if(U(ye)){rt=ye.shape;var Je=ye.stride,Ue=ye.offset,tt=0,nt=0,Kt=0,jt=0;rt.length===1?(tt=rt[0],nt=1,Kt=Je[0],jt=0):rt.length===2?(tt=rt[0],nt=rt[1],Kt=Je[0],jt=Je[1]):E.raise("invalid shape"),ie.dtype=dt||l0(ye.data)||ix,ie.dimension=nt;var at=gn.allocType(ie.dtype,tt*nt);yS(at,ye.data,tt,nt,Kt,jt,Ue),He(ie,at,Ve),lt?ie.persistentData=at:gn.freeType(at)}else ye instanceof ArrayBuffer?(ie.dtype=ax,ie.dimension=Ne,He(ie,ye,Ve),lt&&(ie.persistentData=new Uint8Array(new Uint8Array(ye)))):E.raise("invalid buffer data")}function Ke(ie){F.bufferCount--,pe(ie);var ye=ie.buffer;E(ye,"buffer must not be deleted already"),w.deleteBuffer(ye),ie.buffer=null,delete de[ie.id]}function Be(ie,ye,Ve,dt){F.bufferCount++;var Ne=new we(ye);de[Ne.id]=Ne;function lt(Te){var Ee=vS,gt=null,Je=0,Ue=0,tt=1;return Array.isArray(Te)||r(Te)||U(Te)||Te instanceof ArrayBuffer?gt=Te:typeof Te=="number"?Je=Te|0:Te&&(E.type(Te,"object","buffer arguments must be an object, a number or an array"),"data"in Te&&(E(gt===null||Array.isArray(gt)||r(gt)||U(gt),"invalid data for buffer"),gt=Te.data),"usage"in Te&&(E.parameter(Te.usage,s0,"invalid buffer usage"),Ee=s0[Te.usage]),"type"in Te&&(E.parameter(Te.type,Ou,"invalid buffer type"),Ue=Ou[Te.type]),"dimension"in Te&&(E.type(Te.dimension,"number","invalid dimension"),tt=Te.dimension|0),"length"in Te&&(E.nni(Je,"buffer length must be a nonnegative integer"),Je=Te.length|0)),Ne.bind(),gt?We(Ne,gt,Ee,Ue,tt,dt):(Je&&w.bufferData(Ne.type,Je,Ee),Ne.dtype=Ue||ax,Ne.usage=Ee,Ne.dimension=tt,Ne.byteLength=Je),Y.profile&&(Ne.stats.size=Ne.byteLength*El[Ne.dtype]),lt}function rt(Te,Ee){E(Ee+Te.byteLength<=Ne.byteLength,"invalid buffer subdata call, buffer is too small.  Can't write data of size "+Te.byteLength+" starting from offset "+Ee+" to a buffer of size "+Ne.byteLength),w.bufferSubData(Ne.type,Ee,Te)}function Ft(Te,Ee){var gt=(Ee||0)|0,Je;if(Ne.bind(),r(Te)||Te instanceof ArrayBuffer)rt(Te,gt);else if(Array.isArray(Te)){if(Te.length>0)if(typeof Te[0]=="number"){var Ue=gn.allocType(Ne.dtype,Te.length);bS(Ue,Te),rt(Ue,gt),gn.freeType(Ue)}else if(Array.isArray(Te[0])||r(Te[0])){Je=gS(Te);var tt=rx(Te,Je,Ne.dtype);rt(tt,gt),gn.freeType(tt)}else E.raise("invalid buffer data")}else if(U(Te)){Je=Te.shape;var nt=Te.stride,Kt=0,jt=0,at=0,ct=0;Je.length===1?(Kt=Je[0],jt=1,at=nt[0],ct=0):Je.length===2?(Kt=Je[0],jt=Je[1],at=nt[0],ct=nt[1]):E.raise("invalid shape");var zt=Array.isArray(Te.data)?Ne.dtype:l0(Te.data),Yt=gn.allocType(zt,Kt*jt);yS(Yt,Te.data,Kt,jt,at,ct,Te.offset),rt(Yt,gt),gn.freeType(Yt)}else E.raise("invalid data for buffer subdata");return lt}return Ve||lt(ie),lt._reglType="buffer",lt._buffer=Ne,lt.subdata=Ft,Y.profile&&(lt.stats=Ne.stats),lt.destroy=function(){Ke(Ne)},lt}function Ge(){Q(de).forEach(function(ie){ie.buffer=w.createBuffer(),w.bindBuffer(ie.type,ie.buffer),w.bufferData(ie.type,ie.persistentData||ie.byteLength,ie.usage)})}return Y.profile&&(F.getTotalBufferSize=function(){var ie=0;return Object.keys(de).forEach(function(ye){ie+=de[ye].stats.size}),ie}),{create:Be,createStream:De,destroyStream:je,clear:function(){Q(de).forEach(Ke),Pe.forEach(Ke)},getBuffer:function(ie){return ie&&ie._buffer instanceof we?ie._buffer:null},restore:Ge,_initBuffer:We}}var k$=0,E$=0,S$=1,C$=1,T$=4,A$=4,Sl={points:k$,point:E$,lines:S$,line:C$,triangles:T$,triangle:A$,"line loop":2,"line strip":3,"triangle strip":5,"triangle fan":6},O$=0,M$=1,ap=4,R$=5120,$c=5121,xS=5122,Vc=5123,_S=5124,Mu=5125,ox=34963,P$=35040,I$=35044;function L$(w,F,Y,pe){var Se={},de=0,we={uint8:$c,uint16:Vc};F.oes_element_index_uint&&(we.uint32=Mu);function Pe(Ge){this.id=de++,Se[this.id]=this,this.buffer=Ge,this.primType=ap,this.vertCount=0,this.type=0}Pe.prototype.bind=function(){this.buffer.bind()};var De=[];function je(Ge){var ie=De.pop();return ie||(ie=new Pe(Y.create(null,ox,!0,!1)._buffer)),We(ie,Ge,P$,-1,-1,0,0),ie}function He(Ge){De.push(Ge)}function We(Ge,ie,ye,Ve,dt,Ne,lt){Ge.buffer.bind();var rt;if(ie){var Ft=lt;!lt&&(!r(ie)||U(ie)&&!r(ie.data))&&(Ft=F.oes_element_index_uint?Mu:Vc),Y._initBuffer(Ge.buffer,ie,ye,Ft,3)}else w.bufferData(ox,Ne,ye),Ge.buffer.dtype=rt||$c,Ge.buffer.usage=ye,Ge.buffer.dimension=3,Ge.buffer.byteLength=Ne;if(rt=lt,!lt){switch(Ge.buffer.dtype){case $c:case R$:rt=$c;break;case Vc:case xS:rt=Vc;break;case Mu:case _S:rt=Mu;break;default:E.raise("unsupported type for element array")}Ge.buffer.dtype=rt}Ge.type=rt,E(rt!==Mu||!!F.oes_element_index_uint,"32 bit element buffers not supported, enable oes_element_index_uint first");var Te=dt;Te<0&&(Te=Ge.buffer.byteLength,rt===Vc?Te>>=1:rt===Mu&&(Te>>=2)),Ge.vertCount=Te;var Ee=Ve;if(Ve<0){Ee=ap;var gt=Ge.buffer.dimension;gt===1&&(Ee=O$),gt===2&&(Ee=M$),gt===3&&(Ee=ap)}Ge.primType=Ee}function Ke(Ge){pe.elementsCount--,E(Ge.buffer!==null,"must not double destroy elements"),delete Se[Ge.id],Ge.buffer.destroy(),Ge.buffer=null}function Be(Ge,ie){var ye=Y.create(null,ox,!0),Ve=new Pe(ye._buffer);pe.elementsCount++;function dt(Ne){if(!Ne)ye(),Ve.primType=ap,Ve.vertCount=0,Ve.type=$c;else if(typeof Ne=="number")ye(Ne),Ve.primType=ap,Ve.vertCount=Ne|0,Ve.type=$c;else{var lt=null,rt=I$,Ft=-1,Te=-1,Ee=0,gt=0;Array.isArray(Ne)||r(Ne)||U(Ne)?lt=Ne:(E.type(Ne,"object","invalid arguments for elements"),"data"in Ne&&(lt=Ne.data,E(Array.isArray(lt)||r(lt)||U(lt),"invalid data for element buffer")),"usage"in Ne&&(E.parameter(Ne.usage,s0,"invalid element buffer usage"),rt=s0[Ne.usage]),"primitive"in Ne&&(E.parameter(Ne.primitive,Sl,"invalid element buffer primitive"),Ft=Sl[Ne.primitive]),"count"in Ne&&(E(typeof Ne.count=="number"&&Ne.count>=0,"invalid vertex count for elements"),Te=Ne.count|0),"type"in Ne&&(E.parameter(Ne.type,we,"invalid buffer type"),gt=we[Ne.type]),"length"in Ne?Ee=Ne.length|0:(Ee=Te,gt===Vc||gt===xS?Ee*=2:(gt===Mu||gt===_S)&&(Ee*=4))),We(Ve,lt,rt,Ft,Te,Ee,gt)}return dt}return dt(Ge),dt._reglType="elements",dt._elements=Ve,dt.subdata=function(Ne,lt){return ye.subdata(Ne,lt),dt},dt.destroy=function(){Ke(Ve)},dt}return{create:Be,createStream:je,destroyStream:He,getElements:function(Ge){return typeof Ge=="function"&&Ge._elements instanceof Pe?Ge._elements:null},clear:function(){Q(Se).forEach(Ke)}}}var wS=new Float32Array(1),N$=new Uint32Array(wS.buffer),F$=5123;function kS(w){for(var F=gn.allocType(F$,w.length),Y=0;Y<w.length;++Y)if(isNaN(w[Y]))F[Y]=65535;else if(w[Y]===1/0)F[Y]=31744;else if(w[Y]===-1/0)F[Y]=64512;else{wS[0]=w[Y];var pe=N$[0],Se=pe>>>31<<15,de=(pe<<1>>>24)-127,we=pe>>13&(1<<10)-1;if(de<-24)F[Y]=Se;else if(de<-14){var Pe=-14-de;F[Y]=Se+(we+(1<<10)>>Pe)}else de>15?F[Y]=Se+31744:F[Y]=Se+(de+15<<10)+we}return F}function Or(w){return Array.isArray(w)||r(w)}var ES=function(w){return!(w&w-1)&&!!w},D$=34467,as=3553,sx=34067,u0=34069,Ru=6408,lx=6406,c0=6407,ip=6409,f0=6410,SS=32854,ux=32855,CS=36194,B$=32819,z$=32820,U$=33635,$$=34042,cx=6402,d0=34041,fx=35904,dx=35906,jc=36193,px=33776,hx=33777,mx=33778,gx=33779,TS=35986,AS=35987,OS=34798,MS=35840,RS=35841,PS=35842,IS=35843,LS=36196,Gc=5121,vx=5123,bx=5125,op=5126,V$=10242,j$=10243,G$=10497,yx=33071,H$=33648,W$=10240,Y$=10241,xx=9728,X$=9729,_x=9984,NS=9985,FS=9986,kx=9987,Z$=33170,p0=4352,q$=4353,K$=4354,Q$=34046,J$=3317,eV=37440,tV=37441,nV=37443,DS=37444,sp=33984,rV=[_x,FS,NS,kx],h0=[0,ip,f0,c0,Ru],Ji={};Ji[ip]=Ji[lx]=Ji[cx]=1,Ji[d0]=Ji[f0]=2,Ji[c0]=Ji[fx]=3,Ji[Ru]=Ji[dx]=4;function Hc(w){return"[object "+w+"]"}var BS=Hc("HTMLCanvasElement"),zS=Hc("OffscreenCanvas"),US=Hc("CanvasRenderingContext2D"),$S=Hc("ImageBitmap"),VS=Hc("HTMLImageElement"),jS=Hc("HTMLVideoElement"),aV=Object.keys(gi).concat([BS,zS,US,$S,VS,jS]),Wc=[];Wc[Gc]=1,Wc[op]=4,Wc[jc]=2,Wc[vx]=2,Wc[bx]=4;var ba=[];ba[SS]=2,ba[ux]=2,ba[CS]=2,ba[d0]=4,ba[px]=.5,ba[hx]=.5,ba[mx]=1,ba[gx]=1,ba[TS]=.5,ba[AS]=1,ba[OS]=1,ba[MS]=.5,ba[RS]=.25,ba[PS]=.5,ba[IS]=.25,ba[LS]=.5;function GS(w){return Array.isArray(w)&&(w.length===0||typeof w[0]=="number")}function HS(w){if(!Array.isArray(w))return!1;var F=w.length;return!(F===0||!Or(w[0]))}function Pu(w){return Object.prototype.toString.call(w)}function WS(w){return Pu(w)===BS}function YS(w){return Pu(w)===zS}function iV(w){return Pu(w)===US}function oV(w){return Pu(w)===$S}function sV(w){return Pu(w)===VS}function lV(w){return Pu(w)===jS}function Ex(w){var F=typeof my!="undefined"&&!!my&&typeof my.showToast=="function"&&my.isFRM!==!0;return!!(F&&w&&w.getContext)}function XS(w){var F=typeof my!="undefined"&&!!my&&typeof my.showToast=="function"&&my.isFRM!==!0;return!!(F&&w&&"src"in w&&"crossOrigin"in w)}function Sx(w){if(!w)return!1;if(Ex(w)||XS(w))return!0;var F=Pu(w);return aV.indexOf(F)>=0?!0:GS(w)||HS(w)||U(w)}function ZS(w){return gi[Object.prototype.toString.call(w)]|0}function uV(w,F){var Y=F.length;switch(w.type){case Gc:case vx:case bx:case op:var pe=gn.allocType(w.type,Y);pe.set(F),w.data=pe;break;case jc:w.data=kS(F);break;default:E.raise("unsupported texture type, must specify a typed array")}}function qS(w,F){return gn.allocType(w.type===jc?op:w.type,F)}function KS(w,F){w.type===jc?(w.data=kS(F),gn.freeType(F)):w.data=F}function cV(w,F,Y,pe,Se,de){for(var we=w.width,Pe=w.height,De=w.channels,je=we*Pe*De,He=qS(w,je),We=0,Ke=0;Ke<Pe;++Ke)for(var Be=0;Be<we;++Be)for(var Ge=0;Ge<De;++Ge)He[We++]=F[Y*Be+pe*Ke+Se*Ge+de];KS(w,He)}function m0(w,F,Y,pe,Se,de){var we;if(typeof ba[w]!="undefined"?we=ba[w]:we=Ji[w]*Wc[F],de&&(we*=6),Se){for(var Pe=0,De=Y;De>=1;)Pe+=we*De*De,De/=2;return Pe}else return we*Y*pe}function fV(w,F,Y,pe,Se,de,we){var Pe={"don't care":p0,"dont care":p0,nice:K$,fast:q$},De={repeat:G$,clamp:yx,mirror:H$},je={nearest:xx,linear:X$},He=a({mipmap:kx,"nearest mipmap nearest":_x,"linear mipmap nearest":NS,"nearest mipmap linear":FS,"linear mipmap linear":kx},je),We={none:0,browser:DS},Ke={uint8:Gc,rgba4:B$,rgb565:U$,"rgb5 a1":z$},Be={alpha:lx,luminance:ip,"luminance alpha":f0,rgb:c0,rgba:Ru,rgba4:SS,"rgb5 a1":ux,rgb565:CS},Ge={};F.ext_srgb&&(Be.srgb=fx,Be.srgba=dx),F.oes_texture_float&&(Ke.float32=Ke.float=op),F.oes_texture_half_float&&(Ke.float16=Ke["half float"]=jc),F.webgl_depth_texture&&(a(Be,{depth:cx,"depth stencil":d0}),a(Ke,{uint16:vx,uint32:bx,"depth stencil":$$})),F.webgl_compressed_texture_s3tc&&a(Ge,{"rgb s3tc dxt1":px,"rgba s3tc dxt1":hx,"rgba s3tc dxt3":mx,"rgba s3tc dxt5":gx}),F.webgl_compressed_texture_atc&&a(Ge,{"rgb atc":TS,"rgba atc explicit alpha":AS,"rgba atc interpolated alpha":OS}),F.webgl_compressed_texture_pvrtc&&a(Ge,{"rgb pvrtc 4bppv1":MS,"rgb pvrtc 2bppv1":RS,"rgba pvrtc 4bppv1":PS,"rgba pvrtc 2bppv1":IS}),F.webgl_compressed_texture_etc1&&(Ge["rgb etc1"]=LS);var ie=Array.prototype.slice.call(w.getParameter(D$)||new Uint32Array(0));Object.keys(Ge).forEach(function(W){var me=Ge[W];ie.indexOf(me)>=0&&(Be[W]=me)});var ye=Object.keys(Be);Y.textureFormats=ye;var Ve=[];Object.keys(Be).forEach(function(W){var me=Be[W];Ve[me]=W});var dt=[];Object.keys(Ke).forEach(function(W){var me=Ke[W];dt[me]=W});var Ne=[];Object.keys(je).forEach(function(W){var me=je[W];Ne[me]=W});var lt=[];Object.keys(He).forEach(function(W){var me=He[W];lt[me]=W});var rt=[];Object.keys(De).forEach(function(W){var me=De[W];rt[me]=W});var Ft=ye.reduce(function(W,me){var fe=Be[me];return fe===ip||fe===lx||fe===ip||fe===f0||fe===cx||fe===d0||F.ext_srgb&&(fe===fx||fe===dx)?W[fe]=fe:fe===ux||me.indexOf("rgba")>=0?W[fe]=Ru:W[fe]=c0,W},{});function Te(){this.internalformat=Ru,this.format=Ru,this.type=Gc,this.compressed=!1,this.premultiplyAlpha=!1,this.flipY=!1,this.unpackAlignment=1,this.colorSpace=DS,this.width=0,this.height=0,this.channels=0}function Ee(W,me){W.internalformat=me.internalformat,W.format=me.format,W.type=me.type,W.compressed=me.compressed,W.premultiplyAlpha=me.premultiplyAlpha,W.flipY=me.flipY,W.unpackAlignment=me.unpackAlignment,W.colorSpace=me.colorSpace,W.width=me.width,W.height=me.height,W.channels=me.channels}function gt(W,me){if(!(typeof me!="object"||!me)){if("premultiplyAlpha"in me&&(E.type(me.premultiplyAlpha,"boolean","invalid premultiplyAlpha"),W.premultiplyAlpha=me.premultiplyAlpha),"flipY"in me&&(E.type(me.flipY,"boolean","invalid texture flip"),W.flipY=me.flipY),"alignment"in me&&(E.oneOf(me.alignment,[1,2,4,8],"invalid texture unpack alignment"),W.unpackAlignment=me.alignment),"colorSpace"in me&&(E.parameter(me.colorSpace,We,"invalid colorSpace"),W.colorSpace=We[me.colorSpace]),"type"in me){var fe=me.type;E(F.oes_texture_float||!(fe==="float"||fe==="float32"),"you must enable the OES_texture_float extension in order to use floating point textures."),E(F.oes_texture_half_float||!(fe==="half float"||fe==="float16"),"you must enable the OES_texture_half_float extension in order to use 16-bit floating point textures."),E(F.webgl_depth_texture||!(fe==="uint16"||fe==="uint32"||fe==="depth stencil"),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),E.parameter(fe,Ke,"invalid texture type"),W.type=Ke[fe]}var mt=W.width,fn=W.height,$=W.channels,L=!1;"shape"in me?(E(Array.isArray(me.shape)&&me.shape.length>=2,"shape must be an array"),mt=me.shape[0],fn=me.shape[1],me.shape.length===3&&($=me.shape[2],E($>0&&$<=4,"invalid number of channels"),L=!0),E(mt>=0&&mt<=Y.maxTextureSize,"invalid width"),E(fn>=0&&fn<=Y.maxTextureSize,"invalid height")):("radius"in me&&(mt=fn=me.radius,E(mt>=0&&mt<=Y.maxTextureSize,"invalid radius")),"width"in me&&(mt=me.width,E(mt>=0&&mt<=Y.maxTextureSize,"invalid width")),"height"in me&&(fn=me.height,E(fn>=0&&fn<=Y.maxTextureSize,"invalid height")),"channels"in me&&($=me.channels,E($>0&&$<=4,"invalid number of channels"),L=!0)),W.width=mt|0,W.height=fn|0,W.channels=$|0;var q=!1;if("format"in me){var oe=me.format;E(F.webgl_depth_texture||!(oe==="depth"||oe==="depth stencil"),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),E.parameter(oe,Be,"invalid texture format");var he=W.internalformat=Be[oe];W.format=Ft[he],oe in Ke&&("type"in me||(W.type=Ke[oe])),oe in Ge&&(W.compressed=!0),q=!0}!L&&q?W.channels=Ji[W.format]:L&&!q?W.channels!==h0[W.format]&&(W.format=W.internalformat=h0[W.channels]):q&&L&&E(W.channels===Ji[W.format],"number of channels inconsistent with specified format")}}function Je(W){w.pixelStorei(eV,W.flipY),w.pixelStorei(tV,W.premultiplyAlpha),w.pixelStorei(nV,W.colorSpace),w.pixelStorei(J$,W.unpackAlignment)}function Ue(){Te.call(this),this.xOffset=0,this.yOffset=0,this.data=null,this.needsFree=!1,this.element=null,this.needsCopy=!1}function tt(W,me){var fe=null;if(Sx(me)?fe=me:me&&(E.type(me,"object","invalid pixel data type"),gt(W,me),"x"in me&&(W.xOffset=me.x|0),"y"in me&&(W.yOffset=me.y|0),Sx(me.data)&&(fe=me.data)),E(!W.compressed||fe instanceof Uint8Array,"compressed texture data must be stored in a uint8array"),me.copy){E(!fe,"can not specify copy and data field for the same texture");var mt=Se.viewportWidth,fn=Se.viewportHeight;W.width=W.width||mt-W.xOffset,W.height=W.height||fn-W.yOffset,W.needsCopy=!0,E(W.xOffset>=0&&W.xOffset<mt&&W.yOffset>=0&&W.yOffset<fn&&W.width>0&&W.width<=mt&&W.height>0&&W.height<=fn,"copy texture read out of bounds")}else if(!fe)W.width=W.width||1,W.height=W.height||1,W.channels=W.channels||4;else if(r(fe))W.channels=W.channels||4,W.data=fe,!("type"in me)&&W.type===Gc&&(W.type=ZS(fe));else if(GS(fe))W.channels=W.channels||4,uV(W,fe),W.alignment=1,W.needsFree=!0;else if(U(fe)){var $=fe.data;!Array.isArray($)&&W.type===Gc&&(W.type=ZS($));var L=fe.shape,q=fe.stride,oe,he,te,J,ne,B;L.length===3?(te=L[2],B=q[2]):(E(L.length===2,"invalid ndarray pixel data, must be 2 or 3D"),te=1,B=1),oe=L[0],he=L[1],J=q[0],ne=q[1],W.alignment=1,W.width=oe,W.height=he,W.channels=te,W.format=W.internalformat=h0[te],W.needsFree=!0,cV(W,$,J,ne,B,fe.offset)}else if(Ex(fe)||WS(fe)||YS(fe)||iV(fe))Ex(fe)||WS(fe)||YS(fe)?W.element=fe:W.element=fe.canvas,W.width=W.element.width,W.height=W.element.height,W.channels=4;else if(oV(fe))W.element=fe,W.width=fe.width,W.height=fe.height,W.channels=4;else if(sV(fe))W.element=fe,W.width=fe.naturalWidth,W.height=fe.naturalHeight,W.channels=4;else if(XS(fe))W.element=fe,W.width=fe.width,W.height=fe.height,W.channels=4;else if(lV(fe))W.element=fe,W.width=fe.videoWidth,W.height=fe.videoHeight,W.channels=4;else if(HS(fe)){var Z=W.width||fe[0].length,H=W.height||fe.length,se=W.channels;Or(fe[0][0])?se=se||fe[0][0].length:se=se||1;for(var ce=_e.shape(fe),Ie=1,Xe=0;Xe<ce.length;++Xe)Ie*=ce[Xe];var Ze=qS(W,Ie);_e.flatten(fe,ce,"",Ze),KS(W,Ze),W.alignment=1,W.width=Z,W.height=H,W.channels=se,W.format=W.internalformat=h0[se],W.needsFree=!0}W.type===op?E(Y.extensions.indexOf("oes_texture_float")>=0,"oes_texture_float extension not enabled"):W.type===jc&&E(Y.extensions.indexOf("oes_texture_half_float")>=0,"oes_texture_half_float extension not enabled")}function nt(W,me,fe){var mt=W.element,fn=W.data,$=W.internalformat,L=W.format,q=W.type,oe=W.width,he=W.height;Je(W),mt?w.texImage2D(me,fe,L,L,q,mt):W.compressed?w.compressedTexImage2D(me,fe,$,oe,he,0,fn):W.needsCopy?(pe(),w.copyTexImage2D(me,fe,L,W.xOffset,W.yOffset,oe,he,0)):w.texImage2D(me,fe,L,oe,he,0,L,q,fn||null)}function Kt(W,me,fe,mt,fn){var $=W.element,L=W.data,q=W.internalformat,oe=W.format,he=W.type,te=W.width,J=W.height;Je(W),$?w.texSubImage2D(me,fn,fe,mt,oe,he,$):W.compressed?w.compressedTexSubImage2D(me,fn,fe,mt,q,te,J,L):W.needsCopy?(pe(),w.copyTexSubImage2D(me,fn,fe,mt,W.xOffset,W.yOffset,te,J)):w.texSubImage2D(me,fn,fe,mt,te,J,oe,he,L)}var jt=[];function at(){return jt.pop()||new Ue}function ct(W){W.needsFree&&gn.freeType(W.data),Ue.call(W),jt.push(W)}function zt(){Te.call(this),this.genMipmaps=!1,this.mipmapHint=p0,this.mipmask=0,this.images=Array(16)}function Yt(W,me,fe){var mt=W.images[0]=at();W.mipmask=1,mt.width=W.width=me,mt.height=W.height=fe,mt.channels=W.channels=4}function un(W,me){var fe=null;if(Sx(me))fe=W.images[0]=at(),Ee(fe,W),tt(fe,me),W.mipmask=1;else if(gt(W,me),Array.isArray(me.mipmap))for(var mt=me.mipmap,fn=0;fn<mt.length;++fn)fe=W.images[fn]=at(),Ee(fe,W),fe.width>>=fn,fe.height>>=fn,tt(fe,mt[fn]),W.mipmask|=1<<fn;else fe=W.images[0]=at(),Ee(fe,W),tt(fe,me),W.mipmask=1;Ee(W,W.images[0]),W.compressed&&(W.internalformat===px||W.internalformat===hx||W.internalformat===mx||W.internalformat===gx)&&E(W.width%4===0&&W.height%4===0,"for compressed texture formats, mipmap level 0 must have width and height that are a multiple of 4")}function cr(W,me){for(var fe=W.images,mt=0;mt<fe.length;++mt){if(!fe[mt])return;nt(fe[mt],me,mt)}}var vr=[];function cn(){var W=vr.pop()||new zt;Te.call(W),W.mipmask=0;for(var me=0;me<16;++me)W.images[me]=null;return W}function ua(W){for(var me=W.images,fe=0;fe<me.length;++fe)me[fe]&&ct(me[fe]),me[fe]=null;vr.push(W)}function Jn(){this.minFilter=xx,this.magFilter=xx,this.wrapS=yx,this.wrapT=yx,this.anisotropic=1,this.genMipmaps=!1,this.mipmapHint=p0}function Wr(W,me){if("min"in me){var fe=me.min;E.parameter(fe,He),W.minFilter=He[fe],rV.indexOf(W.minFilter)>=0&&!("faces"in me)&&(W.genMipmaps=!0)}if("mag"in me){var mt=me.mag;E.parameter(mt,je),W.magFilter=je[mt]}var fn=W.wrapS,$=W.wrapT;if("wrap"in me){var L=me.wrap;typeof L=="string"?(E.parameter(L,De),fn=$=De[L]):Array.isArray(L)&&(E.parameter(L[0],De),E.parameter(L[1],De),fn=De[L[0]],$=De[L[1]])}else{if("wrapS"in me){var q=me.wrapS;E.parameter(q,De),fn=De[q]}if("wrapT"in me){var oe=me.wrapT;E.parameter(oe,De),$=De[oe]}}if(W.wrapS=fn,W.wrapT=$,"anisotropic"in me){var he=me.anisotropic;E(typeof he=="number"&&he>=1&&he<=Y.maxAnisotropic,"aniso samples must be between 1 and "),W.anisotropic=me.anisotropic}if("mipmap"in me){var te=!1;switch(typeof me.mipmap){case"string":E.parameter(me.mipmap,Pe,"invalid mipmap hint"),W.mipmapHint=Pe[me.mipmap],W.genMipmaps=!0,te=!0;break;case"boolean":te=W.genMipmaps=me.mipmap;break;case"object":E(Array.isArray(me.mipmap),"invalid mipmap type"),W.genMipmaps=!1,te=!0;break;default:E.raise("invalid mipmap type")}te&&!("min"in me)&&(W.minFilter=_x)}}function Mr(W,me){w.texParameteri(me,Y$,W.minFilter),w.texParameteri(me,W$,W.magFilter),w.texParameteri(me,V$,W.wrapS),w.texParameteri(me,j$,W.wrapT),F.ext_texture_filter_anisotropic&&w.texParameteri(me,Q$,W.anisotropic),W.genMipmaps&&(w.hint(Z$,W.mipmapHint),w.generateMipmap(me))}var Qr=0,ca={},ya=Y.maxTextureUnits,Rr=Array(ya).map(function(){return null});function tn(W){Te.call(this),this.mipmask=0,this.internalformat=Ru,this.id=Qr++,this.refCount=1,this.target=W,this.texture=w.createTexture(),this.unit=-1,this.bindCount=0,this.texInfo=new Jn,we.profile&&(this.stats={size:0})}function fa(W){w.activeTexture(sp),w.bindTexture(W.target,W.texture)}function In(){var W=Rr[0];W?w.bindTexture(W.target,W.texture):w.bindTexture(as,null)}function Jr(W){var me=W.texture;E(me,"must not double destroy texture");var fe=W.unit,mt=W.target;fe>=0&&(w.activeTexture(sp+fe),w.bindTexture(mt,null),Rr[fe]=null),w.deleteTexture(me),W.texture=null,W.params=null,W.pixels=null,W.refCount=0,delete ca[W.id],de.textureCount--}a(tn.prototype,{bind:function(){var W=this;W.bindCount+=1;var me=W.unit;if(me<0){for(var fe=0;fe<ya;++fe){var mt=Rr[fe];if(mt){if(mt.bindCount>0)continue;mt.unit=-1}Rr[fe]=W,me=fe;break}me>=ya&&E.raise("insufficient number of texture units"),we.profile&&de.maxTextureUnits<me+1&&(de.maxTextureUnits=me+1),W.unit=me,w.activeTexture(sp+me),w.bindTexture(W.target,W.texture)}return me},unbind:function(){this.bindCount-=1},decRef:function(){--this.refCount<=0&&Jr(this)}});function Vt(W,me){var fe=new tn(as);ca[fe.id]=fe,de.textureCount++;function mt(L,q){var oe=fe.texInfo;Jn.call(oe);var he=cn();return typeof L=="number"?typeof q=="number"?Yt(he,L|0,q|0):Yt(he,L|0,L|0):L?(E.type(L,"object","invalid arguments to regl.texture"),Wr(oe,L),un(he,L)):Yt(he,1,1),oe.genMipmaps&&(he.mipmask=(he.width<<1)-1),fe.mipmask=he.mipmask,Ee(fe,he),E.texture2D(oe,he,Y),fe.internalformat=he.internalformat,mt.width=he.width,mt.height=he.height,fa(fe),cr(he,as),Mr(oe,as),In(),ua(he),we.profile&&(fe.stats.size=m0(fe.internalformat,fe.type,he.width,he.height,oe.genMipmaps,!1)),mt.format=Ve[fe.internalformat],mt.type=dt[fe.type],mt.mag=Ne[oe.magFilter],mt.min=lt[oe.minFilter],mt.wrapS=rt[oe.wrapS],mt.wrapT=rt[oe.wrapT],mt}function fn(L,q,oe,he){E(!!L,"must specify image data");var te=q|0,J=oe|0,ne=he|0,B=at();return Ee(B,fe),B.width=0,B.height=0,tt(B,L),B.width=B.width||(fe.width>>ne)-te,B.height=B.height||(fe.height>>ne)-J,E(fe.type===B.type&&fe.format===B.format&&fe.internalformat===B.internalformat,"incompatible format for texture.subimage"),E(te>=0&&J>=0&&te+B.width<=fe.width&&J+B.height<=fe.height,"texture.subimage write out of bounds"),E(fe.mipmask&1<<ne,"missing mipmap data"),E(B.data||B.element||B.needsCopy,"missing image data"),fa(fe),Kt(B,as,te,J,ne),In(),ct(B),mt}function $(L,q){var oe=L|0,he=q|0||oe;if(oe===fe.width&&he===fe.height)return mt;mt.width=fe.width=oe,mt.height=fe.height=he,fa(fe);for(var te=0;fe.mipmask>>te;++te){var J=oe>>te,ne=he>>te;if(!J||!ne)break;w.texImage2D(as,te,fe.format,J,ne,0,fe.format,fe.type,null)}return In(),we.profile&&(fe.stats.size=m0(fe.internalformat,fe.type,oe,he,!1,!1)),mt}return mt(W,me),mt.subimage=fn,mt.resize=$,mt._reglType="texture2d",mt._texture=fe,we.profile&&(mt.stats=fe.stats),mt.destroy=function(){fe.decRef()},mt}function ln(W,me,fe,mt,fn,$){var L=new tn(sx);ca[L.id]=L,de.cubeCount++;var q=new Array(6);function oe(J,ne,B,Z,H,se){var ce,Ie=L.texInfo;for(Jn.call(Ie),ce=0;ce<6;++ce)q[ce]=cn();if(typeof J=="number"||!J){var Xe=J|0||1;for(ce=0;ce<6;++ce)Yt(q[ce],Xe,Xe)}else if(typeof J=="object")if(ne)un(q[0],J),un(q[1],ne),un(q[2],B),un(q[3],Z),un(q[4],H),un(q[5],se);else if(Wr(Ie,J),gt(L,J),"faces"in J){var Ze=J.faces;for(E(Array.isArray(Ze)&&Ze.length===6,"cube faces must be a length 6 array"),ce=0;ce<6;++ce)E(typeof Ze[ce]=="object"&&!!Ze[ce],"invalid input for cube map face"),Ee(q[ce],L),un(q[ce],Ze[ce])}else for(ce=0;ce<6;++ce)un(q[ce],J);else E.raise("invalid arguments to cube map");for(Ee(L,q[0]),E.optional(function(){Y.npotTextureCube||E(ES(L.width)&&ES(L.height),"your browser does not support non power or two texture dimensions")}),Ie.genMipmaps?L.mipmask=(q[0].width<<1)-1:L.mipmask=q[0].mipmask,E.textureCube(L,Ie,q,Y),L.internalformat=q[0].internalformat,oe.width=q[0].width,oe.height=q[0].height,fa(L),ce=0;ce<6;++ce)cr(q[ce],u0+ce);for(Mr(Ie,sx),In(),we.profile&&(L.stats.size=m0(L.internalformat,L.type,oe.width,oe.height,Ie.genMipmaps,!0)),oe.format=Ve[L.internalformat],oe.type=dt[L.type],oe.mag=Ne[Ie.magFilter],oe.min=lt[Ie.minFilter],oe.wrapS=rt[Ie.wrapS],oe.wrapT=rt[Ie.wrapT],ce=0;ce<6;++ce)ua(q[ce]);return oe}function he(J,ne,B,Z,H){E(!!ne,"must specify image data"),E(typeof J=="number"&&J===(J|0)&&J>=0&&J<6,"invalid face");var se=B|0,ce=Z|0,Ie=H|0,Xe=at();return Ee(Xe,L),Xe.width=0,Xe.height=0,tt(Xe,ne),Xe.width=Xe.width||(L.width>>Ie)-se,Xe.height=Xe.height||(L.height>>Ie)-ce,E(L.type===Xe.type&&L.format===Xe.format&&L.internalformat===Xe.internalformat,"incompatible format for texture.subimage"),E(se>=0&&ce>=0&&se+Xe.width<=L.width&&ce+Xe.height<=L.height,"texture.subimage write out of bounds"),E(L.mipmask&1<<Ie,"missing mipmap data"),E(Xe.data||Xe.element||Xe.needsCopy,"missing image data"),fa(L),Kt(Xe,u0+J,se,ce,Ie),In(),ct(Xe),oe}function te(J){var ne=J|0;if(ne!==L.width){oe.width=L.width=ne,oe.height=L.height=ne,fa(L);for(var B=0;B<6;++B)for(var Z=0;L.mipmask>>Z;++Z)w.texImage2D(u0+B,Z,L.format,ne>>Z,ne>>Z,0,L.format,L.type,null);return In(),we.profile&&(L.stats.size=m0(L.internalformat,L.type,oe.width,oe.height,!1,!0)),oe}}return oe(W,me,fe,mt,fn,$),oe.subimage=he,oe.resize=te,oe._reglType="textureCube",oe._texture=L,we.profile&&(oe.stats=L.stats),oe.destroy=function(){L.decRef()},oe}function $n(){for(var W=0;W<ya;++W)w.activeTexture(sp+W),w.bindTexture(as,null),Rr[W]=null;Q(ca).forEach(Jr),de.cubeCount=0,de.textureCount=0}we.profile&&(de.getTotalTextureSize=function(){var W=0;return Object.keys(ca).forEach(function(me){W+=ca[me].stats.size}),W});function $r(){for(var W=0;W<ya;++W){var me=Rr[W];me&&(me.bindCount=0,me.unit=-1,Rr[W]=null)}Q(ca).forEach(function(fe){fe.texture=w.createTexture(),w.bindTexture(fe.target,fe.texture);for(var mt=0;mt<32;++mt)if((fe.mipmask&1<<mt)!==0)if(fe.target===as)w.texImage2D(as,mt,fe.internalformat,fe.width>>mt,fe.height>>mt,0,fe.internalformat,fe.type,null);else for(var fn=0;fn<6;++fn)w.texImage2D(u0+fn,mt,fe.internalformat,fe.width>>mt,fe.height>>mt,0,fe.internalformat,fe.type,null);Mr(fe.texInfo,fe.target)})}function Fs(){for(var W=0;W<ya;++W){var me=Rr[W];me&&(me.bindCount=0,me.unit=-1,Rr[W]=null),w.activeTexture(sp+W),w.bindTexture(as,null),w.bindTexture(sx,null)}}return{create2D:Vt,createCube:ln,clear:$n,getTexture:function(W){return null},restore:$r,refresh:Fs}}var Cl=36161,g0=32854,QS=32855,JS=36194,e6=33189,t6=36168,n6=34041,r6=35907,a6=34836,i6=34842,o6=34843,Io=[];Io[g0]=2,Io[QS]=2,Io[JS]=2,Io[e6]=2,Io[t6]=1,Io[n6]=4,Io[r6]=4,Io[a6]=16,Io[i6]=8,Io[o6]=6;function s6(w,F,Y){return Io[w]*F*Y}var dV=function(w,F,Y,pe,Se){var de={rgba4:g0,rgb565:JS,"rgb5 a1":QS,depth:e6,stencil:t6,"depth stencil":n6};F.ext_srgb&&(de.srgba=r6),F.ext_color_buffer_half_float&&(de.rgba16f=i6,de.rgb16f=o6),F.webgl_color_buffer_float&&(de.rgba32f=a6);var we=[];Object.keys(de).forEach(function(Be){var Ge=de[Be];we[Ge]=Be});var Pe=0,De={};function je(Be){this.id=Pe++,this.refCount=1,this.renderbuffer=Be,this.format=g0,this.width=0,this.height=0,Se.profile&&(this.stats={size:0})}je.prototype.decRef=function(){--this.refCount<=0&&He(this)};function He(Be){var Ge=Be.renderbuffer;E(Ge,"must not double destroy renderbuffer"),w.bindRenderbuffer(Cl,null),w.deleteRenderbuffer(Ge),Be.renderbuffer=null,Be.refCount=0,delete De[Be.id],pe.renderbufferCount--}function We(Be,Ge){var ie=new je(w.createRenderbuffer());De[ie.id]=ie,pe.renderbufferCount++;function ye(dt,Ne){var lt=0,rt=0,Ft=g0;if(typeof dt=="object"&&dt){var Te=dt;if("shape"in Te){var Ee=Te.shape;E(Array.isArray(Ee)&&Ee.length>=2,"invalid renderbuffer shape"),lt=Ee[0]|0,rt=Ee[1]|0}else"radius"in Te&&(lt=rt=Te.radius|0),"width"in Te&&(lt=Te.width|0),"height"in Te&&(rt=Te.height|0);"format"in Te&&(E.parameter(Te.format,de,"invalid renderbuffer format"),Ft=de[Te.format])}else typeof dt=="number"?(lt=dt|0,typeof Ne=="number"?rt=Ne|0:rt=lt):dt?E.raise("invalid arguments to renderbuffer constructor"):lt=rt=1;if(E(lt>0&&rt>0&&lt<=Y.maxRenderbufferSize&&rt<=Y.maxRenderbufferSize,"invalid renderbuffer size"),!(lt===ie.width&&rt===ie.height&&Ft===ie.format))return ye.width=ie.width=lt,ye.height=ie.height=rt,ie.format=Ft,w.bindRenderbuffer(Cl,ie.renderbuffer),w.renderbufferStorage(Cl,Ft,lt,rt),E(w.getError()===0,"invalid render buffer format"),Se.profile&&(ie.stats.size=s6(ie.format,ie.width,ie.height)),ye.format=we[ie.format],ye}function Ve(dt,Ne){var lt=dt|0,rt=Ne|0||lt;return lt===ie.width&&rt===ie.height||(E(lt>0&&rt>0&&lt<=Y.maxRenderbufferSize&&rt<=Y.maxRenderbufferSize,"invalid renderbuffer size"),ye.width=ie.width=lt,ye.height=ie.height=rt,w.bindRenderbuffer(Cl,ie.renderbuffer),w.renderbufferStorage(Cl,ie.format,lt,rt),E(w.getError()===0,"invalid render buffer format"),Se.profile&&(ie.stats.size=s6(ie.format,ie.width,ie.height))),ye}return ye(Be,Ge),ye.resize=Ve,ye._reglType="renderbuffer",ye._renderbuffer=ie,Se.profile&&(ye.stats=ie.stats),ye.destroy=function(){ie.decRef()},ye}Se.profile&&(pe.getTotalRenderbufferSize=function(){var Be=0;return Object.keys(De).forEach(function(Ge){Be+=De[Ge].stats.size}),Be});function Ke(){Q(De).forEach(function(Be){Be.renderbuffer=w.createRenderbuffer(),w.bindRenderbuffer(Cl,Be.renderbuffer),w.renderbufferStorage(Cl,Be.format,Be.width,Be.height)}),w.bindRenderbuffer(Cl,null)}return{create:We,clear:function(){Q(De).forEach(He)},restore:Ke}},Ls=36160,Cx=36161,Iu=3553,v0=34069,l6=36064,u6=36096,c6=36128,f6=33306,d6=36053,pV=36054,hV=36055,mV=36057,gV=36061,vV=36193,bV=5121,yV=5126,p6=6407,h6=6408,xV=6402,_V=[p6,h6],Tx=[];Tx[h6]=4,Tx[p6]=3;var b0=[];b0[bV]=1,b0[yV]=4,b0[vV]=2;var wV=32854,kV=32855,EV=36194,SV=33189,CV=36168,m6=34041,TV=35907,AV=34836,OV=34842,MV=34843,RV=[wV,kV,EV,TV,OV,MV,AV],Yc={};Yc[d6]="complete",Yc[pV]="incomplete attachment",Yc[mV]="incomplete dimensions",Yc[hV]="incomplete, missing attachment",Yc[gV]="unsupported";function PV(w,F,Y,pe,Se,de){var we={cur:null,next:null,dirty:!1,setFBO:null},Pe=["rgba"],De=["rgba4","rgb565","rgb5 a1"];F.ext_srgb&&De.push("srgba"),F.ext_color_buffer_half_float&&De.push("rgba16f","rgb16f"),F.webgl_color_buffer_float&&De.push("rgba32f");var je=["uint8"];F.oes_texture_half_float&&je.push("half float","float16"),F.oes_texture_float&&je.push("float","float32");function He(Ue,tt,nt){this.target=Ue,this.texture=tt,this.renderbuffer=nt;var Kt=0,jt=0;tt?(Kt=tt.width,jt=tt.height):nt&&(Kt=nt.width,jt=nt.height),this.width=Kt,this.height=jt}function We(Ue){Ue&&(Ue.texture&&Ue.texture._texture.decRef(),Ue.renderbuffer&&Ue.renderbuffer._renderbuffer.decRef())}function Ke(Ue,tt,nt){if(!!Ue)if(Ue.texture){var Kt=Ue.texture._texture,jt=Math.max(1,Kt.width),at=Math.max(1,Kt.height);E(jt===tt&&at===nt,"inconsistent width/height for supplied texture"),Kt.refCount+=1}else{var ct=Ue.renderbuffer._renderbuffer;E(ct.width===tt&&ct.height===nt,"inconsistent width/height for renderbuffer"),ct.refCount+=1}}function Be(Ue,tt){tt&&(tt.texture?w.framebufferTexture2D(Ls,Ue,tt.target,tt.texture._texture.texture,0):w.framebufferRenderbuffer(Ls,Ue,Cx,tt.renderbuffer._renderbuffer.renderbuffer))}function Ge(Ue){var tt=Iu,nt=null,Kt=null,jt=Ue;typeof Ue=="object"&&(jt=Ue.data,"target"in Ue&&(tt=Ue.target|0)),E.type(jt,"function","invalid attachment data");var at=jt._reglType;return at==="texture2d"?(nt=jt,E(tt===Iu)):at==="textureCube"?(nt=jt,E(tt>=v0&&tt<v0+6,"invalid cube map target")):at==="renderbuffer"?(Kt=jt,tt=Cx):E.raise("invalid regl object for attachment"),new He(tt,nt,Kt)}function ie(Ue,tt,nt,Kt,jt){if(nt){var at=pe.create2D({width:Ue,height:tt,format:Kt,type:jt});return at._texture.refCount=0,new He(Iu,at,null)}else{var ct=Se.create({width:Ue,height:tt,format:Kt});return ct._renderbuffer.refCount=0,new He(Cx,null,ct)}}function ye(Ue){return Ue&&(Ue.texture||Ue.renderbuffer)}function Ve(Ue,tt,nt){Ue&&(Ue.texture?Ue.texture.resize(tt,nt):Ue.renderbuffer&&Ue.renderbuffer.resize(tt,nt),Ue.width=tt,Ue.height=nt)}var dt=0,Ne={};function lt(){this.id=dt++,Ne[this.id]=this,this.framebuffer=w.createFramebuffer(),this.width=0,this.height=0,this.colorAttachments=[],this.depthAttachment=null,this.stencilAttachment=null,this.depthStencilAttachment=null}function rt(Ue){Ue.colorAttachments.forEach(We),We(Ue.depthAttachment),We(Ue.stencilAttachment),We(Ue.depthStencilAttachment)}function Ft(Ue){var tt=Ue.framebuffer;E(tt,"must not double destroy framebuffer"),w.deleteFramebuffer(tt),Ue.framebuffer=null,de.framebufferCount--,delete Ne[Ue.id]}function Te(Ue){var tt;w.bindFramebuffer(Ls,Ue.framebuffer);var nt=Ue.colorAttachments;for(tt=0;tt<nt.length;++tt)Be(l6+tt,nt[tt]);for(tt=nt.length;tt<Y.maxColorAttachments;++tt)w.framebufferTexture2D(Ls,l6+tt,Iu,null,0);w.framebufferTexture2D(Ls,f6,Iu,null,0),w.framebufferTexture2D(Ls,u6,Iu,null,0),w.framebufferTexture2D(Ls,c6,Iu,null,0),Be(u6,Ue.depthAttachment),Be(c6,Ue.stencilAttachment),Be(f6,Ue.depthStencilAttachment);var Kt=w.checkFramebufferStatus(Ls);!w.isContextLost()&&Kt!==d6&&E.raise("framebuffer configuration not supported, status = "+Yc[Kt]),w.bindFramebuffer(Ls,we.next?we.next.framebuffer:null),we.cur=we.next,w.getError()}function Ee(Ue,tt){var nt=new lt;de.framebufferCount++;function Kt(at,ct){var zt;E(we.next!==nt,"can not update framebuffer which is currently in use");var Yt=0,un=0,cr=!0,vr=!0,cn=null,ua=!0,Jn="rgba",Wr="uint8",Mr=1,Qr=null,ca=null,ya=null,Rr=!1;if(typeof at=="number")Yt=at|0,un=ct|0||Yt;else if(!at)Yt=un=1;else{E.type(at,"object","invalid arguments for framebuffer");var tn=at;if("shape"in tn){var fa=tn.shape;E(Array.isArray(fa)&&fa.length>=2,"invalid shape for framebuffer"),Yt=fa[0],un=fa[1]}else"radius"in tn&&(Yt=un=tn.radius),"width"in tn&&(Yt=tn.width),"height"in tn&&(un=tn.height);("color"in tn||"colors"in tn)&&(cn=tn.color||tn.colors,Array.isArray(cn)&&E(cn.length===1||F.webgl_draw_buffers,"multiple render targets not supported")),cn||("colorCount"in tn&&(Mr=tn.colorCount|0,E(Mr>0,"invalid color buffer count")),"colorTexture"in tn&&(ua=!!tn.colorTexture,Jn="rgba4"),"colorType"in tn&&(Wr=tn.colorType,ua?(E(F.oes_texture_float||!(Wr==="float"||Wr==="float32"),"you must enable OES_texture_float in order to use floating point framebuffer objects"),E(F.oes_texture_half_float||!(Wr==="half float"||Wr==="float16"),"you must enable OES_texture_half_float in order to use 16-bit floating point framebuffer objects")):Wr==="half float"||Wr==="float16"?(E(F.ext_color_buffer_half_float,"you must enable EXT_color_buffer_half_float to use 16-bit render buffers"),Jn="rgba16f"):(Wr==="float"||Wr==="float32")&&(E(F.webgl_color_buffer_float,"you must enable WEBGL_color_buffer_float in order to use 32-bit floating point renderbuffers"),Jn="rgba32f"),E.oneOf(Wr,je,"invalid color type")),"colorFormat"in tn&&(Jn=tn.colorFormat,Pe.indexOf(Jn)>=0?ua=!0:De.indexOf(Jn)>=0?ua=!1:E.optional(function(){ua?E.oneOf(tn.colorFormat,Pe,"invalid color format for texture"):E.oneOf(tn.colorFormat,De,"invalid color format for renderbuffer")}))),("depthTexture"in tn||"depthStencilTexture"in tn)&&(Rr=!!(tn.depthTexture||tn.depthStencilTexture),E(!Rr||F.webgl_depth_texture,"webgl_depth_texture extension not supported")),"depth"in tn&&(typeof tn.depth=="boolean"?cr=tn.depth:(Qr=tn.depth,vr=!1)),"stencil"in tn&&(typeof tn.stencil=="boolean"?vr=tn.stencil:(ca=tn.stencil,cr=!1)),"depthStencil"in tn&&(typeof tn.depthStencil=="boolean"?cr=vr=tn.depthStencil:(ya=tn.depthStencil,cr=!1,vr=!1))}var In=null,Jr=null,Vt=null,ln=null;if(Array.isArray(cn))In=cn.map(Ge);else if(cn)In=[Ge(cn)];else for(In=new Array(Mr),zt=0;zt<Mr;++zt)In[zt]=ie(Yt,un,ua,Jn,Wr);E(F.webgl_draw_buffers||In.length<=1,"you must enable the WEBGL_draw_buffers extension in order to use multiple color buffers."),E(In.length<=Y.maxColorAttachments,"too many color attachments, not supported"),Yt=Yt||In[0].width,un=un||In[0].height,Qr?Jr=Ge(Qr):cr&&!vr&&(Jr=ie(Yt,un,Rr,"depth","uint32")),ca?Vt=Ge(ca):vr&&!cr&&(Vt=ie(Yt,un,!1,"stencil","uint8")),ya?ln=Ge(ya):!Qr&&!ca&&vr&&cr&&(ln=ie(Yt,un,Rr,"depth stencil","depth stencil")),E(!!Qr+!!ca+!!ya<=1,"invalid framebuffer configuration, can specify exactly one depth/stencil attachment");var $n=null;for(zt=0;zt<In.length;++zt)if(Ke(In[zt],Yt,un),E(!In[zt]||In[zt].texture&&_V.indexOf(In[zt].texture._texture.format)>=0||In[zt].renderbuffer&&RV.indexOf(In[zt].renderbuffer._renderbuffer.format)>=0,"framebuffer color attachment "+zt+" is invalid"),In[zt]&&In[zt].texture){var $r=Tx[In[zt].texture._texture.format]*b0[In[zt].texture._texture.type];$n===null?$n=$r:E($n===$r,"all color attachments much have the same number of bits per pixel.")}return Ke(Jr,Yt,un),E(!Jr||Jr.texture&&Jr.texture._texture.format===xV||Jr.renderbuffer&&Jr.renderbuffer._renderbuffer.format===SV,"invalid depth attachment for framebuffer object"),Ke(Vt,Yt,un),E(!Vt||Vt.renderbuffer&&Vt.renderbuffer._renderbuffer.format===CV,"invalid stencil attachment for framebuffer object"),Ke(ln,Yt,un),E(!ln||ln.texture&&ln.texture._texture.format===m6||ln.renderbuffer&&ln.renderbuffer._renderbuffer.format===m6,"invalid depth-stencil attachment for framebuffer object"),rt(nt),nt.width=Yt,nt.height=un,nt.colorAttachments=In,nt.depthAttachment=Jr,nt.stencilAttachment=Vt,nt.depthStencilAttachment=ln,Kt.color=In.map(ye),Kt.depth=ye(Jr),Kt.stencil=ye(Vt),Kt.depthStencil=ye(ln),Kt.width=nt.width,Kt.height=nt.height,Te(nt),Kt}function jt(at,ct){E(we.next!==nt,"can not resize a framebuffer which is currently in use");var zt=Math.max(at|0,1),Yt=Math.max(ct|0||zt,1);if(zt===nt.width&&Yt===nt.height)return Kt;for(var un=nt.colorAttachments,cr=0;cr<un.length;++cr)Ve(un[cr],zt,Yt);return Ve(nt.depthAttachment,zt,Yt),Ve(nt.stencilAttachment,zt,Yt),Ve(nt.depthStencilAttachment,zt,Yt),nt.width=Kt.width=zt,nt.height=Kt.height=Yt,Te(nt),Kt}return Kt(Ue,tt),a(Kt,{resize:jt,_reglType:"framebuffer",_framebuffer:nt,destroy:function(){Ft(nt),rt(nt)},use:function(at){we.setFBO({framebuffer:Kt},at)}})}function gt(Ue){var tt=Array(6);function nt(jt){var at;E(tt.indexOf(we.next)<0,"can not update framebuffer which is currently in use");var ct={color:null},zt=0,Yt=null,un="rgba",cr="uint8",vr=1;if(typeof jt=="number")zt=jt|0;else if(!jt)zt=1;else{E.type(jt,"object","invalid arguments for framebuffer");var cn=jt;if("shape"in cn){var ua=cn.shape;E(Array.isArray(ua)&&ua.length>=2,"invalid shape for framebuffer"),E(ua[0]===ua[1],"cube framebuffer must be square"),zt=ua[0]}else"radius"in cn&&(zt=cn.radius|0),"width"in cn?(zt=cn.width|0,"height"in cn&&E(cn.height===zt,"must be square")):"height"in cn&&(zt=cn.height|0);("color"in cn||"colors"in cn)&&(Yt=cn.color||cn.colors,Array.isArray(Yt)&&E(Yt.length===1||F.webgl_draw_buffers,"multiple render targets not supported")),Yt||("colorCount"in cn&&(vr=cn.colorCount|0,E(vr>0,"invalid color buffer count")),"colorType"in cn&&(E.oneOf(cn.colorType,je,"invalid color type"),cr=cn.colorType),"colorFormat"in cn&&(un=cn.colorFormat,E.oneOf(cn.colorFormat,Pe,"invalid color format for texture"))),"depth"in cn&&(ct.depth=cn.depth),"stencil"in cn&&(ct.stencil=cn.stencil),"depthStencil"in cn&&(ct.depthStencil=cn.depthStencil)}var Jn;if(Yt)if(Array.isArray(Yt))for(Jn=[],at=0;at<Yt.length;++at)Jn[at]=Yt[at];else Jn=[Yt];else{Jn=Array(vr);var Wr={radius:zt,format:un,type:cr};for(at=0;at<vr;++at)Jn[at]=pe.createCube(Wr)}for(ct.color=Array(Jn.length),at=0;at<Jn.length;++at){var Mr=Jn[at];E(typeof Mr=="function"&&Mr._reglType==="textureCube","invalid cube map"),zt=zt||Mr.width,E(Mr.width===zt&&Mr.height===zt,"invalid cube map shape"),ct.color[at]={target:v0,data:Jn[at]}}for(at=0;at<6;++at){for(var Qr=0;Qr<Jn.length;++Qr)ct.color[Qr].target=v0+at;at>0&&(ct.depth=tt[0].depth,ct.stencil=tt[0].stencil,ct.depthStencil=tt[0].depthStencil),tt[at]?tt[at](ct):tt[at]=Ee(ct)}return a(nt,{width:zt,height:zt,color:Jn})}function Kt(jt){var at,ct=jt|0;if(E(ct>0&&ct<=Y.maxCubeMapSize,"invalid radius for cube fbo"),ct===nt.width)return nt;var zt=nt.color;for(at=0;at<zt.length;++at)zt[at].resize(ct);for(at=0;at<6;++at)tt[at].resize(ct);return nt.width=nt.height=ct,nt}return nt(Ue),a(nt,{faces:tt,resize:Kt,_reglType:"framebufferCube",destroy:function(){tt.forEach(function(jt){jt.destroy()})}})}function Je(){we.cur=null,we.next=null,we.dirty=!0,Q(Ne).forEach(function(Ue){Ue.framebuffer=w.createFramebuffer(),Te(Ue)})}return a(we,{getFramebuffer:function(Ue){if(typeof Ue=="function"&&Ue._reglType==="framebuffer"){var tt=Ue._framebuffer;if(tt instanceof lt)return tt}return null},create:Ee,createCube:gt,clear:function(){Q(Ne).forEach(Ft)},restore:Je})}var IV=5126,g6=34962,y0=34963,v6=["attributes","elements","offset","count","primitive","instances"];function Ax(){this.state=0,this.x=0,this.y=0,this.z=0,this.w=0,this.buffer=null,this.size=0,this.normalized=!1,this.type=IV,this.offset=0,this.stride=0,this.divisor=0}function LV(w,F,Y,pe,Se,de,we){for(var Pe=Y.maxAttributes,De=new Array(Pe),je=0;je<Pe;++je)De[je]=new Ax;var He=0,We={},Ke={Record:Ax,scope:{},state:De,currentVAO:null,targetVAO:null,restore:Ge()?rt:function(){},createVAO:Ft,getVAO:ye,destroyBuffer:Be,setVAO:Ge()?Ve:dt,clear:Ge()?Ne:function(){}};function Be(Te){for(var Ee=0;Ee<De.length;++Ee){var gt=De[Ee];gt.buffer===Te&&(w.disableVertexAttribArray(Ee),gt.buffer=null)}}function Ge(){return F.oes_vertex_array_object}function ie(){return F.angle_instanced_arrays}function ye(Te){return typeof Te=="function"&&Te._vao?Te._vao:null}function Ve(Te){if(Te!==Ke.currentVAO){var Ee=Ge();Te?Ee.bindVertexArrayOES(Te.vao):Ee.bindVertexArrayOES(null),Ke.currentVAO=Te}}function dt(Te){if(Te!==Ke.currentVAO){if(Te)Te.bindAttrs();else{for(var Ee=ie(),gt=0;gt<De.length;++gt){var Je=De[gt];Je.buffer?(w.enableVertexAttribArray(gt),Je.buffer.bind(),w.vertexAttribPointer(gt,Je.size,Je.type,Je.normalized,Je.stride,Je.offfset),Ee&&Je.divisor&&Ee.vertexAttribDivisorANGLE(gt,Je.divisor)):(w.disableVertexAttribArray(gt),w.vertexAttrib4f(gt,Je.x,Je.y,Je.z,Je.w))}we.elements?w.bindBuffer(y0,we.elements.buffer.buffer):w.bindBuffer(y0,null)}Ke.currentVAO=Te}}function Ne(){Q(We).forEach(function(Te){Te.destroy()})}function lt(){this.id=++He,this.attributes=[],this.elements=null,this.ownsElements=!1,this.count=0,this.offset=0,this.instances=-1,this.primitive=4;var Te=Ge();Te?this.vao=Te.createVertexArrayOES():this.vao=null,We[this.id]=this,this.buffers=[]}lt.prototype.bindAttrs=function(){for(var Te=ie(),Ee=this.attributes,gt=0;gt<Ee.length;++gt){var Je=Ee[gt];Je.buffer?(w.enableVertexAttribArray(gt),w.bindBuffer(g6,Je.buffer.buffer),w.vertexAttribPointer(gt,Je.size,Je.type,Je.normalized,Je.stride,Je.offset),Te&&Je.divisor&&Te.vertexAttribDivisorANGLE(gt,Je.divisor)):(w.disableVertexAttribArray(gt),w.vertexAttrib4f(gt,Je.x,Je.y,Je.z,Je.w))}for(var Ue=Ee.length;Ue<Pe;++Ue)w.disableVertexAttribArray(Ue);var tt=de.getElements(this.elements);tt?w.bindBuffer(y0,tt.buffer.buffer):w.bindBuffer(y0,null)},lt.prototype.refresh=function(){var Te=Ge();Te&&(Te.bindVertexArrayOES(this.vao),this.bindAttrs(),Ke.currentVAO=null,Te.bindVertexArrayOES(null))},lt.prototype.destroy=function(){if(this.vao){var Te=Ge();this===Ke.currentVAO&&(Ke.currentVAO=null,Te.bindVertexArrayOES(null)),Te.deleteVertexArrayOES(this.vao),this.vao=null}this.ownsElements&&(this.elements.destroy(),this.elements=null,this.ownsElements=!1),We[this.id]&&(delete We[this.id],pe.vaoCount-=1)};function rt(){var Te=Ge();Te&&Q(We).forEach(function(Ee){Ee.refresh()})}function Ft(Te){var Ee=new lt;pe.vaoCount+=1;function gt(Je){var Ue;if(Array.isArray(Je))Ue=Je,Ee.elements&&Ee.ownsElements&&Ee.elements.destroy(),Ee.elements=null,Ee.ownsElements=!1,Ee.offset=0,Ee.count=0,Ee.instances=-1,Ee.primitive=4;else{if(E(typeof Je=="object","invalid arguments for create vao"),E("attributes"in Je,"must specify attributes for vao"),Je.elements){var tt=Je.elements;Ee.ownsElements?typeof tt=="function"&&tt._reglType==="elements"?(Ee.elements.destroy(),Ee.ownsElements=!1):(Ee.elements(tt),Ee.ownsElements=!1):de.getElements(Je.elements)?(Ee.elements=Je.elements,Ee.ownsElements=!1):(Ee.elements=de.create(Je.elements),Ee.ownsElements=!0)}else Ee.elements=null,Ee.ownsElements=!1;Ue=Je.attributes,Ee.offset=0,Ee.count=-1,Ee.instances=-1,Ee.primitive=4,Ee.elements&&(Ee.count=Ee.elements._elements.vertCount,Ee.primitive=Ee.elements._elements.primType),"offset"in Je&&(Ee.offset=Je.offset|0),"count"in Je&&(Ee.count=Je.count|0),"instances"in Je&&(Ee.instances=Je.instances|0),"primitive"in Je&&(E(Je.primitive in Sl,"bad primitive type: "+Je.primitive),Ee.primitive=Sl[Je.primitive]),E.optional(function(){for(var cr=Object.keys(Je),vr=0;vr<cr.length;++vr)E(v6.indexOf(cr[vr])>=0,'invalid option for vao: "'+cr[vr]+'" valid options are '+v6)}),E(Array.isArray(Ue),"attributes must be an array")}E(Ue.length<Pe,"too many attributes"),E(Ue.length>0,"must specify at least one attribute");var nt={},Kt=Ee.attributes;Kt.length=Ue.length;for(var jt=0;jt<Ue.length;++jt){var at=Ue[jt],ct=Kt[jt]=new Ax,zt=at.data||at;if(Array.isArray(zt)||r(zt)||U(zt)){var Yt;Ee.buffers[jt]&&(Yt=Ee.buffers[jt],r(zt)&&Yt._buffer.byteLength>=zt.byteLength?Yt.subdata(zt):(Yt.destroy(),Ee.buffers[jt]=null)),Ee.buffers[jt]||(Yt=Ee.buffers[jt]=Se.create(at,g6,!1,!0)),ct.buffer=Se.getBuffer(Yt),ct.size=ct.buffer.dimension|0,ct.normalized=!1,ct.type=ct.buffer.dtype,ct.offset=0,ct.stride=0,ct.divisor=0,ct.state=1,nt[jt]=1}else Se.getBuffer(at)?(ct.buffer=Se.getBuffer(at),ct.size=ct.buffer.dimension|0,ct.normalized=!1,ct.type=ct.buffer.dtype,ct.offset=0,ct.stride=0,ct.divisor=0,ct.state=1):Se.getBuffer(at.buffer)?(ct.buffer=Se.getBuffer(at.buffer),ct.size=(+at.size||ct.buffer.dimension)|0,ct.normalized=!!at.normalized||!1,"type"in at?(E.parameter(at.type,Ou,"invalid buffer type"),ct.type=Ou[at.type]):ct.type=ct.buffer.dtype,ct.offset=(at.offset||0)|0,ct.stride=(at.stride||0)|0,ct.divisor=(at.divisor||0)|0,ct.state=1,E(ct.size>=1&&ct.size<=4,"size must be between 1 and 4"),E(ct.offset>=0,"invalid offset"),E(ct.stride>=0&&ct.stride<=255,"stride must be between 0 and 255"),E(ct.divisor>=0,"divisor must be positive"),E(!ct.divisor||!!F.angle_instanced_arrays,"ANGLE_instanced_arrays must be enabled to use divisor")):"x"in at?(E(jt>0,"first attribute must not be a constant"),ct.x=+at.x||0,ct.y=+at.y||0,ct.z=+at.z||0,ct.w=+at.w||0,ct.state=2):E(!1,"invalid attribute spec for location "+jt)}for(var un=0;un<Ee.buffers.length;++un)!nt[un]&&Ee.buffers[un]&&(Ee.buffers[un].destroy(),Ee.buffers[un]=null);return Ee.refresh(),gt}return gt.destroy=function(){for(var Je=0;Je<Ee.buffers.length;++Je)Ee.buffers[Je]&&Ee.buffers[Je].destroy();Ee.buffers.length=0,Ee.ownsElements&&(Ee.elements.destroy(),Ee.elements=null,Ee.ownsElements=!1),Ee.destroy()},gt._vao=Ee,gt._reglType="vao",gt(Te)}return Ke}var b6=35632,NV=35633,FV=35718,DV=35721;function BV(w,F,Y,pe){var Se={},de={};function we(ie,ye,Ve,dt){this.name=ie,this.id=ye,this.location=Ve,this.info=dt}function Pe(ie,ye){for(var Ve=0;Ve<ie.length;++Ve)if(ie[Ve].id===ye.id){ie[Ve].location=ye.location;return}ie.push(ye)}function De(ie,ye,Ve){var dt=ie===b6?Se:de,Ne=dt[ye];if(!Ne){var lt=F.str(ye);Ne=w.createShader(ie),w.shaderSource(Ne,lt),w.compileShader(Ne),E.shaderError(w,Ne,lt,ie,Ve),dt[ye]=Ne}return Ne}var je={},He=[],We=0;function Ke(ie,ye){this.id=We++,this.fragId=ie,this.vertId=ye,this.program=null,this.uniforms=[],this.attributes=[],this.refCount=1,pe.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function Be(ie,ye,Ve){var dt,Ne,lt=De(b6,ie.fragId),rt=De(NV,ie.vertId),Ft=ie.program=w.createProgram();if(w.attachShader(Ft,lt),w.attachShader(Ft,rt),Ve)for(dt=0;dt<Ve.length;++dt){var Te=Ve[dt];w.bindAttribLocation(Ft,Te[0],Te[1])}w.linkProgram(Ft),E.linkError(w,Ft,F.str(ie.fragId),F.str(ie.vertId),ye);var Ee=w.getProgramParameter(Ft,FV);pe.profile&&(ie.stats.uniformsCount=Ee);var gt=ie.uniforms;for(dt=0;dt<Ee;++dt)if(Ne=w.getActiveUniform(Ft,dt),Ne)if(Ne.size>1)for(var Je=0;Je<Ne.size;++Je){var Ue=Ne.name.replace("[0]","["+Je+"]");Pe(gt,new we(Ue,F.id(Ue),w.getUniformLocation(Ft,Ue),Ne))}else Pe(gt,new we(Ne.name,F.id(Ne.name),w.getUniformLocation(Ft,Ne.name),Ne));var tt=w.getProgramParameter(Ft,DV);pe.profile&&(ie.stats.attributesCount=tt);var nt=ie.attributes;for(dt=0;dt<tt;++dt)Ne=w.getActiveAttrib(Ft,dt),Ne&&Pe(nt,new we(Ne.name,F.id(Ne.name),w.getAttribLocation(Ft,Ne.name),Ne))}pe.profile&&(Y.getMaxUniformsCount=function(){var ie=0;return He.forEach(function(ye){ye.stats.uniformsCount>ie&&(ie=ye.stats.uniformsCount)}),ie},Y.getMaxAttributesCount=function(){var ie=0;return He.forEach(function(ye){ye.stats.attributesCount>ie&&(ie=ye.stats.attributesCount)}),ie});function Ge(){Se={},de={};for(var ie=0;ie<He.length;++ie)Be(He[ie],null,He[ie].attributes.map(function(ye){return[ye.location,ye.name]}))}return{clear:function(){var ie=w.deleteShader.bind(w);Q(Se).forEach(ie),Se={},Q(de).forEach(ie),de={},He.forEach(function(ye){w.deleteProgram(ye.program)}),He.length=0,je={},Y.shaderCount=0},program:function(ie,ye,Ve,dt){E.command(ie>=0,"missing vertex shader",Ve),E.command(ye>=0,"missing fragment shader",Ve);var Ne=je[ye];Ne||(Ne=je[ye]={});var lt=Ne[ie];if(lt&&(lt.refCount++,!dt))return lt;var rt=new Ke(ye,ie);return Y.shaderCount++,Be(rt,Ve,dt),lt||(Ne[ie]=rt),He.push(rt),a(rt,{destroy:function(){if(rt.refCount--,rt.refCount<=0){w.deleteProgram(rt.program);var Ft=He.indexOf(rt);He.splice(Ft,1),Y.shaderCount--}Ne[rt.vertId].refCount<=0&&(w.deleteShader(de[rt.vertId]),delete de[rt.vertId],delete je[rt.fragId][rt.vertId]),Object.keys(je[rt.fragId]).length||(w.deleteShader(Se[rt.fragId]),delete Se[rt.fragId],delete je[rt.fragId])}})},restore:Ge,shader:De,frag:-1,vert:-1}}var zV=6408,lp=5121,UV=3333,x0=5126;function $V(w,F,Y,pe,Se,de,we){function Pe(He){var We;F.next===null?(E(Se.preserveDrawingBuffer,'you must create a webgl context with "preserveDrawingBuffer":true in order to read pixels from the drawing buffer'),We=lp):(E(F.next.colorAttachments[0].texture!==null,"You cannot read from a renderbuffer"),We=F.next.colorAttachments[0].texture._texture.type,E.optional(function(){de.oes_texture_float?(E(We===lp||We===x0,"Reading from a framebuffer is only allowed for the types 'uint8' and 'float'"),We===x0&&E(we.readFloat,"Reading 'float' values is not permitted in your browser. For a fallback, please see: https://www.npmjs.com/package/glsl-read-float")):E(We===lp,"Reading from a framebuffer is only allowed for the type 'uint8'")}));var Ke=0,Be=0,Ge=pe.framebufferWidth,ie=pe.framebufferHeight,ye=null;r(He)?ye=He:He&&(E.type(He,"object","invalid arguments to regl.read()"),Ke=He.x|0,Be=He.y|0,E(Ke>=0&&Ke<pe.framebufferWidth,"invalid x offset for regl.read"),E(Be>=0&&Be<pe.framebufferHeight,"invalid y offset for regl.read"),Ge=(He.width||pe.framebufferWidth-Ke)|0,ie=(He.height||pe.framebufferHeight-Be)|0,ye=He.data||null),ye&&(We===lp?E(ye instanceof Uint8Array,"buffer must be 'Uint8Array' when reading from a framebuffer of type 'uint8'"):We===x0&&E(ye instanceof Float32Array,"buffer must be 'Float32Array' when reading from a framebuffer of type 'float'")),E(Ge>0&&Ge+Ke<=pe.framebufferWidth,"invalid width for read pixels"),E(ie>0&&ie+Be<=pe.framebufferHeight,"invalid height for read pixels"),Y();var Ve=Ge*ie*4;return ye||(We===lp?ye=new Uint8Array(Ve):We===x0&&(ye=ye||new Float32Array(Ve))),E.isTypedArray(ye,"data buffer for regl.read() must be a typedarray"),E(ye.byteLength>=Ve,"data buffer for regl.read() too small"),w.pixelStorei(UV,4),w.readPixels(Ke,Be,Ge,ie,zV,We,ye),ye}function De(He){var We;return F.setFBO({framebuffer:He.framebuffer},function(){We=Pe(He)}),We}function je(He){return!He||!("framebuffer"in He)?Pe(He):De(He)}return je}function Xc(w){return Array.prototype.slice.call(w)}function Zc(w){return Xc(w).join("")}function VV(){var w=0,F=[],Y=[];function pe(We){for(var Ke=0;Ke<Y.length;++Ke)if(Y[Ke]===We)return F[Ke];var Be="g"+w++;return F.push(Be),Y.push(We),Be}function Se(){var We=[];function Ke(){We.push.apply(We,Xc(arguments))}var Be=[];function Ge(){var ie="v"+w++;return Be.push(ie),arguments.length>0&&(We.push(ie,"="),We.push.apply(We,Xc(arguments)),We.push(";")),ie}return a(Ke,{def:Ge,toString:function(){return Zc([Be.length>0?"var "+Be.join(",")+";":"",Zc(We)])}})}function de(){var We=Se(),Ke=Se(),Be=We.toString,Ge=Ke.toString;function ie(ye,Ve){Ke(ye,Ve,"=",We.def(ye,Ve),";")}return a(function(){We.apply(We,Xc(arguments))},{def:We.def,entry:We,exit:Ke,save:ie,set:function(ye,Ve,dt){ie(ye,Ve),We(ye,Ve,"=",dt,";")},toString:function(){return Be()+Ge()}})}function we(){var We=Zc(arguments),Ke=de(),Be=de(),Ge=Ke.toString,ie=Be.toString;return a(Ke,{then:function(){return Ke.apply(Ke,Xc(arguments)),this},else:function(){return Be.apply(Be,Xc(arguments)),this},toString:function(){var ye=ie();return ye&&(ye="else{"+ye+"}"),Zc(["if(",We,"){",Ge(),"}",ye])}})}var Pe=Se(),De={};function je(We,Ke){var Be=[];function Ge(){var Ne="a"+Be.length;return Be.push(Ne),Ne}Ke=Ke||0;for(var ie=0;ie<Ke;++ie)Ge();var ye=de(),Ve=ye.toString,dt=De[We]=a(ye,{arg:Ge,toString:function(){return Zc(["function(",Be.join(),"){",Ve(),"}"])}});return dt}function He(){var We=['"use strict";',Pe,"return {"];Object.keys(De).forEach(function(ie){We.push('"',ie,'":',De[ie].toString(),",")}),We.push("}");var Ke=Zc(We).replace(/;/g,`;
`).replace(/}/g,`}
`).replace(/{/g,`{
`),Be=typeof my!="undefined"&&!!my&&typeof my.showToast=="function"&&my.isFRM!==!0,Ge=Be?n.Function.apply(null,F.concat(Ke)):Function.apply(null,F.concat(Ke));return Ge.apply(null,Y)}return{global:Pe,link:pe,block:Se,proc:je,scope:de,cond:we,compile:He}}var qc="xyzw".split(""),y6=5121,Kc=1,Ox=2,Mx=0,Rx=1,Px=2,Ix=3,_0=4,x6=5,_6=6,w6="dither",k6="blend.enable",E6="blend.color",Lx="blend.equation",Nx="blend.func",S6="depth.enable",C6="depth.func",T6="depth.range",A6="depth.mask",Fx="colorMask",O6="cull.enable",M6="cull.face",Dx="frontFace",Bx="lineWidth",R6="polygonOffset.enable",zx="polygonOffset.offset",P6="sample.alpha",I6="sample.enable",Ux="sample.coverage",L6="stencil.enable",N6="stencil.mask",$x="stencil.func",Vx="stencil.opFront",up="stencil.opBack",F6="scissor.enable",w0="scissor.box",Ns="viewport",cp="profile",Lu="framebuffer",fp="vert",dp="frag",Nu="elements",Fu="primitive",Du="count",k0="offset",E0="instances",pp="vao",jx="Width",Gx="Height",Qc=Lu+jx,Jc=Lu+Gx,jV=Ns+jx,GV=Ns+Gx,D6="drawingBuffer",B6=D6+jx,z6=D6+Gx,HV=[Nx,Lx,$x,Vx,up,Ux,Ns,w0,zx],ef=34962,Hx=34963,WV=35632,YV=35633,U6=3553,XV=34067,ZV=2884,qV=3042,KV=3024,QV=2960,JV=2929,ej=3089,tj=32823,nj=32926,rj=32928,Wx=5126,S0=35664,C0=35665,T0=35666,Yx=5124,A0=35667,O0=35668,M0=35669,Xx=35670,R0=35671,P0=35672,I0=35673,hp=35674,mp=35675,gp=35676,vp=35678,bp=35680,Zx=4,yp=1028,Bu=1029,$6=2304,qx=2305,aj=32775,ij=32776,oj=519,Tl=7680,V6=0,j6=1,G6=32774,sj=513,H6=36160,lj=36064,is={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},W6=["constant color, constant alpha","one minus constant color, constant alpha","constant color, one minus constant alpha","one minus constant color, one minus constant alpha","constant alpha, constant color","constant alpha, one minus constant color","one minus constant alpha, constant color","one minus constant alpha, one minus constant color"],tf={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},Al={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},Y6={frag:WV,vert:YV},Kx={cw:$6,ccw:qx};function L0(w){return Array.isArray(w)||r(w)||U(w)}function X6(w){return w.sort(function(F,Y){return F===Ns?-1:Y===Ns?1:F<Y?-1:1})}function Kr(w,F,Y,pe){this.thisDep=w,this.contextDep=F,this.propDep=Y,this.append=pe}function Ol(w){return w&&!(w.thisDep||w.contextDep||w.propDep)}function Ur(w){return new Kr(!1,!1,!1,w)}function vi(w,F){var Y=w.type;if(Y===Mx){var pe=w.data.length;return new Kr(!0,pe>=1,pe>=2,F)}else if(Y===_0){var Se=w.data;return new Kr(Se.thisDep,Se.contextDep,Se.propDep,F)}else{if(Y===x6)return new Kr(!1,!1,!1,F);if(Y===_6){for(var de=!1,we=!1,Pe=!1,De=0;De<w.data.length;++De){var je=w.data[De];if(je.type===Rx)Pe=!0;else if(je.type===Px)we=!0;else if(je.type===Ix)de=!0;else if(je.type===Mx){de=!0;var He=je.data;He>=1&&(we=!0),He>=2&&(Pe=!0)}else je.type===_0&&(de=de||je.data.thisDep,we=we||je.data.contextDep,Pe=Pe||je.data.propDep)}return new Kr(de,we,Pe,F)}else return new Kr(Y===Ix,Y===Px,Y===Rx,F)}}var Z6=new Kr(!1,!1,!1,function(){});function uj(w,F,Y,pe,Se,de,we,Pe,De,je,He,We,Ke,Be,Ge){var ie=je.Record,ye={add:32774,subtract:32778,"reverse subtract":32779};Y.ext_blend_minmax&&(ye.min=aj,ye.max=ij);var Ve=Y.angle_instanced_arrays,dt=Y.webgl_draw_buffers,Ne=Y.oes_vertex_array_object,lt={dirty:!0,profile:Ge.profile},rt={},Ft=[],Te={},Ee={};function gt($){return $.replace(".","_")}function Je($,L,q){var oe=gt($);Ft.push($),rt[oe]=lt[oe]=!!q,Te[oe]=L}function Ue($,L,q){var oe=gt($);Ft.push($),Array.isArray(q)?(lt[oe]=q.slice(),rt[oe]=q.slice()):lt[oe]=rt[oe]=q,Ee[oe]=L}Je(w6,KV),Je(k6,qV),Ue(E6,"blendColor",[0,0,0,0]),Ue(Lx,"blendEquationSeparate",[G6,G6]),Ue(Nx,"blendFuncSeparate",[j6,V6,j6,V6]),Je(S6,JV,!0),Ue(C6,"depthFunc",sj),Ue(T6,"depthRange",[0,1]),Ue(A6,"depthMask",!0),Ue(Fx,Fx,[!0,!0,!0,!0]),Je(O6,ZV),Ue(M6,"cullFace",Bu),Ue(Dx,Dx,qx),Ue(Bx,Bx,1),Je(R6,tj),Ue(zx,"polygonOffset",[0,0]),Je(P6,nj),Je(I6,rj),Ue(Ux,"sampleCoverage",[1,!1]),Je(L6,QV),Ue(N6,"stencilMask",-1),Ue($x,"stencilFunc",[oj,0,-1]),Ue(Vx,"stencilOpSeparate",[yp,Tl,Tl,Tl]),Ue(up,"stencilOpSeparate",[Bu,Tl,Tl,Tl]),Je(F6,ej),Ue(w0,"scissor",[0,0,w.drawingBufferWidth,w.drawingBufferHeight]),Ue(Ns,Ns,[0,0,w.drawingBufferWidth,w.drawingBufferHeight]);var tt={gl:w,context:Ke,strings:F,next:rt,current:lt,draw:We,elements:de,buffer:Se,shader:He,attributes:je.state,vao:je,uniforms:De,framebuffer:Pe,extensions:Y,timer:Be,isBufferArgs:L0},nt={primTypes:Sl,compareFuncs:tf,blendFuncs:is,blendEquations:ye,stencilOps:Al,glTypes:Ou,orientationType:Kx};E.optional(function(){tt.isArrayLike=Or}),dt&&(nt.backBuffer=[Bu],nt.drawBuffer=hn(pe.maxDrawbuffers,function($){return $===0?[0]:hn($,function(L){return lj+L})}));var Kt=0;function jt(){var $=VV(),L=$.link,q=$.global;$.id=Kt++,$.batchId="0";var oe=L(tt),he=$.shared={props:"a0"};Object.keys(tt).forEach(function(Z){he[Z]=q.def(oe,".",Z)}),E.optional(function(){$.CHECK=L(E),$.commandStr=E.guessCommand(),$.command=L($.commandStr),$.assert=function(Z,H,se){Z("if(!(",H,"))",this.CHECK,".commandRaise(",L(se),",",this.command,");")},nt.invalidBlendCombinations=W6});var te=$.next={},J=$.current={};Object.keys(Ee).forEach(function(Z){Array.isArray(lt[Z])&&(te[Z]=q.def(he.next,".",Z),J[Z]=q.def(he.current,".",Z))});var ne=$.constants={};Object.keys(nt).forEach(function(Z){ne[Z]=q.def(JSON.stringify(nt[Z]))}),$.invoke=function(Z,H){switch(H.type){case Mx:var se=["this",he.context,he.props,$.batchId];return Z.def(L(H.data),".call(",se.slice(0,Math.max(H.data.length+1,4)),")");case Rx:return Z.def(he.props,H.data);case Px:return Z.def(he.context,H.data);case Ix:return Z.def("this",H.data);case _0:return H.data.append($,Z),H.data.ref;case x6:return H.data.toString();case _6:return H.data.map(function(ce){return $.invoke(Z,ce)})}},$.attribCache={};var B={};return $.scopeAttrib=function(Z){var H=F.id(Z);if(H in B)return B[H];var se=je.scope[H];se||(se=je.scope[H]=new ie);var ce=B[H]=L(se);return ce},$}function at($){var L=$.static,q=$.dynamic,oe;if(cp in L){var he=!!L[cp];oe=Ur(function(J,ne){return he}),oe.enable=he}else if(cp in q){var te=q[cp];oe=vi(te,function(J,ne){return J.invoke(ne,te)})}return oe}function ct($,L){var q=$.static,oe=$.dynamic;if(Lu in q){var he=q[Lu];return he?(he=Pe.getFramebuffer(he),E.command(he,"invalid framebuffer object"),Ur(function(J,ne){var B=J.link(he),Z=J.shared;ne.set(Z.framebuffer,".next",B);var H=Z.context;return ne.set(H,"."+Qc,B+".width"),ne.set(H,"."+Jc,B+".height"),B})):Ur(function(J,ne){var B=J.shared;ne.set(B.framebuffer,".next","null");var Z=B.context;return ne.set(Z,"."+Qc,Z+"."+B6),ne.set(Z,"."+Jc,Z+"."+z6),"null"})}else if(Lu in oe){var te=oe[Lu];return vi(te,function(J,ne){var B=J.invoke(ne,te),Z=J.shared,H=Z.framebuffer,se=ne.def(H,".getFramebuffer(",B,")");E.optional(function(){J.assert(ne,"!"+B+"||"+se,"invalid framebuffer object")}),ne.set(H,".next",se);var ce=Z.context;return ne.set(ce,"."+Qc,se+"?"+se+".width:"+ce+"."+B6),ne.set(ce,"."+Jc,se+"?"+se+".height:"+ce+"."+z6),se})}else return null}function zt($,L,q){var oe=$.static,he=$.dynamic;function te(B){if(B in oe){var Z=oe[B];E.commandType(Z,"object","invalid "+B,q.commandStr);var H=!0,se=Z.x|0,ce=Z.y|0,Ie,Xe;return"width"in Z?(Ie=Z.width|0,E.command(Ie>=0,"invalid "+B,q.commandStr)):H=!1,"height"in Z?(Xe=Z.height|0,E.command(Xe>=0,"invalid "+B,q.commandStr)):H=!1,new Kr(!H&&L&&L.thisDep,!H&&L&&L.contextDep,!H&&L&&L.propDep,function(Ye,_t){var pt=Ye.shared.context,vt=Ie;"width"in Z||(vt=_t.def(pt,".",Qc,"-",se));var bt=Xe;return"height"in Z||(bt=_t.def(pt,".",Jc,"-",ce)),[se,ce,vt,bt]})}else if(B in he){var Ze=he[B],it=vi(Ze,function(Ye,_t){var pt=Ye.invoke(_t,Ze);E.optional(function(){Ye.assert(_t,pt+"&&typeof "+pt+'==="object"',"invalid "+B)});var vt=Ye.shared.context,bt=_t.def(pt,".x|0"),wt=_t.def(pt,".y|0"),Ut=_t.def('"width" in ',pt,"?",pt,".width|0:","(",vt,".",Qc,"-",bt,")"),Kn=_t.def('"height" in ',pt,"?",pt,".height|0:","(",vt,".",Jc,"-",wt,")");return E.optional(function(){Ye.assert(_t,Ut+">=0&&"+Kn+">=0","invalid "+B)}),[bt,wt,Ut,Kn]});return L&&(it.thisDep=it.thisDep||L.thisDep,it.contextDep=it.contextDep||L.contextDep,it.propDep=it.propDep||L.propDep),it}else return L?new Kr(L.thisDep,L.contextDep,L.propDep,function(Ye,_t){var pt=Ye.shared.context;return[0,0,_t.def(pt,".",Qc),_t.def(pt,".",Jc)]}):null}var J=te(Ns);if(J){var ne=J;J=new Kr(J.thisDep,J.contextDep,J.propDep,function(B,Z){var H=ne.append(B,Z),se=B.shared.context;return Z.set(se,"."+jV,H[2]),Z.set(se,"."+GV,H[3]),H})}return{viewport:J,scissor_box:te(w0)}}function Yt($,L){var q=$.static,oe=typeof q[dp]=="string"&&typeof q[fp]=="string";if(oe){if(Object.keys(L.dynamic).length>0)return null;var he=L.static,te=Object.keys(he);if(te.length>0&&typeof he[te[0]]=="number"){for(var J=[],ne=0;ne<te.length;++ne)E(typeof he[te[ne]]=="number","must specify all vertex attribute locations when using vaos"),J.push([he[te[ne]]|0,te[ne]]);return J}}return null}function un($,L,q){var oe=$.static,he=$.dynamic;function te(H){if(H in oe){var se=F.id(oe[H]);E.optional(function(){He.shader(Y6[H],se,E.guessCommand())});var ce=Ur(function(){return se});return ce.id=se,ce}else if(H in he){var Ie=he[H];return vi(Ie,function(Xe,Ze){var it=Xe.invoke(Ze,Ie),Ye=Ze.def(Xe.shared.strings,".id(",it,")");return E.optional(function(){Ze(Xe.shared.shader,".shader(",Y6[H],",",Ye,",",Xe.command,");")}),Ye})}return null}var J=te(dp),ne=te(fp),B=null,Z;return Ol(J)&&Ol(ne)?(B=He.program(ne.id,J.id,null,q),Z=Ur(function(H,se){return H.link(B)})):Z=new Kr(J&&J.thisDep||ne&&ne.thisDep,J&&J.contextDep||ne&&ne.contextDep,J&&J.propDep||ne&&ne.propDep,function(H,se){var ce=H.shared.shader,Ie;J?Ie=J.append(H,se):Ie=se.def(ce,".",dp);var Xe;ne?Xe=ne.append(H,se):Xe=se.def(ce,".",fp);var Ze=ce+".program("+Xe+","+Ie;return E.optional(function(){Ze+=","+H.command}),se.def(Ze+")")}),{frag:J,vert:ne,progVar:Z,program:B}}function cr($,L){var q=$.static,oe=$.dynamic,he={},te=!1;function J(){if(pp in q){var _t=q[pp];return _t!==null&&je.getVAO(_t)===null&&(_t=je.createVAO(_t)),te=!0,he.vao=_t,Ur(function(vt){var bt=je.getVAO(_t);return bt?vt.link(bt):"null"})}else if(pp in oe){te=!0;var pt=oe[pp];return vi(pt,function(vt,bt){var wt=vt.invoke(bt,pt);return bt.def(vt.shared.vao+".getVAO("+wt+")")})}return null}var ne=J(),B=!1;function Z(){if(Nu in q){var _t=q[Nu];if(he.elements=_t,L0(_t)){var pt=he.elements=de.create(_t,!0);_t=de.getElements(pt),B=!0}else _t&&(_t=de.getElements(_t),B=!0,E.command(_t,"invalid elements",L.commandStr));var vt=Ur(function(wt,Ut){if(_t){var Kn=wt.link(_t);return wt.ELEMENTS=Kn,Kn}return wt.ELEMENTS=null,null});return vt.value=_t,vt}else if(Nu in oe){B=!0;var bt=oe[Nu];return vi(bt,function(wt,Ut){var Kn=wt.shared,da=Kn.isBufferArgs,Ds=Kn.elements,Bs=wt.invoke(Ut,bt),zs=Ut.def("null"),$a=Ut.def(da,"(",Bs,")"),os=wt.cond($a).then(zs,"=",Ds,".createStream(",Bs,");").else(zs,"=",Ds,".getElements(",Bs,");");return E.optional(function(){wt.assert(os.else,"!"+Bs+"||"+zs,"invalid elements")}),Ut.entry(os),Ut.exit(wt.cond($a).then(Ds,".destroyStream(",zs,");")),wt.ELEMENTS=zs,zs})}else if(te)return new Kr(ne.thisDep,ne.contextDep,ne.propDep,function(wt,Ut){return Ut.def(wt.shared.vao+".currentVAO?"+wt.shared.elements+".getElements("+wt.shared.vao+".currentVAO.elements):null")});return null}var H=Z();function se(){if(Fu in q){var _t=q[Fu];return he.primitive=_t,E.commandParameter(_t,Sl,"invalid primitve",L.commandStr),Ur(function(vt,bt){return Sl[_t]})}else if(Fu in oe){var pt=oe[Fu];return vi(pt,function(vt,bt){var wt=vt.constants.primTypes,Ut=vt.invoke(bt,pt);return E.optional(function(){vt.assert(bt,Ut+" in "+wt,"invalid primitive, must be one of "+Object.keys(Sl))}),bt.def(wt,"[",Ut,"]")})}else{if(B)return Ol(H)?H.value?Ur(function(vt,bt){return bt.def(vt.ELEMENTS,".primType")}):Ur(function(){return Zx}):new Kr(H.thisDep,H.contextDep,H.propDep,function(vt,bt){var wt=vt.ELEMENTS;return bt.def(wt,"?",wt,".primType:",Zx)});if(te)return new Kr(ne.thisDep,ne.contextDep,ne.propDep,function(vt,bt){return bt.def(vt.shared.vao+".currentVAO?"+vt.shared.vao+".currentVAO.primitive:"+Zx)})}return null}function ce(_t,pt){if(_t in q){var vt=q[_t]|0;return pt?he.offset=vt:he.instances=vt,E.command(!pt||vt>=0,"invalid "+_t,L.commandStr),Ur(function(wt,Ut){return pt&&(wt.OFFSET=vt),vt})}else if(_t in oe){var bt=oe[_t];return vi(bt,function(wt,Ut){var Kn=wt.invoke(Ut,bt);return pt&&(wt.OFFSET=Kn,E.optional(function(){wt.assert(Ut,Kn+">=0","invalid "+_t)})),Kn})}else if(pt){if(B)return Ur(function(wt,Ut){return wt.OFFSET=0,0});if(te)return new Kr(ne.thisDep,ne.contextDep,ne.propDep,function(wt,Ut){return Ut.def(wt.shared.vao+".currentVAO?"+wt.shared.vao+".currentVAO.offset:0")})}else if(te)return new Kr(ne.thisDep,ne.contextDep,ne.propDep,function(wt,Ut){return Ut.def(wt.shared.vao+".currentVAO?"+wt.shared.vao+".currentVAO.instances:-1")});return null}var Ie=ce(k0,!0);function Xe(){if(Du in q){var _t=q[Du]|0;return he.count=_t,E.command(typeof _t=="number"&&_t>=0,"invalid vertex count",L.commandStr),Ur(function(){return _t})}else if(Du in oe){var pt=oe[Du];return vi(pt,function(Ut,Kn){var da=Ut.invoke(Kn,pt);return E.optional(function(){Ut.assert(Kn,"typeof "+da+'==="number"&&'+da+">=0&&"+da+"===("+da+"|0)","invalid vertex count")}),da})}else if(B)if(Ol(H)){if(H)return Ie?new Kr(Ie.thisDep,Ie.contextDep,Ie.propDep,function(Ut,Kn){var da=Kn.def(Ut.ELEMENTS,".vertCount-",Ut.OFFSET);return E.optional(function(){Ut.assert(Kn,da+">=0","invalid vertex offset/element buffer too small")}),da}):Ur(function(Ut,Kn){return Kn.def(Ut.ELEMENTS,".vertCount")});var vt=Ur(function(){return-1});return E.optional(function(){vt.MISSING=!0}),vt}else{var bt=new Kr(H.thisDep||Ie.thisDep,H.contextDep||Ie.contextDep,H.propDep||Ie.propDep,function(Ut,Kn){var da=Ut.ELEMENTS;return Ut.OFFSET?Kn.def(da,"?",da,".vertCount-",Ut.OFFSET,":-1"):Kn.def(da,"?",da,".vertCount:-1")});return E.optional(function(){bt.DYNAMIC=!0}),bt}else if(te){var wt=new Kr(ne.thisDep,ne.contextDep,ne.propDep,function(Ut,Kn){return Kn.def(Ut.shared.vao,".currentVAO?",Ut.shared.vao,".currentVAO.count:-1")});return wt}return null}var Ze=se(),it=Xe(),Ye=ce(E0,!1);return{elements:H,primitive:Ze,count:it,instances:Ye,offset:Ie,vao:ne,vaoActive:te,elementsActive:B,static:he}}function vr($,L){var q=$.static,oe=$.dynamic,he={};return Ft.forEach(function(te){var J=gt(te);function ne(B,Z){if(te in q){var H=B(q[te]);he[J]=Ur(function(){return H})}else if(te in oe){var se=oe[te];he[J]=vi(se,function(ce,Ie){return Z(ce,Ie,ce.invoke(Ie,se))})}}switch(te){case O6:case k6:case w6:case L6:case S6:case F6:case R6:case P6:case I6:case A6:return ne(function(B){return E.commandType(B,"boolean",te,L.commandStr),B},function(B,Z,H){return E.optional(function(){B.assert(Z,"typeof "+H+'==="boolean"',"invalid flag "+te,B.commandStr)}),H});case C6:return ne(function(B){return E.commandParameter(B,tf,"invalid "+te,L.commandStr),tf[B]},function(B,Z,H){var se=B.constants.compareFuncs;return E.optional(function(){B.assert(Z,H+" in "+se,"invalid "+te+", must be one of "+Object.keys(tf))}),Z.def(se,"[",H,"]")});case T6:return ne(function(B){return E.command(Or(B)&&B.length===2&&typeof B[0]=="number"&&typeof B[1]=="number"&&B[0]<=B[1],"depth range is 2d array",L.commandStr),B},function(B,Z,H){E.optional(function(){B.assert(Z,B.shared.isArrayLike+"("+H+")&&"+H+".length===2&&typeof "+H+'[0]==="number"&&typeof '+H+'[1]==="number"&&'+H+"[0]<="+H+"[1]","depth range must be a 2d array")});var se=Z.def("+",H,"[0]"),ce=Z.def("+",H,"[1]");return[se,ce]});case Nx:return ne(function(B){E.commandType(B,"object","blend.func",L.commandStr);var Z="srcRGB"in B?B.srcRGB:B.src,H="srcAlpha"in B?B.srcAlpha:B.src,se="dstRGB"in B?B.dstRGB:B.dst,ce="dstAlpha"in B?B.dstAlpha:B.dst;return E.commandParameter(Z,is,J+".srcRGB",L.commandStr),E.commandParameter(H,is,J+".srcAlpha",L.commandStr),E.commandParameter(se,is,J+".dstRGB",L.commandStr),E.commandParameter(ce,is,J+".dstAlpha",L.commandStr),E.command(W6.indexOf(Z+", "+se)===-1,"unallowed blending combination (srcRGB, dstRGB) = ("+Z+", "+se+")",L.commandStr),[is[Z],is[se],is[H],is[ce]]},function(B,Z,H){var se=B.constants.blendFuncs;E.optional(function(){B.assert(Z,H+"&&typeof "+H+'==="object"',"invalid blend func, must be an object")});function ce(pt,vt){var bt=Z.def('"',pt,vt,'" in ',H,"?",H,".",pt,vt,":",H,".",pt);return E.optional(function(){B.assert(Z,bt+" in "+se,"invalid "+te+"."+pt+vt+", must be one of "+Object.keys(is))}),bt}var Ie=ce("src","RGB"),Xe=ce("dst","RGB");E.optional(function(){var pt=B.constants.invalidBlendCombinations;B.assert(Z,pt+".indexOf("+Ie+'+", "+'+Xe+") === -1 ","unallowed blending combination for (srcRGB, dstRGB)")});var Ze=Z.def(se,"[",Ie,"]"),it=Z.def(se,"[",ce("src","Alpha"),"]"),Ye=Z.def(se,"[",Xe,"]"),_t=Z.def(se,"[",ce("dst","Alpha"),"]");return[Ze,Ye,it,_t]});case Lx:return ne(function(B){if(typeof B=="string")return E.commandParameter(B,ye,"invalid "+te,L.commandStr),[ye[B],ye[B]];if(typeof B=="object")return E.commandParameter(B.rgb,ye,te+".rgb",L.commandStr),E.commandParameter(B.alpha,ye,te+".alpha",L.commandStr),[ye[B.rgb],ye[B.alpha]];E.commandRaise("invalid blend.equation",L.commandStr)},function(B,Z,H){var se=B.constants.blendEquations,ce=Z.def(),Ie=Z.def(),Xe=B.cond("typeof ",H,'==="string"');return E.optional(function(){function Ze(it,Ye,_t){B.assert(it,_t+" in "+se,"invalid "+Ye+", must be one of "+Object.keys(ye))}Ze(Xe.then,te,H),B.assert(Xe.else,H+"&&typeof "+H+'==="object"',"invalid "+te),Ze(Xe.else,te+".rgb",H+".rgb"),Ze(Xe.else,te+".alpha",H+".alpha")}),Xe.then(ce,"=",Ie,"=",se,"[",H,"];"),Xe.else(ce,"=",se,"[",H,".rgb];",Ie,"=",se,"[",H,".alpha];"),Z(Xe),[ce,Ie]});case E6:return ne(function(B){return E.command(Or(B)&&B.length===4,"blend.color must be a 4d array",L.commandStr),hn(4,function(Z){return+B[Z]})},function(B,Z,H){return E.optional(function(){B.assert(Z,B.shared.isArrayLike+"("+H+")&&"+H+".length===4","blend.color must be a 4d array")}),hn(4,function(se){return Z.def("+",H,"[",se,"]")})});case N6:return ne(function(B){return E.commandType(B,"number",J,L.commandStr),B|0},function(B,Z,H){return E.optional(function(){B.assert(Z,"typeof "+H+'==="number"',"invalid stencil.mask")}),Z.def(H,"|0")});case $x:return ne(function(B){E.commandType(B,"object",J,L.commandStr);var Z=B.cmp||"keep",H=B.ref||0,se="mask"in B?B.mask:-1;return E.commandParameter(Z,tf,te+".cmp",L.commandStr),E.commandType(H,"number",te+".ref",L.commandStr),E.commandType(se,"number",te+".mask",L.commandStr),[tf[Z],H,se]},function(B,Z,H){var se=B.constants.compareFuncs;E.optional(function(){function Ze(){B.assert(Z,Array.prototype.join.call(arguments,""),"invalid stencil.func")}Ze(H+"&&typeof ",H,'==="object"'),Ze('!("cmp" in ',H,")||(",H,".cmp in ",se,")")});var ce=Z.def('"cmp" in ',H,"?",se,"[",H,".cmp]",":",Tl),Ie=Z.def(H,".ref|0"),Xe=Z.def('"mask" in ',H,"?",H,".mask|0:-1");return[ce,Ie,Xe]});case Vx:case up:return ne(function(B){E.commandType(B,"object",J,L.commandStr);var Z=B.fail||"keep",H=B.zfail||"keep",se=B.zpass||"keep";return E.commandParameter(Z,Al,te+".fail",L.commandStr),E.commandParameter(H,Al,te+".zfail",L.commandStr),E.commandParameter(se,Al,te+".zpass",L.commandStr),[te===up?Bu:yp,Al[Z],Al[H],Al[se]]},function(B,Z,H){var se=B.constants.stencilOps;E.optional(function(){B.assert(Z,H+"&&typeof "+H+'==="object"',"invalid "+te)});function ce(Ie){return E.optional(function(){B.assert(Z,'!("'+Ie+'" in '+H+")||("+H+"."+Ie+" in "+se+")","invalid "+te+"."+Ie+", must be one of "+Object.keys(Al))}),Z.def('"',Ie,'" in ',H,"?",se,"[",H,".",Ie,"]:",Tl)}return[te===up?Bu:yp,ce("fail"),ce("zfail"),ce("zpass")]});case zx:return ne(function(B){E.commandType(B,"object",J,L.commandStr);var Z=B.factor|0,H=B.units|0;return E.commandType(Z,"number",J+".factor",L.commandStr),E.commandType(H,"number",J+".units",L.commandStr),[Z,H]},function(B,Z,H){E.optional(function(){B.assert(Z,H+"&&typeof "+H+'==="object"',"invalid "+te)});var se=Z.def(H,".factor|0"),ce=Z.def(H,".units|0");return[se,ce]});case M6:return ne(function(B){var Z=0;return B==="front"?Z=yp:B==="back"&&(Z=Bu),E.command(!!Z,J,L.commandStr),Z},function(B,Z,H){return E.optional(function(){B.assert(Z,H+'==="front"||'+H+'==="back"',"invalid cull.face")}),Z.def(H,'==="front"?',yp,":",Bu)});case Bx:return ne(function(B){return E.command(typeof B=="number"&&B>=pe.lineWidthDims[0]&&B<=pe.lineWidthDims[1],"invalid line width, must be a positive number between "+pe.lineWidthDims[0]+" and "+pe.lineWidthDims[1],L.commandStr),B},function(B,Z,H){return E.optional(function(){B.assert(Z,"typeof "+H+'==="number"&&'+H+">="+pe.lineWidthDims[0]+"&&"+H+"<="+pe.lineWidthDims[1],"invalid line width")}),H});case Dx:return ne(function(B){return E.commandParameter(B,Kx,J,L.commandStr),Kx[B]},function(B,Z,H){return E.optional(function(){B.assert(Z,H+'==="cw"||'+H+'==="ccw"',"invalid frontFace, must be one of cw,ccw")}),Z.def(H+'==="cw"?'+$6+":"+qx)});case Fx:return ne(function(B){return E.command(Or(B)&&B.length===4,"color.mask must be length 4 array",L.commandStr),B.map(function(Z){return!!Z})},function(B,Z,H){return E.optional(function(){B.assert(Z,B.shared.isArrayLike+"("+H+")&&"+H+".length===4","invalid color.mask")}),hn(4,function(se){return"!!"+H+"["+se+"]"})});case Ux:return ne(function(B){E.command(typeof B=="object"&&B,J,L.commandStr);var Z="value"in B?B.value:1,H=!!B.invert;return E.command(typeof Z=="number"&&Z>=0&&Z<=1,"sample.coverage.value must be a number between 0 and 1",L.commandStr),[Z,H]},function(B,Z,H){E.optional(function(){B.assert(Z,H+"&&typeof "+H+'==="object"',"invalid sample.coverage")});var se=Z.def('"value" in ',H,"?+",H,".value:1"),ce=Z.def("!!",H,".invert");return[se,ce]})}}),he}function cn($,L){var q=$.static,oe=$.dynamic,he={};return Object.keys(q).forEach(function(te){var J=q[te],ne;if(typeof J=="number"||typeof J=="boolean")ne=Ur(function(){return J});else if(typeof J=="function"){var B=J._reglType;B==="texture2d"||B==="textureCube"?ne=Ur(function(Z){return Z.link(J)}):B==="framebuffer"||B==="framebufferCube"?(E.command(J.color.length>0,'missing color attachment for framebuffer sent to uniform "'+te+'"',L.commandStr),ne=Ur(function(Z){return Z.link(J.color[0])})):E.commandRaise('invalid data for uniform "'+te+'"',L.commandStr)}else Or(J)?ne=Ur(function(Z){var H=Z.global.def("[",hn(J.length,function(se){return E.command(typeof J[se]=="number"||typeof J[se]=="boolean","invalid uniform "+te,Z.commandStr),J[se]}),"]");return H}):E.commandRaise('invalid or missing data for uniform "'+te+'"',L.commandStr);ne.value=J,he[te]=ne}),Object.keys(oe).forEach(function(te){var J=oe[te];he[te]=vi(J,function(ne,B){return ne.invoke(B,J)})}),he}function ua($,L){var q=$.static,oe=$.dynamic,he={};return Object.keys(q).forEach(function(te){var J=q[te],ne=F.id(te),B=new ie;if(L0(J))B.state=Kc,B.buffer=Se.getBuffer(Se.create(J,ef,!1,!0)),B.type=0;else{var Z=Se.getBuffer(J);if(Z)B.state=Kc,B.buffer=Z,B.type=0;else if(E.command(typeof J=="object"&&J,"invalid data for attribute "+te,L.commandStr),"constant"in J){var H=J.constant;B.buffer="null",B.state=Ox,typeof H=="number"?B.x=H:(E.command(Or(H)&&H.length>0&&H.length<=4,"invalid constant for attribute "+te,L.commandStr),qc.forEach(function(Ye,_t){_t<H.length&&(B[Ye]=H[_t])}))}else{L0(J.buffer)?Z=Se.getBuffer(Se.create(J.buffer,ef,!1,!0)):Z=Se.getBuffer(J.buffer),E.command(!!Z,'missing buffer for attribute "'+te+'"',L.commandStr);var se=J.offset|0;E.command(se>=0,'invalid offset for attribute "'+te+'"',L.commandStr);var ce=J.stride|0;E.command(ce>=0&&ce<256,'invalid stride for attribute "'+te+'", must be integer betweeen [0, 255]',L.commandStr);var Ie=J.size|0;E.command(!("size"in J)||Ie>0&&Ie<=4,'invalid size for attribute "'+te+'", must be 1,2,3,4',L.commandStr);var Xe=!!J.normalized,Ze=0;"type"in J&&(E.commandParameter(J.type,Ou,"invalid type for attribute "+te,L.commandStr),Ze=Ou[J.type]);var it=J.divisor|0;E.optional(function(){"divisor"in J&&(E.command(it===0||Ve,'cannot specify divisor for attribute "'+te+'", instancing not supported',L.commandStr),E.command(it>=0,'invalid divisor for attribute "'+te+'"',L.commandStr));var Ye=L.commandStr,_t=["buffer","offset","divisor","normalized","type","size","stride"];Object.keys(J).forEach(function(pt){E.command(_t.indexOf(pt)>=0,'unknown parameter "'+pt+'" for attribute pointer "'+te+'" (valid parameters are '+_t+")",Ye)})}),B.buffer=Z,B.state=Kc,B.size=Ie,B.normalized=Xe,B.type=Ze||Z.dtype,B.offset=se,B.stride=ce,B.divisor=it}}he[te]=Ur(function(Ye,_t){var pt=Ye.attribCache;if(ne in pt)return pt[ne];var vt={isStream:!1};return Object.keys(B).forEach(function(bt){vt[bt]=B[bt]}),B.buffer&&(vt.buffer=Ye.link(B.buffer),vt.type=vt.type||vt.buffer+".dtype"),pt[ne]=vt,vt})}),Object.keys(oe).forEach(function(te){var J=oe[te];function ne(B,Z){var H=B.invoke(Z,J),se=B.shared,ce=B.constants,Ie=se.isBufferArgs,Xe=se.buffer;E.optional(function(){B.assert(Z,H+"&&(typeof "+H+'==="object"||typeof '+H+'==="function")&&('+Ie+"("+H+")||"+Xe+".getBuffer("+H+")||"+Xe+".getBuffer("+H+".buffer)||"+Ie+"("+H+'.buffer)||("constant" in '+H+"&&(typeof "+H+'.constant==="number"||'+se.isArrayLike+"("+H+".constant))))",'invalid dynamic attribute "'+te+'"')});var Ze={isStream:Z.def(!1)},it=new ie;it.state=Kc,Object.keys(it).forEach(function(vt){Ze[vt]=Z.def(""+it[vt])});var Ye=Ze.buffer,_t=Ze.type;Z("if(",Ie,"(",H,")){",Ze.isStream,"=true;",Ye,"=",Xe,".createStream(",ef,",",H,");",_t,"=",Ye,".dtype;","}else{",Ye,"=",Xe,".getBuffer(",H,");","if(",Ye,"){",_t,"=",Ye,".dtype;",'}else if("constant" in ',H,"){",Ze.state,"=",Ox,";","if(typeof "+H+'.constant === "number"){',Ze[qc[0]],"=",H,".constant;",qc.slice(1).map(function(vt){return Ze[vt]}).join("="),"=0;","}else{",qc.map(function(vt,bt){return Ze[vt]+"="+H+".constant.length>"+bt+"?"+H+".constant["+bt+"]:0;"}).join(""),"}}else{","if(",Ie,"(",H,".buffer)){",Ye,"=",Xe,".createStream(",ef,",",H,".buffer);","}else{",Ye,"=",Xe,".getBuffer(",H,".buffer);","}",_t,'="type" in ',H,"?",ce.glTypes,"[",H,".type]:",Ye,".dtype;",Ze.normalized,"=!!",H,".normalized;");function pt(vt){Z(Ze[vt],"=",H,".",vt,"|0;")}return pt("size"),pt("offset"),pt("stride"),pt("divisor"),Z("}}"),Z.exit("if(",Ze.isStream,"){",Xe,".destroyStream(",Ye,");","}"),Ze}he[te]=vi(J,ne)}),he}function Jn($){var L=$.static,q=$.dynamic,oe={};return Object.keys(L).forEach(function(he){var te=L[he];oe[he]=Ur(function(J,ne){return typeof te=="number"||typeof te=="boolean"?""+te:J.link(te)})}),Object.keys(q).forEach(function(he){var te=q[he];oe[he]=vi(te,function(J,ne){return J.invoke(ne,te)})}),oe}function Wr($,L,q,oe,he){var te=$.static,J=$.dynamic;E.optional(function(){var pt=[Lu,fp,dp,Nu,Fu,k0,Du,E0,cp,pp].concat(Ft);function vt(bt){Object.keys(bt).forEach(function(wt){E.command(pt.indexOf(wt)>=0,'unknown parameter "'+wt+'"',he.commandStr)})}vt(te),vt(J)});var ne=Yt($,L),B=ct($),Z=zt($,B,he),H=cr($,he),se=vr($,he),ce=un($,he,ne);function Ie(pt){var vt=Z[pt];vt&&(se[pt]=vt)}Ie(Ns),Ie(gt(w0));var Xe=Object.keys(se).length>0,Ze={framebuffer:B,draw:H,shader:ce,state:se,dirty:Xe,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}};if(Ze.profile=at($),Ze.uniforms=cn(q,he),Ze.drawVAO=Ze.scopeVAO=H.vao,!Ze.drawVAO&&ce.program&&!ne&&Y.angle_instanced_arrays&&H.static.elements){var it=!0,Ye=ce.program.attributes.map(function(pt){var vt=L.static[pt];return it=it&&!!vt,vt});if(it&&Ye.length>0){var _t=je.getVAO(je.createVAO({attributes:Ye,elements:H.static.elements}));Ze.drawVAO=new Kr(null,null,null,function(pt,vt){return pt.link(_t)}),Ze.useVAO=!0}}return ne?Ze.useVAO=!0:Ze.attributes=ua(L,he),Ze.context=Jn(oe),Ze}function Mr($,L,q){var oe=$.shared,he=oe.context,te=$.scope();Object.keys(q).forEach(function(J){L.save(he,"."+J);var ne=q[J],B=ne.append($,L);Array.isArray(B)?te(he,".",J,"=[",B.join(),"];"):te(he,".",J,"=",B,";")}),L(te)}function Qr($,L,q,oe){var he=$.shared,te=he.gl,J=he.framebuffer,ne;dt&&(ne=L.def(he.extensions,".webgl_draw_buffers"));var B=$.constants,Z=B.drawBuffer,H=B.backBuffer,se;q?se=q.append($,L):se=L.def(J,".next"),oe||L("if(",se,"!==",J,".cur){"),L("if(",se,"){",te,".bindFramebuffer(",H6,",",se,".framebuffer);"),dt&&L(ne,".drawBuffersWEBGL(",Z,"[",se,".colorAttachments.length]);"),L("}else{",te,".bindFramebuffer(",H6,",null);"),dt&&L(ne,".drawBuffersWEBGL(",H,");"),L("}",J,".cur=",se,";"),oe||L("}")}function ca($,L,q){var oe=$.shared,he=oe.gl,te=$.current,J=$.next,ne=oe.current,B=oe.next,Z=$.cond(ne,".dirty");Ft.forEach(function(H){var se=gt(H);if(!(se in q.state)){var ce,Ie;if(se in J){ce=J[se],Ie=te[se];var Xe=hn(lt[se].length,function(it){return Z.def(ce,"[",it,"]")});Z($.cond(Xe.map(function(it,Ye){return it+"!=="+Ie+"["+Ye+"]"}).join("||")).then(he,".",Ee[se],"(",Xe,");",Xe.map(function(it,Ye){return Ie+"["+Ye+"]="+it}).join(";"),";"))}else{ce=Z.def(B,".",se);var Ze=$.cond(ce,"!==",ne,".",se);Z(Ze),se in Te?Ze($.cond(ce).then(he,".enable(",Te[se],");").else(he,".disable(",Te[se],");"),ne,".",se,"=",ce,";"):Ze(he,".",Ee[se],"(",ce,");",ne,".",se,"=",ce,";")}}}),Object.keys(q.state).length===0&&Z(ne,".dirty=false;"),L(Z)}function ya($,L,q,oe){var he=$.shared,te=$.current,J=he.current,ne=he.gl;X6(Object.keys(q)).forEach(function(B){var Z=q[B];if(!(oe&&!oe(Z))){var H=Z.append($,L);if(Te[B]){var se=Te[B];Ol(Z)?H?L(ne,".enable(",se,");"):L(ne,".disable(",se,");"):L($.cond(H).then(ne,".enable(",se,");").else(ne,".disable(",se,");")),L(J,".",B,"=",H,";")}else if(Or(H)){var ce=te[B];L(ne,".",Ee[B],"(",H,");",H.map(function(Ie,Xe){return ce+"["+Xe+"]="+Ie}).join(";"),";")}else L(ne,".",Ee[B],"(",H,");",J,".",B,"=",H,";")}})}function Rr($,L){Ve&&($.instancing=L.def($.shared.extensions,".angle_instanced_arrays"))}function tn($,L,q,oe,he){var te=$.shared,J=$.stats,ne=te.current,B=te.timer,Z=q.profile;function H(){var pt=typeof my!="undefined"&&!!my&&typeof my.showToast=="function"&&my.isFRM!==!0;return pt||typeof performance=="undefined"?"Date.now()":"performance.now()"}var se,ce;function Ie(pt){se=L.def(),pt(se,"=",H(),";"),typeof he=="string"?pt(J,".count+=",he,";"):pt(J,".count++;"),Be&&(oe?(ce=L.def(),pt(ce,"=",B,".getNumPendingQueries();")):pt(B,".beginQuery(",J,");"))}function Xe(pt){pt(J,".cpuTime+=",H(),"-",se,";"),Be&&(oe?pt(B,".pushScopeStats(",ce,",",B,".getNumPendingQueries(),",J,");"):pt(B,".endQuery();"))}function Ze(pt){var vt=L.def(ne,".profile");L(ne,".profile=",pt,";"),L.exit(ne,".profile=",vt,";")}var it;if(Z){if(Ol(Z)){Z.enable?(Ie(L),Xe(L.exit),Ze("true")):Ze("false");return}it=Z.append($,L),Ze(it)}else it=L.def(ne,".profile");var Ye=$.block();Ie(Ye),L("if(",it,"){",Ye,"}");var _t=$.block();Xe(_t),L.exit("if(",it,"){",_t,"}")}function fa($,L,q,oe,he){var te=$.shared;function J(B){switch(B){case S0:case A0:case R0:return 2;case C0:case O0:case P0:return 3;case T0:case M0:case I0:return 4;default:return 1}}function ne(B,Z,H){var se=te.gl,ce=L.def(B,".location"),Ie=L.def(te.attributes,"[",ce,"]"),Xe=H.state,Ze=H.buffer,it=[H.x,H.y,H.z,H.w],Ye=["buffer","normalized","offset","stride"];function _t(){L("if(!",Ie,".buffer){",se,".enableVertexAttribArray(",ce,");}");var vt=H.type,bt;if(H.size?bt=L.def(H.size,"||",Z):bt=Z,L("if(",Ie,".type!==",vt,"||",Ie,".size!==",bt,"||",Ye.map(function(Ut){return Ie+"."+Ut+"!=="+H[Ut]}).join("||"),"){",se,".bindBuffer(",ef,",",Ze,".buffer);",se,".vertexAttribPointer(",[ce,bt,vt,H.normalized,H.stride,H.offset],");",Ie,".type=",vt,";",Ie,".size=",bt,";",Ye.map(function(Ut){return Ie+"."+Ut+"="+H[Ut]+";"}).join(""),"}"),Ve){var wt=H.divisor;L("if(",Ie,".divisor!==",wt,"){",$.instancing,".vertexAttribDivisorANGLE(",[ce,wt],");",Ie,".divisor=",wt,";}")}}function pt(){L("if(",Ie,".buffer){",se,".disableVertexAttribArray(",ce,");",Ie,".buffer=null;","}if(",qc.map(function(vt,bt){return Ie+"."+vt+"!=="+it[bt]}).join("||"),"){",se,".vertexAttrib4f(",ce,",",it,");",qc.map(function(vt,bt){return Ie+"."+vt+"="+it[bt]+";"}).join(""),"}")}Xe===Kc?_t():Xe===Ox?pt():(L("if(",Xe,"===",Kc,"){"),_t(),L("}else{"),pt(),L("}"))}oe.forEach(function(B){var Z=B.name,H=q.attributes[Z],se;if(H){if(!he(H))return;se=H.append($,L)}else{if(!he(Z6))return;var ce=$.scopeAttrib(Z);E.optional(function(){$.assert(L,ce+".state","missing attribute "+Z)}),se={},Object.keys(new ie).forEach(function(Ie){se[Ie]=L.def(ce,".",Ie)})}ne($.link(B),J(B.info.type),se)})}function In($,L,q,oe,he,te){for(var J=$.shared,ne=J.gl,B,Z=0;Z<oe.length;++Z){var H=oe[Z],se=H.name,ce=H.info.type,Ie=q.uniforms[se],Xe=$.link(H),Ze=Xe+".location",it;if(Ie){if(!he(Ie))continue;if(Ol(Ie)){var Ye=Ie.value;if(E.command(Ye!==null&&typeof Ye!="undefined",'missing uniform "'+se+'"',$.commandStr),ce===vp||ce===bp){E.command(typeof Ye=="function"&&(ce===vp&&(Ye._reglType==="texture2d"||Ye._reglType==="framebuffer")||ce===bp&&(Ye._reglType==="textureCube"||Ye._reglType==="framebufferCube")),"invalid texture for uniform "+se,$.commandStr);var _t=$.link(Ye._texture||Ye.color[0]._texture);L(ne,".uniform1i(",Ze,",",_t+".bind());"),L.exit(_t,".unbind();")}else if(ce===hp||ce===mp||ce===gp){E.optional(function(){E.command(Or(Ye),"invalid matrix for uniform "+se,$.commandStr),E.command(ce===hp&&Ye.length===4||ce===mp&&Ye.length===9||ce===gp&&Ye.length===16,"invalid length for matrix uniform "+se,$.commandStr)});var pt=$.global.def("new Float32Array(["+Array.prototype.slice.call(Ye)+"])"),vt=2;ce===mp?vt=3:ce===gp&&(vt=4),L(ne,".uniformMatrix",vt,"fv(",Ze,",false,",pt,");")}else{switch(ce){case Wx:E.commandType(Ye,"number","uniform "+se,$.commandStr),B="1f";break;case S0:E.command(Or(Ye)&&Ye.length===2,"uniform "+se,$.commandStr),B="2f";break;case C0:E.command(Or(Ye)&&Ye.length===3,"uniform "+se,$.commandStr),B="3f";break;case T0:E.command(Or(Ye)&&Ye.length===4,"uniform "+se,$.commandStr),B="4f";break;case Xx:E.commandType(Ye,"boolean","uniform "+se,$.commandStr),B="1i";break;case Yx:E.commandType(Ye,"number","uniform "+se,$.commandStr),B="1i";break;case R0:E.command(Or(Ye)&&Ye.length===2,"uniform "+se,$.commandStr),B="2i";break;case A0:E.command(Or(Ye)&&Ye.length===2,"uniform "+se,$.commandStr),B="2i";break;case P0:E.command(Or(Ye)&&Ye.length===3,"uniform "+se,$.commandStr),B="3i";break;case O0:E.command(Or(Ye)&&Ye.length===3,"uniform "+se,$.commandStr),B="3i";break;case I0:E.command(Or(Ye)&&Ye.length===4,"uniform "+se,$.commandStr),B="4i";break;case M0:E.command(Or(Ye)&&Ye.length===4,"uniform "+se,$.commandStr),B="4i";break}L(ne,".uniform",B,"(",Ze,",",Or(Ye)?Array.prototype.slice.call(Ye):Ye,");")}continue}else it=Ie.append($,L)}else{if(!he(Z6))continue;it=L.def(J.uniforms,"[",F.id(se),"]")}ce===vp?(E(!Array.isArray(it),"must specify a scalar prop for textures"),L("if(",it,"&&",it,'._reglType==="framebuffer"){',it,"=",it,".color[0];","}")):ce===bp&&(E(!Array.isArray(it),"must specify a scalar prop for cube maps"),L("if(",it,"&&",it,'._reglType==="framebufferCube"){',it,"=",it,".color[0];","}")),E.optional(function(){function $a(Lo,nC){$.assert(L,Lo,'bad data or missing for uniform "'+se+'".  '+nC)}function os(Lo){E(!Array.isArray(it),"must not specify an array type for uniform"),$a("typeof "+it+'==="'+Lo+'"',"invalid type, expected "+Lo)}function eo(Lo,nC){Array.isArray(it)?E(it.length===Lo,"must have length "+Lo):$a(J.isArrayLike+"("+it+")&&"+it+".length==="+Lo,"invalid vector, should have length "+Lo,$.commandStr)}function tC(Lo){E(!Array.isArray(it),"must not specify a value type"),$a("typeof "+it+'==="function"&&'+it+'._reglType==="texture'+(Lo===U6?"2d":"Cube")+'"',"invalid texture type",$.commandStr)}switch(ce){case Yx:os("number");break;case A0:eo(2);break;case O0:eo(3);break;case M0:eo(4);break;case Wx:os("number");break;case S0:eo(2);break;case C0:eo(3);break;case T0:eo(4);break;case Xx:os("boolean");break;case R0:eo(2);break;case P0:eo(3);break;case I0:eo(4);break;case hp:eo(4);break;case mp:eo(9);break;case gp:eo(16);break;case vp:tC(U6);break;case bp:tC(XV);break}});var bt=1;switch(ce){case vp:case bp:var wt=L.def(it,"._texture");L(ne,".uniform1i(",Ze,",",wt,".bind());"),L.exit(wt,".unbind();");continue;case Yx:case Xx:B="1i";break;case A0:case R0:B="2i",bt=2;break;case O0:case P0:B="3i",bt=3;break;case M0:case I0:B="4i",bt=4;break;case Wx:B="1f";break;case S0:B="2f",bt=2;break;case C0:B="3f",bt=3;break;case T0:B="4f",bt=4;break;case hp:B="Matrix2fv";break;case mp:B="Matrix3fv";break;case gp:B="Matrix4fv";break}if(B.charAt(0)==="M"){L(ne,".uniform",B,"(",Ze,",");var Ut=Math.pow(ce-hp+2,2),Kn=$.global.def("new Float32Array(",Ut,")");Array.isArray(it)?L("false,(",hn(Ut,function($a){return Kn+"["+$a+"]="+it[$a]}),",",Kn,")"):L("false,(Array.isArray(",it,")||",it," instanceof Float32Array)?",it,":(",hn(Ut,function($a){return Kn+"["+$a+"]="+it+"["+$a+"]"}),",",Kn,")"),L(");")}else if(bt>1){for(var da=[],Ds=[],Bs=0;Bs<bt;++Bs)Array.isArray(it)?Ds.push(it[Bs]):Ds.push(L.def(it+"["+Bs+"]")),te&&da.push(L.def());te&&L("if(!",$.batchId,"||",da.map(function($a,os){return $a+"!=="+Ds[os]}).join("||"),"){",da.map(function($a,os){return $a+"="+Ds[os]+";"}).join("")),L(ne,".uniform",B,"(",Ze,",",Ds.join(","),");"),te&&L("}")}else{if(E(!Array.isArray(it),"uniform value must not be an array"),te){var zs=L.def();L("if(!",$.batchId,"||",zs,"!==",it,"){",zs,"=",it,";")}L(ne,".uniform",B,"(",Ze,",",it,");"),te&&L("}")}}}function Jr($,L,q,oe){var he=$.shared,te=he.gl,J=he.draw,ne=oe.draw;function B(){var bt=ne.elements,wt,Ut=L;return bt?((bt.contextDep&&oe.contextDynamic||bt.propDep)&&(Ut=q),wt=bt.append($,Ut),ne.elementsActive&&Ut("if("+wt+")"+te+".bindBuffer("+Hx+","+wt+".buffer.buffer);")):(wt=Ut.def(),Ut(wt,"=",J,".",Nu,";","if(",wt,"){",te,".bindBuffer(",Hx,",",wt,".buffer.buffer);}","else if(",he.vao,".currentVAO){",wt,"=",$.shared.elements+".getElements("+he.vao,".currentVAO.elements);",Ne?"":"if("+wt+")"+te+".bindBuffer("+Hx+","+wt+".buffer.buffer);","}")),wt}function Z(){var bt=ne.count,wt,Ut=L;return bt?((bt.contextDep&&oe.contextDynamic||bt.propDep)&&(Ut=q),wt=bt.append($,Ut),E.optional(function(){bt.MISSING&&$.assert(L,"false","missing vertex count"),bt.DYNAMIC&&$.assert(Ut,wt+">=0","missing vertex count")})):(wt=Ut.def(J,".",Du),E.optional(function(){$.assert(Ut,wt+">=0","missing vertex count")})),wt}var H=B();function se(bt){var wt=ne[bt];return wt?wt.contextDep&&oe.contextDynamic||wt.propDep?wt.append($,q):wt.append($,L):L.def(J,".",bt)}var ce=se(Fu),Ie=se(k0),Xe=Z();if(typeof Xe=="number"){if(Xe===0)return}else q("if(",Xe,"){"),q.exit("}");var Ze,it;Ve&&(Ze=se(E0),it=$.instancing);var Ye=H+".type",_t=ne.elements&&Ol(ne.elements)&&!ne.vaoActive;function pt(){function bt(){q(it,".drawElementsInstancedANGLE(",[ce,Xe,Ye,Ie+"<<(("+Ye+"-"+y6+")>>1)",Ze],");")}function wt(){q(it,".drawArraysInstancedANGLE(",[ce,Ie,Xe,Ze],");")}H&&H!=="null"?_t?bt():(q("if(",H,"){"),bt(),q("}else{"),wt(),q("}")):wt()}function vt(){function bt(){q(te+".drawElements("+[ce,Xe,Ye,Ie+"<<(("+Ye+"-"+y6+")>>1)"]+");")}function wt(){q(te+".drawArrays("+[ce,Ie,Xe]+");")}H&&H!=="null"?_t?bt():(q("if(",H,"){"),bt(),q("}else{"),wt(),q("}")):wt()}Ve&&(typeof Ze!="number"||Ze>=0)?typeof Ze=="string"?(q("if(",Ze,">0){"),pt(),q("}else if(",Ze,"<0){"),vt(),q("}")):pt():vt()}function Vt($,L,q,oe,he){var te=jt(),J=te.proc("body",he);return E.optional(function(){te.commandStr=L.commandStr,te.command=te.link(L.commandStr)}),Ve&&(te.instancing=J.def(te.shared.extensions,".angle_instanced_arrays")),$(te,J,q,oe),te.compile().body}function ln($,L,q,oe){Rr($,L),q.useVAO?q.drawVAO?L($.shared.vao,".setVAO(",q.drawVAO.append($,L),");"):L($.shared.vao,".setVAO(",$.shared.vao,".targetVAO);"):(L($.shared.vao,".setVAO(null);"),fa($,L,q,oe.attributes,function(){return!0})),In($,L,q,oe.uniforms,function(){return!0},!1),Jr($,L,L,q)}function $n($,L){var q=$.proc("draw",1);Rr($,q),Mr($,q,L.context),Qr($,q,L.framebuffer),ca($,q,L),ya($,q,L.state),tn($,q,L,!1,!0);var oe=L.shader.progVar.append($,q);if(q($.shared.gl,".useProgram(",oe,".program);"),L.shader.program)ln($,q,L,L.shader.program);else{q($.shared.vao,".setVAO(null);");var he=$.global.def("{}"),te=q.def(oe,".id"),J=q.def(he,"[",te,"]");q($.cond(J).then(J,".call(this,a0);").else(J,"=",he,"[",te,"]=",$.link(function(ne){return Vt(ln,$,L,ne,1)}),"(",oe,");",J,".call(this,a0);"))}Object.keys(L.state).length>0&&q($.shared.current,".dirty=true;"),$.shared.vao&&q($.shared.vao,".setVAO(null);")}function $r($,L,q,oe){$.batchId="a1",Rr($,L);function he(){return!0}fa($,L,q,oe.attributes,he),In($,L,q,oe.uniforms,he,!1),Jr($,L,L,q)}function Fs($,L,q,oe){Rr($,L);var he=q.contextDep,te=L.def(),J="a0",ne="a1",B=L.def();$.shared.props=B,$.batchId=te;var Z=$.scope(),H=$.scope();L(Z.entry,"for(",te,"=0;",te,"<",ne,";++",te,"){",B,"=",J,"[",te,"];",H,"}",Z.exit);function se(Ye){return Ye.contextDep&&he||Ye.propDep}function ce(Ye){return!se(Ye)}if(q.needsContext&&Mr($,H,q.context),q.needsFramebuffer&&Qr($,H,q.framebuffer),ya($,H,q.state,se),q.profile&&se(q.profile)&&tn($,H,q,!1,!0),oe)q.useVAO?q.drawVAO?se(q.drawVAO)?H($.shared.vao,".setVAO(",q.drawVAO.append($,H),");"):Z($.shared.vao,".setVAO(",q.drawVAO.append($,Z),");"):Z($.shared.vao,".setVAO(",$.shared.vao,".targetVAO);"):(Z($.shared.vao,".setVAO(null);"),fa($,Z,q,oe.attributes,ce),fa($,H,q,oe.attributes,se)),In($,Z,q,oe.uniforms,ce,!1),In($,H,q,oe.uniforms,se,!0),Jr($,Z,H,q);else{var Ie=$.global.def("{}"),Xe=q.shader.progVar.append($,H),Ze=H.def(Xe,".id"),it=H.def(Ie,"[",Ze,"]");H($.shared.gl,".useProgram(",Xe,".program);","if(!",it,"){",it,"=",Ie,"[",Ze,"]=",$.link(function(Ye){return Vt($r,$,q,Ye,2)}),"(",Xe,");}",it,".call(this,a0[",te,"],",te,");")}}function W($,L){var q=$.proc("batch",2);$.batchId="0",Rr($,q);var oe=!1,he=!0;Object.keys(L.context).forEach(function(Ie){oe=oe||L.context[Ie].propDep}),oe||(Mr($,q,L.context),he=!1);var te=L.framebuffer,J=!1;te?(te.propDep?oe=J=!0:te.contextDep&&oe&&(J=!0),J||Qr($,q,te)):Qr($,q,null),L.state.viewport&&L.state.viewport.propDep&&(oe=!0);function ne(Ie){return Ie.contextDep&&oe||Ie.propDep}ca($,q,L),ya($,q,L.state,function(Ie){return!ne(Ie)}),(!L.profile||!ne(L.profile))&&tn($,q,L,!1,"a1"),L.contextDep=oe,L.needsContext=he,L.needsFramebuffer=J;var B=L.shader.progVar;if(B.contextDep&&oe||B.propDep)Fs($,q,L,null);else{var Z=B.append($,q);if(q($.shared.gl,".useProgram(",Z,".program);"),L.shader.program)Fs($,q,L,L.shader.program);else{q($.shared.vao,".setVAO(null);");var H=$.global.def("{}"),se=q.def(Z,".id"),ce=q.def(H,"[",se,"]");q($.cond(ce).then(ce,".call(this,a0,a1);").else(ce,"=",H,"[",se,"]=",$.link(function(Ie){return Vt(Fs,$,L,Ie,2)}),"(",Z,");",ce,".call(this,a0,a1);"))}}Object.keys(L.state).length>0&&q($.shared.current,".dirty=true;"),$.shared.vao&&q($.shared.vao,".setVAO(null);")}function me($,L){var q=$.proc("scope",3);$.batchId="a2";var oe=$.shared,he=oe.current;Mr($,q,L.context),L.framebuffer&&L.framebuffer.append($,q),X6(Object.keys(L.state)).forEach(function(J){var ne=L.state[J],B=ne.append($,q);Or(B)?B.forEach(function(Z,H){q.set($.next[J],"["+H+"]",Z)}):q.set(oe.next,"."+J,B)}),tn($,q,L,!0,!0),[Nu,k0,Du,E0,Fu].forEach(function(J){var ne=L.draw[J];!ne||q.set(oe.draw,"."+J,""+ne.append($,q))}),Object.keys(L.uniforms).forEach(function(J){var ne=L.uniforms[J].append($,q);Array.isArray(ne)&&(ne="["+ne.join()+"]"),q.set(oe.uniforms,"["+F.id(J)+"]",ne)}),Object.keys(L.attributes).forEach(function(J){var ne=L.attributes[J].append($,q),B=$.scopeAttrib(J);Object.keys(new ie).forEach(function(Z){q.set(B,"."+Z,ne[Z])})}),L.scopeVAO&&q.set(oe.vao,".targetVAO",L.scopeVAO.append($,q));function te(J){var ne=L.shader[J];ne&&q.set(oe.shader,"."+J,ne.append($,q))}te(fp),te(dp),Object.keys(L.state).length>0&&(q(he,".dirty=true;"),q.exit(he,".dirty=true;")),q("a1(",$.shared.context,",a0,",$.batchId,");")}function fe($){if(!(typeof $!="object"||Or($))){for(var L=Object.keys($),q=0;q<L.length;++q)if(Yn.isDynamic($[L[q]]))return!0;return!1}}function mt($,L,q){var oe=L.static[q];if(!oe||!fe(oe))return;var he=$.global,te=Object.keys(oe),J=!1,ne=!1,B=!1,Z=$.global.def("{}");te.forEach(function(se){var ce=oe[se];if(Yn.isDynamic(ce)){typeof ce=="function"&&(ce=oe[se]=Yn.unbox(ce));var Ie=vi(ce,null);J=J||Ie.thisDep,B=B||Ie.propDep,ne=ne||Ie.contextDep}else{switch(he(Z,".",se,"="),typeof ce){case"number":he(ce);break;case"string":he('"',ce,'"');break;case"object":Array.isArray(ce)&&he("[",ce.join(),"]");break;default:he($.link(ce));break}he(";")}});function H(se,ce){te.forEach(function(Ie){var Xe=oe[Ie];if(!!Yn.isDynamic(Xe)){var Ze=se.invoke(ce,Xe);ce(Z,".",Ie,"=",Ze,";")}})}L.dynamic[q]=new Yn.DynamicVariable(_0,{thisDep:J,contextDep:ne,propDep:B,ref:Z,append:H}),delete L.static[q]}function fn($,L,q,oe,he){var te=jt();te.stats=te.link(he),Object.keys(L.static).forEach(function(ne){mt(te,L,ne)}),HV.forEach(function(ne){mt(te,$,ne)});var J=Wr($,L,q,oe,te);return $n(te,J),me(te,J),W(te,J),a(te.compile(),{destroy:function(){J.shader.program.destroy()}})}return{next:rt,current:lt,procs:function(){var $=jt(),L=$.proc("poll"),q=$.proc("refresh"),oe=$.block();L(oe),q(oe);var he=$.shared,te=he.gl,J=he.next,ne=he.current;oe(ne,".dirty=false;"),Qr($,L),Qr($,q,null,!0);var B;Ve&&(B=$.link(Ve)),Y.oes_vertex_array_object&&q($.link(Y.oes_vertex_array_object),".bindVertexArrayOES(null);");for(var Z=0;Z<pe.maxAttributes;++Z){var H=q.def(he.attributes,"[",Z,"]"),se=$.cond(H,".buffer");se.then(te,".enableVertexAttribArray(",Z,");",te,".bindBuffer(",ef,",",H,".buffer.buffer);",te,".vertexAttribPointer(",Z,",",H,".size,",H,".type,",H,".normalized,",H,".stride,",H,".offset);").else(te,".disableVertexAttribArray(",Z,");",te,".vertexAttrib4f(",Z,",",H,".x,",H,".y,",H,".z,",H,".w);",H,".buffer=null;"),q(se),Ve&&q(B,".vertexAttribDivisorANGLE(",Z,",",H,".divisor);")}return q($.shared.vao,".currentVAO=null;",$.shared.vao,".setVAO(",$.shared.vao,".targetVAO);"),Object.keys(Te).forEach(function(ce){var Ie=Te[ce],Xe=oe.def(J,".",ce),Ze=$.block();Ze("if(",Xe,"){",te,".enable(",Ie,")}else{",te,".disable(",Ie,")}",ne,".",ce,"=",Xe,";"),q(Ze),L("if(",Xe,"!==",ne,".",ce,"){",Ze,"}")}),Object.keys(Ee).forEach(function(ce){var Ie=Ee[ce],Xe=lt[ce],Ze,it,Ye=$.block();if(Ye(te,".",Ie,"("),Or(Xe)){var _t=Xe.length;Ze=$.global.def(J,".",ce),it=$.global.def(ne,".",ce),Ye(hn(_t,function(pt){return Ze+"["+pt+"]"}),");",hn(_t,function(pt){return it+"["+pt+"]="+Ze+"["+pt+"];"}).join("")),L("if(",hn(_t,function(pt){return Ze+"["+pt+"]!=="+it+"["+pt+"]"}).join("||"),"){",Ye,"}")}else Ze=oe.def(J,".",ce),it=oe.def(ne,".",ce),Ye(Ze,");",ne,".",ce,"=",Ze,";"),L("if(",Ze,"!==",it,"){",Ye,"}");q(Ye)}),$.compile()}(),compile:fn}}function cj(){return{vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0}}var fj=34918,dj=34919,q6=35007,pj=function(w,F){if(!F.ext_disjoint_timer_query)return null;var Y=[];function pe(){return Y.pop()||F.ext_disjoint_timer_query.createQueryEXT()}function Se(Ve){Y.push(Ve)}var de=[];function we(Ve){var dt=pe();F.ext_disjoint_timer_query.beginQueryEXT(q6,dt),de.push(dt),Be(de.length-1,de.length,Ve)}function Pe(){F.ext_disjoint_timer_query.endQueryEXT(q6)}function De(){this.startQueryIndex=-1,this.endQueryIndex=-1,this.sum=0,this.stats=null}var je=[];function He(){return je.pop()||new De}function We(Ve){je.push(Ve)}var Ke=[];function Be(Ve,dt,Ne){var lt=He();lt.startQueryIndex=Ve,lt.endQueryIndex=dt,lt.sum=0,lt.stats=Ne,Ke.push(lt)}var Ge=[],ie=[];function ye(){var Ve,dt,Ne=de.length;if(Ne!==0){ie.length=Math.max(ie.length,Ne+1),Ge.length=Math.max(Ge.length,Ne+1),Ge[0]=0,ie[0]=0;var lt=0;for(Ve=0,dt=0;dt<de.length;++dt){var rt=de[dt];F.ext_disjoint_timer_query.getQueryObjectEXT(rt,dj)?(lt+=F.ext_disjoint_timer_query.getQueryObjectEXT(rt,fj),Se(rt)):de[Ve++]=rt,Ge[dt+1]=lt,ie[dt+1]=Ve}for(de.length=Ve,Ve=0,dt=0;dt<Ke.length;++dt){var Ft=Ke[dt],Te=Ft.startQueryIndex,Ee=Ft.endQueryIndex;Ft.sum+=Ge[Ee]-Ge[Te];var gt=ie[Te],Je=ie[Ee];Je===gt?(Ft.stats.gpuTime+=Ft.sum/1e6,We(Ft)):(Ft.startQueryIndex=gt,Ft.endQueryIndex=Je,Ke[Ve++]=Ft)}Ke.length=Ve}}return{beginQuery:we,endQuery:Pe,pushScopeStats:Be,update:ye,getNumPendingQueries:function(){return de.length},clear:function(){Y.push.apply(Y,de);for(var Ve=0;Ve<Y.length;Ve++)F.ext_disjoint_timer_query.deleteQueryEXT(Y[Ve]);de.length=0,Y.length=0},restore:function(){de.length=0,Y.length=0}}},hj=16384,mj=256,gj=1024,vj=34962,K6="webglcontextlost",Q6="webglcontextrestored",J6=1,bj=2,yj=3;function eC(w,F){for(var Y=0;Y<w.length;++Y)if(w[Y]===F)return Y;return-1}function xj(w){var F=en(w);if(!F)return null;var Y=F.gl,pe=Y.getContextAttributes(),Se=Y.isContextLost(),de=pn(Y,F);if(!de)return null;var we=ni(),Pe=cj(),De=de.extensions,je=pj(Y,De),He=Dr(),We=Y.drawingBufferWidth,Ke=Y.drawingBufferHeight,Be={tick:0,time:0,viewportWidth:We,viewportHeight:Ke,framebufferWidth:We,framebufferHeight:Ke,drawingBufferWidth:We,drawingBufferHeight:Ke,pixelRatio:F.pixelRatio},Ge={},ie={elements:null,primitive:4,count:-1,offset:0,instances:-1},ye=N(Y,De),Ve=w$(Y,Pe,F,lt),dt=L$(Y,De,Ve,Pe),Ne=LV(Y,De,ye,Pe,Ve,dt,ie);function lt(Vt){return Ne.destroyBuffer(Vt)}var rt=BV(Y,we,Pe,F),Ft=fV(Y,De,ye,function(){gt.procs.poll()},Be,Pe,F),Te=dV(Y,De,ye,Pe,F),Ee=PV(Y,De,ye,Ft,Te,Pe),gt=uj(Y,we,De,ye,Ve,dt,Ft,Ee,Ge,Ne,rt,ie,Be,je,F),Je=$V(Y,Ee,gt.procs.poll,Be,pe,De,ye),Ue=gt.next,tt=Y.canvas,nt=[],Kt=[],jt=[],at=[F.onDestroy],ct=null;function zt(){if(nt.length===0){je&&je.update(),ct=null;return}ct=Sa.next(zt),Rr();for(var Vt=nt.length-1;Vt>=0;--Vt){var ln=nt[Vt];ln&&ln(Be,null,0)}Y.flush(),je&&je.update()}function Yt(){!ct&&nt.length>0&&(ct=Sa.next(zt))}function un(){ct&&(Sa.cancel(zt),ct=null)}function cr(Vt){Vt.preventDefault(),Se=!0,un(),Kt.forEach(function(ln){ln()})}function vr(Vt){Y.getError(),Se=!1,de.restore(),rt.restore(),Ve.restore(),Ft.restore(),Te.restore(),Ee.restore(),Ne.restore(),je&&je.restore(),gt.procs.refresh(),Yt(),jt.forEach(function(ln){ln()})}var cn=typeof my!="undefined"&&!!my&&typeof my.showToast=="function"&&my.isFRM!==!0;!cn&&tt&&(tt.addEventListener(K6,cr,!1),tt.addEventListener(Q6,vr,!1));function ua(){nt.length=0,un(),!cn&&tt&&(tt.removeEventListener(K6,cr),tt.removeEventListener(Q6,vr)),rt.clear(),Ee.clear(),Te.clear(),Ne.clear(),Ft.clear(),dt.clear(),Ve.clear(),je&&je.clear(),at.forEach(function(Vt){Vt()})}function Jn(Vt){E(!!Vt,"invalid args to regl({...})"),E.type(Vt,"object","invalid args to regl({...})");function ln(te){var J=a({},te);delete J.uniforms,delete J.attributes,delete J.context,delete J.vao,"stencil"in J&&J.stencil.op&&(J.stencil.opBack=J.stencil.opFront=J.stencil.op,delete J.stencil.op);function ne(B){if(B in J){var Z=J[B];delete J[B],Object.keys(Z).forEach(function(H){J[B+"."+H]=Z[H]})}}return ne("blend"),ne("depth"),ne("cull"),ne("stencil"),ne("polygonOffset"),ne("scissor"),ne("sample"),"vao"in te&&(J.vao=te.vao),J}function $n(te,J){var ne={},B={};return Object.keys(te).forEach(function(Z){var H=te[Z];if(Yn.isDynamic(H)){B[Z]=Yn.unbox(H,Z);return}else if(J&&Array.isArray(H)){for(var se=0;se<H.length;++se)if(Yn.isDynamic(H[se])){B[Z]=Yn.unbox(H,Z);return}}ne[Z]=H}),{dynamic:B,static:ne}}var $r=$n(Vt.context||{},!0),Fs=$n(Vt.uniforms||{},!0),W=$n(Vt.attributes||{},!1),me=$n(ln(Vt),!1),fe={gpuTime:0,cpuTime:0,count:0},mt=gt.compile(me,W,Fs,$r,fe),fn=mt.draw,$=mt.batch,L=mt.scope,q=[];function oe(te){for(;q.length<te;)q.push(null);return q}function he(te,J){var ne;if(Se&&E.raise("context lost"),typeof te=="function")return L.call(this,null,te,0);if(typeof J=="function")if(typeof te=="number")for(ne=0;ne<te;++ne)L.call(this,null,J,ne);else if(Array.isArray(te))for(ne=0;ne<te.length;++ne)L.call(this,te[ne],J,ne);else return L.call(this,te,J,0);else if(typeof te=="number"){if(te>0)return $.call(this,oe(te|0),te|0)}else if(Array.isArray(te)){if(te.length)return $.call(this,te,te.length)}else return fn.call(this,te)}return a(he,{stats:fe,destroy:function(){mt.destroy()}})}var Wr=Ee.setFBO=Jn({framebuffer:Yn.define.call(null,J6,"framebuffer")});function Mr(Vt,ln){var $n=0;gt.procs.poll();var $r=ln.color;$r&&(Y.clearColor(+$r[0]||0,+$r[1]||0,+$r[2]||0,+$r[3]||0),$n|=hj),"depth"in ln&&(Y.clearDepth(+ln.depth),$n|=mj),"stencil"in ln&&(Y.clearStencil(ln.stencil|0),$n|=gj),E(!!$n,"called regl.clear with no buffer specified"),Y.clear($n)}function Qr(Vt){if(E(typeof Vt=="object"&&Vt,"regl.clear() takes an object as input"),"framebuffer"in Vt)if(Vt.framebuffer&&Vt.framebuffer_reglType==="framebufferCube")for(var ln=0;ln<6;++ln)Wr(a({framebuffer:Vt.framebuffer.faces[ln]},Vt),Mr);else Wr(Vt,Mr);else Mr(null,Vt)}function ca(Vt){E.type(Vt,"function","regl.frame() callback must be a function"),nt.push(Vt);function ln(){var $n=eC(nt,Vt);E($n>=0,"cannot cancel a frame twice");function $r(){var Fs=eC(nt,$r);nt[Fs]=nt[nt.length-1],nt.length-=1,nt.length<=0&&un()}nt[$n]=$r}return Yt(),{cancel:ln}}function ya(){var Vt=Ue.viewport,ln=Ue.scissor_box;Vt[0]=Vt[1]=ln[0]=ln[1]=0,Be.viewportWidth=Be.framebufferWidth=Be.drawingBufferWidth=Vt[2]=ln[2]=Y.drawingBufferWidth,Be.viewportHeight=Be.framebufferHeight=Be.drawingBufferHeight=Vt[3]=ln[3]=Y.drawingBufferHeight}function Rr(){Be.tick+=1,Be.time=fa(),ya(),gt.procs.poll()}function tn(){Ft.refresh(),ya(),gt.procs.refresh(),je&&je.update()}function fa(){return(Dr()-He)/1e3}tn();function In(Vt,ln){E.type(ln,"function","listener callback must be a function");var $n;switch(Vt){case"frame":return ca(ln);case"lost":$n=Kt;break;case"restore":$n=jt;break;case"destroy":$n=at;break;default:E.raise("invalid event, must be one of frame,lost,restore,destroy")}return $n.push(ln),{cancel:function(){for(var $r=0;$r<$n.length;++$r)if($n[$r]===ln){$n[$r]=$n[$n.length-1],$n.pop();return}}}}var Jr=a(Jn,{clear:Qr,prop:Yn.define.bind(null,J6),context:Yn.define.bind(null,bj),this:Yn.define.bind(null,yj),draw:Jn({}),buffer:function(Vt){return Ve.create(Vt,vj,!1,!1)},elements:function(Vt){return dt.create(Vt,!1)},texture:Ft.create2D,cube:Ft.createCube,renderbuffer:Te.create,framebuffer:Ee.create,framebufferCube:Ee.createCube,vao:Ne.createVAO,attributes:pe,frame:ca,on:In,limits:ye,hasExtension:function(Vt){return ye.extensions.indexOf(Vt.toLowerCase())>=0},read:Je,destroy:ua,_gl:Y,_refresh:tn,poll:function(){Rr(),je&&je.update()},now:fa,stats:Pe});return F.onDone(null,Jr),Jr}return xj})})(oB);var J1e=oB.exports,e_e=function(){function e(t,n){Ae(this,e),m(this,"attribute",void 0),m(this,"buffer",void 0);var r=n.buffer,a=n.offset,i=n.stride,o=n.normalized,s=n.size,l=n.divisor;this.buffer=r,this.attribute={buffer:r.get(),offset:a||0,stride:i||0,normalized:o||!1,divisor:l||0},s&&(this.attribute.size=s)}return Oe(e,[{key:"get",value:function(){return this.attribute}},{key:"updateBuffer",value:function(n){this.buffer.subData(n)}},{key:"destroy",value:function(){this.buffer.destroy()}}]),e}(),$s,Zp,Vs,io,qp,Fl,Kp,bg,us,Yu,Ra,cs,fs,yg,t_e=($s={},m($s,V.POINTS,"points"),m($s,V.LINES,"lines"),m($s,V.LINE_LOOP,"line loop"),m($s,V.LINE_STRIP,"line strip"),m($s,V.TRIANGLES,"triangles"),m($s,V.TRIANGLE_FAN,"triangle fan"),m($s,V.TRIANGLE_STRIP,"triangle strip"),$s),DB=(Zp={},m(Zp,V.STATIC_DRAW,"static"),m(Zp,V.DYNAMIC_DRAW,"dynamic"),m(Zp,V.STREAM_DRAW,"stream"),Zp),x3=(Vs={},m(Vs,V.BYTE,"int8"),m(Vs,V.UNSIGNED_INT,"int16"),m(Vs,V.INT,"int32"),m(Vs,V.UNSIGNED_BYTE,"uint8"),m(Vs,V.UNSIGNED_SHORT,"uint16"),m(Vs,V.UNSIGNED_INT,"uint32"),m(Vs,V.FLOAT,"float"),Vs),n_e=(io={},m(io,V.ALPHA,"alpha"),m(io,V.LUMINANCE,"luminance"),m(io,V.LUMINANCE_ALPHA,"luminance alpha"),m(io,V.RGB,"rgb"),m(io,V.RGBA,"rgba"),m(io,V.RGBA4,"rgba4"),m(io,V.RGB5_A1,"rgb5 a1"),m(io,V.RGB565,"rgb565"),m(io,V.DEPTH_COMPONENT,"depth"),m(io,V.DEPTH_STENCIL,"depth stencil"),io),r_e=(qp={},m(qp,V.DONT_CARE,"dont care"),m(qp,V.NICEST,"nice"),m(qp,V.FASTEST,"fast"),qp),_8=(Fl={},m(Fl,V.NEAREST,"nearest"),m(Fl,V.LINEAR,"linear"),m(Fl,V.LINEAR_MIPMAP_LINEAR,"mipmap"),m(Fl,V.NEAREST_MIPMAP_LINEAR,"nearest mipmap linear"),m(Fl,V.LINEAR_MIPMAP_NEAREST,"linear mipmap nearest"),m(Fl,V.NEAREST_MIPMAP_NEAREST,"nearest mipmap nearest"),Fl),w8=(Kp={},m(Kp,V.REPEAT,"repeat"),m(Kp,V.CLAMP_TO_EDGE,"clamp"),m(Kp,V.MIRRORED_REPEAT,"mirror"),Kp),a_e=(bg={},m(bg,V.NONE,"none"),m(bg,V.BROWSER_DEFAULT_WEBGL,"browser"),bg),i_e=(us={},m(us,V.NEVER,"never"),m(us,V.ALWAYS,"always"),m(us,V.LESS,"less"),m(us,V.LEQUAL,"lequal"),m(us,V.GREATER,"greater"),m(us,V.GEQUAL,"gequal"),m(us,V.EQUAL,"equal"),m(us,V.NOTEQUAL,"notequal"),us),k8=(Yu={},m(Yu,V.FUNC_ADD,"add"),m(Yu,V.MIN_EXT,"min"),m(Yu,V.MAX_EXT,"max"),m(Yu,V.FUNC_SUBTRACT,"subtract"),m(Yu,V.FUNC_REVERSE_SUBTRACT,"reverse subtract"),Yu),xg=(Ra={},m(Ra,V.ZERO,"zero"),m(Ra,V.ONE,"one"),m(Ra,V.SRC_COLOR,"src color"),m(Ra,V.ONE_MINUS_SRC_COLOR,"one minus src color"),m(Ra,V.SRC_ALPHA,"src alpha"),m(Ra,V.ONE_MINUS_SRC_ALPHA,"one minus src alpha"),m(Ra,V.DST_COLOR,"dst color"),m(Ra,V.ONE_MINUS_DST_COLOR,"one minus dst color"),m(Ra,V.DST_ALPHA,"dst alpha"),m(Ra,V.ONE_MINUS_DST_ALPHA,"one minus dst alpha"),m(Ra,V.CONSTANT_COLOR,"constant color"),m(Ra,V.ONE_MINUS_CONSTANT_COLOR,"one minus constant color"),m(Ra,V.CONSTANT_ALPHA,"constant alpha"),m(Ra,V.ONE_MINUS_CONSTANT_ALPHA,"one minus constant alpha"),m(Ra,V.SRC_ALPHA_SATURATE,"src alpha saturate"),Ra),o_e=(cs={},m(cs,V.NEVER,"never"),m(cs,V.ALWAYS,"always"),m(cs,V.LESS,"less"),m(cs,V.LEQUAL,"lequal"),m(cs,V.GREATER,"greater"),m(cs,V.GEQUAL,"gequal"),m(cs,V.EQUAL,"equal"),m(cs,V.NOTEQUAL,"notequal"),cs),pf=(fs={},m(fs,V.ZERO,"zero"),m(fs,V.KEEP,"keep"),m(fs,V.REPLACE,"replace"),m(fs,V.INVERT,"invert"),m(fs,V.INCR,"increment"),m(fs,V.DECR,"decrement"),m(fs,V.INCR_WRAP,"increment wrap"),m(fs,V.DECR_WRAP,"decrement wrap"),fs),s_e=(yg={},m(yg,V.FRONT,"front"),m(yg,V.BACK,"back"),yg),l_e=function(){function e(t,n){Ae(this,e),m(this,"buffer",void 0);var r=n.data,a=n.usage,i=n.type;this.buffer=t.buffer({data:r,usage:DB[a||V.STATIC_DRAW],type:x3[i||V.UNSIGNED_BYTE]})}return Oe(e,[{key:"get",value:function(){return this.buffer}},{key:"destroy",value:function(){this.buffer.destroy()}},{key:"subData",value:function(n){var r=n.data,a=n.offset;this.buffer.subdata(r,a)}}]),e}(),u_e=function(){function e(t,n){Ae(this,e),m(this,"elements",void 0);var r=n.data,a=n.usage,i=n.type,o=n.count;this.elements=t.elements({data:r,usage:DB[a||V.STATIC_DRAW],type:x3[i||V.UNSIGNED_BYTE],count:o})}return Oe(e,[{key:"get",value:function(){return this.elements}},{key:"subData",value:function(n){var r=n.data;this.elements.subdata(r)}},{key:"destroy",value:function(){}}]),e}(),c_e=function(){function e(t,n){Ae(this,e),m(this,"framebuffer",void 0);var r=n.width,a=n.height,i=n.color,o=n.colors;n.depth,n.stencil;var s={width:r,height:a};Array.isArray(o)&&(s.colors=o.map(function(l){return l.get()})),i&&typeof i!="boolean"&&(s.color=i.get()),this.framebuffer=t.framebuffer(s)}return Oe(e,[{key:"get",value:function(){return this.framebuffer}},{key:"destroy",value:function(){this.framebuffer.destroy()}},{key:"resize",value:function(n){var r=n.width,a=n.height;this.framebuffer.resize(r,a)}}]),e}();function E8(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function oo(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?E8(Object(n),!0).forEach(function(r){m(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):E8(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var f_e=function(){function e(t,n){Ae(this,e),m(this,"reGl",void 0),m(this,"destroyed",!1),m(this,"drawCommand",void 0),m(this,"drawPickCommand",void 0),m(this,"drawParams",void 0),m(this,"options",void 0),m(this,"uniforms",{}),this.reGl=t;var r=n.vs,a=n.fs,i=n.attributes,o=n.uniforms,s=n.primitive,l=n.count,u=n.elements,c=n.depth,f=n.blend,d=n.stencil,p=n.cull,h=n.instances,g={};this.options=n,o&&(this.uniforms=this.extractUniforms(o),Object.keys(o).forEach(function(x){g[x]=t.prop(x)}));var v={};Object.keys(i).forEach(function(x){v[x]=i[x].get()});var b={attributes:v,frag:a,uniforms:g,vert:r,blend:{},primitive:t_e[s===void 0?V.TRIANGLES:s]};h&&(b.instances=h),l&&(b.count=l),u&&(b.elements=u.get()),this.initDepthDrawParams({depth:c},b),this.initBlendDrawParams({blend:f},b),this.initStencilDrawParams({stencil:d},b),this.initCullDrawParams({cull:p},b),this.drawCommand=t(b);var y=nd(b);y.blend=oo(oo({},y.blend),{},{enable:!1}),this.drawPickCommand=t(y),this.drawParams=b}return Oe(e,[{key:"updateAttributesAndElements",value:function(n,r){var a={};Object.keys(n).forEach(function(o){a[o]=n[o].get()}),this.drawParams.attributes=a,this.drawParams.elements=r.get(),this.drawCommand=this.reGl(this.drawParams);var i=nd(this.drawParams);i.blend=oo(oo({},i.blend),{},{enable:!1}),this.drawPickCommand=this.reGl(i)}},{key:"updateAttributes",value:function(n){var r={};Object.keys(n).forEach(function(i){r[i]=n[i].get()}),this.drawParams.attributes=r,this.drawCommand=this.reGl(this.drawParams);var a=nd(this.drawParams);a.blend=oo(oo({},a.blend),{},{enable:!1}),this.drawPickCommand=this.reGl(a)}},{key:"addUniforms",value:function(n){this.uniforms=oo(oo({},this.uniforms),this.extractUniforms(n))}},{key:"draw",value:function(n,r){if(!(this.drawParams.attributes&&Object.keys(this.drawParams.attributes).length===0)){var a=oo(oo({},this.uniforms),this.extractUniforms(n.uniforms||{})),i={};Object.keys(a).forEach(function(o){var s=hr(a[o]);s==="boolean"||s==="number"||Array.isArray(a[o])||a[o].BYTES_PER_ELEMENT?i[o]=a[o]:i[o]=a[o].get()}),r?this.drawPickCommand(i):this.drawCommand(i)}}},{key:"destroy",value:function(){this.drawParams.elements.destroy(),this.options.attributes&&Object.values(this.options.attributes).forEach(function(n){n.destroy()}),this.destroyed=!0}},{key:"initDepthDrawParams",value:function(n,r){var a=n.depth;a&&(r.depth={enable:a.enable===void 0?!0:!!a.enable,mask:a.mask===void 0?!0:!!a.mask,func:i_e[a.func||V.LESS],range:a.range||[0,1]})}},{key:"initBlendDrawParams",value:function(n,r){var a=n.blend;if(a){var i=a.enable,o=a.func,s=a.equation,l=a.color,u=l===void 0?[0,0,0,0]:l;r.blend={enable:!!i,func:{srcRGB:xg[o&&o.srcRGB||V.SRC_ALPHA],srcAlpha:xg[o&&o.srcAlpha||V.SRC_ALPHA],dstRGB:xg[o&&o.dstRGB||V.ONE_MINUS_SRC_ALPHA],dstAlpha:xg[o&&o.dstAlpha||V.ONE_MINUS_SRC_ALPHA]},equation:{rgb:k8[s&&s.rgb||V.FUNC_ADD],alpha:k8[s&&s.alpha||V.FUNC_ADD]},color:u}}}},{key:"initStencilDrawParams",value:function(n,r){var a=n.stencil;if(a){var i=a.enable,o=a.mask,s=o===void 0?-1:o,l=a.func,u=l===void 0?{cmp:V.ALWAYS,ref:0,mask:-1}:l,c=a.opFront,f=c===void 0?{fail:V.KEEP,zfail:V.KEEP,zpass:V.KEEP}:c,d=a.opBack,p=d===void 0?{fail:V.KEEP,zfail:V.KEEP,zpass:V.KEEP}:d;r.stencil={enable:!!i,mask:s,func:oo(oo({},u),{},{cmp:o_e[u.cmp]}),opFront:{fail:pf[f.fail],zfail:pf[f.zfail],zpass:pf[f.zpass]},opBack:{fail:pf[p.fail],zfail:pf[p.zfail],zpass:pf[p.zpass]}}}}},{key:"initCullDrawParams",value:function(n,r){var a=n.cull;if(a){var i=a.enable,o=a.face,s=o===void 0?V.BACK:o;r.cull={enable:!!i,face:s_e[s]}}}},{key:"extractUniforms",value:function(n){var r=this,a={};return Object.keys(n).forEach(function(i){r.extractUniformsRecursively(i,n[i],a,"")}),a}},{key:"extractUniformsRecursively",value:function(n,r,a,i){var o=this;if(r===null||typeof r=="number"||typeof r=="boolean"||Array.isArray(r)&&typeof r[0]=="number"||Qb(r)||r===""||"resize"in r){a["".concat(i&&i+".").concat(n)]=r;return}l9(r)&&Object.keys(r).forEach(function(s){o.extractUniformsRecursively(s,r[s],a,"".concat(i&&i+".").concat(n))}),Array.isArray(r)&&r.forEach(function(s,l){Object.keys(s).forEach(function(u){o.extractUniformsRecursively(u,s[u],a,"".concat(i&&i+".").concat(n,"[").concat(l,"]"))})})}}]),e}(),d_e=function(){function e(t,n){Ae(this,e),m(this,"texture",void 0),m(this,"width",void 0),m(this,"height",void 0),m(this,"isDistroy",!1);var r=n.data,a=n.type,i=a===void 0?V.UNSIGNED_BYTE:a,o=n.width,s=n.height,l=n.flipY,u=l===void 0?!1:l,c=n.format,f=c===void 0?V.RGBA:c,d=n.mipmap,p=d===void 0?!1:d,h=n.wrapS,g=h===void 0?V.CLAMP_TO_EDGE:h,v=n.wrapT,b=v===void 0?V.CLAMP_TO_EDGE:v,y=n.aniso,x=y===void 0?0:y,k=n.alignment,T=k===void 0?1:k,C=n.premultiplyAlpha,I=C===void 0?!1:C,P=n.mag,j=P===void 0?V.NEAREST:P,A=n.min,S=A===void 0?V.NEAREST:A,M=n.colorSpace,O=M===void 0?V.BROWSER_DEFAULT_WEBGL:M,R=n.x,G=R===void 0?0:R,ee=n.y,re=ee===void 0?0:ee,X=n.copy,K=X===void 0?!1:X;this.width=o,this.height=s;var ae={width:o,height:s,type:x3[i],format:n_e[f],wrapS:w8[g],wrapT:w8[b],mag:_8[j],min:_8[S],alignment:T,flipY:u,colorSpace:a_e[O],premultiplyAlpha:I,aniso:x,x:G,y:re,copy:K};r&&(ae.data=r),typeof p=="number"?ae.mipmap=r_e[p]:typeof p=="boolean"&&(ae.mipmap=p),this.texture=t.texture(ae)}return Oe(e,[{key:"get",value:function(){return this.texture}},{key:"update",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.texture(n)}},{key:"bind",value:function(){this.texture._texture.bind()}},{key:"resize",value:function(n){var r=n.width,a=n.height;this.texture.resize(r,a),this.width=r,this.height=a}},{key:"destroy",value:function(){if(!this.isDistroy){var n;(n=this.texture)===null||n===void 0||n.destroy()}this.isDistroy=!0}}]),e}(),S8,C8,p_e=(S8=sn(),S8(C8=function(){function e(){var t=this;Ae(this,e),m(this,"extensionObject",void 0),m(this,"gl",void 0),m(this,"$container",void 0),m(this,"canvas",void 0),m(this,"width",void 0),m(this,"height",void 0),m(this,"isDirty",void 0),m(this,"createModel",function(n){return new f_e(t.gl,n)}),m(this,"createAttribute",function(n){return new e_e(t.gl,n)}),m(this,"createBuffer",function(n){return new l_e(t.gl,n)}),m(this,"createElements",function(n){return new u_e(t.gl,n)}),m(this,"createTexture2D",function(n){return new d_e(t.gl,n)}),m(this,"createFramebuffer",function(n){return new c_e(t.gl,n)}),m(this,"useFramebuffer",function(n,r){t.gl({framebuffer:n?n.get():null})(r)}),m(this,"clear",function(n){var r,a=n.color,i=n.depth,o=n.stencil,s=n.framebuffer,l=s===void 0?null:s,u={color:a,depth:i,stencil:o};u.framebuffer=l===null?l:l.get(),(r=t.gl)===null||r===void 0||r.clear(u)}),m(this,"viewport",function(n){var r=n.x,a=n.y,i=n.width,o=n.height;t.gl._gl.viewport(r,a,i,o),t.width=i,t.height=o,t.gl._refresh()}),m(this,"readPixels",function(n){var r=n.framebuffer,a=n.x,i=n.y,o=n.width,s=n.height,l={x:a,y:i,width:o,height:s};return r&&(l.framebuffer=r.get()),t.gl.read(l)}),m(this,"getViewportSize",function(){return{width:t.gl._gl.drawingBufferWidth,height:t.gl._gl.drawingBufferHeight}}),m(this,"getContainer",function(){if(Bi)return t.canvas;var n;return(n=t.canvas)===null||n===void 0?void 0:n.parentElement}),m(this,"getCanvas",function(){return t.canvas}),m(this,"getGLContext",function(){return t.gl._gl}),m(this,"destroy",function(){t.canvas=null,t.gl.destroy(),t.gl=null})}return Oe(e,[{key:"init",value:function(){var t=lr(vn.mark(function r(a,i){var o=this;return vn.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return this.canvas=a,l.next=3,new Promise(function(u,c){J1e({canvas:o.canvas,attributes:{alpha:!0,antialias:i.antialias,premultipliedAlpha:!0,preserveDrawingBuffer:i.preserveDrawingBuffer,stencil:i.stencil},extensions:["OES_element_index_uint","OES_standard_derivatives","ANGLE_instanced_arrays"],optionalExtensions:["oes_texture_float_linear","OES_texture_float","EXT_texture_filter_anisotropic","EXT_blend_minmax","WEBGL_depth_texture"],profile:!0,onDone:function(d,p){(d||!p)&&c(d),u(p)}})});case 3:this.gl=l.sent,this.extensionObject={OES_texture_float:this.testExtension("OES_texture_float")};case 5:case"end":return l.stop()}},r,this)}));function n(r,a){return t.apply(this,arguments)}return n}()},{key:"getPointSizeRange",value:function(){return this.gl._gl.getParameter(this.gl._gl.ALIASED_POINT_SIZE_RANGE)}},{key:"testExtension",value:function(n){return!!this.getGLContext().getExtension(n)}},{key:"setState",value:function(){this.gl({cull:{enable:!1,face:"back"},viewport:{x:0,y:0,height:this.width,width:this.height},blend:{enable:!0,equation:"add"},framebuffer:null}),this.gl._refresh()}},{key:"setBaseState",value:function(){this.gl({cull:{enable:!1,face:"back"},viewport:{x:0,y:0,height:this.width,width:this.height},blend:{enable:!1,equation:"add"},framebuffer:null}),this.gl._refresh()}},{key:"setCustomLayerDefaults",value:function(){var n=this.getGLContext();n.disable(n.CULL_FACE)}},{key:"setDirty",value:function(n){this.isDirty=n}},{key:"getDirty",value:function(){return this.isDirty}}]),e}())||C8);function T8(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function A8(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?T8(Object(n),!0).forEach(function(r){m(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):T8(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var h_e=function(){function e(t){Ae(this,e),m(this,"sceneService",void 0),m(this,"mapService",void 0),m(this,"controlService",void 0),m(this,"layerService",void 0),m(this,"iconService",void 0),m(this,"markerService",void 0),m(this,"popupService",void 0),m(this,"fontService",void 0),m(this,"interactionService",void 0),m(this,"container",void 0);var n=t.id,r=t.map,a=t.canvas,i=t.hasBaseMap,o=dhe();this.container=o,r.setContainer(o,n,a,i),o.bind(xe.IRendererService).to(p_e).inSingletonScope(),this.sceneService=o.get(xe.ISceneService),this.mapService=o.get(xe.IMapService),this.iconService=o.get(xe.IIconService),this.fontService=o.get(xe.IFontService),this.controlService=o.get(xe.IControlService),this.layerService=o.get(xe.ILayerService),this.markerService=o.get(xe.IMarkerService),this.interactionService=o.get(xe.IInteractionService),this.popupService=o.get(xe.IPopupService),Bi?this.sceneService.initMiniScene(t):(this.initComponent(n),this.sceneService.init(t),this.initControl())}return Oe(e,[{key:"map",get:function(){return this.mapService.map}},{key:"loaded",get:function(){return this.sceneService.loaded}},{key:"getServiceContainer",value:function(){return this.container}},{key:"getSize",value:function(){return this.mapService.getSize()}},{key:"getMinZoom",value:function(){return this.mapService.getMinZoom()}},{key:"getMaxZoom",value:function(){return this.mapService.getMaxZoom()}},{key:"getType",value:function(){return this.mapService.getType()}},{key:"getMapContainer",value:function(){return this.mapService.getMapContainer()}},{key:"getMapCanvasContainer",value:function(){return this.mapService.getMapCanvasContainer()}},{key:"getMapService",value:function(){return this.mapService}},{key:"exportPng",value:function(n){return this.sceneService.exportPng(n)}},{key:"exportMap",value:function(n){return this.sceneService.exportPng(n)}},{key:"registerRenderService",value:function(n){var r=this;if(this.sceneService.loaded){var a=new n(this);a.init()}else this.on("loaded",function(){var i=new n(r);i.init()})}},{key:"setBgColor",value:function(n){this.mapService.setBgColor(n)}},{key:"addLayer",value:function(n){var r=ck(this.container);n.setContainer(r,this.container),this.sceneService.addLayer(n);var a=n.getLayerConfig();if(a){var i=a.mask,o=a.maskfence,s=a.maskColor,l=s===void 0?"#000":s,u=a.maskOpacity,c=u===void 0?0:u;if(i&&o){var f=new hD().source(o).shape("fill").color(l).style({opacity:c});this.addMask(f,n.id)}}else console.warn("addLayer should run after scene loaded!")}},{key:"addMask",value:function(n,r){var a=this.getLayer(r);if(a){var i=ck(this.container);n.setContainer(i,this.container),a.addMaskLayer(n),this.sceneService.addLayer(n)}else console.warn("parent layer not find!")}},{key:"getPickedLayer",value:function(){return this.layerService.pickedLayerId}},{key:"getLayers",value:function(){return this.layerService.getLayers()}},{key:"getLayer",value:function(n){return this.layerService.getLayer(n)}},{key:"getLayerByName",value:function(n){return this.layerService.getLayerByName(n)}},{key:"removeLayer",value:function(n,r){this.layerService.remove(n,r)}},{key:"removeAllLayer",value:function(){this.layerService.removeAllLayers()}},{key:"render",value:function(){this.sceneService.render()}},{key:"setEnableRender",value:function(n){this.layerService.setEnableRender(n)}},{key:"addIconFont",value:function(n,r){this.fontService.addIconFont(n,r)}},{key:"addIconFonts",value:function(n){var r=this;n.forEach(function(a){var i=Le(a,2),o=i[0],s=i[1];r.fontService.addIconFont(o,s)})}},{key:"addFontFace",value:function(n,r){this.sceneService.addFontFace(n,r)}},{key:"addImage",value:function(n,r){Bi?this.iconService.addImageMini(n,r,this.sceneService):this.iconService.addImage(n,r)}},{key:"hasImage",value:function(n){return this.iconService.hasImage(n)}},{key:"removeImage",value:function(n){this.iconService.removeImage(n)}},{key:"addIconFontGlyphs",value:function(n,r){this.fontService.addIconGlyphs(r)}},{key:"addControl",value:function(n){this.controlService.addControl(n,this.container)}},{key:"removeControl",value:function(n){this.controlService.removeControl(n)}},{key:"getControlByName",value:function(n){return this.controlService.getControlByName(n)}},{key:"addMarker",value:function(n){this.markerService.addMarker(n)}},{key:"addMarkerLayer",value:function(n){this.markerService.addMarkerLayer(n)}},{key:"removeMarkerLayer",value:function(n){this.markerService.removeMarkerLayer(n)}},{key:"removeAllMakers",value:function(){this.markerService.removeAllMarkers()}},{key:"addPopup",value:function(n){this.popupService.addPopup(n)}},{key:"on",value:function(n,r){q1.indexOf(n)===-1?this.mapService.on(n,r):this.sceneService.on(n,r)}},{key:"once",value:function(n,r){q1.indexOf(n)===-1?this.mapService.once(n,r):this.sceneService.once(n,r)}},{key:"off",value:function(n,r){q1.indexOf(n)===-1?this.mapService.off(n,r):this.sceneService.off(n,r)}},{key:"getZoom",value:function(){return this.mapService.getZoom()}},{key:"getCenter",value:function(n){return this.mapService.getCenter(n)}},{key:"setCenter",value:function(n,r){return this.mapService.setCenter(n,r)}},{key:"getPitch",value:function(){return this.mapService.getPitch()}},{key:"setPitch",value:function(n){return this.mapService.setPitch(n)}},{key:"getRotation",value:function(){return this.mapService.getRotation()}},{key:"getBounds",value:function(){return this.mapService.getBounds()}},{key:"setRotation",value:function(n){this.mapService.setRotation(n)}},{key:"zoomIn",value:function(){this.mapService.zoomIn()}},{key:"zoomOut",value:function(){this.mapService.zoomOut()}},{key:"panTo",value:function(n){this.mapService.panTo(n)}},{key:"panBy",value:function(n,r){this.mapService.panBy(n,r)}},{key:"getContainer",value:function(){return this.mapService.getContainer()}},{key:"setZoom",value:function(n){this.mapService.setZoom(n)}},{key:"fitBounds",value:function(n,r){var a=this.sceneService.getSceneConfig(),i=a.fitBoundsOptions,o=a.animate;this.mapService.fitBounds(n,r||A8(A8({},i),{},{animate:o}))}},{key:"setZoomAndCenter",value:function(n,r){this.mapService.setZoomAndCenter(n,r)}},{key:"setMapStyle",value:function(n){this.mapService.setMapStyle(n)}},{key:"setMapStatus",value:function(n){this.mapService.setMapStatus(n)}},{key:"pixelToLngLat",value:function(n){return this.mapService.pixelToLngLat(n)}},{key:"lngLatToPixel",value:function(n){return this.mapService.lngLatToPixel(n)}},{key:"containerToLngLat",value:function(n){return this.mapService.containerToLngLat(n)}},{key:"lngLatToContainer",value:function(n){return this.mapService.lngLatToContainer(n)}},{key:"destroy",value:function(){this.sceneService.destroy()}},{key:"registerPostProcessingPass",value:function(n,r){this.container.bind(xe.IPostProcessingPass).to(n).whenTargetNamed(r)}},{key:"enableShaderPick",value:function(){this.layerService.enableShaderPick()}},{key:"diasbleShaderPick",value:function(){this.layerService.disableShaderPick()}},{key:"getPointSizeRange",value:function(){return this.sceneService.getPointSizeRange()}},{key:"initComponent",value:function(n){this.controlService.init({container:cY(n)},this.container),this.markerService.init(this.container),this.popupService.init(this.container)}},{key:"initControl",value:function(){var n=this.sceneService.getSceneConfig(),r=n.logoVisible,a=n.logoPosition;r&&this.addControl(new xhe({position:a}))}}]),e}(),m_e=function(t){_.exports.useEffect(function(){t==null||t()},[])},g_e=m_e,BB=function(){if(typeof Map!="undefined")return Map;function e(t,n){var r=-1;return t.some(function(a,i){return a[0]===n?(r=i,!0):!1}),r}return function(){function t(){this.__entries__=[]}return Object.defineProperty(t.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),t.prototype.get=function(n){var r=e(this.__entries__,n),a=this.__entries__[r];return a&&a[1]},t.prototype.set=function(n,r){var a=e(this.__entries__,n);~a?this.__entries__[a][1]=r:this.__entries__.push([n,r])},t.prototype.delete=function(n){var r=this.__entries__,a=e(r,n);~a&&r.splice(a,1)},t.prototype.has=function(n){return!!~e(this.__entries__,n)},t.prototype.clear=function(){this.__entries__.splice(0)},t.prototype.forEach=function(n,r){r===void 0&&(r=null);for(var a=0,i=this.__entries__;a<i.length;a++){var o=i[a];n.call(r,o[1],o[0])}},t}()}(),Lk=typeof window!="undefined"&&typeof document!="undefined"&&window.document===document,db=function(){return typeof global!="undefined"&&global.Math===Math?global:typeof self!="undefined"&&self.Math===Math?self:typeof window!="undefined"&&window.Math===Math?window:Function("return this")()}(),v_e=function(){return typeof requestAnimationFrame=="function"?requestAnimationFrame.bind(db):function(e){return setTimeout(function(){return e(Date.now())},1e3/60)}}(),b_e=2;function y_e(e,t){var n=!1,r=!1,a=0;function i(){n&&(n=!1,e()),r&&s()}function o(){v_e(i)}function s(){var l=Date.now();if(n){if(l-a<b_e)return;r=!0}else n=!0,r=!1,setTimeout(o,t);a=l}return s}var x_e=20,__e=["top","right","bottom","left","width","height","size","weight"],w_e=typeof MutationObserver!="undefined",k_e=function(){function e(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=y_e(this.refresh.bind(this),x_e)}return e.prototype.addObserver=function(t){~this.observers_.indexOf(t)||this.observers_.push(t),this.connected_||this.connect_()},e.prototype.removeObserver=function(t){var n=this.observers_,r=n.indexOf(t);~r&&n.splice(r,1),!n.length&&this.connected_&&this.disconnect_()},e.prototype.refresh=function(){var t=this.updateObservers_();t&&this.refresh()},e.prototype.updateObservers_=function(){var t=this.observers_.filter(function(n){return n.gatherActive(),n.hasActive()});return t.forEach(function(n){return n.broadcastActive()}),t.length>0},e.prototype.connect_=function(){!Lk||this.connected_||(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),w_e?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},e.prototype.disconnect_=function(){!Lk||!this.connected_||(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},e.prototype.onTransitionEnd_=function(t){var n=t.propertyName,r=n===void 0?"":n,a=__e.some(function(i){return!!~r.indexOf(i)});a&&this.refresh()},e.getInstance=function(){return this.instance_||(this.instance_=new e),this.instance_},e.instance_=null,e}(),zB=function(e,t){for(var n=0,r=Object.keys(t);n<r.length;n++){var a=r[n];Object.defineProperty(e,a,{value:t[a],enumerable:!1,writable:!1,configurable:!0})}return e},Ad=function(e){var t=e&&e.ownerDocument&&e.ownerDocument.defaultView;return t||db},UB=wy(0,0,0,0);function pb(e){return parseFloat(e)||0}function O8(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return t.reduce(function(r,a){var i=e["border-"+a+"-width"];return r+pb(i)},0)}function E_e(e){for(var t=["top","right","bottom","left"],n={},r=0,a=t;r<a.length;r++){var i=a[r],o=e["padding-"+i];n[i]=pb(o)}return n}function S_e(e){var t=e.getBBox();return wy(0,0,t.width,t.height)}function C_e(e){var t=e.clientWidth,n=e.clientHeight;if(!t&&!n)return UB;var r=Ad(e).getComputedStyle(e),a=E_e(r),i=a.left+a.right,o=a.top+a.bottom,s=pb(r.width),l=pb(r.height);if(r.boxSizing==="border-box"&&(Math.round(s+i)!==t&&(s-=O8(r,"left","right")+i),Math.round(l+o)!==n&&(l-=O8(r,"top","bottom")+o)),!A_e(e)){var u=Math.round(s+i)-t,c=Math.round(l+o)-n;Math.abs(u)!==1&&(s-=u),Math.abs(c)!==1&&(l-=c)}return wy(a.left,a.top,s,l)}var T_e=function(){return typeof SVGGraphicsElement!="undefined"?function(e){return e instanceof Ad(e).SVGGraphicsElement}:function(e){return e instanceof Ad(e).SVGElement&&typeof e.getBBox=="function"}}();function A_e(e){return e===Ad(e).document.documentElement}function O_e(e){return Lk?T_e(e)?S_e(e):C_e(e):UB}function M_e(e){var t=e.x,n=e.y,r=e.width,a=e.height,i=typeof DOMRectReadOnly!="undefined"?DOMRectReadOnly:Object,o=Object.create(i.prototype);return zB(o,{x:t,y:n,width:r,height:a,top:n,right:t+r,bottom:a+n,left:t}),o}function wy(e,t,n,r){return{x:e,y:t,width:n,height:r}}var R_e=function(){function e(t){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=wy(0,0,0,0),this.target=t}return e.prototype.isActive=function(){var t=O_e(this.target);return this.contentRect_=t,t.width!==this.broadcastWidth||t.height!==this.broadcastHeight},e.prototype.broadcastRect=function(){var t=this.contentRect_;return this.broadcastWidth=t.width,this.broadcastHeight=t.height,t},e}(),P_e=function(){function e(t,n){var r=M_e(n);zB(this,{target:t,contentRect:r})}return e}(),I_e=function(){function e(t,n,r){if(this.activeObservations_=[],this.observations_=new BB,typeof t!="function")throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=t,this.controller_=n,this.callbackCtx_=r}return e.prototype.observe=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element=="undefined"||!(Element instanceof Object))){if(!(t instanceof Ad(t).Element))throw new TypeError('parameter 1 is not of type "Element".');var n=this.observations_;n.has(t)||(n.set(t,new R_e(t)),this.controller_.addObserver(this),this.controller_.refresh())}},e.prototype.unobserve=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element=="undefined"||!(Element instanceof Object))){if(!(t instanceof Ad(t).Element))throw new TypeError('parameter 1 is not of type "Element".');var n=this.observations_;!n.has(t)||(n.delete(t),n.size||this.controller_.removeObserver(this))}},e.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},e.prototype.gatherActive=function(){var t=this;this.clearActive(),this.observations_.forEach(function(n){n.isActive()&&t.activeObservations_.push(n)})},e.prototype.broadcastActive=function(){if(!!this.hasActive()){var t=this.callbackCtx_,n=this.activeObservations_.map(function(r){return new P_e(r.target,r.broadcastRect())});this.callback_.call(t,n,t),this.clearActive()}},e.prototype.clearActive=function(){this.activeObservations_.splice(0)},e.prototype.hasActive=function(){return this.activeObservations_.length>0},e}(),$B=typeof WeakMap!="undefined"?new WeakMap:new BB,VB=function(){function e(t){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var n=k_e.getInstance(),r=new I_e(t,n,this);$B.set(this,r)}return e}();["observe","unobserve","disconnect"].forEach(function(e){VB.prototype[e]=function(){var t;return(t=$B.get(this))[e].apply(t,arguments)}});var jB=function(){return typeof db.ResizeObserver!="undefined"?db.ResizeObserver:VB}();function yt(){return yt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},yt.apply(this,arguments)}function Yd(e){var t=RN();return function(){var r=ke(e),a;if(t){var i=ke(this).constructor;a=Reflect.construct(r,arguments,i)}else a=r.apply(this,arguments);return It(this,a)}}var GB={exports:{}};/*!
  Copyright (c) 2018 Jed Watson.
  Licensed under the MIT License (MIT), see
  http://jedwatson.github.io/classnames
*/(function(e){(function(){var t={}.hasOwnProperty;function n(){for(var r=[],a=0;a<arguments.length;a++){var i=arguments[a];if(!!i){var o=typeof i;if(o==="string"||o==="number")r.push(i);else if(Array.isArray(i)){if(i.length){var s=n.apply(null,i);s&&r.push(s)}}else if(o==="object")if(i.toString===Object.prototype.toString)for(var l in i)t.call(i,l)&&i[l]&&r.push(l);else r.push(i.toString())}}return r.join(" ")}e.exports?(n.default=n,e.exports=n):window.classNames=n})()})(GB);var Xt=GB.exports,_3={exports:{}},rr={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ea=typeof Symbol=="function"&&Symbol.for,w3=Ea?Symbol.for("react.element"):60103,k3=Ea?Symbol.for("react.portal"):60106,ky=Ea?Symbol.for("react.fragment"):60107,Ey=Ea?Symbol.for("react.strict_mode"):60108,Sy=Ea?Symbol.for("react.profiler"):60114,Cy=Ea?Symbol.for("react.provider"):60109,Ty=Ea?Symbol.for("react.context"):60110,E3=Ea?Symbol.for("react.async_mode"):60111,Ay=Ea?Symbol.for("react.concurrent_mode"):60111,Oy=Ea?Symbol.for("react.forward_ref"):60112,My=Ea?Symbol.for("react.suspense"):60113,L_e=Ea?Symbol.for("react.suspense_list"):60120,Ry=Ea?Symbol.for("react.memo"):60115,Py=Ea?Symbol.for("react.lazy"):60116,N_e=Ea?Symbol.for("react.block"):60121,F_e=Ea?Symbol.for("react.fundamental"):60117,D_e=Ea?Symbol.for("react.responder"):60118,B_e=Ea?Symbol.for("react.scope"):60119;function Wi(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case w3:switch(e=e.type,e){case E3:case Ay:case ky:case Sy:case Ey:case My:return e;default:switch(e=e&&e.$$typeof,e){case Ty:case Oy:case Py:case Ry:case Cy:return e;default:return t}}case k3:return t}}}function HB(e){return Wi(e)===Ay}rr.AsyncMode=E3;rr.ConcurrentMode=Ay;rr.ContextConsumer=Ty;rr.ContextProvider=Cy;rr.Element=w3;rr.ForwardRef=Oy;rr.Fragment=ky;rr.Lazy=Py;rr.Memo=Ry;rr.Portal=k3;rr.Profiler=Sy;rr.StrictMode=Ey;rr.Suspense=My;rr.isAsyncMode=function(e){return HB(e)||Wi(e)===E3};rr.isConcurrentMode=HB;rr.isContextConsumer=function(e){return Wi(e)===Ty};rr.isContextProvider=function(e){return Wi(e)===Cy};rr.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===w3};rr.isForwardRef=function(e){return Wi(e)===Oy};rr.isFragment=function(e){return Wi(e)===ky};rr.isLazy=function(e){return Wi(e)===Py};rr.isMemo=function(e){return Wi(e)===Ry};rr.isPortal=function(e){return Wi(e)===k3};rr.isProfiler=function(e){return Wi(e)===Sy};rr.isStrictMode=function(e){return Wi(e)===Ey};rr.isSuspense=function(e){return Wi(e)===My};rr.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===ky||e===Ay||e===Sy||e===Ey||e===My||e===L_e||typeof e=="object"&&e!==null&&(e.$$typeof===Py||e.$$typeof===Ry||e.$$typeof===Cy||e.$$typeof===Ty||e.$$typeof===Oy||e.$$typeof===F_e||e.$$typeof===D_e||e.$$typeof===B_e||e.$$typeof===N_e)};rr.typeOf=Wi;_3.exports=rr;function Od(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=[];return dr.Children.forEach(e,function(r){r==null&&!t.keepEmpty||(Array.isArray(r)?n=n.concat(Od(r)):_3.exports.isFragment(r)&&r.props?n=n.concat(Od(r.props.children,t)):n.push(r))}),n}var M8={};function z_e(e,t){}function U_e(e,t,n){!t&&!M8[n]&&(e(!1,n),M8[n]=!0)}function Yo(e,t){U_e(z_e,e,t)}function R8(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Re(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?R8(Object(n),!0).forEach(function(r){m(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):R8(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function $_e(e,t,n){var r=_.exports.useRef({});return(!("value"in r.current)||n(r.current.condition,t))&&(r.current.value=e(),r.current.condition=t),r.current.value}function WB(e,t){typeof e=="function"?e(t):hr(e)==="object"&&e&&"current"in e&&(e.current=t)}function Zm(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t.filter(function(a){return a});return r.length<=1?r[0]:function(a){t.forEach(function(i){WB(i,a)})}}function Iy(e){var t,n,r=_3.exports.isMemo(e)?e.type.type:e.type;return!(typeof r=="function"&&!(!((t=r.prototype)===null||t===void 0)&&t.render)||typeof e=="function"&&!(!((n=e.prototype)===null||n===void 0)&&n.render))}function hb(e){return e instanceof HTMLElement?e:nm.findDOMNode(e)}var ql=new Map;function V_e(e){e.forEach(function(t){var n,r=t.target;(n=ql.get(r))===null||n===void 0||n.forEach(function(a){return a(r)})})}var YB=new jB(V_e);function j_e(e,t){ql.has(e)||(ql.set(e,new Set),YB.observe(e)),ql.get(e).add(t)}function G_e(e,t){ql.has(e)&&(ql.get(e).delete(t),ql.get(e).size||(YB.unobserve(e),ql.delete(e)))}var H_e=function(e){Tt(n,e);var t=Yd(n);function n(){return Ae(this,n),t.apply(this,arguments)}return Oe(n,[{key:"render",value:function(){return this.props.children}}]),n}(_.exports.Component),Nk=_.exports.createContext(null);function W_e(e){var t=e.children,n=e.onBatchResize,r=_.exports.useRef(0),a=_.exports.useRef([]),i=_.exports.useContext(Nk),o=_.exports.useCallback(function(s,l,u){r.current+=1;var c=r.current;a.current.push({size:s,element:l,data:u}),Promise.resolve().then(function(){c===r.current&&(n==null||n(a.current),a.current=[])}),i==null||i(s,l,u)},[n,i]);return _.exports.createElement(Nk.Provider,{value:o},t)}function Y_e(e){var t=e.children,n=e.disabled,r=_.exports.useRef(null),a=_.exports.useRef(null),i=_.exports.useContext(Nk),o=typeof t=="function",s=o?t(r):t,l=_.exports.useRef({width:-1,height:-1,offsetWidth:-1,offsetHeight:-1}),u=!o&&_.exports.isValidElement(s)&&Iy(s),c=u?s.ref:null,f=_.exports.useMemo(function(){return Zm(c,r)},[c,r]),d=_.exports.useRef(e);d.current=e;var p=_.exports.useCallback(function(h){var g=d.current,v=g.onResize,b=g.data,y=h.getBoundingClientRect(),x=y.width,k=y.height,T=h.offsetWidth,C=h.offsetHeight,I=Math.floor(x),P=Math.floor(k);if(l.current.width!==I||l.current.height!==P||l.current.offsetWidth!==T||l.current.offsetHeight!==C){var j={width:I,height:P,offsetWidth:T,offsetHeight:C};l.current=j;var A=T===Math.round(x)?x:T,S=C===Math.round(k)?k:C,M=Re(Re({},j),{},{offsetWidth:A,offsetHeight:S});i==null||i(M,h,b),v&&Promise.resolve().then(function(){v(M,h)})}},[]);return _.exports.useEffect(function(){var h=hb(r.current)||hb(a.current);return h&&!n&&j_e(h,p),function(){return G_e(h,p)}},[r.current,n]),_.exports.createElement(H_e,{ref:a},u?_.exports.cloneElement(s,{ref:f}):s)}var X_e="rc-observer-key";function Em(e){var t=e.children,n=typeof t=="function"?[t]:Od(t);return n.map(function(r,a){var i=(r==null?void 0:r.key)||"".concat(X_e,"-").concat(a);return _.exports.createElement(Y_e,yt({},e,{key:i}),r)})}Em.Collection=W_e;function Nc(e,t){var n=Re({},e);return Array.isArray(t)&&t.forEach(function(r){delete n[r]}),n}var Z_e=_.exports.createContext({}),XB=Z_e,sc="RC_FORM_INTERNAL_HOOKS",sr=function(){Yo(!1,"Can not find FormContext. Please make sure you wrap Field under Form.")},Md=_.exports.createContext({getFieldValue:sr,getFieldsValue:sr,getFieldError:sr,getFieldWarning:sr,getFieldsError:sr,isFieldsTouched:sr,isFieldTouched:sr,isFieldValidating:sr,isFieldsValidating:sr,resetFields:sr,setFields:sr,setFieldsValue:sr,validateFields:sr,submit:sr,getInternalHooks:function(){return sr(),{dispatch:sr,initEntityValue:sr,registerField:sr,useSubscribe:sr,setInitialValues:sr,destroyForm:sr,setCallbacks:sr,registerWatch:sr,getFields:sr,setValidateMessages:sr,setPreserve:sr,getInitialValue:sr}}});function Fk(e){return e==null?[]:Array.isArray(e)?e:[e]}function qo(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */qo=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=typeof Symbol=="function"?Symbol:{},a=r.iterator||"@@iterator",i=r.asyncIterator||"@@asyncIterator",o=r.toStringTag||"@@toStringTag";function s(A,S,M){return Object.defineProperty(A,S,{value:M,enumerable:!0,configurable:!0,writable:!0}),A[S]}try{s({},"")}catch{s=function(M,O,R){return M[O]=R}}function l(A,S,M,O){var R=S&&S.prototype instanceof f?S:f,G=Object.create(R.prototype),ee=new I(O||[]);return G._invoke=function(re,X,K){var ae="suspendedStart";return function(le,ue){if(ae==="executing")throw new Error("Generator is already running");if(ae==="completed"){if(le==="throw")throw ue;return j()}for(K.method=le,K.arg=ue;;){var ge=K.delegate;if(ge){var be=k(ge,K);if(be){if(be===c)continue;return be}}if(K.method==="next")K.sent=K._sent=K.arg;else if(K.method==="throw"){if(ae==="suspendedStart")throw ae="completed",K.arg;K.dispatchException(K.arg)}else K.method==="return"&&K.abrupt("return",K.arg);ae="executing";var ze=u(re,X,K);if(ze.type==="normal"){if(ae=K.done?"completed":"suspendedYield",ze.arg===c)continue;return{value:ze.arg,done:K.done}}ze.type==="throw"&&(ae="completed",K.method="throw",K.arg=ze.arg)}}}(A,M,ee),G}function u(A,S,M){try{return{type:"normal",arg:A.call(S,M)}}catch(O){return{type:"throw",arg:O}}}e.wrap=l;var c={};function f(){}function d(){}function p(){}var h={};s(h,a,function(){return this});var g=Object.getPrototypeOf,v=g&&g(g(P([])));v&&v!==t&&n.call(v,a)&&(h=v);var b=p.prototype=f.prototype=Object.create(h);function y(A){["next","throw","return"].forEach(function(S){s(A,S,function(M){return this._invoke(S,M)})})}function x(A,S){function M(R,G,ee,re){var X=u(A[R],A,G);if(X.type!=="throw"){var K=X.arg,ae=K.value;return ae&&hr(ae)=="object"&&n.call(ae,"__await")?S.resolve(ae.__await).then(function(le){M("next",le,ee,re)},function(le){M("throw",le,ee,re)}):S.resolve(ae).then(function(le){K.value=le,ee(K)},function(le){return M("throw",le,ee,re)})}re(X.arg)}var O;this._invoke=function(R,G){function ee(){return new S(function(re,X){M(R,G,re,X)})}return O=O?O.then(ee,ee):ee()}}function k(A,S){var M=A.iterator[S.method];if(M===void 0){if(S.delegate=null,S.method==="throw"){if(A.iterator.return&&(S.method="return",S.arg=void 0,k(A,S),S.method==="throw"))return c;S.method="throw",S.arg=new TypeError("The iterator does not provide a 'throw' method")}return c}var O=u(M,A.iterator,S.arg);if(O.type==="throw")return S.method="throw",S.arg=O.arg,S.delegate=null,c;var R=O.arg;return R?R.done?(S[A.resultName]=R.value,S.next=A.nextLoc,S.method!=="return"&&(S.method="next",S.arg=void 0),S.delegate=null,c):R:(S.method="throw",S.arg=new TypeError("iterator result is not an object"),S.delegate=null,c)}function T(A){var S={tryLoc:A[0]};1 in A&&(S.catchLoc=A[1]),2 in A&&(S.finallyLoc=A[2],S.afterLoc=A[3]),this.tryEntries.push(S)}function C(A){var S=A.completion||{};S.type="normal",delete S.arg,A.completion=S}function I(A){this.tryEntries=[{tryLoc:"root"}],A.forEach(T,this),this.reset(!0)}function P(A){if(A){var S=A[a];if(S)return S.call(A);if(typeof A.next=="function")return A;if(!isNaN(A.length)){var M=-1,O=function R(){for(;++M<A.length;)if(n.call(A,M))return R.value=A[M],R.done=!1,R;return R.value=void 0,R.done=!0,R};return O.next=O}}return{next:j}}function j(){return{value:void 0,done:!0}}return d.prototype=p,s(b,"constructor",p),s(p,"constructor",d),d.displayName=s(p,o,"GeneratorFunction"),e.isGeneratorFunction=function(A){var S=typeof A=="function"&&A.constructor;return!!S&&(S===d||(S.displayName||S.name)==="GeneratorFunction")},e.mark=function(A){return Object.setPrototypeOf?Object.setPrototypeOf(A,p):(A.__proto__=p,s(A,o,"GeneratorFunction")),A.prototype=Object.create(b),A},e.awrap=function(A){return{__await:A}},y(x.prototype),s(x.prototype,i,function(){return this}),e.AsyncIterator=x,e.async=function(A,S,M,O,R){R===void 0&&(R=Promise);var G=new x(l(A,S,M,O),R);return e.isGeneratorFunction(S)?G:G.next().then(function(ee){return ee.done?ee.value:G.next()})},y(b),s(b,o,"Generator"),s(b,a,function(){return this}),s(b,"toString",function(){return"[object Generator]"}),e.keys=function(A){var S=[];for(var M in A)S.push(M);return S.reverse(),function O(){for(;S.length;){var R=S.pop();if(R in A)return O.value=R,O.done=!1,O}return O.done=!0,O}},e.values=P,I.prototype={constructor:I,reset:function(S){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(C),!S)for(var M in this)M.charAt(0)==="t"&&n.call(this,M)&&!isNaN(+M.slice(1))&&(this[M]=void 0)},stop:function(){this.done=!0;var S=this.tryEntries[0].completion;if(S.type==="throw")throw S.arg;return this.rval},dispatchException:function(S){if(this.done)throw S;var M=this;function O(K,ae){return ee.type="throw",ee.arg=S,M.next=K,ae&&(M.method="next",M.arg=void 0),!!ae}for(var R=this.tryEntries.length-1;R>=0;--R){var G=this.tryEntries[R],ee=G.completion;if(G.tryLoc==="root")return O("end");if(G.tryLoc<=this.prev){var re=n.call(G,"catchLoc"),X=n.call(G,"finallyLoc");if(re&&X){if(this.prev<G.catchLoc)return O(G.catchLoc,!0);if(this.prev<G.finallyLoc)return O(G.finallyLoc)}else if(re){if(this.prev<G.catchLoc)return O(G.catchLoc,!0)}else{if(!X)throw new Error("try statement without catch or finally");if(this.prev<G.finallyLoc)return O(G.finallyLoc)}}}},abrupt:function(S,M){for(var O=this.tryEntries.length-1;O>=0;--O){var R=this.tryEntries[O];if(R.tryLoc<=this.prev&&n.call(R,"finallyLoc")&&this.prev<R.finallyLoc){var G=R;break}}G&&(S==="break"||S==="continue")&&G.tryLoc<=M&&M<=G.finallyLoc&&(G=null);var ee=G?G.completion:{};return ee.type=S,ee.arg=M,G?(this.method="next",this.next=G.finallyLoc,c):this.complete(ee)},complete:function(S,M){if(S.type==="throw")throw S.arg;return S.type==="break"||S.type==="continue"?this.next=S.arg:S.type==="return"?(this.rval=this.arg=S.arg,this.method="return",this.next="end"):S.type==="normal"&&M&&(this.next=M),c},finish:function(S){for(var M=this.tryEntries.length-1;M>=0;--M){var O=this.tryEntries[M];if(O.finallyLoc===S)return this.complete(O.completion,O.afterLoc),C(O),c}},catch:function(S){for(var M=this.tryEntries.length-1;M>=0;--M){var O=this.tryEntries[M];if(O.tryLoc===S){var R=O.completion;if(R.type==="throw"){var G=R.arg;C(O)}return G}}throw new Error("illegal catch attempt")},delegateYield:function(S,M,O){return this.delegate={iterator:P(S),resultName:M,nextLoc:O},this.method==="next"&&(this.arg=void 0),c}},e}function lc(){return lc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},lc.apply(this,arguments)}function q_e(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,Sm(e,t)}function Dk(e){return Dk=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Dk(e)}function Sm(e,t){return Sm=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},Sm(e,t)}function K_e(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function rv(e,t,n){return K_e()?rv=Reflect.construct.bind():rv=function(a,i,o){var s=[null];s.push.apply(s,i);var l=Function.bind.apply(a,s),u=new l;return o&&Sm(u,o.prototype),u},rv.apply(null,arguments)}function Q_e(e){return Function.toString.call(e).indexOf("[native code]")!==-1}function Bk(e){var t=typeof Map=="function"?new Map:void 0;return Bk=function(r){if(r===null||!Q_e(r))return r;if(typeof r!="function")throw new TypeError("Super expression must either be null or a function");if(typeof t!="undefined"){if(t.has(r))return t.get(r);t.set(r,a)}function a(){return rv(r,arguments,Dk(this).constructor)}return a.prototype=Object.create(r.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),Sm(a,r)},Bk(e)}var J_e=/%[sdj%]/g,ewe=function(){};typeof process!="undefined"&&process.env;function zk(e){if(!e||!e.length)return null;var t={};return e.forEach(function(n){var r=n.field;t[r]=t[r]||[],t[r].push(n)}),t}function zi(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var a=0,i=n.length;if(typeof e=="function")return e.apply(null,n);if(typeof e=="string"){var o=e.replace(J_e,function(s){if(s==="%%")return"%";if(a>=i)return s;switch(s){case"%s":return String(n[a++]);case"%d":return Number(n[a++]);case"%j":try{return JSON.stringify(n[a++])}catch{return"[Circular]"}break;default:return s}});return o}return e}function twe(e){return e==="string"||e==="url"||e==="hex"||e==="email"||e==="date"||e==="pattern"}function ga(e,t){return!!(e==null||t==="array"&&Array.isArray(e)&&!e.length||twe(t)&&typeof e=="string"&&!e)}function nwe(e,t,n){var r=[],a=0,i=e.length;function o(s){r.push.apply(r,s||[]),a++,a===i&&n(r)}e.forEach(function(s){t(s,o)})}function P8(e,t,n){var r=0,a=e.length;function i(o){if(o&&o.length){n(o);return}var s=r;r=r+1,s<a?t(e[s],i):n([])}i([])}function rwe(e){var t=[];return Object.keys(e).forEach(function(n){t.push.apply(t,e[n]||[])}),t}var I8=function(e){q_e(t,e);function t(n,r){var a;return a=e.call(this,"Async Validation Error")||this,a.errors=n,a.fields=r,a}return t}(Bk(Error));function awe(e,t,n,r,a){if(t.first){var i=new Promise(function(d,p){var h=function(b){return r(b),b.length?p(new I8(b,zk(b))):d(a)},g=rwe(e);P8(g,n,h)});return i.catch(function(d){return d}),i}var o=t.firstFields===!0?Object.keys(e):t.firstFields||[],s=Object.keys(e),l=s.length,u=0,c=[],f=new Promise(function(d,p){var h=function(v){if(c.push.apply(c,v),u++,u===l)return r(c),c.length?p(new I8(c,zk(c))):d(a)};s.length||(r(c),d(a)),s.forEach(function(g){var v=e[g];o.indexOf(g)!==-1?P8(v,n,h):nwe(v,n,h)})});return f.catch(function(d){return d}),f}function iwe(e){return!!(e&&e.message!==void 0)}function owe(e,t){for(var n=e,r=0;r<t.length;r++){if(n==null)return n;n=n[t[r]]}return n}function L8(e,t){return function(n){var r;return e.fullFields?r=owe(t,e.fullFields):r=t[n.field||e.fullField],iwe(n)?(n.field=n.field||e.fullField,n.fieldValue=r,n):{message:typeof n=="function"?n():n,fieldValue:r,field:n.field||e.fullField}}}function N8(e,t){if(t){for(var n in t)if(t.hasOwnProperty(n)){var r=t[n];typeof r=="object"&&typeof e[n]=="object"?e[n]=lc({},e[n],r):e[n]=r}}return e}var ZB=function(t,n,r,a,i,o){t.required&&(!r.hasOwnProperty(t.field)||ga(n,o||t.type))&&a.push(zi(i.messages.required,t.fullField))},swe=function(t,n,r,a,i){(/^\s+$/.test(n)||n==="")&&a.push(zi(i.messages.whitespace,t.fullField))},_g,lwe=function(){if(_g)return _g;var e="[a-fA-F\\d:]",t=function(k){return k&&k.includeBoundaries?"(?:(?<=\\s|^)(?="+e+")|(?<="+e+")(?=\\s|$))":""},n="(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}",r="[a-fA-F\\d]{1,4}",a=(`
(?:
(?:`+r+":){7}(?:"+r+`|:)|                                    // 1:2:3:4:5:6:7::  1:2:3:4:5:6:7:8
(?:`+r+":){6}(?:"+n+"|:"+r+`|:)|                             // 1:2:3:4:5:6::    1:2:3:4:5:6::8   1:2:3:4:5:6::8  1:2:3:4:5:6::1.2.3.4
(?:`+r+":){5}(?::"+n+"|(?::"+r+`){1,2}|:)|                   // 1:2:3:4:5::      1:2:3:4:5::7:8   1:2:3:4:5::8    1:2:3:4:5::7:1.2.3.4
(?:`+r+":){4}(?:(?::"+r+"){0,1}:"+n+"|(?::"+r+`){1,3}|:)| // 1:2:3:4::        1:2:3:4::6:7:8   1:2:3:4::8      1:2:3:4::6:7:1.2.3.4
(?:`+r+":){3}(?:(?::"+r+"){0,2}:"+n+"|(?::"+r+`){1,4}|:)| // 1:2:3::          1:2:3::5:6:7:8   1:2:3::8        1:2:3::5:6:7:1.2.3.4
(?:`+r+":){2}(?:(?::"+r+"){0,3}:"+n+"|(?::"+r+`){1,5}|:)| // 1:2::            1:2::4:5:6:7:8   1:2::8          1:2::4:5:6:7:1.2.3.4
(?:`+r+":){1}(?:(?::"+r+"){0,4}:"+n+"|(?::"+r+`){1,6}|:)| // 1::              1::3:4:5:6:7:8   1::8            1::3:4:5:6:7:1.2.3.4
(?::(?:(?::`+r+"){0,5}:"+n+"|(?::"+r+`){1,7}|:))             // ::2:3:4:5:6:7:8  ::2:3:4:5:6:7:8  ::8             ::1.2.3.4
)(?:%[0-9a-zA-Z]{1,})?                                             // %eth0            %1
`).replace(/\s*\/\/.*$/gm,"").replace(/\n/g,"").trim(),i=new RegExp("(?:^"+n+"$)|(?:^"+a+"$)"),o=new RegExp("^"+n+"$"),s=new RegExp("^"+a+"$"),l=function(k){return k&&k.exact?i:new RegExp("(?:"+t(k)+n+t(k)+")|(?:"+t(k)+a+t(k)+")","g")};l.v4=function(x){return x&&x.exact?o:new RegExp(""+t(x)+n+t(x),"g")},l.v6=function(x){return x&&x.exact?s:new RegExp(""+t(x)+a+t(x),"g")};var u="(?:(?:[a-z]+:)?//)",c="(?:\\S+(?::\\S*)?@)?",f=l.v4().source,d=l.v6().source,p="(?:(?:[a-z\\u00a1-\\uffff0-9][-_]*)*[a-z\\u00a1-\\uffff0-9]+)",h="(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*",g="(?:\\.(?:[a-z\\u00a1-\\uffff]{2,}))",v="(?::\\d{2,5})?",b='(?:[/?#][^\\s"]*)?',y="(?:"+u+"|www\\.)"+c+"(?:localhost|"+f+"|"+d+"|"+p+h+g+")"+v+b;return _g=new RegExp("(?:^"+y+"$)","i"),_g},F8={email:/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+\.)+[a-zA-Z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]{2,}))$/,hex:/^#?([a-f0-9]{6}|[a-f0-9]{3})$/i},mh={integer:function(t){return mh.number(t)&&parseInt(t,10)===t},float:function(t){return mh.number(t)&&!mh.integer(t)},array:function(t){return Array.isArray(t)},regexp:function(t){if(t instanceof RegExp)return!0;try{return!!new RegExp(t)}catch{return!1}},date:function(t){return typeof t.getTime=="function"&&typeof t.getMonth=="function"&&typeof t.getYear=="function"&&!isNaN(t.getTime())},number:function(t){return isNaN(t)?!1:typeof t=="number"},object:function(t){return typeof t=="object"&&!mh.array(t)},method:function(t){return typeof t=="function"},email:function(t){return typeof t=="string"&&t.length<=320&&!!t.match(F8.email)},url:function(t){return typeof t=="string"&&t.length<=2048&&!!t.match(lwe())},hex:function(t){return typeof t=="string"&&!!t.match(F8.hex)}},uwe=function(t,n,r,a,i){if(t.required&&n===void 0){ZB(t,n,r,a,i);return}var o=["integer","float","array","regexp","object","method","email","number","date","url","hex"],s=t.type;o.indexOf(s)>-1?mh[s](n)||a.push(zi(i.messages.types[s],t.fullField,t.type)):s&&typeof n!==t.type&&a.push(zi(i.messages.types[s],t.fullField,t.type))},cwe=function(t,n,r,a,i){var o=typeof t.len=="number",s=typeof t.min=="number",l=typeof t.max=="number",u=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,c=n,f=null,d=typeof n=="number",p=typeof n=="string",h=Array.isArray(n);if(d?f="number":p?f="string":h&&(f="array"),!f)return!1;h&&(c=n.length),p&&(c=n.replace(u,"_").length),o?c!==t.len&&a.push(zi(i.messages[f].len,t.fullField,t.len)):s&&!l&&c<t.min?a.push(zi(i.messages[f].min,t.fullField,t.min)):l&&!s&&c>t.max?a.push(zi(i.messages[f].max,t.fullField,t.max)):s&&l&&(c<t.min||c>t.max)&&a.push(zi(i.messages[f].range,t.fullField,t.min,t.max))},hf="enum",fwe=function(t,n,r,a,i){t[hf]=Array.isArray(t[hf])?t[hf]:[],t[hf].indexOf(n)===-1&&a.push(zi(i.messages[hf],t.fullField,t[hf].join(", ")))},dwe=function(t,n,r,a,i){if(t.pattern){if(t.pattern instanceof RegExp)t.pattern.lastIndex=0,t.pattern.test(n)||a.push(zi(i.messages.pattern.mismatch,t.fullField,n,t.pattern));else if(typeof t.pattern=="string"){var o=new RegExp(t.pattern);o.test(n)||a.push(zi(i.messages.pattern.mismatch,t.fullField,n,t.pattern))}}},On={required:ZB,whitespace:swe,type:uwe,range:cwe,enum:fwe,pattern:dwe},pwe=function(t,n,r,a,i){var o=[],s=t.required||!t.required&&a.hasOwnProperty(t.field);if(s){if(ga(n,"string")&&!t.required)return r();On.required(t,n,a,o,i,"string"),ga(n,"string")||(On.type(t,n,a,o,i),On.range(t,n,a,o,i),On.pattern(t,n,a,o,i),t.whitespace===!0&&On.whitespace(t,n,a,o,i))}r(o)},hwe=function(t,n,r,a,i){var o=[],s=t.required||!t.required&&a.hasOwnProperty(t.field);if(s){if(ga(n)&&!t.required)return r();On.required(t,n,a,o,i),n!==void 0&&On.type(t,n,a,o,i)}r(o)},mwe=function(t,n,r,a,i){var o=[],s=t.required||!t.required&&a.hasOwnProperty(t.field);if(s){if(n===""&&(n=void 0),ga(n)&&!t.required)return r();On.required(t,n,a,o,i),n!==void 0&&(On.type(t,n,a,o,i),On.range(t,n,a,o,i))}r(o)},gwe=function(t,n,r,a,i){var o=[],s=t.required||!t.required&&a.hasOwnProperty(t.field);if(s){if(ga(n)&&!t.required)return r();On.required(t,n,a,o,i),n!==void 0&&On.type(t,n,a,o,i)}r(o)},vwe=function(t,n,r,a,i){var o=[],s=t.required||!t.required&&a.hasOwnProperty(t.field);if(s){if(ga(n)&&!t.required)return r();On.required(t,n,a,o,i),ga(n)||On.type(t,n,a,o,i)}r(o)},bwe=function(t,n,r,a,i){var o=[],s=t.required||!t.required&&a.hasOwnProperty(t.field);if(s){if(ga(n)&&!t.required)return r();On.required(t,n,a,o,i),n!==void 0&&(On.type(t,n,a,o,i),On.range(t,n,a,o,i))}r(o)},ywe=function(t,n,r,a,i){var o=[],s=t.required||!t.required&&a.hasOwnProperty(t.field);if(s){if(ga(n)&&!t.required)return r();On.required(t,n,a,o,i),n!==void 0&&(On.type(t,n,a,o,i),On.range(t,n,a,o,i))}r(o)},xwe=function(t,n,r,a,i){var o=[],s=t.required||!t.required&&a.hasOwnProperty(t.field);if(s){if(n==null&&!t.required)return r();On.required(t,n,a,o,i,"array"),n!=null&&(On.type(t,n,a,o,i),On.range(t,n,a,o,i))}r(o)},_we=function(t,n,r,a,i){var o=[],s=t.required||!t.required&&a.hasOwnProperty(t.field);if(s){if(ga(n)&&!t.required)return r();On.required(t,n,a,o,i),n!==void 0&&On.type(t,n,a,o,i)}r(o)},wwe="enum",kwe=function(t,n,r,a,i){var o=[],s=t.required||!t.required&&a.hasOwnProperty(t.field);if(s){if(ga(n)&&!t.required)return r();On.required(t,n,a,o,i),n!==void 0&&On[wwe](t,n,a,o,i)}r(o)},Ewe=function(t,n,r,a,i){var o=[],s=t.required||!t.required&&a.hasOwnProperty(t.field);if(s){if(ga(n,"string")&&!t.required)return r();On.required(t,n,a,o,i),ga(n,"string")||On.pattern(t,n,a,o,i)}r(o)},Swe=function(t,n,r,a,i){var o=[],s=t.required||!t.required&&a.hasOwnProperty(t.field);if(s){if(ga(n,"date")&&!t.required)return r();if(On.required(t,n,a,o,i),!ga(n,"date")){var l;n instanceof Date?l=n:l=new Date(n),On.type(t,l,a,o,i),l&&On.range(t,l.getTime(),a,o,i)}}r(o)},Cwe=function(t,n,r,a,i){var o=[],s=Array.isArray(n)?"array":typeof n;On.required(t,n,a,o,i,s),r(o)},x_=function(t,n,r,a,i){var o=t.type,s=[],l=t.required||!t.required&&a.hasOwnProperty(t.field);if(l){if(ga(n,o)&&!t.required)return r();On.required(t,n,a,s,i,o),ga(n,o)||On.type(t,n,a,s,i)}r(s)},Twe=function(t,n,r,a,i){var o=[],s=t.required||!t.required&&a.hasOwnProperty(t.field);if(s){if(ga(n)&&!t.required)return r();On.required(t,n,a,o,i)}r(o)},Ih={string:pwe,method:hwe,number:mwe,boolean:gwe,regexp:vwe,integer:bwe,float:ywe,array:xwe,object:_we,enum:kwe,pattern:Ewe,date:Swe,url:x_,hex:x_,email:x_,required:Cwe,any:Twe};function Uk(){return{default:"Validation error on field %s",required:"%s is required",enum:"%s must be one of %s",whitespace:"%s cannot be empty",date:{format:"%s date %s is invalid for format %s",parse:"%s date could not be parsed, %s is invalid ",invalid:"%s date %s is invalid"},types:{string:"%s is not a %s",method:"%s is not a %s (function)",array:"%s is not an %s",object:"%s is not an %s",number:"%s is not a %s",date:"%s is not a %s",boolean:"%s is not a %s",integer:"%s is not an %s",float:"%s is not a %s",regexp:"%s is not a valid %s",email:"%s is not a valid %s",url:"%s is not a valid %s",hex:"%s is not a valid %s"},string:{len:"%s must be exactly %s characters",min:"%s must be at least %s characters",max:"%s cannot be longer than %s characters",range:"%s must be between %s and %s characters"},number:{len:"%s must equal %s",min:"%s cannot be less than %s",max:"%s cannot be greater than %s",range:"%s must be between %s and %s"},array:{len:"%s must be exactly %s in length",min:"%s cannot be less than %s in length",max:"%s cannot be greater than %s in length",range:"%s must be between %s and %s in length"},pattern:{mismatch:"%s value %s does not match pattern %s"},clone:function(){var t=JSON.parse(JSON.stringify(this));return t.clone=this.clone,t}}}var $k=Uk(),qm=function(){function e(n){this.rules=null,this._messages=$k,this.define(n)}var t=e.prototype;return t.define=function(r){var a=this;if(!r)throw new Error("Cannot configure a schema with no rules");if(typeof r!="object"||Array.isArray(r))throw new Error("Rules must be an object");this.rules={},Object.keys(r).forEach(function(i){var o=r[i];a.rules[i]=Array.isArray(o)?o:[o]})},t.messages=function(r){return r&&(this._messages=N8(Uk(),r)),this._messages},t.validate=function(r,a,i){var o=this;a===void 0&&(a={}),i===void 0&&(i=function(){});var s=r,l=a,u=i;if(typeof l=="function"&&(u=l,l={}),!this.rules||Object.keys(this.rules).length===0)return u&&u(null,s),Promise.resolve(s);function c(g){var v=[],b={};function y(k){if(Array.isArray(k)){var T;v=(T=v).concat.apply(T,k)}else v.push(k)}for(var x=0;x<g.length;x++)y(g[x]);v.length?(b=zk(v),u(v,b)):u(null,s)}if(l.messages){var f=this.messages();f===$k&&(f=Uk()),N8(f,l.messages),l.messages=f}else l.messages=this.messages();var d={},p=l.keys||Object.keys(this.rules);p.forEach(function(g){var v=o.rules[g],b=s[g];v.forEach(function(y){var x=y;typeof x.transform=="function"&&(s===r&&(s=lc({},s)),b=s[g]=x.transform(b)),typeof x=="function"?x={validator:x}:x=lc({},x),x.validator=o.getValidationMethod(x),x.validator&&(x.field=g,x.fullField=x.fullField||g,x.type=o.getType(x),d[g]=d[g]||[],d[g].push({rule:x,value:b,source:s,field:g}))})});var h={};return awe(d,l,function(g,v){var b=g.rule,y=(b.type==="object"||b.type==="array")&&(typeof b.fields=="object"||typeof b.defaultField=="object");y=y&&(b.required||!b.required&&g.value),b.field=g.field;function x(C,I){return lc({},I,{fullField:b.fullField+"."+C,fullFields:b.fullFields?[].concat(b.fullFields,[C]):[C]})}function k(C){C===void 0&&(C=[]);var I=Array.isArray(C)?C:[C];!l.suppressWarning&&I.length&&e.warning("async-validator:",I),I.length&&b.message!==void 0&&(I=[].concat(b.message));var P=I.map(L8(b,s));if(l.first&&P.length)return h[b.field]=1,v(P);if(!y)v(P);else{if(b.required&&!g.value)return b.message!==void 0?P=[].concat(b.message).map(L8(b,s)):l.error&&(P=[l.error(b,zi(l.messages.required,b.field))]),v(P);var j={};b.defaultField&&Object.keys(g.value).map(function(M){j[M]=b.defaultField}),j=lc({},j,g.rule.fields);var A={};Object.keys(j).forEach(function(M){var O=j[M],R=Array.isArray(O)?O:[O];A[M]=R.map(x.bind(null,M))});var S=new e(A);S.messages(l.messages),g.rule.options&&(g.rule.options.messages=l.messages,g.rule.options.error=l.error),S.validate(g.value,g.rule.options||l,function(M){var O=[];P&&P.length&&O.push.apply(O,P),M&&M.length&&O.push.apply(O,M),v(O.length?O:null)})}}var T;if(b.asyncValidator)T=b.asyncValidator(b,g.value,k,g.source,l);else if(b.validator){try{T=b.validator(b,g.value,k,g.source,l)}catch(C){console.error==null||console.error(C),l.suppressValidatorError||setTimeout(function(){throw C},0),k(C.message)}T===!0?k():T===!1?k(typeof b.message=="function"?b.message(b.fullField||b.field):b.message||(b.fullField||b.field)+" fails"):T instanceof Array?k(T):T instanceof Error&&k(T.message)}T&&T.then&&T.then(function(){return k()},function(C){return k(C)})},function(g){c(g)},s)},t.getType=function(r){if(r.type===void 0&&r.pattern instanceof RegExp&&(r.type="pattern"),typeof r.validator!="function"&&r.type&&!Ih.hasOwnProperty(r.type))throw new Error(zi("Unknown rule type %s",r.type));return r.type||"string"},t.getValidationMethod=function(r){if(typeof r.validator=="function")return r.validator;var a=Object.keys(r),i=a.indexOf("message");return i!==-1&&a.splice(i,1),a.length===1&&a[0]==="required"?Ih.required:Ih[this.getType(r)]||void 0},e}();qm.register=function(t,n){if(typeof n!="function")throw new Error("Cannot register a validator by type, validator is not a function");Ih[t]=n};qm.warning=ewe;qm.messages=$k;qm.validators=Ih;var Pi="'${name}' is not a valid ${type}",qB={default:"Validation error on field '${name}'",required:"'${name}' is required",enum:"'${name}' must be one of [${enum}]",whitespace:"'${name}' cannot be empty",date:{format:"'${name}' is invalid for format date",parse:"'${name}' could not be parsed as date",invalid:"'${name}' is invalid date"},types:{string:Pi,method:Pi,array:Pi,object:Pi,number:Pi,date:Pi,boolean:Pi,integer:Pi,float:Pi,regexp:Pi,email:Pi,url:Pi,hex:Pi},string:{len:"'${name}' must be exactly ${len} characters",min:"'${name}' must be at least ${min} characters",max:"'${name}' cannot be longer than ${max} characters",range:"'${name}' must be between ${min} and ${max} characters"},number:{len:"'${name}' must equal ${len}",min:"'${name}' cannot be less than ${min}",max:"'${name}' cannot be greater than ${max}",range:"'${name}' must be between ${min} and ${max}"},array:{len:"'${name}' must be exactly ${len} in length",min:"'${name}' cannot be less than ${min} in length",max:"'${name}' cannot be greater than ${max} in length",range:"'${name}' must be between ${min} and ${max} in length"},pattern:{mismatch:"'${name}' does not match pattern ${pattern}"}};function KB(e,t){for(var n=e,r=0;r<t.length;r+=1){if(n==null)return;n=n[t[r]]}return n}function Awe(e){return hN(e)||cN(e)||uE(e)||mN()}function QB(e,t,n,r){if(!t.length)return n;var a=Awe(t),i=a[0],o=a.slice(1),s;return!e&&typeof i=="number"?s=[]:Array.isArray(e)?s=$e(e):s=Re({},e),r&&n===void 0&&o.length===1?delete s[i][o[0]]:s[i]=QB(s[i],o,n,r),s}function Owe(e,t,n){var r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;return t.length&&r&&n===void 0&&!KB(e,t.slice(0,-1))?e:QB(e,t,n,r)}function Ly(e){return Array.isArray(e)?Rwe(e):hr(e)==="object"&&e!==null?Mwe(e):e}function Mwe(e){if(Object.getPrototypeOf(e)===Object.prototype){var t={};for(var n in e)t[n]=Ly(e[n]);return t}return e}function Rwe(e){return e.map(function(t){return Ly(t)})}function Yr(e){return Fk(e)}function Kl(e,t){var n=KB(e,t);return n}function Dl(e,t,n){var r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,a=Owe(e,t,n,r);return a}function D8(e,t){var n={};return t.forEach(function(r){var a=Kl(e,r);n=Dl(n,r,a)}),n}function Lh(e,t){return e&&e.some(function(n){return ez(n,t)})}function B8(e){return hr(e)==="object"&&e!==null&&Object.getPrototypeOf(e)===Object.prototype}function JB(e,t){var n=Array.isArray(e)?$e(e):Re({},e);return t&&Object.keys(t).forEach(function(r){var a=n[r],i=t[r],o=B8(a)&&B8(i);n[r]=o?JB(a,i||{}):Ly(i)}),n}function av(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return n.reduce(function(a,i){return JB(a,i)},e)}function ez(e,t){return!e||!t||e.length!==t.length?!1:e.every(function(n,r){return t[r]===n})}function Pwe(e,t){if(e===t)return!0;if(!e&&t||e&&!t||!e||!t||hr(e)!=="object"||hr(t)!=="object")return!1;var n=Object.keys(e),r=Object.keys(t),a=new Set([].concat($e(n),$e(r)));return $e(a).every(function(i){var o=e[i],s=t[i];return typeof o=="function"&&typeof s=="function"?!0:o===s})}function Iwe(e){var t=arguments.length<=1?void 0:arguments[1];return t&&t.target&&hr(t.target)==="object"&&e in t.target?t.target[e]:t}function z8(e,t,n){var r=e.length;if(t<0||t>=r||n<0||n>=r)return e;var a=e[t],i=t-n;return i>0?[].concat($e(e.slice(0,n)),[a],$e(e.slice(n,t)),$e(e.slice(t+1,r))):i<0?[].concat($e(e.slice(0,t)),$e(e.slice(t+1,n+1)),[a],$e(e.slice(n+1,r))):e}var Lwe=qm;function Nwe(e,t){return e.replace(/\$\{\w+\}/g,function(n){var r=n.slice(2,-1);return t[r]})}var U8="CODE_LOGIC_ERROR";function Vk(e,t,n,r,a){return jk.apply(this,arguments)}function jk(){return jk=lr(qo().mark(function e(t,n,r,a,i){var o,s,l,u,c,f,d,p,h;return qo().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return o=Re({},r),delete o.ruleIndex,o.validator&&(s=o.validator,o.validator=function(){try{return s.apply(void 0,arguments)}catch(b){return console.error(b),Promise.reject(U8)}}),l=null,o&&o.type==="array"&&o.defaultField&&(l=o.defaultField,delete o.defaultField),u=new Lwe(m({},t,[o])),c=av({},qB,a.validateMessages),u.messages(c),f=[],v.prev=9,v.next=12,Promise.resolve(u.validate(m({},t,n),Re({},a)));case 12:v.next=17;break;case 14:v.prev=14,v.t0=v.catch(9),v.t0.errors&&(f=v.t0.errors.map(function(b,y){var x=b.message,k=x===U8?c.default:x;return _.exports.isValidElement(k)?_.exports.cloneElement(k,{key:"error_".concat(y)}):k}));case 17:if(!(!f.length&&l)){v.next=22;break}return v.next=20,Promise.all(n.map(function(b,y){return Vk("".concat(t,".").concat(y),b,l,a,i)}));case 20:return d=v.sent,v.abrupt("return",d.reduce(function(b,y){return[].concat($e(b),$e(y))},[]));case 22:return p=Re(Re({},r),{},{name:t,enum:(r.enum||[]).join(", ")},i),h=f.map(function(b){return typeof b=="string"?Nwe(b,p):b}),v.abrupt("return",h);case 25:case"end":return v.stop()}},e,null,[[9,14]])})),jk.apply(this,arguments)}function Fwe(e,t,n,r,a,i){var o=e.join("."),s=n.map(function(c,f){var d=c.validator,p=Re(Re({},c),{},{ruleIndex:f});return d&&(p.validator=function(h,g,v){var b=!1,y=function(){for(var T=arguments.length,C=new Array(T),I=0;I<T;I++)C[I]=arguments[I];Promise.resolve().then(function(){Yo(!b,"Your validator function has already return a promise. `callback` will be ignored."),b||v.apply(void 0,C)})},x=d(h,g,y);b=x&&typeof x.then=="function"&&typeof x.catch=="function",Yo(b,"`callback` is deprecated. Please return a promise instead."),b&&x.then(function(){v()}).catch(function(k){v(k||" ")})}),p}).sort(function(c,f){var d=c.warningOnly,p=c.ruleIndex,h=f.warningOnly,g=f.ruleIndex;return!!d==!!h?p-g:d?1:-1}),l;if(a===!0)l=new Promise(function(){var c=lr(qo().mark(function f(d,p){var h,g,v;return qo().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:h=0;case 1:if(!(h<s.length)){y.next=12;break}return g=s[h],y.next=5,Vk(o,t,g,r,i);case 5:if(v=y.sent,!v.length){y.next=9;break}return p([{errors:v,rule:g}]),y.abrupt("return");case 9:h+=1,y.next=1;break;case 12:d([]);case 13:case"end":return y.stop()}},f)}));return function(f,d){return c.apply(this,arguments)}}());else{var u=s.map(function(c){return Vk(o,t,c,r,i).then(function(f){return{errors:f,rule:c}})});l=(a?Bwe(u):Dwe(u)).then(function(c){return Promise.reject(c)})}return l.catch(function(c){return c}),l}function Dwe(e){return Gk.apply(this,arguments)}function Gk(){return Gk=lr(qo().mark(function e(t){return qo().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",Promise.all(t).then(function(a){var i,o=(i=[]).concat.apply(i,$e(a));return o}));case 1:case"end":return r.stop()}},e)})),Gk.apply(this,arguments)}function Bwe(e){return Hk.apply(this,arguments)}function Hk(){return Hk=lr(qo().mark(function e(t){var n;return qo().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return n=0,a.abrupt("return",new Promise(function(i){t.forEach(function(o){o.then(function(s){s.errors.length&&i([s]),n+=1,n===t.length&&i([])})})}));case 2:case"end":return a.stop()}},e)})),Hk.apply(this,arguments)}var zwe=["name"],so=[];function $8(e,t,n,r,a,i){return typeof e=="function"?e(t,n,"source"in i?{source:i.source}:{}):r!==a}var S3=function(e){Tt(n,e);var t=Yd(n);function n(r){var a;if(Ae(this,n),a=t.call(this,r),a.state={resetCount:0},a.cancelRegisterFunc=null,a.mounted=!1,a.touched=!1,a.dirty=!1,a.validatePromise=null,a.prevValidating=void 0,a.errors=so,a.warnings=so,a.cancelRegister=function(){var l=a.props,u=l.preserve,c=l.isListField,f=l.name;a.cancelRegisterFunc&&a.cancelRegisterFunc(c,u,Yr(f)),a.cancelRegisterFunc=null},a.getNamePath=function(){var l=a.props,u=l.name,c=l.fieldContext,f=c.prefixName,d=f===void 0?[]:f;return u!==void 0?[].concat($e(d),$e(u)):[]},a.getRules=function(){var l=a.props,u=l.rules,c=u===void 0?[]:u,f=l.fieldContext;return c.map(function(d){return typeof d=="function"?d(f):d})},a.refresh=function(){!a.mounted||a.setState(function(l){var u=l.resetCount;return{resetCount:u+1}})},a.triggerMetaEvent=function(l){var u=a.props.onMetaChange;u==null||u(Re(Re({},a.getMeta()),{},{destroy:l}))},a.onStoreChange=function(l,u,c){var f=a.props,d=f.shouldUpdate,p=f.dependencies,h=p===void 0?[]:p,g=f.onReset,v=c.store,b=a.getNamePath(),y=a.getValue(l),x=a.getValue(v),k=u&&Lh(u,b);switch(c.type==="valueUpdate"&&c.source==="external"&&y!==x&&(a.touched=!0,a.dirty=!0,a.validatePromise=null,a.errors=so,a.warnings=so,a.triggerMetaEvent()),c.type){case"reset":if(!u||k){a.touched=!1,a.dirty=!1,a.validatePromise=null,a.errors=so,a.warnings=so,a.triggerMetaEvent(),g==null||g(),a.refresh();return}break;case"remove":{if(d){a.reRender();return}break}case"setField":{if(k){var T=c.data;"touched"in T&&(a.touched=T.touched),"validating"in T&&!("originRCField"in T)&&(a.validatePromise=T.validating?Promise.resolve([]):null),"errors"in T&&(a.errors=T.errors||so),"warnings"in T&&(a.warnings=T.warnings||so),a.dirty=!0,a.triggerMetaEvent(),a.reRender();return}if(d&&!b.length&&$8(d,l,v,y,x,c)){a.reRender();return}break}case"dependenciesUpdate":{var C=h.map(Yr);if(C.some(function(I){return Lh(c.relatedFields,I)})){a.reRender();return}break}default:if(k||(!h.length||b.length||d)&&$8(d,l,v,y,x,c)){a.reRender();return}break}d===!0&&a.reRender()},a.validateRules=function(l){var u=a.getNamePath(),c=a.getValue(),f=Promise.resolve().then(function(){if(!a.mounted)return[];var d=a.props,p=d.validateFirst,h=p===void 0?!1:p,g=d.messageVariables,v=l||{},b=v.triggerName,y=a.getRules();b&&(y=y.filter(function(k){var T=k.validateTrigger;if(!T)return!0;var C=Fk(T);return C.includes(b)}));var x=Fwe(u,c,y,l,h,g);return x.catch(function(k){return k}).then(function(){var k=arguments.length>0&&arguments[0]!==void 0?arguments[0]:so;if(a.validatePromise===f){a.validatePromise=null;var T=[],C=[];k.forEach(function(I){var P=I.rule.warningOnly,j=I.errors,A=j===void 0?so:j;P?C.push.apply(C,$e(A)):T.push.apply(T,$e(A))}),a.errors=T,a.warnings=C,a.triggerMetaEvent(),a.reRender()}}),x});return a.validatePromise=f,a.dirty=!0,a.errors=so,a.warnings=so,a.triggerMetaEvent(),a.reRender(),f},a.isFieldValidating=function(){return!!a.validatePromise},a.isFieldTouched=function(){return a.touched},a.isFieldDirty=function(){if(a.dirty||a.props.initialValue!==void 0)return!0;var l=a.props.fieldContext,u=l.getInternalHooks(sc),c=u.getInitialValue;return c(a.getNamePath())!==void 0},a.getErrors=function(){return a.errors},a.getWarnings=function(){return a.warnings},a.isListField=function(){return a.props.isListField},a.isList=function(){return a.props.isList},a.isPreserve=function(){return a.props.preserve},a.getMeta=function(){a.prevValidating=a.isFieldValidating();var l={touched:a.isFieldTouched(),validating:a.prevValidating,errors:a.errors,warnings:a.warnings,name:a.getNamePath()};return l},a.getOnlyChild=function(l){if(typeof l=="function"){var u=a.getMeta();return Re(Re({},a.getOnlyChild(l(a.getControlled(),u,a.props.fieldContext))),{},{isFunction:!0})}var c=Od(l);return c.length!==1||!_.exports.isValidElement(c[0])?{child:c,isFunction:!1}:{child:c[0],isFunction:!1}},a.getValue=function(l){var u=a.props.fieldContext.getFieldsValue,c=a.getNamePath();return Kl(l||u(!0),c)},a.getControlled=function(){var l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},u=a.props,c=u.trigger,f=u.validateTrigger,d=u.getValueFromEvent,p=u.normalize,h=u.valuePropName,g=u.getValueProps,v=u.fieldContext,b=f!==void 0?f:v.validateTrigger,y=a.getNamePath(),x=v.getInternalHooks,k=v.getFieldsValue,T=x(sc),C=T.dispatch,I=a.getValue(),P=g||function(M){return m({},h,M)},j=l[c],A=Re(Re({},l),P(I));A[c]=function(){a.touched=!0,a.dirty=!0,a.triggerMetaEvent();for(var M,O=arguments.length,R=new Array(O),G=0;G<O;G++)R[G]=arguments[G];d?M=d.apply(void 0,R):M=Iwe.apply(void 0,[h].concat(R)),p&&(M=p(M,I,k(!0))),C({type:"updateValue",namePath:y,value:M}),j&&j.apply(void 0,R)};var S=Fk(b||[]);return S.forEach(function(M){var O=A[M];A[M]=function(){O&&O.apply(void 0,arguments);var R=a.props.rules;R&&R.length&&C({type:"validateField",namePath:y,triggerName:M})}}),A},r.fieldContext){var i=r.fieldContext.getInternalHooks,o=i(sc),s=o.initEntityValue;s(D(a))}return a}return Oe(n,[{key:"componentDidMount",value:function(){var a=this.props,i=a.shouldUpdate,o=a.fieldContext;if(this.mounted=!0,o){var s=o.getInternalHooks,l=s(sc),u=l.registerField;this.cancelRegisterFunc=u(this)}i===!0&&this.reRender()}},{key:"componentWillUnmount",value:function(){this.cancelRegister(),this.triggerMetaEvent(!0),this.mounted=!1}},{key:"reRender",value:function(){!this.mounted||this.forceUpdate()}},{key:"render",value:function(){var a=this.state.resetCount,i=this.props.children,o=this.getOnlyChild(i),s=o.child,l=o.isFunction,u;return l?u=s:_.exports.isValidElement(s)?u=_.exports.cloneElement(s,this.getControlled(s.props)):(Yo(!s,"`children` of Field is not validate ReactElement."),u=s),_.exports.createElement(_.exports.Fragment,{key:a},u)}}]),n}(_.exports.Component);S3.contextType=Md;S3.defaultProps={trigger:"onChange",valuePropName:"value"};function tz(e){var t=e.name,n=Nn(e,zwe),r=_.exports.useContext(Md),a=t!==void 0?Yr(t):void 0,i="keep";return n.isListField||(i="_".concat((a||[]).join("_"))),_.exports.createElement(S3,yt({key:i,name:a},n,{fieldContext:r}))}var Uwe=_.exports.createContext(null),$we=function(t){var n=t.name,r=t.initialValue,a=t.children,i=t.rules,o=t.validateTrigger,s=_.exports.useContext(Md),l=_.exports.useRef({keys:[],id:0}),u=l.current,c=_.exports.useMemo(function(){var h=Yr(s.prefixName)||[];return[].concat($e(h),$e(Yr(n)))},[s.prefixName,n]),f=_.exports.useMemo(function(){return Re(Re({},s),{},{prefixName:c})},[s,c]),d=_.exports.useMemo(function(){return{getKey:function(g){var v=c.length,b=g[v];return[u.keys[b],g.slice(v+1)]}}},[c]);if(typeof a!="function")return Yo(!1,"Form.List only accepts function as children."),null;var p=function(g,v,b){var y=b.source;return y==="internal"?!1:g!==v};return _.exports.createElement(Uwe.Provider,{value:d},_.exports.createElement(Md.Provider,{value:f},_.exports.createElement(tz,{name:[],shouldUpdate:p,rules:i,validateTrigger:o,initialValue:r,isList:!0},function(h,g){var v=h.value,b=v===void 0?[]:v,y=h.onChange,x=s.getFieldValue,k=function(){var P=x(c||[]);return P||[]},T={add:function(P,j){var A=k();j>=0&&j<=A.length?(u.keys=[].concat($e(u.keys.slice(0,j)),[u.id],$e(u.keys.slice(j))),y([].concat($e(A.slice(0,j)),[P],$e(A.slice(j))))):(u.keys=[].concat($e(u.keys),[u.id]),y([].concat($e(A),[P]))),u.id+=1},remove:function(P){var j=k(),A=new Set(Array.isArray(P)?P:[P]);A.size<=0||(u.keys=u.keys.filter(function(S,M){return!A.has(M)}),y(j.filter(function(S,M){return!A.has(M)})))},move:function(P,j){if(P!==j){var A=k();P<0||P>=A.length||j<0||j>=A.length||(u.keys=z8(u.keys,P,j),y(z8(A,P,j)))}}},C=b||[];return Array.isArray(C)||(C=[]),a(C.map(function(I,P){var j=u.keys[P];return j===void 0&&(u.keys[P]=u.id,j=u.keys[P],u.id+=1),{name:P,key:j,isListField:!0}}),T,g)})))};function Vwe(e){var t=!1,n=e.length,r=[];return e.length?new Promise(function(a,i){e.forEach(function(o,s){o.catch(function(l){return t=!0,l}).then(function(l){n-=1,r[s]=l,!(n>0)&&(t&&i(r),a(r))})})}):Promise.resolve([])}var nz="__@field_split__";function __(e){return e.map(function(t){return"".concat(hr(t),":").concat(t)}).join(nz)}var mf=function(){function e(){Ae(this,e),this.kvs=new Map}return Oe(e,[{key:"set",value:function(n,r){this.kvs.set(__(n),r)}},{key:"get",value:function(n){return this.kvs.get(__(n))}},{key:"update",value:function(n,r){var a=this.get(n),i=r(a);i?this.set(n,i):this.delete(n)}},{key:"delete",value:function(n){this.kvs.delete(__(n))}},{key:"map",value:function(n){return $e(this.kvs.entries()).map(function(r){var a=Le(r,2),i=a[0],o=a[1],s=i.split(nz);return n({key:s.map(function(l){var u=l.match(/^([^:]*):(.*)$/),c=Le(u,3),f=c[1],d=c[2];return f==="number"?Number(d):d}),value:o})})}},{key:"toJSON",value:function(){var n={};return this.map(function(r){var a=r.key,i=r.value;return n[a.join(".")]=i,null}),n}}]),e}(),jwe=["name","errors"],Gwe=Oe(function e(t){var n=this;Ae(this,e),this.formHooked=!1,this.forceRootUpdate=void 0,this.subscribable=!0,this.store={},this.fieldEntities=[],this.initialValues={},this.callbacks={},this.validateMessages=null,this.preserve=null,this.lastValidatePromise=null,this.getForm=function(){return{getFieldValue:n.getFieldValue,getFieldsValue:n.getFieldsValue,getFieldError:n.getFieldError,getFieldWarning:n.getFieldWarning,getFieldsError:n.getFieldsError,isFieldsTouched:n.isFieldsTouched,isFieldTouched:n.isFieldTouched,isFieldValidating:n.isFieldValidating,isFieldsValidating:n.isFieldsValidating,resetFields:n.resetFields,setFields:n.setFields,setFieldsValue:n.setFieldsValue,validateFields:n.validateFields,submit:n.submit,_init:!0,getInternalHooks:n.getInternalHooks}},this.getInternalHooks=function(r){return r===sc?(n.formHooked=!0,{dispatch:n.dispatch,initEntityValue:n.initEntityValue,registerField:n.registerField,useSubscribe:n.useSubscribe,setInitialValues:n.setInitialValues,destroyForm:n.destroyForm,setCallbacks:n.setCallbacks,setValidateMessages:n.setValidateMessages,getFields:n.getFields,setPreserve:n.setPreserve,getInitialValue:n.getInitialValue,registerWatch:n.registerWatch}):(Yo(!1,"`getInternalHooks` is internal usage. Should not call directly."),null)},this.useSubscribe=function(r){n.subscribable=r},this.prevWithoutPreserves=null,this.setInitialValues=function(r,a){if(n.initialValues=r||{},a){var i,o=av({},r,n.store);(i=n.prevWithoutPreserves)===null||i===void 0||i.map(function(s){var l=s.key;o=Dl(o,l,Kl(r,l))}),n.prevWithoutPreserves=null,n.updateStore(o)}},this.destroyForm=function(){var r=new mf;n.getFieldEntities(!0).forEach(function(a){n.isMergedPreserve(a.isPreserve())||r.set(a.getNamePath(),!0)}),n.prevWithoutPreserves=r},this.getInitialValue=function(r){var a=Kl(n.initialValues,r);return r.length?Ly(a):a},this.setCallbacks=function(r){n.callbacks=r},this.setValidateMessages=function(r){n.validateMessages=r},this.setPreserve=function(r){n.preserve=r},this.watchList=[],this.registerWatch=function(r){return n.watchList.push(r),function(){n.watchList=n.watchList.filter(function(a){return a!==r})}},this.notifyWatch=function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];if(n.watchList.length){var a=n.getFieldsValue();n.watchList.forEach(function(i){i(a,r)})}},this.timeoutId=null,this.warningUnhooked=function(){},this.updateStore=function(r){n.store=r},this.getFieldEntities=function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return r?n.fieldEntities.filter(function(a){return a.getNamePath().length}):n.fieldEntities},this.getFieldsMap=function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,a=new mf;return n.getFieldEntities(r).forEach(function(i){var o=i.getNamePath();a.set(o,i)}),a},this.getFieldEntitiesForNamePathList=function(r){if(!r)return n.getFieldEntities(!0);var a=n.getFieldsMap(!0);return r.map(function(i){var o=Yr(i);return a.get(o)||{INVALIDATE_NAME_PATH:Yr(i)}})},this.getFieldsValue=function(r,a){if(n.warningUnhooked(),r===!0&&!a)return n.store;var i=n.getFieldEntitiesForNamePathList(Array.isArray(r)?r:null),o=[];return i.forEach(function(s){var l,u="INVALIDATE_NAME_PATH"in s?s.INVALIDATE_NAME_PATH:s.getNamePath();if(!(!r&&((l=s.isListField)===null||l===void 0?void 0:l.call(s))))if(!a)o.push(u);else{var c="getMeta"in s?s.getMeta():null;a(c)&&o.push(u)}}),D8(n.store,o.map(Yr))},this.getFieldValue=function(r){n.warningUnhooked();var a=Yr(r);return Kl(n.store,a)},this.getFieldsError=function(r){n.warningUnhooked();var a=n.getFieldEntitiesForNamePathList(r);return a.map(function(i,o){return i&&!("INVALIDATE_NAME_PATH"in i)?{name:i.getNamePath(),errors:i.getErrors(),warnings:i.getWarnings()}:{name:Yr(r[o]),errors:[],warnings:[]}})},this.getFieldError=function(r){n.warningUnhooked();var a=Yr(r),i=n.getFieldsError([a])[0];return i.errors},this.getFieldWarning=function(r){n.warningUnhooked();var a=Yr(r),i=n.getFieldsError([a])[0];return i.warnings},this.isFieldsTouched=function(){n.warningUnhooked();for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];var o=a[0],s=a[1],l,u=!1;a.length===0?l=null:a.length===1?Array.isArray(o)?(l=o.map(Yr),u=!1):(l=null,u=o):(l=o.map(Yr),u=s);var c=n.getFieldEntities(!0),f=function(v){return v.isFieldTouched()};if(!l)return u?c.every(f):c.some(f);var d=new mf;l.forEach(function(g){d.set(g,[])}),c.forEach(function(g){var v=g.getNamePath();l.forEach(function(b){b.every(function(y,x){return v[x]===y})&&d.update(b,function(y){return[].concat($e(y),[g])})})});var p=function(v){return v.some(f)},h=d.map(function(g){var v=g.value;return v});return u?h.every(p):h.some(p)},this.isFieldTouched=function(r){return n.warningUnhooked(),n.isFieldsTouched([r])},this.isFieldsValidating=function(r){n.warningUnhooked();var a=n.getFieldEntities();if(!r)return a.some(function(o){return o.isFieldValidating()});var i=r.map(Yr);return a.some(function(o){var s=o.getNamePath();return Lh(i,s)&&o.isFieldValidating()})},this.isFieldValidating=function(r){return n.warningUnhooked(),n.isFieldsValidating([r])},this.resetWithFieldInitialValue=function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},a=new mf,i=n.getFieldEntities(!0);i.forEach(function(l){var u=l.props.initialValue,c=l.getNamePath();if(u!==void 0){var f=a.get(c)||new Set;f.add({entity:l,value:u}),a.set(c,f)}});var o=function(u){u.forEach(function(c){var f=c.props.initialValue;if(f!==void 0){var d=c.getNamePath(),p=n.getInitialValue(d);if(p!==void 0)Yo(!1,"Form already set 'initialValues' with path '".concat(d.join("."),"'. Field can not overwrite it."));else{var h=a.get(d);if(h&&h.size>1)Yo(!1,"Multiple Field with path '".concat(d.join("."),"' set 'initialValue'. Can not decide which one to pick."));else if(h){var g=n.getFieldValue(d);(!r.skipExist||g===void 0)&&n.updateStore(Dl(n.store,d,$e(h)[0].value))}}}})},s;r.entities?s=r.entities:r.namePathList?(s=[],r.namePathList.forEach(function(l){var u=a.get(l);if(u){var c;(c=s).push.apply(c,$e($e(u).map(function(f){return f.entity})))}})):s=i,o(s)},this.resetFields=function(r){n.warningUnhooked();var a=n.store;if(!r){n.updateStore(av({},n.initialValues)),n.resetWithFieldInitialValue(),n.notifyObservers(a,null,{type:"reset"}),n.notifyWatch();return}var i=r.map(Yr);i.forEach(function(o){var s=n.getInitialValue(o);n.updateStore(Dl(n.store,o,s))}),n.resetWithFieldInitialValue({namePathList:i}),n.notifyObservers(a,i,{type:"reset"}),n.notifyWatch(i)},this.setFields=function(r){n.warningUnhooked();var a=n.store,i=[];r.forEach(function(o){var s=o.name;o.errors;var l=Nn(o,jwe),u=Yr(s);i.push(u),"value"in l&&n.updateStore(Dl(n.store,u,l.value)),n.notifyObservers(a,[u],{type:"setField",data:o})}),n.notifyWatch(i)},this.getFields=function(){var r=n.getFieldEntities(!0),a=r.map(function(i){var o=i.getNamePath(),s=i.getMeta(),l=Re(Re({},s),{},{name:o,value:n.getFieldValue(o)});return Object.defineProperty(l,"originRCField",{value:!0}),l});return a},this.initEntityValue=function(r){var a=r.props.initialValue;if(a!==void 0){var i=r.getNamePath(),o=Kl(n.store,i);o===void 0&&n.updateStore(Dl(n.store,i,a))}},this.isMergedPreserve=function(r){var a=r!==void 0?r:n.preserve;return a!=null?a:!0},this.registerField=function(r){n.fieldEntities.push(r);var a=r.getNamePath();if(n.notifyWatch([a]),r.props.initialValue!==void 0){var i=n.store;n.resetWithFieldInitialValue({entities:[r],skipExist:!0}),n.notifyObservers(i,[r.getNamePath()],{type:"valueUpdate",source:"internal"})}return function(o,s){var l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];if(n.fieldEntities=n.fieldEntities.filter(function(f){return f!==r}),!n.isMergedPreserve(s)&&(!o||l.length>1)){var u=o?void 0:n.getInitialValue(a);if(a.length&&n.getFieldValue(a)!==u&&n.fieldEntities.every(function(f){return!ez(f.getNamePath(),a)})){var c=n.store;n.updateStore(Dl(c,a,u,!0)),n.notifyObservers(c,[a],{type:"remove"}),n.triggerDependenciesUpdate(c,a)}}n.notifyWatch([a])}},this.dispatch=function(r){switch(r.type){case"updateValue":{var a=r.namePath,i=r.value;n.updateValue(a,i);break}case"validateField":{var o=r.namePath,s=r.triggerName;n.validateFields([o],{triggerName:s});break}}},this.notifyObservers=function(r,a,i){if(n.subscribable){var o=Re(Re({},i),{},{store:n.getFieldsValue(!0)});n.getFieldEntities().forEach(function(s){var l=s.onStoreChange;l(r,a,o)})}else n.forceRootUpdate()},this.triggerDependenciesUpdate=function(r,a){var i=n.getDependencyChildrenFields(a);return i.length&&n.validateFields(i),n.notifyObservers(r,i,{type:"dependenciesUpdate",relatedFields:[a].concat($e(i))}),i},this.updateValue=function(r,a){var i=Yr(r),o=n.store;n.updateStore(Dl(n.store,i,a)),n.notifyObservers(o,[i],{type:"valueUpdate",source:"internal"}),n.notifyWatch([i]);var s=n.triggerDependenciesUpdate(o,i),l=n.callbacks.onValuesChange;if(l){var u=D8(n.store,[i]);l(u,n.getFieldsValue())}n.triggerOnFieldsChange([i].concat($e(s)))},this.setFieldsValue=function(r){n.warningUnhooked();var a=n.store;if(r){var i=av(n.store,r);n.updateStore(i)}n.notifyObservers(a,null,{type:"valueUpdate",source:"external"}),n.notifyWatch()},this.getDependencyChildrenFields=function(r){var a=new Set,i=[],o=new mf;n.getFieldEntities().forEach(function(l){var u=l.props.dependencies;(u||[]).forEach(function(c){var f=Yr(c);o.update(f,function(){var d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:new Set;return d.add(l),d})})});var s=function l(u){var c=o.get(u)||new Set;c.forEach(function(f){if(!a.has(f)){a.add(f);var d=f.getNamePath();f.isFieldDirty()&&d.length&&(i.push(d),l(d))}})};return s(r),i},this.triggerOnFieldsChange=function(r,a){var i=n.callbacks.onFieldsChange;if(i){var o=n.getFields();if(a){var s=new mf;a.forEach(function(u){var c=u.name,f=u.errors;s.set(c,f)}),o.forEach(function(u){u.errors=s.get(u.name)||u.errors})}var l=o.filter(function(u){var c=u.name;return Lh(r,c)});i(l,o)}},this.validateFields=function(r,a){n.warningUnhooked();var i=!!r,o=i?r.map(Yr):[],s=[];n.getFieldEntities(!0).forEach(function(c){if(i||o.push(c.getNamePath()),(a==null?void 0:a.recursive)&&i){var f=c.getNamePath();f.every(function(h,g){return r[g]===h||r[g]===void 0})&&o.push(f)}if(!(!c.props.rules||!c.props.rules.length)){var d=c.getNamePath();if(!i||Lh(o,d)){var p=c.validateRules(Re({validateMessages:Re(Re({},qB),n.validateMessages)},a));s.push(p.then(function(){return{name:d,errors:[],warnings:[]}}).catch(function(h){var g=[],v=[];return h.forEach(function(b){var y=b.rule.warningOnly,x=b.errors;y?v.push.apply(v,$e(x)):g.push.apply(g,$e(x))}),g.length?Promise.reject({name:d,errors:g,warnings:v}):{name:d,errors:g,warnings:v}}))}}});var l=Vwe(s);n.lastValidatePromise=l,l.catch(function(c){return c}).then(function(c){var f=c.map(function(d){var p=d.name;return p});n.notifyObservers(n.store,f,{type:"validateFinish"}),n.triggerOnFieldsChange(f,c)});var u=l.then(function(){return n.lastValidatePromise===l?Promise.resolve(n.getFieldsValue(o)):Promise.reject([])}).catch(function(c){var f=c.filter(function(d){return d&&d.errors.length});return Promise.reject({values:n.getFieldsValue(o),errorFields:f,outOfDate:n.lastValidatePromise!==l})});return u.catch(function(c){return c}),u},this.submit=function(){n.warningUnhooked(),n.validateFields().then(function(r){var a=n.callbacks.onFinish;if(a)try{a(r)}catch(i){console.error(i)}}).catch(function(r){var a=n.callbacks.onFinishFailed;a&&a(r)})},this.forceRootUpdate=t});function rz(e){var t=_.exports.useRef(),n=_.exports.useState({}),r=Le(n,2),a=r[1];if(!t.current)if(e)t.current=e;else{var i=function(){a({})},o=new Gwe(i);t.current=o.getForm()}return[t.current]}var Wk=_.exports.createContext({triggerFormChange:function(){},triggerFormFinish:function(){},registerForm:function(){},unregisterForm:function(){}}),Hwe=function(t){var n=t.validateMessages,r=t.onFormChange,a=t.onFormFinish,i=t.children,o=_.exports.useContext(Wk),s=_.exports.useRef({});return _.exports.createElement(Wk.Provider,{value:Re(Re({},o),{},{validateMessages:Re(Re({},o.validateMessages),n),triggerFormChange:function(u,c){r&&r(u,{changedFields:c,forms:s.current}),o.triggerFormChange(u,c)},triggerFormFinish:function(u,c){a&&a(u,{values:c,forms:s.current}),o.triggerFormFinish(u,c)},registerForm:function(u,c){u&&(s.current=Re(Re({},s.current),{},m({},u,c))),o.registerForm(u,c)},unregisterForm:function(u){var c=Re({},s.current);delete c[u],s.current=c,o.unregisterForm(u)}})},i)},Wwe=["name","initialValues","fields","form","preserve","children","component","validateMessages","validateTrigger","onValuesChange","onFieldsChange","onFinish","onFinishFailed"],Ywe=function(t,n){var r=t.name,a=t.initialValues,i=t.fields,o=t.form,s=t.preserve,l=t.children,u=t.component,c=u===void 0?"form":u,f=t.validateMessages,d=t.validateTrigger,p=d===void 0?"onChange":d,h=t.onValuesChange,g=t.onFieldsChange,v=t.onFinish,b=t.onFinishFailed,y=Nn(t,Wwe),x=_.exports.useContext(Wk),k=rz(o),T=Le(k,1),C=T[0],I=C.getInternalHooks(sc),P=I.useSubscribe,j=I.setInitialValues,A=I.setCallbacks,S=I.setValidateMessages,M=I.setPreserve,O=I.destroyForm;_.exports.useImperativeHandle(n,function(){return C}),_.exports.useEffect(function(){return x.registerForm(r,C),function(){x.unregisterForm(r)}},[x,C,r]),S(Re(Re({},x.validateMessages),f)),A({onValuesChange:h,onFieldsChange:function(ue){if(x.triggerFormChange(r,ue),g){for(var ge=arguments.length,be=new Array(ge>1?ge-1:0),ze=1;ze<ge;ze++)be[ze-1]=arguments[ze];g.apply(void 0,[ue].concat(be))}},onFinish:function(ue){x.triggerFormFinish(r,ue),v&&v(ue)},onFinishFailed:b}),M(s);var R=_.exports.useRef(null);j(a,!R.current),R.current||(R.current=!0),_.exports.useEffect(function(){return O},[]);var G,ee=typeof l=="function";if(ee){var re=C.getFieldsValue(!0);G=l(re,C)}else G=l;P(!ee);var X=_.exports.useRef();_.exports.useEffect(function(){Pwe(X.current||[],i||[])||C.setFields(i||[]),X.current=i},[i,C]);var K=_.exports.useMemo(function(){return Re(Re({},C),{},{validateTrigger:p})},[C,p]),ae=_.exports.createElement(Md.Provider,{value:K},G);return c===!1?ae:_.exports.createElement(c,yt({},y,{onSubmit:function(ue){ue.preventDefault(),ue.stopPropagation(),C.submit()},onReset:function(ue){var ge;ue.preventDefault(),C.resetFields(),(ge=y.onReset)===null||ge===void 0||ge.call(y,ue)}}),ae)};function V8(e){try{return JSON.stringify(e)}catch{return Math.random()}}function Xwe(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,n=_.exports.useState(),r=Le(n,2),a=r[0],i=r[1],o=_.exports.useMemo(function(){return V8(a)},[a]),s=_.exports.useRef(o);s.current=o;var l=_.exports.useContext(Md),u=t||l,c=u&&u._init,f=Yr(e),d=_.exports.useRef(f);return d.current=f,_.exports.useEffect(function(){if(!!c){var p=u.getFieldsValue,h=u.getInternalHooks,g=h(sc),v=g.registerWatch,b=v(function(x){var k=Kl(x,d.current),T=V8(k);s.current!==T&&(s.current=T,i(k))}),y=Kl(p(),d.current);return i(y),b}},[]),a}var Zwe=_.exports.forwardRef(Ywe),Km=Zwe;Km.FormProvider=Hwe;Km.Field=tz;Km.List=$we;Km.useForm=rz;Km.useWatch=Xwe;function _o(e,t){qwe(e)&&(e="100%");var n=Kwe(e);return e=t===360?e:Math.min(t,Math.max(0,parseFloat(e))),n&&(e=parseInt(String(e*t),10)/100),Math.abs(e-t)<1e-6?1:(t===360?e=(e<0?e%t+t:e%t)/parseFloat(String(t)):e=e%t/parseFloat(String(t)),e)}function qwe(e){return typeof e=="string"&&e.indexOf(".")!==-1&&parseFloat(e)===1}function Kwe(e){return typeof e=="string"&&e.indexOf("%")!==-1}function Qwe(e){return e=parseFloat(e),(isNaN(e)||e<0||e>1)&&(e=1),e}function wg(e){return e<=1?"".concat(Number(e)*100,"%"):e}function w_(e){return e.length===1?"0"+e:String(e)}function Jwe(e,t,n){return{r:_o(e,255)*255,g:_o(t,255)*255,b:_o(n,255)*255}}function k_(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*(6*n):n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function eke(e,t,n){var r,a,i;if(e=_o(e,360),t=_o(t,100),n=_o(n,100),t===0)a=n,i=n,r=n;else{var o=n<.5?n*(1+t):n+t-n*t,s=2*n-o;r=k_(s,o,e+1/3),a=k_(s,o,e),i=k_(s,o,e-1/3)}return{r:r*255,g:a*255,b:i*255}}function tke(e,t,n){e=_o(e,255),t=_o(t,255),n=_o(n,255);var r=Math.max(e,t,n),a=Math.min(e,t,n),i=0,o=r,s=r-a,l=r===0?0:s/r;if(r===a)i=0;else{switch(r){case e:i=(t-n)/s+(t<n?6:0);break;case t:i=(n-e)/s+2;break;case n:i=(e-t)/s+4;break}i/=6}return{h:i,s:l,v:o}}function nke(e,t,n){e=_o(e,360)*6,t=_o(t,100),n=_o(n,100);var r=Math.floor(e),a=e-r,i=n*(1-t),o=n*(1-a*t),s=n*(1-(1-a)*t),l=r%6,u=[n,o,i,i,s,n][l],c=[s,n,n,o,i,i][l],f=[i,i,s,n,n,o][l];return{r:u*255,g:c*255,b:f*255}}function rke(e,t,n,r){var a=[w_(Math.round(e).toString(16)),w_(Math.round(t).toString(16)),w_(Math.round(n).toString(16))];return r&&a[0].startsWith(a[0].charAt(1))&&a[1].startsWith(a[1].charAt(1))&&a[2].startsWith(a[2].charAt(1))?a[0].charAt(0)+a[1].charAt(0)+a[2].charAt(0):a.join("")}function j8(e){return Ii(e)/255}function Ii(e){return parseInt(e,16)}var G8={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",goldenrod:"#daa520",gold:"#ffd700",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavenderblush:"#fff0f5",lavender:"#e6e6fa",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};function Qp(e){var t={r:0,g:0,b:0},n=1,r=null,a=null,i=null,o=!1,s=!1;return typeof e=="string"&&(e=oke(e)),typeof e=="object"&&(js(e.r)&&js(e.g)&&js(e.b)?(t=Jwe(e.r,e.g,e.b),o=!0,s=String(e.r).substr(-1)==="%"?"prgb":"rgb"):js(e.h)&&js(e.s)&&js(e.v)?(r=wg(e.s),a=wg(e.v),t=nke(e.h,r,a),o=!0,s="hsv"):js(e.h)&&js(e.s)&&js(e.l)&&(r=wg(e.s),i=wg(e.l),t=eke(e.h,r,i),o=!0,s="hsl"),Object.prototype.hasOwnProperty.call(e,"a")&&(n=e.a)),n=Qwe(n),{ok:o,format:e.format||s,r:Math.min(255,Math.max(t.r,0)),g:Math.min(255,Math.max(t.g,0)),b:Math.min(255,Math.max(t.b,0)),a:n}}var ake="[-\\+]?\\d+%?",ike="[-\\+]?\\d*\\.\\d+%?",Ql="(?:".concat(ike,")|(?:").concat(ake,")"),E_="[\\s|\\(]+(".concat(Ql,")[,|\\s]+(").concat(Ql,")[,|\\s]+(").concat(Ql,")\\s*\\)?"),S_="[\\s|\\(]+(".concat(Ql,")[,|\\s]+(").concat(Ql,")[,|\\s]+(").concat(Ql,")[,|\\s]+(").concat(Ql,")\\s*\\)?"),Bo={CSS_UNIT:new RegExp(Ql),rgb:new RegExp("rgb"+E_),rgba:new RegExp("rgba"+S_),hsl:new RegExp("hsl"+E_),hsla:new RegExp("hsla"+S_),hsv:new RegExp("hsv"+E_),hsva:new RegExp("hsva"+S_),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/};function oke(e){if(e=e.trim().toLowerCase(),e.length===0)return!1;var t=!1;if(G8[e])e=G8[e],t=!0;else if(e==="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var n=Bo.rgb.exec(e);return n?{r:n[1],g:n[2],b:n[3]}:(n=Bo.rgba.exec(e),n?{r:n[1],g:n[2],b:n[3],a:n[4]}:(n=Bo.hsl.exec(e),n?{h:n[1],s:n[2],l:n[3]}:(n=Bo.hsla.exec(e),n?{h:n[1],s:n[2],l:n[3],a:n[4]}:(n=Bo.hsv.exec(e),n?{h:n[1],s:n[2],v:n[3]}:(n=Bo.hsva.exec(e),n?{h:n[1],s:n[2],v:n[3],a:n[4]}:(n=Bo.hex8.exec(e),n?{r:Ii(n[1]),g:Ii(n[2]),b:Ii(n[3]),a:j8(n[4]),format:t?"name":"hex8"}:(n=Bo.hex6.exec(e),n?{r:Ii(n[1]),g:Ii(n[2]),b:Ii(n[3]),format:t?"name":"hex"}:(n=Bo.hex4.exec(e),n?{r:Ii(n[1]+n[1]),g:Ii(n[2]+n[2]),b:Ii(n[3]+n[3]),a:j8(n[4]+n[4]),format:t?"name":"hex8"}:(n=Bo.hex3.exec(e),n?{r:Ii(n[1]+n[1]),g:Ii(n[2]+n[2]),b:Ii(n[3]+n[3]),format:t?"name":"hex"}:!1)))))))))}function js(e){return Boolean(Bo.CSS_UNIT.exec(String(e)))}var kg=2,H8=.16,ske=.05,lke=.05,uke=.15,az=5,iz=4,cke=[{index:7,opacity:.15},{index:6,opacity:.25},{index:5,opacity:.3},{index:5,opacity:.45},{index:5,opacity:.65},{index:5,opacity:.85},{index:4,opacity:.9},{index:3,opacity:.95},{index:2,opacity:.97},{index:1,opacity:.98}];function W8(e){var t=e.r,n=e.g,r=e.b,a=tke(t,n,r);return{h:a.h*360,s:a.s,v:a.v}}function Eg(e){var t=e.r,n=e.g,r=e.b;return"#".concat(rke(t,n,r,!1))}function fke(e,t,n){var r=n/100,a={r:(t.r-e.r)*r+e.r,g:(t.g-e.g)*r+e.g,b:(t.b-e.b)*r+e.b};return a}function Y8(e,t,n){var r;return Math.round(e.h)>=60&&Math.round(e.h)<=240?r=n?Math.round(e.h)-kg*t:Math.round(e.h)+kg*t:r=n?Math.round(e.h)+kg*t:Math.round(e.h)-kg*t,r<0?r+=360:r>=360&&(r-=360),r}function X8(e,t,n){if(e.h===0&&e.s===0)return e.s;var r;return n?r=e.s-H8*t:t===iz?r=e.s+H8:r=e.s+ske*t,r>1&&(r=1),n&&t===az&&r>.1&&(r=.1),r<.06&&(r=.06),Number(r.toFixed(2))}function Z8(e,t,n){var r;return n?r=e.v+lke*t:r=e.v-uke*t,r>1&&(r=1),Number(r.toFixed(2))}function Yk(e){for(var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=[],r=Qp(e),a=az;a>0;a-=1){var i=W8(r),o=Eg(Qp({h:Y8(i,a,!0),s:X8(i,a,!0),v:Z8(i,a,!0)}));n.push(o)}n.push(Eg(r));for(var s=1;s<=iz;s+=1){var l=W8(r),u=Eg(Qp({h:Y8(l,s),s:X8(l,s),v:Z8(l,s)}));n.push(u)}return t.theme==="dark"?cke.map(function(c){var f=c.index,d=c.opacity,p=Eg(fke(Qp(t.backgroundColor||"#141414"),Qp(n[f]),d*100));return p}):n}var C_={red:"#F5222D",volcano:"#FA541C",orange:"#FA8C16",gold:"#FAAD14",yellow:"#FADB14",lime:"#A0D911",green:"#52C41A",cyan:"#13C2C2",blue:"#1890FF",geekblue:"#2F54EB",purple:"#722ED1",magenta:"#EB2F96",grey:"#666666"},T_={},A_={};Object.keys(C_).forEach(function(e){T_[e]=Yk(C_[e]),T_[e].primary=T_[e][5],A_[e]=Yk(C_[e],{theme:"dark",backgroundColor:"#141414"}),A_[e].primary=A_[e][5]});function Xd(){return!!(typeof window!="undefined"&&window.document&&window.document.createElement)}var dke="rc-util-key";function oz(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=e.mark;return t?t.startsWith("data-")?t:"data-".concat(t):dke}function C3(e){if(e.attachTo)return e.attachTo;var t=document.querySelector("head");return t||document.body}function q8(e){var t,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!Xd())return null;var r=document.createElement("style");if(!((t=n.csp)===null||t===void 0)&&t.nonce){var a;r.nonce=(a=n.csp)===null||a===void 0?void 0:a.nonce}r.innerHTML=e;var i=C3(n),o=i.firstChild;return n.prepend&&i.prepend?i.prepend(r):n.prepend&&o?i.insertBefore(r,o):i.appendChild(r),r}var Xk=new Map;function pke(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=C3(t);return Array.from(Xk.get(n).children).find(function(r){return r.tagName==="STYLE"&&r.getAttribute(oz(t))===e})}function sz(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r=C3(n);if(!Xk.has(r)){var a=q8("",n),i=a.parentNode;Xk.set(r,i),i.removeChild(a)}var o=pke(t,n);if(o){var s,l;if(((s=n.csp)===null||s===void 0?void 0:s.nonce)&&o.nonce!==((l=n.csp)===null||l===void 0?void 0:l.nonce)){var u;o.nonce=(u=n.csp)===null||u===void 0?void 0:u.nonce}return o.innerHTML!==e&&(o.innerHTML=e),o}var c=q8(e,n);return c.setAttribute(oz(n),t),c}function hke(e,t){Yo(e,"[@ant-design/icons] ".concat(t))}function K8(e){return hr(e)==="object"&&typeof e.name=="string"&&typeof e.theme=="string"&&(hr(e.icon)==="object"||typeof e.icon=="function")}function Q8(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Object.keys(e).reduce(function(t,n){var r=e[n];switch(n){case"class":t.className=r,delete t.class;break;default:t[n]=r}return t},{})}function Zk(e,t,n){return n?dr.createElement(e.tag,Re(Re({key:t},Q8(e.attrs)),n),(e.children||[]).map(function(r,a){return Zk(r,"".concat(t,"-").concat(e.tag,"-").concat(a))})):dr.createElement(e.tag,Re({key:t},Q8(e.attrs)),(e.children||[]).map(function(r,a){return Zk(r,"".concat(t,"-").concat(e.tag,"-").concat(a))}))}function lz(e){return Yk(e)[0]}function uz(e){return e?Array.isArray(e)?e:[e]:[]}var mke=`
.anticon {
  display: inline-block;
  color: inherit;
  font-style: normal;
  line-height: 0;
  text-align: center;
  text-transform: none;
  vertical-align: -0.125em;
  text-rendering: optimizeLegibility;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

.anticon > * {
  line-height: 1;
}

.anticon svg {
  display: inline-block;
}

.anticon::before {
  display: none;
}

.anticon .anticon-icon {
  display: block;
}

.anticon[tabindex] {
  cursor: pointer;
}

.anticon-spin::before,
.anticon-spin {
  display: inline-block;
  -webkit-animation: loadingCircle 1s infinite linear;
  animation: loadingCircle 1s infinite linear;
}

@-webkit-keyframes loadingCircle {
  100% {
    -webkit-transform: rotate(360deg);
    transform: rotate(360deg);
  }
}

@keyframes loadingCircle {
  100% {
    -webkit-transform: rotate(360deg);
    transform: rotate(360deg);
  }
}
`,gke=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:mke,n=_.exports.useContext(XB),r=n.csp;_.exports.useEffect(function(){sz(t,"@ant-design-icons",{prepend:!0,csp:r})},[])},vke=["icon","className","onClick","style","primaryColor","secondaryColor"],Nh={primaryColor:"#333",secondaryColor:"#E6E6E6",calculated:!1};function bke(e){var t=e.primaryColor,n=e.secondaryColor;Nh.primaryColor=t,Nh.secondaryColor=n||lz(t),Nh.calculated=!!n}function yke(){return Re({},Nh)}var Ny=function(t){var n=t.icon,r=t.className,a=t.onClick,i=t.style,o=t.primaryColor,s=t.secondaryColor,l=Nn(t,vke),u=Nh;if(o&&(u={primaryColor:o,secondaryColor:s||lz(o)}),gke(),hke(K8(n),"icon should be icon definiton, but got ".concat(n)),!K8(n))return null;var c=n;return c&&typeof c.icon=="function"&&(c=Re(Re({},c),{},{icon:c.icon(u.primaryColor,u.secondaryColor)})),Zk(c.icon,"svg-".concat(c.name),Re({className:r,onClick:a,style:i,"data-icon":c.name,width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true"},l))};Ny.displayName="IconReact";Ny.getTwoToneColors=yke;Ny.setTwoToneColors=bke;var T3=Ny;function cz(e){var t=uz(e),n=Le(t,2),r=n[0],a=n[1];return T3.setTwoToneColors({primaryColor:r,secondaryColor:a})}function xke(){var e=T3.getTwoToneColors();return e.calculated?[e.primaryColor,e.secondaryColor]:e.primaryColor}var _ke=["className","icon","spin","rotate","tabIndex","onClick","twoToneColor"];cz("#1890ff");var Fy=_.exports.forwardRef(function(e,t){var n,r=e.className,a=e.icon,i=e.spin,o=e.rotate,s=e.tabIndex,l=e.onClick,u=e.twoToneColor,c=Nn(e,_ke),f=_.exports.useContext(XB),d=f.prefixCls,p=d===void 0?"anticon":d,h=Xt(p,(n={},m(n,"".concat(p,"-").concat(a.name),!!a.name),m(n,"".concat(p,"-spin"),!!i||a.name==="loading"),n),r),g=s;g===void 0&&l&&(g=-1);var v=o?{msTransform:"rotate(".concat(o,"deg)"),transform:"rotate(".concat(o,"deg)")}:void 0,b=uz(u),y=Le(b,2),x=y[0],k=y[1];return _.exports.createElement("span",Re(Re({role:"img","aria-label":a.name},c),{},{ref:t,tabIndex:g,onClick:l,className:h}),_.exports.createElement(T3,{icon:a,primaryColor:x,secondaryColor:k,style:v}))});Fy.displayName="AntdIcon";Fy.getTwoToneColor=xke;Fy.setTwoToneColor=cz;var Zd=Fy,wke={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M988 548c-19.9 0-36-16.1-36-36 0-59.4-11.6-117-34.6-171.3a440.45 440.45 0 00-94.3-139.9 437.71 437.71 0 00-139.9-94.3C629 83.6 571.4 72 512 72c-19.9 0-36-16.1-36-36s16.1-36 36-36c69.1 0 136.2 13.5 199.3 40.3C772.3 66 827 103 874 150c47 47 83.9 101.8 109.7 162.7 26.7 63.1 40.2 130.2 40.2 199.3.1 19.9-16 36-35.9 36z"}}]},name:"loading",theme:"outlined"},kke=wke,fz=function(t,n){return _.exports.createElement(Zd,Re(Re({},t),{},{ref:n,icon:kke}))};fz.displayName="LoadingOutlined";var J8=_.exports.forwardRef(fz);function eI(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit".concat(e)]="webkit".concat(t),n["Moz".concat(e)]="moz".concat(t),n["ms".concat(e)]="MS".concat(t),n["O".concat(e)]="o".concat(t.toLowerCase()),n}function Eke(e,t){var n={animationend:eI("Animation","AnimationEnd"),transitionend:eI("Transition","TransitionEnd")};return e&&("AnimationEvent"in t||delete n.animationend.animation,"TransitionEvent"in t||delete n.transitionend.transition),n}var Ske=Eke(Xd(),typeof window!="undefined"?window:{}),dz={};if(Xd()){var Cke=document.createElement("div");dz=Cke.style}var Sg={};function pz(e){if(Sg[e])return Sg[e];var t=Ske[e];if(t)for(var n=Object.keys(t),r=n.length,a=0;a<r;a+=1){var i=n[a];if(Object.prototype.hasOwnProperty.call(t,i)&&i in dz)return Sg[e]=t[i],Sg[e]}return""}var hz=pz("animationend"),mz=pz("transitionend"),Tke=!!(hz&&mz),tI=hz||"animationend",nI=mz||"transitionend";function rI(e,t){if(!e)return null;if(hr(e)==="object"){var n=t.replace(/-\w/g,function(r){return r[1].toUpperCase()});return e[n]}return"".concat(e,"-").concat(t)}var Ef="none",Cg="appear",Tg="enter",Ag="leave",aI="none",Ks="prepare",Vf="start",jf="active",A3="end";function mc(e){var t=_.exports.useRef(!1),n=_.exports.useState(e),r=Le(n,2),a=r[0],i=r[1];_.exports.useEffect(function(){return t.current=!1,function(){t.current=!0}},[]);function o(s,l){l&&t.current||i(s)}return[a,o]}var gz=function(t){return+setTimeout(t,16)},vz=function(t){return clearTimeout(t)};typeof window!="undefined"&&"requestAnimationFrame"in window&&(gz=function(t){return window.requestAnimationFrame(t)},vz=function(t){return window.cancelAnimationFrame(t)});var iI=0,O3=new Map;function bz(e){O3.delete(e)}function ur(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;iI+=1;var n=iI;function r(a){if(a===0)bz(n),e();else{var i=gz(function(){r(a-1)});O3.set(n,i)}}return r(t),n}ur.cancel=function(e){var t=O3.get(e);return bz(t),vz(t)};var Ake=function(){var e=_.exports.useRef(null);function t(){ur.cancel(e.current)}function n(r){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2;t();var i=ur(function(){a<=1?r({isCanceled:function(){return i!==e.current}}):n(r,a-1)});e.current=i}return _.exports.useEffect(function(){return function(){t()}},[]),[n,t]},yz=Xd()?_.exports.useLayoutEffect:_.exports.useEffect,oI=[Ks,Vf,jf,A3],xz=!1,Oke=!0;function _z(e){return e===jf||e===A3}var Mke=function(e,t){var n=mc(aI),r=Le(n,2),a=r[0],i=r[1],o=Ake(),s=Le(o,2),l=s[0],u=s[1];function c(){i(Ks,!0)}return yz(function(){if(a!==aI&&a!==A3){var f=oI.indexOf(a),d=oI[f+1],p=t(a);p===xz?i(d,!0):l(function(h){function g(){h.isCanceled()||i(d,!0)}p===!0?g():Promise.resolve(p).then(g)})}},[e,a]),_.exports.useEffect(function(){return function(){u()}},[]),[c,a]},Rke=function(e){var t=_.exports.useRef(),n=_.exports.useRef(e);n.current=e;var r=_.exports.useCallback(function(o){n.current(o)},[]);function a(o){o&&(o.removeEventListener(nI,r),o.removeEventListener(tI,r))}function i(o){t.current&&t.current!==o&&a(t.current),o&&o!==t.current&&(o.addEventListener(nI,r),o.addEventListener(tI,r),t.current=o)}return _.exports.useEffect(function(){return function(){a(t.current)}},[]),[i,a]};function Pke(e,t,n,r){var a=r.motionEnter,i=a===void 0?!0:a,o=r.motionAppear,s=o===void 0?!0:o,l=r.motionLeave,u=l===void 0?!0:l,c=r.motionDeadline,f=r.motionLeaveImmediately,d=r.onAppearPrepare,p=r.onEnterPrepare,h=r.onLeavePrepare,g=r.onAppearStart,v=r.onEnterStart,b=r.onLeaveStart,y=r.onAppearActive,x=r.onEnterActive,k=r.onLeaveActive,T=r.onAppearEnd,C=r.onEnterEnd,I=r.onLeaveEnd,P=r.onVisibleChanged,j=mc(),A=Le(j,2),S=A[0],M=A[1],O=mc(Ef),R=Le(O,2),G=R[0],ee=R[1],re=mc(null),X=Le(re,2),K=X[0],ae=X[1],le=_.exports.useRef(!1),ue=_.exports.useRef(null);function ge(){return n()}var be=_.exports.useRef(!1);function ze(Ct){var ht=ge();if(!(Ct&&!Ct.deadline&&Ct.target!==ht)){var Gt=be.current,Ht;G===Cg&&Gt?Ht=T==null?void 0:T(ht,Ct):G===Tg&&Gt?Ht=C==null?void 0:C(ht,Ct):G===Ag&&Gt&&(Ht=I==null?void 0:I(ht,Ct)),G!==Ef&&Gt&&Ht!==!1&&(ee(Ef,!0),ae(null,!0))}}var Lt=Rke(ze),Rt=Le(Lt,1),qt=Rt[0],Me=_.exports.useMemo(function(){var Ct,ht,Gt;switch(G){case Cg:return Ct={},m(Ct,Ks,d),m(Ct,Vf,g),m(Ct,jf,y),Ct;case Tg:return ht={},m(ht,Ks,p),m(ht,Vf,v),m(ht,jf,x),ht;case Ag:return Gt={},m(Gt,Ks,h),m(Gt,Vf,b),m(Gt,jf,k),Gt;default:return{}}},[G]),Qe=Mke(G,function(Ct){if(Ct===Ks){var ht=Me[Ks];return ht?ht(ge()):xz}if(ft in Me){var Gt;ae(((Gt=Me[ft])===null||Gt===void 0?void 0:Gt.call(Me,ge(),null))||null)}return ft===jf&&(qt(ge()),c>0&&(clearTimeout(ue.current),ue.current=setTimeout(function(){ze({deadline:!0})},c))),Oke}),et=Le(Qe,2),ve=et[0],ft=et[1],kt=_z(ft);be.current=kt,yz(function(){M(t);var Ct=le.current;if(le.current=!0,!!e){var ht;!Ct&&t&&s&&(ht=Cg),Ct&&t&&i&&(ht=Tg),(Ct&&!t&&u||!Ct&&f&&!t&&u)&&(ht=Ag),ht&&(ee(ht),ve())}},[t]),_.exports.useEffect(function(){(G===Cg&&!s||G===Tg&&!i||G===Ag&&!u)&&ee(Ef)},[s,i,u]),_.exports.useEffect(function(){return function(){le.current=!1,clearTimeout(ue.current)}},[]),_.exports.useEffect(function(){S!==void 0&&G===Ef&&(P==null||P(S))},[S,G]);var xt=K;return Me[Ks]&&ft===Vf&&(xt=Re({transition:"none"},xt)),[G,ft,xt,S!=null?S:t]}var Ike=function(e){Tt(n,e);var t=Yd(n);function n(){return Ae(this,n),t.apply(this,arguments)}return Oe(n,[{key:"render",value:function(){return this.props.children}}]),n}(_.exports.Component);function Lke(e){var t=e;hr(e)==="object"&&(t=e.transitionSupport);function n(a){return!!(a.motionName&&t)}var r=_.exports.forwardRef(function(a,i){var o=a.visible,s=o===void 0?!0:o,l=a.removeOnLeave,u=l===void 0?!0:l,c=a.forceRender,f=a.children,d=a.motionName,p=a.leavedClassName,h=a.eventProps,g=n(a),v=_.exports.useRef(),b=_.exports.useRef();function y(){try{return v.current instanceof HTMLElement?v.current:hb(b.current)}catch{return null}}var x=Pke(g,s,y,a),k=Le(x,4),T=k[0],C=k[1],I=k[2],P=k[3],j=_.exports.useRef(P);P&&(j.current=!0);var A=_.exports.useCallback(function(re){v.current=re,WB(i,re)},[i]),S,M=Re(Re({},h),{},{visible:s});if(!f)S=null;else if(T===Ef||!n(a))P?S=f(Re({},M),A):!u&&j.current?S=f(Re(Re({},M),{},{className:p}),A):c?S=f(Re(Re({},M),{},{style:{display:"none"}}),A):S=null;else{var O,R;C===Ks?R="prepare":_z(C)?R="active":C===Vf&&(R="start"),S=f(Re(Re({},M),{},{className:Xt(rI(d,T),(O={},m(O,rI(d,"".concat(T,"-").concat(R)),R),m(O,d,typeof d=="string"),O)),style:I}),A)}if(_.exports.isValidElement(S)&&Iy(S)){var G=S,ee=G.ref;ee||(S=_.exports.cloneElement(S,{ref:A}))}return _.exports.createElement(Ike,{ref:b},S)});return r.displayName="CSSMotion",r}var Qm=Lke(Tke),Nke={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M563.8 512l262.5-312.9c4.4-5.2.7-13.1-6.1-13.1h-79.8c-4.7 0-9.2 2.1-12.3 5.7L511.6 449.8 295.1 191.7c-3-3.6-7.5-5.7-12.3-5.7H203c-6.8 0-10.5 7.9-6.1 13.1L459.4 512 196.9 824.9A7.95 7.95 0 00203 838h79.8c4.7 0 9.2-2.1 12.3-5.7l216.5-258.1 216.5 258.1c3 3.6 7.5 5.7 12.3 5.7h79.8c6.8 0 10.5-7.9 6.1-13.1L563.8 512z"}}]},name:"close",theme:"outlined"},Fke=Nke,wz=function(t,n){return _.exports.createElement(Zd,Re(Re({},t),{},{ref:n,icon:Fke}))};wz.displayName="CloseOutlined";var Dke=_.exports.forwardRef(wz),Bke=function(t,n){return n||(t?"ant-".concat(t):"ant")},Yi=_.exports.createContext({getPrefixCls:Bke}),M3=Yi.Consumer,zke=_.exports.createContext(!1),Uke=zke,$ke=_.exports.createContext(void 0),R3=$ke;function gh(e,t,n,r){var a=nm.unstable_batchedUpdates?function(o){nm.unstable_batchedUpdates(n,o)}:n;return e.addEventListener&&e.addEventListener(t,a,r),{remove:function(){e.removeEventListener&&e.removeEventListener(t,a,r)}}}var kz=_.exports.isValidElement;function Vke(e,t,n){return kz(e)?_.exports.cloneElement(e,typeof n=="function"?n(e.props||{}):n):t}function Dy(e,t){return Vke(e,e,t)}function sI(e){var t=_.exports.useRef();t.current=e;var n=_.exports.useCallback(function(){for(var r,a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return(r=t.current)===null||r===void 0?void 0:r.call.apply(r,[t].concat(i))},[]);return n}var Rd=Xd()?_.exports.useLayoutEffect:_.exports.useEffect,Ys;(function(e){e[e.INNER=0]="INNER",e[e.PROP=1]="PROP"})(Ys||(Ys={}));var jke=function(t,n){var r=_.exports.useRef(!0);Rd(function(){if(!r.current)return t()},n),Rd(function(){return r.current=!1,function(){r.current=!0}},[])};function O_(e){return e!==void 0}function cu(e,t){var n=t||{},r=n.defaultValue,a=n.value,i=n.onChange,o=n.postState,s=mc(function(){var v=void 0,b;return O_(a)?(v=a,b=Ys.PROP):O_(r)?(v=typeof r=="function"?r():r,b=Ys.PROP):(v=typeof e=="function"?e():e,b=Ys.INNER),[v,b,v]}),l=Le(s,2),u=l[0],c=l[1],f=O_(a)?a:u[0],d=o?o(f):f;jke(function(){c(function(v){var b=Le(v,1),y=b[0];return[a,Ys.PROP,y]})},[a]);var p=_.exports.useRef(),h=sI(function(v,b){c(function(y){var x=Le(y,3),k=x[0],T=x[1],C=x[2],I=typeof v=="function"?v(k):v;if(I===k)return y;var P=T===Ys.INNER&&p.current!==C?C:k;return[I,Ys.INNER,P]},b)}),g=sI(i);return Rd(function(){var v=Le(u,3),b=v[0],y=v[1],x=v[2];b!==x&&y===Ys.INNER&&(g(b,x),p.current=x)},[u]),[d,h]}var St={MAC_ENTER:3,BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,QUESTION_MARK:63,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,META:91,WIN_KEY_RIGHT:92,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUMLOCK:144,SEMICOLON:186,DASH:189,EQUALS:187,COMMA:188,PERIOD:190,SLASH:191,APOSTROPHE:192,SINGLE_QUOTE:222,OPEN_SQUARE_BRACKET:219,BACKSLASH:220,CLOSE_SQUARE_BRACKET:221,WIN_KEY:224,MAC_FF_META:224,WIN_IME:229,isTextModifyingKeyEvent:function(t){var n=t.keyCode;if(t.altKey&&!t.ctrlKey||t.metaKey||n>=St.F1&&n<=St.F12)return!1;switch(n){case St.ALT:case St.CAPS_LOCK:case St.CONTEXT_MENU:case St.CTRL:case St.DOWN:case St.END:case St.ESC:case St.HOME:case St.INSERT:case St.LEFT:case St.MAC_FF_META:case St.META:case St.NUMLOCK:case St.NUM_CENTER:case St.PAGE_DOWN:case St.PAGE_UP:case St.PAUSE:case St.PRINT_SCREEN:case St.RIGHT:case St.SHIFT:case St.UP:case St.WIN_KEY:case St.WIN_KEY_RIGHT:return!1;default:return!0}},isCharacterKey:function(t){if(t>=St.ZERO&&t<=St.NINE||t>=St.NUM_ZERO&&t<=St.NUM_MULTIPLY||t>=St.A&&t<=St.Z||window.navigator.userAgent.indexOf("WebKit")!==-1&&t===0)return!0;switch(t){case St.SPACE:case St.QUESTION_MARK:case St.NUM_PLUS:case St.NUM_MINUS:case St.NUM_PERIOD:case St.NUM_DIVISION:case St.SEMICOLON:case St.DASH:case St.EQUALS:case St.COMMA:case St.PERIOD:case St.SLASH:case St.APOSTROPHE:case St.SINGLE_QUOTE:case St.OPEN_SQUARE_BRACKET:case St.BACKSLASH:case St.CLOSE_SQUARE_BRACKET:return!0;default:return!1}}},Ez=function(){if(typeof navigator=="undefined"||typeof window=="undefined")return!1;var e=navigator.userAgent||navigator.vendor||window.opera;return!!(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw-(n|u)|c55\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|g560|gene|gf-5|g-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c(-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac( |-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel(i|m)|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i.test(e==null?void 0:e.substr(0,4)))};function iv(e,t){return e?e.contains(t):!1}var Gke=_.exports.forwardRef(function(e,t){var n=e.didUpdate,r=e.getContainer,a=e.children,i=_.exports.useRef(),o=_.exports.useRef();_.exports.useImperativeHandle(t,function(){return{}});var s=_.exports.useRef(!1);return!s.current&&Xd()&&(o.current=r(),i.current=o.current.parentNode,s.current=!0),_.exports.useEffect(function(){n==null||n(e)}),_.exports.useEffect(function(){return o.current.parentNode===null&&i.current!==null&&i.current.appendChild(o.current),function(){var l,u;(l=o.current)===null||l===void 0||(u=l.parentNode)===null||u===void 0||u.removeChild(o.current)}},[]),o.current?nm.createPortal(a,o.current):null});function Hke(e,t,n){return n?e[0]===t[0]:e[0]===t[0]&&e[1]===t[1]}function Wke(e,t,n){var r=e[t]||{};return Re(Re({},r),n)}function Yke(e,t,n,r){for(var a=n.points,i=Object.keys(e),o=0;o<i.length;o+=1){var s=i[o];if(Hke(e[s].points,a,r))return"".concat(t,"-placement-").concat(s)}return""}function Sz(e){var t=e.prefixCls,n=e.motion,r=e.animation,a=e.transitionName;return n||(r?{motionName:"".concat(t,"-").concat(r)}:a?{motionName:a}:null)}function Xke(e){var t=e.prefixCls,n=e.visible,r=e.zIndex,a=e.mask,i=e.maskMotion,o=e.maskAnimation,s=e.maskTransitionName;if(!a)return null;var l={};return(i||s||o)&&(l=Re({motionAppear:!0},Sz({motion:i,prefixCls:t,transitionName:s,animation:o}))),_.exports.createElement(Qm,yt({},l,{visible:n,removeOnLeave:!0}),function(u){var c=u.className;return _.exports.createElement("div",{style:{zIndex:r},className:Xt("".concat(t,"-mask"),c)})})}var Cz=function(e){if(!e)return!1;if(e.offsetParent)return!0;if(e.getBBox){var t=e.getBBox();if(t.width||t.height)return!0}if(e.getBoundingClientRect){var n=e.getBoundingClientRect();if(n.width||n.height)return!0}return!1};function lI(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function uI(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?lI(Object(n),!0).forEach(function(r){Zke(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):lI(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function ov(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?ov=function(t){return typeof t}:ov=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ov(e)}function Zke(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Jp,qke={Webkit:"-webkit-",Moz:"-moz-",ms:"-ms-",O:"-o-"};function mb(){if(Jp!==void 0)return Jp;Jp="";var e=document.createElement("p").style,t="Transform";for(var n in qke)n+t in e&&(Jp=n);return Jp}function Tz(){return mb()?"".concat(mb(),"TransitionProperty"):"transitionProperty"}function By(){return mb()?"".concat(mb(),"Transform"):"transform"}function cI(e,t){var n=Tz();n&&(e.style[n]=t,n!=="transitionProperty"&&(e.style.transitionProperty=t))}function M_(e,t){var n=By();n&&(e.style[n]=t,n!=="transform"&&(e.style.transform=t))}function Kke(e){return e.style.transitionProperty||e.style[Tz()]}function Qke(e){var t=window.getComputedStyle(e,null),n=t.getPropertyValue("transform")||t.getPropertyValue(By());if(n&&n!=="none"){var r=n.replace(/[^0-9\-.,]/g,"").split(",");return{x:parseFloat(r[12]||r[4],0),y:parseFloat(r[13]||r[5],0)}}return{x:0,y:0}}var Jke=/matrix\((.*)\)/,e2e=/matrix3d\((.*)\)/;function t2e(e,t){var n=window.getComputedStyle(e,null),r=n.getPropertyValue("transform")||n.getPropertyValue(By());if(r&&r!=="none"){var a,i=r.match(Jke);if(i)i=i[1],a=i.split(",").map(function(s){return parseFloat(s,10)}),a[4]=t.x,a[5]=t.y,M_(e,"matrix(".concat(a.join(","),")"));else{var o=r.match(e2e)[1];a=o.split(",").map(function(s){return parseFloat(s,10)}),a[12]=t.x,a[13]=t.y,M_(e,"matrix3d(".concat(a.join(","),")"))}}else M_(e,"translateX(".concat(t.x,"px) translateY(").concat(t.y,"px) translateZ(0)"))}var n2e=/[\-+]?(?:\d*\.|)\d+(?:[eE][\-+]?\d+|)/.source,Jm;function fI(e){var t=e.style.display;e.style.display="none",e.offsetHeight,e.style.display=t}function id(e,t,n){var r=n;if(ov(t)==="object"){for(var a in t)t.hasOwnProperty(a)&&id(e,a,t[a]);return}if(typeof r!="undefined"){typeof r=="number"&&(r="".concat(r,"px")),e.style[t]=r;return}return Jm(e,t)}function r2e(e){var t,n,r,a=e.ownerDocument,i=a.body,o=a&&a.documentElement;return t=e.getBoundingClientRect(),n=Math.floor(t.left),r=Math.floor(t.top),n-=o.clientLeft||i.clientLeft||0,r-=o.clientTop||i.clientTop||0,{left:n,top:r}}function Az(e,t){var n=e["page".concat(t?"Y":"X","Offset")],r="scroll".concat(t?"Top":"Left");if(typeof n!="number"){var a=e.document;n=a.documentElement[r],typeof n!="number"&&(n=a.body[r])}return n}function Oz(e){return Az(e)}function Mz(e){return Az(e,!0)}function Cm(e){var t=r2e(e),n=e.ownerDocument,r=n.defaultView||n.parentWindow;return t.left+=Oz(r),t.top+=Mz(r),t}function P3(e){return e!=null&&e==e.window}function Rz(e){return P3(e)?e.document:e.nodeType===9?e:e.ownerDocument}function a2e(e,t,n){var r=n,a="",i=Rz(e);return r=r||i.defaultView.getComputedStyle(e,null),r&&(a=r.getPropertyValue(t)||r[t]),a}var i2e=new RegExp("^(".concat(n2e,")(?!px)[a-z%]+$"),"i"),o2e=/^(top|right|bottom|left)$/,R_="currentStyle",P_="runtimeStyle",Xu="left",s2e="px";function l2e(e,t){var n=e[R_]&&e[R_][t];if(i2e.test(n)&&!o2e.test(t)){var r=e.style,a=r[Xu],i=e[P_][Xu];e[P_][Xu]=e[R_][Xu],r[Xu]=t==="fontSize"?"1em":n||0,n=r.pixelLeft+s2e,r[Xu]=a,e[P_][Xu]=i}return n===""?"auto":n}typeof window!="undefined"&&(Jm=window.getComputedStyle?a2e:l2e);function Og(e,t){return e==="left"?t.useCssRight?"right":e:t.useCssBottom?"bottom":e}function dI(e){if(e==="left")return"right";if(e==="right")return"left";if(e==="top")return"bottom";if(e==="bottom")return"top"}function pI(e,t,n){id(e,"position")==="static"&&(e.style.position="relative");var r=-999,a=-999,i=Og("left",n),o=Og("top",n),s=dI(i),l=dI(o);i!=="left"&&(r=999),o!=="top"&&(a=999);var u="",c=Cm(e);("left"in t||"top"in t)&&(u=Kke(e)||"",cI(e,"none")),"left"in t&&(e.style[s]="",e.style[i]="".concat(r,"px")),"top"in t&&(e.style[l]="",e.style[o]="".concat(a,"px")),fI(e);var f=Cm(e),d={};for(var p in t)if(t.hasOwnProperty(p)){var h=Og(p,n),g=p==="left"?r:a,v=c[p]-f[p];h===p?d[h]=g+v:d[h]=g-v}id(e,d),fI(e),("left"in t||"top"in t)&&cI(e,u);var b={};for(var y in t)if(t.hasOwnProperty(y)){var x=Og(y,n),k=t[y]-c[y];y===x?b[x]=d[x]+k:b[x]=d[x]-k}id(e,b)}function u2e(e,t){var n=Cm(e),r=Qke(e),a={x:r.x,y:r.y};"left"in t&&(a.x=r.x+t.left-n.left),"top"in t&&(a.y=r.y+t.top-n.top),t2e(e,a)}function c2e(e,t,n){if(n.ignoreShake){var r=Cm(e),a=r.left.toFixed(0),i=r.top.toFixed(0),o=t.left.toFixed(0),s=t.top.toFixed(0);if(a===o&&i===s)return}n.useCssRight||n.useCssBottom?pI(e,t,n):n.useCssTransform&&By()in document.body.style?u2e(e,t):pI(e,t,n)}function I3(e,t){for(var n=0;n<e.length;n++)t(e[n])}function Pz(e){return Jm(e,"boxSizing")==="border-box"}var f2e=["margin","border","padding"],qk=-1,d2e=2,Kk=1,p2e=0;function h2e(e,t,n){var r={},a=e.style,i;for(i in t)t.hasOwnProperty(i)&&(r[i]=a[i],a[i]=t[i]);n.call(e);for(i in t)t.hasOwnProperty(i)&&(a[i]=r[i])}function vh(e,t,n){var r=0,a,i,o;for(i=0;i<t.length;i++)if(a=t[i],a)for(o=0;o<n.length;o++){var s=void 0;a==="border"?s="".concat(a).concat(n[o],"Width"):s=a+n[o],r+=parseFloat(Jm(e,s))||0}return r}var ws={getParent:function(t){var n=t;do n.nodeType===11&&n.host?n=n.host:n=n.parentNode;while(n&&n.nodeType!==1&&n.nodeType!==9);return n}};I3(["Width","Height"],function(e){ws["doc".concat(e)]=function(t){var n=t.document;return Math.max(n.documentElement["scroll".concat(e)],n.body["scroll".concat(e)],ws["viewport".concat(e)](n))},ws["viewport".concat(e)]=function(t){var n="client".concat(e),r=t.document,a=r.body,i=r.documentElement,o=i[n];return r.compatMode==="CSS1Compat"&&o||a&&a[n]||o}});function hI(e,t,n){var r=n;if(P3(e))return t==="width"?ws.viewportWidth(e):ws.viewportHeight(e);if(e.nodeType===9)return t==="width"?ws.docWidth(e):ws.docHeight(e);var a=t==="width"?["Left","Right"]:["Top","Bottom"],i=Math.floor(t==="width"?e.getBoundingClientRect().width:e.getBoundingClientRect().height),o=Pz(e),s=0;(i==null||i<=0)&&(i=void 0,s=Jm(e,t),(s==null||Number(s)<0)&&(s=e.style[t]||0),s=parseFloat(s)||0),r===void 0&&(r=o?Kk:qk);var l=i!==void 0||o,u=i||s;return r===qk?l?u-vh(e,["border","padding"],a):s:l?r===Kk?u:u+(r===d2e?-vh(e,["border"],a):vh(e,["margin"],a)):s+vh(e,f2e.slice(r),a)}var m2e={position:"absolute",visibility:"hidden",display:"block"};function mI(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r,a=t[0];return a.offsetWidth!==0?r=hI.apply(void 0,t):h2e(a,m2e,function(){r=hI.apply(void 0,t)}),r}I3(["width","height"],function(e){var t=e.charAt(0).toUpperCase()+e.slice(1);ws["outer".concat(t)]=function(r,a){return r&&mI(r,e,a?p2e:Kk)};var n=e==="width"?["Left","Right"]:["Top","Bottom"];ws[e]=function(r,a){var i=a;if(i!==void 0){if(r){var o=Pz(r);return o&&(i+=vh(r,["padding","border"],n)),id(r,e,i)}return}return r&&mI(r,e,qk)}});function Iz(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}var bn={getWindow:function(t){if(t&&t.document&&t.setTimeout)return t;var n=t.ownerDocument||t;return n.defaultView||n.parentWindow},getDocument:Rz,offset:function(t,n,r){if(typeof n!="undefined")c2e(t,n,r||{});else return Cm(t)},isWindow:P3,each:I3,css:id,clone:function(t){var n,r={};for(n in t)t.hasOwnProperty(n)&&(r[n]=t[n]);var a=t.overflow;if(a)for(n in t)t.hasOwnProperty(n)&&(r.overflow[n]=t.overflow[n]);return r},mix:Iz,getWindowScrollLeft:function(t){return Oz(t)},getWindowScrollTop:function(t){return Mz(t)},merge:function(){for(var t={},n=0;n<arguments.length;n++)bn.mix(t,n<0||arguments.length<=n?void 0:arguments[n]);return t},viewportWidth:0,viewportHeight:0};Iz(bn,ws);var I_=bn.getParent;function Qk(e){if(bn.isWindow(e)||e.nodeType===9)return null;var t=bn.getDocument(e),n=t.body,r,a=bn.css(e,"position"),i=a==="fixed"||a==="absolute";if(!i)return e.nodeName.toLowerCase()==="html"?null:I_(e);for(r=I_(e);r&&r!==n&&r.nodeType!==9;r=I_(r))if(a=bn.css(r,"position"),a!=="static")return r;return null}var gI=bn.getParent;function g2e(e){if(bn.isWindow(e)||e.nodeType===9)return!1;var t=bn.getDocument(e),n=t.body,r=null;for(r=gI(e);r&&r!==n&&r!==t;r=gI(r)){var a=bn.css(r,"position");if(a==="fixed")return!0}return!1}function L3(e,t){for(var n={left:0,right:1/0,top:0,bottom:1/0},r=Qk(e),a=bn.getDocument(e),i=a.defaultView||a.parentWindow,o=a.body,s=a.documentElement;r;){if((navigator.userAgent.indexOf("MSIE")===-1||r.clientWidth!==0)&&r!==o&&r!==s&&bn.css(r,"overflow")!=="visible"){var l=bn.offset(r);l.left+=r.clientLeft,l.top+=r.clientTop,n.top=Math.max(n.top,l.top),n.right=Math.min(n.right,l.left+r.clientWidth),n.bottom=Math.min(n.bottom,l.top+r.clientHeight),n.left=Math.max(n.left,l.left)}else if(r===o||r===s)break;r=Qk(r)}var u=null;if(!bn.isWindow(e)&&e.nodeType!==9){u=e.style.position;var c=bn.css(e,"position");c==="absolute"&&(e.style.position="fixed")}var f=bn.getWindowScrollLeft(i),d=bn.getWindowScrollTop(i),p=bn.viewportWidth(i),h=bn.viewportHeight(i),g=s.scrollWidth,v=s.scrollHeight,b=window.getComputedStyle(o);if(b.overflowX==="hidden"&&(g=i.innerWidth),b.overflowY==="hidden"&&(v=i.innerHeight),e.style&&(e.style.position=u),t||g2e(e))n.left=Math.max(n.left,f),n.top=Math.max(n.top,d),n.right=Math.min(n.right,f+p),n.bottom=Math.min(n.bottom,d+h);else{var y=Math.max(g,f+p);n.right=Math.min(n.right,y);var x=Math.max(v,d+h);n.bottom=Math.min(n.bottom,x)}return n.top>=0&&n.left>=0&&n.bottom>n.top&&n.right>n.left?n:null}function v2e(e,t,n,r){var a=bn.clone(e),i={width:t.width,height:t.height};return r.adjustX&&a.left<n.left&&(a.left=n.left),r.resizeWidth&&a.left>=n.left&&a.left+i.width>n.right&&(i.width-=a.left+i.width-n.right),r.adjustX&&a.left+i.width>n.right&&(a.left=Math.max(n.right-i.width,n.left)),r.adjustY&&a.top<n.top&&(a.top=n.top),r.resizeHeight&&a.top>=n.top&&a.top+i.height>n.bottom&&(i.height-=a.top+i.height-n.bottom),r.adjustY&&a.top+i.height>n.bottom&&(a.top=Math.max(n.bottom-i.height,n.top)),bn.mix(a,i)}function N3(e){var t,n,r;if(!bn.isWindow(e)&&e.nodeType!==9)t=bn.offset(e),n=bn.outerWidth(e),r=bn.outerHeight(e);else{var a=bn.getWindow(e);t={left:bn.getWindowScrollLeft(a),top:bn.getWindowScrollTop(a)},n=bn.viewportWidth(a),r=bn.viewportHeight(a)}return t.width=n,t.height=r,t}function vI(e,t){var n=t.charAt(0),r=t.charAt(1),a=e.width,i=e.height,o=e.left,s=e.top;return n==="c"?s+=i/2:n==="b"&&(s+=i),r==="c"?o+=a/2:r==="r"&&(o+=a),{left:o,top:s}}function Mg(e,t,n,r,a){var i=vI(t,n[1]),o=vI(e,n[0]),s=[o.left-i.left,o.top-i.top];return{left:Math.round(e.left-s[0]+r[0]-a[0]),top:Math.round(e.top-s[1]+r[1]-a[1])}}function bI(e,t,n){return e.left<n.left||e.left+t.width>n.right}function yI(e,t,n){return e.top<n.top||e.top+t.height>n.bottom}function b2e(e,t,n){return e.left>n.right||e.left+t.width<n.left}function y2e(e,t,n){return e.top>n.bottom||e.top+t.height<n.top}function Rg(e,t,n){var r=[];return bn.each(e,function(a){r.push(a.replace(t,function(i){return n[i]}))}),r}function Pg(e,t){return e[t]=-e[t],e}function xI(e,t){var n;return/%$/.test(e)?n=parseInt(e.substring(0,e.length-1),10)/100*t:n=parseInt(e,10),n||0}function _I(e,t){e[0]=xI(e[0],t.width),e[1]=xI(e[1],t.height)}function Lz(e,t,n,r){var a=n.points,i=n.offset||[0,0],o=n.targetOffset||[0,0],s=n.overflow,l=n.source||e;i=[].concat(i),o=[].concat(o),s=s||{};var u={},c=0,f=!!(s&&s.alwaysByViewport),d=L3(l,f),p=N3(l);_I(i,p),_I(o,t);var h=Mg(p,t,a,i,o),g=bn.merge(p,h);if(d&&(s.adjustX||s.adjustY)&&r){if(s.adjustX&&bI(h,p,d)){var v=Rg(a,/[lr]/gi,{l:"r",r:"l"}),b=Pg(i,0),y=Pg(o,0),x=Mg(p,t,v,b,y);b2e(x,p,d)||(c=1,a=v,i=b,o=y)}if(s.adjustY&&yI(h,p,d)){var k=Rg(a,/[tb]/gi,{t:"b",b:"t"}),T=Pg(i,1),C=Pg(o,1),I=Mg(p,t,k,T,C);y2e(I,p,d)||(c=1,a=k,i=T,o=C)}c&&(h=Mg(p,t,a,i,o),bn.mix(g,h));var P=bI(h,p,d),j=yI(h,p,d);if(P||j){var A=a;P&&(A=Rg(a,/[lr]/gi,{l:"r",r:"l"})),j&&(A=Rg(a,/[tb]/gi,{t:"b",b:"t"})),a=A,i=n.offset||[0,0],o=n.targetOffset||[0,0]}u.adjustX=s.adjustX&&P,u.adjustY=s.adjustY&&j,(u.adjustX||u.adjustY)&&(g=v2e(h,p,d,u))}return g.width!==p.width&&bn.css(l,"width",bn.width(l)+g.width-p.width),g.height!==p.height&&bn.css(l,"height",bn.height(l)+g.height-p.height),bn.offset(l,{left:g.left,top:g.top},{useCssRight:n.useCssRight,useCssBottom:n.useCssBottom,useCssTransform:n.useCssTransform,ignoreShake:n.ignoreShake}),{points:a,offset:i,targetOffset:o,overflow:u}}function x2e(e,t){var n=L3(e,t),r=N3(e);return!n||r.left+r.width<=n.left||r.top+r.height<=n.top||r.left>=n.right||r.top>=n.bottom}function F3(e,t,n){var r=n.target||t,a=N3(r),i=!x2e(r,n.overflow&&n.overflow.alwaysByViewport);return Lz(e,a,n,i)}F3.__getOffsetParent=Qk;F3.__getVisibleRectForElement=L3;function _2e(e,t,n){var r,a,i=bn.getDocument(e),o=i.defaultView||i.parentWindow,s=bn.getWindowScrollLeft(o),l=bn.getWindowScrollTop(o),u=bn.viewportWidth(o),c=bn.viewportHeight(o);"pageX"in t?r=t.pageX:r=s+t.clientX,"pageY"in t?a=t.pageY:a=l+t.clientY;var f={left:r,top:a,width:0,height:0},d=r>=0&&r<=s+u&&a>=0&&a<=l+c,p=[n.points[0],"cc"];return Lz(e,f,uI(uI({},n),{},{points:p}),d)}function w2e(e,t){return e===t?!0:!e||!t?!1:"pageX"in t&&"pageY"in t?e.pageX===t.pageX&&e.pageY===t.pageY:"clientX"in t&&"clientY"in t?e.clientX===t.clientX&&e.clientY===t.clientY:!1}function k2e(e,t){e!==document.activeElement&&iv(t,e)&&typeof e.focus=="function"&&e.focus()}function wI(e,t){var n=null,r=null;function a(o){var s=Le(o,1),l=s[0].target;if(!!document.documentElement.contains(l)){var u=l.getBoundingClientRect(),c=u.width,f=u.height,d=Math.floor(c),p=Math.floor(f);(n!==d||r!==p)&&Promise.resolve().then(function(){t({width:d,height:p})}),n=d,r=p}}var i=new jB(a);return e&&i.observe(e),function(){i.disconnect()}}var E2e=function(e,t){var n=dr.useRef(!1),r=dr.useRef(null);function a(){window.clearTimeout(r.current)}function i(o){if(a(),!n.current||o===!0){if(e()===!1)return;n.current=!0,r.current=window.setTimeout(function(){n.current=!1},t)}else r.current=window.setTimeout(function(){n.current=!1,i()},t)}return[i,function(){n.current=!1,a()}]};function kI(e){return typeof e!="function"?null:e()}function EI(e){return hr(e)!=="object"||!e?null:e}var S2e=function(t,n){var r=t.children,a=t.disabled,i=t.target,o=t.align,s=t.onAlign,l=t.monitorWindowResize,u=t.monitorBufferTime,c=u===void 0?0:u,f=dr.useRef({}),d=dr.useRef(),p=dr.Children.only(r),h=dr.useRef({});h.current.disabled=a,h.current.target=i,h.current.align=o,h.current.onAlign=s;var g=E2e(function(){var C=h.current,I=C.disabled,P=C.target,j=C.align,A=C.onAlign;if(!I&&P){var S=d.current,M,O=kI(P),R=EI(P);f.current.element=O,f.current.point=R,f.current.align=j;var G=document,ee=G.activeElement;return O&&Cz(O)?M=F3(S,O,j):R&&(M=_2e(S,R,j)),k2e(ee,S),A&&M&&A(S,M),!0}return!1},c),v=Le(g,2),b=v[0],y=v[1],x=dr.useRef({cancel:function(){}}),k=dr.useRef({cancel:function(){}});dr.useEffect(function(){var C=kI(i),I=EI(i);d.current!==k.current.element&&(k.current.cancel(),k.current.element=d.current,k.current.cancel=wI(d.current,b)),(f.current.element!==C||!w2e(f.current.point,I)||!qs(f.current.align,o))&&(b(),x.current.element!==C&&(x.current.cancel(),x.current.element=C,x.current.cancel=wI(C,b)))}),dr.useEffect(function(){a?y():b()},[a]);var T=dr.useRef(null);return dr.useEffect(function(){l?T.current||(T.current=gh(window,"resize",b)):T.current&&(T.current.remove(),T.current=null)},[l]),dr.useEffect(function(){return function(){x.current.cancel(),k.current.cancel(),T.current&&T.current.remove(),y()}},[]),dr.useImperativeHandle(n,function(){return{forceAlign:function(){return b(!0)}}}),dr.isValidElement(p)&&(p=dr.cloneElement(p,{ref:Zm(p.ref,d)})),p},Nz=dr.forwardRef(S2e);Nz.displayName="Align";var SI=["measure","alignPre","align",null,"motion"],C2e=function(e,t){var n=mc(null),r=Le(n,2),a=r[0],i=r[1],o=_.exports.useRef();function s(c){i(c,!0)}function l(){ur.cancel(o.current)}function u(c){l(),o.current=ur(function(){s(function(f){switch(a){case"align":return"motion";case"motion":return"stable"}return f}),c==null||c()})}return _.exports.useEffect(function(){s("measure")},[e]),_.exports.useEffect(function(){switch(a){case"measure":t();break}a&&(o.current=ur(lr(qo().mark(function c(){var f,d;return qo().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:f=SI.indexOf(a),d=SI[f+1],d&&f!==-1&&s(d);case 3:case"end":return h.stop()}},c)}))))},[a]),_.exports.useEffect(function(){return function(){l()}},[]),[a,u]},T2e=function(e){var t=_.exports.useState({width:0,height:0}),n=Le(t,2),r=n[0],a=n[1];function i(s){a({width:s.offsetWidth,height:s.offsetHeight})}var o=_.exports.useMemo(function(){var s={};if(e){var l=r.width,u=r.height;e.indexOf("height")!==-1&&u?s.height=u:e.indexOf("minHeight")!==-1&&u&&(s.minHeight=u),e.indexOf("width")!==-1&&l?s.width=l:e.indexOf("minWidth")!==-1&&l&&(s.minWidth=l)}return s},[e,r]);return[o,i]},Fz=_.exports.forwardRef(function(e,t){var n=e.visible,r=e.prefixCls,a=e.className,i=e.style,o=e.children,s=e.zIndex,l=e.stretch,u=e.destroyPopupOnHide,c=e.forceRender,f=e.align,d=e.point,p=e.getRootDomNode,h=e.getClassNameFromAlign,g=e.onAlign,v=e.onMouseEnter,b=e.onMouseLeave,y=e.onMouseDown,x=e.onTouchStart,k=e.onClick,T=_.exports.useRef(),C=_.exports.useRef(),I=_.exports.useState(),P=Le(I,2),j=P[0],A=P[1],S=T2e(l),M=Le(S,2),O=M[0],R=M[1];function G(){l&&R(p())}var ee=C2e(n,G),re=Le(ee,2),X=re[0],K=re[1],ae=_.exports.useState(0),le=Le(ae,2),ue=le[0],ge=le[1],be=_.exports.useRef();Rd(function(){X==="alignPre"&&ge(0)},[X]);function ze(){return d||p}function Lt(){var ft;(ft=T.current)===null||ft===void 0||ft.forceAlign()}function Rt(ft,kt){var xt=h(kt);j!==xt&&A(xt),ge(function(Ct){return Ct+1}),X==="align"&&(g==null||g(ft,kt))}Rd(function(){X==="align"&&(ue<2?Lt():K(function(){var ft;(ft=be.current)===null||ft===void 0||ft.call(be)}))},[ue]);var qt=Re({},Sz(e));["onAppearEnd","onEnterEnd","onLeaveEnd"].forEach(function(ft){var kt=qt[ft];qt[ft]=function(xt,Ct){return K(),kt==null?void 0:kt(xt,Ct)}});function Me(){return new Promise(function(ft){be.current=ft})}_.exports.useEffect(function(){!qt.motionName&&X==="motion"&&K()},[qt.motionName,X]),_.exports.useImperativeHandle(t,function(){return{forceAlign:Lt,getElement:function(){return C.current}}});var Qe=Re(Re({},O),{},{zIndex:s,opacity:X==="motion"||X==="stable"||!n?void 0:0,pointerEvents:!n&&X!=="stable"?"none":void 0},i),et=!0;(f==null?void 0:f.points)&&(X==="align"||X==="stable")&&(et=!1);var ve=o;return _.exports.Children.count(o)>1&&(ve=_.exports.createElement("div",{className:"".concat(r,"-content")},o)),_.exports.createElement(Qm,yt({visible:n,ref:C,leavedClassName:"".concat(r,"-hidden")},qt,{onAppearPrepare:Me,onEnterPrepare:Me,removeOnLeave:u,forceRender:c}),function(ft,kt){var xt=ft.className,Ct=ft.style,ht=Xt(r,a,j,xt);return _.exports.createElement(Nz,{target:ze(),key:"popup",ref:T,monitorWindowResize:!0,disabled:et,align:f,onAlign:Rt},_.exports.createElement("div",{ref:kt,className:ht,onMouseEnter:v,onMouseLeave:b,onMouseDownCapture:y,onTouchStartCapture:x,onClick:k,style:Re(Re({},Ct),Qe)},ve))})});Fz.displayName="PopupInner";var Dz=_.exports.forwardRef(function(e,t){var n=e.prefixCls,r=e.visible,a=e.zIndex,i=e.children,o=e.mobile;o=o===void 0?{}:o;var s=o.popupClassName,l=o.popupStyle,u=o.popupMotion,c=u===void 0?{}:u,f=o.popupRender,d=e.onClick,p=_.exports.useRef();_.exports.useImperativeHandle(t,function(){return{forceAlign:function(){},getElement:function(){return p.current}}});var h=Re({zIndex:a},l),g=i;return _.exports.Children.count(i)>1&&(g=_.exports.createElement("div",{className:"".concat(n,"-content")},i)),f&&(g=f(g)),_.exports.createElement(Qm,yt({visible:r,ref:p,removeOnLeave:!0},c),function(v,b){var y=v.className,x=v.style,k=Xt(n,s,y);return _.exports.createElement("div",{ref:b,className:k,onClick:d,style:Re(Re({},x),h)},g)})});Dz.displayName="MobilePopupInner";var A2e=["visible","mobile"],Bz=_.exports.forwardRef(function(e,t){var n=e.visible,r=e.mobile,a=Nn(e,A2e),i=_.exports.useState(n),o=Le(i,2),s=o[0],l=o[1],u=_.exports.useState(!1),c=Le(u,2),f=c[0],d=c[1],p=Re(Re({},a),{},{visible:s});_.exports.useEffect(function(){l(n),n&&r&&d(Ez())},[n,r]);var h=f?_.exports.createElement(Dz,yt({},p,{mobile:r,ref:t})):_.exports.createElement(Fz,yt({},p,{ref:t}));return _.exports.createElement("div",null,_.exports.createElement(Xke,p),h)});Bz.displayName="Popup";var CI=_.exports.createContext(null);function L_(){}function O2e(){return""}function M2e(e){return e?e.ownerDocument:window.document}var R2e=["onClick","onMouseDown","onTouchStart","onMouseEnter","onMouseLeave","onFocus","onBlur","onContextMenu"];function P2e(e){var t=function(n){Tt(a,n);var r=Yd(a);function a(i){var o;Ae(this,a),o=r.call(this,i),o.popupRef=_.exports.createRef(),o.triggerRef=_.exports.createRef(),o.portalContainer=void 0,o.attachId=void 0,o.clickOutsideHandler=void 0,o.touchOutsideHandler=void 0,o.contextMenuOutsideHandler1=void 0,o.contextMenuOutsideHandler2=void 0,o.mouseDownTimeout=void 0,o.focusTime=void 0,o.preClickTime=void 0,o.preTouchTime=void 0,o.delayTimer=void 0,o.hasPopupMouseDown=void 0,o.onMouseEnter=function(l){var u=o.props.mouseEnterDelay;o.fireEvents("onMouseEnter",l),o.delaySetPopupVisible(!0,u,u?null:l)},o.onMouseMove=function(l){o.fireEvents("onMouseMove",l),o.setPoint(l)},o.onMouseLeave=function(l){o.fireEvents("onMouseLeave",l),o.delaySetPopupVisible(!1,o.props.mouseLeaveDelay)},o.onPopupMouseEnter=function(){o.clearDelayTimer()},o.onPopupMouseLeave=function(l){var u;l.relatedTarget&&!l.relatedTarget.setTimeout&&iv((u=o.popupRef.current)===null||u===void 0?void 0:u.getElement(),l.relatedTarget)||o.delaySetPopupVisible(!1,o.props.mouseLeaveDelay)},o.onFocus=function(l){o.fireEvents("onFocus",l),o.clearDelayTimer(),o.isFocusToShow()&&(o.focusTime=Date.now(),o.delaySetPopupVisible(!0,o.props.focusDelay))},o.onMouseDown=function(l){o.fireEvents("onMouseDown",l),o.preClickTime=Date.now()},o.onTouchStart=function(l){o.fireEvents("onTouchStart",l),o.preTouchTime=Date.now()},o.onBlur=function(l){o.fireEvents("onBlur",l),o.clearDelayTimer(),o.isBlurToHide()&&o.delaySetPopupVisible(!1,o.props.blurDelay)},o.onContextMenu=function(l){l.preventDefault(),o.fireEvents("onContextMenu",l),o.setPopupVisible(!0,l)},o.onContextMenuClose=function(){o.isContextMenuToShow()&&o.close()},o.onClick=function(l){if(o.fireEvents("onClick",l),o.focusTime){var u;if(o.preClickTime&&o.preTouchTime?u=Math.min(o.preClickTime,o.preTouchTime):o.preClickTime?u=o.preClickTime:o.preTouchTime&&(u=o.preTouchTime),Math.abs(u-o.focusTime)<20)return;o.focusTime=0}o.preClickTime=0,o.preTouchTime=0,o.isClickToShow()&&(o.isClickToHide()||o.isBlurToHide())&&l&&l.preventDefault&&l.preventDefault();var c=!o.state.popupVisible;(o.isClickToHide()&&!c||c&&o.isClickToShow())&&o.setPopupVisible(!o.state.popupVisible,l)},o.onPopupMouseDown=function(){if(o.hasPopupMouseDown=!0,clearTimeout(o.mouseDownTimeout),o.mouseDownTimeout=window.setTimeout(function(){o.hasPopupMouseDown=!1},0),o.context){var l;(l=o.context).onPopupMouseDown.apply(l,arguments)}},o.onDocumentClick=function(l){if(!(o.props.mask&&!o.props.maskClosable)){var u=l.target,c=o.getRootDomNode(),f=o.getPopupDomNode();(!iv(c,u)||o.isContextMenuOnly())&&!iv(f,u)&&!o.hasPopupMouseDown&&o.close()}},o.getRootDomNode=function(){var l=o.props.getTriggerDOMNode;if(l)return l(o.triggerRef.current);try{var u=hb(o.triggerRef.current);if(u)return u}catch{}return nm.findDOMNode(D(o))},o.getPopupClassNameFromAlign=function(l){var u=[],c=o.props,f=c.popupPlacement,d=c.builtinPlacements,p=c.prefixCls,h=c.alignPoint,g=c.getPopupClassNameFromAlign;return f&&d&&u.push(Yke(d,p,l,h)),g&&u.push(g(l)),u.join(" ")},o.getComponent=function(){var l=o.props,u=l.prefixCls,c=l.destroyPopupOnHide,f=l.popupClassName,d=l.onPopupAlign,p=l.popupMotion,h=l.popupAnimation,g=l.popupTransitionName,v=l.popupStyle,b=l.mask,y=l.maskAnimation,x=l.maskTransitionName,k=l.maskMotion,T=l.zIndex,C=l.popup,I=l.stretch,P=l.alignPoint,j=l.mobile,A=l.forceRender,S=l.onPopupClick,M=o.state,O=M.popupVisible,R=M.point,G=o.getPopupAlign(),ee={};return o.isMouseEnterToShow()&&(ee.onMouseEnter=o.onPopupMouseEnter),o.isMouseLeaveToHide()&&(ee.onMouseLeave=o.onPopupMouseLeave),ee.onMouseDown=o.onPopupMouseDown,ee.onTouchStart=o.onPopupMouseDown,_.exports.createElement(Bz,yt({prefixCls:u,destroyPopupOnHide:c,visible:O,point:P&&R,className:f,align:G,onAlign:d,animation:h,getClassNameFromAlign:o.getPopupClassNameFromAlign},ee,{stretch:I,getRootDomNode:o.getRootDomNode,style:v,mask:b,zIndex:T,transitionName:g,maskAnimation:y,maskTransitionName:x,maskMotion:k,ref:o.popupRef,motion:p,mobile:j,forceRender:A,onClick:S}),typeof C=="function"?C():C)},o.attachParent=function(l){ur.cancel(o.attachId);var u=o.props,c=u.getPopupContainer,f=u.getDocument,d=o.getRootDomNode(),p;c?(d||c.length===0)&&(p=c(d)):p=f(o.getRootDomNode()).body,p?p.appendChild(l):o.attachId=ur(function(){o.attachParent(l)})},o.getContainer=function(){if(!o.portalContainer){var l=o.props.getDocument,u=l(o.getRootDomNode()).createElement("div");u.style.position="absolute",u.style.top="0",u.style.left="0",u.style.width="100%",o.portalContainer=u}return o.attachParent(o.portalContainer),o.portalContainer},o.setPoint=function(l){var u=o.props.alignPoint;!u||!l||o.setState({point:{pageX:l.pageX,pageY:l.pageY}})},o.handlePortalUpdate=function(){o.state.prevPopupVisible!==o.state.popupVisible&&o.props.afterPopupVisibleChange(o.state.popupVisible)},o.triggerContextValue={onPopupMouseDown:o.onPopupMouseDown};var s;return"popupVisible"in i?s=!!i.popupVisible:s=!!i.defaultPopupVisible,o.state={prevPopupVisible:s,popupVisible:s},R2e.forEach(function(l){o["fire".concat(l)]=function(u){o.fireEvents(l,u)}}),o}return Oe(a,[{key:"componentDidMount",value:function(){this.componentDidUpdate()}},{key:"componentDidUpdate",value:function(){var o=this.props,s=this.state;if(s.popupVisible){var l;!this.clickOutsideHandler&&(this.isClickToHide()||this.isContextMenuToShow())&&(l=o.getDocument(this.getRootDomNode()),this.clickOutsideHandler=gh(l,"mousedown",this.onDocumentClick)),this.touchOutsideHandler||(l=l||o.getDocument(this.getRootDomNode()),this.touchOutsideHandler=gh(l,"touchstart",this.onDocumentClick)),!this.contextMenuOutsideHandler1&&this.isContextMenuToShow()&&(l=l||o.getDocument(this.getRootDomNode()),this.contextMenuOutsideHandler1=gh(l,"scroll",this.onContextMenuClose)),!this.contextMenuOutsideHandler2&&this.isContextMenuToShow()&&(this.contextMenuOutsideHandler2=gh(window,"blur",this.onContextMenuClose));return}this.clearOutsideHandler()}},{key:"componentWillUnmount",value:function(){this.clearDelayTimer(),this.clearOutsideHandler(),clearTimeout(this.mouseDownTimeout),ur.cancel(this.attachId)}},{key:"getPopupDomNode",value:function(){var o;return((o=this.popupRef.current)===null||o===void 0?void 0:o.getElement())||null}},{key:"getPopupAlign",value:function(){var o=this.props,s=o.popupPlacement,l=o.popupAlign,u=o.builtinPlacements;return s&&u?Wke(u,s,l):l}},{key:"setPopupVisible",value:function(o,s){var l=this.props.alignPoint,u=this.state.popupVisible;this.clearDelayTimer(),u!==o&&("popupVisible"in this.props||this.setState({popupVisible:o,prevPopupVisible:u}),this.props.onPopupVisibleChange(o)),l&&s&&o&&this.setPoint(s)}},{key:"delaySetPopupVisible",value:function(o,s,l){var u=this,c=s*1e3;if(this.clearDelayTimer(),c){var f=l?{pageX:l.pageX,pageY:l.pageY}:null;this.delayTimer=window.setTimeout(function(){u.setPopupVisible(o,f),u.clearDelayTimer()},c)}else this.setPopupVisible(o,l)}},{key:"clearDelayTimer",value:function(){this.delayTimer&&(clearTimeout(this.delayTimer),this.delayTimer=null)}},{key:"clearOutsideHandler",value:function(){this.clickOutsideHandler&&(this.clickOutsideHandler.remove(),this.clickOutsideHandler=null),this.contextMenuOutsideHandler1&&(this.contextMenuOutsideHandler1.remove(),this.contextMenuOutsideHandler1=null),this.contextMenuOutsideHandler2&&(this.contextMenuOutsideHandler2.remove(),this.contextMenuOutsideHandler2=null),this.touchOutsideHandler&&(this.touchOutsideHandler.remove(),this.touchOutsideHandler=null)}},{key:"createTwoChains",value:function(o){var s=this.props.children.props,l=this.props;return s[o]&&l[o]?this["fire".concat(o)]:s[o]||l[o]}},{key:"isClickToShow",value:function(){var o=this.props,s=o.action,l=o.showAction;return s.indexOf("click")!==-1||l.indexOf("click")!==-1}},{key:"isContextMenuOnly",value:function(){var o=this.props.action;return o==="contextMenu"||o.length===1&&o[0]==="contextMenu"}},{key:"isContextMenuToShow",value:function(){var o=this.props,s=o.action,l=o.showAction;return s.indexOf("contextMenu")!==-1||l.indexOf("contextMenu")!==-1}},{key:"isClickToHide",value:function(){var o=this.props,s=o.action,l=o.hideAction;return s.indexOf("click")!==-1||l.indexOf("click")!==-1}},{key:"isMouseEnterToShow",value:function(){var o=this.props,s=o.action,l=o.showAction;return s.indexOf("hover")!==-1||l.indexOf("mouseEnter")!==-1}},{key:"isMouseLeaveToHide",value:function(){var o=this.props,s=o.action,l=o.hideAction;return s.indexOf("hover")!==-1||l.indexOf("mouseLeave")!==-1}},{key:"isFocusToShow",value:function(){var o=this.props,s=o.action,l=o.showAction;return s.indexOf("focus")!==-1||l.indexOf("focus")!==-1}},{key:"isBlurToHide",value:function(){var o=this.props,s=o.action,l=o.hideAction;return s.indexOf("focus")!==-1||l.indexOf("blur")!==-1}},{key:"forcePopupAlign",value:function(){if(this.state.popupVisible){var o;(o=this.popupRef.current)===null||o===void 0||o.forceAlign()}}},{key:"fireEvents",value:function(o,s){var l=this.props.children.props[o];l&&l(s);var u=this.props[o];u&&u(s)}},{key:"close",value:function(){this.setPopupVisible(!1)}},{key:"render",value:function(){var o=this.state.popupVisible,s=this.props,l=s.children,u=s.forceRender,c=s.alignPoint,f=s.className,d=s.autoDestroy,p=_.exports.Children.only(l),h={key:"trigger"};this.isContextMenuToShow()?h.onContextMenu=this.onContextMenu:h.onContextMenu=this.createTwoChains("onContextMenu"),this.isClickToHide()||this.isClickToShow()?(h.onClick=this.onClick,h.onMouseDown=this.onMouseDown,h.onTouchStart=this.onTouchStart):(h.onClick=this.createTwoChains("onClick"),h.onMouseDown=this.createTwoChains("onMouseDown"),h.onTouchStart=this.createTwoChains("onTouchStart")),this.isMouseEnterToShow()?(h.onMouseEnter=this.onMouseEnter,c&&(h.onMouseMove=this.onMouseMove)):h.onMouseEnter=this.createTwoChains("onMouseEnter"),this.isMouseLeaveToHide()?h.onMouseLeave=this.onMouseLeave:h.onMouseLeave=this.createTwoChains("onMouseLeave"),this.isFocusToShow()||this.isBlurToHide()?(h.onFocus=this.onFocus,h.onBlur=this.onBlur):(h.onFocus=this.createTwoChains("onFocus"),h.onBlur=this.createTwoChains("onBlur"));var g=Xt(p&&p.props&&p.props.className,f);g&&(h.className=g);var v=Re({},h);Iy(p)&&(v.ref=Zm(this.triggerRef,p.ref));var b=_.exports.cloneElement(p,v),y;return(o||this.popupRef.current||u)&&(y=_.exports.createElement(e,{key:"portal",getContainer:this.getContainer,didUpdate:this.handlePortalUpdate},this.getComponent())),!o&&d&&(y=null),_.exports.createElement(CI.Provider,{value:this.triggerContextValue},b,y)}}],[{key:"getDerivedStateFromProps",value:function(o,s){var l=o.popupVisible,u={};return l!==void 0&&s.popupVisible!==l&&(u.popupVisible=l,u.prevPopupVisible=s.popupVisible),u}}]),a}(_.exports.Component);return t.contextType=CI,t.defaultProps={prefixCls:"rc-trigger-popup",getPopupClassNameFromAlign:O2e,getDocument:M2e,onPopupVisibleChange:L_,afterPopupVisibleChange:L_,onPopupAlign:L_,popupClassName:"",mouseEnterDelay:0,mouseLeaveDelay:.1,focusDelay:0,blurDelay:.15,popupStyle:{},destroyPopupOnHide:!1,popupAlign:{},defaultPopupVisible:!1,mask:!1,maskClosable:!0,action:[],showAction:[],hideAction:[],autoDestroy:!1},t}var D3=P2e(Gke),I2e=["prefixCls","invalidate","item","renderItem","responsive","responsiveDisabled","registerSize","itemKey","className","style","children","display","order","component"],gf=void 0;function L2e(e,t){var n=e.prefixCls,r=e.invalidate,a=e.item,i=e.renderItem,o=e.responsive,s=e.responsiveDisabled,l=e.registerSize,u=e.itemKey,c=e.className,f=e.style,d=e.children,p=e.display,h=e.order,g=e.component,v=g===void 0?"div":g,b=Nn(e,I2e),y=o&&!p;function x(P){l(u,P)}_.exports.useEffect(function(){return function(){x(null)}},[]);var k=i&&a!==gf?i(a):d,T;r||(T={opacity:y?0:1,height:y?0:gf,overflowY:y?"hidden":gf,order:o?h:gf,pointerEvents:y?"none":gf,position:y?"absolute":gf});var C={};y&&(C["aria-hidden"]=!0);var I=_.exports.createElement(v,yt({className:Xt(!r&&n,c),style:Re(Re({},T),f)},C,b,{ref:t}),k);return o&&(I=_.exports.createElement(Em,{onResize:function(j){var A=j.offsetWidth;x(A)},disabled:s},I)),I}var Fh=_.exports.forwardRef(L2e);Fh.displayName="Item";function N2e(){var e=mc({}),t=Le(e,2),n=t[1],r=_.exports.useRef([]),a=0,i=0;function o(s){var l=a;a+=1,r.current.length<l+1&&(r.current[l]=s);var u=r.current[l];function c(f){r.current[l]=typeof f=="function"?f(r.current[l]):f,ur.cancel(i),i=ur(function(){n({},!0)})}return[u,c]}return o}var F2e=["component"],D2e=["className"],B2e=["className"],z2e=function(t,n){var r=_.exports.useContext(gb);if(!r){var a=t.component,i=a===void 0?"div":a,o=Nn(t,F2e);return _.exports.createElement(i,yt({},o,{ref:n}))}var s=r.className,l=Nn(r,D2e),u=t.className,c=Nn(t,B2e);return _.exports.createElement(gb.Provider,{value:null},_.exports.createElement(Fh,yt({ref:n,className:Xt(s,u)},l,c)))},zz=_.exports.forwardRef(z2e);zz.displayName="RawItem";var U2e=["prefixCls","data","renderItem","renderRawItem","itemKey","itemWidth","ssr","style","className","maxCount","renderRest","renderRawRest","suffix","component","itemComponent","onVisibleChange"],gb=_.exports.createContext(null),Uz="responsive",$z="invalidate";function $2e(e){return"+ ".concat(e.length," ...")}function V2e(e,t){var n=e.prefixCls,r=n===void 0?"rc-overflow":n,a=e.data,i=a===void 0?[]:a,o=e.renderItem,s=e.renderRawItem,l=e.itemKey,u=e.itemWidth,c=u===void 0?10:u,f=e.ssr,d=e.style,p=e.className,h=e.maxCount,g=e.renderRest,v=e.renderRawRest,b=e.suffix,y=e.component,x=y===void 0?"div":y,k=e.itemComponent,T=e.onVisibleChange,C=Nn(e,U2e),I=N2e(),P=f==="full",j=I(null),A=Le(j,2),S=A[0],M=A[1],O=S||0,R=I(new Map),G=Le(R,2),ee=G[0],re=G[1],X=I(0),K=Le(X,2),ae=K[0],le=K[1],ue=I(0),ge=Le(ue,2),be=ge[0],ze=ge[1],Lt=I(0),Rt=Le(Lt,2),qt=Rt[0],Me=Rt[1],Qe=_.exports.useState(null),et=Le(Qe,2),ve=et[0],ft=et[1],kt=_.exports.useState(null),xt=Le(kt,2),Ct=xt[0],ht=xt[1],Gt=_.exports.useMemo(function(){return Ct===null&&P?Number.MAX_SAFE_INTEGER:Ct||0},[Ct,S]),Ht=_.exports.useState(!1),yn=Le(Ht,2),or=yn[0],Qn=yn[1],mr="".concat(r,"-item"),E=Math.max(ae,be),Ce=h===Uz,Fe=i.length&&Ce,ut=h===$z,Et=Fe||typeof h=="number"&&i.length>h,Jt=_.exports.useMemo(function(){var en=i;return Fe?S===null&&P?en=i:en=i.slice(0,Math.min(i.length,O/c)):typeof h=="number"&&(en=i.slice(0,h)),en},[i,c,S,h,Fe]),At=_.exports.useMemo(function(){return Fe?i.slice(Gt+1):i.slice(Jt.length)},[i,Jt,Fe,Gt]),Nt=_.exports.useCallback(function(en,pn){var hn;return typeof l=="function"?l(en):(hn=l&&(en==null?void 0:en[l]))!==null&&hn!==void 0?hn:pn},[l]),Ot=_.exports.useCallback(o||function(en){return en},[o]);function Wt(en,pn){ht(en),pn||(Qn(en<i.length-1),T==null||T(en))}function $t(en,pn){M(pn.clientWidth)}function Pn(en,pn){re(function(hn){var Br=new Map(hn);return pn===null?Br.delete(en):Br.set(en,pn),Br})}function Yn(en,pn){ze(pn),le(be)}function Sa(en,pn){Me(pn)}function ti(en){return ee.get(Nt(Jt[en],en))}Rd(function(){if(O&&E&&Jt){var en=qt,pn=Jt.length,hn=pn-1;if(!pn){Wt(0),ft(null);return}for(var Br=0;Br<pn;Br+=1){var Ta=ti(Br);if(P&&(Ta=Ta||0),Ta===void 0){Wt(Br-1,!0);break}if(en+=Ta,hn===0&&en<=O||Br===hn-1&&en+ti(hn)<=O){Wt(hn),ft(null);break}else if(en+E>O){Wt(Br-1),ft(en-Ta-qt+be);break}}b&&ti(0)+qt>O&&ft(null)}},[O,ee,be,qt,Nt,Jt]);var Dr=or&&!!At.length,ni={};ve!==null&&Fe&&(ni={position:"absolute",left:ve,top:0});var jr={prefixCls:mr,responsive:Fe,component:k,invalidate:ut},mi=s?function(en,pn){var hn=Nt(en,pn);return _.exports.createElement(gb.Provider,{key:hn,value:Re(Re({},jr),{},{order:pn,item:en,itemKey:hn,registerSize:Pn,display:pn<=Gt})},s(en,pn))}:function(en,pn){var hn=Nt(en,pn);return _.exports.createElement(Fh,yt({},jr,{order:pn,key:hn,item:en,renderItem:Ot,itemKey:hn,registerSize:Pn,display:pn<=Gt}))},Ua,Ti={order:Dr?Gt:Number.MAX_SAFE_INTEGER,className:"".concat(mr,"-rest"),registerSize:Yn,display:Dr};if(v)v&&(Ua=_.exports.createElement(gb.Provider,{value:Re(Re({},jr),Ti)},v(At)));else{var Ca=g||$2e;Ua=_.exports.createElement(Fh,yt({},jr,Ti),typeof Ca=="function"?Ca(At):Ca)}var Gr=_.exports.createElement(x,yt({className:Xt(!ut&&r,p),style:d,ref:t},C),Jt.map(mi),Et?Ua:null,b&&_.exports.createElement(Fh,yt({},jr,{responsive:Ce,responsiveDisabled:!Fe,order:Gt,className:"".concat(mr,"-suffix"),registerSize:Sa,display:!0,style:ni}),b));return Ce&&(Gr=_.exports.createElement(Em,{onResize:$t,disabled:!Fe},Gr)),Gr}var ll=_.exports.forwardRef(V2e);ll.displayName="Overflow";ll.Item=zz;ll.RESPONSIVE=Uz;ll.INVALIDATE=$z;var qd=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return n};qd("bottomLeft","bottomRight","topLeft","topRight");var j2e=function(t,n,r){return r!==void 0?r:"".concat(t,"-").concat(n)},lo={adjustX:1,adjustY:1},uo=[0,0],Vz={left:{points:["cr","cl"],overflow:lo,offset:[-4,0],targetOffset:uo},right:{points:["cl","cr"],overflow:lo,offset:[4,0],targetOffset:uo},top:{points:["bc","tc"],overflow:lo,offset:[0,-4],targetOffset:uo},bottom:{points:["tc","bc"],overflow:lo,offset:[0,4],targetOffset:uo},topLeft:{points:["bl","tl"],overflow:lo,offset:[0,-4],targetOffset:uo},leftTop:{points:["tr","tl"],overflow:lo,offset:[-4,0],targetOffset:uo},topRight:{points:["br","tr"],overflow:lo,offset:[0,-4],targetOffset:uo},rightTop:{points:["tl","tr"],overflow:lo,offset:[4,0],targetOffset:uo},bottomRight:{points:["tr","br"],overflow:lo,offset:[0,4],targetOffset:uo},rightBottom:{points:["bl","br"],overflow:lo,offset:[4,0],targetOffset:uo},bottomLeft:{points:["tl","bl"],overflow:lo,offset:[0,4],targetOffset:uo},leftBottom:{points:["br","bl"],overflow:lo,offset:[-4,0],targetOffset:uo}},G2e=function(t){var n=t.overlay,r=t.prefixCls,a=t.id,i=t.overlayInnerStyle;return _.exports.createElement("div",{className:"".concat(r,"-inner"),id:a,role:"tooltip",style:i},typeof n=="function"?n():n)},H2e=function(t,n){var r=t.overlayClassName,a=t.trigger,i=a===void 0?["hover"]:a,o=t.mouseEnterDelay,s=o===void 0?0:o,l=t.mouseLeaveDelay,u=l===void 0?.1:l,c=t.overlayStyle,f=t.prefixCls,d=f===void 0?"rc-tooltip":f,p=t.children,h=t.onVisibleChange,g=t.afterVisibleChange,v=t.transitionName,b=t.animation,y=t.motion,x=t.placement,k=x===void 0?"right":x,T=t.align,C=T===void 0?{}:T,I=t.destroyTooltipOnHide,P=I===void 0?!1:I,j=t.defaultVisible,A=t.getTooltipContainer,S=t.overlayInnerStyle,M=Nn(t,["overlayClassName","trigger","mouseEnterDelay","mouseLeaveDelay","overlayStyle","prefixCls","children","onVisibleChange","afterVisibleChange","transitionName","animation","motion","placement","align","destroyTooltipOnHide","defaultVisible","getTooltipContainer","overlayInnerStyle"]),O=_.exports.useRef(null);_.exports.useImperativeHandle(n,function(){return O.current});var R=Re({},M);"visible"in t&&(R.popupVisible=t.visible);var G=function(){var ae=t.arrowContent,le=ae===void 0?null:ae,ue=t.overlay,ge=t.id;return[_.exports.createElement("div",{className:"".concat(d,"-arrow"),key:"arrow"},le),_.exports.createElement(G2e,{key:"content",prefixCls:d,id:ge,overlay:ue,overlayInnerStyle:S})]},ee=!1,re=!1;if(typeof P=="boolean")ee=P;else if(P&&hr(P)==="object"){var X=P.keepParent;ee=X===!0,re=X===!1}return _.exports.createElement(D3,yt({popupClassName:r,prefixCls:d,popup:G,action:i,builtinPlacements:Vz,popupPlacement:k,ref:O,popupAlign:C,getPopupContainer:A,onPopupVisibleChange:h,afterPopupVisibleChange:g,popupTransitionName:v,popupAnimation:b,popupMotion:y,defaultPopupVisible:j,destroyPopupOnHide:ee,autoDestroy:re,mouseLeaveDelay:u,popupStyle:c,mouseEnterDelay:s},R),p)},W2e=_.exports.forwardRef(H2e);qd("success","processing","error","default","warning");var Y2e=qd("pink","red","yellow","orange","cyan","green","blue","purple","geekblue","magenta","volcano","gold","lime"),X2e={adjustX:1,adjustY:1},TI={adjustX:0,adjustY:0},Z2e=[0,0];function AI(e){return typeof e=="boolean"?e?X2e:TI:yt(yt({},TI),e)}function q2e(e){var t=e.arrowWidth,n=t===void 0?4:t,r=e.horizontalArrowShift,a=r===void 0?16:r,i=e.verticalArrowShift,o=i===void 0?8:i,s=e.autoAdjustOverflow,l=e.arrowPointAtCenter,u={left:{points:["cr","cl"],offset:[-4,0]},right:{points:["cl","cr"],offset:[4,0]},top:{points:["bc","tc"],offset:[0,-4]},bottom:{points:["tc","bc"],offset:[0,4]},topLeft:{points:["bl","tc"],offset:[-(a+n),-4]},leftTop:{points:["tr","cl"],offset:[-4,-(o+n)]},topRight:{points:["br","tc"],offset:[a+n,-4]},rightTop:{points:["tl","cr"],offset:[4,-(o+n)]},bottomRight:{points:["tr","bc"],offset:[a+n,4]},rightBottom:{points:["bl","cr"],offset:[4,o+n]},bottomLeft:{points:["tl","bc"],offset:[-(a+n),4]},leftBottom:{points:["br","cl"],offset:[-4,o+n]}};return Object.keys(u).forEach(function(c){u[c]=l?yt(yt({},u[c]),{overflow:AI(s),targetOffset:Z2e}):yt(yt({},Vz[c]),{overflow:AI(s)}),u[c].ignoreShake=!0}),u}var K2e=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]]);return n},Q2e=function(t,n){var r={},a=yt({},t);return n.forEach(function(i){t&&i in t&&(r[i]=t[i],delete a[i])}),{picked:r,omitted:a}},OI=new RegExp("^(".concat(Y2e.join("|"),")(-inverse)?$"));function J2e(e,t){var n=e.type;if((n.__ANT_BUTTON===!0||e.type==="button")&&e.props.disabled||n.__ANT_SWITCH===!0&&(e.props.disabled||e.props.loading)){var r=Q2e(e.props.style,["position","left","right","top","bottom","float","display","zIndex"]),a=r.picked,i=r.omitted,o=yt(yt({display:"inline-block"},a),{cursor:"not-allowed",width:e.props.block?"100%":null}),s=yt(yt({},i),{pointerEvents:"none"}),l=Dy(e,{style:s,className:null});return _.exports.createElement("span",{style:o,className:Xt(e.props.className,"".concat(t,"-disabled-compatible-wrapper"))},l)}return e}var jz=_.exports.forwardRef(function(e,t){var n,r=_.exports.useContext(Yi),a=r.getPopupContainer,i=r.getPrefixCls,o=r.direction,s=cu(!1,{value:e.visible,defaultValue:e.defaultVisible}),l=Le(s,2),u=l[0],c=l[1],f=function(){var K=e.title,ae=e.overlay;return!K&&!ae&&K!==0},d=function(K){var ae;c(f()?!1:K),f()||(ae=e.onVisibleChange)===null||ae===void 0||ae.call(e,K)},p=function(){var K=e.builtinPlacements,ae=e.arrowPointAtCenter,le=e.autoAdjustOverflow;return K||q2e({arrowPointAtCenter:ae,autoAdjustOverflow:le})},h=function(K,ae){var le=p(),ue=Object.keys(le).find(function(ze){return le[ze].points[0]===ae.points[0]&&le[ze].points[1]===ae.points[1]});if(!!ue){var ge=K.getBoundingClientRect(),be={top:"50%",left:"50%"};ue.indexOf("top")>=0||ue.indexOf("Bottom")>=0?be.top="".concat(ge.height-ae.offset[1],"px"):(ue.indexOf("Top")>=0||ue.indexOf("bottom")>=0)&&(be.top="".concat(-ae.offset[1],"px")),ue.indexOf("left")>=0||ue.indexOf("Right")>=0?be.left="".concat(ge.width-ae.offset[0],"px"):(ue.indexOf("right")>=0||ue.indexOf("Left")>=0)&&(be.left="".concat(-ae.offset[0],"px")),K.style.transformOrigin="".concat(be.left," ").concat(be.top)}},g=function(){var K=e.title,ae=e.overlay;return K===0?K:ae||K||""},v=e.getPopupContainer,b=K2e(e,["getPopupContainer"]),y=e.prefixCls,x=e.openClassName,k=e.getTooltipContainer,T=e.overlayClassName,C=e.color,I=e.overlayInnerStyle,P=e.children,j=i("tooltip",y),A=i(),S=u;!("visible"in e)&&f()&&(S=!1);var M=J2e(kz(P)?P:_.exports.createElement("span",null,P),j),O=M.props,R=Xt(O.className,m({},x||"".concat(j,"-open"),!0)),G=Xt(T,(n={},m(n,"".concat(j,"-rtl"),o==="rtl"),m(n,"".concat(j,"-").concat(C),C&&OI.test(C)),n)),ee=I,re;return C&&!OI.test(C)&&(ee=yt(yt({},I),{background:C}),re={"--antd-arrow-background-color":C}),_.exports.createElement(W2e,yt({},b,{prefixCls:j,overlayClassName:G,getTooltipContainer:v||k||a,ref:t,builtinPlacements:p(),overlay:g(),visible:S,onVisibleChange:d,onPopupAlign:h,overlayInnerStyle:ee,arrowContent:_.exports.createElement("span",{className:"".concat(j,"-arrow-content"),style:re}),motion:{motionName:j2e(A,"zoom-big-fast",e.transitionName),motionDeadline:1e3}}),S?Dy(M,{className:R}):M)});jz.defaultProps={placement:"top",mouseEnterDelay:.1,mouseLeaveDelay:.1,arrowPointAtCenter:!1,autoAdjustOverflow:!0};var eEe=jz,tEe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M176 511a56 56 0 10112 0 56 56 0 10-112 0zm280 0a56 56 0 10112 0 56 56 0 10-112 0zm280 0a56 56 0 10112 0 56 56 0 10-112 0z"}}]},name:"ellipsis",theme:"outlined"},nEe=tEe,Gz=function(t,n){return _.exports.createElement(Zd,Re(Re({},t),{},{ref:n,icon:nEe}))};Gz.displayName="EllipsisOutlined";var rEe=_.exports.forwardRef(Gz),B3=function(t,n,r,a){var i=r?r.call(a,t,n):void 0;if(i!==void 0)return!!i;if(t===n)return!0;if(typeof t!="object"||!t||typeof n!="object"||!n)return!1;var o=Object.keys(t),s=Object.keys(n);if(o.length!==s.length)return!1;for(var l=Object.prototype.hasOwnProperty.bind(n),u=0;u<o.length;u++){var c=o[u];if(!l(c))return!1;var f=t[c],d=n[c];if(i=r?r.call(a,f,d,c):void 0,i===!1||i===void 0&&f!==d)return!1}return!0},aEe=["children","locked"],Ko=_.exports.createContext(null);function iEe(e,t){var n=Re({},e);return Object.keys(t).forEach(function(r){var a=t[r];a!==void 0&&(n[r]=a)}),n}function Tm(e){var t=e.children,n=e.locked,r=Nn(e,aEe),a=_.exports.useContext(Ko),i=$_e(function(){return iEe(a,r)},[a,r],function(o,s){return!n&&(o[0]!==s[0]||!B3(o[1],s[1]))});return _.exports.createElement(Ko.Provider,{value:i},t)}function Hz(e,t,n,r){var a=_.exports.useContext(Ko),i=a.activeKey,o=a.onActive,s=a.onInactive,l={active:i===e};return t||(l.onMouseEnter=function(u){n==null||n({key:e,domEvent:u}),o(e)},l.onMouseLeave=function(u){r==null||r({key:e,domEvent:u}),s(e)}),l}var oEe=["item"];function vb(e){var t=e.item,n=Nn(e,oEe);return Object.defineProperty(n,"item",{get:function(){return Yo(!1,"`info.item` is deprecated since we will move to function component that not provides React Node instance in future."),t}}),n}function Wz(e){var t=e.icon,n=e.props,r=e.children,a;return typeof t=="function"?a=_.exports.createElement(t,Re({},n)):a=t,a||r||null}function Yz(e){var t=_.exports.useContext(Ko),n=t.mode,r=t.rtl,a=t.inlineIndent;if(n!=="inline")return null;var i=e;return r?{paddingRight:i*a}:{paddingLeft:i*a}}var sEe=[],Xz=_.exports.createContext(null);function zy(){return _.exports.useContext(Xz)}var Zz=_.exports.createContext(sEe);function e0(e){var t=_.exports.useContext(Zz);return _.exports.useMemo(function(){return e!==void 0?[].concat($e(t),[e]):t},[t,e])}var qz=_.exports.createContext(null),Kz=_.exports.createContext(null);function z3(e,t){return e===void 0?null:"".concat(e,"-").concat(t)}function Qz(e){var t=_.exports.useContext(Kz);return z3(t,e)}var U3=_.exports.createContext({}),lEe=["title","attribute","elementRef"],uEe=["style","className","eventKey","warnKey","disabled","itemIcon","children","role","onMouseEnter","onMouseLeave","onClick","onKeyDown","onFocus"],cEe=["active"],fEe=function(e){Tt(n,e);var t=Yd(n);function n(){return Ae(this,n),t.apply(this,arguments)}return Oe(n,[{key:"render",value:function(){var a=this.props,i=a.title,o=a.attribute,s=a.elementRef,l=Nn(a,lEe),u=Nc(l,["eventKey"]);return Yo(!o,"`attribute` of Menu.Item is deprecated. Please pass attribute directly."),_.exports.createElement(ll.Item,yt({},o,{title:typeof i=="string"?i:void 0},u,{ref:s}))}}]),n}(_.exports.Component),dEe=function(t){var n,r=t.style,a=t.className,i=t.eventKey;t.warnKey;var o=t.disabled,s=t.itemIcon,l=t.children,u=t.role,c=t.onMouseEnter,f=t.onMouseLeave,d=t.onClick,p=t.onKeyDown,h=t.onFocus,g=Nn(t,uEe),v=Qz(i),b=_.exports.useContext(Ko),y=b.prefixCls,x=b.onItemClick,k=b.disabled,T=b.overflowDisabled,C=b.itemIcon,I=b.selectedKeys,P=b.onActive,j=_.exports.useContext(U3),A=j._internalRenderMenuItem,S="".concat(y,"-item"),M=_.exports.useRef(),O=_.exports.useRef(),R=k||o,G=e0(i),ee=function(Me){return{key:i,keyPath:$e(G).reverse(),item:M.current,domEvent:Me}},re=s||C,X=Hz(i,R,c,f),K=X.active,ae=Nn(X,cEe),le=I.includes(i),ue=Yz(G.length),ge=function(Me){if(!R){var Qe=ee(Me);d==null||d(vb(Qe)),x(Qe)}},be=function(Me){if(p==null||p(Me),Me.which===St.ENTER){var Qe=ee(Me);d==null||d(vb(Qe)),x(Qe)}},ze=function(Me){P(i),h==null||h(Me)},Lt={};t.role==="option"&&(Lt["aria-selected"]=le);var Rt=_.exports.createElement(fEe,yt({ref:M,elementRef:O,role:u===null?"none":u||"menuitem",tabIndex:o?null:-1,"data-menu-id":T&&v?null:v},g,ae,Lt,{component:"li","aria-disabled":o,style:Re(Re({},ue),r),className:Xt(S,(n={},m(n,"".concat(S,"-active"),K),m(n,"".concat(S,"-selected"),le),m(n,"".concat(S,"-disabled"),R),n),a),onClick:ge,onKeyDown:be,onFocus:ze}),l,_.exports.createElement(Wz,{props:Re(Re({},t),{},{isSelected:le}),icon:re}));return A&&(Rt=A(Rt,t,{selected:le})),Rt};function Uy(e){var t=e.eventKey,n=zy(),r=e0(t);return _.exports.useEffect(function(){if(n)return n.registerPath(t,r),function(){n.unregisterPath(t,r)}},[r]),n?null:_.exports.createElement(dEe,e)}var pEe=["label","children","key","type"];function $3(e,t){return Od(e).map(function(n,r){if(_.exports.isValidElement(n)){var a,i,o=n.key,s=(a=(i=n.props)===null||i===void 0?void 0:i.eventKey)!==null&&a!==void 0?a:o,l=s==null;l&&(s="tmp_key-".concat([].concat($e(t),[r]).join("-")));var u={key:s,eventKey:s};return _.exports.cloneElement(n,u)}return n})}function Jk(e){return(e||[]).map(function(t,n){if(t&&hr(t)==="object"){var r=t.label,a=t.children,i=t.key,o=t.type,s=Nn(t,pEe),l=i!=null?i:"tmp-".concat(n);return a||o==="group"?o==="group"?_.exports.createElement(rU,yt({key:l},s,{title:r}),Jk(a)):_.exports.createElement(j3,yt({key:l},s,{title:r}),Jk(a)):o==="divider"?_.exports.createElement(aU,yt({key:l},s)):_.exports.createElement(Uy,yt({key:l},s),r)}return null}).filter(function(t){return t})}function hEe(e,t,n){var r=e;return t&&(r=Jk(t)),$3(r,n)}function Sf(e){var t=_.exports.useRef(e);t.current=e;var n=_.exports.useCallback(function(){for(var r,a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return(r=t.current)===null||r===void 0?void 0:r.call.apply(r,[t].concat(i))},[]);return e?n:void 0}var mEe=["className","children"],gEe=function(t,n){var r=t.className,a=t.children,i=Nn(t,mEe),o=_.exports.useContext(Ko),s=o.prefixCls,l=o.mode,u=o.rtl;return _.exports.createElement("ul",yt({className:Xt(s,u&&"".concat(s,"-rtl"),"".concat(s,"-sub"),"".concat(s,"-").concat(l==="inline"?"inline":"vertical"),r)},i,{"data-menu-list":!0,ref:n}),a)},V3=_.exports.forwardRef(gEe);V3.displayName="SubMenuList";var Jl={adjustX:1,adjustY:1},vEe={topLeft:{points:["bl","tl"],overflow:Jl,offset:[0,-7]},bottomLeft:{points:["tl","bl"],overflow:Jl,offset:[0,7]},leftTop:{points:["tr","tl"],overflow:Jl,offset:[-4,0]},rightTop:{points:["tl","tr"],overflow:Jl,offset:[4,0]}},bEe={topLeft:{points:["bl","tl"],overflow:Jl,offset:[0,-7]},bottomLeft:{points:["tl","bl"],overflow:Jl,offset:[0,7]},rightTop:{points:["tr","tl"],overflow:Jl,offset:[-4,0]},leftTop:{points:["tl","tr"],overflow:Jl,offset:[4,0]}};function Jz(e,t,n){if(t)return t;if(n)return n[e]||n.other}var yEe={horizontal:"bottomLeft",vertical:"rightTop","vertical-left":"rightTop","vertical-right":"leftTop"};function xEe(e){var t=e.prefixCls,n=e.visible,r=e.children,a=e.popup,i=e.popupClassName,o=e.popupOffset,s=e.disabled,l=e.mode,u=e.onVisibleChange,c=_.exports.useContext(Ko),f=c.getPopupContainer,d=c.rtl,p=c.subMenuOpenDelay,h=c.subMenuCloseDelay,g=c.builtinPlacements,v=c.triggerSubMenuAction,b=c.forceSubMenuRender,y=c.rootClassName,x=c.motion,k=c.defaultMotions,T=_.exports.useState(!1),C=Le(T,2),I=C[0],P=C[1],j=Re(d?Re({},bEe):Re({},vEe),g),A=yEe[l],S=Jz(l,x,k),M=Re(Re({},S),{},{leavedClassName:"".concat(t,"-hidden"),removeOnLeave:!1,motionAppear:!0}),O=_.exports.useRef();return _.exports.useEffect(function(){return O.current=ur(function(){P(n)}),function(){ur.cancel(O.current)}},[n]),_.exports.createElement(D3,{prefixCls:t,popupClassName:Xt("".concat(t,"-popup"),m({},"".concat(t,"-rtl"),d),i,y),stretch:l==="horizontal"?"minWidth":null,getPopupContainer:f,builtinPlacements:j,popupPlacement:A,popupVisible:I,popup:a,popupAlign:o&&{offset:o},action:s?[]:[v],mouseEnterDelay:p,mouseLeaveDelay:h,onPopupVisibleChange:u,forceRender:b,popupMotion:M},r)}function _Ee(e){var t=e.id,n=e.open,r=e.keyPath,a=e.children,i="inline",o=_.exports.useContext(Ko),s=o.prefixCls,l=o.forceSubMenuRender,u=o.motion,c=o.defaultMotions,f=o.mode,d=_.exports.useRef(!1);d.current=f===i;var p=_.exports.useState(!d.current),h=Le(p,2),g=h[0],v=h[1],b=d.current?n:!1;_.exports.useEffect(function(){d.current&&v(!1)},[f]);var y=Re({},Jz(i,u,c));r.length>1&&(y.motionAppear=!1);var x=y.onVisibleChanged;return y.onVisibleChanged=function(k){return!d.current&&!k&&v(!0),x==null?void 0:x(k)},g?null:_.exports.createElement(Tm,{mode:i,locked:!d.current},_.exports.createElement(Qm,yt({visible:b},y,{forceRender:l,removeOnLeave:!1,leavedClassName:"".concat(s,"-hidden")}),function(k){var T=k.className,C=k.style;return _.exports.createElement(V3,{id:t,className:T,style:C},a)}))}var wEe=["style","className","title","eventKey","warnKey","disabled","internalPopupClose","children","itemIcon","expandIcon","popupClassName","popupOffset","onClick","onMouseEnter","onMouseLeave","onTitleClick","onTitleMouseEnter","onTitleMouseLeave"],kEe=["active"],EEe=function(t){var n,r=t.style,a=t.className,i=t.title,o=t.eventKey;t.warnKey;var s=t.disabled,l=t.internalPopupClose,u=t.children,c=t.itemIcon,f=t.expandIcon,d=t.popupClassName,p=t.popupOffset,h=t.onClick,g=t.onMouseEnter,v=t.onMouseLeave,b=t.onTitleClick,y=t.onTitleMouseEnter,x=t.onTitleMouseLeave,k=Nn(t,wEe),T=Qz(o),C=_.exports.useContext(Ko),I=C.prefixCls,P=C.mode,j=C.openKeys,A=C.disabled,S=C.overflowDisabled,M=C.activeKey,O=C.selectedKeys,R=C.itemIcon,G=C.expandIcon,ee=C.onItemClick,re=C.onOpenChange,X=C.onActive,K=_.exports.useContext(U3),ae=K._internalRenderSubMenuItem,le=_.exports.useContext(qz),ue=le.isSubPathKey,ge=e0(),be="".concat(I,"-submenu"),ze=A||s,Lt=_.exports.useRef(),Rt=_.exports.useRef(),qt=c||R,Me=f||G,Qe=j.includes(o),et=!S&&Qe,ve=ue(O,o),ft=Hz(o,ze,y,x),kt=ft.active,xt=Nn(ft,kEe),Ct=_.exports.useState(!1),ht=Le(Ct,2),Gt=ht[0],Ht=ht[1],yn=function(Pn){ze||Ht(Pn)},or=function(Pn){yn(!0),g==null||g({key:o,domEvent:Pn})},Qn=function(Pn){yn(!1),v==null||v({key:o,domEvent:Pn})},mr=_.exports.useMemo(function(){return kt||(P!=="inline"?Gt||ue([M],o):!1)},[P,kt,M,Gt,o,ue]),E=Yz(ge.length),Ce=function(Pn){ze||(b==null||b({key:o,domEvent:Pn}),P==="inline"&&re(o,!Qe))},Fe=Sf(function($t){h==null||h(vb($t)),ee($t)}),ut=function(Pn){P!=="inline"&&re(o,Pn)},Et=function(){X(o)},Jt=T&&"".concat(T,"-popup"),At=_.exports.createElement("div",yt({role:"menuitem",style:E,className:"".concat(be,"-title"),tabIndex:ze?null:-1,ref:Lt,title:typeof i=="string"?i:null,"data-menu-id":S&&T?null:T,"aria-expanded":et,"aria-haspopup":!0,"aria-controls":Jt,"aria-disabled":ze,onClick:Ce,onFocus:Et},xt),i,_.exports.createElement(Wz,{icon:P!=="horizontal"?Me:null,props:Re(Re({},t),{},{isOpen:et,isSubMenu:!0})},_.exports.createElement("i",{className:"".concat(be,"-arrow")}))),Nt=_.exports.useRef(P);if(P!=="inline"&&(Nt.current=ge.length>1?"vertical":P),!S){var Ot=Nt.current;At=_.exports.createElement(xEe,{mode:Ot,prefixCls:be,visible:!l&&et&&P!=="inline",popupClassName:d,popupOffset:p,popup:_.exports.createElement(Tm,{mode:Ot==="horizontal"?"vertical":Ot},_.exports.createElement(V3,{id:Jt,ref:Rt},u)),disabled:ze,onVisibleChange:ut},At)}var Wt=_.exports.createElement(ll.Item,yt({role:"none"},k,{component:"li",style:r,className:Xt(be,"".concat(be,"-").concat(P),a,(n={},m(n,"".concat(be,"-open"),et),m(n,"".concat(be,"-active"),mr),m(n,"".concat(be,"-selected"),ve),m(n,"".concat(be,"-disabled"),ze),n)),onMouseEnter:or,onMouseLeave:Qn}),At,!S&&_.exports.createElement(_Ee,{id:Jt,open:et,keyPath:ge},u));return ae&&(Wt=ae(Wt,t,{selected:ve,active:mr,open:et,disabled:ze})),_.exports.createElement(Tm,{onItemClick:Fe,mode:P==="horizontal"?"vertical":P,itemIcon:qt,expandIcon:Me},Wt)};function j3(e){var t=e.eventKey,n=e.children,r=e0(t),a=$3(n,r),i=zy();_.exports.useEffect(function(){if(i)return i.registerPath(t,r),function(){i.unregisterPath(t,r)}},[r]);var o;return i?o=a:o=_.exports.createElement(EEe,e,a),_.exports.createElement(Zz.Provider,{value:r},o)}function MI(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(Cz(e)){var n=e.nodeName.toLowerCase(),r=["input","select","textarea","button"].includes(n)||e.isContentEditable||n==="a"&&!!e.getAttribute("href"),a=e.getAttribute("tabindex"),i=Number(a),o=null;return a&&!Number.isNaN(i)?o=i:r&&o===null&&(o=0),r&&e.disabled&&(o=null),o!==null&&(o>=0||t&&o<0)}return!1}function eU(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,n=$e(e.querySelectorAll("*")).filter(function(r){return MI(r,t)});return MI(e,t)&&n.unshift(e),n}var e2=St.LEFT,t2=St.RIGHT,n2=St.UP,sv=St.DOWN,lv=St.ENTER,tU=St.ESC,eh=St.HOME,th=St.END,RI=[n2,sv,e2,t2];function SEe(e,t,n,r){var a,i,o,s,l="prev",u="next",c="children",f="parent";if(e==="inline"&&r===lv)return{inlineTrigger:!0};var d=(a={},m(a,n2,l),m(a,sv,u),a),p=(i={},m(i,e2,n?u:l),m(i,t2,n?l:u),m(i,sv,c),m(i,lv,c),i),h=(o={},m(o,n2,l),m(o,sv,u),m(o,lv,c),m(o,tU,f),m(o,e2,n?c:f),m(o,t2,n?f:c),o),g={inline:d,horizontal:p,vertical:h,inlineSub:d,horizontalSub:h,verticalSub:h},v=(s=g["".concat(e).concat(t?"":"Sub")])===null||s===void 0?void 0:s[r];switch(v){case l:return{offset:-1,sibling:!0};case u:return{offset:1,sibling:!0};case f:return{offset:-1,sibling:!1};case c:return{offset:1,sibling:!1};default:return null}}function CEe(e){for(var t=e;t;){if(t.getAttribute("data-menu-list"))return t;t=t.parentElement}return null}function TEe(e,t){for(var n=e||document.activeElement;n;){if(t.has(n))return n;n=n.parentElement}return null}function nU(e,t){var n=eU(e,!0);return n.filter(function(r){return t.has(r)})}function PI(e,t,n){var r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1;if(!e)return null;var a=nU(e,t),i=a.length,o=a.findIndex(function(s){return n===s});return r<0?o===-1?o=i-1:o-=1:r>0&&(o+=1),o=(o+i)%i,a[o]}function AEe(e,t,n,r,a,i,o,s,l,u){var c=_.exports.useRef(),f=_.exports.useRef();f.current=t;var d=function(){ur.cancel(c.current)};return _.exports.useEffect(function(){return function(){d()}},[]),function(p){var h=p.which;if([].concat(RI,[lv,tU,eh,th]).includes(h)){var g,v,b,y=function(){g=new Set,v=new Map,b=new Map;var G=i();return G.forEach(function(ee){var re=document.querySelector("[data-menu-id='".concat(z3(r,ee),"']"));re&&(g.add(re),b.set(re,ee),v.set(ee,re))}),g};y();var x=v.get(t),k=TEe(x,g),T=b.get(k),C=SEe(e,o(T,!0).length===1,n,h);if(!C&&h!==eh&&h!==th)return;(RI.includes(h)||[eh,th].includes(h))&&p.preventDefault();var I=function(G){if(G){var ee=G,re=G.querySelector("a");re!=null&&re.getAttribute("href")&&(ee=re);var X=b.get(G);s(X),d(),c.current=ur(function(){f.current===X&&ee.focus()})}};if([eh,th].includes(h)||C.sibling||!k){var P;!k||e==="inline"?P=a.current:P=CEe(k);var j,A=nU(P,g);h===eh?j=A[0]:h===th?j=A[A.length-1]:j=PI(P,g,k,C.offset),I(j)}else if(C.inlineTrigger)l(T);else if(C.offset>0)l(T,!0),d(),c.current=ur(function(){y();var R=k.getAttribute("aria-controls"),G=document.getElementById(R),ee=PI(G,g);I(ee)},5);else if(C.offset<0){var S=o(T,!0),M=S[S.length-2],O=v.get(M);l(M,!1),I(O)}}u==null||u(p)}}var OEe=Math.random().toFixed(5).toString().slice(2),II=0;function MEe(e){var t=cu(e,{value:e}),n=Le(t,2),r=n[0],a=n[1];return _.exports.useEffect(function(){II+=1;var i="".concat(OEe,"-").concat(II);a("rc-menu-uuid-".concat(i))},[]),r}function REe(e){Promise.resolve().then(e)}var G3="__RC_UTIL_PATH_SPLIT__",LI=function(t){return t.join(G3)},PEe=function(t){return t.split(G3)},r2="rc-menu-more";function IEe(){var e=_.exports.useState({}),t=Le(e,2),n=t[1],r=_.exports.useRef(new Map),a=_.exports.useRef(new Map),i=_.exports.useState([]),o=Le(i,2),s=o[0],l=o[1],u=_.exports.useRef(0),c=_.exports.useRef(!1),f=function(){c.current||n({})},d=_.exports.useCallback(function(x,k){var T=LI(k);a.current.set(T,x),r.current.set(x,T),u.current+=1;var C=u.current;REe(function(){C===u.current&&f()})},[]),p=_.exports.useCallback(function(x,k){var T=LI(k);a.current.delete(T),r.current.delete(x)},[]),h=_.exports.useCallback(function(x){l(x)},[]),g=_.exports.useCallback(function(x,k){var T=r.current.get(x)||"",C=PEe(T);return k&&s.includes(C[0])&&C.unshift(r2),C},[s]),v=_.exports.useCallback(function(x,k){return x.some(function(T){var C=g(T,!0);return C.includes(k)})},[g]),b=function(){var k=$e(r.current.keys());return s.length&&k.push(r2),k},y=_.exports.useCallback(function(x){var k="".concat(r.current.get(x)).concat(G3),T=new Set;return $e(a.current.keys()).forEach(function(C){C.startsWith(k)&&T.add(a.current.get(C))}),T},[]);return _.exports.useEffect(function(){return function(){c.current=!0}},[]),{registerPath:d,unregisterPath:p,refreshOverflowKeys:h,isSubPathKey:v,getKeyPath:g,getKeys:b,getSubPathKeys:y}}var LEe=["prefixCls","rootClassName","style","className","tabIndex","items","children","direction","id","mode","inlineCollapsed","disabled","disabledOverflow","subMenuOpenDelay","subMenuCloseDelay","forceSubMenuRender","defaultOpenKeys","openKeys","activeKey","defaultActiveFirst","selectable","multiple","defaultSelectedKeys","selectedKeys","onSelect","onDeselect","inlineIndent","motion","defaultMotions","triggerSubMenuAction","builtinPlacements","itemIcon","expandIcon","overflowedIndicator","overflowedIndicatorPopupClassName","getPopupContainer","onClick","onOpenChange","onKeyDown","openAnimation","openTransitionName","_internalRenderMenuItem","_internalRenderSubMenuItem"],vf=[],NEe=_.exports.forwardRef(function(e,t){var n,r,a=e.prefixCls,i=a===void 0?"rc-menu":a,o=e.rootClassName,s=e.style,l=e.className,u=e.tabIndex,c=u===void 0?0:u,f=e.items,d=e.children,p=e.direction,h=e.id,g=e.mode,v=g===void 0?"vertical":g,b=e.inlineCollapsed,y=e.disabled,x=e.disabledOverflow,k=e.subMenuOpenDelay,T=k===void 0?.1:k,C=e.subMenuCloseDelay,I=C===void 0?.1:C,P=e.forceSubMenuRender,j=e.defaultOpenKeys,A=e.openKeys,S=e.activeKey,M=e.defaultActiveFirst,O=e.selectable,R=O===void 0?!0:O,G=e.multiple,ee=G===void 0?!1:G,re=e.defaultSelectedKeys,X=e.selectedKeys,K=e.onSelect,ae=e.onDeselect,le=e.inlineIndent,ue=le===void 0?24:le,ge=e.motion,be=e.defaultMotions,ze=e.triggerSubMenuAction,Lt=ze===void 0?"hover":ze,Rt=e.builtinPlacements,qt=e.itemIcon,Me=e.expandIcon,Qe=e.overflowedIndicator,et=Qe===void 0?"...":Qe,ve=e.overflowedIndicatorPopupClassName,ft=e.getPopupContainer,kt=e.onClick,xt=e.onOpenChange,Ct=e.onKeyDown;e.openAnimation,e.openTransitionName;var ht=e._internalRenderMenuItem,Gt=e._internalRenderSubMenuItem,Ht=Nn(e,LEe),yn=_.exports.useMemo(function(){return hEe(d,f,vf)},[d,f]),or=_.exports.useState(!1),Qn=Le(or,2),mr=Qn[0],E=Qn[1],Ce=_.exports.useRef(),Fe=MEe(h),ut=p==="rtl",Et=_.exports.useMemo(function(){return(v==="inline"||v==="vertical")&&b?["vertical",b]:[v,!1]},[v,b]),Jt=Le(Et,2),At=Jt[0],Nt=Jt[1],Ot=_.exports.useState(0),Wt=Le(Ot,2),$t=Wt[0],Pn=Wt[1],Yn=$t>=yn.length-1||At!=="horizontal"||x,Sa=cu(j,{value:A,postState:function(xn){return xn||vf}}),ti=Le(Sa,2),Dr=ti[0],ni=ti[1],jr=function(xn){ni(xn),xt==null||xt(xn)},mi=_.exports.useState(Dr),Ua=Le(mi,2),Ti=Ua[0],Ca=Ua[1],Gr=At==="inline",en=_.exports.useRef(!1);_.exports.useEffect(function(){Gr&&Ca(Dr)},[Dr]),_.exports.useEffect(function(){if(!en.current){en.current=!0;return}Gr?ni(Ti):jr(vf)},[Gr]);var pn=IEe(),hn=pn.registerPath,Br=pn.unregisterPath,Ta=pn.refreshOverflowKeys,Oo=pn.isSubPathKey,Mo=pn.getKeyPath,Zi=pn.getKeys,ar=pn.getSubPathKeys,mn=_.exports.useMemo(function(){return{registerPath:hn,unregisterPath:Br}},[hn,Br]),nn=_.exports.useMemo(function(){return{isSubPathKey:Oo}},[Oo]);_.exports.useEffect(function(){Ta(Yn?vf:yn.slice($t+1).map(function(An){return An.key}))},[$t,Yn]);var Zn=cu(S||M&&((n=yn[0])===null||n===void 0?void 0:n.key),{value:S}),Dn=Le(Zn,2),gn=Dn[0],oa=Dn[1],sa=Sf(function(An){oa(An)}),ri=Sf(function(){oa(void 0)});_.exports.useImperativeHandle(t,function(){return{list:Ce.current,focus:function(xn){var zn,qn=gn!=null?gn:(zn=yn.find(function(wl){return!wl.props.disabled}))===null||zn===void 0?void 0:zn.key;if(qn){var gr,Qi,rs;(gr=Ce.current)===null||gr===void 0||(Qi=gr.querySelector("li[data-menu-id='".concat(z3(Fe,qn),"']")))===null||Qi===void 0||(rs=Qi.focus)===null||rs===void 0||rs.call(Qi,xn)}}}});var qi=cu(re||[],{value:X,postState:function(xn){return Array.isArray(xn)?xn:xn==null?vf:[xn]}}),En=Le(qi,2),on=En[0],Bn=En[1],zr=function(xn){if(R){var zn=xn.key,qn=on.includes(zn),gr;ee?qn?gr=on.filter(function(rs){return rs!==zn}):gr=[].concat($e(on),[zn]):gr=[zn],Bn(gr);var Qi=Re(Re({},xn),{},{selectedKeys:gr});qn?ae==null||ae(Qi):K==null||K(Qi)}!ee&&Dr.length&&At!=="inline"&&jr(vf)},Aa=Sf(function(An){kt==null||kt(vb(An)),zr(An)}),ai=Sf(function(An,xn){var zn=Dr.filter(function(gr){return gr!==An});if(xn)zn.push(An);else if(At!=="inline"){var qn=ar(An);zn=zn.filter(function(gr){return!qn.has(gr)})}B3(Dr,zn)||jr(zn)}),Ro=Sf(ft),Tu=function(xn,zn){var qn=zn!=null?zn:!Dr.includes(xn);ai(xn,qn)},_l=AEe(At,gn,ut,Fe,Ce,Zi,Mo,oa,Tu,Ct);_.exports.useEffect(function(){E(!0)},[]);var Po=_.exports.useMemo(function(){return{_internalRenderMenuItem:ht,_internalRenderSubMenuItem:Gt}},[ht,Gt]),va=At!=="horizontal"||x?yn:yn.map(function(An,xn){return _.exports.createElement(Tm,{key:An.key,overflowDisabled:xn>$t},An)}),Ki=_.exports.createElement(ll,yt({id:h,ref:Ce,prefixCls:"".concat(i,"-overflow"),component:"ul",itemComponent:Uy,className:Xt(i,"".concat(i,"-root"),"".concat(i,"-").concat(At),l,(r={},m(r,"".concat(i,"-inline-collapsed"),Nt),m(r,"".concat(i,"-rtl"),ut),r),o),dir:p,style:s,role:"menu",tabIndex:c,data:va,renderRawItem:function(xn){return xn},renderRawRest:function(xn){var zn=xn.length,qn=zn?yn.slice(-zn):null;return _.exports.createElement(j3,{eventKey:r2,title:et,disabled:Yn,internalPopupClose:zn===0,popupClassName:ve},qn)},maxCount:At!=="horizontal"||x?ll.INVALIDATE:ll.RESPONSIVE,ssr:"full","data-menu-list":!0,onVisibleChange:function(xn){Pn(xn)},onKeyDown:_l},Ht));return _.exports.createElement(U3.Provider,{value:Po},_.exports.createElement(Kz.Provider,{value:Fe},_.exports.createElement(Tm,{prefixCls:i,rootClassName:o,mode:At,openKeys:Dr,rtl:ut,disabled:y,motion:mr?ge:null,defaultMotions:mr?be:null,activeKey:gn,onActive:sa,onInactive:ri,selectedKeys:on,inlineIndent:ue,subMenuOpenDelay:T,subMenuCloseDelay:I,forceSubMenuRender:P,builtinPlacements:Rt,triggerSubMenuAction:Lt,getPopupContainer:Ro,itemIcon:qt,expandIcon:Me,onItemClick:Aa,onOpenChange:ai},_.exports.createElement(qz.Provider,{value:nn},Ki),_.exports.createElement("div",{style:{display:"none"},"aria-hidden":!0},_.exports.createElement(Xz.Provider,{value:mn},yn)))))}),FEe=["className","title","eventKey","children"],DEe=["children"],BEe=function(t){var n=t.className,r=t.title;t.eventKey;var a=t.children,i=Nn(t,FEe),o=_.exports.useContext(Ko),s=o.prefixCls,l="".concat(s,"-item-group");return _.exports.createElement("li",yt({},i,{onClick:function(c){return c.stopPropagation()},className:Xt(l,n)}),_.exports.createElement("div",{className:"".concat(l,"-title"),title:typeof r=="string"?r:void 0},r),_.exports.createElement("ul",{className:"".concat(l,"-list")},a))};function rU(e){var t=e.children,n=Nn(e,DEe),r=e0(n.eventKey),a=$3(t,r),i=zy();return i?a:_.exports.createElement(BEe,Nc(n,["warnKey"]),a)}function aU(e){var t=e.className,n=e.style,r=_.exports.useContext(Ko),a=r.prefixCls,i=zy();return i?null:_.exports.createElement("li",{className:Xt("".concat(a,"-item-divider"),t),style:n})}var t0=NEe;t0.Item=Uy;t0.SubMenu=j3;t0.ItemGroup=rU;t0.Divider=aU;var bf={adjustX:1,adjustY:1},yf=[0,0],zEe={topLeft:{points:["bl","tl"],overflow:bf,offset:[0,-4],targetOffset:yf},topCenter:{points:["bc","tc"],overflow:bf,offset:[0,-4],targetOffset:yf},topRight:{points:["br","tr"],overflow:bf,offset:[0,-4],targetOffset:yf},bottomLeft:{points:["tl","bl"],overflow:bf,offset:[0,4],targetOffset:yf},bottomCenter:{points:["tc","bc"],overflow:bf,offset:[0,4],targetOffset:yf},bottomRight:{points:["tr","br"],overflow:bf,offset:[0,4],targetOffset:yf}},UEe=St.ESC,$Ee=St.TAB;function VEe(e){var t=e.visible,n=e.setTriggerVisible,r=e.triggerRef,a=e.onVisibleChange,i=e.autoFocus,o=_.exports.useRef(!1),s=function(){if(t&&r.current){var f,d,p,h;(f=r.current)===null||f===void 0||(d=f.triggerRef)===null||d===void 0||(p=d.current)===null||p===void 0||(h=p.focus)===null||h===void 0||h.call(p),n(!1),typeof a=="function"&&a(!1)}},l=function(){var f,d,p,h,g=eU((f=r.current)===null||f===void 0||(d=f.popupRef)===null||d===void 0||(p=d.current)===null||p===void 0||(h=p.getElement)===null||h===void 0?void 0:h.call(p)),v=g[0];return v!=null&&v.focus?(v.focus(),o.current=!0,!0):!1},u=function(f){switch(f.keyCode){case UEe:s();break;case $Ee:{var d=!1;o.current||(d=l()),d?f.preventDefault():s();break}}};_.exports.useEffect(function(){return t?(window.addEventListener("keydown",u),i&&ur(l,3),function(){window.removeEventListener("keydown",u),o.current=!1}):function(){o.current=!1}},[t])}var jEe=["arrow","prefixCls","transitionName","animation","align","placement","placements","getPopupContainer","showAction","hideAction","overlayClassName","overlayStyle","visible","trigger","autoFocus"];function GEe(e,t){var n=e.arrow,r=n===void 0?!1:n,a=e.prefixCls,i=a===void 0?"rc-dropdown":a,o=e.transitionName,s=e.animation,l=e.align,u=e.placement,c=u===void 0?"bottomLeft":u,f=e.placements,d=f===void 0?zEe:f,p=e.getPopupContainer,h=e.showAction,g=e.hideAction,v=e.overlayClassName,b=e.overlayStyle,y=e.visible,x=e.trigger,k=x===void 0?["hover"]:x,T=e.autoFocus,C=Nn(e,jEe),I=_.exports.useState(),P=Le(I,2),j=P[0],A=P[1],S="visible"in e?y:j,M=_.exports.useRef(null);_.exports.useImperativeHandle(t,function(){return M.current}),VEe({visible:S,setTriggerVisible:A,triggerRef:M,onVisibleChange:e.onVisibleChange,autoFocus:T});var O=function(){var ge=e.overlay,be;return typeof ge=="function"?be=ge():be=ge,be},R=function(ge){var be=e.onOverlayClick;A(!1),be&&be(ge)},G=function(ge){var be=e.onVisibleChange;A(ge),typeof be=="function"&&be(ge)},ee=function(){var ge=O();return _.exports.createElement(_.exports.Fragment,null,r&&_.exports.createElement("div",{className:"".concat(i,"-arrow")}),ge)},re=function(){var ge=e.overlay;return typeof ge=="function"?ee:ee()},X=function(){var ge=e.minOverlayWidthMatchTrigger,be=e.alignPoint;return"minOverlayWidthMatchTrigger"in e?ge:!be},K=function(){var ge=e.openClassName;return ge!==void 0?ge:"".concat(i,"-open")},ae=function(){var ge=e.children,be=ge.props?ge.props:{},ze=Xt(be.className,K());return S&&ge?_.exports.cloneElement(ge,{className:ze}):ge},le=g;return!le&&k.indexOf("contextMenu")!==-1&&(le=["click"]),_.exports.createElement(D3,Re(Re({builtinPlacements:d},C),{},{prefixCls:i,ref:M,popupClassName:Xt(v,m({},"".concat(i,"-show-arrow"),r)),popupStyle:b,action:k,showAction:h,hideAction:le||[],popupPlacement:c,popupAlign:l,popupTransitionName:o,popupAnimation:s,popupVisible:S,stretch:X()?"minWidth":"",popup:re(),onPopupVisibleChange:G,onPopupClick:R,getPopupContainer:p}),ae())}var HEe=_.exports.forwardRef(GEe),WEe=0,od={};function bb(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,n=WEe++,r=t;function a(){r-=1,r<=0?(e(),delete od[n]):od[n]=ur(a)}return od[n]=ur(a),n}bb.cancel=function(t){t!==void 0&&(ur.cancel(od[t]),delete od[t])};bb.ids=od;var N_;function NI(e){return!e||e.offsetParent===null||e.hidden}function YEe(e){var t=(e||"").match(/rgba?\((\d*), (\d*), (\d*)(, [\d.]*)?\)/);return t&&t[1]&&t[2]&&t[3]?!(t[1]===t[2]&&t[2]===t[3]):!0}var iU=function(e){Tt(n,e);var t=Yd(n);function n(){var r;return Ae(this,n),r=t.apply(this,arguments),r.containerRef=_.exports.createRef(),r.animationStart=!1,r.destroyed=!1,r.onClick=function(a,i){var o,s,l=r.props,u=l.insertExtraNode,c=l.disabled;if(!(c||!a||NI(a)||a.className.indexOf("-leave")>=0)){r.extraNode=document.createElement("div");var f=D(r),d=f.extraNode,p=r.context.getPrefixCls;d.className="".concat(p(""),"-click-animating-node");var h=r.getAttributeName();if(a.setAttribute(h,"true"),i&&i!=="#ffffff"&&i!=="rgb(255, 255, 255)"&&YEe(i)&&!/rgba\((?:\d*, ){3}0\)/.test(i)&&i!=="transparent"){d.style.borderColor=i;var g=((o=a.getRootNode)===null||o===void 0?void 0:o.call(a))||a.ownerDocument,v=g instanceof Document?g.body:(s=g.firstChild)!==null&&s!==void 0?s:g;N_=sz(`
      [`.concat(p(""),"-click-animating-without-extra-node='true']::after, .").concat(p(""),`-click-animating-node {
        --antd-wave-shadow-color: `).concat(i,`;
      }`),"antd-wave",{csp:r.csp,attachTo:v})}u&&a.appendChild(d),["transition","animation"].forEach(function(b){a.addEventListener("".concat(b,"start"),r.onTransitionStart),a.addEventListener("".concat(b,"end"),r.onTransitionEnd)})}},r.onTransitionStart=function(a){if(!r.destroyed){var i=r.containerRef.current;!a||a.target!==i||r.animationStart||r.resetEffect(i)}},r.onTransitionEnd=function(a){!a||a.animationName!=="fadeEffect"||r.resetEffect(a.target)},r.bindAnimationEvent=function(a){if(!(!a||!a.getAttribute||a.getAttribute("disabled")||a.className.indexOf("disabled")>=0)){var i=function(s){if(!(s.target.tagName==="INPUT"||NI(s.target))){r.resetEffect(a);var l=getComputedStyle(a).getPropertyValue("border-top-color")||getComputedStyle(a).getPropertyValue("border-color")||getComputedStyle(a).getPropertyValue("background-color");r.clickWaveTimeoutId=window.setTimeout(function(){return r.onClick(a,l)},0),bb.cancel(r.animationStartId),r.animationStart=!0,r.animationStartId=bb(function(){r.animationStart=!1},10)}};return a.addEventListener("click",i,!0),{cancel:function(){a.removeEventListener("click",i,!0)}}}},r.renderWave=function(a){var i=a.csp,o=r.props.children;if(r.csp=i,!_.exports.isValidElement(o))return o;var s=r.containerRef;return Iy(o)&&(s=Zm(o.ref,r.containerRef)),Dy(o,{ref:s})},r}return Oe(n,[{key:"componentDidMount",value:function(){this.destroyed=!1;var a=this.containerRef.current;!a||a.nodeType!==1||(this.instance=this.bindAnimationEvent(a))}},{key:"componentWillUnmount",value:function(){this.instance&&this.instance.cancel(),this.clickWaveTimeoutId&&clearTimeout(this.clickWaveTimeoutId),this.destroyed=!0}},{key:"getAttributeName",value:function(){var a=this.context.getPrefixCls,i=this.props.insertExtraNode;return i?"".concat(a(""),"-click-animating"):"".concat(a(""),"-click-animating-without-extra-node")}},{key:"resetEffect",value:function(a){var i=this;if(!(!a||a===this.extraNode||!(a instanceof Element))){var o=this.props.insertExtraNode,s=this.getAttributeName();a.setAttribute(s,"false"),N_&&(N_.innerHTML=""),o&&this.extraNode&&a.contains(this.extraNode)&&a.removeChild(this.extraNode),["transition","animation"].forEach(function(l){a.removeEventListener("".concat(l,"start"),i.onTransitionStart),a.removeEventListener("".concat(l,"end"),i.onTransitionEnd)})}}},{key:"render",value:function(){return _.exports.createElement(M3,null,this.renderWave)}}]),n}(_.exports.Component);iU.contextType=Yi;var XEe=_.exports.forwardRef(function(e,t){return _.exports.createElement(iU,yt({ref:t},e))}),ZEe=XEe,qEe=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]]);return n},oU=_.exports.createContext(void 0),KEe=function(t){var n,r=_.exports.useContext(Yi),a=r.getPrefixCls,i=r.direction,o=t.prefixCls,s=t.size,l=t.className,u=qEe(t,["prefixCls","size","className"]),c=a("btn-group",o),f="";switch(s){case"large":f="lg";break;case"small":f="sm";break}var d=Xt(c,(n={},m(n,"".concat(c,"-").concat(f),f),m(n,"".concat(c,"-rtl"),i==="rtl"),n),l);return _.exports.createElement(oU.Provider,{value:s},_.exports.createElement("div",yt({},u,{className:d})))},QEe=KEe,F_=function(){return{width:0,opacity:0,transform:"scale(0)"}},D_=function(t){return{width:t.scrollWidth,opacity:1,transform:"scale(1)"}},JEe=function(t){var n=t.prefixCls,r=t.loading,a=t.existIcon,i=!!r;return a?dr.createElement("span",{className:"".concat(n,"-loading-icon")},dr.createElement(J8,null)):dr.createElement(Qm,{visible:i,motionName:"".concat(n,"-loading-icon-motion"),removeOnLeave:!0,onAppearStart:F_,onAppearActive:D_,onEnterStart:F_,onEnterActive:D_,onLeaveStart:D_,onLeaveActive:F_},function(o,s){var l=o.className,u=o.style;return dr.createElement("span",{className:"".concat(n,"-loading-icon"),style:u,ref:s},dr.createElement(J8,{className:l}))})},e3e=JEe,t3e=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]]);return n},FI=/^[\u4e00-\u9fa5]{2}$/,a2=FI.test.bind(FI);function n3e(e){return typeof e=="string"}function B_(e){return e==="text"||e==="link"}function r3e(e){return _.exports.isValidElement(e)&&e.type===_.exports.Fragment}function a3e(e,t){if(e!=null){var n=t?" ":"";return typeof e!="string"&&typeof e!="number"&&n3e(e.type)&&a2(e.props.children)?Dy(e,{children:e.props.children.split("").join(n)}):typeof e=="string"?a2(e)?_.exports.createElement("span",null,e.split("").join(n)):_.exports.createElement("span",null,e):r3e(e)?_.exports.createElement("span",null,e):e}}function i3e(e,t){var n=!1,r=[];return _.exports.Children.forEach(e,function(a){var i=hr(a),o=i==="string"||i==="number";if(n&&o){var s=r.length-1,l=r[s];r[s]="".concat(l).concat(a)}else r.push(a);n=o}),_.exports.Children.map(r,function(a){return a3e(a,t)})}qd("default","primary","ghost","dashed","link","text");qd("default","circle","round");qd("submit","button","reset");var o3e=function(t,n){var r,a=t.loading,i=a===void 0?!1:a,o=t.prefixCls,s=t.type,l=s===void 0?"default":s,u=t.danger,c=t.shape,f=c===void 0?"default":c,d=t.size,p=t.disabled,h=t.className,g=t.children,v=t.icon,b=t.ghost,y=b===void 0?!1:b,x=t.block,k=x===void 0?!1:x,T=t.htmlType,C=T===void 0?"button":T,I=t3e(t,["loading","prefixCls","type","danger","shape","size","disabled","className","children","icon","ghost","block","htmlType"]),P=_.exports.useContext(R3),j=_.exports.useContext(Uke),A=p||j,S=_.exports.useContext(oU),M=_.exports.useState(!!i),O=Le(M,2),R=O[0],G=O[1],ee=_.exports.useState(!1),re=Le(ee,2),X=re[0],K=re[1],ae=_.exports.useContext(Yi),le=ae.getPrefixCls,ue=ae.autoInsertSpaceInButton,ge=ae.direction,be=n||_.exports.createRef(),ze=function(){return _.exports.Children.count(g)===1&&!v&&!B_(l)},Lt=function(){if(!(!be||!be.current||ue===!1)){var or=be.current.textContent;ze()&&a2(or)?X||K(!0):X&&K(!1)}},Rt=typeof i=="boolean"?i:(i==null?void 0:i.delay)||!0;_.exports.useEffect(function(){var yn=null;return typeof Rt=="number"?yn=window.setTimeout(function(){yn=null,G(Rt)},Rt):G(Rt),function(){yn&&(window.clearTimeout(yn),yn=null)}},[Rt]),_.exports.useEffect(Lt,[be]);var qt=function(or){var Qn=t.onClick;if(R||A){or.preventDefault();return}Qn==null||Qn(or)},Me=le("btn",o),Qe=ue!==!1,et={large:"lg",small:"sm",middle:void 0},ve=S||d||P,ft=ve&&et[ve]||"",kt=R?"loading":v,xt=Nc(I,["navigate"]),Ct=Xt(Me,(r={},m(r,"".concat(Me,"-").concat(f),f!=="default"&&f),m(r,"".concat(Me,"-").concat(l),l),m(r,"".concat(Me,"-").concat(ft),ft),m(r,"".concat(Me,"-icon-only"),!g&&g!==0&&!!kt),m(r,"".concat(Me,"-background-ghost"),y&&!B_(l)),m(r,"".concat(Me,"-loading"),R),m(r,"".concat(Me,"-two-chinese-chars"),X&&Qe&&!R),m(r,"".concat(Me,"-block"),k),m(r,"".concat(Me,"-dangerous"),!!u),m(r,"".concat(Me,"-rtl"),ge==="rtl"),m(r,"".concat(Me,"-disabled"),xt.href!==void 0&&A),r),h),ht=v&&!R?v:_.exports.createElement(e3e,{existIcon:!!v,prefixCls:Me,loading:!!R}),Gt=g||g===0?i3e(g,ze()&&Qe):null;if(xt.href!==void 0)return _.exports.createElement("a",yt({},xt,{className:Ct,onClick:qt,ref:be}),ht,Gt);var Ht=_.exports.createElement("button",yt({},I,{type:C,className:Ct,onClick:qt,disabled:A,ref:be}),ht,Gt);return B_(l)?Ht:_.exports.createElement(ZEe,{disabled:!!R},Ht)},H3=_.exports.forwardRef(o3e);H3.Group=QEe;H3.__ANT_BUTTON=!0;var s3e=H3;//! moment.js
//! version : 2.29.3
//! authors : Tim Wood, Iskren Chernev, Moment.js contributors
//! license : MIT
//! momentjs.com
var sU;function Mt(){return sU.apply(null,arguments)}function l3e(e){sU=e}function Qo(e){return e instanceof Array||Object.prototype.toString.call(e)==="[object Array]"}function gc(e){return e!=null&&Object.prototype.toString.call(e)==="[object Object]"}function Gn(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function W3(e){if(Object.getOwnPropertyNames)return Object.getOwnPropertyNames(e).length===0;var t;for(t in e)if(Gn(e,t))return!1;return!0}function _i(e){return e===void 0}function hl(e){return typeof e=="number"||Object.prototype.toString.call(e)==="[object Number]"}function n0(e){return e instanceof Date||Object.prototype.toString.call(e)==="[object Date]"}function lU(e,t){var n=[],r,a=e.length;for(r=0;r<a;++r)n.push(t(e[r],r));return n}function eu(e,t){for(var n in t)Gn(t,n)&&(e[n]=t[n]);return Gn(t,"toString")&&(e.toString=t.toString),Gn(t,"valueOf")&&(e.valueOf=t.valueOf),e}function Ps(e,t,n,r){return PU(e,t,n,r,!0).utc()}function u3e(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidEra:null,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],era:null,meridiem:null,rfc2822:!1,weekdayMismatch:!1}}function wn(e){return e._pf==null&&(e._pf=u3e()),e._pf}var i2;Array.prototype.some?i2=Array.prototype.some:i2=function(e){var t=Object(this),n=t.length>>>0,r;for(r=0;r<n;r++)if(r in t&&e.call(this,t[r],r,t))return!0;return!1};function Y3(e){if(e._isValid==null){var t=wn(e),n=i2.call(t.parsedDateParts,function(a){return a!=null}),r=!isNaN(e._d.getTime())&&t.overflow<0&&!t.empty&&!t.invalidEra&&!t.invalidMonth&&!t.invalidWeekday&&!t.weekdayMismatch&&!t.nullInput&&!t.invalidFormat&&!t.userInvalidated&&(!t.meridiem||t.meridiem&&n);if(e._strict&&(r=r&&t.charsLeftOver===0&&t.unusedTokens.length===0&&t.bigHour===void 0),Object.isFrozen==null||!Object.isFrozen(e))e._isValid=r;else return r}return e._isValid}function $y(e){var t=Ps(NaN);return e!=null?eu(wn(t),e):wn(t).userInvalidated=!0,t}var DI=Mt.momentProperties=[],z_=!1;function X3(e,t){var n,r,a,i=DI.length;if(_i(t._isAMomentObject)||(e._isAMomentObject=t._isAMomentObject),_i(t._i)||(e._i=t._i),_i(t._f)||(e._f=t._f),_i(t._l)||(e._l=t._l),_i(t._strict)||(e._strict=t._strict),_i(t._tzm)||(e._tzm=t._tzm),_i(t._isUTC)||(e._isUTC=t._isUTC),_i(t._offset)||(e._offset=t._offset),_i(t._pf)||(e._pf=wn(t)),_i(t._locale)||(e._locale=t._locale),i>0)for(n=0;n<i;n++)r=DI[n],a=t[r],_i(a)||(e[r]=a);return e}function r0(e){X3(this,e),this._d=new Date(e._d!=null?e._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),z_===!1&&(z_=!0,Mt.updateOffset(this),z_=!1)}function Jo(e){return e instanceof r0||e!=null&&e._isAMomentObject!=null}function uU(e){Mt.suppressDeprecationWarnings===!1&&typeof console!="undefined"&&console.warn&&console.warn("Deprecation warning: "+e)}function To(e,t){var n=!0;return eu(function(){if(Mt.deprecationHandler!=null&&Mt.deprecationHandler(null,e),n){var r=[],a,i,o,s=arguments.length;for(i=0;i<s;i++){if(a="",typeof arguments[i]=="object"){a+=`
[`+i+"] ";for(o in arguments[0])Gn(arguments[0],o)&&(a+=o+": "+arguments[0][o]+", ");a=a.slice(0,-2)}else a=arguments[i];r.push(a)}uU(e+`
Arguments: `+Array.prototype.slice.call(r).join("")+`
`+new Error().stack),n=!1}return t.apply(this,arguments)},t)}var BI={};function cU(e,t){Mt.deprecationHandler!=null&&Mt.deprecationHandler(e,t),BI[e]||(uU(t),BI[e]=!0)}Mt.suppressDeprecationWarnings=!1;Mt.deprecationHandler=null;function Is(e){return typeof Function!="undefined"&&e instanceof Function||Object.prototype.toString.call(e)==="[object Function]"}function c3e(e){var t,n;for(n in e)Gn(e,n)&&(t=e[n],Is(t)?this[n]=t:this["_"+n]=t);this._config=e,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)}function o2(e,t){var n=eu({},e),r;for(r in t)Gn(t,r)&&(gc(e[r])&&gc(t[r])?(n[r]={},eu(n[r],e[r]),eu(n[r],t[r])):t[r]!=null?n[r]=t[r]:delete n[r]);for(r in e)Gn(e,r)&&!Gn(t,r)&&gc(e[r])&&(n[r]=eu({},n[r]));return n}function Z3(e){e!=null&&this.set(e)}var s2;Object.keys?s2=Object.keys:s2=function(e){var t,n=[];for(t in e)Gn(e,t)&&n.push(t);return n};var f3e={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"};function d3e(e,t,n){var r=this._calendar[e]||this._calendar.sameElse;return Is(r)?r.call(t,n):r}function Os(e,t,n){var r=""+Math.abs(e),a=t-r.length,i=e>=0;return(i?n?"+":"":"-")+Math.pow(10,Math.max(0,a)).toString().substr(1)+r}var q3=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,Ig=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,U_={},sd={};function Zt(e,t,n,r){var a=r;typeof r=="string"&&(a=function(){return this[r]()}),e&&(sd[e]=a),t&&(sd[t[0]]=function(){return Os(a.apply(this,arguments),t[1],t[2])}),n&&(sd[n]=function(){return this.localeData().ordinal(a.apply(this,arguments),e)})}function p3e(e){return e.match(/\[[\s\S]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,"")}function h3e(e){var t=e.match(q3),n,r;for(n=0,r=t.length;n<r;n++)sd[t[n]]?t[n]=sd[t[n]]:t[n]=p3e(t[n]);return function(a){var i="",o;for(o=0;o<r;o++)i+=Is(t[o])?t[o].call(a,e):t[o];return i}}function uv(e,t){return e.isValid()?(t=fU(t,e.localeData()),U_[t]=U_[t]||h3e(t),U_[t](e)):e.localeData().invalidDate()}function fU(e,t){var n=5;function r(a){return t.longDateFormat(a)||a}for(Ig.lastIndex=0;n>=0&&Ig.test(e);)e=e.replace(Ig,r),Ig.lastIndex=0,n-=1;return e}var m3e={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};function g3e(e){var t=this._longDateFormat[e],n=this._longDateFormat[e.toUpperCase()];return t||!n?t:(this._longDateFormat[e]=n.match(q3).map(function(r){return r==="MMMM"||r==="MM"||r==="DD"||r==="dddd"?r.slice(1):r}).join(""),this._longDateFormat[e])}var v3e="Invalid date";function b3e(){return this._invalidDate}var y3e="%d",x3e=/\d{1,2}/;function _3e(e){return this._ordinal.replace("%d",e)}var w3e={future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",w:"a week",ww:"%d weeks",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function k3e(e,t,n,r){var a=this._relativeTime[n];return Is(a)?a(e,t,n,r):a.replace(/%d/i,e)}function E3e(e,t){var n=this._relativeTime[e>0?"future":"past"];return Is(n)?n(t):n.replace(/%s/i,t)}var Dh={};function Ja(e,t){var n=e.toLowerCase();Dh[n]=Dh[n+"s"]=Dh[t]=e}function Ao(e){return typeof e=="string"?Dh[e]||Dh[e.toLowerCase()]:void 0}function K3(e){var t={},n,r;for(r in e)Gn(e,r)&&(n=Ao(r),n&&(t[n]=e[r]));return t}var dU={};function ei(e,t){dU[e]=t}function S3e(e){var t=[],n;for(n in e)Gn(e,n)&&t.push({unit:n,priority:dU[n]});return t.sort(function(r,a){return r.priority-a.priority}),t}function Vy(e){return e%4===0&&e%100!==0||e%400===0}function go(e){return e<0?Math.ceil(e)||0:Math.floor(e)}function Tn(e){var t=+e,n=0;return t!==0&&isFinite(t)&&(n=go(t)),n}function Kd(e,t){return function(n){return n!=null?(pU(this,e,n),Mt.updateOffset(this,t),this):yb(this,e)}}function yb(e,t){return e.isValid()?e._d["get"+(e._isUTC?"UTC":"")+t]():NaN}function pU(e,t,n){e.isValid()&&!isNaN(n)&&(t==="FullYear"&&Vy(e.year())&&e.month()===1&&e.date()===29?(n=Tn(n),e._d["set"+(e._isUTC?"UTC":"")+t](n,e.month(),Xy(n,e.month()))):e._d["set"+(e._isUTC?"UTC":"")+t](n))}function C3e(e){return e=Ao(e),Is(this[e])?this[e]():this}function T3e(e,t){if(typeof e=="object"){e=K3(e);var n=S3e(e),r,a=n.length;for(r=0;r<a;r++)this[n[r].unit](e[n[r].unit])}else if(e=Ao(e),Is(this[e]))return this[e](t);return this}var hU=/\d/,Xi=/\d\d/,mU=/\d{3}/,Q3=/\d{4}/,jy=/[+-]?\d{6}/,wr=/\d\d?/,gU=/\d\d\d\d?/,vU=/\d\d\d\d\d\d?/,Gy=/\d{1,3}/,J3=/\d{1,4}/,Hy=/[+-]?\d{1,6}/,Qd=/\d+/,Wy=/[+-]?\d+/,A3e=/Z|[+-]\d\d:?\d\d/gi,Yy=/Z|[+-]\d\d(?::?\d\d)?/gi,O3e=/[+-]?\d+(\.\d{1,3})?/,a0=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,xb;xb={};function Dt(e,t,n){xb[e]=Is(t)?t:function(r,a){return r&&n?n:t}}function M3e(e,t){return Gn(xb,e)?xb[e](t._strict,t._locale):new RegExp(R3e(e))}function R3e(e){return Fi(e.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(t,n,r,a,i){return n||r||a||i}))}function Fi(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}var l2={};function ir(e,t){var n,r=t,a;for(typeof e=="string"&&(e=[e]),hl(t)&&(r=function(i,o){o[t]=Tn(i)}),a=e.length,n=0;n<a;n++)l2[e[n]]=r}function i0(e,t){ir(e,function(n,r,a,i){a._w=a._w||{},t(n,a._w,a,i)})}function P3e(e,t,n){t!=null&&Gn(l2,e)&&l2[e](t,n._a,n,e)}var Za=0,nl=1,ys=2,ma=3,jo=4,rl=5,uc=6,I3e=7,L3e=8;function N3e(e,t){return(e%t+t)%t}var Xr;Array.prototype.indexOf?Xr=Array.prototype.indexOf:Xr=function(e){var t;for(t=0;t<this.length;++t)if(this[t]===e)return t;return-1};function Xy(e,t){if(isNaN(e)||isNaN(t))return NaN;var n=N3e(t,12);return e+=(t-n)/12,n===1?Vy(e)?29:28:31-n%7%2}Zt("M",["MM",2],"Mo",function(){return this.month()+1});Zt("MMM",0,0,function(e){return this.localeData().monthsShort(this,e)});Zt("MMMM",0,0,function(e){return this.localeData().months(this,e)});Ja("month","M");ei("month",8);Dt("M",wr);Dt("MM",wr,Xi);Dt("MMM",function(e,t){return t.monthsShortRegex(e)});Dt("MMMM",function(e,t){return t.monthsRegex(e)});ir(["M","MM"],function(e,t){t[nl]=Tn(e)-1});ir(["MMM","MMMM"],function(e,t,n,r){var a=n._locale.monthsParse(e,r,n._strict);a!=null?t[nl]=a:wn(n).invalidMonth=e});var F3e="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),bU="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),yU=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,D3e=a0,B3e=a0;function z3e(e,t){return e?Qo(this._months)?this._months[e.month()]:this._months[(this._months.isFormat||yU).test(t)?"format":"standalone"][e.month()]:Qo(this._months)?this._months:this._months.standalone}function U3e(e,t){return e?Qo(this._monthsShort)?this._monthsShort[e.month()]:this._monthsShort[yU.test(t)?"format":"standalone"][e.month()]:Qo(this._monthsShort)?this._monthsShort:this._monthsShort.standalone}function $3e(e,t,n){var r,a,i,o=e.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],r=0;r<12;++r)i=Ps([2e3,r]),this._shortMonthsParse[r]=this.monthsShort(i,"").toLocaleLowerCase(),this._longMonthsParse[r]=this.months(i,"").toLocaleLowerCase();return n?t==="MMM"?(a=Xr.call(this._shortMonthsParse,o),a!==-1?a:null):(a=Xr.call(this._longMonthsParse,o),a!==-1?a:null):t==="MMM"?(a=Xr.call(this._shortMonthsParse,o),a!==-1?a:(a=Xr.call(this._longMonthsParse,o),a!==-1?a:null)):(a=Xr.call(this._longMonthsParse,o),a!==-1?a:(a=Xr.call(this._shortMonthsParse,o),a!==-1?a:null))}function V3e(e,t,n){var r,a,i;if(this._monthsParseExact)return $3e.call(this,e,t,n);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),r=0;r<12;r++){if(a=Ps([2e3,r]),n&&!this._longMonthsParse[r]&&(this._longMonthsParse[r]=new RegExp("^"+this.months(a,"").replace(".","")+"$","i"),this._shortMonthsParse[r]=new RegExp("^"+this.monthsShort(a,"").replace(".","")+"$","i")),!n&&!this._monthsParse[r]&&(i="^"+this.months(a,"")+"|^"+this.monthsShort(a,""),this._monthsParse[r]=new RegExp(i.replace(".",""),"i")),n&&t==="MMMM"&&this._longMonthsParse[r].test(e))return r;if(n&&t==="MMM"&&this._shortMonthsParse[r].test(e))return r;if(!n&&this._monthsParse[r].test(e))return r}}function xU(e,t){var n;if(!e.isValid())return e;if(typeof t=="string"){if(/^\d+$/.test(t))t=Tn(t);else if(t=e.localeData().monthsParse(t),!hl(t))return e}return n=Math.min(e.date(),Xy(e.year(),t)),e._d["set"+(e._isUTC?"UTC":"")+"Month"](t,n),e}function _U(e){return e!=null?(xU(this,e),Mt.updateOffset(this,!0),this):yb(this,"Month")}function j3e(){return Xy(this.year(),this.month())}function G3e(e){return this._monthsParseExact?(Gn(this,"_monthsRegex")||wU.call(this),e?this._monthsShortStrictRegex:this._monthsShortRegex):(Gn(this,"_monthsShortRegex")||(this._monthsShortRegex=D3e),this._monthsShortStrictRegex&&e?this._monthsShortStrictRegex:this._monthsShortRegex)}function H3e(e){return this._monthsParseExact?(Gn(this,"_monthsRegex")||wU.call(this),e?this._monthsStrictRegex:this._monthsRegex):(Gn(this,"_monthsRegex")||(this._monthsRegex=B3e),this._monthsStrictRegex&&e?this._monthsStrictRegex:this._monthsRegex)}function wU(){function e(o,s){return s.length-o.length}var t=[],n=[],r=[],a,i;for(a=0;a<12;a++)i=Ps([2e3,a]),t.push(this.monthsShort(i,"")),n.push(this.months(i,"")),r.push(this.months(i,"")),r.push(this.monthsShort(i,""));for(t.sort(e),n.sort(e),r.sort(e),a=0;a<12;a++)t[a]=Fi(t[a]),n[a]=Fi(n[a]);for(a=0;a<24;a++)r[a]=Fi(r[a]);this._monthsRegex=new RegExp("^("+r.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+n.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+t.join("|")+")","i")}Zt("Y",0,0,function(){var e=this.year();return e<=9999?Os(e,4):"+"+e});Zt(0,["YY",2],0,function(){return this.year()%100});Zt(0,["YYYY",4],0,"year");Zt(0,["YYYYY",5],0,"year");Zt(0,["YYYYYY",6,!0],0,"year");Ja("year","y");ei("year",1);Dt("Y",Wy);Dt("YY",wr,Xi);Dt("YYYY",J3,Q3);Dt("YYYYY",Hy,jy);Dt("YYYYYY",Hy,jy);ir(["YYYYY","YYYYYY"],Za);ir("YYYY",function(e,t){t[Za]=e.length===2?Mt.parseTwoDigitYear(e):Tn(e)});ir("YY",function(e,t){t[Za]=Mt.parseTwoDigitYear(e)});ir("Y",function(e,t){t[Za]=parseInt(e,10)});function Bh(e){return Vy(e)?366:365}Mt.parseTwoDigitYear=function(e){return Tn(e)+(Tn(e)>68?1900:2e3)};var kU=Kd("FullYear",!0);function W3e(){return Vy(this.year())}function Y3e(e,t,n,r,a,i,o){var s;return e<100&&e>=0?(s=new Date(e+400,t,n,r,a,i,o),isFinite(s.getFullYear())&&s.setFullYear(e)):s=new Date(e,t,n,r,a,i,o),s}function Am(e){var t,n;return e<100&&e>=0?(n=Array.prototype.slice.call(arguments),n[0]=e+400,t=new Date(Date.UTC.apply(null,n)),isFinite(t.getUTCFullYear())&&t.setUTCFullYear(e)):t=new Date(Date.UTC.apply(null,arguments)),t}function _b(e,t,n){var r=7+t-n,a=(7+Am(e,0,r).getUTCDay()-t)%7;return-a+r-1}function EU(e,t,n,r,a){var i=(7+n-r)%7,o=_b(e,r,a),s=1+7*(t-1)+i+o,l,u;return s<=0?(l=e-1,u=Bh(l)+s):s>Bh(e)?(l=e+1,u=s-Bh(e)):(l=e,u=s),{year:l,dayOfYear:u}}function Om(e,t,n){var r=_b(e.year(),t,n),a=Math.floor((e.dayOfYear()-r-1)/7)+1,i,o;return a<1?(o=e.year()-1,i=a+ul(o,t,n)):a>ul(e.year(),t,n)?(i=a-ul(e.year(),t,n),o=e.year()+1):(o=e.year(),i=a),{week:i,year:o}}function ul(e,t,n){var r=_b(e,t,n),a=_b(e+1,t,n);return(Bh(e)-r+a)/7}Zt("w",["ww",2],"wo","week");Zt("W",["WW",2],"Wo","isoWeek");Ja("week","w");Ja("isoWeek","W");ei("week",5);ei("isoWeek",5);Dt("w",wr);Dt("ww",wr,Xi);Dt("W",wr);Dt("WW",wr,Xi);i0(["w","ww","W","WW"],function(e,t,n,r){t[r.substr(0,1)]=Tn(e)});function X3e(e){return Om(e,this._week.dow,this._week.doy).week}var Z3e={dow:0,doy:6};function q3e(){return this._week.dow}function K3e(){return this._week.doy}function Q3e(e){var t=this.localeData().week(this);return e==null?t:this.add((e-t)*7,"d")}function J3e(e){var t=Om(this,1,4).week;return e==null?t:this.add((e-t)*7,"d")}Zt("d",0,"do","day");Zt("dd",0,0,function(e){return this.localeData().weekdaysMin(this,e)});Zt("ddd",0,0,function(e){return this.localeData().weekdaysShort(this,e)});Zt("dddd",0,0,function(e){return this.localeData().weekdays(this,e)});Zt("e",0,0,"weekday");Zt("E",0,0,"isoWeekday");Ja("day","d");Ja("weekday","e");Ja("isoWeekday","E");ei("day",11);ei("weekday",11);ei("isoWeekday",11);Dt("d",wr);Dt("e",wr);Dt("E",wr);Dt("dd",function(e,t){return t.weekdaysMinRegex(e)});Dt("ddd",function(e,t){return t.weekdaysShortRegex(e)});Dt("dddd",function(e,t){return t.weekdaysRegex(e)});i0(["dd","ddd","dddd"],function(e,t,n,r){var a=n._locale.weekdaysParse(e,r,n._strict);a!=null?t.d=a:wn(n).invalidWeekday=e});i0(["d","e","E"],function(e,t,n,r){t[r]=Tn(e)});function eSe(e,t){return typeof e!="string"?e:isNaN(e)?(e=t.weekdaysParse(e),typeof e=="number"?e:null):parseInt(e,10)}function tSe(e,t){return typeof e=="string"?t.weekdaysParse(e)%7||7:isNaN(e)?null:e}function eS(e,t){return e.slice(t,7).concat(e.slice(0,t))}var nSe="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),SU="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),rSe="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),aSe=a0,iSe=a0,oSe=a0;function sSe(e,t){var n=Qo(this._weekdays)?this._weekdays:this._weekdays[e&&e!==!0&&this._weekdays.isFormat.test(t)?"format":"standalone"];return e===!0?eS(n,this._week.dow):e?n[e.day()]:n}function lSe(e){return e===!0?eS(this._weekdaysShort,this._week.dow):e?this._weekdaysShort[e.day()]:this._weekdaysShort}function uSe(e){return e===!0?eS(this._weekdaysMin,this._week.dow):e?this._weekdaysMin[e.day()]:this._weekdaysMin}function cSe(e,t,n){var r,a,i,o=e.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],r=0;r<7;++r)i=Ps([2e3,1]).day(r),this._minWeekdaysParse[r]=this.weekdaysMin(i,"").toLocaleLowerCase(),this._shortWeekdaysParse[r]=this.weekdaysShort(i,"").toLocaleLowerCase(),this._weekdaysParse[r]=this.weekdays(i,"").toLocaleLowerCase();return n?t==="dddd"?(a=Xr.call(this._weekdaysParse,o),a!==-1?a:null):t==="ddd"?(a=Xr.call(this._shortWeekdaysParse,o),a!==-1?a:null):(a=Xr.call(this._minWeekdaysParse,o),a!==-1?a:null):t==="dddd"?(a=Xr.call(this._weekdaysParse,o),a!==-1||(a=Xr.call(this._shortWeekdaysParse,o),a!==-1)?a:(a=Xr.call(this._minWeekdaysParse,o),a!==-1?a:null)):t==="ddd"?(a=Xr.call(this._shortWeekdaysParse,o),a!==-1||(a=Xr.call(this._weekdaysParse,o),a!==-1)?a:(a=Xr.call(this._minWeekdaysParse,o),a!==-1?a:null)):(a=Xr.call(this._minWeekdaysParse,o),a!==-1||(a=Xr.call(this._weekdaysParse,o),a!==-1)?a:(a=Xr.call(this._shortWeekdaysParse,o),a!==-1?a:null))}function fSe(e,t,n){var r,a,i;if(this._weekdaysParseExact)return cSe.call(this,e,t,n);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),r=0;r<7;r++){if(a=Ps([2e3,1]).day(r),n&&!this._fullWeekdaysParse[r]&&(this._fullWeekdaysParse[r]=new RegExp("^"+this.weekdays(a,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[r]=new RegExp("^"+this.weekdaysShort(a,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[r]=new RegExp("^"+this.weekdaysMin(a,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[r]||(i="^"+this.weekdays(a,"")+"|^"+this.weekdaysShort(a,"")+"|^"+this.weekdaysMin(a,""),this._weekdaysParse[r]=new RegExp(i.replace(".",""),"i")),n&&t==="dddd"&&this._fullWeekdaysParse[r].test(e))return r;if(n&&t==="ddd"&&this._shortWeekdaysParse[r].test(e))return r;if(n&&t==="dd"&&this._minWeekdaysParse[r].test(e))return r;if(!n&&this._weekdaysParse[r].test(e))return r}}function dSe(e){if(!this.isValid())return e!=null?this:NaN;var t=this._isUTC?this._d.getUTCDay():this._d.getDay();return e!=null?(e=eSe(e,this.localeData()),this.add(e-t,"d")):t}function pSe(e){if(!this.isValid())return e!=null?this:NaN;var t=(this.day()+7-this.localeData()._week.dow)%7;return e==null?t:this.add(e-t,"d")}function hSe(e){if(!this.isValid())return e!=null?this:NaN;if(e!=null){var t=tSe(e,this.localeData());return this.day(this.day()%7?t:t-7)}else return this.day()||7}function mSe(e){return this._weekdaysParseExact?(Gn(this,"_weekdaysRegex")||tS.call(this),e?this._weekdaysStrictRegex:this._weekdaysRegex):(Gn(this,"_weekdaysRegex")||(this._weekdaysRegex=aSe),this._weekdaysStrictRegex&&e?this._weekdaysStrictRegex:this._weekdaysRegex)}function gSe(e){return this._weekdaysParseExact?(Gn(this,"_weekdaysRegex")||tS.call(this),e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(Gn(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=iSe),this._weekdaysShortStrictRegex&&e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)}function vSe(e){return this._weekdaysParseExact?(Gn(this,"_weekdaysRegex")||tS.call(this),e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(Gn(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=oSe),this._weekdaysMinStrictRegex&&e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)}function tS(){function e(c,f){return f.length-c.length}var t=[],n=[],r=[],a=[],i,o,s,l,u;for(i=0;i<7;i++)o=Ps([2e3,1]).day(i),s=Fi(this.weekdaysMin(o,"")),l=Fi(this.weekdaysShort(o,"")),u=Fi(this.weekdays(o,"")),t.push(s),n.push(l),r.push(u),a.push(s),a.push(l),a.push(u);t.sort(e),n.sort(e),r.sort(e),a.sort(e),this._weekdaysRegex=new RegExp("^("+a.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+r.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+n.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+t.join("|")+")","i")}function nS(){return this.hours()%12||12}function bSe(){return this.hours()||24}Zt("H",["HH",2],0,"hour");Zt("h",["hh",2],0,nS);Zt("k",["kk",2],0,bSe);Zt("hmm",0,0,function(){return""+nS.apply(this)+Os(this.minutes(),2)});Zt("hmmss",0,0,function(){return""+nS.apply(this)+Os(this.minutes(),2)+Os(this.seconds(),2)});Zt("Hmm",0,0,function(){return""+this.hours()+Os(this.minutes(),2)});Zt("Hmmss",0,0,function(){return""+this.hours()+Os(this.minutes(),2)+Os(this.seconds(),2)});function CU(e,t){Zt(e,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),t)})}CU("a",!0);CU("A",!1);Ja("hour","h");ei("hour",13);function TU(e,t){return t._meridiemParse}Dt("a",TU);Dt("A",TU);Dt("H",wr);Dt("h",wr);Dt("k",wr);Dt("HH",wr,Xi);Dt("hh",wr,Xi);Dt("kk",wr,Xi);Dt("hmm",gU);Dt("hmmss",vU);Dt("Hmm",gU);Dt("Hmmss",vU);ir(["H","HH"],ma);ir(["k","kk"],function(e,t,n){var r=Tn(e);t[ma]=r===24?0:r});ir(["a","A"],function(e,t,n){n._isPm=n._locale.isPM(e),n._meridiem=e});ir(["h","hh"],function(e,t,n){t[ma]=Tn(e),wn(n).bigHour=!0});ir("hmm",function(e,t,n){var r=e.length-2;t[ma]=Tn(e.substr(0,r)),t[jo]=Tn(e.substr(r)),wn(n).bigHour=!0});ir("hmmss",function(e,t,n){var r=e.length-4,a=e.length-2;t[ma]=Tn(e.substr(0,r)),t[jo]=Tn(e.substr(r,2)),t[rl]=Tn(e.substr(a)),wn(n).bigHour=!0});ir("Hmm",function(e,t,n){var r=e.length-2;t[ma]=Tn(e.substr(0,r)),t[jo]=Tn(e.substr(r))});ir("Hmmss",function(e,t,n){var r=e.length-4,a=e.length-2;t[ma]=Tn(e.substr(0,r)),t[jo]=Tn(e.substr(r,2)),t[rl]=Tn(e.substr(a))});function ySe(e){return(e+"").toLowerCase().charAt(0)==="p"}var xSe=/[ap]\.?m?\.?/i,_Se=Kd("Hours",!0);function wSe(e,t,n){return e>11?n?"pm":"PM":n?"am":"AM"}var AU={calendar:f3e,longDateFormat:m3e,invalidDate:v3e,ordinal:y3e,dayOfMonthOrdinalParse:x3e,relativeTime:w3e,months:F3e,monthsShort:bU,week:Z3e,weekdays:nSe,weekdaysMin:rSe,weekdaysShort:SU,meridiemParse:xSe},Sr={},nh={},Mm;function kSe(e,t){var n,r=Math.min(e.length,t.length);for(n=0;n<r;n+=1)if(e[n]!==t[n])return n;return r}function zI(e){return e&&e.toLowerCase().replace("_","-")}function ESe(e){for(var t=0,n,r,a,i;t<e.length;){for(i=zI(e[t]).split("-"),n=i.length,r=zI(e[t+1]),r=r?r.split("-"):null;n>0;){if(a=Zy(i.slice(0,n).join("-")),a)return a;if(r&&r.length>=n&&kSe(i,r)>=n-1)break;n--}t++}return Mm}function SSe(e){return e.match("^[^/\\\\]*$")!=null}function Zy(e){var t=null,n;if(Sr[e]===void 0&&typeof pv!="undefined"&&pv&&pv.exports&&SSe(e))try{t=Mm._abbr,n=require,n("./locale/"+e),fu(t)}catch{Sr[e]=null}return Sr[e]}function fu(e,t){var n;return e&&(_i(t)?n=yl(e):n=rS(e,t),n?Mm=n:typeof console!="undefined"&&console.warn&&console.warn("Locale "+e+" not found. Did you forget to load it?")),Mm._abbr}function rS(e,t){if(t!==null){var n,r=AU;if(t.abbr=e,Sr[e]!=null)cU("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),r=Sr[e]._config;else if(t.parentLocale!=null)if(Sr[t.parentLocale]!=null)r=Sr[t.parentLocale]._config;else if(n=Zy(t.parentLocale),n!=null)r=n._config;else return nh[t.parentLocale]||(nh[t.parentLocale]=[]),nh[t.parentLocale].push({name:e,config:t}),null;return Sr[e]=new Z3(o2(r,t)),nh[e]&&nh[e].forEach(function(a){rS(a.name,a.config)}),fu(e),Sr[e]}else return delete Sr[e],null}function CSe(e,t){if(t!=null){var n,r,a=AU;Sr[e]!=null&&Sr[e].parentLocale!=null?Sr[e].set(o2(Sr[e]._config,t)):(r=Zy(e),r!=null&&(a=r._config),t=o2(a,t),r==null&&(t.abbr=e),n=new Z3(t),n.parentLocale=Sr[e],Sr[e]=n),fu(e)}else Sr[e]!=null&&(Sr[e].parentLocale!=null?(Sr[e]=Sr[e].parentLocale,e===fu()&&fu(e)):Sr[e]!=null&&delete Sr[e]);return Sr[e]}function yl(e){var t;if(e&&e._locale&&e._locale._abbr&&(e=e._locale._abbr),!e)return Mm;if(!Qo(e)){if(t=Zy(e),t)return t;e=[e]}return ESe(e)}function TSe(){return s2(Sr)}function aS(e){var t,n=e._a;return n&&wn(e).overflow===-2&&(t=n[nl]<0||n[nl]>11?nl:n[ys]<1||n[ys]>Xy(n[Za],n[nl])?ys:n[ma]<0||n[ma]>24||n[ma]===24&&(n[jo]!==0||n[rl]!==0||n[uc]!==0)?ma:n[jo]<0||n[jo]>59?jo:n[rl]<0||n[rl]>59?rl:n[uc]<0||n[uc]>999?uc:-1,wn(e)._overflowDayOfYear&&(t<Za||t>ys)&&(t=ys),wn(e)._overflowWeeks&&t===-1&&(t=I3e),wn(e)._overflowWeekday&&t===-1&&(t=L3e),wn(e).overflow=t),e}var ASe=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,OSe=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d|))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([+-]\d\d(?::?\d\d)?|\s*Z)?)?$/,MSe=/Z|[+-]\d\d(?::?\d\d)?/,Lg=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/],["YYYYMM",/\d{6}/,!1],["YYYY",/\d{4}/,!1]],$_=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],RSe=/^\/?Date\((-?\d+)/i,PSe=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,ISe={UT:0,GMT:0,EDT:-4*60,EST:-5*60,CDT:-5*60,CST:-6*60,MDT:-6*60,MST:-7*60,PDT:-7*60,PST:-8*60};function OU(e){var t,n,r=e._i,a=ASe.exec(r)||OSe.exec(r),i,o,s,l,u=Lg.length,c=$_.length;if(a){for(wn(e).iso=!0,t=0,n=u;t<n;t++)if(Lg[t][1].exec(a[1])){o=Lg[t][0],i=Lg[t][2]!==!1;break}if(o==null){e._isValid=!1;return}if(a[3]){for(t=0,n=c;t<n;t++)if($_[t][1].exec(a[3])){s=(a[2]||" ")+$_[t][0];break}if(s==null){e._isValid=!1;return}}if(!i&&s!=null){e._isValid=!1;return}if(a[4])if(MSe.exec(a[4]))l="Z";else{e._isValid=!1;return}e._f=o+(s||"")+(l||""),oS(e)}else e._isValid=!1}function LSe(e,t,n,r,a,i){var o=[NSe(e),bU.indexOf(t),parseInt(n,10),parseInt(r,10),parseInt(a,10)];return i&&o.push(parseInt(i,10)),o}function NSe(e){var t=parseInt(e,10);return t<=49?2e3+t:t<=999?1900+t:t}function FSe(e){return e.replace(/\([^)]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")}function DSe(e,t,n){if(e){var r=SU.indexOf(e),a=new Date(t[0],t[1],t[2]).getDay();if(r!==a)return wn(n).weekdayMismatch=!0,n._isValid=!1,!1}return!0}function BSe(e,t,n){if(e)return ISe[e];if(t)return 0;var r=parseInt(n,10),a=r%100,i=(r-a)/100;return i*60+a}function MU(e){var t=PSe.exec(FSe(e._i)),n;if(t){if(n=LSe(t[4],t[3],t[2],t[5],t[6],t[7]),!DSe(t[1],n,e))return;e._a=n,e._tzm=BSe(t[8],t[9],t[10]),e._d=Am.apply(null,e._a),e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),wn(e).rfc2822=!0}else e._isValid=!1}function zSe(e){var t=RSe.exec(e._i);if(t!==null){e._d=new Date(+t[1]);return}if(OU(e),e._isValid===!1)delete e._isValid;else return;if(MU(e),e._isValid===!1)delete e._isValid;else return;e._strict?e._isValid=!1:Mt.createFromInputFallback(e)}Mt.createFromInputFallback=To("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))});function Cf(e,t,n){return e!=null?e:t!=null?t:n}function USe(e){var t=new Date(Mt.now());return e._useUTC?[t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()]:[t.getFullYear(),t.getMonth(),t.getDate()]}function iS(e){var t,n,r=[],a,i,o;if(!e._d){for(a=USe(e),e._w&&e._a[ys]==null&&e._a[nl]==null&&$Se(e),e._dayOfYear!=null&&(o=Cf(e._a[Za],a[Za]),(e._dayOfYear>Bh(o)||e._dayOfYear===0)&&(wn(e)._overflowDayOfYear=!0),n=Am(o,0,e._dayOfYear),e._a[nl]=n.getUTCMonth(),e._a[ys]=n.getUTCDate()),t=0;t<3&&e._a[t]==null;++t)e._a[t]=r[t]=a[t];for(;t<7;t++)e._a[t]=r[t]=e._a[t]==null?t===2?1:0:e._a[t];e._a[ma]===24&&e._a[jo]===0&&e._a[rl]===0&&e._a[uc]===0&&(e._nextDay=!0,e._a[ma]=0),e._d=(e._useUTC?Am:Y3e).apply(null,r),i=e._useUTC?e._d.getUTCDay():e._d.getDay(),e._tzm!=null&&e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),e._nextDay&&(e._a[ma]=24),e._w&&typeof e._w.d!="undefined"&&e._w.d!==i&&(wn(e).weekdayMismatch=!0)}}function $Se(e){var t,n,r,a,i,o,s,l,u;t=e._w,t.GG!=null||t.W!=null||t.E!=null?(i=1,o=4,n=Cf(t.GG,e._a[Za],Om(_r(),1,4).year),r=Cf(t.W,1),a=Cf(t.E,1),(a<1||a>7)&&(l=!0)):(i=e._locale._week.dow,o=e._locale._week.doy,u=Om(_r(),i,o),n=Cf(t.gg,e._a[Za],u.year),r=Cf(t.w,u.week),t.d!=null?(a=t.d,(a<0||a>6)&&(l=!0)):t.e!=null?(a=t.e+i,(t.e<0||t.e>6)&&(l=!0)):a=i),r<1||r>ul(n,i,o)?wn(e)._overflowWeeks=!0:l!=null?wn(e)._overflowWeekday=!0:(s=EU(n,r,a,i,o),e._a[Za]=s.year,e._dayOfYear=s.dayOfYear)}Mt.ISO_8601=function(){};Mt.RFC_2822=function(){};function oS(e){if(e._f===Mt.ISO_8601){OU(e);return}if(e._f===Mt.RFC_2822){MU(e);return}e._a=[],wn(e).empty=!0;var t=""+e._i,n,r,a,i,o,s=t.length,l=0,u,c;for(a=fU(e._f,e._locale).match(q3)||[],c=a.length,n=0;n<c;n++)i=a[n],r=(t.match(M3e(i,e))||[])[0],r&&(o=t.substr(0,t.indexOf(r)),o.length>0&&wn(e).unusedInput.push(o),t=t.slice(t.indexOf(r)+r.length),l+=r.length),sd[i]?(r?wn(e).empty=!1:wn(e).unusedTokens.push(i),P3e(i,r,e)):e._strict&&!r&&wn(e).unusedTokens.push(i);wn(e).charsLeftOver=s-l,t.length>0&&wn(e).unusedInput.push(t),e._a[ma]<=12&&wn(e).bigHour===!0&&e._a[ma]>0&&(wn(e).bigHour=void 0),wn(e).parsedDateParts=e._a.slice(0),wn(e).meridiem=e._meridiem,e._a[ma]=VSe(e._locale,e._a[ma],e._meridiem),u=wn(e).era,u!==null&&(e._a[Za]=e._locale.erasConvertYear(u,e._a[Za])),iS(e),aS(e)}function VSe(e,t,n){var r;return n==null?t:e.meridiemHour!=null?e.meridiemHour(t,n):(e.isPM!=null&&(r=e.isPM(n),r&&t<12&&(t+=12),!r&&t===12&&(t=0)),t)}function jSe(e){var t,n,r,a,i,o,s=!1,l=e._f.length;if(l===0){wn(e).invalidFormat=!0,e._d=new Date(NaN);return}for(a=0;a<l;a++)i=0,o=!1,t=X3({},e),e._useUTC!=null&&(t._useUTC=e._useUTC),t._f=e._f[a],oS(t),Y3(t)&&(o=!0),i+=wn(t).charsLeftOver,i+=wn(t).unusedTokens.length*10,wn(t).score=i,s?i<r&&(r=i,n=t):(r==null||i<r||o)&&(r=i,n=t,o&&(s=!0));eu(e,n||t)}function GSe(e){if(!e._d){var t=K3(e._i),n=t.day===void 0?t.date:t.day;e._a=lU([t.year,t.month,n,t.hour,t.minute,t.second,t.millisecond],function(r){return r&&parseInt(r,10)}),iS(e)}}function HSe(e){var t=new r0(aS(RU(e)));return t._nextDay&&(t.add(1,"d"),t._nextDay=void 0),t}function RU(e){var t=e._i,n=e._f;return e._locale=e._locale||yl(e._l),t===null||n===void 0&&t===""?$y({nullInput:!0}):(typeof t=="string"&&(e._i=t=e._locale.preparse(t)),Jo(t)?new r0(aS(t)):(n0(t)?e._d=t:Qo(n)?jSe(e):n?oS(e):WSe(e),Y3(e)||(e._d=null),e))}function WSe(e){var t=e._i;_i(t)?e._d=new Date(Mt.now()):n0(t)?e._d=new Date(t.valueOf()):typeof t=="string"?zSe(e):Qo(t)?(e._a=lU(t.slice(0),function(n){return parseInt(n,10)}),iS(e)):gc(t)?GSe(e):hl(t)?e._d=new Date(t):Mt.createFromInputFallback(e)}function PU(e,t,n,r,a){var i={};return(t===!0||t===!1)&&(r=t,t=void 0),(n===!0||n===!1)&&(r=n,n=void 0),(gc(e)&&W3(e)||Qo(e)&&e.length===0)&&(e=void 0),i._isAMomentObject=!0,i._useUTC=i._isUTC=a,i._l=n,i._i=e,i._f=t,i._strict=r,HSe(i)}function _r(e,t,n,r){return PU(e,t,n,r,!1)}var YSe=To("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=_r.apply(null,arguments);return this.isValid()&&e.isValid()?e<this?this:e:$y()}),XSe=To("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=_r.apply(null,arguments);return this.isValid()&&e.isValid()?e>this?this:e:$y()});function IU(e,t){var n,r;if(t.length===1&&Qo(t[0])&&(t=t[0]),!t.length)return _r();for(n=t[0],r=1;r<t.length;++r)(!t[r].isValid()||t[r][e](n))&&(n=t[r]);return n}function ZSe(){var e=[].slice.call(arguments,0);return IU("isBefore",e)}function qSe(){var e=[].slice.call(arguments,0);return IU("isAfter",e)}var KSe=function(){return Date.now?Date.now():+new Date},rh=["year","quarter","month","week","day","hour","minute","second","millisecond"];function QSe(e){var t,n=!1,r,a=rh.length;for(t in e)if(Gn(e,t)&&!(Xr.call(rh,t)!==-1&&(e[t]==null||!isNaN(e[t]))))return!1;for(r=0;r<a;++r)if(e[rh[r]]){if(n)return!1;parseFloat(e[rh[r]])!==Tn(e[rh[r]])&&(n=!0)}return!0}function JSe(){return this._isValid}function e6e(){return ns(NaN)}function qy(e){var t=K3(e),n=t.year||0,r=t.quarter||0,a=t.month||0,i=t.week||t.isoWeek||0,o=t.day||0,s=t.hour||0,l=t.minute||0,u=t.second||0,c=t.millisecond||0;this._isValid=QSe(t),this._milliseconds=+c+u*1e3+l*6e4+s*1e3*60*60,this._days=+o+i*7,this._months=+a+r*3+n*12,this._data={},this._locale=yl(),this._bubble()}function cv(e){return e instanceof qy}function u2(e){return e<0?Math.round(-1*e)*-1:Math.round(e)}function t6e(e,t,n){var r=Math.min(e.length,t.length),a=Math.abs(e.length-t.length),i=0,o;for(o=0;o<r;o++)(n&&e[o]!==t[o]||!n&&Tn(e[o])!==Tn(t[o]))&&i++;return i+a}function LU(e,t){Zt(e,0,0,function(){var n=this.utcOffset(),r="+";return n<0&&(n=-n,r="-"),r+Os(~~(n/60),2)+t+Os(~~n%60,2)})}LU("Z",":");LU("ZZ","");Dt("Z",Yy);Dt("ZZ",Yy);ir(["Z","ZZ"],function(e,t,n){n._useUTC=!0,n._tzm=sS(Yy,e)});var n6e=/([\+\-]|\d\d)/gi;function sS(e,t){var n=(t||"").match(e),r,a,i;return n===null?null:(r=n[n.length-1]||[],a=(r+"").match(n6e)||["-",0,0],i=+(a[1]*60)+Tn(a[2]),i===0?0:a[0]==="+"?i:-i)}function lS(e,t){var n,r;return t._isUTC?(n=t.clone(),r=(Jo(e)||n0(e)?e.valueOf():_r(e).valueOf())-n.valueOf(),n._d.setTime(n._d.valueOf()+r),Mt.updateOffset(n,!1),n):_r(e).local()}function c2(e){return-Math.round(e._d.getTimezoneOffset())}Mt.updateOffset=function(){};function r6e(e,t,n){var r=this._offset||0,a;if(!this.isValid())return e!=null?this:NaN;if(e!=null){if(typeof e=="string"){if(e=sS(Yy,e),e===null)return this}else Math.abs(e)<16&&!n&&(e=e*60);return!this._isUTC&&t&&(a=c2(this)),this._offset=e,this._isUTC=!0,a!=null&&this.add(a,"m"),r!==e&&(!t||this._changeInProgress?DU(this,ns(e-r,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,Mt.updateOffset(this,!0),this._changeInProgress=null)),this}else return this._isUTC?r:c2(this)}function a6e(e,t){return e!=null?(typeof e!="string"&&(e=-e),this.utcOffset(e,t),this):-this.utcOffset()}function i6e(e){return this.utcOffset(0,e)}function o6e(e){return this._isUTC&&(this.utcOffset(0,e),this._isUTC=!1,e&&this.subtract(c2(this),"m")),this}function s6e(){if(this._tzm!=null)this.utcOffset(this._tzm,!1,!0);else if(typeof this._i=="string"){var e=sS(A3e,this._i);e!=null?this.utcOffset(e):this.utcOffset(0,!0)}return this}function l6e(e){return this.isValid()?(e=e?_r(e).utcOffset():0,(this.utcOffset()-e)%60===0):!1}function u6e(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function c6e(){if(!_i(this._isDSTShifted))return this._isDSTShifted;var e={},t;return X3(e,this),e=RU(e),e._a?(t=e._isUTC?Ps(e._a):_r(e._a),this._isDSTShifted=this.isValid()&&t6e(e._a,t.toArray())>0):this._isDSTShifted=!1,this._isDSTShifted}function f6e(){return this.isValid()?!this._isUTC:!1}function d6e(){return this.isValid()?this._isUTC:!1}function NU(){return this.isValid()?this._isUTC&&this._offset===0:!1}var p6e=/^(-|\+)?(?:(\d*)[. ])?(\d+):(\d+)(?::(\d+)(\.\d*)?)?$/,h6e=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function ns(e,t){var n=e,r=null,a,i,o;return cv(e)?n={ms:e._milliseconds,d:e._days,M:e._months}:hl(e)||!isNaN(+e)?(n={},t?n[t]=+e:n.milliseconds=+e):(r=p6e.exec(e))?(a=r[1]==="-"?-1:1,n={y:0,d:Tn(r[ys])*a,h:Tn(r[ma])*a,m:Tn(r[jo])*a,s:Tn(r[rl])*a,ms:Tn(u2(r[uc]*1e3))*a}):(r=h6e.exec(e))?(a=r[1]==="-"?-1:1,n={y:Zu(r[2],a),M:Zu(r[3],a),w:Zu(r[4],a),d:Zu(r[5],a),h:Zu(r[6],a),m:Zu(r[7],a),s:Zu(r[8],a)}):n==null?n={}:typeof n=="object"&&("from"in n||"to"in n)&&(o=m6e(_r(n.from),_r(n.to)),n={},n.ms=o.milliseconds,n.M=o.months),i=new qy(n),cv(e)&&Gn(e,"_locale")&&(i._locale=e._locale),cv(e)&&Gn(e,"_isValid")&&(i._isValid=e._isValid),i}ns.fn=qy.prototype;ns.invalid=e6e;function Zu(e,t){var n=e&&parseFloat(e.replace(",","."));return(isNaN(n)?0:n)*t}function UI(e,t){var n={};return n.months=t.month()-e.month()+(t.year()-e.year())*12,e.clone().add(n.months,"M").isAfter(t)&&--n.months,n.milliseconds=+t-+e.clone().add(n.months,"M"),n}function m6e(e,t){var n;return e.isValid()&&t.isValid()?(t=lS(t,e),e.isBefore(t)?n=UI(e,t):(n=UI(t,e),n.milliseconds=-n.milliseconds,n.months=-n.months),n):{milliseconds:0,months:0}}function FU(e,t){return function(n,r){var a,i;return r!==null&&!isNaN(+r)&&(cU(t,"moment()."+t+"(period, number) is deprecated. Please use moment()."+t+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),i=n,n=r,r=i),a=ns(n,r),DU(this,a,e),this}}function DU(e,t,n,r){var a=t._milliseconds,i=u2(t._days),o=u2(t._months);!e.isValid()||(r=r==null?!0:r,o&&xU(e,yb(e,"Month")+o*n),i&&pU(e,"Date",yb(e,"Date")+i*n),a&&e._d.setTime(e._d.valueOf()+a*n),r&&Mt.updateOffset(e,i||o))}var g6e=FU(1,"add"),v6e=FU(-1,"subtract");function BU(e){return typeof e=="string"||e instanceof String}function b6e(e){return Jo(e)||n0(e)||BU(e)||hl(e)||x6e(e)||y6e(e)||e===null||e===void 0}function y6e(e){var t=gc(e)&&!W3(e),n=!1,r=["years","year","y","months","month","M","days","day","d","dates","date","D","hours","hour","h","minutes","minute","m","seconds","second","s","milliseconds","millisecond","ms"],a,i,o=r.length;for(a=0;a<o;a+=1)i=r[a],n=n||Gn(e,i);return t&&n}function x6e(e){var t=Qo(e),n=!1;return t&&(n=e.filter(function(r){return!hl(r)&&BU(e)}).length===0),t&&n}function _6e(e){var t=gc(e)&&!W3(e),n=!1,r=["sameDay","nextDay","lastDay","nextWeek","lastWeek","sameElse"],a,i;for(a=0;a<r.length;a+=1)i=r[a],n=n||Gn(e,i);return t&&n}function w6e(e,t){var n=e.diff(t,"days",!0);return n<-6?"sameElse":n<-1?"lastWeek":n<0?"lastDay":n<1?"sameDay":n<2?"nextDay":n<7?"nextWeek":"sameElse"}function k6e(e,t){arguments.length===1&&(arguments[0]?b6e(arguments[0])?(e=arguments[0],t=void 0):_6e(arguments[0])&&(t=arguments[0],e=void 0):(e=void 0,t=void 0));var n=e||_r(),r=lS(n,this).startOf("day"),a=Mt.calendarFormat(this,r)||"sameElse",i=t&&(Is(t[a])?t[a].call(this,n):t[a]);return this.format(i||this.localeData().calendar(a,this,_r(n)))}function E6e(){return new r0(this)}function S6e(e,t){var n=Jo(e)?e:_r(e);return this.isValid()&&n.isValid()?(t=Ao(t)||"millisecond",t==="millisecond"?this.valueOf()>n.valueOf():n.valueOf()<this.clone().startOf(t).valueOf()):!1}function C6e(e,t){var n=Jo(e)?e:_r(e);return this.isValid()&&n.isValid()?(t=Ao(t)||"millisecond",t==="millisecond"?this.valueOf()<n.valueOf():this.clone().endOf(t).valueOf()<n.valueOf()):!1}function T6e(e,t,n,r){var a=Jo(e)?e:_r(e),i=Jo(t)?t:_r(t);return this.isValid()&&a.isValid()&&i.isValid()?(r=r||"()",(r[0]==="("?this.isAfter(a,n):!this.isBefore(a,n))&&(r[1]===")"?this.isBefore(i,n):!this.isAfter(i,n))):!1}function A6e(e,t){var n=Jo(e)?e:_r(e),r;return this.isValid()&&n.isValid()?(t=Ao(t)||"millisecond",t==="millisecond"?this.valueOf()===n.valueOf():(r=n.valueOf(),this.clone().startOf(t).valueOf()<=r&&r<=this.clone().endOf(t).valueOf())):!1}function O6e(e,t){return this.isSame(e,t)||this.isAfter(e,t)}function M6e(e,t){return this.isSame(e,t)||this.isBefore(e,t)}function R6e(e,t,n){var r,a,i;if(!this.isValid())return NaN;if(r=lS(e,this),!r.isValid())return NaN;switch(a=(r.utcOffset()-this.utcOffset())*6e4,t=Ao(t),t){case"year":i=fv(this,r)/12;break;case"month":i=fv(this,r);break;case"quarter":i=fv(this,r)/3;break;case"second":i=(this-r)/1e3;break;case"minute":i=(this-r)/6e4;break;case"hour":i=(this-r)/36e5;break;case"day":i=(this-r-a)/864e5;break;case"week":i=(this-r-a)/6048e5;break;default:i=this-r}return n?i:go(i)}function fv(e,t){if(e.date()<t.date())return-fv(t,e);var n=(t.year()-e.year())*12+(t.month()-e.month()),r=e.clone().add(n,"months"),a,i;return t-r<0?(a=e.clone().add(n-1,"months"),i=(t-r)/(r-a)):(a=e.clone().add(n+1,"months"),i=(t-r)/(a-r)),-(n+i)||0}Mt.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";Mt.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";function P6e(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function I6e(e){if(!this.isValid())return null;var t=e!==!0,n=t?this.clone().utc():this;return n.year()<0||n.year()>9999?uv(n,t?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):Is(Date.prototype.toISOString)?t?this.toDate().toISOString():new Date(this.valueOf()+this.utcOffset()*60*1e3).toISOString().replace("Z",uv(n,"Z")):uv(n,t?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")}function L6e(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var e="moment",t="",n,r,a,i;return this.isLocal()||(e=this.utcOffset()===0?"moment.utc":"moment.parseZone",t="Z"),n="["+e+'("]',r=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",a="-MM-DD[T]HH:mm:ss.SSS",i=t+'[")]',this.format(n+r+a+i)}function N6e(e){e||(e=this.isUtc()?Mt.defaultFormatUtc:Mt.defaultFormat);var t=uv(this,e);return this.localeData().postformat(t)}function F6e(e,t){return this.isValid()&&(Jo(e)&&e.isValid()||_r(e).isValid())?ns({to:this,from:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function D6e(e){return this.from(_r(),e)}function B6e(e,t){return this.isValid()&&(Jo(e)&&e.isValid()||_r(e).isValid())?ns({from:this,to:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()}function z6e(e){return this.to(_r(),e)}function zU(e){var t;return e===void 0?this._locale._abbr:(t=yl(e),t!=null&&(this._locale=t),this)}var UU=To("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(e){return e===void 0?this.localeData():this.locale(e)});function $U(){return this._locale}var wb=1e3,ld=60*wb,kb=60*ld,VU=(365*400+97)*24*kb;function ud(e,t){return(e%t+t)%t}function jU(e,t,n){return e<100&&e>=0?new Date(e+400,t,n)-VU:new Date(e,t,n).valueOf()}function GU(e,t,n){return e<100&&e>=0?Date.UTC(e+400,t,n)-VU:Date.UTC(e,t,n)}function U6e(e){var t,n;if(e=Ao(e),e===void 0||e==="millisecond"||!this.isValid())return this;switch(n=this._isUTC?GU:jU,e){case"year":t=n(this.year(),0,1);break;case"quarter":t=n(this.year(),this.month()-this.month()%3,1);break;case"month":t=n(this.year(),this.month(),1);break;case"week":t=n(this.year(),this.month(),this.date()-this.weekday());break;case"isoWeek":t=n(this.year(),this.month(),this.date()-(this.isoWeekday()-1));break;case"day":case"date":t=n(this.year(),this.month(),this.date());break;case"hour":t=this._d.valueOf(),t-=ud(t+(this._isUTC?0:this.utcOffset()*ld),kb);break;case"minute":t=this._d.valueOf(),t-=ud(t,ld);break;case"second":t=this._d.valueOf(),t-=ud(t,wb);break}return this._d.setTime(t),Mt.updateOffset(this,!0),this}function $6e(e){var t,n;if(e=Ao(e),e===void 0||e==="millisecond"||!this.isValid())return this;switch(n=this._isUTC?GU:jU,e){case"year":t=n(this.year()+1,0,1)-1;break;case"quarter":t=n(this.year(),this.month()-this.month()%3+3,1)-1;break;case"month":t=n(this.year(),this.month()+1,1)-1;break;case"week":t=n(this.year(),this.month(),this.date()-this.weekday()+7)-1;break;case"isoWeek":t=n(this.year(),this.month(),this.date()-(this.isoWeekday()-1)+7)-1;break;case"day":case"date":t=n(this.year(),this.month(),this.date()+1)-1;break;case"hour":t=this._d.valueOf(),t+=kb-ud(t+(this._isUTC?0:this.utcOffset()*ld),kb)-1;break;case"minute":t=this._d.valueOf(),t+=ld-ud(t,ld)-1;break;case"second":t=this._d.valueOf(),t+=wb-ud(t,wb)-1;break}return this._d.setTime(t),Mt.updateOffset(this,!0),this}function V6e(){return this._d.valueOf()-(this._offset||0)*6e4}function j6e(){return Math.floor(this.valueOf()/1e3)}function G6e(){return new Date(this.valueOf())}function H6e(){var e=this;return[e.year(),e.month(),e.date(),e.hour(),e.minute(),e.second(),e.millisecond()]}function W6e(){var e=this;return{years:e.year(),months:e.month(),date:e.date(),hours:e.hours(),minutes:e.minutes(),seconds:e.seconds(),milliseconds:e.milliseconds()}}function Y6e(){return this.isValid()?this.toISOString():null}function X6e(){return Y3(this)}function Z6e(){return eu({},wn(this))}function q6e(){return wn(this).overflow}function K6e(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}Zt("N",0,0,"eraAbbr");Zt("NN",0,0,"eraAbbr");Zt("NNN",0,0,"eraAbbr");Zt("NNNN",0,0,"eraName");Zt("NNNNN",0,0,"eraNarrow");Zt("y",["y",1],"yo","eraYear");Zt("y",["yy",2],0,"eraYear");Zt("y",["yyy",3],0,"eraYear");Zt("y",["yyyy",4],0,"eraYear");Dt("N",uS);Dt("NN",uS);Dt("NNN",uS);Dt("NNNN",lCe);Dt("NNNNN",uCe);ir(["N","NN","NNN","NNNN","NNNNN"],function(e,t,n,r){var a=n._locale.erasParse(e,r,n._strict);a?wn(n).era=a:wn(n).invalidEra=e});Dt("y",Qd);Dt("yy",Qd);Dt("yyy",Qd);Dt("yyyy",Qd);Dt("yo",cCe);ir(["y","yy","yyy","yyyy"],Za);ir(["yo"],function(e,t,n,r){var a;n._locale._eraYearOrdinalRegex&&(a=e.match(n._locale._eraYearOrdinalRegex)),n._locale.eraYearOrdinalParse?t[Za]=n._locale.eraYearOrdinalParse(e,a):t[Za]=parseInt(e,10)});function Q6e(e,t){var n,r,a,i=this._eras||yl("en")._eras;for(n=0,r=i.length;n<r;++n){switch(typeof i[n].since){case"string":a=Mt(i[n].since).startOf("day"),i[n].since=a.valueOf();break}switch(typeof i[n].until){case"undefined":i[n].until=1/0;break;case"string":a=Mt(i[n].until).startOf("day").valueOf(),i[n].until=a.valueOf();break}}return i}function J6e(e,t,n){var r,a,i=this.eras(),o,s,l;for(e=e.toUpperCase(),r=0,a=i.length;r<a;++r)if(o=i[r].name.toUpperCase(),s=i[r].abbr.toUpperCase(),l=i[r].narrow.toUpperCase(),n)switch(t){case"N":case"NN":case"NNN":if(s===e)return i[r];break;case"NNNN":if(o===e)return i[r];break;case"NNNNN":if(l===e)return i[r];break}else if([o,s,l].indexOf(e)>=0)return i[r]}function eCe(e,t){var n=e.since<=e.until?1:-1;return t===void 0?Mt(e.since).year():Mt(e.since).year()+(t-e.offset)*n}function tCe(){var e,t,n,r=this.localeData().eras();for(e=0,t=r.length;e<t;++e)if(n=this.clone().startOf("day").valueOf(),r[e].since<=n&&n<=r[e].until||r[e].until<=n&&n<=r[e].since)return r[e].name;return""}function nCe(){var e,t,n,r=this.localeData().eras();for(e=0,t=r.length;e<t;++e)if(n=this.clone().startOf("day").valueOf(),r[e].since<=n&&n<=r[e].until||r[e].until<=n&&n<=r[e].since)return r[e].narrow;return""}function rCe(){var e,t,n,r=this.localeData().eras();for(e=0,t=r.length;e<t;++e)if(n=this.clone().startOf("day").valueOf(),r[e].since<=n&&n<=r[e].until||r[e].until<=n&&n<=r[e].since)return r[e].abbr;return""}function aCe(){var e,t,n,r,a=this.localeData().eras();for(e=0,t=a.length;e<t;++e)if(n=a[e].since<=a[e].until?1:-1,r=this.clone().startOf("day").valueOf(),a[e].since<=r&&r<=a[e].until||a[e].until<=r&&r<=a[e].since)return(this.year()-Mt(a[e].since).year())*n+a[e].offset;return this.year()}function iCe(e){return Gn(this,"_erasNameRegex")||cS.call(this),e?this._erasNameRegex:this._erasRegex}function oCe(e){return Gn(this,"_erasAbbrRegex")||cS.call(this),e?this._erasAbbrRegex:this._erasRegex}function sCe(e){return Gn(this,"_erasNarrowRegex")||cS.call(this),e?this._erasNarrowRegex:this._erasRegex}function uS(e,t){return t.erasAbbrRegex(e)}function lCe(e,t){return t.erasNameRegex(e)}function uCe(e,t){return t.erasNarrowRegex(e)}function cCe(e,t){return t._eraYearOrdinalRegex||Qd}function cS(){var e=[],t=[],n=[],r=[],a,i,o=this.eras();for(a=0,i=o.length;a<i;++a)t.push(Fi(o[a].name)),e.push(Fi(o[a].abbr)),n.push(Fi(o[a].narrow)),r.push(Fi(o[a].name)),r.push(Fi(o[a].abbr)),r.push(Fi(o[a].narrow));this._erasRegex=new RegExp("^("+r.join("|")+")","i"),this._erasNameRegex=new RegExp("^("+t.join("|")+")","i"),this._erasAbbrRegex=new RegExp("^("+e.join("|")+")","i"),this._erasNarrowRegex=new RegExp("^("+n.join("|")+")","i")}Zt(0,["gg",2],0,function(){return this.weekYear()%100});Zt(0,["GG",2],0,function(){return this.isoWeekYear()%100});function Ky(e,t){Zt(0,[e,e.length],0,t)}Ky("gggg","weekYear");Ky("ggggg","weekYear");Ky("GGGG","isoWeekYear");Ky("GGGGG","isoWeekYear");Ja("weekYear","gg");Ja("isoWeekYear","GG");ei("weekYear",1);ei("isoWeekYear",1);Dt("G",Wy);Dt("g",Wy);Dt("GG",wr,Xi);Dt("gg",wr,Xi);Dt("GGGG",J3,Q3);Dt("gggg",J3,Q3);Dt("GGGGG",Hy,jy);Dt("ggggg",Hy,jy);i0(["gggg","ggggg","GGGG","GGGGG"],function(e,t,n,r){t[r.substr(0,2)]=Tn(e)});i0(["gg","GG"],function(e,t,n,r){t[r]=Mt.parseTwoDigitYear(e)});function fCe(e){return HU.call(this,e,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)}function dCe(e){return HU.call(this,e,this.isoWeek(),this.isoWeekday(),1,4)}function pCe(){return ul(this.year(),1,4)}function hCe(){return ul(this.isoWeekYear(),1,4)}function mCe(){var e=this.localeData()._week;return ul(this.year(),e.dow,e.doy)}function gCe(){var e=this.localeData()._week;return ul(this.weekYear(),e.dow,e.doy)}function HU(e,t,n,r,a){var i;return e==null?Om(this,r,a).year:(i=ul(e,r,a),t>i&&(t=i),vCe.call(this,e,t,n,r,a))}function vCe(e,t,n,r,a){var i=EU(e,t,n,r,a),o=Am(i.year,0,i.dayOfYear);return this.year(o.getUTCFullYear()),this.month(o.getUTCMonth()),this.date(o.getUTCDate()),this}Zt("Q",0,"Qo","quarter");Ja("quarter","Q");ei("quarter",7);Dt("Q",hU);ir("Q",function(e,t){t[nl]=(Tn(e)-1)*3});function bCe(e){return e==null?Math.ceil((this.month()+1)/3):this.month((e-1)*3+this.month()%3)}Zt("D",["DD",2],"Do","date");Ja("date","D");ei("date",9);Dt("D",wr);Dt("DD",wr,Xi);Dt("Do",function(e,t){return e?t._dayOfMonthOrdinalParse||t._ordinalParse:t._dayOfMonthOrdinalParseLenient});ir(["D","DD"],ys);ir("Do",function(e,t){t[ys]=Tn(e.match(wr)[0])});var WU=Kd("Date",!0);Zt("DDD",["DDDD",3],"DDDo","dayOfYear");Ja("dayOfYear","DDD");ei("dayOfYear",4);Dt("DDD",Gy);Dt("DDDD",mU);ir(["DDD","DDDD"],function(e,t,n){n._dayOfYear=Tn(e)});function yCe(e){var t=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return e==null?t:this.add(e-t,"d")}Zt("m",["mm",2],0,"minute");Ja("minute","m");ei("minute",14);Dt("m",wr);Dt("mm",wr,Xi);ir(["m","mm"],jo);var xCe=Kd("Minutes",!1);Zt("s",["ss",2],0,"second");Ja("second","s");ei("second",15);Dt("s",wr);Dt("ss",wr,Xi);ir(["s","ss"],rl);var _Ce=Kd("Seconds",!1);Zt("S",0,0,function(){return~~(this.millisecond()/100)});Zt(0,["SS",2],0,function(){return~~(this.millisecond()/10)});Zt(0,["SSS",3],0,"millisecond");Zt(0,["SSSS",4],0,function(){return this.millisecond()*10});Zt(0,["SSSSS",5],0,function(){return this.millisecond()*100});Zt(0,["SSSSSS",6],0,function(){return this.millisecond()*1e3});Zt(0,["SSSSSSS",7],0,function(){return this.millisecond()*1e4});Zt(0,["SSSSSSSS",8],0,function(){return this.millisecond()*1e5});Zt(0,["SSSSSSSSS",9],0,function(){return this.millisecond()*1e6});Ja("millisecond","ms");ei("millisecond",16);Dt("S",Gy,hU);Dt("SS",Gy,Xi);Dt("SSS",Gy,mU);var tu,YU;for(tu="SSSS";tu.length<=9;tu+="S")Dt(tu,Qd);function wCe(e,t){t[uc]=Tn(("0."+e)*1e3)}for(tu="S";tu.length<=9;tu+="S")ir(tu,wCe);YU=Kd("Milliseconds",!1);Zt("z",0,0,"zoneAbbr");Zt("zz",0,0,"zoneName");function kCe(){return this._isUTC?"UTC":""}function ECe(){return this._isUTC?"Coordinated Universal Time":""}var st=r0.prototype;st.add=g6e;st.calendar=k6e;st.clone=E6e;st.diff=R6e;st.endOf=$6e;st.format=N6e;st.from=F6e;st.fromNow=D6e;st.to=B6e;st.toNow=z6e;st.get=C3e;st.invalidAt=q6e;st.isAfter=S6e;st.isBefore=C6e;st.isBetween=T6e;st.isSame=A6e;st.isSameOrAfter=O6e;st.isSameOrBefore=M6e;st.isValid=X6e;st.lang=UU;st.locale=zU;st.localeData=$U;st.max=XSe;st.min=YSe;st.parsingFlags=Z6e;st.set=T3e;st.startOf=U6e;st.subtract=v6e;st.toArray=H6e;st.toObject=W6e;st.toDate=G6e;st.toISOString=I6e;st.inspect=L6e;typeof Symbol!="undefined"&&Symbol.for!=null&&(st[Symbol.for("nodejs.util.inspect.custom")]=function(){return"Moment<"+this.format()+">"});st.toJSON=Y6e;st.toString=P6e;st.unix=j6e;st.valueOf=V6e;st.creationData=K6e;st.eraName=tCe;st.eraNarrow=nCe;st.eraAbbr=rCe;st.eraYear=aCe;st.year=kU;st.isLeapYear=W3e;st.weekYear=fCe;st.isoWeekYear=dCe;st.quarter=st.quarters=bCe;st.month=_U;st.daysInMonth=j3e;st.week=st.weeks=Q3e;st.isoWeek=st.isoWeeks=J3e;st.weeksInYear=mCe;st.weeksInWeekYear=gCe;st.isoWeeksInYear=pCe;st.isoWeeksInISOWeekYear=hCe;st.date=WU;st.day=st.days=dSe;st.weekday=pSe;st.isoWeekday=hSe;st.dayOfYear=yCe;st.hour=st.hours=_Se;st.minute=st.minutes=xCe;st.second=st.seconds=_Ce;st.millisecond=st.milliseconds=YU;st.utcOffset=r6e;st.utc=i6e;st.local=o6e;st.parseZone=s6e;st.hasAlignedHourOffset=l6e;st.isDST=u6e;st.isLocal=f6e;st.isUtcOffset=d6e;st.isUtc=NU;st.isUTC=NU;st.zoneAbbr=kCe;st.zoneName=ECe;st.dates=To("dates accessor is deprecated. Use date instead.",WU);st.months=To("months accessor is deprecated. Use month instead",_U);st.years=To("years accessor is deprecated. Use year instead",kU);st.zone=To("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",a6e);st.isDSTShifted=To("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",c6e);function SCe(e){return _r(e*1e3)}function CCe(){return _r.apply(null,arguments).parseZone()}function XU(e){return e}var Wn=Z3.prototype;Wn.calendar=d3e;Wn.longDateFormat=g3e;Wn.invalidDate=b3e;Wn.ordinal=_3e;Wn.preparse=XU;Wn.postformat=XU;Wn.relativeTime=k3e;Wn.pastFuture=E3e;Wn.set=c3e;Wn.eras=Q6e;Wn.erasParse=J6e;Wn.erasConvertYear=eCe;Wn.erasAbbrRegex=oCe;Wn.erasNameRegex=iCe;Wn.erasNarrowRegex=sCe;Wn.months=z3e;Wn.monthsShort=U3e;Wn.monthsParse=V3e;Wn.monthsRegex=H3e;Wn.monthsShortRegex=G3e;Wn.week=X3e;Wn.firstDayOfYear=K3e;Wn.firstDayOfWeek=q3e;Wn.weekdays=sSe;Wn.weekdaysMin=uSe;Wn.weekdaysShort=lSe;Wn.weekdaysParse=fSe;Wn.weekdaysRegex=mSe;Wn.weekdaysShortRegex=gSe;Wn.weekdaysMinRegex=vSe;Wn.isPM=ySe;Wn.meridiem=wSe;function Eb(e,t,n,r){var a=yl(),i=Ps().set(r,t);return a[n](i,e)}function ZU(e,t,n){if(hl(e)&&(t=e,e=void 0),e=e||"",t!=null)return Eb(e,t,n,"month");var r,a=[];for(r=0;r<12;r++)a[r]=Eb(e,r,n,"month");return a}function fS(e,t,n,r){typeof e=="boolean"?(hl(t)&&(n=t,t=void 0),t=t||""):(t=e,n=t,e=!1,hl(t)&&(n=t,t=void 0),t=t||"");var a=yl(),i=e?a._week.dow:0,o,s=[];if(n!=null)return Eb(t,(n+i)%7,r,"day");for(o=0;o<7;o++)s[o]=Eb(t,(o+i)%7,r,"day");return s}function TCe(e,t){return ZU(e,t,"months")}function ACe(e,t){return ZU(e,t,"monthsShort")}function OCe(e,t,n){return fS(e,t,n,"weekdays")}function MCe(e,t,n){return fS(e,t,n,"weekdaysShort")}function RCe(e,t,n){return fS(e,t,n,"weekdaysMin")}fu("en",{eras:[{since:"0001-01-01",until:1/0,offset:1,name:"Anno Domini",narrow:"AD",abbr:"AD"},{since:"0000-12-31",until:-1/0,offset:1,name:"Before Christ",narrow:"BC",abbr:"BC"}],dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10,n=Tn(e%100/10)===1?"th":t===1?"st":t===2?"nd":t===3?"rd":"th";return e+n}});Mt.lang=To("moment.lang is deprecated. Use moment.locale instead.",fu);Mt.langData=To("moment.langData is deprecated. Use moment.localeData instead.",yl);var Gs=Math.abs;function PCe(){var e=this._data;return this._milliseconds=Gs(this._milliseconds),this._days=Gs(this._days),this._months=Gs(this._months),e.milliseconds=Gs(e.milliseconds),e.seconds=Gs(e.seconds),e.minutes=Gs(e.minutes),e.hours=Gs(e.hours),e.months=Gs(e.months),e.years=Gs(e.years),this}function qU(e,t,n,r){var a=ns(t,n);return e._milliseconds+=r*a._milliseconds,e._days+=r*a._days,e._months+=r*a._months,e._bubble()}function ICe(e,t){return qU(this,e,t,1)}function LCe(e,t){return qU(this,e,t,-1)}function $I(e){return e<0?Math.floor(e):Math.ceil(e)}function NCe(){var e=this._milliseconds,t=this._days,n=this._months,r=this._data,a,i,o,s,l;return e>=0&&t>=0&&n>=0||e<=0&&t<=0&&n<=0||(e+=$I(f2(n)+t)*864e5,t=0,n=0),r.milliseconds=e%1e3,a=go(e/1e3),r.seconds=a%60,i=go(a/60),r.minutes=i%60,o=go(i/60),r.hours=o%24,t+=go(o/24),l=go(KU(t)),n+=l,t-=$I(f2(l)),s=go(n/12),n%=12,r.days=t,r.months=n,r.years=s,this}function KU(e){return e*4800/146097}function f2(e){return e*146097/4800}function FCe(e){if(!this.isValid())return NaN;var t,n,r=this._milliseconds;if(e=Ao(e),e==="month"||e==="quarter"||e==="year")switch(t=this._days+r/864e5,n=this._months+KU(t),e){case"month":return n;case"quarter":return n/3;case"year":return n/12}else switch(t=this._days+Math.round(f2(this._months)),e){case"week":return t/7+r/6048e5;case"day":return t+r/864e5;case"hour":return t*24+r/36e5;case"minute":return t*1440+r/6e4;case"second":return t*86400+r/1e3;case"millisecond":return Math.floor(t*864e5)+r;default:throw new Error("Unknown unit "+e)}}function DCe(){return this.isValid()?this._milliseconds+this._days*864e5+this._months%12*2592e6+Tn(this._months/12)*31536e6:NaN}function xl(e){return function(){return this.as(e)}}var BCe=xl("ms"),zCe=xl("s"),UCe=xl("m"),$Ce=xl("h"),VCe=xl("d"),jCe=xl("w"),GCe=xl("M"),HCe=xl("Q"),WCe=xl("y");function YCe(){return ns(this)}function XCe(e){return e=Ao(e),this.isValid()?this[e+"s"]():NaN}function Fc(e){return function(){return this.isValid()?this._data[e]:NaN}}var ZCe=Fc("milliseconds"),qCe=Fc("seconds"),KCe=Fc("minutes"),QCe=Fc("hours"),JCe=Fc("days"),eTe=Fc("months"),tTe=Fc("years");function nTe(){return go(this.days()/7)}var Xs=Math.round,Gf={ss:44,s:45,m:45,h:22,d:26,w:null,M:11};function rTe(e,t,n,r,a){return a.relativeTime(t||1,!!n,e,r)}function aTe(e,t,n,r){var a=ns(e).abs(),i=Xs(a.as("s")),o=Xs(a.as("m")),s=Xs(a.as("h")),l=Xs(a.as("d")),u=Xs(a.as("M")),c=Xs(a.as("w")),f=Xs(a.as("y")),d=i<=n.ss&&["s",i]||i<n.s&&["ss",i]||o<=1&&["m"]||o<n.m&&["mm",o]||s<=1&&["h"]||s<n.h&&["hh",s]||l<=1&&["d"]||l<n.d&&["dd",l];return n.w!=null&&(d=d||c<=1&&["w"]||c<n.w&&["ww",c]),d=d||u<=1&&["M"]||u<n.M&&["MM",u]||f<=1&&["y"]||["yy",f],d[2]=t,d[3]=+e>0,d[4]=r,rTe.apply(null,d)}function iTe(e){return e===void 0?Xs:typeof e=="function"?(Xs=e,!0):!1}function oTe(e,t){return Gf[e]===void 0?!1:t===void 0?Gf[e]:(Gf[e]=t,e==="s"&&(Gf.ss=t-1),!0)}function sTe(e,t){if(!this.isValid())return this.localeData().invalidDate();var n=!1,r=Gf,a,i;return typeof e=="object"&&(t=e,e=!1),typeof e=="boolean"&&(n=e),typeof t=="object"&&(r=Object.assign({},Gf,t),t.s!=null&&t.ss==null&&(r.ss=t.s-1)),a=this.localeData(),i=aTe(this,!n,r,a),n&&(i=a.pastFuture(+this,i)),a.postformat(i)}var V_=Math.abs;function xf(e){return(e>0)-(e<0)||+e}function Qy(){if(!this.isValid())return this.localeData().invalidDate();var e=V_(this._milliseconds)/1e3,t=V_(this._days),n=V_(this._months),r,a,i,o,s=this.asSeconds(),l,u,c,f;return s?(r=go(e/60),a=go(r/60),e%=60,r%=60,i=go(n/12),n%=12,o=e?e.toFixed(3).replace(/\.?0+$/,""):"",l=s<0?"-":"",u=xf(this._months)!==xf(s)?"-":"",c=xf(this._days)!==xf(s)?"-":"",f=xf(this._milliseconds)!==xf(s)?"-":"",l+"P"+(i?u+i+"Y":"")+(n?u+n+"M":"")+(t?c+t+"D":"")+(a||r||e?"T":"")+(a?f+a+"H":"")+(r?f+r+"M":"")+(e?f+o+"S":"")):"P0D"}var Fn=qy.prototype;Fn.isValid=JSe;Fn.abs=PCe;Fn.add=ICe;Fn.subtract=LCe;Fn.as=FCe;Fn.asMilliseconds=BCe;Fn.asSeconds=zCe;Fn.asMinutes=UCe;Fn.asHours=$Ce;Fn.asDays=VCe;Fn.asWeeks=jCe;Fn.asMonths=GCe;Fn.asQuarters=HCe;Fn.asYears=WCe;Fn.valueOf=DCe;Fn._bubble=NCe;Fn.clone=YCe;Fn.get=XCe;Fn.milliseconds=ZCe;Fn.seconds=qCe;Fn.minutes=KCe;Fn.hours=QCe;Fn.days=JCe;Fn.weeks=nTe;Fn.months=eTe;Fn.years=tTe;Fn.humanize=sTe;Fn.toISOString=Qy;Fn.toString=Qy;Fn.toJSON=Qy;Fn.locale=zU;Fn.localeData=$U;Fn.toIsoString=To("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",Qy);Fn.lang=UU;Zt("X",0,0,"unix");Zt("x",0,0,"valueOf");Dt("x",Wy);Dt("X",O3e);ir("X",function(e,t,n){n._d=new Date(parseFloat(e)*1e3)});ir("x",function(e,t,n){n._d=new Date(Tn(e))});//! moment.js
Mt.version="2.29.3";l3e(_r);Mt.fn=st;Mt.min=ZSe;Mt.max=qSe;Mt.now=KSe;Mt.utc=Ps;Mt.unix=SCe;Mt.months=TCe;Mt.isDate=n0;Mt.locale=fu;Mt.invalid=$y;Mt.duration=ns;Mt.isMoment=Jo;Mt.weekdays=OCe;Mt.parseZone=CCe;Mt.localeData=yl;Mt.isDuration=cv;Mt.monthsShort=ACe;Mt.weekdaysMin=RCe;Mt.defineLocale=rS;Mt.updateLocale=CSe;Mt.locales=TSe;Mt.weekdaysShort=MCe;Mt.normalizeUnits=Ao;Mt.relativeTimeRounding=iTe;Mt.relativeTimeThreshold=oTe;Mt.calendarFormat=w6e;Mt.prototype=st;Mt.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"GGGG-[W]WW",MONTH:"YYYY-MM"};var dS={exports:{}},Jy={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lTe=_.exports,uTe=Symbol.for("react.element"),cTe=Symbol.for("react.fragment"),fTe=Object.prototype.hasOwnProperty,dTe=lTe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,pTe={key:!0,ref:!0,__self:!0,__source:!0};function QU(e,t,n){var r,a={},i=null,o=null;n!==void 0&&(i=""+n),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(o=t.ref);for(r in t)fTe.call(t,r)&&!pTe.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)a[r]===void 0&&(a[r]=t[r]);return{$$typeof:uTe,type:e,key:i,ref:o,props:a,_owner:dTe.current}}Jy.Fragment=cTe;Jy.jsx=QU;Jy.jsxs=QU;dS.exports=Jy;const tc=dS.exports.jsx,VI=dS.exports.jsxs;var hTe=function(t){var n,r,a=t.prefixCls,i=t.className,o=t.style,s=t.size,l=t.shape,u=Xt((n={},m(n,"".concat(a,"-lg"),s==="large"),m(n,"".concat(a,"-sm"),s==="small"),n)),c=Xt((r={},m(r,"".concat(a,"-circle"),l==="circle"),m(r,"".concat(a,"-square"),l==="square"),m(r,"".concat(a,"-round"),l==="round"),r)),f=typeof s=="number"?{width:s,height:s,lineHeight:"".concat(s,"px")}:{};return _.exports.createElement("span",{className:Xt(a,u,c,i),style:yt(yt({},f),o)})},ex=hTe,JU=function(t){var n=t.prefixCls,r=t.className,a=t.active,i=_.exports.useContext(Yi),o=i.getPrefixCls,s=o("skeleton",n),l=Nc(t,["prefixCls","className"]),u=Xt(s,"".concat(s,"-element"),m({},"".concat(s,"-active"),a),r);return _.exports.createElement("div",{className:u},_.exports.createElement(ex,yt({prefixCls:"".concat(s,"-avatar")},l)))};JU.defaultProps={size:"default",shape:"circle"};var mTe=JU,e$=function(t){var n,r=t.prefixCls,a=t.className,i=t.active,o=t.block,s=o===void 0?!1:o,l=_.exports.useContext(Yi),u=l.getPrefixCls,c=u("skeleton",r),f=Nc(t,["prefixCls"]),d=Xt(c,"".concat(c,"-element"),(n={},m(n,"".concat(c,"-active"),i),m(n,"".concat(c,"-block"),s),n),a);return _.exports.createElement("div",{className:d},_.exports.createElement(ex,yt({prefixCls:"".concat(c,"-button")},f)))};e$.defaultProps={size:"default"};var gTe=e$,vTe="M365.714286 329.142857q0 45.714286-32.036571 77.677714t-77.677714 32.036571-77.677714-32.036571-32.036571-77.677714 32.036571-77.677714 77.677714-32.036571 77.677714 32.036571 32.036571 77.677714zM950.857143 548.571429l0 256-804.571429 0 0-109.714286 182.857143-182.857143 91.428571 91.428571 292.571429-292.571429zM1005.714286 146.285714l-914.285714 0q-7.460571 0-12.873143 5.412571t-5.412571 12.873143l0 694.857143q0 7.460571 5.412571 12.873143t12.873143 5.412571l914.285714 0q7.460571 0 12.873143-5.412571t5.412571-12.873143l0-694.857143q0-7.460571-5.412571-12.873143t-12.873143-5.412571zM1097.142857 164.571429l0 694.857143q0 37.741714-26.843429 64.585143t-64.585143 26.843429l-914.285714 0q-37.741714 0-64.585143-26.843429t-26.843429-64.585143l0-694.857143q0-37.741714 26.843429-64.585143t64.585143-26.843429l914.285714 0q37.741714 0 64.585143 26.843429t26.843429 64.585143z",bTe=function(t){var n=t.prefixCls,r=t.className,a=t.style,i=_.exports.useContext(Yi),o=i.getPrefixCls,s=o("skeleton",n),l=Xt(s,"".concat(s,"-element"),r);return _.exports.createElement("div",{className:l},_.exports.createElement("div",{className:Xt("".concat(s,"-image"),r),style:a},_.exports.createElement("svg",{viewBox:"0 0 1098 1024",xmlns:"http://www.w3.org/2000/svg",className:"".concat(s,"-image-svg")},_.exports.createElement("path",{d:vTe,className:"".concat(s,"-image-path")}))))},yTe=bTe,t$=function(t){var n,r=t.prefixCls,a=t.className,i=t.active,o=t.block,s=_.exports.useContext(Yi),l=s.getPrefixCls,u=l("skeleton",r),c=Nc(t,["prefixCls"]),f=Xt(u,"".concat(u,"-element"),(n={},m(n,"".concat(u,"-active"),i),m(n,"".concat(u,"-block"),o),n),a);return _.exports.createElement("div",{className:f},_.exports.createElement(ex,yt({prefixCls:"".concat(u,"-input")},c)))};t$.defaultProps={size:"default"};var xTe=t$,_Te=function(t){var n=function(u){var c=t.width,f=t.rows,d=f===void 0?2:f;if(Array.isArray(c))return c[u];if(d-1===u)return c},r=t.prefixCls,a=t.className,i=t.style,o=t.rows,s=$e(Array(o)).map(function(l,u){return _.exports.createElement("li",{key:u,style:{width:n(u)}})});return _.exports.createElement("ul",{className:Xt(r,a),style:i},s)},wTe=_Te,kTe=function(t){var n=t.prefixCls,r=t.className,a=t.width,i=t.style;return _.exports.createElement("h3",{className:Xt(n,r),style:yt({width:a},i)})},ETe=kTe;function j_(e){return e&&hr(e)==="object"?e:{}}function STe(e,t){return e&&!t?{size:"large",shape:"square"}:{size:"large",shape:"circle"}}function CTe(e,t){return!e&&t?{width:"38%"}:e&&t?{width:"50%"}:{}}function TTe(e,t){var n={};return(!e||!t)&&(n.width="61%"),!e&&t?n.rows=3:n.rows=2,n}var Jd=function(t){var n=t.prefixCls,r=t.loading,a=t.className,i=t.style,o=t.children,s=t.avatar,l=t.title,u=t.paragraph,c=t.active,f=t.round,d=_.exports.useContext(Yi),p=d.getPrefixCls,h=d.direction,g=p("skeleton",n);if(r||!("loading"in t)){var v,b=!!s,y=!!l,x=!!u,k;if(b){var T=yt(yt({prefixCls:"".concat(g,"-avatar")},STe(y,x)),j_(s));k=_.exports.createElement("div",{className:"".concat(g,"-header")},_.exports.createElement(ex,yt({},T)))}var C;if(y||x){var I;if(y){var P=yt(yt({prefixCls:"".concat(g,"-title")},CTe(b,x)),j_(l));I=_.exports.createElement(ETe,yt({},P))}var j;if(x){var A=yt(yt({prefixCls:"".concat(g,"-paragraph")},TTe(b,y)),j_(u));j=_.exports.createElement(wTe,yt({},A))}C=_.exports.createElement("div",{className:"".concat(g,"-content")},I,j)}var S=Xt(g,(v={},m(v,"".concat(g,"-with-avatar"),b),m(v,"".concat(g,"-active"),c),m(v,"".concat(g,"-rtl"),h==="rtl"),m(v,"".concat(g,"-round"),f),v),a);return _.exports.createElement("div",{className:S,style:i},k,C)}return typeof o!="undefined"?o:null};Jd.defaultProps={avatar:!1,title:!0,paragraph:!0};Jd.Button=gTe;Jd.Avatar=mTe;Jd.Input=xTe;Jd.Image=yTe;var ATe=Jd,OTe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M482 152h60q8 0 8 8v704q0 8-8 8h-60q-8 0-8-8V160q0-8 8-8z"}},{tag:"path",attrs:{d:"M176 474h672q8 0 8 8v60q0 8-8 8H176q-8 0-8-8v-60q0-8 8-8z"}}]},name:"plus",theme:"outlined"},MTe=OTe,n$=function(t,n){return _.exports.createElement(Zd,Re(Re({},t),{},{ref:n,icon:MTe}))};n$.displayName="PlusOutlined";var RTe=_.exports.forwardRef(n$);function r$(e){var t=_.exports.useRef(),n=_.exports.useRef(!1);function r(){for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];n.current||(ur.cancel(t.current),t.current=ur(function(){e.apply(void 0,i)}))}return _.exports.useEffect(function(){return n.current=!1,function(){n.current=!0,ur.cancel(t.current)}},[]),r}function PTe(e){var t=_.exports.useRef([]),n=_.exports.useState({}),r=Le(n,2),a=r[1],i=_.exports.useRef(typeof e=="function"?e():e),o=r$(function(){var l=i.current;t.current.forEach(function(u){l=u(l)}),t.current=[],i.current=l,a({})});function s(l){t.current.push(l),o()}return[i.current,s]}function ITe(e,t){var n,r=e.prefixCls,a=e.id,i=e.active,o=e.tab,s=o.key,l=o.tab,u=o.disabled,c=o.closeIcon,f=e.closable,d=e.renderWrapper,p=e.removeAriaLabel,h=e.editable,g=e.onClick,v=e.onRemove,b=e.onFocus,y=e.style,x="".concat(r,"-tab");_.exports.useEffect(function(){return v},[]);var k=h&&f!==!1&&!u;function T(P){u||g(P)}function C(P){P.preventDefault(),P.stopPropagation(),h.onEdit("remove",{key:s,event:P})}var I=_.exports.createElement("div",{key:s,ref:t,className:Xt(x,(n={},m(n,"".concat(x,"-with-remove"),k),m(n,"".concat(x,"-active"),i),m(n,"".concat(x,"-disabled"),u),n)),style:y,onClick:T},_.exports.createElement("div",{role:"tab","aria-selected":i,id:a&&"".concat(a,"-tab-").concat(s),className:"".concat(x,"-btn"),"aria-controls":a&&"".concat(a,"-panel-").concat(s),"aria-disabled":u,tabIndex:u?null:0,onClick:function(j){j.stopPropagation(),T(j)},onKeyDown:function(j){[St.SPACE,St.ENTER].includes(j.which)&&(j.preventDefault(),T(j))},onFocus:b},l),k&&_.exports.createElement("button",{type:"button","aria-label":p||"remove",tabIndex:0,className:"".concat(x,"-remove"),onClick:function(j){j.stopPropagation(),C(j)}},c||h.removeIcon||"\xD7"));return d?d(I):I}var LTe=_.exports.forwardRef(ITe),jI={width:0,height:0,left:0,top:0};function NTe(e,t,n){return _.exports.useMemo(function(){for(var r,a=new Map,i=t.get((r=e[0])===null||r===void 0?void 0:r.key)||jI,o=i.left+i.width,s=0;s<e.length;s+=1){var l=e[s].key,u=t.get(l);if(!u){var c;u=t.get((c=e[s-1])===null||c===void 0?void 0:c.key)||jI}var f=a.get(l)||Re({},u);f.right=o-f.left-f.width,a.set(l,f)}return a},[e.map(function(r){return r.key}).join("_"),t,n])}var GI={width:0,height:0,left:0,top:0,right:0};function FTe(e,t,n,r,a){var i=a.tabs,o=a.tabPosition,s=a.rtl,l,u,c;["top","bottom"].includes(o)?(l="width",u=s?"right":"left",c=Math.abs(t.left)):(l="height",u="top",c=-t.top);var f=t[l],d=n[l],p=r[l],h=f;return d+p>f&&d<f&&(h=f-p),_.exports.useMemo(function(){if(!i.length)return[0,0];for(var g=i.length,v=g,b=0;b<g;b+=1){var y=e.get(i[b].key)||GI;if(y[u]+y[l]>c+h){v=b-1;break}}for(var x=0,k=g-1;k>=0;k-=1){var T=e.get(i[k].key)||GI;if(T[u]<c){x=k+1;break}}return[x,v]},[e,c,h,o,i.map(function(g){return g.key}).join("_"),s])}function DTe(e,t){var n=e.prefixCls,r=e.editable,a=e.locale,i=e.style;return!r||r.showAdd===!1?null:_.exports.createElement("button",{ref:t,type:"button",className:"".concat(n,"-nav-add"),style:i,"aria-label":(a==null?void 0:a.addAriaLabel)||"Add tab",onClick:function(s){r.onEdit("add",{event:s})}},r.addIcon||"+")}var a$=_.exports.forwardRef(DTe);function BTe(e,t){var n=e.prefixCls,r=e.id,a=e.tabs,i=e.locale,o=e.mobile,s=e.moreIcon,l=s===void 0?"More":s,u=e.moreTransitionName,c=e.style,f=e.className,d=e.editable,p=e.tabBarGutter,h=e.rtl,g=e.removeAriaLabel,v=e.onTabClick,b=e.popupClassName,y=_.exports.useState(!1),x=Le(y,2),k=x[0],T=x[1],C=_.exports.useState(null),I=Le(C,2),P=I[0],j=I[1],A="".concat(r,"-more-popup"),S="".concat(n,"-dropdown"),M=P!==null?"".concat(A,"-").concat(P):null,O=i==null?void 0:i.dropdownAriaLabel;function R(le,ue){le.preventDefault(),le.stopPropagation(),d.onEdit("remove",{key:ue,event:le})}var G=_.exports.createElement(t0,{onClick:function(ue){var ge=ue.key,be=ue.domEvent;v(ge,be),T(!1)},prefixCls:"".concat(S,"-menu"),id:A,tabIndex:-1,role:"listbox","aria-activedescendant":M,selectedKeys:[P],"aria-label":O!==void 0?O:"expanded dropdown"},a.map(function(le){var ue=d&&le.closable!==!1&&!le.disabled;return _.exports.createElement(Uy,{key:le.key,id:"".concat(A,"-").concat(le.key),role:"option","aria-controls":r&&"".concat(r,"-panel-").concat(le.key),disabled:le.disabled},_.exports.createElement("span",null,le.tab),ue&&_.exports.createElement("button",{type:"button","aria-label":g||"remove",tabIndex:0,className:"".concat(S,"-menu-item-remove"),onClick:function(be){be.stopPropagation(),R(be,le.key)}},le.closeIcon||d.removeIcon||"\xD7"))}));function ee(le){for(var ue=a.filter(function(Rt){return!Rt.disabled}),ge=ue.findIndex(function(Rt){return Rt.key===P})||0,be=ue.length,ze=0;ze<be;ze+=1){ge=(ge+le+be)%be;var Lt=ue[ge];if(!Lt.disabled){j(Lt.key);return}}}function re(le){var ue=le.which;if(!k){[St.DOWN,St.SPACE,St.ENTER].includes(ue)&&(T(!0),le.preventDefault());return}switch(ue){case St.UP:ee(-1),le.preventDefault();break;case St.DOWN:ee(1),le.preventDefault();break;case St.ESC:T(!1);break;case St.SPACE:case St.ENTER:P!==null&&v(P,le);break}}_.exports.useEffect(function(){var le=document.getElementById(M);le&&le.scrollIntoView&&le.scrollIntoView(!1)},[P]),_.exports.useEffect(function(){k||j(null)},[k]);var X=m({},h?"marginRight":"marginLeft",p);a.length||(X.visibility="hidden",X.order=1);var K=Xt(m({},"".concat(S,"-rtl"),h)),ae=o?null:_.exports.createElement(HEe,{prefixCls:S,overlay:G,trigger:["hover"],visible:k,transitionName:u,onVisibleChange:T,overlayClassName:Xt(K,b),mouseEnterDelay:.1,mouseLeaveDelay:.1},_.exports.createElement("button",{type:"button",className:"".concat(n,"-nav-more"),style:X,tabIndex:-1,"aria-hidden":"true","aria-haspopup":"listbox","aria-controls":A,id:"".concat(r,"-more"),"aria-expanded":k,onKeyDown:re},l));return _.exports.createElement("div",{className:Xt("".concat(n,"-nav-operations"),f),style:c,ref:t},ae,_.exports.createElement(a$,{prefixCls:n,locale:i,editable:d}))}var zTe=_.exports.memo(_.exports.forwardRef(BTe),function(e,t){return t.tabMoving}),pS=_.exports.createContext(null),UTe=.1,HI=.01,dv=20,WI=Math.pow(.995,dv);function $Te(e,t){var n=_.exports.useState(),r=Le(n,2),a=r[0],i=r[1],o=_.exports.useState(0),s=Le(o,2),l=s[0],u=s[1],c=_.exports.useState(0),f=Le(c,2),d=f[0],p=f[1],h=_.exports.useState(),g=Le(h,2),v=g[0],b=g[1],y=_.exports.useRef();function x(j){var A=j.touches[0],S=A.screenX,M=A.screenY;i({x:S,y:M}),window.clearInterval(y.current)}function k(j){if(!!a){j.preventDefault();var A=j.touches[0],S=A.screenX,M=A.screenY;i({x:S,y:M});var O=S-a.x,R=M-a.y;t(O,R);var G=Date.now();u(G),p(G-l),b({x:O,y:R})}}function T(){if(!!a&&(i(null),b(null),v)){var j=v.x/d,A=v.y/d,S=Math.abs(j),M=Math.abs(A);if(Math.max(S,M)<UTe)return;var O=j,R=A;y.current=window.setInterval(function(){if(Math.abs(O)<HI&&Math.abs(R)<HI){window.clearInterval(y.current);return}O*=WI,R*=WI,t(O*dv,R*dv)},dv)}}var C=_.exports.useRef();function I(j){var A=j.deltaX,S=j.deltaY,M=0,O=Math.abs(A),R=Math.abs(S);O===R?M=C.current==="x"?A:S:O>R?(M=A,C.current="x"):(M=S,C.current="y"),t(-M,-M)&&j.preventDefault()}var P=_.exports.useRef(null);P.current={onTouchStart:x,onTouchMove:k,onTouchEnd:T,onWheel:I},_.exports.useEffect(function(){function j(O){P.current.onTouchStart(O)}function A(O){P.current.onTouchMove(O)}function S(O){P.current.onTouchEnd(O)}function M(O){P.current.onWheel(O)}return document.addEventListener("touchmove",A,{passive:!1}),document.addEventListener("touchend",S,{passive:!1}),e.current.addEventListener("touchstart",j,{passive:!1}),e.current.addEventListener("wheel",M),function(){document.removeEventListener("touchmove",A),document.removeEventListener("touchend",S)}},[])}function VTe(){var e=_.exports.useRef(new Map);function t(r){return e.current.has(r)||e.current.set(r,_.exports.createRef()),e.current.get(r)}function n(r){e.current.delete(r)}return[t,n]}function YI(e,t){var n=_.exports.useRef(e),r=_.exports.useState({}),a=Le(r,2),i=a[1];function o(s){var l=typeof s=="function"?s(n.current):s;l!==n.current&&t(l,n.current),n.current=l,i({})}return[n.current,o]}var XI=function(t){var n=t.position,r=t.prefixCls,a=t.extra;if(!a)return null;var i,o={};return a&&hr(a)==="object"&&!_.exports.isValidElement(a)?o=a:o.right=a,n==="right"&&(i=o.right),n==="left"&&(i=o.left),i?_.exports.createElement("div",{className:"".concat(r,"-extra-content")},i):null};function jTe(e,t){var n,r=_.exports.useContext(pS),a=r.prefixCls,i=r.tabs,o=e.className,s=e.style,l=e.id,u=e.animated,c=e.activeKey,f=e.rtl,d=e.extra,p=e.editable,h=e.locale,g=e.tabPosition,v=e.tabBarGutter,b=e.children,y=e.onTabClick,x=e.onTabScroll,k=_.exports.useRef(),T=_.exports.useRef(),C=_.exports.useRef(),I=_.exports.useRef(),P=VTe(),j=Le(P,2),A=j[0],S=j[1],M=g==="top"||g==="bottom",O=YI(0,function(En,on){M&&x&&x({direction:En>on?"left":"right"})}),R=Le(O,2),G=R[0],ee=R[1],re=YI(0,function(En,on){!M&&x&&x({direction:En>on?"top":"bottom"})}),X=Le(re,2),K=X[0],ae=X[1],le=_.exports.useState(0),ue=Le(le,2),ge=ue[0],be=ue[1],ze=_.exports.useState(0),Lt=Le(ze,2),Rt=Lt[0],qt=Lt[1],Me=_.exports.useState(null),Qe=Le(Me,2),et=Qe[0],ve=Qe[1],ft=_.exports.useState(null),kt=Le(ft,2),xt=kt[0],Ct=kt[1],ht=_.exports.useState(0),Gt=Le(ht,2),Ht=Gt[0],yn=Gt[1],or=_.exports.useState(0),Qn=Le(or,2),mr=Qn[0],E=Qn[1],Ce=PTe(new Map),Fe=Le(Ce,2),ut=Fe[0],Et=Fe[1],Jt=NTe(i,ut,ge),At="".concat(a,"-nav-operations-hidden"),Nt=0,Ot=0;M?f?(Nt=0,Ot=Math.max(0,ge-et)):(Nt=Math.min(0,et-ge),Ot=0):(Nt=Math.min(0,xt-Rt),Ot=0);function Wt(En){return En<Nt?Nt:En>Ot?Ot:En}var $t=_.exports.useRef(),Pn=_.exports.useState(),Yn=Le(Pn,2),Sa=Yn[0],ti=Yn[1];function Dr(){ti(Date.now())}function ni(){window.clearTimeout($t.current)}$Te(k,function(En,on){function Bn(zr,Aa){zr(function(ai){var Ro=Wt(ai+Aa);return Ro})}if(M){if(et>=ge)return!1;Bn(ee,En)}else{if(xt>=Rt)return!1;Bn(ae,on)}return ni(),Dr(),!0}),_.exports.useEffect(function(){return ni(),Sa&&($t.current=window.setTimeout(function(){ti(0)},100)),ni},[Sa]);function jr(){var En=arguments.length>0&&arguments[0]!==void 0?arguments[0]:c,on=Jt.get(En)||{width:0,height:0,left:0,right:0,top:0};if(M){var Bn=G;f?on.right<G?Bn=on.right:on.right+on.width>G+et&&(Bn=on.right+on.width-et):on.left<-G?Bn=-on.left:on.left+on.width>-G+et&&(Bn=-(on.left+on.width-et)),ae(0),ee(Wt(Bn))}else{var zr=K;on.top<-K?zr=-on.top:on.top+on.height>-K+xt&&(zr=-(on.top+on.height-xt)),ee(0),ae(Wt(zr))}}var mi=FTe(Jt,{width:et,height:xt,left:G,top:K},{width:ge,height:Rt},{width:Ht,height:mr},Re(Re({},e),{},{tabs:i})),Ua=Le(mi,2),Ti=Ua[0],Ca=Ua[1],Gr={};g==="top"||g==="bottom"?Gr[f?"marginRight":"marginLeft"]=v:Gr.marginTop=v;var en=i.map(function(En,on){var Bn=En.key;return _.exports.createElement(LTe,{id:l,prefixCls:a,key:Bn,tab:En,style:on===0?void 0:Gr,closable:En.closable,editable:p,active:Bn===c,renderWrapper:b,removeAriaLabel:h==null?void 0:h.removeAriaLabel,ref:A(Bn),onClick:function(Aa){y(Bn,Aa)},onRemove:function(){S(Bn)},onFocus:function(){jr(Bn),Dr(),k.current&&(f||(k.current.scrollLeft=0),k.current.scrollTop=0)}})}),pn=r$(function(){var En,on,Bn,zr,Aa,ai,Ro=((En=k.current)===null||En===void 0?void 0:En.offsetWidth)||0,Tu=((on=k.current)===null||on===void 0?void 0:on.offsetHeight)||0,_l=((Bn=I.current)===null||Bn===void 0?void 0:Bn.offsetWidth)||0,Po=((zr=I.current)===null||zr===void 0?void 0:zr.offsetHeight)||0;ve(Ro),Ct(Tu),yn(_l),E(Po);var va=(((Aa=T.current)===null||Aa===void 0?void 0:Aa.offsetWidth)||0)-_l,Ki=(((ai=T.current)===null||ai===void 0?void 0:ai.offsetHeight)||0)-Po;be(va),qt(Ki),Et(function(){var An=new Map;return i.forEach(function(xn){var zn=xn.key,qn=A(zn).current;qn&&An.set(zn,{width:qn.offsetWidth,height:qn.offsetHeight,left:qn.offsetLeft,top:qn.offsetTop})}),An})}),hn=i.slice(0,Ti),Br=i.slice(Ca+1),Ta=[].concat($e(hn),$e(Br)),Oo=_.exports.useState(),Mo=Le(Oo,2),Zi=Mo[0],ar=Mo[1],mn=Jt.get(c),nn=_.exports.useRef();function Zn(){ur.cancel(nn.current)}_.exports.useEffect(function(){var En={};return mn&&(M?(f?En.right=mn.right:En.left=mn.left,En.width=mn.width):(En.top=mn.top,En.height=mn.height)),Zn(),nn.current=ur(function(){ar(En)}),Zn},[mn,M,f]),_.exports.useEffect(function(){jr()},[c,mn,Jt,M]),_.exports.useEffect(function(){pn()},[f,v,c,i.map(function(En){return En.key}).join("_")]);var Dn=!!Ta.length,gn="".concat(a,"-nav-wrap"),oa,sa,ri,qi;return M?f?(sa=G>0,oa=G+et<ge):(oa=G<0,sa=-G+et<ge):(ri=K<0,qi=-K+xt<Rt),_.exports.createElement("div",{ref:t,role:"tablist",className:Xt("".concat(a,"-nav"),o),style:s,onKeyDown:function(){Dr()}},_.exports.createElement(XI,{position:"left",extra:d,prefixCls:a}),_.exports.createElement(Em,{onResize:pn},_.exports.createElement("div",{className:Xt(gn,(n={},m(n,"".concat(gn,"-ping-left"),oa),m(n,"".concat(gn,"-ping-right"),sa),m(n,"".concat(gn,"-ping-top"),ri),m(n,"".concat(gn,"-ping-bottom"),qi),n)),ref:k},_.exports.createElement(Em,{onResize:pn},_.exports.createElement("div",{ref:T,className:"".concat(a,"-nav-list"),style:{transform:"translate(".concat(G,"px, ").concat(K,"px)"),transition:Sa?"none":void 0}},en,_.exports.createElement(a$,{ref:I,prefixCls:a,locale:h,editable:p,style:Re(Re({},en.length===0?void 0:Gr),{},{visibility:Dn?"hidden":null})}),_.exports.createElement("div",{className:Xt("".concat(a,"-ink-bar"),m({},"".concat(a,"-ink-bar-animated"),u.inkBar)),style:Zi}))))),_.exports.createElement(zTe,yt({},e,{removeAriaLabel:h==null?void 0:h.removeAriaLabel,ref:C,prefixCls:a,tabs:Ta,className:!Dn&&At,tabMoving:!!Sa})),_.exports.createElement(XI,{position:"right",extra:d,prefixCls:a}))}var ZI=_.exports.forwardRef(jTe);function GTe(e){var t=e.id,n=e.activeKey,r=e.animated,a=e.tabPosition,i=e.rtl,o=e.destroyInactiveTabPane,s=_.exports.useContext(pS),l=s.prefixCls,u=s.tabs,c=r.tabPane,f=u.findIndex(function(d){return d.key===n});return _.exports.createElement("div",{className:Xt("".concat(l,"-content-holder"))},_.exports.createElement("div",{className:Xt("".concat(l,"-content"),"".concat(l,"-content-").concat(a),m({},"".concat(l,"-content-animated"),c)),style:f&&c?m({},i?"marginRight":"marginLeft","-".concat(f,"00%")):null},u.map(function(d){return _.exports.cloneElement(d.node,{key:d.key,prefixCls:l,tabKey:d.key,id:t,animated:c,active:d.key===n,destroyInactiveTabPane:o})})))}function i$(e){var t=e.prefixCls,n=e.forceRender,r=e.className,a=e.style,i=e.id,o=e.active,s=e.animated,l=e.destroyInactiveTabPane,u=e.tabKey,c=e.children,f=_.exports.useState(n),d=Le(f,2),p=d[0],h=d[1];_.exports.useEffect(function(){o?h(!0):l&&h(!1)},[o,l]);var g={};return o||(s?(g.visibility="hidden",g.height=0,g.overflowY="hidden"):g.display="none"),_.exports.createElement("div",{id:i&&"".concat(i,"-panel-").concat(u),role:"tabpanel",tabIndex:o?0:-1,"aria-labelledby":i&&"".concat(i,"-tab-").concat(u),"aria-hidden":!o,style:Re(Re({},g),a),className:Xt("".concat(t,"-tabpane"),o&&"".concat(t,"-tabpane-active"),r)},(o||p||n)&&c)}var HTe=["id","prefixCls","className","children","direction","activeKey","defaultActiveKey","editable","animated","tabPosition","tabBarGutter","tabBarStyle","tabBarExtraContent","locale","moreIcon","moreTransitionName","destroyInactiveTabPane","renderTabBar","onChange","onTabClick","onTabScroll","popupClassName"],qI=0;function WTe(e){return Od(e).map(function(t){if(_.exports.isValidElement(t)){var n=t.key!==void 0?String(t.key):void 0;return Re(Re({key:n},t.props),{},{node:t})}return null}).filter(function(t){return t})}function YTe(e,t){var n,r=e.id,a=e.prefixCls,i=a===void 0?"rc-tabs":a,o=e.className,s=e.children,l=e.direction,u=e.activeKey,c=e.defaultActiveKey,f=e.editable,d=e.animated,p=d===void 0?{inkBar:!0,tabPane:!1}:d,h=e.tabPosition,g=h===void 0?"top":h,v=e.tabBarGutter,b=e.tabBarStyle,y=e.tabBarExtraContent,x=e.locale,k=e.moreIcon,T=e.moreTransitionName,C=e.destroyInactiveTabPane,I=e.renderTabBar,P=e.onChange,j=e.onTabClick,A=e.onTabScroll,S=e.popupClassName,M=Nn(e,HTe),O=WTe(s),R=l==="rtl",G;p===!1?G={inkBar:!1,tabPane:!1}:p===!0?G={inkBar:!0,tabPane:!0}:G=Re({inkBar:!0,tabPane:!1},hr(p)==="object"?p:{});var ee=_.exports.useState(!1),re=Le(ee,2),X=re[0],K=re[1];_.exports.useEffect(function(){K(Ez())},[]);var ae=cu(function(){var ht;return(ht=O[0])===null||ht===void 0?void 0:ht.key},{value:u,defaultValue:c}),le=Le(ae,2),ue=le[0],ge=le[1],be=_.exports.useState(function(){return O.findIndex(function(ht){return ht.key===ue})}),ze=Le(be,2),Lt=ze[0],Rt=ze[1];_.exports.useEffect(function(){var ht=O.findIndex(function(Ht){return Ht.key===ue});if(ht===-1){var Gt;ht=Math.max(0,Math.min(Lt,O.length-1)),ge((Gt=O[ht])===null||Gt===void 0?void 0:Gt.key)}Rt(ht)},[O.map(function(ht){return ht.key}).join("_"),ue,Lt]);var qt=cu(null,{value:r}),Me=Le(qt,2),Qe=Me[0],et=Me[1],ve=g;X&&!["left","right"].includes(g)&&(ve="top"),_.exports.useEffect(function(){r||(et("rc-tabs-".concat(qI)),qI+=1)},[]);function ft(ht,Gt){j==null||j(ht,Gt);var Ht=ht!==ue;ge(ht),Ht&&(P==null||P(ht))}var kt={id:Qe,activeKey:ue,animated:G,tabPosition:ve,rtl:R,mobile:X},xt,Ct=Re(Re({},kt),{},{editable:f,locale:x,moreIcon:k,moreTransitionName:T,tabBarGutter:v,onTabClick:ft,onTabScroll:A,extra:y,style:b,panes:s,popupClassName:S});return I?xt=I(Ct,ZI):xt=_.exports.createElement(ZI,Ct),_.exports.createElement(pS.Provider,{value:{tabs:O,prefixCls:i}},_.exports.createElement("div",yt({ref:t,id:r,className:Xt(i,"".concat(i,"-").concat(ve),(n={},m(n,"".concat(i,"-mobile"),X),m(n,"".concat(i,"-editable"),f),m(n,"".concat(i,"-rtl"),R),n),o)},M),xt,_.exports.createElement(GTe,yt({destroyInactiveTabPane:C},kt,{animated:G}))))}var o$=_.exports.forwardRef(YTe);o$.TabPane=i$;var XTe=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]]);return n};function d2(e){var t=e.type,n=e.className,r=e.size,a=e.onEdit,i=e.hideAdd,o=e.centered,s=e.addIcon,l=XTe(e,["type","className","size","onEdit","hideAdd","centered","addIcon"]),u=l.prefixCls,c=l.moreIcon,f=c===void 0?_.exports.createElement(rEe,null):c,d=_.exports.useContext(Yi),p=d.getPrefixCls,h=d.direction,g=p("tabs",u),v;t==="editable-card"&&(v={onEdit:function(x,k){var T=k.key,C=k.event;a==null||a(x==="add"?C:T,x)},removeIcon:_.exports.createElement(Dke,null),addIcon:s||_.exports.createElement(RTe,null),showAdd:i!==!0});var b=p();return _.exports.createElement(R3.Consumer,null,function(y){var x,k=r!==void 0?r:y;return _.exports.createElement(o$,yt({direction:h,moreTransitionName:"".concat(b,"-slide-up")},l,{className:Xt((x={},m(x,"".concat(g,"-").concat(k),k),m(x,"".concat(g,"-card"),["card","editable-card"].includes(t)),m(x,"".concat(g,"-editable-card"),t==="editable-card"),m(x,"".concat(g,"-centered"),o),x),n),editable:v,moreIcon:f,prefixCls:g}))})}d2.TabPane=i$;var ZTe=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]]);return n},qTe=function(t){var n=t.prefixCls,r=t.className,a=t.hoverable,i=a===void 0?!0:a,o=ZTe(t,["prefixCls","className","hoverable"]);return _.exports.createElement(M3,null,function(s){var l=s.getPrefixCls,u=l("card",n),c=Xt("".concat(u,"-grid"),r,m({},"".concat(u,"-grid-hoverable"),i));return _.exports.createElement("div",yt({},o,{className:c}))})},s$=qTe,KTe=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]]);return n};function QTe(e){var t=e.map(function(n,r){return _.exports.createElement("li",{style:{width:"".concat(100/e.length,"%")},key:"action-".concat(r)},_.exports.createElement("span",null,n))});return t}var JTe=_.exports.forwardRef(function(e,t){var n,r,a=_.exports.useContext(Yi),i=a.getPrefixCls,o=a.direction,s=_.exports.useContext(R3),l=function(et){var ve;(ve=e.onTabChange)===null||ve===void 0||ve.call(e,et)},u=function(){var et;return _.exports.Children.forEach(e.children,function(ve){ve&&ve.type&&ve.type===s$&&(et=!0)}),et},c=e.prefixCls,f=e.className,d=e.extra,p=e.headStyle,h=p===void 0?{}:p,g=e.bodyStyle,v=g===void 0?{}:g,b=e.title,y=e.loading,x=e.bordered,k=x===void 0?!0:x,T=e.size,C=e.type,I=e.cover,P=e.actions,j=e.tabList,A=e.children,S=e.activeTabKey,M=e.defaultActiveTabKey,O=e.tabBarExtraContent,R=e.hoverable,G=e.tabProps,ee=G===void 0?{}:G,re=KTe(e,["prefixCls","className","extra","headStyle","bodyStyle","title","loading","bordered","size","type","cover","actions","tabList","children","activeTabKey","defaultActiveTabKey","tabBarExtraContent","hoverable","tabProps"]),X=i("card",c),K=_.exports.createElement(ATe,{loading:!0,active:!0,paragraph:{rows:4},title:!1},A),ae=S!==void 0,le=yt(yt({},ee),(n={},m(n,ae?"activeKey":"defaultActiveKey",ae?S:M),m(n,"tabBarExtraContent",O),n)),ue,ge=j&&j.length?_.exports.createElement(d2,yt({size:"large"},le,{className:"".concat(X,"-head-tabs"),onChange:l}),j.map(function(Qe){return _.exports.createElement(d2.TabPane,{tab:Qe.tab,disabled:Qe.disabled,key:Qe.key})})):null;(b||d||ge)&&(ue=_.exports.createElement("div",{className:"".concat(X,"-head"),style:h},_.exports.createElement("div",{className:"".concat(X,"-head-wrapper")},b&&_.exports.createElement("div",{className:"".concat(X,"-head-title")},b),d&&_.exports.createElement("div",{className:"".concat(X,"-extra")},d)),ge));var be=I?_.exports.createElement("div",{className:"".concat(X,"-cover")},I):null,ze=_.exports.createElement("div",{className:"".concat(X,"-body"),style:v},y?K:A),Lt=P&&P.length?_.exports.createElement("ul",{className:"".concat(X,"-actions")},QTe(P)):null,Rt=Nc(re,["onTabChange"]),qt=T||s,Me=Xt(X,(r={},m(r,"".concat(X,"-loading"),y),m(r,"".concat(X,"-bordered"),k),m(r,"".concat(X,"-hoverable"),R),m(r,"".concat(X,"-contain-grid"),u()),m(r,"".concat(X,"-contain-tabs"),j&&j.length),m(r,"".concat(X,"-").concat(qt),qt),m(r,"".concat(X,"-type-").concat(C),!!C),m(r,"".concat(X,"-rtl"),o==="rtl"),r),f);return _.exports.createElement("div",yt({ref:t},Rt,{className:Me}),ue,be,ze,Lt)}),eAe=JTe,tAe=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]]);return n},nAe=function(t){return _.exports.createElement(M3,null,function(n){var r=n.getPrefixCls,a=t.prefixCls,i=t.className,o=t.avatar,s=t.title,l=t.description,u=tAe(t,["prefixCls","className","avatar","title","description"]),c=r("card",a),f=Xt("".concat(c,"-meta"),i),d=o?_.exports.createElement("div",{className:"".concat(c,"-meta-avatar")},o):null,p=s?_.exports.createElement("div",{className:"".concat(c,"-meta-title")},s):null,h=l?_.exports.createElement("div",{className:"".concat(c,"-meta-description")},l):null,g=p||h?_.exports.createElement("div",{className:"".concat(c,"-meta-detail")},p,h):null;return _.exports.createElement("div",yt({},u,{className:f}),d,g)})},rAe=nAe,hS=eAe;hS.Grid=s$;hS.Meta=rAe;var aAe=hS,Dc=_.exports.createContext({min:0,max:0,direction:"ltr",step:1,includedStart:0,includedEnd:0,tabIndex:0});function p2(e,t,n){return(e-t)/(n-t)}function mS(e,t,n,r){var a=p2(t,n,r),i={};switch(e){case"rtl":i.right="".concat(a*100,"%"),i.transform="translateX(50%)";break;case"btt":i.bottom="".concat(a*100,"%"),i.transform="translateY(50%)";break;case"ttb":i.top="".concat(a*100,"%"),i.transform="translateY(-50%)";break;default:i.left="".concat(a*100,"%"),i.transform="translateX(-50%)";break}return i}function Hf(e,t){return Array.isArray(e)?e[t]:e}var iAe=["prefixCls","value","valueIndex","onStartMove","style","render","dragging","onOffsetChange"],oAe=_.exports.forwardRef(function(e,t){var n,r,a=e.prefixCls,i=e.value,o=e.valueIndex,s=e.onStartMove,l=e.style,u=e.render,c=e.dragging,f=e.onOffsetChange,d=Nn(e,iAe),p=_.exports.useContext(Dc),h=p.min,g=p.max,v=p.direction,b=p.disabled,y=p.range,x=p.tabIndex,k=p.ariaLabelForHandle,T=p.ariaLabelledByForHandle,C=p.ariaValueTextFormatterForHandle,I="".concat(a,"-handle"),P=function(O){b||s(O,o)},j=function(O){if(!b){var R=null;switch(O.which||O.keyCode){case St.LEFT:R=v==="ltr"||v==="btt"?-1:1;break;case St.RIGHT:R=v==="ltr"||v==="btt"?1:-1;break;case St.UP:R=v!=="ttb"?1:-1;break;case St.DOWN:R=v!=="ttb"?-1:1;break;case St.HOME:R="min";break;case St.END:R="max";break;case St.PAGE_UP:R=2;break;case St.PAGE_DOWN:R=-2;break}R!==null&&(O.preventDefault(),f(R,o))}},A=mS(v,i,h,g),S=_.exports.createElement("div",yt({ref:t,className:Xt(I,(n={},m(n,"".concat(I,"-").concat(o+1),y),m(n,"".concat(I,"-dragging"),c),n)),style:Re(Re({},A),l),onMouseDown:P,onTouchStart:P,onKeyDown:j,tabIndex:b?null:Hf(x,o),role:"slider","aria-valuemin":h,"aria-valuemax":g,"aria-valuenow":i,"aria-disabled":b,"aria-label":Hf(k,o),"aria-labelledby":Hf(T,o),"aria-valuetext":(r=Hf(C,o))===null||r===void 0?void 0:r(i)},d));return u&&(S=u(S,{index:o,prefixCls:a,value:i,dragging:c})),S}),sAe=["prefixCls","style","onStartMove","onOffsetChange","values","handleRender","draggingIndex"],lAe=_.exports.forwardRef(function(e,t){var n=e.prefixCls,r=e.style,a=e.onStartMove,i=e.onOffsetChange,o=e.values,s=e.handleRender,l=e.draggingIndex,u=Nn(e,sAe),c=_.exports.useRef({});return _.exports.useImperativeHandle(t,function(){return{focus:function(d){var p;(p=c.current[d])===null||p===void 0||p.focus()}}}),_.exports.createElement(_.exports.Fragment,null,o.map(function(f,d){return _.exports.createElement(oAe,yt({ref:function(h){h?c.current[d]=h:delete c.current[d]},dragging:l===d,prefixCls:n,style:Hf(r,d),key:d,value:f,valueIndex:d,onStartMove:a,onOffsetChange:i,render:s},u))}))});function KI(e){var t="touches"in e?e.touches[0]:e;return{pageX:t.pageX,pageY:t.pageY}}function uAe(e,t,n,r,a,i,o,s,l){var u=_.exports.useState(null),c=Le(u,2),f=c[0],d=c[1],p=_.exports.useState(-1),h=Le(p,2),g=h[0],v=h[1],b=_.exports.useState(n),y=Le(b,2),x=y[0],k=y[1],T=_.exports.useState(n),C=Le(T,2),I=C[0],P=C[1],j=_.exports.useRef(null),A=_.exports.useRef(null);_.exports.useEffect(function(){g===-1&&k(n)},[n,g]),_.exports.useEffect(function(){return function(){document.removeEventListener("mousemove",j.current),document.removeEventListener("mouseup",A.current),document.removeEventListener("touchmove",j.current),document.removeEventListener("touchend",A.current)}},[]);var S=function(re,X){x.some(function(K,ae){return K!==re[ae]})&&(X!==void 0&&d(X),k(re),o(re))},M=function(re,X){if(re===-1){var K=I[0],ae=I[I.length-1],le=r-K,ue=a-ae,ge=X*(a-r);ge=Math.max(ge,le),ge=Math.min(ge,ue);var be=i(K+ge);ge=be-K;var ze=I.map(function(Me){return Me+ge});S(ze)}else{var Lt=(a-r)*X,Rt=$e(x);Rt[re]=I[re];var qt=l(Rt,Lt,re,"dist");S(qt.values,qt.value)}},O=_.exports.useRef(M);O.current=M;var R=function(re,X){re.stopPropagation();var K=n[X];v(X),d(K),P(n);var ae=KI(re),le=ae.pageX,ue=ae.pageY,ge=function(Lt){Lt.preventDefault();var Rt=KI(Lt),qt=Rt.pageX,Me=Rt.pageY,Qe=qt-le,et=Me-ue,ve=e.current.getBoundingClientRect(),ft=ve.width,kt=ve.height,xt;switch(t){case"btt":xt=-et/kt;break;case"ttb":xt=et/kt;break;case"rtl":xt=-Qe/ft;break;default:xt=Qe/ft}O.current(X,xt)},be=function ze(Lt){Lt.preventDefault(),document.removeEventListener("mouseup",ze),document.removeEventListener("mousemove",ge),document.removeEventListener("touchend",ze),document.removeEventListener("touchmove",ge),j.current=null,A.current=null,v(-1),s()};document.addEventListener("mouseup",be),document.addEventListener("mousemove",ge),document.addEventListener("touchend",be),document.addEventListener("touchmove",ge),j.current=ge,A.current=be},G=_.exports.useMemo(function(){var ee=$e(n).sort(function(X,K){return X-K}),re=$e(x).sort(function(X,K){return X-K});return ee.every(function(X,K){return X===re[K]})?x:n},[n,x]);return[g,f,G,R]}function cAe(e){var t=e.prefixCls,n=e.style,r=e.start,a=e.end,i=e.index,o=e.onStartMove,s=_.exports.useContext(Dc),l=s.direction,u=s.min,c=s.max,f=s.disabled,d=s.range,p="".concat(t,"-track"),h=p2(r,u,c),g=p2(a,u,c),v=function(x){!f&&o&&o(x,-1)},b={};switch(l){case"rtl":b.right="".concat(h*100,"%"),b.width="".concat(g*100-h*100,"%");break;case"btt":b.bottom="".concat(h*100,"%"),b.height="".concat(g*100-h*100,"%");break;case"ttb":b.top="".concat(h*100,"%"),b.height="".concat(g*100-h*100,"%");break;default:b.left="".concat(h*100,"%"),b.width="".concat(g*100-h*100,"%")}return _.exports.createElement("div",{className:Xt(p,d&&"".concat(p,"-").concat(i+1)),style:Re(Re({},b),n),onMouseDown:v,onTouchStart:v})}function fAe(e){var t=e.prefixCls,n=e.style,r=e.values,a=e.startPoint,i=e.onStartMove,o=_.exports.useContext(Dc),s=o.included,l=o.range,u=o.min,c=_.exports.useMemo(function(){if(!l){if(r.length===0)return[];var f=a!=null?a:u,d=r[0];return[{start:Math.min(f,d),end:Math.max(f,d)}]}for(var p=[],h=0;h<r.length-1;h+=1)p.push({start:r[h],end:r[h+1]});return p},[r,l,a,u]);return s?c.map(function(f,d){var p=f.start,h=f.end;return _.exports.createElement(cAe,{index:d,prefixCls:t,style:Hf(n,d),start:p,end:h,key:d,onStartMove:i})}):null}function dAe(e){var t=e.prefixCls,n=e.style,r=e.children,a=e.value,i=e.onClick,o=_.exports.useContext(Dc),s=o.min,l=o.max,u=o.direction,c=o.includedStart,f=o.includedEnd,d=o.included,p="".concat(t,"-text"),h=mS(u,a,s,l);return _.exports.createElement("span",{className:Xt(p,m({},"".concat(p,"-active"),d&&c<=a&&a<=f)),style:Re(Re({},h),n),onMouseDown:function(v){v.stopPropagation()},onClick:function(){i(a)}},r)}function pAe(e){var t=e.prefixCls,n=e.marks,r=e.onClick,a="".concat(t,"-mark");return n.length?_.exports.createElement("div",{className:a},n.map(function(i){var o=i.value,s=i.style,l=i.label;return _.exports.createElement(dAe,{key:o,prefixCls:a,style:s,value:o,onClick:r},l)})):null}function hAe(e){var t=e.prefixCls,n=e.value,r=e.style,a=e.activeStyle,i=_.exports.useContext(Dc),o=i.min,s=i.max,l=i.direction,u=i.included,c=i.includedStart,f=i.includedEnd,d="".concat(t,"-dot"),p=u&&c<=n&&n<=f,h=Re(Re({},mS(l,n,o,s)),r);return p&&(h=Re(Re({},h),a)),_.exports.createElement("span",{className:Xt(d,m({},"".concat(d,"-active"),p)),style:h})}function mAe(e){var t=e.prefixCls,n=e.marks,r=e.dots,a=e.style,i=e.activeStyle,o=_.exports.useContext(Dc),s=o.min,l=o.max,u=o.step,c=_.exports.useMemo(function(){var f=new Set;if(n.forEach(function(p){f.add(p.value)}),r)for(var d=s;d<=l;)f.add(d),d+=u;return Array.from(f)},[s,l,u,r,n]);return _.exports.createElement("div",{className:"".concat(t,"-step")},c.map(function(f){return _.exports.createElement(hAe,{prefixCls:t,key:f,value:f,style:a,activeStyle:i})}))}function gAe(e,t,n,r,a,i){var o=_.exports.useCallback(function(p){var h=isFinite(p)?p:e;return h=Math.min(t,p),h=Math.max(e,h),h},[e,t]),s=_.exports.useCallback(function(p){if(n!==null){var h=e+Math.round((o(p)-e)/n)*n,g=function(x){return(String(x).split(".")[1]||"").length},v=Math.max(g(n),g(t),g(e)),b=Number(h.toFixed(v));return e<=b&&b<=t?b:null}return null},[n,e,t,o]),l=_.exports.useCallback(function(p){var h=o(p),g=r.map(function(y){return y.value});n!==null&&g.push(s(p)),g.push(e,t);var v=g[0],b=t-e;return g.forEach(function(y){var x=Math.abs(h-y);x<=b&&(v=y,b=x)}),v},[e,t,r,n,o,s]),u=function p(h,g,v){var b=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"unit";if(typeof g=="number"){var y,x=h[v],k=x+g,T=[];r.forEach(function(A){T.push(A.value)}),T.push(e,t),T.push(s(x));var C=g>0?1:-1;b==="unit"?T.push(s(x+C*n)):T.push(s(k)),T=T.filter(function(A){return A!==null}).filter(function(A){return g<0?A<=x:A>=x}),b==="unit"&&(T=T.filter(function(A){return A!==x}));var I=b==="unit"?x:k;y=T[0];var P=Math.abs(y-I);if(T.forEach(function(A){var S=Math.abs(A-I);S<P&&(y=A,P=S)}),y===void 0)return g<0?e:t;if(b==="dist")return y;if(Math.abs(g)>1){var j=$e(h);return j[v]=y,p(j,g-C,v,b)}return y}else{if(g==="min")return e;if(g==="max")return t}},c=function(h,g,v){var b=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"unit",y=h[v],x=u(h,g,v,b);return{value:x,changed:x!==y}},f=function(h){return i===null&&h===0||typeof i=="number"&&h<i},d=function(h,g,v){var b=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"unit",y=h.map(l),x=y[v],k=u(y,g,v,b);if(y[v]=k,a===!1){var T=i||0;v>0&&y[v-1]!==x&&(y[v]=Math.max(y[v],y[v-1]+T)),v<y.length-1&&y[v+1]!==x&&(y[v]=Math.min(y[v],y[v+1]-T))}else if(typeof i=="number"||i===null){for(var C=v+1;C<y.length;C+=1)for(var I=!0;f(y[C]-y[C-1])&&I;){var P=c(y,1,C);y[C]=P.value,I=P.changed}for(var j=v;j>0;j-=1)for(var A=!0;f(y[j]-y[j-1])&&A;){var S=c(y,-1,j-1);y[j-1]=S.value,A=S.changed}for(var M=y.length-1;M>0;M-=1)for(var O=!0;f(y[M]-y[M-1])&&O;){var R=c(y,-1,M-1);y[M-1]=R.value,O=R.changed}for(var G=0;G<y.length-1;G+=1)for(var ee=!0;f(y[G+1]-y[G])&&ee;){var re=c(y,1,G+1);y[G+1]=re.value,ee=re.changed}}return{value:y[v],values:y}};return[l,d]}var vAe=_.exports.forwardRef(function(e,t){var n,r=e.prefixCls,a=r===void 0?"rc-slider":r,i=e.className,o=e.style,s=e.disabled,l=s===void 0?!1:s,u=e.autoFocus,c=e.onFocus,f=e.onBlur,d=e.min,p=d===void 0?0:d,h=e.max,g=h===void 0?100:h,v=e.step,b=v===void 0?1:v,y=e.value,x=e.defaultValue,k=e.range,T=e.count,C=e.onChange,I=e.onBeforeChange,P=e.onAfterChange,j=e.allowCross,A=j===void 0?!0:j,S=e.pushable,M=S===void 0?!1:S,O=e.draggableTrack,R=e.reverse,G=e.vertical,ee=e.included,re=ee===void 0?!0:ee,X=e.startPoint,K=e.trackStyle,ae=e.handleStyle,le=e.railStyle,ue=e.dotStyle,ge=e.activeDotStyle,be=e.marks,ze=e.dots,Lt=e.handleRender,Rt=e.tabIndex,qt=Rt===void 0?0:Rt,Me=e.ariaLabelForHandle,Qe=e.ariaLabelledByForHandle,et=e.ariaValueTextFormatterForHandle,ve=_.exports.useRef(),ft=_.exports.useRef(),kt=_.exports.useMemo(function(){return G?R?"ttb":"btt":R?"rtl":"ltr"},[R,G]),xt=_.exports.useMemo(function(){return isFinite(p)?p:0},[p]),Ct=_.exports.useMemo(function(){return isFinite(g)?g:100},[g]),ht=_.exports.useMemo(function(){return b!==null&&b<=0?1:b},[b]),Gt=_.exports.useMemo(function(){return M===!0?ht:M>=0?M:!1},[M,ht]),Ht=_.exports.useMemo(function(){var ar=Object.keys(be||{});return ar.map(function(mn){var nn=be[mn],Zn={value:Number(mn)};return nn&&hr(nn)==="object"&&!_.exports.isValidElement(nn)&&("label"in nn||"style"in nn)?(Zn.style=nn.style,Zn.label=nn.label):Zn.label=nn,Zn}).filter(function(mn){var nn=mn.label;return nn||typeof nn=="number"}).sort(function(mn,nn){return mn.value-nn.value})},[be]),yn=gAe(xt,Ct,ht,Ht,A,Gt),or=Le(yn,2),Qn=or[0],mr=or[1],E=cu(x,{value:y}),Ce=Le(E,2),Fe=Ce[0],ut=Ce[1],Et=_.exports.useMemo(function(){var ar=Fe==null?[]:Array.isArray(Fe)?Fe:[Fe],mn=Le(ar,1),nn=mn[0],Zn=nn===void 0?xt:nn,Dn=Fe===null?[]:[Zn];if(k){if(Dn=$e(ar),T||Fe===void 0){var gn=T>=0?T+1:2;for(Dn=Dn.slice(0,gn);Dn.length<gn;){var oa;Dn.push((oa=Dn[Dn.length-1])!==null&&oa!==void 0?oa:xt)}}Dn.sort(function(sa,ri){return sa-ri})}return Dn.forEach(function(sa,ri){Dn[ri]=Qn(sa)}),Dn},[Fe,k,xt,T,Qn]),Jt=_.exports.useRef(Et);Jt.current=Et;var At=function(mn){return k?mn:mn[0]},Nt=function(mn){var nn=$e(mn).sort(function(Zn,Dn){return Zn-Dn});C&&!B3(nn,Jt.current)&&C(At(nn)),ut(nn)},Ot=function(mn){if(!l){var nn=0,Zn=Ct-xt;Et.forEach(function(gn,oa){var sa=Math.abs(mn-gn);sa<=Zn&&(Zn=sa,nn=oa)});var Dn=$e(Et);Dn[nn]=mn,k&&!Et.length&&T===void 0&&Dn.push(mn),I==null||I(At(Dn)),Nt(Dn),P==null||P(At(Dn))}},Wt=function(mn){mn.preventDefault();var nn=ft.current.getBoundingClientRect(),Zn=nn.width,Dn=nn.height,gn=nn.left,oa=nn.top,sa=nn.bottom,ri=nn.right,qi=mn.clientX,En=mn.clientY,on;switch(kt){case"btt":on=(sa-En)/Dn;break;case"ttb":on=(En-oa)/Dn;break;case"rtl":on=(ri-qi)/Zn;break;default:on=(qi-gn)/Zn}var Bn=xt+on*(Ct-xt);Ot(Qn(Bn))},$t=_.exports.useState(null),Pn=Le($t,2),Yn=Pn[0],Sa=Pn[1],ti=function(mn,nn){if(!l){var Zn=mr(Et,mn,nn);I==null||I(At(Et)),Nt(Zn.values),P==null||P(At(Zn.values)),Sa(Zn.value)}};_.exports.useEffect(function(){if(Yn!==null){var ar=Et.indexOf(Yn);ar>=0&&ve.current.focus(ar)}Sa(null)},[Yn]);var Dr=_.exports.useMemo(function(){return O&&ht===null?!1:O},[O,ht]),ni=function(){P==null||P(At(Jt.current))},jr=uAe(ft,kt,Et,xt,Ct,Qn,Nt,ni,mr),mi=Le(jr,4),Ua=mi[0],Ti=mi[1],Ca=mi[2],Gr=mi[3],en=function(mn,nn){Gr(mn,nn),I==null||I(At(Jt.current))},pn=Ua!==-1;_.exports.useEffect(function(){if(!pn){var ar=Et.lastIndexOf(Ti);ve.current.focus(ar)}},[pn]);var hn=_.exports.useMemo(function(){return $e(Ca).sort(function(ar,mn){return ar-mn})},[Ca]),Br=_.exports.useMemo(function(){return k?[hn[0],hn[hn.length-1]]:[xt,hn[0]]},[hn,k,xt]),Ta=Le(Br,2),Oo=Ta[0],Mo=Ta[1];_.exports.useImperativeHandle(t,function(){return{focus:function(){ve.current.focus(0)},blur:function(){var mn=document,nn=mn.activeElement;ft.current.contains(nn)&&(nn==null||nn.blur())}}}),_.exports.useEffect(function(){u&&ve.current.focus(0)},[]);var Zi=_.exports.useMemo(function(){return{min:xt,max:Ct,direction:kt,disabled:l,step:ht,included:re,includedStart:Oo,includedEnd:Mo,range:k,tabIndex:qt,ariaLabelForHandle:Me,ariaLabelledByForHandle:Qe,ariaValueTextFormatterForHandle:et}},[xt,Ct,kt,l,ht,re,Oo,Mo,k,qt,Me,Qe,et]);return _.exports.createElement(Dc.Provider,{value:Zi},_.exports.createElement("div",{ref:ft,className:Xt(a,i,(n={},m(n,"".concat(a,"-disabled"),l),m(n,"".concat(a,"-vertical"),G),m(n,"".concat(a,"-horizontal"),!G),m(n,"".concat(a,"-with-marks"),Ht.length),n)),style:o,onMouseDown:Wt},_.exports.createElement("div",{className:"".concat(a,"-rail"),style:le}),_.exports.createElement(fAe,{prefixCls:a,style:K,values:hn,startPoint:X,onStartMove:Dr?en:null}),_.exports.createElement(mAe,{prefixCls:a,marks:Ht,dots:ze,style:ue,activeStyle:ge}),_.exports.createElement(lAe,{ref:ve,prefixCls:a,style:ae,values:Ca,draggingIndex:Ua,onStartMove:en,onOffsetChange:ti,onFocus:c,onBlur:f,handleRender:Lt}),_.exports.createElement(pAe,{prefixCls:a,marks:Ht,onClick:Ot})))}),bAe=_.exports.forwardRef(function(e,t){var n=e.visible,r=_.exports.useRef(null),a=_.exports.useRef(null);function i(){ur.cancel(a.current),a.current=null}function o(){a.current=ur(function(){var s;(s=r.current)===null||s===void 0||s.forcePopupAlign(),a.current=null})}return _.exports.useEffect(function(){return n?o():i(),i},[n,e.title]),_.exports.createElement(eEe,yt({ref:Zm(r,t)},e))}),yAe=bAe,xAe=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]]);return n},l$=_.exports.forwardRef(function(e,t){var n=_.exports.useContext(Yi),r=n.getPrefixCls,a=n.direction,i=n.getPopupContainer,o=_.exports.useState({}),s=Le(o,2),l=s[0],u=s[1],c=function(A,S){u(function(M){return yt(yt({},M),m({},A,S))})},f=function(A,S){return A||(S?a==="rtl"?"left":"right":"top")},d=e.prefixCls,p=e.tooltipPrefixCls,h=e.range,g=e.className,v=xAe(e,["prefixCls","tooltipPrefixCls","range","className"]),b=r("slider",d),y=r("tooltip",p),x=Xt(g,m({},"".concat(b,"-rtl"),a==="rtl"));a==="rtl"&&!v.vertical&&(v.reverse=!v.reverse);var k=_.exports.useMemo(function(){return h?hr(h)==="object"?[!0,h.draggableTrack]:[!0,!1]:[!1]},[h]),T=Le(k,2),C=T[0],I=T[1],P=function(A,S){var M=S.index,O=S.dragging,R=r(),G=e.tipFormatter,ee=e.tooltipVisible,re=e.tooltipPlacement,X=e.getTooltipPopupContainer,K=e.vertical,ae=G?l[M]||O:!1,le=ee||ee===void 0&&ae,ue=yt(yt({},A.props),{onMouseEnter:function(){return c(M,!0)},onMouseLeave:function(){return c(M,!1)}});return _.exports.createElement(yAe,{prefixCls:y,title:G?G(S.value):"",visible:le,placement:f(re,K),transitionName:"".concat(R,"-zoom-down"),key:M,overlayClassName:"".concat(b,"-tooltip"),getPopupContainer:X||i},_.exports.cloneElement(A,ue))};return _.exports.createElement(vAe,yt({},v,{step:v.step,range:C,draggableTrack:I,className:x,ref:t,prefixCls:b,handleRender:P}))});l$.defaultProps={tipFormatter:function(t){return typeof t=="number"?t.toString():""}};var _Ae=l$,wAe={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M715.8 493.5L335 165.1c-14.2-12.2-35-1.2-35 18.5v656.8c0 19.7 20.8 30.7 35 18.5l380.8-328.4c10.9-9.4 10.9-27.6 0-37z"}}]},name:"caret-right",theme:"outlined"},kAe=wAe,u$=function(t,n){return _.exports.createElement(Zd,Re(Re({},t),{},{ref:n,icon:kAe}))};u$.displayName="CaretRightOutlined";var EAe=_.exports.forwardRef(u$),SAe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M304 176h80v672h-80zm408 0h-64c-4.4 0-8 3.6-8 8v656c0 4.4 3.6 8 8 8h64c4.4 0 8-3.6 8-8V184c0-4.4-3.6-8-8-8z"}}]},name:"pause",theme:"outlined"},CAe=SAe,c$=function(t,n){return _.exports.createElement(Zd,Re(Re({},t),{},{ref:n,icon:CAe}))};c$.displayName="PauseOutlined";var TAe=_.exports.forwardRef(c$);function AAe(){const[e,t]=_.exports.useState([]),[n,r]=_.exports.useState(0),[a,i]=_.exports.useState(null),[o,s]=_.exports.useState(null);g_e(async()=>{const c=new h_e({id:"map",map:new eme({pitch:0,type:"amap",style:"dark",center:[120.22613525390624,36.14896463588831],zoom:10})}),f=new Tbe;f.source([],{parser:{type:"json",x:"lon",y:"lat"}}).shape("circle").size("value",[1,30]).color("value",["#34B6B7","#4AC5AF","#5FD3A6","#7BE39E","#A1EDB8","#CEF8D6"]).style({opacity:.5,strokeWidth:0}),c.addLayer(f),i(f);const d=await(await fetch("https://gw.alipayobjects.com/os/bmw-prod/2644525e-7d09-4f05-8254-99ac2e540686.json")).json();t(d.map(p=>({time:Math.floor(p.time/100)*2+p.time%100/30,data:p.data})))}),_.exports.useEffect(()=>{var f;const c=(f=e.find(d=>d.time===n))==null?void 0:f.data;a==null||a.setData(c,{parser:{type:"json",x:"lon",y:"lat"}})},[e,n,a]);const l=_.exports.useCallback(()=>{typeof o!="number"&&s(setInterval(()=>{r(c=>c>=47?0:c+1)},100))},[]),u=()=>{typeof o=="number"&&(clearInterval(o),s(null))};return VI("div",{className:"App",children:[tc("div",{id:"map"}),VI(aAe,{bodyStyle:{padding:"8px 16px"},style:{position:"absolute",bottom:50,width:300,left:"calc(50% - 150px)",zIndex:10,background:"#fff",textAlign:"center"},children:[tc(s3e,{shape:"circle",icon:typeof o=="number"?tc(TAe,{}):tc(EAe,{}),onClick:()=>{typeof o=="number"?u():l()}}),tc(_Ae,{value:n,min:0,max:47,step:1,tipFormatter:c=>(console.log(Mt().startOf("day").add((c!=null?c:0)*30*60*1e3).format("HH:mm")),Mt().startOf("day").add((c!=null?c:0)*30*60*1e3).format("HH:mm")),onChange:c=>{r(c),u()}})]})]})}G_.createRoot(document.getElementById("root")).render(tc(dr.StrictMode,{children:tc(AAe,{})}))});export default OAe();
