const Yz=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerpolicy&&(i.referrerPolicy=a.referrerpolicy),a.crossorigin==="use-credentials"?i.credentials="include":a.crossorigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(a){if(a.ep)return;a.ep=!0;const i=n(a);fetch(a.href,i)}};Yz();var bs=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function Zz(e){if(e.__esModule)return e;var t=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(e).forEach(function(n){var r=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,r.get?r:{enumerable:!0,get:function(){return e[n]}})}),t}var w={exports:{}},En={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yh=Symbol.for("react.element"),qz=Symbol.for("react.portal"),Kz=Symbol.for("react.fragment"),Qz=Symbol.for("react.strict_mode"),Jz=Symbol.for("react.profiler"),eU=Symbol.for("react.provider"),tU=Symbol.for("react.context"),nU=Symbol.for("react.forward_ref"),rU=Symbol.for("react.suspense"),aU=Symbol.for("react.memo"),iU=Symbol.for("react.lazy"),I3=Symbol.iterator;function oU(e){return e===null||typeof e!="object"?null:(e=I3&&e[I3]||e["@@iterator"],typeof e=="function"?e:null)}var y8={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},x8=Object.assign,w8={};function Mf(e,t,n){this.props=e,this.context=t,this.refs=w8,this.updater=n||y8}Mf.prototype.isReactComponent={};Mf.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Mf.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function _8(){}_8.prototype=Mf.prototype;function c_(e,t,n){this.props=e,this.context=t,this.refs=w8,this.updater=n||y8}var f_=c_.prototype=new _8;f_.constructor=c_;x8(f_,Mf.prototype);f_.isPureReactComponent=!0;var L3=Array.isArray,E8=Object.prototype.hasOwnProperty,d_={current:null},k8={key:!0,ref:!0,__self:!0,__source:!0};function S8(e,t,n){var r,a={},i=null,o=null;if(t!=null)for(r in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(i=""+t.key),t)E8.call(t,r)&&!k8.hasOwnProperty(r)&&(a[r]=t[r]);var s=arguments.length-2;if(s===1)a.children=n;else if(1<s){for(var l=Array(s),u=0;u<s;u++)l[u]=arguments[u+2];a.children=l}if(e&&e.defaultProps)for(r in s=e.defaultProps,s)a[r]===void 0&&(a[r]=s[r]);return{$$typeof:yh,type:e,key:i,ref:o,props:a,_owner:d_.current}}function sU(e,t){return{$$typeof:yh,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function p_(e){return typeof e=="object"&&e!==null&&e.$$typeof===yh}function lU(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var N3=/\/+/g;function ly(e,t){return typeof e=="object"&&e!==null&&e.key!=null?lU(""+e.key):t.toString(36)}function g0(e,t,n,r,a){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case yh:case qz:o=!0}}if(o)return o=e,a=a(o),e=r===""?"."+ly(o,0):r,L3(a)?(n="",e!=null&&(n=e.replace(N3,"$&/")+"/"),g0(a,t,n,"",function(u){return u})):a!=null&&(p_(a)&&(a=sU(a,n+(!a.key||o&&o.key===a.key?"":(""+a.key).replace(N3,"$&/")+"/")+e)),t.push(a)),1;if(o=0,r=r===""?".":r+":",L3(e))for(var s=0;s<e.length;s++){i=e[s];var l=r+ly(i,s);o+=g0(i,t,n,l,a)}else if(l=oU(e),typeof l=="function")for(e=l.call(e),s=0;!(i=e.next()).done;)i=i.value,l=r+ly(i,s++),o+=g0(i,t,n,l,a);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function bm(e,t,n){if(e==null)return e;var r=[],a=0;return g0(e,r,"","",function(i){return t.call(n,i,a++)}),r}function uU(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Xa={current:null},v0={transition:null},cU={ReactCurrentDispatcher:Xa,ReactCurrentBatchConfig:v0,ReactCurrentOwner:d_};En.Children={map:bm,forEach:function(e,t,n){bm(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return bm(e,function(){t++}),t},toArray:function(e){return bm(e,function(t){return t})||[]},only:function(e){if(!p_(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};En.Component=Mf;En.Fragment=Kz;En.Profiler=Jz;En.PureComponent=c_;En.StrictMode=Qz;En.Suspense=rU;En.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=cU;En.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=x8({},e.props),a=e.key,i=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,o=d_.current),t.key!==void 0&&(a=""+t.key),e.type&&e.type.defaultProps)var s=e.type.defaultProps;for(l in t)E8.call(t,l)&&!k8.hasOwnProperty(l)&&(r[l]=t[l]===void 0&&s!==void 0?s[l]:t[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){s=Array(l);for(var u=0;u<l;u++)s[u]=arguments[u+2];r.children=s}return{$$typeof:yh,type:e.type,key:a,ref:i,props:r,_owner:o}};En.createContext=function(e){return e={$$typeof:tU,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:eU,_context:e},e.Consumer=e};En.createElement=S8;En.createFactory=function(e){var t=S8.bind(null,e);return t.type=e,t};En.createRef=function(){return{current:null}};En.forwardRef=function(e){return{$$typeof:nU,render:e}};En.isValidElement=p_;En.lazy=function(e){return{$$typeof:iU,_payload:{_status:-1,_result:e},_init:uU}};En.memo=function(e,t){return{$$typeof:aU,type:e,compare:t===void 0?null:t}};En.startTransition=function(e){var t=v0.transition;v0.transition={};try{e()}finally{v0.transition=t}};En.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};En.useCallback=function(e,t){return Xa.current.useCallback(e,t)};En.useContext=function(e){return Xa.current.useContext(e)};En.useDebugValue=function(){};En.useDeferredValue=function(e){return Xa.current.useDeferredValue(e)};En.useEffect=function(e,t){return Xa.current.useEffect(e,t)};En.useId=function(){return Xa.current.useId()};En.useImperativeHandle=function(e,t,n){return Xa.current.useImperativeHandle(e,t,n)};En.useInsertionEffect=function(e,t){return Xa.current.useInsertionEffect(e,t)};En.useLayoutEffect=function(e,t){return Xa.current.useLayoutEffect(e,t)};En.useMemo=function(e,t){return Xa.current.useMemo(e,t)};En.useReducer=function(e,t,n){return Xa.current.useReducer(e,t,n)};En.useRef=function(e){return Xa.current.useRef(e)};En.useState=function(e){return Xa.current.useState(e)};En.useSyncExternalStore=function(e,t,n){return Xa.current.useSyncExternalStore(e,t,n)};En.useTransition=function(){return Xa.current.useTransition()};En.version="18.2.0";w.exports=En;var Lr=w.exports,Yx={},h_={exports:{}},Ei={},C8={exports:{}},T8={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(Y,J){var ae=Y.length;Y.push(J);e:for(;0<ae;){var le=ae-1>>>1,fe=Y[le];if(0<a(fe,J))Y[le]=J,Y[ae]=fe,ae=le;else break e}}function n(Y){return Y.length===0?null:Y[0]}function r(Y){if(Y.length===0)return null;var J=Y[0],ae=Y.pop();if(ae!==J){Y[0]=ae;e:for(var le=0,fe=Y.length,ge=fe>>>1;le<ge;){var we=2*(le+1)-1,Ve=Y[we],Lt=we+1,Nt=Y[Lt];if(0>a(Ve,ae))Lt<fe&&0>a(Nt,Ve)?(Y[le]=Nt,Y[Lt]=ae,le=Lt):(Y[le]=Ve,Y[we]=ae,le=we);else if(Lt<fe&&0>a(Nt,ae))Y[le]=Nt,Y[Lt]=ae,le=Lt;else break e}}return J}function a(Y,J){var ae=Y.sortIndex-J.sortIndex;return ae!==0?ae:Y.id-J.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var o=Date,s=o.now();e.unstable_now=function(){return o.now()-s}}var l=[],u=[],c=1,f=null,d=3,p=!1,h=!1,g=!1,v=typeof setTimeout=="function"?setTimeout:null,b=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate!="undefined"?setImmediate:null;typeof navigator!="undefined"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function x(Y){for(var J=n(u);J!==null;){if(J.callback===null)r(u);else if(J.startTime<=Y)r(u),J.sortIndex=J.expirationTime,t(l,J);else break;J=n(u)}}function E(Y){if(g=!1,x(Y),!h)if(n(l)!==null)h=!0,ee(T);else{var J=n(u);J!==null&&re(E,J.startTime-Y)}}function T(Y,J){h=!1,g&&(g=!1,b(P),P=-1),p=!0;var ae=d;try{for(x(J),f=n(l);f!==null&&(!(f.expirationTime>J)||Y&&!S());){var le=f.callback;if(typeof le=="function"){f.callback=null,d=f.priorityLevel;var fe=le(f.expirationTime<=J);J=e.unstable_now(),typeof fe=="function"?f.callback=fe:f===n(l)&&r(l),x(J)}else r(l);f=n(l)}if(f!==null)var ge=!0;else{var we=n(u);we!==null&&re(E,we.startTime-J),ge=!1}return ge}finally{f=null,d=ae,p=!1}}var C=!1,I=null,P=-1,j=5,A=-1;function S(){return!(e.unstable_now()-A<j)}function M(){if(I!==null){var Y=e.unstable_now();A=Y;var J=!0;try{J=I(!0,Y)}finally{J?O():(C=!1,I=null)}}else C=!1}var O;if(typeof y=="function")O=function(){y(M)};else if(typeof MessageChannel!="undefined"){var R=new MessageChannel,H=R.port2;R.port1.onmessage=M,O=function(){H.postMessage(null)}}else O=function(){v(M,0)};function ee(Y){I=Y,C||(C=!0,O())}function re(Y,J){P=v(function(){Y(e.unstable_now())},J)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(Y){Y.callback=null},e.unstable_continueExecution=function(){h||p||(h=!0,ee(T))},e.unstable_forceFrameRate=function(Y){0>Y||125<Y?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):j=0<Y?Math.floor(1e3/Y):5},e.unstable_getCurrentPriorityLevel=function(){return d},e.unstable_getFirstCallbackNode=function(){return n(l)},e.unstable_next=function(Y){switch(d){case 1:case 2:case 3:var J=3;break;default:J=d}var ae=d;d=J;try{return Y()}finally{d=ae}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(Y,J){switch(Y){case 1:case 2:case 3:case 4:case 5:break;default:Y=3}var ae=d;d=Y;try{return J()}finally{d=ae}},e.unstable_scheduleCallback=function(Y,J,ae){var le=e.unstable_now();switch(typeof ae=="object"&&ae!==null?(ae=ae.delay,ae=typeof ae=="number"&&0<ae?le+ae:le):ae=le,Y){case 1:var fe=-1;break;case 2:fe=250;break;case 5:fe=1073741823;break;case 4:fe=1e4;break;default:fe=5e3}return fe=ae+fe,Y={id:c++,callback:J,priorityLevel:Y,startTime:ae,expirationTime:fe,sortIndex:-1},ae>le?(Y.sortIndex=ae,t(u,Y),n(l)===null&&Y===n(u)&&(g?(b(P),P=-1):g=!0,re(E,ae-le))):(Y.sortIndex=fe,t(l,Y),h||p||(h=!0,ee(T))),Y},e.unstable_shouldYield=S,e.unstable_wrapCallback=function(Y){var J=d;return function(){var ae=d;d=J;try{return Y.apply(this,arguments)}finally{d=ae}}}})(T8);C8.exports=T8;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var A8=w.exports,wi=C8.exports;function ot(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var O8=new Set,Mp={};function Iu(e,t){lf(e,t),lf(e+"Capture",t)}function lf(e,t){for(Mp[e]=t,e=0;e<t.length;e++)O8.add(t[e])}var Ts=!(typeof window=="undefined"||typeof window.document=="undefined"||typeof window.document.createElement=="undefined"),Zx=Object.prototype.hasOwnProperty,fU=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,F3={},D3={};function dU(e){return Zx.call(D3,e)?!0:Zx.call(F3,e)?!1:fU.test(e)?D3[e]=!0:(F3[e]=!0,!1)}function pU(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function hU(e,t,n,r){if(t===null||typeof t=="undefined"||pU(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Ya(e,t,n,r,a,i,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=a,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=o}var Ea={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Ea[e]=new Ya(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Ea[t]=new Ya(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Ea[e]=new Ya(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Ea[e]=new Ya(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Ea[e]=new Ya(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Ea[e]=new Ya(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Ea[e]=new Ya(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Ea[e]=new Ya(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Ea[e]=new Ya(e,5,!1,e.toLowerCase(),null,!1,!1)});var m_=/[\-:]([a-z])/g;function g_(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(m_,g_);Ea[t]=new Ya(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(m_,g_);Ea[t]=new Ya(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(m_,g_);Ea[t]=new Ya(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Ea[e]=new Ya(e,1,!1,e.toLowerCase(),null,!1,!1)});Ea.xlinkHref=new Ya("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Ea[e]=new Ya(e,1,!1,e.toLowerCase(),null,!0,!0)});function v_(e,t,n,r){var a=Ea.hasOwnProperty(t)?Ea[t]:null;(a!==null?a.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(hU(t,n,a,r)&&(n=null),r||a===null?dU(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):a.mustUseProperty?e[a.propertyName]=n===null?a.type===3?!1:"":n:(t=a.attributeName,r=a.attributeNamespace,n===null?e.removeAttribute(t):(a=a.type,n=a===3||a===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var Rs=A8.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ym=Symbol.for("react.element"),Oc=Symbol.for("react.portal"),Mc=Symbol.for("react.fragment"),b_=Symbol.for("react.strict_mode"),qx=Symbol.for("react.profiler"),M8=Symbol.for("react.provider"),R8=Symbol.for("react.context"),y_=Symbol.for("react.forward_ref"),Kx=Symbol.for("react.suspense"),Qx=Symbol.for("react.suspense_list"),x_=Symbol.for("react.memo"),Qs=Symbol.for("react.lazy"),P8=Symbol.for("react.offscreen"),B3=Symbol.iterator;function hd(e){return e===null||typeof e!="object"?null:(e=B3&&e[B3]||e["@@iterator"],typeof e=="function"?e:null)}var wr=Object.assign,uy;function qd(e){if(uy===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);uy=t&&t[1]||""}return`
`+uy+e}var cy=!1;function fy(e,t){if(!e||cy)return"";cy=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var r=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){r=u}e.call(t.prototype)}else{try{throw Error()}catch(u){r=u}e()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var a=u.stack.split(`
`),i=r.stack.split(`
`),o=a.length-1,s=i.length-1;1<=o&&0<=s&&a[o]!==i[s];)s--;for(;1<=o&&0<=s;o--,s--)if(a[o]!==i[s]){if(o!==1||s!==1)do if(o--,s--,0>s||a[o]!==i[s]){var l=`
`+a[o].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}while(1<=o&&0<=s);break}}}finally{cy=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?qd(e):""}function mU(e){switch(e.tag){case 5:return qd(e.type);case 16:return qd("Lazy");case 13:return qd("Suspense");case 19:return qd("SuspenseList");case 0:case 2:case 15:return e=fy(e.type,!1),e;case 11:return e=fy(e.type.render,!1),e;case 1:return e=fy(e.type,!0),e;default:return""}}function Jx(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Mc:return"Fragment";case Oc:return"Portal";case qx:return"Profiler";case b_:return"StrictMode";case Kx:return"Suspense";case Qx:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case R8:return(e.displayName||"Context")+".Consumer";case M8:return(e._context.displayName||"Context")+".Provider";case y_:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case x_:return t=e.displayName||null,t!==null?t:Jx(e.type)||"Memo";case Qs:t=e._payload,e=e._init;try{return Jx(e(t))}catch{}}return null}function gU(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Jx(t);case 8:return t===b_?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function El(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function I8(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function vU(e){var t=I8(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n!="undefined"&&typeof n.get=="function"&&typeof n.set=="function"){var a=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function xm(e){e._valueTracker||(e._valueTracker=vU(e))}function L8(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=I8(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function H0(e){if(e=e||(typeof document!="undefined"?document:void 0),typeof e=="undefined")return null;try{return e.activeElement||e.body}catch{return e.body}}function e1(e,t){var n=t.checked;return wr({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n!=null?n:e._wrapperState.initialChecked})}function z3(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=El(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function N8(e,t){t=t.checked,t!=null&&v_(e,"checked",t,!1)}function t1(e,t){N8(e,t);var n=El(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?n1(e,t.type,n):t.hasOwnProperty("defaultValue")&&n1(e,t.type,El(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function U3(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function n1(e,t,n){(t!=="number"||H0(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var Kd=Array.isArray;function Xc(e,t,n,r){if(e=e.options,t){t={};for(var a=0;a<n.length;a++)t["$"+n[a]]=!0;for(n=0;n<e.length;n++)a=t.hasOwnProperty("$"+e[n].value),e[n].selected!==a&&(e[n].selected=a),a&&r&&(e[n].defaultSelected=!0)}else{for(n=""+El(n),t=null,a=0;a<e.length;a++){if(e[a].value===n){e[a].selected=!0,r&&(e[a].defaultSelected=!0);return}t!==null||e[a].disabled||(t=e[a])}t!==null&&(t.selected=!0)}}function r1(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(ot(91));return wr({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function $3(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(ot(92));if(Kd(n)){if(1<n.length)throw Error(ot(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:El(n)}}function F8(e,t){var n=El(t.value),r=El(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function V3(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function D8(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function a1(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?D8(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var wm,B8=function(e){return typeof MSApp!="undefined"&&MSApp.execUnsafeLocalFunction?function(t,n,r,a){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,a)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(wm=wm||document.createElement("div"),wm.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=wm.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Rp(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var cp={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},bU=["Webkit","ms","Moz","O"];Object.keys(cp).forEach(function(e){bU.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),cp[t]=cp[e]})});function z8(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||cp.hasOwnProperty(e)&&cp[e]?(""+t).trim():t+"px"}function U8(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,a=z8(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,a):e[n]=a}}var yU=wr({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function i1(e,t){if(t){if(yU[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(ot(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(ot(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(ot(61))}if(t.style!=null&&typeof t.style!="object")throw Error(ot(62))}}function o1(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var s1=null;function w_(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var l1=null,Yc=null,Zc=null;function j3(e){if(e=_h(e)){if(typeof l1!="function")throw Error(ot(280));var t=e.stateNode;t&&(t=Jg(t),l1(e.stateNode,e.type,t))}}function $8(e){Yc?Zc?Zc.push(e):Zc=[e]:Yc=e}function V8(){if(Yc){var e=Yc,t=Zc;if(Zc=Yc=null,j3(e),t)for(e=0;e<t.length;e++)j3(t[e])}}function j8(e,t){return e(t)}function G8(){}var dy=!1;function H8(e,t,n){if(dy)return e(t,n);dy=!0;try{return j8(e,t,n)}finally{dy=!1,(Yc!==null||Zc!==null)&&(G8(),V8())}}function Pp(e,t){var n=e.stateNode;if(n===null)return null;var r=Jg(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(ot(231,t,typeof n));return n}var u1=!1;if(Ts)try{var md={};Object.defineProperty(md,"passive",{get:function(){u1=!0}}),window.addEventListener("test",md,md),window.removeEventListener("test",md,md)}catch{u1=!1}function xU(e,t,n,r,a,i,o,s,l){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(c){this.onError(c)}}var fp=!1,W0=null,X0=!1,c1=null,wU={onError:function(e){fp=!0,W0=e}};function _U(e,t,n,r,a,i,o,s,l){fp=!1,W0=null,xU.apply(wU,arguments)}function EU(e,t,n,r,a,i,o,s,l){if(_U.apply(this,arguments),fp){if(fp){var u=W0;fp=!1,W0=null}else throw Error(ot(198));X0||(X0=!0,c1=u)}}function Lu(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function W8(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function G3(e){if(Lu(e)!==e)throw Error(ot(188))}function kU(e){var t=e.alternate;if(!t){if(t=Lu(e),t===null)throw Error(ot(188));return t!==e?null:e}for(var n=e,r=t;;){var a=n.return;if(a===null)break;var i=a.alternate;if(i===null){if(r=a.return,r!==null){n=r;continue}break}if(a.child===i.child){for(i=a.child;i;){if(i===n)return G3(a),e;if(i===r)return G3(a),t;i=i.sibling}throw Error(ot(188))}if(n.return!==r.return)n=a,r=i;else{for(var o=!1,s=a.child;s;){if(s===n){o=!0,n=a,r=i;break}if(s===r){o=!0,r=a,n=i;break}s=s.sibling}if(!o){for(s=i.child;s;){if(s===n){o=!0,n=i,r=a;break}if(s===r){o=!0,r=i,n=a;break}s=s.sibling}if(!o)throw Error(ot(189))}}if(n.alternate!==r)throw Error(ot(190))}if(n.tag!==3)throw Error(ot(188));return n.stateNode.current===n?e:t}function X8(e){return e=kU(e),e!==null?Y8(e):null}function Y8(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Y8(e);if(t!==null)return t;e=e.sibling}return null}var Z8=wi.unstable_scheduleCallback,H3=wi.unstable_cancelCallback,SU=wi.unstable_shouldYield,CU=wi.unstable_requestPaint,Nr=wi.unstable_now,TU=wi.unstable_getCurrentPriorityLevel,__=wi.unstable_ImmediatePriority,q8=wi.unstable_UserBlockingPriority,Y0=wi.unstable_NormalPriority,AU=wi.unstable_LowPriority,K8=wi.unstable_IdlePriority,Zg=null,Xo=null;function OU(e){if(Xo&&typeof Xo.onCommitFiberRoot=="function")try{Xo.onCommitFiberRoot(Zg,e,void 0,(e.current.flags&128)===128)}catch{}}var bo=Math.clz32?Math.clz32:PU,MU=Math.log,RU=Math.LN2;function PU(e){return e>>>=0,e===0?32:31-(MU(e)/RU|0)|0}var _m=64,Em=4194304;function Qd(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Z0(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,a=e.suspendedLanes,i=e.pingedLanes,o=n&268435455;if(o!==0){var s=o&~a;s!==0?r=Qd(s):(i&=o,i!==0&&(r=Qd(i)))}else o=n&~a,o!==0?r=Qd(o):i!==0&&(r=Qd(i));if(r===0)return 0;if(t!==0&&t!==r&&(t&a)===0&&(a=r&-r,i=t&-t,a>=i||a===16&&(i&4194240)!==0))return t;if((r&4)!==0&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-bo(t),a=1<<n,r|=e[n],t&=~a;return r}function IU(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function LU(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,a=e.expirationTimes,i=e.pendingLanes;0<i;){var o=31-bo(i),s=1<<o,l=a[o];l===-1?((s&n)===0||(s&r)!==0)&&(a[o]=IU(s,t)):l<=t&&(e.expiredLanes|=s),i&=~s}}function f1(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Q8(){var e=_m;return _m<<=1,(_m&4194240)===0&&(_m=64),e}function py(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function xh(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-bo(t),e[t]=n}function NU(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var a=31-bo(n),i=1<<a;t[a]=0,r[a]=-1,e[a]=-1,n&=~i}}function E_(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-bo(n),a=1<<r;a&t|e[r]&t&&(e[r]|=t),n&=~a}}var Wn=0;function J8(e){return e&=-e,1<e?4<e?(e&268435455)!==0?16:536870912:4:1}var eP,k_,tP,nP,rP,d1=!1,km=[],hl=null,ml=null,gl=null,Ip=new Map,Lp=new Map,nl=[],FU="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function W3(e,t){switch(e){case"focusin":case"focusout":hl=null;break;case"dragenter":case"dragleave":ml=null;break;case"mouseover":case"mouseout":gl=null;break;case"pointerover":case"pointerout":Ip.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Lp.delete(t.pointerId)}}function gd(e,t,n,r,a,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[a]},t!==null&&(t=_h(t),t!==null&&k_(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,a!==null&&t.indexOf(a)===-1&&t.push(a),e)}function DU(e,t,n,r,a){switch(t){case"focusin":return hl=gd(hl,e,t,n,r,a),!0;case"dragenter":return ml=gd(ml,e,t,n,r,a),!0;case"mouseover":return gl=gd(gl,e,t,n,r,a),!0;case"pointerover":var i=a.pointerId;return Ip.set(i,gd(Ip.get(i)||null,e,t,n,r,a)),!0;case"gotpointercapture":return i=a.pointerId,Lp.set(i,gd(Lp.get(i)||null,e,t,n,r,a)),!0}return!1}function aP(e){var t=fu(e.target);if(t!==null){var n=Lu(t);if(n!==null){if(t=n.tag,t===13){if(t=W8(n),t!==null){e.blockedOn=t,rP(e.priority,function(){tP(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function b0(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=p1(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);s1=r,n.target.dispatchEvent(r),s1=null}else return t=_h(n),t!==null&&k_(t),e.blockedOn=n,!1;t.shift()}return!0}function X3(e,t,n){b0(e)&&n.delete(t)}function BU(){d1=!1,hl!==null&&b0(hl)&&(hl=null),ml!==null&&b0(ml)&&(ml=null),gl!==null&&b0(gl)&&(gl=null),Ip.forEach(X3),Lp.forEach(X3)}function vd(e,t){e.blockedOn===t&&(e.blockedOn=null,d1||(d1=!0,wi.unstable_scheduleCallback(wi.unstable_NormalPriority,BU)))}function Np(e){function t(a){return vd(a,e)}if(0<km.length){vd(km[0],e);for(var n=1;n<km.length;n++){var r=km[n];r.blockedOn===e&&(r.blockedOn=null)}}for(hl!==null&&vd(hl,e),ml!==null&&vd(ml,e),gl!==null&&vd(gl,e),Ip.forEach(t),Lp.forEach(t),n=0;n<nl.length;n++)r=nl[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<nl.length&&(n=nl[0],n.blockedOn===null);)aP(n),n.blockedOn===null&&nl.shift()}var qc=Rs.ReactCurrentBatchConfig,q0=!0;function zU(e,t,n,r){var a=Wn,i=qc.transition;qc.transition=null;try{Wn=1,S_(e,t,n,r)}finally{Wn=a,qc.transition=i}}function UU(e,t,n,r){var a=Wn,i=qc.transition;qc.transition=null;try{Wn=4,S_(e,t,n,r)}finally{Wn=a,qc.transition=i}}function S_(e,t,n,r){if(q0){var a=p1(e,t,n,r);if(a===null)ky(e,t,r,K0,n),W3(e,r);else if(DU(a,e,t,n,r))r.stopPropagation();else if(W3(e,r),t&4&&-1<FU.indexOf(e)){for(;a!==null;){var i=_h(a);if(i!==null&&eP(i),i=p1(e,t,n,r),i===null&&ky(e,t,r,K0,n),i===a)break;a=i}a!==null&&r.stopPropagation()}else ky(e,t,r,null,n)}}var K0=null;function p1(e,t,n,r){if(K0=null,e=w_(r),e=fu(e),e!==null)if(t=Lu(e),t===null)e=null;else if(n=t.tag,n===13){if(e=W8(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return K0=e,null}function iP(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(TU()){case __:return 1;case q8:return 4;case Y0:case AU:return 16;case K8:return 536870912;default:return 16}default:return 16}}var ol=null,C_=null,y0=null;function oP(){if(y0)return y0;var e,t=C_,n=t.length,r,a="value"in ol?ol.value:ol.textContent,i=a.length;for(e=0;e<n&&t[e]===a[e];e++);var o=n-e;for(r=1;r<=o&&t[n-r]===a[i-r];r++);return y0=a.slice(e,1<r?1-r:void 0)}function x0(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Sm(){return!0}function Y3(){return!1}function ki(e){function t(n,r,a,i,o){this._reactName=n,this._targetInst=a,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var s in e)e.hasOwnProperty(s)&&(n=e[s],this[s]=n?n(i):i[s]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Sm:Y3,this.isPropagationStopped=Y3,this}return wr(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Sm)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Sm)},persist:function(){},isPersistent:Sm}),t}var Rf={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},T_=ki(Rf),wh=wr({},Rf,{view:0,detail:0}),$U=ki(wh),hy,gy,bd,qg=wr({},wh,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:A_,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==bd&&(bd&&e.type==="mousemove"?(hy=e.screenX-bd.screenX,gy=e.screenY-bd.screenY):gy=hy=0,bd=e),hy)},movementY:function(e){return"movementY"in e?e.movementY:gy}}),Z3=ki(qg),VU=wr({},qg,{dataTransfer:0}),jU=ki(VU),GU=wr({},wh,{relatedTarget:0}),vy=ki(GU),HU=wr({},Rf,{animationName:0,elapsedTime:0,pseudoElement:0}),WU=ki(HU),XU=wr({},Rf,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),YU=ki(XU),ZU=wr({},Rf,{data:0}),q3=ki(ZU),qU={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},KU={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},QU={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function JU(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=QU[e])?!!t[e]:!1}function A_(){return JU}var e$=wr({},wh,{key:function(e){if(e.key){var t=qU[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=x0(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?KU[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:A_,charCode:function(e){return e.type==="keypress"?x0(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?x0(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),t$=ki(e$),n$=wr({},qg,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),K3=ki(n$),r$=wr({},wh,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:A_}),a$=ki(r$),i$=wr({},Rf,{propertyName:0,elapsedTime:0,pseudoElement:0}),o$=ki(i$),s$=wr({},qg,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),l$=ki(s$),u$=[9,13,27,32],O_=Ts&&"CompositionEvent"in window,dp=null;Ts&&"documentMode"in document&&(dp=document.documentMode);var c$=Ts&&"TextEvent"in window&&!dp,sP=Ts&&(!O_||dp&&8<dp&&11>=dp),Q3=String.fromCharCode(32),J3=!1;function lP(e,t){switch(e){case"keyup":return u$.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function uP(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Rc=!1;function f$(e,t){switch(e){case"compositionend":return uP(t);case"keypress":return t.which!==32?null:(J3=!0,Q3);case"textInput":return e=t.data,e===Q3&&J3?null:e;default:return null}}function d$(e,t){if(Rc)return e==="compositionend"||!O_&&lP(e,t)?(e=oP(),y0=C_=ol=null,Rc=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return sP&&t.locale!=="ko"?null:t.data;default:return null}}var p$={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function eS(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!p$[e.type]:t==="textarea"}function cP(e,t,n,r){$8(r),t=Q0(t,"onChange"),0<t.length&&(n=new T_("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var pp=null,Fp=null;function h$(e){wP(e,0)}function Kg(e){var t=Lc(e);if(L8(t))return e}function m$(e,t){if(e==="change")return t}var fP=!1;if(Ts){var by;if(Ts){var yy="oninput"in document;if(!yy){var tS=document.createElement("div");tS.setAttribute("oninput","return;"),yy=typeof tS.oninput=="function"}by=yy}else by=!1;fP=by&&(!document.documentMode||9<document.documentMode)}function nS(){pp&&(pp.detachEvent("onpropertychange",dP),Fp=pp=null)}function dP(e){if(e.propertyName==="value"&&Kg(Fp)){var t=[];cP(t,Fp,e,w_(e)),H8(h$,t)}}function g$(e,t,n){e==="focusin"?(nS(),pp=t,Fp=n,pp.attachEvent("onpropertychange",dP)):e==="focusout"&&nS()}function v$(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Kg(Fp)}function b$(e,t){if(e==="click")return Kg(t)}function y$(e,t){if(e==="input"||e==="change")return Kg(t)}function x$(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var _o=typeof Object.is=="function"?Object.is:x$;function Dp(e,t){if(_o(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var a=n[r];if(!Zx.call(t,a)||!_o(e[a],t[a]))return!1}return!0}function rS(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function aS(e,t){var n=rS(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=rS(n)}}function pP(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?pP(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function hP(){for(var e=window,t=H0();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=H0(e.document)}return t}function M_(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function w$(e){var t=hP(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&pP(n.ownerDocument.documentElement,n)){if(r!==null&&M_(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var a=n.textContent.length,i=Math.min(r.start,a);r=r.end===void 0?i:Math.min(r.end,a),!e.extend&&i>r&&(a=r,r=i,i=a),a=aS(n,i);var o=aS(n,r);a&&o&&(e.rangeCount!==1||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(a.node,a.offset),e.removeAllRanges(),i>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var _$=Ts&&"documentMode"in document&&11>=document.documentMode,Pc=null,h1=null,hp=null,m1=!1;function iS(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;m1||Pc==null||Pc!==H0(r)||(r=Pc,"selectionStart"in r&&M_(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),hp&&Dp(hp,r)||(hp=r,r=Q0(h1,"onSelect"),0<r.length&&(t=new T_("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=Pc)))}function Cm(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Ic={animationend:Cm("Animation","AnimationEnd"),animationiteration:Cm("Animation","AnimationIteration"),animationstart:Cm("Animation","AnimationStart"),transitionend:Cm("Transition","TransitionEnd")},xy={},mP={};Ts&&(mP=document.createElement("div").style,"AnimationEvent"in window||(delete Ic.animationend.animation,delete Ic.animationiteration.animation,delete Ic.animationstart.animation),"TransitionEvent"in window||delete Ic.transitionend.transition);function Qg(e){if(xy[e])return xy[e];if(!Ic[e])return e;var t=Ic[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in mP)return xy[e]=t[n];return e}var gP=Qg("animationend"),vP=Qg("animationiteration"),bP=Qg("animationstart"),yP=Qg("transitionend"),xP=new Map,oS="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Pl(e,t){xP.set(e,t),Iu(t,[e])}for(var wy=0;wy<oS.length;wy++){var _y=oS[wy],E$=_y.toLowerCase(),k$=_y[0].toUpperCase()+_y.slice(1);Pl(E$,"on"+k$)}Pl(gP,"onAnimationEnd");Pl(vP,"onAnimationIteration");Pl(bP,"onAnimationStart");Pl("dblclick","onDoubleClick");Pl("focusin","onFocus");Pl("focusout","onBlur");Pl(yP,"onTransitionEnd");lf("onMouseEnter",["mouseout","mouseover"]);lf("onMouseLeave",["mouseout","mouseover"]);lf("onPointerEnter",["pointerout","pointerover"]);lf("onPointerLeave",["pointerout","pointerover"]);Iu("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Iu("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Iu("onBeforeInput",["compositionend","keypress","textInput","paste"]);Iu("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Iu("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Iu("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Jd="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),S$=new Set("cancel close invalid load scroll toggle".split(" ").concat(Jd));function sS(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,EU(r,t,void 0,e),e.currentTarget=null}function wP(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],a=r.event;r=r.listeners;e:{var i=void 0;if(t)for(var o=r.length-1;0<=o;o--){var s=r[o],l=s.instance,u=s.currentTarget;if(s=s.listener,l!==i&&a.isPropagationStopped())break e;sS(a,s,u),i=l}else for(o=0;o<r.length;o++){if(s=r[o],l=s.instance,u=s.currentTarget,s=s.listener,l!==i&&a.isPropagationStopped())break e;sS(a,s,u),i=l}}}if(X0)throw e=c1,X0=!1,c1=null,e}function ar(e,t){var n=t[x1];n===void 0&&(n=t[x1]=new Set);var r=e+"__bubble";n.has(r)||(_P(t,e,2,!1),n.add(r))}function Ey(e,t,n){var r=0;t&&(r|=4),_P(n,e,r,t)}var Tm="_reactListening"+Math.random().toString(36).slice(2);function Bp(e){if(!e[Tm]){e[Tm]=!0,O8.forEach(function(n){n!=="selectionchange"&&(S$.has(n)||Ey(n,!1,e),Ey(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Tm]||(t[Tm]=!0,Ey("selectionchange",!1,t))}}function _P(e,t,n,r){switch(iP(t)){case 1:var a=zU;break;case 4:a=UU;break;default:a=S_}n=a.bind(null,t,n,e),a=void 0,!u1||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(a=!0),r?a!==void 0?e.addEventListener(t,n,{capture:!0,passive:a}):e.addEventListener(t,n,!0):a!==void 0?e.addEventListener(t,n,{passive:a}):e.addEventListener(t,n,!1)}function ky(e,t,n,r,a){var i=r;if((t&1)===0&&(t&2)===0&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var s=r.stateNode.containerInfo;if(s===a||s.nodeType===8&&s.parentNode===a)break;if(o===4)for(o=r.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===a||l.nodeType===8&&l.parentNode===a))return;o=o.return}for(;s!==null;){if(o=fu(s),o===null)return;if(l=o.tag,l===5||l===6){r=i=o;continue e}s=s.parentNode}}r=r.return}H8(function(){var u=i,c=w_(n),f=[];e:{var d=xP.get(e);if(d!==void 0){var p=T_,h=e;switch(e){case"keypress":if(x0(n)===0)break e;case"keydown":case"keyup":p=t$;break;case"focusin":h="focus",p=vy;break;case"focusout":h="blur",p=vy;break;case"beforeblur":case"afterblur":p=vy;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=Z3;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=jU;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=a$;break;case gP:case vP:case bP:p=WU;break;case yP:p=o$;break;case"scroll":p=$U;break;case"wheel":p=l$;break;case"copy":case"cut":case"paste":p=YU;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=K3}var g=(t&4)!==0,v=!g&&e==="scroll",b=g?d!==null?d+"Capture":null:d;g=[];for(var y=u,x;y!==null;){x=y;var E=x.stateNode;if(x.tag===5&&E!==null&&(x=E,b!==null&&(E=Pp(y,b),E!=null&&g.push(zp(y,E,x)))),v)break;y=y.return}0<g.length&&(d=new p(d,h,null,n,c),f.push({event:d,listeners:g}))}}if((t&7)===0){e:{if(d=e==="mouseover"||e==="pointerover",p=e==="mouseout"||e==="pointerout",d&&n!==s1&&(h=n.relatedTarget||n.fromElement)&&(fu(h)||h[As]))break e;if((p||d)&&(d=c.window===c?c:(d=c.ownerDocument)?d.defaultView||d.parentWindow:window,p?(h=n.relatedTarget||n.toElement,p=u,h=h?fu(h):null,h!==null&&(v=Lu(h),h!==v||h.tag!==5&&h.tag!==6)&&(h=null)):(p=null,h=u),p!==h)){if(g=Z3,E="onMouseLeave",b="onMouseEnter",y="mouse",(e==="pointerout"||e==="pointerover")&&(g=K3,E="onPointerLeave",b="onPointerEnter",y="pointer"),v=p==null?d:Lc(p),x=h==null?d:Lc(h),d=new g(E,y+"leave",p,n,c),d.target=v,d.relatedTarget=x,E=null,fu(c)===u&&(g=new g(b,y+"enter",h,n,c),g.target=x,g.relatedTarget=v,E=g),v=E,p&&h)t:{for(g=p,b=h,y=0,x=g;x;x=sc(x))y++;for(x=0,E=b;E;E=sc(E))x++;for(;0<y-x;)g=sc(g),y--;for(;0<x-y;)b=sc(b),x--;for(;y--;){if(g===b||b!==null&&g===b.alternate)break t;g=sc(g),b=sc(b)}g=null}else g=null;p!==null&&lS(f,d,p,g,!1),h!==null&&v!==null&&lS(f,v,h,g,!0)}}e:{if(d=u?Lc(u):window,p=d.nodeName&&d.nodeName.toLowerCase(),p==="select"||p==="input"&&d.type==="file")var T=m$;else if(eS(d))if(fP)T=y$;else{T=v$;var C=g$}else(p=d.nodeName)&&p.toLowerCase()==="input"&&(d.type==="checkbox"||d.type==="radio")&&(T=b$);if(T&&(T=T(e,u))){cP(f,T,n,c);break e}C&&C(e,d,u),e==="focusout"&&(C=d._wrapperState)&&C.controlled&&d.type==="number"&&n1(d,"number",d.value)}switch(C=u?Lc(u):window,e){case"focusin":(eS(C)||C.contentEditable==="true")&&(Pc=C,h1=u,hp=null);break;case"focusout":hp=h1=Pc=null;break;case"mousedown":m1=!0;break;case"contextmenu":case"mouseup":case"dragend":m1=!1,iS(f,n,c);break;case"selectionchange":if(_$)break;case"keydown":case"keyup":iS(f,n,c)}var I;if(O_)e:{switch(e){case"compositionstart":var P="onCompositionStart";break e;case"compositionend":P="onCompositionEnd";break e;case"compositionupdate":P="onCompositionUpdate";break e}P=void 0}else Rc?lP(e,n)&&(P="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(P="onCompositionStart");P&&(sP&&n.locale!=="ko"&&(Rc||P!=="onCompositionStart"?P==="onCompositionEnd"&&Rc&&(I=oP()):(ol=c,C_="value"in ol?ol.value:ol.textContent,Rc=!0)),C=Q0(u,P),0<C.length&&(P=new q3(P,e,null,n,c),f.push({event:P,listeners:C}),I?P.data=I:(I=uP(n),I!==null&&(P.data=I)))),(I=c$?f$(e,n):d$(e,n))&&(u=Q0(u,"onBeforeInput"),0<u.length&&(c=new q3("onBeforeInput","beforeinput",null,n,c),f.push({event:c,listeners:u}),c.data=I))}wP(f,t)})}function zp(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Q0(e,t){for(var n=t+"Capture",r=[];e!==null;){var a=e,i=a.stateNode;a.tag===5&&i!==null&&(a=i,i=Pp(e,n),i!=null&&r.unshift(zp(e,i,a)),i=Pp(e,t),i!=null&&r.push(zp(e,i,a))),e=e.return}return r}function sc(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function lS(e,t,n,r,a){for(var i=t._reactName,o=[];n!==null&&n!==r;){var s=n,l=s.alternate,u=s.stateNode;if(l!==null&&l===r)break;s.tag===5&&u!==null&&(s=u,a?(l=Pp(n,i),l!=null&&o.unshift(zp(n,l,s))):a||(l=Pp(n,i),l!=null&&o.push(zp(n,l,s)))),n=n.return}o.length!==0&&e.push({event:t,listeners:o})}var C$=/\r\n?/g,T$=/\u0000|\uFFFD/g;function uS(e){return(typeof e=="string"?e:""+e).replace(C$,`
`).replace(T$,"")}function Am(e,t,n){if(t=uS(t),uS(e)!==t&&n)throw Error(ot(425))}function J0(){}var g1=null,v1=null;function b1(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var y1=typeof setTimeout=="function"?setTimeout:void 0,A$=typeof clearTimeout=="function"?clearTimeout:void 0,cS=typeof Promise=="function"?Promise:void 0,O$=typeof queueMicrotask=="function"?queueMicrotask:typeof cS!="undefined"?function(e){return cS.resolve(null).then(e).catch(M$)}:y1;function M$(e){setTimeout(function(){throw e})}function Sy(e,t){var n=t,r=0;do{var a=n.nextSibling;if(e.removeChild(n),a&&a.nodeType===8)if(n=a.data,n==="/$"){if(r===0){e.removeChild(a),Np(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=a}while(n);Np(t)}function vl(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function fS(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Pf=Math.random().toString(36).slice(2),Vo="__reactFiber$"+Pf,Up="__reactProps$"+Pf,As="__reactContainer$"+Pf,x1="__reactEvents$"+Pf,R$="__reactListeners$"+Pf,P$="__reactHandles$"+Pf;function fu(e){var t=e[Vo];if(t)return t;for(var n=e.parentNode;n;){if(t=n[As]||n[Vo]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=fS(e);e!==null;){if(n=e[Vo])return n;e=fS(e)}return t}e=n,n=e.parentNode}return null}function _h(e){return e=e[Vo]||e[As],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Lc(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(ot(33))}function Jg(e){return e[Up]||null}var w1=[],Nc=-1;function Il(e){return{current:e}}function or(e){0>Nc||(e.current=w1[Nc],w1[Nc]=null,Nc--)}function Jn(e,t){Nc++,w1[Nc]=e.current,e.current=t}var kl={},La=Il(kl),ii=Il(!1),ku=kl;function uf(e,t){var n=e.type.contextTypes;if(!n)return kl;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var a={},i;for(i in n)a[i]=t[i];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function oi(e){return e=e.childContextTypes,e!=null}function eg(){or(ii),or(La)}function dS(e,t,n){if(La.current!==kl)throw Error(ot(168));Jn(La,t),Jn(ii,n)}function EP(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var a in r)if(!(a in t))throw Error(ot(108,gU(e)||"Unknown",a));return wr({},n,r)}function tg(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||kl,ku=La.current,Jn(La,e),Jn(ii,ii.current),!0}function pS(e,t,n){var r=e.stateNode;if(!r)throw Error(ot(169));n?(e=EP(e,t,ku),r.__reactInternalMemoizedMergedChildContext=e,or(ii),or(La),Jn(La,e)):or(ii),Jn(ii,n)}var ms=null,ev=!1,Cy=!1;function kP(e){ms===null?ms=[e]:ms.push(e)}function I$(e){ev=!0,kP(e)}function Ll(){if(!Cy&&ms!==null){Cy=!0;var e=0,t=Wn;try{var n=ms;for(Wn=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}ms=null,ev=!1}catch(a){throw ms!==null&&(ms=ms.slice(e+1)),Z8(__,Ll),a}finally{Wn=t,Cy=!1}}return null}var Fc=[],Dc=0,ng=null,rg=0,ji=[],Gi=0,Su=null,ys=1,xs="";function ou(e,t){Fc[Dc++]=rg,Fc[Dc++]=ng,ng=e,rg=t}function SP(e,t,n){ji[Gi++]=ys,ji[Gi++]=xs,ji[Gi++]=Su,Su=e;var r=ys;e=xs;var a=32-bo(r)-1;r&=~(1<<a),n+=1;var i=32-bo(t)+a;if(30<i){var o=a-a%5;i=(r&(1<<o)-1).toString(32),r>>=o,a-=o,ys=1<<32-bo(t)+a|n<<a|r,xs=i+e}else ys=1<<i|n<<a|r,xs=e}function R_(e){e.return!==null&&(ou(e,1),SP(e,1,0))}function P_(e){for(;e===ng;)ng=Fc[--Dc],Fc[Dc]=null,rg=Fc[--Dc],Fc[Dc]=null;for(;e===Su;)Su=ji[--Gi],ji[Gi]=null,xs=ji[--Gi],ji[Gi]=null,ys=ji[--Gi],ji[Gi]=null}var xi=null,vi=null,cr=!1,go=null;function CP(e,t){var n=Yi(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function hS(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,xi=e,vi=vl(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,xi=e,vi=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Su!==null?{id:ys,overflow:xs}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Yi(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,xi=e,vi=null,!0):!1;default:return!1}}function _1(e){return(e.mode&1)!==0&&(e.flags&128)===0}function E1(e){if(cr){var t=vi;if(t){var n=t;if(!hS(e,t)){if(_1(e))throw Error(ot(418));t=vl(n.nextSibling);var r=xi;t&&hS(e,t)?CP(r,n):(e.flags=e.flags&-4097|2,cr=!1,xi=e)}}else{if(_1(e))throw Error(ot(418));e.flags=e.flags&-4097|2,cr=!1,xi=e}}}function mS(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;xi=e}function Om(e){if(e!==xi)return!1;if(!cr)return mS(e),cr=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!b1(e.type,e.memoizedProps)),t&&(t=vi)){if(_1(e))throw TP(),Error(ot(418));for(;t;)CP(e,t),t=vl(t.nextSibling)}if(mS(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(ot(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){vi=vl(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}vi=null}}else vi=xi?vl(e.stateNode.nextSibling):null;return!0}function TP(){for(var e=vi;e;)e=vl(e.nextSibling)}function cf(){vi=xi=null,cr=!1}function I_(e){go===null?go=[e]:go.push(e)}var L$=Rs.ReactCurrentBatchConfig;function ho(e,t){if(e&&e.defaultProps){t=wr({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}var ag=Il(null),ig=null,Bc=null,L_=null;function N_(){L_=Bc=ig=null}function F_(e){var t=ag.current;or(ag),e._currentValue=t}function k1(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Kc(e,t){ig=e,L_=Bc=null,e=e.dependencies,e!==null&&e.firstContext!==null&&((e.lanes&t)!==0&&(ai=!0),e.firstContext=null)}function Qi(e){var t=e._currentValue;if(L_!==e)if(e={context:e,memoizedValue:t,next:null},Bc===null){if(ig===null)throw Error(ot(308));Bc=e,ig.dependencies={lanes:0,firstContext:e}}else Bc=Bc.next=e;return t}var du=null;function D_(e){du===null?du=[e]:du.push(e)}function AP(e,t,n,r){var a=t.interleaved;return a===null?(n.next=n,D_(t)):(n.next=a.next,a.next=n),t.interleaved=n,Os(e,r)}function Os(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Js=!1;function B_(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function OP(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function _s(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function bl(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,(In&2)!==0){var a=r.pending;return a===null?t.next=t:(t.next=a.next,a.next=t),r.pending=t,Os(e,n)}return a=r.interleaved,a===null?(t.next=t,D_(r)):(t.next=a.next,a.next=t),r.interleaved=t,Os(e,n)}function w0(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,E_(e,n)}}function gS(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var a=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?a=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?a=i=t:i=i.next=t}else a=i=t;n={baseState:r.baseState,firstBaseUpdate:a,lastBaseUpdate:i,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function og(e,t,n,r){var a=e.updateQueue;Js=!1;var i=a.firstBaseUpdate,o=a.lastBaseUpdate,s=a.shared.pending;if(s!==null){a.shared.pending=null;var l=s,u=l.next;l.next=null,o===null?i=u:o.next=u,o=l;var c=e.alternate;c!==null&&(c=c.updateQueue,s=c.lastBaseUpdate,s!==o&&(s===null?c.firstBaseUpdate=u:s.next=u,c.lastBaseUpdate=l))}if(i!==null){var f=a.baseState;o=0,c=u=l=null,s=i;do{var d=s.lane,p=s.eventTime;if((r&d)===d){c!==null&&(c=c.next={eventTime:p,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var h=e,g=s;switch(d=t,p=n,g.tag){case 1:if(h=g.payload,typeof h=="function"){f=h.call(p,f,d);break e}f=h;break e;case 3:h.flags=h.flags&-65537|128;case 0:if(h=g.payload,d=typeof h=="function"?h.call(p,f,d):h,d==null)break e;f=wr({},f,d);break e;case 2:Js=!0}}s.callback!==null&&s.lane!==0&&(e.flags|=64,d=a.effects,d===null?a.effects=[s]:d.push(s))}else p={eventTime:p,lane:d,tag:s.tag,payload:s.payload,callback:s.callback,next:null},c===null?(u=c=p,l=f):c=c.next=p,o|=d;if(s=s.next,s===null){if(s=a.shared.pending,s===null)break;d=s,s=d.next,d.next=null,a.lastBaseUpdate=d,a.shared.pending=null}}while(1);if(c===null&&(l=f),a.baseState=l,a.firstBaseUpdate=u,a.lastBaseUpdate=c,t=a.shared.interleaved,t!==null){a=t;do o|=a.lane,a=a.next;while(a!==t)}else i===null&&(a.shared.lanes=0);Tu|=o,e.lanes=o,e.memoizedState=f}}function vS(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],a=r.callback;if(a!==null){if(r.callback=null,r=n,typeof a!="function")throw Error(ot(191,a));a.call(r)}}}var MP=new A8.Component().refs;function S1(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:wr({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var tv={isMounted:function(e){return(e=e._reactInternals)?Lu(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Ha(),a=xl(e),i=_s(r,a);i.payload=t,n!=null&&(i.callback=n),t=bl(e,i,a),t!==null&&(yo(t,e,a,r),w0(t,e,a))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Ha(),a=xl(e),i=_s(r,a);i.tag=1,i.payload=t,n!=null&&(i.callback=n),t=bl(e,i,a),t!==null&&(yo(t,e,a,r),w0(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Ha(),r=xl(e),a=_s(n,r);a.tag=2,t!=null&&(a.callback=t),t=bl(e,a,r),t!==null&&(yo(t,e,r,n),w0(t,e,r))}};function bS(e,t,n,r,a,i,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,i,o):t.prototype&&t.prototype.isPureReactComponent?!Dp(n,r)||!Dp(a,i):!0}function RP(e,t,n){var r=!1,a=kl,i=t.contextType;return typeof i=="object"&&i!==null?i=Qi(i):(a=oi(t)?ku:La.current,r=t.contextTypes,i=(r=r!=null)?uf(e,a):kl),t=new t(n,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=tv,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=i),t}function yS(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&tv.enqueueReplaceState(t,t.state,null)}function C1(e,t,n,r){var a=e.stateNode;a.props=n,a.state=e.memoizedState,a.refs=MP,B_(e);var i=t.contextType;typeof i=="object"&&i!==null?a.context=Qi(i):(i=oi(t)?ku:La.current,a.context=uf(e,i)),a.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(S1(e,t,i,n),a.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(t=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),t!==a.state&&tv.enqueueReplaceState(a,a.state,null),og(e,n,a,r),a.state=e.memoizedState),typeof a.componentDidMount=="function"&&(e.flags|=4194308)}function yd(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(ot(309));var r=n.stateNode}if(!r)throw Error(ot(147,e));var a=r,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(o){var s=a.refs;s===MP&&(s=a.refs={}),o===null?delete s[i]:s[i]=o},t._stringRef=i,t)}if(typeof e!="string")throw Error(ot(284));if(!n._owner)throw Error(ot(290,e))}return e}function Mm(e,t){throw e=Object.prototype.toString.call(t),Error(ot(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function xS(e){var t=e._init;return t(e._payload)}function PP(e){function t(b,y){if(e){var x=b.deletions;x===null?(b.deletions=[y],b.flags|=16):x.push(y)}}function n(b,y){if(!e)return null;for(;y!==null;)t(b,y),y=y.sibling;return null}function r(b,y){for(b=new Map;y!==null;)y.key!==null?b.set(y.key,y):b.set(y.index,y),y=y.sibling;return b}function a(b,y){return b=wl(b,y),b.index=0,b.sibling=null,b}function i(b,y,x){return b.index=x,e?(x=b.alternate,x!==null?(x=x.index,x<y?(b.flags|=2,y):x):(b.flags|=2,y)):(b.flags|=1048576,y)}function o(b){return e&&b.alternate===null&&(b.flags|=2),b}function s(b,y,x,E){return y===null||y.tag!==6?(y=Iy(x,b.mode,E),y.return=b,y):(y=a(y,x),y.return=b,y)}function l(b,y,x,E){var T=x.type;return T===Mc?c(b,y,x.props.children,E,x.key):y!==null&&(y.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===Qs&&xS(T)===y.type)?(E=a(y,x.props),E.ref=yd(b,y,x),E.return=b,E):(E=T0(x.type,x.key,x.props,null,b.mode,E),E.ref=yd(b,y,x),E.return=b,E)}function u(b,y,x,E){return y===null||y.tag!==4||y.stateNode.containerInfo!==x.containerInfo||y.stateNode.implementation!==x.implementation?(y=Ly(x,b.mode,E),y.return=b,y):(y=a(y,x.children||[]),y.return=b,y)}function c(b,y,x,E,T){return y===null||y.tag!==7?(y=yu(x,b.mode,E,T),y.return=b,y):(y=a(y,x),y.return=b,y)}function f(b,y,x){if(typeof y=="string"&&y!==""||typeof y=="number")return y=Iy(""+y,b.mode,x),y.return=b,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case ym:return x=T0(y.type,y.key,y.props,null,b.mode,x),x.ref=yd(b,null,y),x.return=b,x;case Oc:return y=Ly(y,b.mode,x),y.return=b,y;case Qs:var E=y._init;return f(b,E(y._payload),x)}if(Kd(y)||hd(y))return y=yu(y,b.mode,x,null),y.return=b,y;Mm(b,y)}return null}function d(b,y,x,E){var T=y!==null?y.key:null;if(typeof x=="string"&&x!==""||typeof x=="number")return T!==null?null:s(b,y,""+x,E);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case ym:return x.key===T?l(b,y,x,E):null;case Oc:return x.key===T?u(b,y,x,E):null;case Qs:return T=x._init,d(b,y,T(x._payload),E)}if(Kd(x)||hd(x))return T!==null?null:c(b,y,x,E,null);Mm(b,x)}return null}function p(b,y,x,E,T){if(typeof E=="string"&&E!==""||typeof E=="number")return b=b.get(x)||null,s(y,b,""+E,T);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case ym:return b=b.get(E.key===null?x:E.key)||null,l(y,b,E,T);case Oc:return b=b.get(E.key===null?x:E.key)||null,u(y,b,E,T);case Qs:var C=E._init;return p(b,y,x,C(E._payload),T)}if(Kd(E)||hd(E))return b=b.get(x)||null,c(y,b,E,T,null);Mm(y,E)}return null}function h(b,y,x,E){for(var T=null,C=null,I=y,P=y=0,j=null;I!==null&&P<x.length;P++){I.index>P?(j=I,I=null):j=I.sibling;var A=d(b,I,x[P],E);if(A===null){I===null&&(I=j);break}e&&I&&A.alternate===null&&t(b,I),y=i(A,y,P),C===null?T=A:C.sibling=A,C=A,I=j}if(P===x.length)return n(b,I),cr&&ou(b,P),T;if(I===null){for(;P<x.length;P++)I=f(b,x[P],E),I!==null&&(y=i(I,y,P),C===null?T=I:C.sibling=I,C=I);return cr&&ou(b,P),T}for(I=r(b,I);P<x.length;P++)j=p(I,b,P,x[P],E),j!==null&&(e&&j.alternate!==null&&I.delete(j.key===null?P:j.key),y=i(j,y,P),C===null?T=j:C.sibling=j,C=j);return e&&I.forEach(function(S){return t(b,S)}),cr&&ou(b,P),T}function g(b,y,x,E){var T=hd(x);if(typeof T!="function")throw Error(ot(150));if(x=T.call(x),x==null)throw Error(ot(151));for(var C=T=null,I=y,P=y=0,j=null,A=x.next();I!==null&&!A.done;P++,A=x.next()){I.index>P?(j=I,I=null):j=I.sibling;var S=d(b,I,A.value,E);if(S===null){I===null&&(I=j);break}e&&I&&S.alternate===null&&t(b,I),y=i(S,y,P),C===null?T=S:C.sibling=S,C=S,I=j}if(A.done)return n(b,I),cr&&ou(b,P),T;if(I===null){for(;!A.done;P++,A=x.next())A=f(b,A.value,E),A!==null&&(y=i(A,y,P),C===null?T=A:C.sibling=A,C=A);return cr&&ou(b,P),T}for(I=r(b,I);!A.done;P++,A=x.next())A=p(I,b,P,A.value,E),A!==null&&(e&&A.alternate!==null&&I.delete(A.key===null?P:A.key),y=i(A,y,P),C===null?T=A:C.sibling=A,C=A);return e&&I.forEach(function(M){return t(b,M)}),cr&&ou(b,P),T}function v(b,y,x,E){if(typeof x=="object"&&x!==null&&x.type===Mc&&x.key===null&&(x=x.props.children),typeof x=="object"&&x!==null){switch(x.$$typeof){case ym:e:{for(var T=x.key,C=y;C!==null;){if(C.key===T){if(T=x.type,T===Mc){if(C.tag===7){n(b,C.sibling),y=a(C,x.props.children),y.return=b,b=y;break e}}else if(C.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===Qs&&xS(T)===C.type){n(b,C.sibling),y=a(C,x.props),y.ref=yd(b,C,x),y.return=b,b=y;break e}n(b,C);break}else t(b,C);C=C.sibling}x.type===Mc?(y=yu(x.props.children,b.mode,E,x.key),y.return=b,b=y):(E=T0(x.type,x.key,x.props,null,b.mode,E),E.ref=yd(b,y,x),E.return=b,b=E)}return o(b);case Oc:e:{for(C=x.key;y!==null;){if(y.key===C)if(y.tag===4&&y.stateNode.containerInfo===x.containerInfo&&y.stateNode.implementation===x.implementation){n(b,y.sibling),y=a(y,x.children||[]),y.return=b,b=y;break e}else{n(b,y);break}else t(b,y);y=y.sibling}y=Ly(x,b.mode,E),y.return=b,b=y}return o(b);case Qs:return C=x._init,v(b,y,C(x._payload),E)}if(Kd(x))return h(b,y,x,E);if(hd(x))return g(b,y,x,E);Mm(b,x)}return typeof x=="string"&&x!==""||typeof x=="number"?(x=""+x,y!==null&&y.tag===6?(n(b,y.sibling),y=a(y,x),y.return=b,b=y):(n(b,y),y=Iy(x,b.mode,E),y.return=b,b=y),o(b)):n(b,y)}return v}var ff=PP(!0),IP=PP(!1),Eh={},Yo=Il(Eh),$p=Il(Eh),Vp=Il(Eh);function pu(e){if(e===Eh)throw Error(ot(174));return e}function z_(e,t){switch(Jn(Vp,t),Jn($p,e),Jn(Yo,Eh),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:a1(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=a1(t,e)}or(Yo),Jn(Yo,t)}function df(){or(Yo),or($p),or(Vp)}function LP(e){pu(Vp.current);var t=pu(Yo.current),n=a1(t,e.type);t!==n&&(Jn($p,e),Jn(Yo,n))}function U_(e){$p.current===e&&(or(Yo),or($p))}var br=Il(0);function sg(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Ty=[];function $_(){for(var e=0;e<Ty.length;e++)Ty[e]._workInProgressVersionPrimary=null;Ty.length=0}var _0=Rs.ReactCurrentDispatcher,Ay=Rs.ReactCurrentBatchConfig,Cu=0,xr=null,Jr=null,oa=null,lg=!1,mp=!1,jp=0,N$=0;function Ta(){throw Error(ot(321))}function V_(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!_o(e[n],t[n]))return!1;return!0}function j_(e,t,n,r,a,i){if(Cu=i,xr=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,_0.current=e===null||e.memoizedState===null?z$:U$,e=n(r,a),mp){i=0;do{if(mp=!1,jp=0,25<=i)throw Error(ot(301));i+=1,oa=Jr=null,t.updateQueue=null,_0.current=$$,e=n(r,a)}while(mp)}if(_0.current=ug,t=Jr!==null&&Jr.next!==null,Cu=0,oa=Jr=xr=null,lg=!1,t)throw Error(ot(300));return e}function G_(){var e=jp!==0;return jp=0,e}function zo(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return oa===null?xr.memoizedState=oa=e:oa=oa.next=e,oa}function Ji(){if(Jr===null){var e=xr.alternate;e=e!==null?e.memoizedState:null}else e=Jr.next;var t=oa===null?xr.memoizedState:oa.next;if(t!==null)oa=t,Jr=e;else{if(e===null)throw Error(ot(310));Jr=e,e={memoizedState:Jr.memoizedState,baseState:Jr.baseState,baseQueue:Jr.baseQueue,queue:Jr.queue,next:null},oa===null?xr.memoizedState=oa=e:oa=oa.next=e}return oa}function Gp(e,t){return typeof t=="function"?t(e):t}function Oy(e){var t=Ji(),n=t.queue;if(n===null)throw Error(ot(311));n.lastRenderedReducer=e;var r=Jr,a=r.baseQueue,i=n.pending;if(i!==null){if(a!==null){var o=a.next;a.next=i.next,i.next=o}r.baseQueue=a=i,n.pending=null}if(a!==null){i=a.next,r=r.baseState;var s=o=null,l=null,u=i;do{var c=u.lane;if((Cu&c)===c)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var f={lane:c,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(s=l=f,o=r):l=l.next=f,xr.lanes|=c,Tu|=c}u=u.next}while(u!==null&&u!==i);l===null?o=r:l.next=s,_o(r,t.memoizedState)||(ai=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=l,n.lastRenderedState=r}if(e=n.interleaved,e!==null){a=e;do i=a.lane,xr.lanes|=i,Tu|=i,a=a.next;while(a!==e)}else a===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function My(e){var t=Ji(),n=t.queue;if(n===null)throw Error(ot(311));n.lastRenderedReducer=e;var r=n.dispatch,a=n.pending,i=t.memoizedState;if(a!==null){n.pending=null;var o=a=a.next;do i=e(i,o.action),o=o.next;while(o!==a);_o(i,t.memoizedState)||(ai=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),n.lastRenderedState=i}return[i,r]}function NP(){}function FP(e,t){var n=xr,r=Ji(),a=t(),i=!_o(r.memoizedState,a);if(i&&(r.memoizedState=a,ai=!0),r=r.queue,H_(zP.bind(null,n,r,e),[e]),r.getSnapshot!==t||i||oa!==null&&oa.memoizedState.tag&1){if(n.flags|=2048,Hp(9,BP.bind(null,n,r,a,t),void 0,null),sa===null)throw Error(ot(349));(Cu&30)!==0||DP(n,t,a)}return a}function DP(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=xr.updateQueue,t===null?(t={lastEffect:null,stores:null},xr.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function BP(e,t,n,r){t.value=n,t.getSnapshot=r,UP(t)&&$P(e)}function zP(e,t,n){return n(function(){UP(t)&&$P(e)})}function UP(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!_o(e,n)}catch{return!0}}function $P(e){var t=Os(e,1);t!==null&&yo(t,e,1,-1)}function wS(e){var t=zo();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Gp,lastRenderedState:e},t.queue=e,e=e.dispatch=B$.bind(null,xr,e),[t.memoizedState,e]}function Hp(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=xr.updateQueue,t===null?(t={lastEffect:null,stores:null},xr.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function VP(){return Ji().memoizedState}function E0(e,t,n,r){var a=zo();xr.flags|=e,a.memoizedState=Hp(1|t,n,void 0,r===void 0?null:r)}function nv(e,t,n,r){var a=Ji();r=r===void 0?null:r;var i=void 0;if(Jr!==null){var o=Jr.memoizedState;if(i=o.destroy,r!==null&&V_(r,o.deps)){a.memoizedState=Hp(t,n,i,r);return}}xr.flags|=e,a.memoizedState=Hp(1|t,n,i,r)}function _S(e,t){return E0(8390656,8,e,t)}function H_(e,t){return nv(2048,8,e,t)}function jP(e,t){return nv(4,2,e,t)}function GP(e,t){return nv(4,4,e,t)}function HP(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function WP(e,t,n){return n=n!=null?n.concat([e]):null,nv(4,4,HP.bind(null,t,e),n)}function W_(){}function XP(e,t){var n=Ji();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&V_(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function YP(e,t){var n=Ji();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&V_(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function ZP(e,t,n){return(Cu&21)===0?(e.baseState&&(e.baseState=!1,ai=!0),e.memoizedState=n):(_o(n,t)||(n=Q8(),xr.lanes|=n,Tu|=n,e.baseState=!0),t)}function F$(e,t){var n=Wn;Wn=n!==0&&4>n?n:4,e(!0);var r=Ay.transition;Ay.transition={};try{e(!1),t()}finally{Wn=n,Ay.transition=r}}function qP(){return Ji().memoizedState}function D$(e,t,n){var r=xl(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},KP(e))QP(t,n);else if(n=AP(e,t,n,r),n!==null){var a=Ha();yo(n,e,r,a),JP(n,t,r)}}function B$(e,t,n){var r=xl(e),a={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(KP(e))QP(t,a);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var o=t.lastRenderedState,s=i(o,n);if(a.hasEagerState=!0,a.eagerState=s,_o(s,o)){var l=t.interleaved;l===null?(a.next=a,D_(t)):(a.next=l.next,l.next=a),t.interleaved=a;return}}catch{}finally{}n=AP(e,t,a,r),n!==null&&(a=Ha(),yo(n,e,r,a),JP(n,t,r))}}function KP(e){var t=e.alternate;return e===xr||t!==null&&t===xr}function QP(e,t){mp=lg=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function JP(e,t,n){if((n&4194240)!==0){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,E_(e,n)}}var ug={readContext:Qi,useCallback:Ta,useContext:Ta,useEffect:Ta,useImperativeHandle:Ta,useInsertionEffect:Ta,useLayoutEffect:Ta,useMemo:Ta,useReducer:Ta,useRef:Ta,useState:Ta,useDebugValue:Ta,useDeferredValue:Ta,useTransition:Ta,useMutableSource:Ta,useSyncExternalStore:Ta,useId:Ta,unstable_isNewReconciler:!1},z$={readContext:Qi,useCallback:function(e,t){return zo().memoizedState=[e,t===void 0?null:t],e},useContext:Qi,useEffect:_S,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,E0(4194308,4,HP.bind(null,t,e),n)},useLayoutEffect:function(e,t){return E0(4194308,4,e,t)},useInsertionEffect:function(e,t){return E0(4,2,e,t)},useMemo:function(e,t){var n=zo();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=zo();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=D$.bind(null,xr,e),[r.memoizedState,e]},useRef:function(e){var t=zo();return e={current:e},t.memoizedState=e},useState:wS,useDebugValue:W_,useDeferredValue:function(e){return zo().memoizedState=e},useTransition:function(){var e=wS(!1),t=e[0];return e=F$.bind(null,e[1]),zo().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=xr,a=zo();if(cr){if(n===void 0)throw Error(ot(407));n=n()}else{if(n=t(),sa===null)throw Error(ot(349));(Cu&30)!==0||DP(r,t,n)}a.memoizedState=n;var i={value:n,getSnapshot:t};return a.queue=i,_S(zP.bind(null,r,i,e),[e]),r.flags|=2048,Hp(9,BP.bind(null,r,i,n,t),void 0,null),n},useId:function(){var e=zo(),t=sa.identifierPrefix;if(cr){var n=xs,r=ys;n=(r&~(1<<32-bo(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=jp++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=N$++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},U$={readContext:Qi,useCallback:XP,useContext:Qi,useEffect:H_,useImperativeHandle:WP,useInsertionEffect:jP,useLayoutEffect:GP,useMemo:YP,useReducer:Oy,useRef:VP,useState:function(){return Oy(Gp)},useDebugValue:W_,useDeferredValue:function(e){var t=Ji();return ZP(t,Jr.memoizedState,e)},useTransition:function(){var e=Oy(Gp)[0],t=Ji().memoizedState;return[e,t]},useMutableSource:NP,useSyncExternalStore:FP,useId:qP,unstable_isNewReconciler:!1},$$={readContext:Qi,useCallback:XP,useContext:Qi,useEffect:H_,useImperativeHandle:WP,useInsertionEffect:jP,useLayoutEffect:GP,useMemo:YP,useReducer:My,useRef:VP,useState:function(){return My(Gp)},useDebugValue:W_,useDeferredValue:function(e){var t=Ji();return Jr===null?t.memoizedState=e:ZP(t,Jr.memoizedState,e)},useTransition:function(){var e=My(Gp)[0],t=Ji().memoizedState;return[e,t]},useMutableSource:NP,useSyncExternalStore:FP,useId:qP,unstable_isNewReconciler:!1};function pf(e,t){try{var n="",r=t;do n+=mU(r),r=r.return;while(r);var a=n}catch(i){a=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:a,digest:null}}function Ry(e,t,n){return{value:e,source:null,stack:n!=null?n:null,digest:t!=null?t:null}}function T1(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var V$=typeof WeakMap=="function"?WeakMap:Map;function eI(e,t,n){n=_s(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){fg||(fg=!0,D1=r),T1(e,t)},n}function tI(e,t,n){n=_s(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var a=t.value;n.payload=function(){return r(a)},n.callback=function(){T1(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){T1(e,t),typeof r!="function"&&(yl===null?yl=new Set([this]):yl.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),n}function ES(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new V$;var a=new Set;r.set(t,a)}else a=r.get(t),a===void 0&&(a=new Set,r.set(t,a));a.has(n)||(a.add(n),e=nV.bind(null,e,t,n),t.then(e,e))}function kS(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function SS(e,t,n,r,a){return(e.mode&1)===0?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=_s(-1,1),t.tag=2,bl(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=a,e)}var j$=Rs.ReactCurrentOwner,ai=!1;function Va(e,t,n,r){t.child=e===null?IP(t,null,n,r):ff(t,e.child,n,r)}function CS(e,t,n,r,a){n=n.render;var i=t.ref;return Kc(t,a),r=j_(e,t,n,r,i,a),n=G_(),e!==null&&!ai?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Ms(e,t,a)):(cr&&n&&R_(t),t.flags|=1,Va(e,t,r,a),t.child)}function TS(e,t,n,r,a){if(e===null){var i=n.type;return typeof i=="function"&&!e2(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=i,nI(e,t,i,r,a)):(e=T0(n.type,null,r,t,t.mode,a),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,(e.lanes&a)===0){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:Dp,n(o,r)&&e.ref===t.ref)return Ms(e,t,a)}return t.flags|=1,e=wl(i,r),e.ref=t.ref,e.return=t,t.child=e}function nI(e,t,n,r,a){if(e!==null){var i=e.memoizedProps;if(Dp(i,r)&&e.ref===t.ref)if(ai=!1,t.pendingProps=r=i,(e.lanes&a)!==0)(e.flags&131072)!==0&&(ai=!0);else return t.lanes=e.lanes,Ms(e,t,a)}return A1(e,t,n,r,a)}function rI(e,t,n){var r=t.pendingProps,a=r.children,i=e!==null?e.memoizedState:null;if(r.mode==="hidden")if((t.mode&1)===0)t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Jn(Uc,gi),gi|=n;else{if((n&1073741824)===0)return e=i!==null?i.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Jn(Uc,gi),gi|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,Jn(Uc,gi),gi|=r}else i!==null?(r=i.baseLanes|n,t.memoizedState=null):r=n,Jn(Uc,gi),gi|=r;return Va(e,t,a,n),t.child}function aI(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function A1(e,t,n,r,a){var i=oi(n)?ku:La.current;return i=uf(t,i),Kc(t,a),n=j_(e,t,n,r,i,a),r=G_(),e!==null&&!ai?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Ms(e,t,a)):(cr&&r&&R_(t),t.flags|=1,Va(e,t,n,a),t.child)}function AS(e,t,n,r,a){if(oi(n)){var i=!0;tg(t)}else i=!1;if(Kc(t,a),t.stateNode===null)k0(e,t),RP(t,n,r),C1(t,n,r,a),r=!0;else if(e===null){var o=t.stateNode,s=t.memoizedProps;o.props=s;var l=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=Qi(u):(u=oi(n)?ku:La.current,u=uf(t,u));var c=n.getDerivedStateFromProps,f=typeof c=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(s!==r||l!==u)&&yS(t,o,r,u),Js=!1;var d=t.memoizedState;o.state=d,og(t,r,o,a),l=t.memoizedState,s!==r||d!==l||ii.current||Js?(typeof c=="function"&&(S1(t,n,c,r),l=t.memoizedState),(s=Js||bS(t,n,s,r,d,l,u))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),o.props=r,o.state=l,o.context=u,r=s):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,OP(e,t),s=t.memoizedProps,u=t.type===t.elementType?s:ho(t.type,s),o.props=u,f=t.pendingProps,d=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=Qi(l):(l=oi(n)?ku:La.current,l=uf(t,l));var p=n.getDerivedStateFromProps;(c=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(s!==f||d!==l)&&yS(t,o,r,l),Js=!1,d=t.memoizedState,o.state=d,og(t,r,o,a);var h=t.memoizedState;s!==f||d!==h||ii.current||Js?(typeof p=="function"&&(S1(t,n,p,r),h=t.memoizedState),(u=Js||bS(t,n,u,r,d,h,l)||!1)?(c||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,h,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,h,l)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=h),o.props=r,o.state=h,o.context=l,r=u):(typeof o.componentDidUpdate!="function"||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),r=!1)}return O1(e,t,n,r,i,a)}function O1(e,t,n,r,a,i){aI(e,t);var o=(t.flags&128)!==0;if(!r&&!o)return a&&pS(t,n,!1),Ms(e,t,i);r=t.stateNode,j$.current=t;var s=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&o?(t.child=ff(t,e.child,null,i),t.child=ff(t,null,s,i)):Va(e,t,s,i),t.memoizedState=r.state,a&&pS(t,n,!0),t.child}function iI(e){var t=e.stateNode;t.pendingContext?dS(e,t.pendingContext,t.pendingContext!==t.context):t.context&&dS(e,t.context,!1),z_(e,t.containerInfo)}function OS(e,t,n,r,a){return cf(),I_(a),t.flags|=256,Va(e,t,n,r),t.child}var M1={dehydrated:null,treeContext:null,retryLane:0};function R1(e){return{baseLanes:e,cachePool:null,transitions:null}}function oI(e,t,n){var r=t.pendingProps,a=br.current,i=!1,o=(t.flags&128)!==0,s;if((s=o)||(s=e!==null&&e.memoizedState===null?!1:(a&2)!==0),s?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(a|=1),Jn(br,a&1),e===null)return E1(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?((t.mode&1)===0?t.lanes=1:e.data==="$!"?t.lanes=8:t.lanes=1073741824,null):(o=r.children,e=r.fallback,i?(r=t.mode,i=t.child,o={mode:"hidden",children:o},(r&1)===0&&i!==null?(i.childLanes=0,i.pendingProps=o):i=iv(o,r,0,null),e=yu(e,r,n,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=R1(n),t.memoizedState=M1,e):X_(t,o));if(a=e.memoizedState,a!==null&&(s=a.dehydrated,s!==null))return G$(e,t,o,r,s,a,n);if(i){i=r.fallback,o=t.mode,a=e.child,s=a.sibling;var l={mode:"hidden",children:r.children};return(o&1)===0&&t.child!==a?(r=t.child,r.childLanes=0,r.pendingProps=l,t.deletions=null):(r=wl(a,l),r.subtreeFlags=a.subtreeFlags&14680064),s!==null?i=wl(s,i):(i=yu(i,o,n,null),i.flags|=2),i.return=t,r.return=t,r.sibling=i,t.child=r,r=i,i=t.child,o=e.child.memoizedState,o=o===null?R1(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=e.childLanes&~n,t.memoizedState=M1,r}return i=e.child,e=i.sibling,r=wl(i,{mode:"visible",children:r.children}),(t.mode&1)===0&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function X_(e,t){return t=iv({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Rm(e,t,n,r){return r!==null&&I_(r),ff(t,e.child,null,n),e=X_(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function G$(e,t,n,r,a,i,o){if(n)return t.flags&256?(t.flags&=-257,r=Ry(Error(ot(422))),Rm(e,t,o,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=r.fallback,a=t.mode,r=iv({mode:"visible",children:r.children},a,0,null),i=yu(i,a,o,null),i.flags|=2,r.return=t,i.return=t,r.sibling=i,t.child=r,(t.mode&1)!==0&&ff(t,e.child,null,o),t.child.memoizedState=R1(o),t.memoizedState=M1,i);if((t.mode&1)===0)return Rm(e,t,o,null);if(a.data==="$!"){if(r=a.nextSibling&&a.nextSibling.dataset,r)var s=r.dgst;return r=s,i=Error(ot(419)),r=Ry(i,r,void 0),Rm(e,t,o,r)}if(s=(o&e.childLanes)!==0,ai||s){if(r=sa,r!==null){switch(o&-o){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=(a&(r.suspendedLanes|o))!==0?0:a,a!==0&&a!==i.retryLane&&(i.retryLane=a,Os(e,a),yo(r,e,a,-1))}return J_(),r=Ry(Error(ot(421))),Rm(e,t,o,r)}return a.data==="$?"?(t.flags|=128,t.child=e.child,t=rV.bind(null,e),a._reactRetry=t,null):(e=i.treeContext,vi=vl(a.nextSibling),xi=t,cr=!0,go=null,e!==null&&(ji[Gi++]=ys,ji[Gi++]=xs,ji[Gi++]=Su,ys=e.id,xs=e.overflow,Su=t),t=X_(t,r.children),t.flags|=4096,t)}function MS(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),k1(e.return,t,n)}function Py(e,t,n,r,a){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:a}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=a)}function sI(e,t,n){var r=t.pendingProps,a=r.revealOrder,i=r.tail;if(Va(e,t,r.children,n),r=br.current,(r&2)!==0)r=r&1|2,t.flags|=128;else{if(e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&MS(e,n,t);else if(e.tag===19)MS(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Jn(br,r),(t.mode&1)===0)t.memoizedState=null;else switch(a){case"forwards":for(n=t.child,a=null;n!==null;)e=n.alternate,e!==null&&sg(e)===null&&(a=n),n=n.sibling;n=a,n===null?(a=t.child,t.child=null):(a=n.sibling,n.sibling=null),Py(t,!1,a,n,i);break;case"backwards":for(n=null,a=t.child,t.child=null;a!==null;){if(e=a.alternate,e!==null&&sg(e)===null){t.child=a;break}e=a.sibling,a.sibling=n,n=a,a=e}Py(t,!0,n,null,i);break;case"together":Py(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function k0(e,t){(t.mode&1)===0&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ms(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Tu|=t.lanes,(n&t.childLanes)===0)return null;if(e!==null&&t.child!==e.child)throw Error(ot(153));if(t.child!==null){for(e=t.child,n=wl(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=wl(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function H$(e,t,n){switch(t.tag){case 3:iI(t),cf();break;case 5:LP(t);break;case 1:oi(t.type)&&tg(t);break;case 4:z_(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,a=t.memoizedProps.value;Jn(ag,r._currentValue),r._currentValue=a;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(Jn(br,br.current&1),t.flags|=128,null):(n&t.child.childLanes)!==0?oI(e,t,n):(Jn(br,br.current&1),e=Ms(e,t,n),e!==null?e.sibling:null);Jn(br,br.current&1);break;case 19:if(r=(n&t.childLanes)!==0,(e.flags&128)!==0){if(r)return sI(e,t,n);t.flags|=128}if(a=t.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),Jn(br,br.current),r)break;return null;case 22:case 23:return t.lanes=0,rI(e,t,n)}return Ms(e,t,n)}var lI,P1,uI,cI;lI=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};P1=function(){};uI=function(e,t,n,r){var a=e.memoizedProps;if(a!==r){e=t.stateNode,pu(Yo.current);var i=null;switch(n){case"input":a=e1(e,a),r=e1(e,r),i=[];break;case"select":a=wr({},a,{value:void 0}),r=wr({},r,{value:void 0}),i=[];break;case"textarea":a=r1(e,a),r=r1(e,r),i=[];break;default:typeof a.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=J0)}i1(n,r);var o;n=null;for(u in a)if(!r.hasOwnProperty(u)&&a.hasOwnProperty(u)&&a[u]!=null)if(u==="style"){var s=a[u];for(o in s)s.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Mp.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in r){var l=r[u];if(s=a!=null?a[u]:void 0,r.hasOwnProperty(u)&&l!==s&&(l!=null||s!=null))if(u==="style")if(s){for(o in s)!s.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&s[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(i||(i=[]),i.push(u,n)),n=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,s=s?s.__html:void 0,l!=null&&s!==l&&(i=i||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(i=i||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Mp.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&ar("scroll",e),i||s===l||(i=[])):(i=i||[]).push(u,l))}n&&(i=i||[]).push("style",n);var u=i;(t.updateQueue=u)&&(t.flags|=4)}};cI=function(e,t,n,r){n!==r&&(t.flags|=4)};function xd(e,t){if(!cr)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Aa(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var a=e.child;a!==null;)n|=a.lanes|a.childLanes,r|=a.subtreeFlags&14680064,r|=a.flags&14680064,a.return=e,a=a.sibling;else for(a=e.child;a!==null;)n|=a.lanes|a.childLanes,r|=a.subtreeFlags,r|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function W$(e,t,n){var r=t.pendingProps;switch(P_(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Aa(t),null;case 1:return oi(t.type)&&eg(),Aa(t),null;case 3:return r=t.stateNode,df(),or(ii),or(La),$_(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(Om(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,go!==null&&(U1(go),go=null))),P1(e,t),Aa(t),null;case 5:U_(t);var a=pu(Vp.current);if(n=t.type,e!==null&&t.stateNode!=null)uI(e,t,n,r,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(ot(166));return Aa(t),null}if(e=pu(Yo.current),Om(t)){r=t.stateNode,n=t.type;var i=t.memoizedProps;switch(r[Vo]=t,r[Up]=i,e=(t.mode&1)!==0,n){case"dialog":ar("cancel",r),ar("close",r);break;case"iframe":case"object":case"embed":ar("load",r);break;case"video":case"audio":for(a=0;a<Jd.length;a++)ar(Jd[a],r);break;case"source":ar("error",r);break;case"img":case"image":case"link":ar("error",r),ar("load",r);break;case"details":ar("toggle",r);break;case"input":z3(r,i),ar("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},ar("invalid",r);break;case"textarea":$3(r,i),ar("invalid",r)}i1(n,i),a=null;for(var o in i)if(i.hasOwnProperty(o)){var s=i[o];o==="children"?typeof s=="string"?r.textContent!==s&&(i.suppressHydrationWarning!==!0&&Am(r.textContent,s,e),a=["children",s]):typeof s=="number"&&r.textContent!==""+s&&(i.suppressHydrationWarning!==!0&&Am(r.textContent,s,e),a=["children",""+s]):Mp.hasOwnProperty(o)&&s!=null&&o==="onScroll"&&ar("scroll",r)}switch(n){case"input":xm(r),U3(r,i,!0);break;case"textarea":xm(r),V3(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=J0)}r=a,t.updateQueue=r,r!==null&&(t.flags|=4)}else{o=a.nodeType===9?a:a.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=D8(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=o.createElement(n,{is:r.is}):(e=o.createElement(n),n==="select"&&(o=e,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):e=o.createElementNS(e,n),e[Vo]=t,e[Up]=r,lI(e,t,!1,!1),t.stateNode=e;e:{switch(o=o1(n,r),n){case"dialog":ar("cancel",e),ar("close",e),a=r;break;case"iframe":case"object":case"embed":ar("load",e),a=r;break;case"video":case"audio":for(a=0;a<Jd.length;a++)ar(Jd[a],e);a=r;break;case"source":ar("error",e),a=r;break;case"img":case"image":case"link":ar("error",e),ar("load",e),a=r;break;case"details":ar("toggle",e),a=r;break;case"input":z3(e,r),a=e1(e,r),ar("invalid",e);break;case"option":a=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},a=wr({},r,{value:void 0}),ar("invalid",e);break;case"textarea":$3(e,r),a=r1(e,r),ar("invalid",e);break;default:a=r}i1(n,a),s=a;for(i in s)if(s.hasOwnProperty(i)){var l=s[i];i==="style"?U8(e,l):i==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&B8(e,l)):i==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Rp(e,l):typeof l=="number"&&Rp(e,""+l):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Mp.hasOwnProperty(i)?l!=null&&i==="onScroll"&&ar("scroll",e):l!=null&&v_(e,i,l,o))}switch(n){case"input":xm(e),U3(e,r,!1);break;case"textarea":xm(e),V3(e);break;case"option":r.value!=null&&e.setAttribute("value",""+El(r.value));break;case"select":e.multiple=!!r.multiple,i=r.value,i!=null?Xc(e,!!r.multiple,i,!1):r.defaultValue!=null&&Xc(e,!!r.multiple,r.defaultValue,!0);break;default:typeof a.onClick=="function"&&(e.onclick=J0)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Aa(t),null;case 6:if(e&&t.stateNode!=null)cI(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(ot(166));if(n=pu(Vp.current),pu(Yo.current),Om(t)){if(r=t.stateNode,n=t.memoizedProps,r[Vo]=t,(i=r.nodeValue!==n)&&(e=xi,e!==null))switch(e.tag){case 3:Am(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Am(r.nodeValue,n,(e.mode&1)!==0)}i&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Vo]=t,t.stateNode=r}return Aa(t),null;case 13:if(or(br),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(cr&&vi!==null&&(t.mode&1)!==0&&(t.flags&128)===0)TP(),cf(),t.flags|=98560,i=!1;else if(i=Om(t),r!==null&&r.dehydrated!==null){if(e===null){if(!i)throw Error(ot(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(ot(317));i[Vo]=t}else cf(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;Aa(t),i=!1}else go!==null&&(U1(go),go=null),i=!0;if(!i)return t.flags&65536?t:null}return(t.flags&128)!==0?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,(t.mode&1)!==0&&(e===null||(br.current&1)!==0?ea===0&&(ea=3):J_())),t.updateQueue!==null&&(t.flags|=4),Aa(t),null);case 4:return df(),P1(e,t),e===null&&Bp(t.stateNode.containerInfo),Aa(t),null;case 10:return F_(t.type._context),Aa(t),null;case 17:return oi(t.type)&&eg(),Aa(t),null;case 19:if(or(br),i=t.memoizedState,i===null)return Aa(t),null;if(r=(t.flags&128)!==0,o=i.rendering,o===null)if(r)xd(i,!1);else{if(ea!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(o=sg(e),o!==null){for(t.flags|=128,xd(i,!1),r=o.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)i=n,e=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,e=o.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Jn(br,br.current&1|2),t.child}e=e.sibling}i.tail!==null&&Nr()>hf&&(t.flags|=128,r=!0,xd(i,!1),t.lanes=4194304)}else{if(!r)if(e=sg(o),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),xd(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!cr)return Aa(t),null}else 2*Nr()-i.renderingStartTime>hf&&n!==1073741824&&(t.flags|=128,r=!0,xd(i,!1),t.lanes=4194304);i.isBackwards?(o.sibling=t.child,t.child=o):(n=i.last,n!==null?n.sibling=o:t.child=o,i.last=o)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=Nr(),t.sibling=null,n=br.current,Jn(br,r?n&1|2:n&1),t):(Aa(t),null);case 22:case 23:return Q_(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&(t.mode&1)!==0?(gi&1073741824)!==0&&(Aa(t),t.subtreeFlags&6&&(t.flags|=8192)):Aa(t),null;case 24:return null;case 25:return null}throw Error(ot(156,t.tag))}function X$(e,t){switch(P_(t),t.tag){case 1:return oi(t.type)&&eg(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return df(),or(ii),or(La),$_(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 5:return U_(t),null;case 13:if(or(br),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(ot(340));cf()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return or(br),null;case 4:return df(),null;case 10:return F_(t.type._context),null;case 22:case 23:return Q_(),null;case 24:return null;default:return null}}var Pm=!1,Ra=!1,Y$=typeof WeakSet=="function"?WeakSet:Set,It=null;function zc(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Ar(e,t,r)}else n.current=null}function I1(e,t,n){try{n()}catch(r){Ar(e,t,r)}}var RS=!1;function Z$(e,t){if(g1=q0,e=hP(),M_(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var a=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,s=-1,l=-1,u=0,c=0,f=e,d=null;t:for(;;){for(var p;f!==n||a!==0&&f.nodeType!==3||(s=o+a),f!==i||r!==0&&f.nodeType!==3||(l=o+r),f.nodeType===3&&(o+=f.nodeValue.length),(p=f.firstChild)!==null;)d=f,f=p;for(;;){if(f===e)break t;if(d===n&&++u===a&&(s=o),d===i&&++c===r&&(l=o),(p=f.nextSibling)!==null)break;f=d,d=f.parentNode}f=p}n=s===-1||l===-1?null:{start:s,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(v1={focusedElem:e,selectionRange:n},q0=!1,It=t;It!==null;)if(t=It,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,It=e;else for(;It!==null;){t=It;try{var h=t.alternate;if((t.flags&1024)!==0)switch(t.tag){case 0:case 11:case 15:break;case 1:if(h!==null){var g=h.memoizedProps,v=h.memoizedState,b=t.stateNode,y=b.getSnapshotBeforeUpdate(t.elementType===t.type?g:ho(t.type,g),v);b.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var x=t.stateNode.containerInfo;x.nodeType===1?x.textContent="":x.nodeType===9&&x.documentElement&&x.removeChild(x.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ot(163))}}catch(E){Ar(t,t.return,E)}if(e=t.sibling,e!==null){e.return=t.return,It=e;break}It=t.return}return h=RS,RS=!1,h}function gp(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var a=r=r.next;do{if((a.tag&e)===e){var i=a.destroy;a.destroy=void 0,i!==void 0&&I1(t,n,i)}a=a.next}while(a!==r)}}function rv(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function L1(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function fI(e){var t=e.alternate;t!==null&&(e.alternate=null,fI(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Vo],delete t[Up],delete t[x1],delete t[R$],delete t[P$])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function dI(e){return e.tag===5||e.tag===3||e.tag===4}function PS(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||dI(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function N1(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=J0));else if(r!==4&&(e=e.child,e!==null))for(N1(e,t,n),e=e.sibling;e!==null;)N1(e,t,n),e=e.sibling}function F1(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(F1(e,t,n),e=e.sibling;e!==null;)F1(e,t,n),e=e.sibling}var ba=null,mo=!1;function Gs(e,t,n){for(n=n.child;n!==null;)pI(e,t,n),n=n.sibling}function pI(e,t,n){if(Xo&&typeof Xo.onCommitFiberUnmount=="function")try{Xo.onCommitFiberUnmount(Zg,n)}catch{}switch(n.tag){case 5:Ra||zc(n,t);case 6:var r=ba,a=mo;ba=null,Gs(e,t,n),ba=r,mo=a,ba!==null&&(mo?(e=ba,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):ba.removeChild(n.stateNode));break;case 18:ba!==null&&(mo?(e=ba,n=n.stateNode,e.nodeType===8?Sy(e.parentNode,n):e.nodeType===1&&Sy(e,n),Np(e)):Sy(ba,n.stateNode));break;case 4:r=ba,a=mo,ba=n.stateNode.containerInfo,mo=!0,Gs(e,t,n),ba=r,mo=a;break;case 0:case 11:case 14:case 15:if(!Ra&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){a=r=r.next;do{var i=a,o=i.destroy;i=i.tag,o!==void 0&&((i&2)!==0||(i&4)!==0)&&I1(n,t,o),a=a.next}while(a!==r)}Gs(e,t,n);break;case 1:if(!Ra&&(zc(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(s){Ar(n,t,s)}Gs(e,t,n);break;case 21:Gs(e,t,n);break;case 22:n.mode&1?(Ra=(r=Ra)||n.memoizedState!==null,Gs(e,t,n),Ra=r):Gs(e,t,n);break;default:Gs(e,t,n)}}function IS(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new Y$),t.forEach(function(r){var a=aV.bind(null,e,r);n.has(r)||(n.add(r),r.then(a,a))})}}function uo(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var a=n[r];try{var i=e,o=t,s=o;e:for(;s!==null;){switch(s.tag){case 5:ba=s.stateNode,mo=!1;break e;case 3:ba=s.stateNode.containerInfo,mo=!0;break e;case 4:ba=s.stateNode.containerInfo,mo=!0;break e}s=s.return}if(ba===null)throw Error(ot(160));pI(i,o,a),ba=null,mo=!1;var l=a.alternate;l!==null&&(l.return=null),a.return=null}catch(u){Ar(a,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)hI(t,e),t=t.sibling}function hI(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(uo(t,e),Po(e),r&4){try{gp(3,e,e.return),rv(3,e)}catch(g){Ar(e,e.return,g)}try{gp(5,e,e.return)}catch(g){Ar(e,e.return,g)}}break;case 1:uo(t,e),Po(e),r&512&&n!==null&&zc(n,n.return);break;case 5:if(uo(t,e),Po(e),r&512&&n!==null&&zc(n,n.return),e.flags&32){var a=e.stateNode;try{Rp(a,"")}catch(g){Ar(e,e.return,g)}}if(r&4&&(a=e.stateNode,a!=null)){var i=e.memoizedProps,o=n!==null?n.memoizedProps:i,s=e.type,l=e.updateQueue;if(e.updateQueue=null,l!==null)try{s==="input"&&i.type==="radio"&&i.name!=null&&N8(a,i),o1(s,o);var u=o1(s,i);for(o=0;o<l.length;o+=2){var c=l[o],f=l[o+1];c==="style"?U8(a,f):c==="dangerouslySetInnerHTML"?B8(a,f):c==="children"?Rp(a,f):v_(a,c,f,u)}switch(s){case"input":t1(a,i);break;case"textarea":F8(a,i);break;case"select":var d=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!i.multiple;var p=i.value;p!=null?Xc(a,!!i.multiple,p,!1):d!==!!i.multiple&&(i.defaultValue!=null?Xc(a,!!i.multiple,i.defaultValue,!0):Xc(a,!!i.multiple,i.multiple?[]:"",!1))}a[Up]=i}catch(g){Ar(e,e.return,g)}}break;case 6:if(uo(t,e),Po(e),r&4){if(e.stateNode===null)throw Error(ot(162));a=e.stateNode,i=e.memoizedProps;try{a.nodeValue=i}catch(g){Ar(e,e.return,g)}}break;case 3:if(uo(t,e),Po(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Np(t.containerInfo)}catch(g){Ar(e,e.return,g)}break;case 4:uo(t,e),Po(e);break;case 13:uo(t,e),Po(e),a=e.child,a.flags&8192&&(i=a.memoizedState!==null,a.stateNode.isHidden=i,!i||a.alternate!==null&&a.alternate.memoizedState!==null||(q_=Nr())),r&4&&IS(e);break;case 22:if(c=n!==null&&n.memoizedState!==null,e.mode&1?(Ra=(u=Ra)||c,uo(t,e),Ra=u):uo(t,e),Po(e),r&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!c&&(e.mode&1)!==0)for(It=e,c=e.child;c!==null;){for(f=It=c;It!==null;){switch(d=It,p=d.child,d.tag){case 0:case 11:case 14:case 15:gp(4,d,d.return);break;case 1:zc(d,d.return);var h=d.stateNode;if(typeof h.componentWillUnmount=="function"){r=d,n=d.return;try{t=r,h.props=t.memoizedProps,h.state=t.memoizedState,h.componentWillUnmount()}catch(g){Ar(r,n,g)}}break;case 5:zc(d,d.return);break;case 22:if(d.memoizedState!==null){NS(f);continue}}p!==null?(p.return=d,It=p):NS(f)}c=c.sibling}e:for(c=null,f=e;;){if(f.tag===5){if(c===null){c=f;try{a=f.stateNode,u?(i=a.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(s=f.stateNode,l=f.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,s.style.display=z8("display",o))}catch(g){Ar(e,e.return,g)}}}else if(f.tag===6){if(c===null)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(g){Ar(e,e.return,g)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===e)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;f.sibling===null;){if(f.return===null||f.return===e)break e;c===f&&(c=null),f=f.return}c===f&&(c=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:uo(t,e),Po(e),r&4&&IS(e);break;case 21:break;default:uo(t,e),Po(e)}}function Po(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(dI(n)){var r=n;break e}n=n.return}throw Error(ot(160))}switch(r.tag){case 5:var a=r.stateNode;r.flags&32&&(Rp(a,""),r.flags&=-33);var i=PS(e);F1(e,i,a);break;case 3:case 4:var o=r.stateNode.containerInfo,s=PS(e);N1(e,s,o);break;default:throw Error(ot(161))}}catch(l){Ar(e,e.return,l)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function q$(e,t,n){It=e,mI(e)}function mI(e,t,n){for(var r=(e.mode&1)!==0;It!==null;){var a=It,i=a.child;if(a.tag===22&&r){var o=a.memoizedState!==null||Pm;if(!o){var s=a.alternate,l=s!==null&&s.memoizedState!==null||Ra;s=Pm;var u=Ra;if(Pm=o,(Ra=l)&&!u)for(It=a;It!==null;)o=It,l=o.child,o.tag===22&&o.memoizedState!==null?FS(a):l!==null?(l.return=o,It=l):FS(a);for(;i!==null;)It=i,mI(i),i=i.sibling;It=a,Pm=s,Ra=u}LS(e)}else(a.subtreeFlags&8772)!==0&&i!==null?(i.return=a,It=i):LS(e)}}function LS(e){for(;It!==null;){var t=It;if((t.flags&8772)!==0){var n=t.alternate;try{if((t.flags&8772)!==0)switch(t.tag){case 0:case 11:case 15:Ra||rv(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!Ra)if(n===null)r.componentDidMount();else{var a=t.elementType===t.type?n.memoizedProps:ho(t.type,n.memoizedProps);r.componentDidUpdate(a,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&vS(t,i,r);break;case 3:var o=t.updateQueue;if(o!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}vS(t,o,n)}break;case 5:var s=t.stateNode;if(n===null&&t.flags&4){n=s;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var c=u.memoizedState;if(c!==null){var f=c.dehydrated;f!==null&&Np(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ot(163))}Ra||t.flags&512&&L1(t)}catch(d){Ar(t,t.return,d)}}if(t===e){It=null;break}if(n=t.sibling,n!==null){n.return=t.return,It=n;break}It=t.return}}function NS(e){for(;It!==null;){var t=It;if(t===e){It=null;break}var n=t.sibling;if(n!==null){n.return=t.return,It=n;break}It=t.return}}function FS(e){for(;It!==null;){var t=It;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{rv(4,t)}catch(l){Ar(t,n,l)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var a=t.return;try{r.componentDidMount()}catch(l){Ar(t,a,l)}}var i=t.return;try{L1(t)}catch(l){Ar(t,i,l)}break;case 5:var o=t.return;try{L1(t)}catch(l){Ar(t,o,l)}}}catch(l){Ar(t,t.return,l)}if(t===e){It=null;break}var s=t.sibling;if(s!==null){s.return=t.return,It=s;break}It=t.return}}var K$=Math.ceil,cg=Rs.ReactCurrentDispatcher,Y_=Rs.ReactCurrentOwner,qi=Rs.ReactCurrentBatchConfig,In=0,sa=null,Vr=null,_a=0,gi=0,Uc=Il(0),ea=0,Wp=null,Tu=0,av=0,Z_=0,vp=null,ri=null,q_=0,hf=1/0,ps=null,fg=!1,D1=null,yl=null,Im=!1,sl=null,dg=0,bp=0,B1=null,S0=-1,C0=0;function Ha(){return(In&6)!==0?Nr():S0!==-1?S0:S0=Nr()}function xl(e){return(e.mode&1)===0?1:(In&2)!==0&&_a!==0?_a&-_a:L$.transition!==null?(C0===0&&(C0=Q8()),C0):(e=Wn,e!==0||(e=window.event,e=e===void 0?16:iP(e.type)),e)}function yo(e,t,n,r){if(50<bp)throw bp=0,B1=null,Error(ot(185));xh(e,n,r),((In&2)===0||e!==sa)&&(e===sa&&((In&2)===0&&(av|=n),ea===4&&rl(e,_a)),si(e,r),n===1&&In===0&&(t.mode&1)===0&&(hf=Nr()+500,ev&&Ll()))}function si(e,t){var n=e.callbackNode;LU(e,t);var r=Z0(e,e===sa?_a:0);if(r===0)n!==null&&H3(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&H3(n),t===1)e.tag===0?I$(DS.bind(null,e)):kP(DS.bind(null,e)),O$(function(){(In&6)===0&&Ll()}),n=null;else{switch(J8(r)){case 1:n=__;break;case 4:n=q8;break;case 16:n=Y0;break;case 536870912:n=K8;break;default:n=Y0}n=EI(n,gI.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function gI(e,t){if(S0=-1,C0=0,(In&6)!==0)throw Error(ot(327));var n=e.callbackNode;if(Qc()&&e.callbackNode!==n)return null;var r=Z0(e,e===sa?_a:0);if(r===0)return null;if((r&30)!==0||(r&e.expiredLanes)!==0||t)t=pg(e,r);else{t=r;var a=In;In|=2;var i=bI();(sa!==e||_a!==t)&&(ps=null,hf=Nr()+500,bu(e,t));do try{eV();break}catch(s){vI(e,s)}while(1);N_(),cg.current=i,In=a,Vr!==null?t=0:(sa=null,_a=0,t=ea)}if(t!==0){if(t===2&&(a=f1(e),a!==0&&(r=a,t=z1(e,a))),t===1)throw n=Wp,bu(e,0),rl(e,r),si(e,Nr()),n;if(t===6)rl(e,r);else{if(a=e.current.alternate,(r&30)===0&&!Q$(a)&&(t=pg(e,r),t===2&&(i=f1(e),i!==0&&(r=i,t=z1(e,i))),t===1))throw n=Wp,bu(e,0),rl(e,r),si(e,Nr()),n;switch(e.finishedWork=a,e.finishedLanes=r,t){case 0:case 1:throw Error(ot(345));case 2:su(e,ri,ps);break;case 3:if(rl(e,r),(r&130023424)===r&&(t=q_+500-Nr(),10<t)){if(Z0(e,0)!==0)break;if(a=e.suspendedLanes,(a&r)!==r){Ha(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=y1(su.bind(null,e,ri,ps),t);break}su(e,ri,ps);break;case 4:if(rl(e,r),(r&4194240)===r)break;for(t=e.eventTimes,a=-1;0<r;){var o=31-bo(r);i=1<<o,o=t[o],o>a&&(a=o),r&=~i}if(r=a,r=Nr()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*K$(r/1960))-r,10<r){e.timeoutHandle=y1(su.bind(null,e,ri,ps),r);break}su(e,ri,ps);break;case 5:su(e,ri,ps);break;default:throw Error(ot(329))}}}return si(e,Nr()),e.callbackNode===n?gI.bind(null,e):null}function z1(e,t){var n=vp;return e.current.memoizedState.isDehydrated&&(bu(e,t).flags|=256),e=pg(e,t),e!==2&&(t=ri,ri=n,t!==null&&U1(t)),e}function U1(e){ri===null?ri=e:ri.push.apply(ri,e)}function Q$(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var a=n[r],i=a.getSnapshot;a=a.value;try{if(!_o(i(),a))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function rl(e,t){for(t&=~Z_,t&=~av,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-bo(t),r=1<<n;e[n]=-1,t&=~r}}function DS(e){if((In&6)!==0)throw Error(ot(327));Qc();var t=Z0(e,0);if((t&1)===0)return si(e,Nr()),null;var n=pg(e,t);if(e.tag!==0&&n===2){var r=f1(e);r!==0&&(t=r,n=z1(e,r))}if(n===1)throw n=Wp,bu(e,0),rl(e,t),si(e,Nr()),n;if(n===6)throw Error(ot(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,su(e,ri,ps),si(e,Nr()),null}function K_(e,t){var n=In;In|=1;try{return e(t)}finally{In=n,In===0&&(hf=Nr()+500,ev&&Ll())}}function Au(e){sl!==null&&sl.tag===0&&(In&6)===0&&Qc();var t=In;In|=1;var n=qi.transition,r=Wn;try{if(qi.transition=null,Wn=1,e)return e()}finally{Wn=r,qi.transition=n,In=t,(In&6)===0&&Ll()}}function Q_(){gi=Uc.current,or(Uc)}function bu(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,A$(n)),Vr!==null)for(n=Vr.return;n!==null;){var r=n;switch(P_(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&eg();break;case 3:df(),or(ii),or(La),$_();break;case 5:U_(r);break;case 4:df();break;case 13:or(br);break;case 19:or(br);break;case 10:F_(r.type._context);break;case 22:case 23:Q_()}n=n.return}if(sa=e,Vr=e=wl(e.current,null),_a=gi=t,ea=0,Wp=null,Z_=av=Tu=0,ri=vp=null,du!==null){for(t=0;t<du.length;t++)if(n=du[t],r=n.interleaved,r!==null){n.interleaved=null;var a=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=a,r.next=o}n.pending=r}du=null}return e}function vI(e,t){do{var n=Vr;try{if(N_(),_0.current=ug,lg){for(var r=xr.memoizedState;r!==null;){var a=r.queue;a!==null&&(a.pending=null),r=r.next}lg=!1}if(Cu=0,oa=Jr=xr=null,mp=!1,jp=0,Y_.current=null,n===null||n.return===null){ea=1,Wp=t,Vr=null;break}e:{var i=e,o=n.return,s=n,l=t;if(t=_a,s.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,c=s,f=c.tag;if((c.mode&1)===0&&(f===0||f===11||f===15)){var d=c.alternate;d?(c.updateQueue=d.updateQueue,c.memoizedState=d.memoizedState,c.lanes=d.lanes):(c.updateQueue=null,c.memoizedState=null)}var p=kS(o);if(p!==null){p.flags&=-257,SS(p,o,s,i,t),p.mode&1&&ES(i,u,t),t=p,l=u;var h=t.updateQueue;if(h===null){var g=new Set;g.add(l),t.updateQueue=g}else h.add(l);break e}else{if((t&1)===0){ES(i,u,t),J_();break e}l=Error(ot(426))}}else if(cr&&s.mode&1){var v=kS(o);if(v!==null){(v.flags&65536)===0&&(v.flags|=256),SS(v,o,s,i,t),I_(pf(l,s));break e}}i=l=pf(l,s),ea!==4&&(ea=2),vp===null?vp=[i]:vp.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var b=eI(i,l,t);gS(i,b);break e;case 1:s=l;var y=i.type,x=i.stateNode;if((i.flags&128)===0&&(typeof y.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(yl===null||!yl.has(x)))){i.flags|=65536,t&=-t,i.lanes|=t;var E=tI(i,s,t);gS(i,E);break e}}i=i.return}while(i!==null)}xI(n)}catch(T){t=T,Vr===n&&n!==null&&(Vr=n=n.return);continue}break}while(1)}function bI(){var e=cg.current;return cg.current=ug,e===null?ug:e}function J_(){(ea===0||ea===3||ea===2)&&(ea=4),sa===null||(Tu&268435455)===0&&(av&268435455)===0||rl(sa,_a)}function pg(e,t){var n=In;In|=2;var r=bI();(sa!==e||_a!==t)&&(ps=null,bu(e,t));do try{J$();break}catch(a){vI(e,a)}while(1);if(N_(),In=n,cg.current=r,Vr!==null)throw Error(ot(261));return sa=null,_a=0,ea}function J$(){for(;Vr!==null;)yI(Vr)}function eV(){for(;Vr!==null&&!SU();)yI(Vr)}function yI(e){var t=_I(e.alternate,e,gi);e.memoizedProps=e.pendingProps,t===null?xI(e):Vr=t,Y_.current=null}function xI(e){var t=e;do{var n=t.alternate;if(e=t.return,(t.flags&32768)===0){if(n=W$(n,t,gi),n!==null){Vr=n;return}}else{if(n=X$(n,t),n!==null){n.flags&=32767,Vr=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{ea=6,Vr=null;return}}if(t=t.sibling,t!==null){Vr=t;return}Vr=t=e}while(t!==null);ea===0&&(ea=5)}function su(e,t,n){var r=Wn,a=qi.transition;try{qi.transition=null,Wn=1,tV(e,t,n,r)}finally{qi.transition=a,Wn=r}return null}function tV(e,t,n,r){do Qc();while(sl!==null);if((In&6)!==0)throw Error(ot(327));n=e.finishedWork;var a=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(ot(177));e.callbackNode=null,e.callbackPriority=0;var i=n.lanes|n.childLanes;if(NU(e,i),e===sa&&(Vr=sa=null,_a=0),(n.subtreeFlags&2064)===0&&(n.flags&2064)===0||Im||(Im=!0,EI(Y0,function(){return Qc(),null})),i=(n.flags&15990)!==0,(n.subtreeFlags&15990)!==0||i){i=qi.transition,qi.transition=null;var o=Wn;Wn=1;var s=In;In|=4,Y_.current=null,Z$(e,n),hI(n,e),w$(v1),q0=!!g1,v1=g1=null,e.current=n,q$(n),CU(),In=s,Wn=o,qi.transition=i}else e.current=n;if(Im&&(Im=!1,sl=e,dg=a),i=e.pendingLanes,i===0&&(yl=null),OU(n.stateNode),si(e,Nr()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)a=t[n],r(a.value,{componentStack:a.stack,digest:a.digest});if(fg)throw fg=!1,e=D1,D1=null,e;return(dg&1)!==0&&e.tag!==0&&Qc(),i=e.pendingLanes,(i&1)!==0?e===B1?bp++:(bp=0,B1=e):bp=0,Ll(),null}function Qc(){if(sl!==null){var e=J8(dg),t=qi.transition,n=Wn;try{if(qi.transition=null,Wn=16>e?16:e,sl===null)var r=!1;else{if(e=sl,sl=null,dg=0,(In&6)!==0)throw Error(ot(331));var a=In;for(In|=4,It=e.current;It!==null;){var i=It,o=i.child;if((It.flags&16)!==0){var s=i.deletions;if(s!==null){for(var l=0;l<s.length;l++){var u=s[l];for(It=u;It!==null;){var c=It;switch(c.tag){case 0:case 11:case 15:gp(8,c,i)}var f=c.child;if(f!==null)f.return=c,It=f;else for(;It!==null;){c=It;var d=c.sibling,p=c.return;if(fI(c),c===u){It=null;break}if(d!==null){d.return=p,It=d;break}It=p}}}var h=i.alternate;if(h!==null){var g=h.child;if(g!==null){h.child=null;do{var v=g.sibling;g.sibling=null,g=v}while(g!==null)}}It=i}}if((i.subtreeFlags&2064)!==0&&o!==null)o.return=i,It=o;else e:for(;It!==null;){if(i=It,(i.flags&2048)!==0)switch(i.tag){case 0:case 11:case 15:gp(9,i,i.return)}var b=i.sibling;if(b!==null){b.return=i.return,It=b;break e}It=i.return}}var y=e.current;for(It=y;It!==null;){o=It;var x=o.child;if((o.subtreeFlags&2064)!==0&&x!==null)x.return=o,It=x;else e:for(o=y;It!==null;){if(s=It,(s.flags&2048)!==0)try{switch(s.tag){case 0:case 11:case 15:rv(9,s)}}catch(T){Ar(s,s.return,T)}if(s===o){It=null;break e}var E=s.sibling;if(E!==null){E.return=s.return,It=E;break e}It=s.return}}if(In=a,Ll(),Xo&&typeof Xo.onPostCommitFiberRoot=="function")try{Xo.onPostCommitFiberRoot(Zg,e)}catch{}r=!0}return r}finally{Wn=n,qi.transition=t}}return!1}function BS(e,t,n){t=pf(n,t),t=eI(e,t,1),e=bl(e,t,1),t=Ha(),e!==null&&(xh(e,1,t),si(e,t))}function Ar(e,t,n){if(e.tag===3)BS(e,e,n);else for(;t!==null;){if(t.tag===3){BS(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(yl===null||!yl.has(r))){e=pf(n,e),e=tI(t,e,1),t=bl(t,e,1),e=Ha(),t!==null&&(xh(t,1,e),si(t,e));break}}t=t.return}}function nV(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=Ha(),e.pingedLanes|=e.suspendedLanes&n,sa===e&&(_a&n)===n&&(ea===4||ea===3&&(_a&130023424)===_a&&500>Nr()-q_?bu(e,0):Z_|=n),si(e,t)}function wI(e,t){t===0&&((e.mode&1)===0?t=1:(t=Em,Em<<=1,(Em&130023424)===0&&(Em=4194304)));var n=Ha();e=Os(e,t),e!==null&&(xh(e,t,n),si(e,n))}function rV(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),wI(e,n)}function aV(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,a=e.memoizedState;a!==null&&(n=a.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(ot(314))}r!==null&&r.delete(t),wI(e,n)}var _I;_I=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||ii.current)ai=!0;else{if((e.lanes&n)===0&&(t.flags&128)===0)return ai=!1,H$(e,t,n);ai=(e.flags&131072)!==0}else ai=!1,cr&&(t.flags&1048576)!==0&&SP(t,rg,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;k0(e,t),e=t.pendingProps;var a=uf(t,La.current);Kc(t,n),a=j_(null,t,r,e,a,n);var i=G_();return t.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,oi(r)?(i=!0,tg(t)):i=!1,t.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,B_(t),a.updater=tv,t.stateNode=a,a._reactInternals=t,C1(t,r,e,n),t=O1(null,t,r,!0,i,n)):(t.tag=0,cr&&i&&R_(t),Va(null,t,a,n),t=t.child),t;case 16:r=t.elementType;e:{switch(k0(e,t),e=t.pendingProps,a=r._init,r=a(r._payload),t.type=r,a=t.tag=oV(r),e=ho(r,e),a){case 0:t=A1(null,t,r,e,n);break e;case 1:t=AS(null,t,r,e,n);break e;case 11:t=CS(null,t,r,e,n);break e;case 14:t=TS(null,t,r,ho(r.type,e),n);break e}throw Error(ot(306,r,""))}return t;case 0:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:ho(r,a),A1(e,t,r,a,n);case 1:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:ho(r,a),AS(e,t,r,a,n);case 3:e:{if(iI(t),e===null)throw Error(ot(387));r=t.pendingProps,i=t.memoizedState,a=i.element,OP(e,t),og(t,r,null,n);var o=t.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){a=pf(Error(ot(423)),t),t=OS(e,t,r,n,a);break e}else if(r!==a){a=pf(Error(ot(424)),t),t=OS(e,t,r,n,a);break e}else for(vi=vl(t.stateNode.containerInfo.firstChild),xi=t,cr=!0,go=null,n=IP(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(cf(),r===a){t=Ms(e,t,n);break e}Va(e,t,r,n)}t=t.child}return t;case 5:return LP(t),e===null&&E1(t),r=t.type,a=t.pendingProps,i=e!==null?e.memoizedProps:null,o=a.children,b1(r,a)?o=null:i!==null&&b1(r,i)&&(t.flags|=32),aI(e,t),Va(e,t,o,n),t.child;case 6:return e===null&&E1(t),null;case 13:return oI(e,t,n);case 4:return z_(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=ff(t,null,r,n):Va(e,t,r,n),t.child;case 11:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:ho(r,a),CS(e,t,r,a,n);case 7:return Va(e,t,t.pendingProps,n),t.child;case 8:return Va(e,t,t.pendingProps.children,n),t.child;case 12:return Va(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,a=t.pendingProps,i=t.memoizedProps,o=a.value,Jn(ag,r._currentValue),r._currentValue=o,i!==null)if(_o(i.value,o)){if(i.children===a.children&&!ii.current){t=Ms(e,t,n);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var s=i.dependencies;if(s!==null){o=i.child;for(var l=s.firstContext;l!==null;){if(l.context===r){if(i.tag===1){l=_s(-1,n&-n),l.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var c=u.pending;c===null?l.next=l:(l.next=c.next,c.next=l),u.pending=l}}i.lanes|=n,l=i.alternate,l!==null&&(l.lanes|=n),k1(i.return,n,t),s.lanes|=n;break}l=l.next}}else if(i.tag===10)o=i.type===t.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(ot(341));o.lanes|=n,s=o.alternate,s!==null&&(s.lanes|=n),k1(o,n,t),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===t){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}Va(e,t,a.children,n),t=t.child}return t;case 9:return a=t.type,r=t.pendingProps.children,Kc(t,n),a=Qi(a),r=r(a),t.flags|=1,Va(e,t,r,n),t.child;case 14:return r=t.type,a=ho(r,t.pendingProps),a=ho(r.type,a),TS(e,t,r,a,n);case 15:return nI(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:ho(r,a),k0(e,t),t.tag=1,oi(r)?(e=!0,tg(t)):e=!1,Kc(t,n),RP(t,r,a),C1(t,r,a,n),O1(null,t,r,!0,e,n);case 19:return sI(e,t,n);case 22:return rI(e,t,n)}throw Error(ot(156,t.tag))};function EI(e,t){return Z8(e,t)}function iV(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Yi(e,t,n,r){return new iV(e,t,n,r)}function e2(e){return e=e.prototype,!(!e||!e.isReactComponent)}function oV(e){if(typeof e=="function")return e2(e)?1:0;if(e!=null){if(e=e.$$typeof,e===y_)return 11;if(e===x_)return 14}return 2}function wl(e,t){var n=e.alternate;return n===null?(n=Yi(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function T0(e,t,n,r,a,i){var o=2;if(r=e,typeof e=="function")e2(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case Mc:return yu(n.children,a,i,t);case b_:o=8,a|=8;break;case qx:return e=Yi(12,n,t,a|2),e.elementType=qx,e.lanes=i,e;case Kx:return e=Yi(13,n,t,a),e.elementType=Kx,e.lanes=i,e;case Qx:return e=Yi(19,n,t,a),e.elementType=Qx,e.lanes=i,e;case P8:return iv(n,a,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case M8:o=10;break e;case R8:o=9;break e;case y_:o=11;break e;case x_:o=14;break e;case Qs:o=16,r=null;break e}throw Error(ot(130,e==null?e:typeof e,""))}return t=Yi(o,n,t,a),t.elementType=e,t.type=r,t.lanes=i,t}function yu(e,t,n,r){return e=Yi(7,e,r,t),e.lanes=n,e}function iv(e,t,n,r){return e=Yi(22,e,r,t),e.elementType=P8,e.lanes=n,e.stateNode={isHidden:!1},e}function Iy(e,t,n){return e=Yi(6,e,null,t),e.lanes=n,e}function Ly(e,t,n){return t=Yi(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function sV(e,t,n,r,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=py(0),this.expirationTimes=py(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=py(0),this.identifierPrefix=r,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function t2(e,t,n,r,a,i,o,s,l){return e=new sV(e,t,n,s,l),t===1?(t=1,i===!0&&(t|=8)):t=0,i=Yi(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},B_(i),e}function lV(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Oc,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function kI(e){if(!e)return kl;e=e._reactInternals;e:{if(Lu(e)!==e||e.tag!==1)throw Error(ot(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(oi(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(ot(171))}if(e.tag===1){var n=e.type;if(oi(n))return EP(e,n,t)}return t}function SI(e,t,n,r,a,i,o,s,l){return e=t2(n,r,!0,e,a,i,o,s,l),e.context=kI(null),n=e.current,r=Ha(),a=xl(n),i=_s(r,a),i.callback=t!=null?t:null,bl(n,i,a),e.current.lanes=a,xh(e,a,r),si(e,r),e}function ov(e,t,n,r){var a=t.current,i=Ha(),o=xl(a);return n=kI(n),t.context===null?t.context=n:t.pendingContext=n,t=_s(i,o),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=bl(a,t,o),e!==null&&(yo(e,a,o,i),w0(e,a,o)),o}function hg(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function zS(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function n2(e,t){zS(e,t),(e=e.alternate)&&zS(e,t)}function uV(){return null}var CI=typeof reportError=="function"?reportError:function(e){console.error(e)};function r2(e){this._internalRoot=e}sv.prototype.render=r2.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(ot(409));ov(e,t,null,null)};sv.prototype.unmount=r2.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Au(function(){ov(null,e,null,null)}),t[As]=null}};function sv(e){this._internalRoot=e}sv.prototype.unstable_scheduleHydration=function(e){if(e){var t=nP();e={blockedOn:null,target:e,priority:t};for(var n=0;n<nl.length&&t!==0&&t<nl[n].priority;n++);nl.splice(n,0,e),n===0&&aP(e)}};function a2(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function lv(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function US(){}function cV(e,t,n,r,a){if(a){if(typeof r=="function"){var i=r;r=function(){var u=hg(o);i.call(u)}}var o=SI(t,r,e,0,null,!1,!1,"",US);return e._reactRootContainer=o,e[As]=o.current,Bp(e.nodeType===8?e.parentNode:e),Au(),o}for(;a=e.lastChild;)e.removeChild(a);if(typeof r=="function"){var s=r;r=function(){var u=hg(l);s.call(u)}}var l=t2(e,0,!1,null,null,!1,!1,"",US);return e._reactRootContainer=l,e[As]=l.current,Bp(e.nodeType===8?e.parentNode:e),Au(function(){ov(t,l,n,r)}),l}function uv(e,t,n,r,a){var i=n._reactRootContainer;if(i){var o=i;if(typeof a=="function"){var s=a;a=function(){var l=hg(o);s.call(l)}}ov(t,o,e,a)}else o=cV(n,t,e,a,r);return hg(o)}eP=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Qd(t.pendingLanes);n!==0&&(E_(t,n|1),si(t,Nr()),(In&6)===0&&(hf=Nr()+500,Ll()))}break;case 13:Au(function(){var r=Os(e,1);if(r!==null){var a=Ha();yo(r,e,1,a)}}),n2(e,1)}};k_=function(e){if(e.tag===13){var t=Os(e,134217728);if(t!==null){var n=Ha();yo(t,e,134217728,n)}n2(e,134217728)}};tP=function(e){if(e.tag===13){var t=xl(e),n=Os(e,t);if(n!==null){var r=Ha();yo(n,e,t,r)}n2(e,t)}};nP=function(){return Wn};rP=function(e,t){var n=Wn;try{return Wn=e,t()}finally{Wn=n}};l1=function(e,t,n){switch(t){case"input":if(t1(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var a=Jg(r);if(!a)throw Error(ot(90));L8(r),t1(r,a)}}}break;case"textarea":F8(e,n);break;case"select":t=n.value,t!=null&&Xc(e,!!n.multiple,t,!1)}};j8=K_;G8=Au;var fV={usingClientEntryPoint:!1,Events:[_h,Lc,Jg,$8,V8,K_]},wd={findFiberByHostInstance:fu,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},dV={bundleType:wd.bundleType,version:wd.version,rendererPackageName:wd.rendererPackageName,rendererConfig:wd.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Rs.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=X8(e),e===null?null:e.stateNode},findFiberByHostInstance:wd.findFiberByHostInstance||uV,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__!="undefined"){var Lm=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Lm.isDisabled&&Lm.supportsFiber)try{Zg=Lm.inject(dV),Xo=Lm}catch{}}Ei.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=fV;Ei.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!a2(t))throw Error(ot(200));return lV(e,t,null,n)};Ei.createRoot=function(e,t){if(!a2(e))throw Error(ot(299));var n=!1,r="",a=CI;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(a=t.onRecoverableError)),t=t2(e,1,!1,null,null,n,!1,r,a),e[As]=t.current,Bp(e.nodeType===8?e.parentNode:e),new r2(t)};Ei.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(ot(188)):(e=Object.keys(e).join(","),Error(ot(268,e)));return e=X8(t),e=e===null?null:e.stateNode,e};Ei.flushSync=function(e){return Au(e)};Ei.hydrate=function(e,t,n){if(!lv(t))throw Error(ot(200));return uv(null,e,t,!0,n)};Ei.hydrateRoot=function(e,t,n){if(!a2(e))throw Error(ot(405));var r=n!=null&&n.hydratedSources||null,a=!1,i="",o=CI;if(n!=null&&(n.unstable_strictMode===!0&&(a=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),t=SI(t,null,e,1,n!=null?n:null,a,!1,i,o),e[As]=t.current,Bp(e),r)for(e=0;e<r.length;e++)n=r[e],a=n._getVersion,a=a(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,a]:t.mutableSourceEagerHydrationData.push(n,a);return new sv(t)};Ei.render=function(e,t,n){if(!lv(t))throw Error(ot(200));return uv(null,e,t,!1,n)};Ei.unmountComponentAtNode=function(e){if(!lv(e))throw Error(ot(40));return e._reactRootContainer?(Au(function(){uv(null,null,e,!1,function(){e._reactRootContainer=null,e[As]=null})}),!0):!1};Ei.unstable_batchedUpdates=K_;Ei.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!lv(n))throw Error(ot(200));if(e==null||e._reactInternals===void 0)throw Error(ot(38));return uv(e,t,n,!1,r)};Ei.version="18.2.0-next-9e3b772b8-20220608";function TI(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__=="undefined"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(TI)}catch(e){console.error(e)}}TI(),h_.exports=Ei;var Xp=h_.exports,$S=h_.exports;Yx.createRoot=$S.createRoot,Yx.hydrateRoot=$S.hydrateRoot;var AI={},OI={},VS=function(t){return OI[t]},Nu=function(t,n){OI[t]=n},pV=function(t){return AI[t]},If=function(t,n){AI[t]=n},jS={},Ny={},Fy=34,_d=10,Dy=13;function MI(e){return new Function("d","return {"+e.map(function(t,n){return JSON.stringify(t)+": d["+n+'] || ""'}).join(",")+"}")}function hV(e,t){var n=MI(e);return function(r,a){return t(n(r),a,e)}}function GS(e){var t=Object.create(null),n=[];return e.forEach(function(r){for(var a in r)a in t||n.push(t[a]=a)}),n}function ni(e,t){var n=e+"",r=n.length;return r<t?new Array(t-r+1).join(0)+n:n}function mV(e){return e<0?"-"+ni(-e,6):e>9999?"+"+ni(e,6):ni(e,4)}function gV(e){var t=e.getUTCHours(),n=e.getUTCMinutes(),r=e.getUTCSeconds(),a=e.getUTCMilliseconds();return isNaN(e)?"Invalid Date":mV(e.getUTCFullYear())+"-"+ni(e.getUTCMonth()+1,2)+"-"+ni(e.getUTCDate(),2)+(a?"T"+ni(t,2)+":"+ni(n,2)+":"+ni(r,2)+"."+ni(a,3)+"Z":r?"T"+ni(t,2)+":"+ni(n,2)+":"+ni(r,2)+"Z":n||t?"T"+ni(t,2)+":"+ni(n,2)+"Z":"")}function vV(e){var t=new RegExp('["'+e+`
\r]`),n=e.charCodeAt(0);function r(f,d){var p,h,g=a(f,function(v,b){if(p)return p(v,b-1);h=v,p=d?hV(v,d):MI(v)});return g.columns=h||[],g}function a(f,d){var p=[],h=f.length,g=0,v=0,b,y=h<=0,x=!1;f.charCodeAt(h-1)===_d&&--h,f.charCodeAt(h-1)===Dy&&--h;function E(){if(y)return Ny;if(x)return x=!1,jS;var C,I=g,P;if(f.charCodeAt(I)===Fy){for(;g++<h&&f.charCodeAt(g)!==Fy||f.charCodeAt(++g)===Fy;);return(C=g)>=h?y=!0:(P=f.charCodeAt(g++))===_d?x=!0:P===Dy&&(x=!0,f.charCodeAt(g)===_d&&++g),f.slice(I+1,C-1).replace(/""/g,'"')}for(;g<h;){if((P=f.charCodeAt(C=g++))===_d)x=!0;else if(P===Dy)x=!0,f.charCodeAt(g)===_d&&++g;else if(P!==n)continue;return f.slice(I,C)}return y=!0,f.slice(I,h)}for(;(b=E())!==Ny;){for(var T=[];b!==jS&&b!==Ny;)T.push(b),b=E();d&&(T=d(T,v++))==null||p.push(T)}return p}function i(f,d){return f.map(function(p){return d.map(function(h){return c(p[h])}).join(e)})}function o(f,d){return d==null&&(d=GS(f)),[d.map(c).join(e)].concat(i(f,d)).join(`
`)}function s(f,d){return d==null&&(d=GS(f)),i(f,d).join(`
`)}function l(f){return f.map(u).join(`
`)}function u(f){return f.map(c).join(e)}function c(f){return f==null?"":f instanceof Date?gV(f):t.test(f+="")?'"'+f.replace(/"/g,'""')+'"':f}return{parse:r,parseRows:a,format:o,formatBody:s,formatRows:l,formatRow:u,formatValue:c}}var bV=vV(","),yV=bV.parse;function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function $1(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function xV(e){if(Array.isArray(e))return $1(e)}function RI(e){if(typeof Symbol!="undefined"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function i2(e,t){if(!!e){if(typeof e=="string")return $1(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return $1(e,t)}}function wV(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ue(e){return xV(e)||RI(e)||i2(e)||wV()}var o2={},cv={};cv.RADIUS=6378137;cv.FLATTENING=1/298.257223563;cv.POLAR_RADIUS=63567523142e-4;var HS=cv;o2.geometry=PI;o2.ring=V1;function PI(e){var t=0,n;switch(e.type){case"Polygon":return WS(e.coordinates);case"MultiPolygon":for(n=0;n<e.coordinates.length;n++)t+=WS(e.coordinates[n]);return t;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0;case"GeometryCollection":for(n=0;n<e.geometries.length;n++)t+=PI(e.geometries[n]);return t}}function WS(e){var t=0;if(e&&e.length>0){t+=Math.abs(V1(e[0]));for(var n=1;n<e.length;n++)t-=Math.abs(V1(e[n]))}return t}function V1(e){var t,n,r,a,i,o,s,l=0,u=e.length;if(u>2){for(s=0;s<u;s++)s===u-2?(a=u-2,i=u-1,o=0):s===u-1?(a=u-1,i=0,o=1):(a=s,i=s+1,o=s+2),t=e[a],n=e[i],r=e[o],l+=(By(r[0])-By(t[0]))*Math.sin(By(n[1]));l=l*HS.RADIUS*HS.RADIUS/2}return l}function By(e){return e*Math.PI/180}var _V=o2,II=A0;function A0(e,t){switch(e&&e.type||null){case"FeatureCollection":return e.features=e.features.map(j1(A0,t)),e;case"GeometryCollection":return e.geometries=e.geometries.map(j1(A0,t)),e;case"Feature":return e.geometry=A0(e.geometry,t),e;case"Polygon":case"MultiPolygon":return EV(e,t);default:return e}}function j1(e,t){return function(n){return e(n,t)}}function EV(e,t){return e.type==="Polygon"?e.coordinates=XS(e.coordinates,t):e.type==="MultiPolygon"&&(e.coordinates=e.coordinates.map(j1(XS,t))),e}function XS(e,t){t=!!t,e[0]=YS(e[0],t);for(var n=1;n<e.length;n++)e[n]=YS(e[n],!t);return e}function YS(e,t){return kV(e)===t?e:e.reverse()}function kV(e){return _V.ring(e)>=0}function ZS(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function qS(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ZS(Object(n),!0).forEach(function(r){m(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ZS(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function LI(e,t){var n=t.x,r=t.y,a=t.x1,i=t.y1,o=t.coordinates,s=[];return Array.isArray(e)?(e.forEach(function(l,u){var c=[];if(n&&r&&(c=[parseFloat(l[n]),parseFloat(l[r])]),n&&r&&a&&i){var f=[parseFloat(l[n]),parseFloat(l[r])],d=[parseFloat(l[a]),parseFloat(l[i])];c=[f,d]}if(o){var p="Polygon";Array.isArray(o[0])||(p="Point"),Array.isArray(o[0])&&!Array.isArray(o[0][0])&&(p="LineString");var h={type:p,coordinates:Ue(l[o])};II(h,!0),c=h.coordinates}var g=qS(qS({},l),{},{_id:u,coordinates:c});s.push(g)}),{dataArray:s}):{dataArray:[]}}var SV=[{lng1:100,lat1:30,lng2:130,lat2:30}],CV={parser:{type:"json",x:"lng1",y:"lat1",x1:"lng2",y1:"lat2"}};function TV(e,t){var n=yV(e);return LI(n,t)}var ei=63710088e-1,AV={centimeters:ei*100,centimetres:ei*100,degrees:ei/111325,feet:ei*3.28084,inches:ei*39.37,kilometers:ei/1e3,kilometres:ei/1e3,meters:ei,metres:ei,miles:ei/1609.344,millimeters:ei*1e3,millimetres:ei*1e3,nauticalmiles:ei/1852,radians:1,yards:ei*1.0936};function mg(e,t,n){n===void 0&&(n={});var r={type:"Feature"};return(n.id===0||n.id)&&(r.id=n.id),n.bbox&&(r.bbox=n.bbox),r.properties=t||{},r.geometry=e,r}function s2(e,t,n){n===void 0&&(n={});for(var r=0,a=e;r<a.length;r++){var i=a[r];if(i.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var o=0;o<i[i.length-1].length;o++)if(i[i.length-1][o]!==i[0][o])throw new Error("First and last Position are not equivalent.")}var s={type:"Polygon",coordinates:e};return mg(s,t,n)}function OV(e,t,n){n===void 0&&(n={});var r={type:"MultiPolygon",coordinates:e};return mg(r,t,n)}function MV(e,t){t===void 0&&(t="kilometers");var n=AV[t];if(!n)throw new Error(t+" units is invalid");return e*n}function Nm(e){var t=e%360;return t*Math.PI/180}function RV(e){if(Array.isArray(e))return e;if(e.type==="Feature"){if(e.geometry!==null)return e.geometry.coordinates}else if(e.coordinates)return e.coordinates;throw new Error("coords must be GeoJSON Feature, Geometry Object or an Array")}function KS(e){return e.type==="Feature"?e.geometry:e}function PV(e,t){var n,r,a,i,o,s,l,u,c,f,d=0,p=e.type==="FeatureCollection",h=e.type==="Feature",g=p?e.features.length:1;for(n=0;n<g;n++){for(s=p?e.features[n].geometry:h?e.geometry:e,u=p?e.features[n].properties:h?e.properties:{},c=p?e.features[n].bbox:h?e.bbox:void 0,f=p?e.features[n].id:h?e.id:void 0,l=s?s.type==="GeometryCollection":!1,o=l?s.geometries.length:1,a=0;a<o;a++){if(i=l?s.geometries[a]:s,i===null){if(t(null,d,u,c,f)===!1)return!1;continue}switch(i.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(t(i,d,u,c,f)===!1)return!1;break}case"GeometryCollection":{for(r=0;r<i.geometries.length;r++)if(t(i.geometries[r],d,u,c,f)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}d++}}function IV(e,t){PV(e,function(n,r,a,i,o){var s=n===null?null:n.type;switch(s){case null:case"Point":case"LineString":case"Polygon":return t(mg(n,a,{bbox:i,id:o}),r,0)===!1?!1:void 0}var l;switch(s){case"MultiPoint":l="Point";break;case"MultiLineString":l="LineString";break;case"MultiPolygon":l="Polygon";break}for(var u=0;u<n.coordinates.length;u++){var c=n.coordinates[u],f={type:l,coordinates:c};if(t(mg(f,a),r,u)===!1)return!1}})}function QS(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function JS(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?QS(Object(n),!0).forEach(function(r){m(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):QS(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function LV(e){for(var t=e.toString(),n=5381,r=t.length;r;)n=n*33^t.charCodeAt(--r);return n>>>0}function NV(e,t){return t===void 0?null:t==="id"&&e.id?e.id:e[t]?e[t]:e.properties&&e.properties[t]?LV(e.properties[t]+"")%1000019:null}function FV(e,t){var n=[],r={};return e.features?(e.features=e.features.filter(function(a){var i=a.geometry;return a!=null&&i&&i.type&&i.coordinates&&i.coordinates.length>0}),II(e,!0),e.features.length===0?{dataArray:[],featureKeys:r}:(IV(e,function(a,i){var o=NV(a,t==null?void 0:t.featureId);o===null&&(o=i);var s=o,l=RV(a),u=JS(JS({},a.properties),{},{coordinates:l,_id:s});n.push(u)}),{dataArray:n,featureKeys:r})):(e.features=[],{dataArray:[]})}function NI(e){if(Array.isArray(e))return e}function DV(e,t){var n=e==null?null:typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r=[],a=!0,i=!1,o,s;try{for(n=n.call(e);!(a=(o=n.next()).done)&&(r.push(o.value),!(t&&r.length===t));a=!0);}catch(l){i=!0,s=l}finally{try{!a&&n.return!=null&&n.return()}finally{if(i)throw s}}return r}}function FI(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Le(e,t){return NI(e)||DV(e,t)||i2(e,t)||FI()}var ep="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function l2(e){this.message=e}l2.prototype=new Error;l2.prototype.name="InvalidCharacterError";function BV(e){var t=String(e).replace(/=+$/,"");if(t.length%4===1)throw new l2("'atob' failed: The string to be decoded is not correctly encoded.");for(var n="",r=0,a,i,o=0;i=t.charAt(o++);~i&&(a=r%4?a*64+i:i,r++%4)?n+=String.fromCharCode(255&a>>(-2*r&6)):0)i=ep.indexOf(i);return n}function DI(e){e=String(e);for(var t,n,r,a,i="",o=0,s=e.length%3;o<e.length;){if((n=e.charCodeAt(o++))>255||(r=e.charCodeAt(o++))>255||(a=e.charCodeAt(o++))>255)throw new TypeError("Failed to execute 'btoa' on 'Window': The string to be encoded contains characters outside of the Latin1 range.");t=n<<16|r<<8|a,i+=ep.charAt(t>>18&63)+ep.charAt(t>>12&63)+ep.charAt(t>>6&63)+ep.charAt(t&63)}return s?i.slice(0,s-3)+"===".substring(s):i}function Ae(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function e6(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Oe(e,t,n){return t&&e6(e.prototype,t),n&&e6(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}var zV=function(){function e(t,n){Ae(this,e),this.buffers=t,this.type=n}return Oe(e,[{key:"arraybuffer",value:function(){return Promise.resolve(this.buffers[0])}},{key:"stream",value:function(){throw new Error("not implemented")}},{key:"text",value:function(){throw new Error("not implemented")}},{key:"slice",value:function(n,r,a){throw new Error("not implemented")}}]),e}(),Zi;typeof window=="undefined"?Zi={devicePixelRatio:1,navigator:{userAgent:"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/95.0.4638.69 Safari/537.36",browserLanguage:"zh-CN",language:"zh-CN",platform:""},location:"",document:{documentElement:{style:{}},createEvent:function(){return!0},getElementById:function(t){return!0},createElement:function(){return{className:"",classList:{add:function(){return""}}}},createElementNS:function(){return!0},addEventListener:function(){return!0},removeEventListener:function(){return!0},querySelector:function(){return!1}},performance:{mark:function(t){return null},clearMeasures:function(t){return null},clearMarks:function(t){return null},measure:function(t,n,r){return{duration:0}},now:function(){return new Date().getTime()}},Blob:"",dispatchEvent:function(t){return!0},Event:function(t,n){return!0},createElement:function(){return!0},createElementNS:function(){return!0},XMLHttpRequest:function(){return!0},addEventListener:function(){return!0},removeEventListener:function(){return!0},requestAnimationFrame:function(){return!0},cancelAnimationFrame:function(){return!0},clearTimeout:function(){return!0}}:Zi=window;var UV=typeof my!="undefined"&&!!my&&typeof my.showToast=="function"&&my.isFRM!==!0,$V=UV?my.getSystemInfoSync().pixelRatio:Zi.devicePixelRatio;function Yp(e,t){return Yp=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},Yp(e,t)}function Ct(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Yp(e,t)}function sr(e){return sr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},sr(e)}function D(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Mt(e,t){if(t&&(sr(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return D(e)}function Ee(e){return Ee=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Ee(e)}var kh=Oe(function e(t,n){Ae(this,e),m(this,"cancelBubble",void 0),m(this,"cancelable",void 0),m(this,"target",void 0),m(this,"currentTarget",void 0),m(this,"preventDefault",void 0),m(this,"stopPropagation",void 0),m(this,"type",void 0),m(this,"timeStamp",void 0),this.cancelBubble=!1,this.cancelable=!1,this.target=null,this.currentTarget=null,this.preventDefault=function(){},this.stopPropagation=function(){},this.type=t,this.timeStamp=Date.now()});function VV(e,t){var n=typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=jV(e))||t&&e&&typeof e.length=="number"){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(u){throw u},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i=!0,o=!1,s;return{s:function(){n=n.call(e)},n:function(){var u=n.next();return i=u.done,u},e:function(u){o=!0,s=u},f:function(){try{!i&&n.return!=null&&n.return()}finally{if(o)throw s}}}}function jV(e,t){if(!!e){if(typeof e=="string")return t6(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return t6(e,t)}}function t6(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Ed=new WeakMap,u2=function(){function e(){Ae(this,e),Ed.set(this,{})}return Oe(e,[{key:"addEventListener",value:function(n,r){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=Ed.get(this);i||(i={}),i[n]||(i[n]=[]),i[n].push(r),Ed.set(this,i),a.capture,a.once,a.passive}},{key:"removeEventListener",value:function(n,r){var a=Ed.get(this);if(a){var i=a[n];if(i&&i.length>0){for(var o=i.length;o--;o>0)if(i[o]===r){i.splice(o,1);break}}}}},{key:"dispatchEvent",value:function(n){var r=Ed.get(this)[n.type];if(r){var a=VV(r),i;try{for(a.s();!(i=a.n()).done;){var o=i.value;o(n)}}catch(s){a.e(s)}finally{a.f()}}}}]),e}();function GV(e){var t=HV();return function(){var r=Ee(e),a;if(t){var i=Ee(this).constructor;a=Reflect.construct(r,arguments,i)}else a=r.apply(this,arguments);return Mt(this,a)}}function HV(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var BI=function(e){Ct(n,e);var t=GV(n);function n(){var r;return Ae(this,n),r=t.call(this),m(D(r),"childNodes",void 0),r.childNodes=[],r}return Oe(n,[{key:"appendChild",value:function(a){this.childNodes.push(a)}},{key:"cloneNode",value:function(){var a=Object.create(this);return Object.assign(a,this),a}},{key:"removeChild",value:function(a){var i=this.childNodes.findIndex(function(o){return o===a});return i>-1?this.childNodes.splice(i,1):null}}]),n}(u2);function WV(e){var t=XV();return function(){var r=Ee(e),a;if(t){var i=Ee(this).constructor;a=Reflect.construct(r,arguments,i)}else a=r.apply(this,arguments);return Mt(this,a)}}function XV(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var zI=function(e){Ct(n,e);var t=WV(n);function n(){var r;return Ae(this,n),r=t.call(this),m(D(r),"className",void 0),m(D(r),"children",void 0),r.className="",r.children=[],r}return Oe(n,[{key:"setAttribute",value:function(a,i){this[a]=i}},{key:"getAttribute",value:function(a){return this[a]}},{key:"setAttributeNS",value:function(a,i){this[a]=i}},{key:"getAttributeNS",value:function(a){return this[a]}}]),n}(BI),YV=typeof my!="undefined"&&!!my&&typeof my.showToast=="function"&&my.isFRM!==!0,G1,H1,W1,X1;if(YV){var Fm=my.getSystemInfoSync();G1=Fm.screenWidth,H1=Fm.screenHeight,W1=Fm.windowWidth,X1=Fm.windowHeight}else{var n6=Zi.innerWidth,r6=Zi.innerHeight;G1=n6,H1=r6,W1=n6,X1=r6}var yp={width:G1,height:H1,availWidth:W1,availHeight:X1,availLeft:0,availTop:0},fv=yp.availWidth,dv=yp.availHeight,a6={style:[]};function UI(e,t){if(!("parentNode"in e)){var n;t===0?n=function(){return null}:t===1?n=function(){return a6}:n=function(){return null},Object.defineProperty(e,"parentNode",{enumerable:!0,get:n})}if(!("parentElement"in e)){var r;t===0?r=function(){return null}:t===1?r=function(){return a6}:r=function(){return null},Object.defineProperty(e,"parentElement",{enumerable:!0,get:r})}}function ZV(e){e.style=e.style||{},Object.assign(e.style,{top:"0px",left:"0px",width:fv+"px",height:dv+"px",margin:"0px",padding:"0px"})}function qV(e){"clientLeft"in e||(e.clientLeft=0,e.clientTop=0),"clientWidth"in e||(e.clientWidth=fv,e.clientHeight=dv),"getBoundingClientRect"in e||(e.getBoundingClientRect=function(){var t={x:0,y:0,top:0,left:0,width:this.clientWidth,height:this.clientHeight,right:this.clientWidth,bottom:this.clientHeight};return t})}function KV(e){"offsetLeft"in e||(e.offsetLeft=0,e.offsetTop=0),"offsetWidth"in e||(e.offsetWidth=fv,e.offsetHeight=dv)}function QV(e){"scrollLeft"in e||(e.scrollLeft=0,e.scrollTop=0),"scrollWidth"in e||(e.scrollWidth=fv,e.scrollHeight=dv)}function $I(e){var t=function(){return!0};e.classList=[],e.classList.add=t,e.classList.remove=t,e.classList.contains=t,e.classList.toggle=t}function JV(e){var t=ej();return function(){var r=Ee(e),a;if(t){var i=Ee(this).constructor;a=Reflect.construct(r,arguments,i)}else a=r.apply(this,arguments);return Mt(this,a)}}function ej(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function lc(){}var Lf=function(e){Ct(n,e);var t=JV(n);function n(){var r,a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",i=arguments.length>1?arguments[1]:void 0;return Ae(this,n),r=t.call(this),m(D(r),"className",void 0),m(D(r),"children",void 0),m(D(r),"focus",void 0),m(D(r),"blur",void 0),m(D(r),"insertBefore",void 0),m(D(r),"appendChild",void 0),m(D(r),"removeChild",void 0),m(D(r),"remove",void 0),m(D(r),"innerHTML",void 0),m(D(r),"tagName",void 0),r.className="",r.children=[],r.focus=lc,r.blur=lc,r.insertBefore=lc,r.appendChild=lc,r.removeChild=lc,r.remove=lc,r.innerHTML="",r.tagName=a.toUpperCase(),UI(D(r),i),ZV(D(r)),$I(D(r)),qV(D(r)),KV(D(r)),QV(D(r)),r}return Oe(n)}(zI);function tj(e){var t=nj();return function(){var r=Ee(e),a;if(t){var i=Ee(this).constructor;a=Reflect.construct(r,arguments,i)}else a=r.apply(this,arguments);return Mt(this,a)}}function nj(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var VI=function(e){Ct(n,e);var t=tj(n);function n(r){return Ae(this,n),t.call(this,r)}return Oe(n,[{key:"addTextTrack",value:function(){}},{key:"captureStream",value:function(){}},{key:"fastSeek",value:function(){}},{key:"load",value:function(){}},{key:"pause",value:function(){}},{key:"play",value:function(){}}]),n}(Lf);function rj(e){var t=aj();return function(){var r=Ee(e),a;if(t){var i=Ee(this).constructor;a=Reflect.construct(r,arguments,i)}else a=r.apply(this,arguments);return Mt(this,a)}}function aj(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var jI=function(e){Ct(n,e);var t=rj(n);function n(){return Ae(this,n),t.call(this,"video")}return Oe(n)}(VI),ij={};function Ou(){return ij}var GI=Oe(function e(){Ae(this,e);var t=Ou(),n=t.createImage&&t.createImage()||{};return"tagName"in n||(n.tagName="IMG",n.__proto__=e.prototype),UI(n),$I(n),Object.assign(n,{addEventListener:function(a,i){n["on".concat(a)]=i.bind(n)},removeEventListener:function(a){n["on".concat(a)]=null}}),n}),HI={href:"",protocol:"",host:""};function WI(e){var t=oj();return function(){var r=Ee(e),a;if(t){var i=Ee(this).constructor;a=Reflect.construct(r,arguments,i)}else a=r.apply(this,arguments);return Mt(this,a)}}function oj(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var sj=function(e){Ct(n,e);var t=WI(n);function n(){return Ae(this,n),t.call(this,"body",0)}return Oe(n,[{key:"addEventListener",value:function(a,i){}},{key:"removeEventListener",value:function(a,i,o){}},{key:"dispatchEvent",value:function(a){}}]),n}(Lf),lj=function(e){Ct(n,e);var t=WI(n);function n(){return Ae(this,n),t.call(this,"html",0)}return Oe(n,[{key:"addEventListener",value:function(a,i){}},{key:"removeEventListener",value:function(a,i){}},{key:"dispatchEvent",value:function(a){}}]),n}(Lf),kd={},hu={readyState:"complete",visibilityState:"visible",hidden:!1,fullscreen:!0,scripts:[],style:{},location:HI,ontouchstart:null,ontouchmove:null,ontouchend:null,onvisibilitychange:null,parentNode:null,parentElement:null,head:null,body:null,documentElement:{style:[]},createElement:function(t){return t=t.toLowerCase(),t==="canvas"?my.createOffscreenCanvas(1024,128,"2d"):t==="img"?new GI:t==="video"?new jI:new Lf(t)},createElementNS:function(t,n){return this.createElement(n)},createTextNode:function(t){return t},getElementById:function(t){return null},getElementsByTagName:function(t){return t=t.toLowerCase(),[]},getElementsByTagNameNS:function(t,n){return this.getElementsByTagName(n)},getElementsByName:function(t){return[]},querySelector:function(t){return null},querySelectorAll:function(t){return[]},addEventListener:function(t,n,r){kd[t]||(kd[t]=[]),kd[t].push(n)},removeEventListener:function(t,n){var r=kd[t];if(r&&r.length>0){for(var a=r.length;a--;a>0)if(r[a]===n){r.splice(a,1);break}}},dispatchEvent:function(t){var n=t.type,r=kd[n];if(r)for(var a=0;a<r.length;a++)r[a](t);t.target&&typeof t.target["on"+n]=="function"&&t.target["on"+n](t)},createEvent:function(t){return new kh(t)}};hu.documentElement=new lj;hu.head=new Lf("head");hu.body=new sj;var uj=Object,cj=function(){function e(){Ae(this,e),m(this,"_w",void 0),m(this,"_h",void 0),m(this,"_data",void 0);var t=arguments.length;if(t===2){if(typeof arguments[0]=="number"&&typeof arguments[1]=="number"){this._w=arguments[0],this._h=arguments[1],this._data=new Uint8ClampedArray(this._w*this._h*4);return}}else t===3&&sr(arguments[0])==="object"&&typeof arguments[1]=="number"&&typeof arguments[2]=="number"&&(this._data=arguments[0],this._w=arguments[1],this._h=arguments[2]);throw new Error("ImageData: params error")}return Oe(e,[{key:"width",get:function(){return this._w}},{key:"height",get:function(){return this._h}},{key:"data",get:function(){return this._data}}]),e}(),fj=typeof my!="undefined"&&!!my&&typeof my.showToast=="function"&&my.isFRM!==!0,Y1,ti,gg;if(fj){var zy=my.getSystemInfoSync();Y1=zy.system,ti=zy.platform,gg=zy.language}else{var ci={versions:function(){var e=Zi.navigator.userAgent;return{trident:e.indexOf("Trident")>-1,presto:e.indexOf("Presto")>-1,webKit:e.indexOf("AppleWebKit")>-1,gecko:e.indexOf("Gecko")>-1&&e.indexOf("KHTML")===-1,mobile:!!e.match(/AppleWebKit.*Mobile.*/),ios:!!e.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),android:e.indexOf("Android")>-1||e.indexOf("Linux")>-1,iPhone:e.indexOf("iPhone")>-1,iPad:e.indexOf("iPad")>-1,webApp:e.indexOf("Safari")===-1,weixin:e.indexOf("MicroMessenger")>-1,qq:e.match(/\sQQ/i)===" qq"}}(),language:(Zi.navigator.browserLanguage||Zi.navigator.language).toLowerCase()};ci.versions.android?ti="android":ci.versions.trident?ti="IE":ci.versions.presto?ti="Opera":ci.versions.webKit?ti="webKit":ci.versions.gecko?ti="Firefox":ci.versions.mobile?ti="mobile":ci.versions.ios?ti="ios":ci.versions.iPhone?ti="iPhone":ci.versions.iPad?ti="ipad":ci.versions.webApp?ti="webApp":ci.versions.weixin?ti="weixin":ci.versions.qq&&(ti="qq"),Y1=Zi.navigator.userAgent,gg=ci.language}var dj=Y1.toLowerCase().indexOf("android")!==-1,XI=dj?"Android; CPU Android 6.0":"iPhone; CPU iPhone OS 10_3_1 like Mac OS X",pj="Mozilla/5.0 (".concat(XI,") AppleWebKit/603.1.30 (KHTML, like Gecko) Mobile/14E8301 MicroMessenger/6.6.0 MiniGame NetType/WIFI Language/").concat(gg),hj={platform:ti,language:gg,appVersion:"5.0 (".concat(XI,") AppleWebKit/601.1.46 (KHTML, like Gecko) Version/9.0 Mobile/13B143 Safari/601.1"),userAgent:pj},mj={mark:function(t){return null},clearMeasures:function(t){return null},clearMarks:function(t){return null},measure:function(t,n,r){return{duration:0}},now:function(){}},i6=0,o6=0;function gj(e){var t=Date.now(),n=Math.max(i6+23,t);return o6=setTimeout(function(){e(i6=n)},n-t),o6}function vj(e){var t=Ou();return t.requestAnimationFrame?t.requestAnimationFrame(e):gj(e)}function bj(e){var t=Ou();return t.cancelAnimationFrame?t.cancelAnimationFrame(e):clearTimeout(e)}var yj=function(){function e(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";if(Ae(this,e),m(this,"href",void 0),t.indexOf("http://")==0||t.indexOf("https://")==0){this.href=t;return}this.href=n+t}return Oe(e,null,[{key:"createObjectURL",value:function(n){var r=n.buffers[0],a=n.type,i=xj(r),o="data:".concat(a,";base64, ");return o+i}}]),e}();function xj(e){for(var t="",n=new Uint8Array(e),r=n.byteLength,a=0;a<r;a++)t+=String.fromCharCode(n[a]);return DI(t)}var wj={GCCSO_SHADER_BINARY_FJ:37472,_3DC_XY_AMD:34810,_3DC_X_AMD:34809,ACTIVE_ATTRIBUTES:35721,ACTIVE_ATTRIBUTE_MAX_LENGTH:35722,ACTIVE_PROGRAM_EXT:33369,ACTIVE_TEXTURE:34016,ACTIVE_UNIFORMS:35718,ACTIVE_UNIFORM_MAX_LENGTH:35719,ALIASED_LINE_WIDTH_RANGE:33902,ALIASED_POINT_SIZE_RANGE:33901,ALL_COMPLETED_NV:34034,ALL_SHADER_BITS_EXT:4294967295,ALPHA:6406,ALPHA16F_EXT:34844,ALPHA32F_EXT:34838,ALPHA8_EXT:32828,ALPHA8_OES:32828,ALPHA_BITS:3413,ALPHA_TEST_FUNC_QCOM:3009,ALPHA_TEST_QCOM:3008,ALPHA_TEST_REF_QCOM:3010,ALREADY_SIGNALED_APPLE:37146,ALWAYS:519,AMD_compressed_3DC_texture:1,AMD_compressed_ATC_texture:1,AMD_performance_monitor:1,AMD_program_binary_Z400:1,ANGLE_depth_texture:1,ANGLE_framebuffer_blit:1,ANGLE_framebuffer_multisample:1,ANGLE_instanced_arrays:1,ANGLE_pack_reverse_row_order:1,ANGLE_program_binary:1,ANGLE_texture_compression_dxt3:1,ANGLE_texture_compression_dxt5:1,ANGLE_texture_usage:1,ANGLE_translated_shader_source:1,ANY_SAMPLES_PASSED_CONSERVATIVE_EXT:36202,ANY_SAMPLES_PASSED_EXT:35887,APPLE_copy_texture_levels:1,APPLE_framebuffer_multisample:1,APPLE_rgb_422:1,APPLE_sync:1,APPLE_texture_format_BGRA8888:1,APPLE_texture_max_level:1,ARM_mali_program_binary:1,ARM_mali_shader_binary:1,ARM_rgba8:1,ARRAY_BUFFER:34962,ARRAY_BUFFER_BINDING:34964,ATC_RGBA_EXPLICIT_ALPHA_AMD:35987,ATC_RGBA_INTERPOLATED_ALPHA_AMD:34798,ATC_RGB_AMD:35986,ATTACHED_SHADERS:35717,BACK:1029,BGRA8_EXT:37793,BGRA_EXT:32993,BGRA_IMG:32993,BINNING_CONTROL_HINT_QCOM:36784,BLEND:3042,BLEND_COLOR:32773,BLEND_DST_ALPHA:32970,BLEND_DST_RGB:32968,BLEND_EQUATION:32777,BLEND_EQUATION_ALPHA:34877,BLEND_EQUATION_RGB:32777,BLEND_SRC_ALPHA:32971,BLEND_SRC_RGB:32969,BLUE_BITS:3412,BOOL:35670,BOOL_VEC2:35671,BOOL_VEC3:35672,BOOL_VEC4:35673,BUFFER:33504,BUFFER_ACCESS_OES:35003,BUFFER_MAPPED_OES:35004,BUFFER_MAP_POINTER_OES:35005,BUFFER_OBJECT_EXT:37201,BUFFER_SIZE:34660,BUFFER_USAGE:34661,BYTE:5120,CCW:2305,CLAMP_TO_BORDER_NV:33069,CLAMP_TO_EDGE:33071,COLOR_ATTACHMENT0:36064,COLOR_ATTACHMENT0_NV:36064,COLOR_ATTACHMENT10_NV:36074,COLOR_ATTACHMENT11_NV:36075,COLOR_ATTACHMENT12_NV:36076,COLOR_ATTACHMENT13_NV:36077,COLOR_ATTACHMENT14_NV:36078,COLOR_ATTACHMENT15_NV:36079,COLOR_ATTACHMENT1_NV:36065,COLOR_ATTACHMENT2_NV:36066,COLOR_ATTACHMENT3_NV:36067,COLOR_ATTACHMENT4_NV:36068,COLOR_ATTACHMENT5_NV:36069,COLOR_ATTACHMENT6_NV:36070,COLOR_ATTACHMENT7_NV:36071,COLOR_ATTACHMENT8_NV:36072,COLOR_ATTACHMENT9_NV:36073,COLOR_ATTACHMENT_EXT:37104,COLOR_BUFFER_BIT:16384,COLOR_BUFFER_BIT0_QCOM:1,COLOR_BUFFER_BIT1_QCOM:2,COLOR_BUFFER_BIT2_QCOM:4,COLOR_BUFFER_BIT3_QCOM:8,COLOR_BUFFER_BIT4_QCOM:16,COLOR_BUFFER_BIT5_QCOM:32,COLOR_BUFFER_BIT6_QCOM:64,COLOR_BUFFER_BIT7_QCOM:128,COLOR_CLEAR_VALUE:3106,COLOR_EXT:6144,COLOR_WRITEMASK:3107,COMPARE_REF_TO_TEXTURE_EXT:34894,COMPILE_STATUS:35713,COMPRESSED_RGBA_ASTC_10x10_KHR:37819,COMPRESSED_RGBA_ASTC_10x5_KHR:37816,COMPRESSED_RGBA_ASTC_10x6_KHR:37817,COMPRESSED_RGBA_ASTC_10x8_KHR:37818,COMPRESSED_RGBA_ASTC_12x10_KHR:37820,COMPRESSED_RGBA_ASTC_12x12_KHR:37821,COMPRESSED_RGBA_ASTC_4x4_KHR:37808,COMPRESSED_RGBA_ASTC_5x4_KHR:37809,COMPRESSED_RGBA_ASTC_5x5_KHR:37810,COMPRESSED_RGBA_ASTC_6x5_KHR:37811,COMPRESSED_RGBA_ASTC_6x6_KHR:37812,COMPRESSED_RGBA_ASTC_8x5_KHR:37813,COMPRESSED_RGBA_ASTC_8x6_KHR:37814,COMPRESSED_RGBA_ASTC_8x8_KHR:37815,COMPRESSED_RGBA_PVRTC_2BPPV1_IMG:35843,COMPRESSED_RGBA_PVRTC_2BPPV2_IMG:37175,COMPRESSED_RGBA_PVRTC_4BPPV1_IMG:35842,COMPRESSED_RGBA_PVRTC_4BPPV2_IMG:37176,COMPRESSED_RGBA_S3TC_DXT1_EXT:33777,COMPRESSED_RGBA_S3TC_DXT3_ANGLE:33778,COMPRESSED_RGBA_S3TC_DXT5_ANGLE:33779,COMPRESSED_RGB_PVRTC_2BPPV1_IMG:35841,COMPRESSED_RGB_PVRTC_4BPPV1_IMG:35840,COMPRESSED_RGB_S3TC_DXT1_EXT:33776,COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:37851,COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:37848,COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:37849,COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:37850,COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:37852,COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:37853,COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:37840,COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:37841,COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:37842,COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:37843,COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:37844,COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:37845,COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:37846,COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:37847,COMPRESSED_SRGB_ALPHA_S3TC_DXT1_NV:35917,COMPRESSED_SRGB_ALPHA_S3TC_DXT3_NV:35918,COMPRESSED_SRGB_ALPHA_S3TC_DXT5_NV:35919,COMPRESSED_SRGB_S3TC_DXT1_NV:35916,COMPRESSED_TEXTURE_FORMATS:34467,CONDITION_SATISFIED_APPLE:37148,CONSTANT_ALPHA:32771,CONSTANT_COLOR:32769,CONTEXT_FLAG_DEBUG_BIT:2,CONTEXT_ROBUST_ACCESS_EXT:37107,COUNTER_RANGE_AMD:35777,COUNTER_TYPE_AMD:35776,COVERAGE_ALL_FRAGMENTS_NV:36565,COVERAGE_ATTACHMENT_NV:36562,COVERAGE_AUTOMATIC_NV:36567,COVERAGE_BUFFERS_NV:36563,COVERAGE_BUFFER_BIT_NV:32768,COVERAGE_COMPONENT4_NV:36561,COVERAGE_COMPONENT_NV:36560,COVERAGE_EDGE_FRAGMENTS_NV:36566,COVERAGE_SAMPLES_NV:36564,CPU_OPTIMIZED_QCOM:36785,CULL_FACE:2884,CULL_FACE_MODE:2885,CURRENT_PROGRAM:35725,CURRENT_QUERY_EXT:34917,CURRENT_VERTEX_ATTRIB:34342,CW:2304,DEBUG_CALLBACK_FUNCTION:33348,DEBUG_CALLBACK_USER_PARAM:33349,DEBUG_GROUP_STACK_DEPTH:33389,DEBUG_LOGGED_MESSAGES:37189,DEBUG_NEXT_LOGGED_MESSAGE_LENGTH:33347,DEBUG_OUTPUT:37600,DEBUG_OUTPUT_SYNCHRONOUS:33346,DEBUG_SEVERITY_HIGH:37190,DEBUG_SEVERITY_LOW:37192,DEBUG_SEVERITY_MEDIUM:37191,DEBUG_SEVERITY_NOTIFICATION:33387,DEBUG_SOURCE_API:33350,DEBUG_SOURCE_APPLICATION:33354,DEBUG_SOURCE_OTHER:33355,DEBUG_SOURCE_SHADER_COMPILER:33352,DEBUG_SOURCE_THIRD_PARTY:33353,DEBUG_SOURCE_WINDOW_SYSTEM:33351,DEBUG_TYPE_DEPRECATED_BEHAVIOR:33357,DEBUG_TYPE_ERROR:33356,DEBUG_TYPE_MARKER:33384,DEBUG_TYPE_OTHER:33361,DEBUG_TYPE_PERFORMANCE:33360,DEBUG_TYPE_POP_GROUP:33386,DEBUG_TYPE_PORTABILITY:33359,DEBUG_TYPE_PUSH_GROUP:33385,DEBUG_TYPE_UNDEFINED_BEHAVIOR:33358,DECR:7683,DECR_WRAP:34056,DELETE_STATUS:35712,DEPTH24_STENCIL8_OES:35056,DEPTH_ATTACHMENT:36096,DEPTH_STENCIL_ATTACHMENT:33306,DEPTH_BITS:3414,DEPTH_BUFFER_BIT:256,DEPTH_BUFFER_BIT0_QCOM:256,DEPTH_BUFFER_BIT1_QCOM:512,DEPTH_BUFFER_BIT2_QCOM:1024,DEPTH_BUFFER_BIT3_QCOM:2048,DEPTH_BUFFER_BIT4_QCOM:4096,DEPTH_BUFFER_BIT5_QCOM:8192,DEPTH_BUFFER_BIT6_QCOM:16384,DEPTH_BUFFER_BIT7_QCOM:32768,DEPTH_CLEAR_VALUE:2931,DEPTH_COMPONENT:6402,DEPTH_COMPONENT16:33189,DEPTH_COMPONENT16_NONLINEAR_NV:36396,DEPTH_COMPONENT16_OES:33189,DEPTH_COMPONENT24_OES:33190,DEPTH_COMPONENT32_OES:33191,DEPTH_EXT:6145,DEPTH_FUNC:2932,DEPTH_RANGE:2928,DEPTH_STENCIL:34041,DEPTH_STENCIL_OES:34041,DEPTH_TEST:2929,DEPTH_WRITEMASK:2930,DITHER:3024,DMP_shader_binary:1,DONT_CARE:4352,DRAW_BUFFER0_NV:34853,DRAW_BUFFER10_NV:34863,DRAW_BUFFER11_NV:34864,DRAW_BUFFER12_NV:34865,DRAW_BUFFER13_NV:34866,DRAW_BUFFER14_NV:34867,DRAW_BUFFER15_NV:34868,DRAW_BUFFER1_NV:34854,DRAW_BUFFER2_NV:34855,DRAW_BUFFER3_NV:34856,DRAW_BUFFER4_NV:34857,DRAW_BUFFER5_NV:34858,DRAW_BUFFER6_NV:34859,DRAW_BUFFER7_NV:34860,DRAW_BUFFER8_NV:34861,DRAW_BUFFER9_NV:34862,DRAW_BUFFER_EXT:3073,DRAW_FRAMEBUFFER_ANGLE:36009,DRAW_FRAMEBUFFER_APPLE:36009,DRAW_FRAMEBUFFER_BINDING_ANGLE:36006,DRAW_FRAMEBUFFER_BINDING_APPLE:36006,DRAW_FRAMEBUFFER_BINDING_NV:36006,DRAW_FRAMEBUFFER_NV:36009,DST_ALPHA:772,DST_COLOR:774,DYNAMIC_DRAW:35048,ELEMENT_ARRAY_BUFFER:34963,ELEMENT_ARRAY_BUFFER_BINDING:34965,EQUAL:514,ES_VERSION_2_0:1,ETC1_RGB8_OES:36196,ETC1_SRGB8_NV:35054,EXTENSIONS:7939,EXT_blend_minmax:1,EXT_color_buffer_half_float:1,EXT_debug_label:1,EXT_debug_marker:1,EXT_discard_framebuffer:1,EXT_map_buffer_range:1,EXT_multi_draw_arrays:1,EXT_multisampled_render_to_texture:1,EXT_multiview_draw_buffers:1,EXT_occlusion_query_boolean:1,EXT_read_format_bgra:1,EXT_robustness:1,EXT_sRGB:1,EXT_separate_shader_objects:1,EXT_shader_framebuffer_fetch:1,EXT_shader_texture_lod:1,EXT_shadow_samplers:1,EXT_texture_compression_dxt1:1,EXT_texture_filter_anisotropic:1,EXT_texture_format_BGRA8888:1,EXT_texture_rg:1,EXT_texture_storage:1,EXT_texture_type_2_10_10_10_REV:1,EXT_unpack_subimage:1,FALSE:0,FASTEST:4353,FENCE_CONDITION_NV:34036,FENCE_STATUS_NV:34035,FIXED:5132,FJ_shader_binary_GCCSO:1,FLOAT:5126,FLOAT_MAT2:35674,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,FRAGMENT_SHADER:35632,FRAGMENT_SHADER_BIT_EXT:2,FRAGMENT_SHADER_DERIVATIVE_HINT_OES:35723,FRAGMENT_SHADER_DISCARDS_SAMPLES_EXT:35410,FRAMEBUFFER:36160,FRAMEBUFFER_ATTACHMENT_ANGLE:37795,FRAMEBUFFER_ATTACHMENT_COLOR_ENCODING_EXT:33296,FRAMEBUFFER_ATTACHMENT_COMPONENT_TYPE_EXT:33297,FRAMEBUFFER_ATTACHMENT_OBJECT_NAME:36049,FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE:36048,FRAMEBUFFER_ATTACHMENT_TEXTURE_3D_ZOFFSET_OES:36052,FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE:36051,FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL:36050,FRAMEBUFFER_ATTACHMENT_TEXTURE_SAMPLES_EXT:36204,FRAMEBUFFER_BINDING:36006,FRAMEBUFFER_COMPLETE:36053,FRAMEBUFFER_INCOMPLETE_ATTACHMENT:36054,FRAMEBUFFER_INCOMPLETE_DIMENSIONS:36057,FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:36055,FRAMEBUFFER_INCOMPLETE_MULTISAMPLE_ANGLE:36182,FRAMEBUFFER_INCOMPLETE_MULTISAMPLE_APPLE:36182,FRAMEBUFFER_INCOMPLETE_MULTISAMPLE_EXT:36182,FRAMEBUFFER_INCOMPLETE_MULTISAMPLE_IMG:37172,FRAMEBUFFER_INCOMPLETE_MULTISAMPLE_NV:36182,FRAMEBUFFER_UNDEFINED_OES:33305,FRAMEBUFFER_UNSUPPORTED:36061,FRONT:1028,FRONT_AND_BACK:1032,FRONT_FACE:2886,FUNC_ADD:32774,FUNC_REVERSE_SUBTRACT:32779,FUNC_SUBTRACT:32778,GENERATE_MIPMAP_HINT:33170,GEQUAL:518,GPU_OPTIMIZED_QCOM:36786,GREATER:516,GREEN_BITS:3411,GUILTY_CONTEXT_RESET_EXT:33363,HALF_FLOAT_OES:36193,HIGH_FLOAT:36338,HIGH_INT:36341,IMG_multisampled_render_to_texture:1,IMG_program_binary:1,IMG_read_format:1,IMG_shader_binary:1,IMG_texture_compression_pvrtc:1,IMG_texture_compression_pvrtc2:1,IMPLEMENTATION_COLOR_READ_FORMAT:35739,IMPLEMENTATION_COLOR_READ_TYPE:35738,INCR:7682,INCR_WRAP:34055,INFO_LOG_LENGTH:35716,INNOCENT_CONTEXT_RESET_EXT:33364,INT:5124,INT_10_10_10_2_OES:36343,INT_VEC2:35667,INT_VEC3:35668,INT_VEC4:35669,INVALID_ENUM:1280,INVALID_FRAMEBUFFER_OPERATION:1286,INVALID_OPERATION:1282,INVALID_VALUE:1281,INVERT:5386,KEEP:7680,KHR_debug:1,KHR_texture_compression_astc_ldr:1,LEFT:1030,LEQUAL:515,LESS:513,LINEAR:9729,LINEAR_MIPMAP_LINEAR:9987,LINEAR_MIPMAP_NEAREST:9985,LINES:1,LINE_LOOP:2,LINE_STRIP:3,LINE_WIDTH:2849,LINK_STATUS:35714,LOSE_CONTEXT_ON_RESET_EXT:33362,LOW_FLOAT:36336,LOW_INT:36339,LUMINANCE:6409,LUMINANCE16F_EXT:34846,LUMINANCE32F_EXT:34840,LUMINANCE4_ALPHA4_OES:32835,LUMINANCE8_ALPHA8_EXT:32837,LUMINANCE8_ALPHA8_OES:32837,LUMINANCE8_EXT:32832,LUMINANCE8_OES:32832,LUMINANCE_ALPHA:6410,LUMINANCE_ALPHA16F_EXT:34847,LUMINANCE_ALPHA32F_EXT:34841,MALI_PROGRAM_BINARY_ARM:36705,MALI_SHADER_BINARY_ARM:36704,MAP_FLUSH_EXPLICIT_BIT_EXT:16,MAP_INVALIDATE_BUFFER_BIT_EXT:8,MAP_INVALIDATE_RANGE_BIT_EXT:4,MAP_READ_BIT_EXT:1,MAP_UNSYNCHRONIZED_BIT_EXT:32,MAP_WRITE_BIT_EXT:2,MAX_3D_TEXTURE_SIZE_OES:32883,MAX_COLOR_ATTACHMENTS_NV:36063,MAX_COMBINED_TEXTURE_IMAGE_UNITS:35661,MAX_CUBE_MAP_TEXTURE_SIZE:34076,MAX_DEBUG_GROUP_STACK_DEPTH:33388,MAX_DEBUG_LOGGED_MESSAGES:37188,MAX_DEBUG_MESSAGE_LENGTH:37187,MAX_DRAW_BUFFERS_NV:34852,MAX_EXT:32776,MAX_FRAGMENT_UNIFORM_VECTORS:36349,MAX_LABEL_LENGTH:33512,MAX_MULTIVIEW_BUFFERS_EXT:37106,MAX_RENDERBUFFER_SIZE:34024,MAX_SAMPLES_ANGLE:36183,MAX_SAMPLES_APPLE:36183,MAX_SAMPLES_EXT:36183,MAX_SAMPLES_IMG:37173,MAX_SAMPLES_NV:36183,MAX_SERVER_WAIT_TIMEOUT_APPLE:37137,MAX_TEXTURE_IMAGE_UNITS:34930,MAX_TEXTURE_MAX_ANISOTROPY_EXT:34047,MAX_TEXTURE_SIZE:3379,MAX_VARYING_VECTORS:36348,MAX_VERTEX_ATTRIBS:34921,MAX_VERTEX_TEXTURE_IMAGE_UNITS:35660,MAX_VERTEX_UNIFORM_VECTORS:36347,MAX_VIEWPORT_DIMS:3386,MEDIUM_FLOAT:36337,MEDIUM_INT:36340,MIN_EXT:32775,MIRRORED_REPEAT:33648,MULTISAMPLE_BUFFER_BIT0_QCOM:16777216,MULTISAMPLE_BUFFER_BIT1_QCOM:33554432,MULTISAMPLE_BUFFER_BIT2_QCOM:67108864,MULTISAMPLE_BUFFER_BIT3_QCOM:134217728,MULTISAMPLE_BUFFER_BIT4_QCOM:268435456,MULTISAMPLE_BUFFER_BIT5_QCOM:536870912,MULTISAMPLE_BUFFER_BIT6_QCOM:1073741824,MULTISAMPLE_BUFFER_BIT7_QCOM:2147483648,MULTIVIEW_EXT:37105,NEAREST:9728,NEAREST_MIPMAP_LINEAR:9986,NEAREST_MIPMAP_NEAREST:9984,NEVER:512,NICEST:4354,NONE:0,NOTEQUAL:517,NO_ERROR:0,NO_RESET_NOTIFICATION_EXT:33377,NUM_COMPRESSED_TEXTURE_FORMATS:34466,NUM_PROGRAM_BINARY_FORMATS_OES:34814,NUM_SHADER_BINARY_FORMATS:36345,NV_coverage_sample:1,NV_depth_nonlinear:1,NV_draw_buffers:1,NV_draw_instanced:1,NV_fbo_color_attachments:1,NV_fence:1,NV_framebuffer_blit:1,NV_framebuffer_multisample:1,NV_generate_mipmap_sRGB:1,NV_instanced_arrays:1,NV_read_buffer:1,NV_read_buffer_front:1,NV_read_depth:1,NV_read_depth_stencil:1,NV_read_stencil:1,NV_sRGB_formats:1,NV_shadow_samplers_array:1,NV_shadow_samplers_cube:1,NV_texture_border_clamp:1,NV_texture_compression_s3tc_update:1,NV_texture_npot_2D_mipmap:1,OBJECT_TYPE_APPLE:37138,OES_EGL_image:1,OES_EGL_image_external:1,OES_compressed_ETC1_RGB8_texture:1,OES_compressed_paletted_texture:1,OES_depth24:1,OES_depth32:1,OES_depth_texture:1,OES_element_index_uint:1,OES_fbo_render_mipmap:1,OES_fragment_precision_high:1,OES_get_program_binary:1,OES_mapbuffer:1,OES_packed_depth_stencil:1,OES_required_internalformat:1,OES_rgb8_rgba8:1,OES_standard_derivatives:1,OES_stencil1:1,OES_stencil4:1,OES_surfaceless_context:1,OES_texture_3D:1,OES_texture_float:1,OES_texture_float_linear:1,OES_texture_half_float:1,OES_texture_half_float_linear:1,OES_texture_npot:1,OES_vertex_array_object:1,OES_vertex_half_float:1,OES_vertex_type_10_10_10_2:1,ONE:1,ONE_MINUS_CONSTANT_ALPHA:32772,ONE_MINUS_CONSTANT_COLOR:32770,ONE_MINUS_DST_ALPHA:773,ONE_MINUS_DST_COLOR:775,ONE_MINUS_SRC_ALPHA:771,ONE_MINUS_SRC_COLOR:769,OUT_OF_MEMORY:1285,PACK_ALIGNMENT:3333,PACK_REVERSE_ROW_ORDER_ANGLE:37796,PALETTE4_R5_G6_B5_OES:35730,PALETTE4_RGB5_A1_OES:35732,PALETTE4_RGB8_OES:35728,PALETTE4_RGBA4_OES:35731,PALETTE4_RGBA8_OES:35729,PALETTE8_R5_G6_B5_OES:35735,PALETTE8_RGB5_A1_OES:35737,PALETTE8_RGB8_OES:35733,PALETTE8_RGBA4_OES:35736,PALETTE8_RGBA8_OES:35734,PERCENTAGE_AMD:35779,PERFMON_GLOBAL_MODE_QCOM:36768,PERFMON_RESULT_AMD:35782,PERFMON_RESULT_AVAILABLE_AMD:35780,PERFMON_RESULT_SIZE_AMD:35781,POINTS:0,POLYGON_OFFSET_FACTOR:32824,POLYGON_OFFSET_FILL:32823,POLYGON_OFFSET_UNITS:10752,PROGRAM:33506,PROGRAM_BINARY_ANGLE:37798,PROGRAM_BINARY_FORMATS_OES:34815,PROGRAM_BINARY_LENGTH_OES:34625,PROGRAM_OBJECT_EXT:35648,PROGRAM_PIPELINE_BINDING_EXT:33370,PROGRAM_PIPELINE_OBJECT_EXT:35407,PROGRAM_SEPARABLE_EXT:33368,QCOM_alpha_test:1,QCOM_binning_control:1,QCOM_driver_control:1,QCOM_extended_get:1,QCOM_extended_get2:1,QCOM_perfmon_global_mode:1,QCOM_tiled_rendering:1,QCOM_writeonly_rendering:1,QUERY:33507,QUERY_OBJECT_EXT:37203,QUERY_RESULT_AVAILABLE_EXT:34919,QUERY_RESULT_EXT:34918,R16F_EXT:33325,R32F_EXT:33326,R8_EXT:33321,READ_BUFFER_EXT:3074,READ_BUFFER_NV:3074,READ_FRAMEBUFFER_ANGLE:36008,READ_FRAMEBUFFER_APPLE:36008,READ_FRAMEBUFFER_BINDING_ANGLE:36010,READ_FRAMEBUFFER_BINDING_APPLE:36010,READ_FRAMEBUFFER_BINDING_NV:36010,READ_FRAMEBUFFER_NV:36008,RED_BITS:3410,RED_EXT:6403,RENDERBUFFER:36161,RENDERBUFFER_ALPHA_SIZE:36179,RENDERBUFFER_BINDING:36007,RENDERBUFFER_BLUE_SIZE:36178,RENDERBUFFER_DEPTH_SIZE:36180,RENDERBUFFER_GREEN_SIZE:36177,RENDERBUFFER_HEIGHT:36163,RENDERBUFFER_INTERNAL_FORMAT:36164,RENDERBUFFER_RED_SIZE:36176,RENDERBUFFER_SAMPLES_ANGLE:36011,RENDERBUFFER_SAMPLES_APPLE:36011,RENDERBUFFER_SAMPLES_EXT:36011,RENDERBUFFER_SAMPLES_IMG:37171,RENDERBUFFER_SAMPLES_NV:36011,RENDERBUFFER_STENCIL_SIZE:36181,RENDERBUFFER_WIDTH:36162,RENDERER:7937,RENDER_DIRECT_TO_FRAMEBUFFER_QCOM:36787,REPEAT:10497,REPLACE:7681,REQUIRED_TEXTURE_IMAGE_UNITS_OES:36200,RESET_NOTIFICATION_STRATEGY_EXT:33366,RG16F_EXT:33327,RG32F_EXT:33328,RG8_EXT:33323,RGB:6407,RGB10_A2_EXT:32857,RGB10_EXT:32850,RGB16F_EXT:34843,RGB32F_EXT:34837,RGB565:36194,RGB565_OES:36194,RGB5_A1:32855,RGB5_A1_OES:32855,RGB8_OES:32849,RGBA:6408,RGBA16F_EXT:34842,RGBA32F_EXT:34836,RGBA4:32854,RGBA4_OES:32854,RGBA8_OES:32856,RGB_422_APPLE:35359,RG_EXT:33319,RIGHT:1031,SAMPLER:33510,SAMPLER_2D:35678,SAMPLER_2D_ARRAY_SHADOW_NV:36292,SAMPLER_2D_SHADOW_EXT:35682,SAMPLER_3D_OES:35679,SAMPLER_CUBE:35680,SAMPLER_CUBE_SHADOW_NV:36293,SAMPLER_EXTERNAL_OES:36198,SAMPLES:32937,SAMPLE_ALPHA_TO_COVERAGE:32926,SAMPLE_BUFFERS:32936,SAMPLE_COVERAGE:32928,SAMPLE_COVERAGE_INVERT:32939,SAMPLE_COVERAGE_VALUE:32938,SCISSOR_BOX:3088,SCISSOR_TEST:3089,SGX_BINARY_IMG:35850,SGX_PROGRAM_BINARY_IMG:37168,SHADER:33505,SHADER_BINARY_DMP:37456,SHADER_BINARY_FORMATS:36344,SHADER_BINARY_VIV:36804,SHADER_COMPILER:36346,SHADER_OBJECT_EXT:35656,SHADER_SOURCE_LENGTH:35720,SHADER_TYPE:35663,SHADING_LANGUAGE_VERSION:35724,SHORT:5122,SIGNALED_APPLE:37145,SLUMINANCE8_ALPHA8_NV:35909,SLUMINANCE8_NV:35911,SLUMINANCE_ALPHA_NV:35908,SLUMINANCE_NV:35910,SRC_ALPHA:770,SRC_ALPHA_SATURATE:776,SRC_COLOR:768,SRGB8_ALPHA8_EXT:35907,SRGB8_NV:35905,SRGB_ALPHA_EXT:35906,SRGB_EXT:35904,STACK_OVERFLOW:1283,STACK_UNDERFLOW:1284,STATE_RESTORE:35804,STATIC_DRAW:35044,STENCIL_ATTACHMENT:36128,STENCIL_BACK_FAIL:34817,STENCIL_BACK_FUNC:34816,STENCIL_BACK_PASS_DEPTH_FAIL:34818,STENCIL_BACK_PASS_DEPTH_PASS:34819,STENCIL_BACK_REF:36003,STENCIL_BACK_VALUE_MASK:36004,STENCIL_BACK_WRITEMASK:36005,STENCIL_BITS:3415,STENCIL_BUFFER_BIT:1024,STENCIL_BUFFER_BIT0_QCOM:65536,STENCIL_BUFFER_BIT1_QCOM:131072,STENCIL_BUFFER_BIT2_QCOM:262144,STENCIL_BUFFER_BIT3_QCOM:524288,STENCIL_BUFFER_BIT4_QCOM:1048576,STENCIL_BUFFER_BIT5_QCOM:2097152,STENCIL_BUFFER_BIT6_QCOM:4194304,STENCIL_BUFFER_BIT7_QCOM:8388608,STENCIL_CLEAR_VALUE:2961,STENCIL_EXT:6146,STENCIL_FAIL:2964,STENCIL_FUNC:2962,STENCIL_INDEX1_OES:36166,STENCIL_INDEX4_OES:36167,STENCIL_INDEX:6401,STENCIL_INDEX8:36168,STENCIL_PASS_DEPTH_FAIL:2965,STENCIL_PASS_DEPTH_PASS:2966,STENCIL_REF:2967,STENCIL_TEST:2960,STENCIL_VALUE_MASK:2963,STENCIL_WRITEMASK:2968,STREAM_DRAW:35040,SUBPIXEL_BITS:3408,SYNC_CONDITION_APPLE:37139,SYNC_FENCE_APPLE:37142,SYNC_FLAGS_APPLE:37141,SYNC_FLUSH_COMMANDS_BIT_APPLE:1,SYNC_GPU_COMMANDS_COMPLETE_APPLE:37143,SYNC_OBJECT_APPLE:35411,SYNC_STATUS_APPLE:37140,TEXTURE:5890,TEXTURE0:33984,TEXTURE1:33985,TEXTURE10:33994,TEXTURE11:33995,TEXTURE12:33996,TEXTURE13:33997,TEXTURE14:33998,TEXTURE15:33999,TEXTURE16:34e3,TEXTURE17:34001,TEXTURE18:34002,TEXTURE19:34003,TEXTURE2:33986,TEXTURE20:34004,TEXTURE21:34005,TEXTURE22:34006,TEXTURE23:34007,TEXTURE24:34008,TEXTURE25:34009,TEXTURE26:34010,TEXTURE27:34011,TEXTURE28:34012,TEXTURE29:34013,TEXTURE3:33987,TEXTURE30:34014,TEXTURE31:34015,TEXTURE4:33988,TEXTURE5:33989,TEXTURE6:33990,TEXTURE7:33991,TEXTURE8:33992,TEXTURE9:33993,TEXTURE_2D:3553,TEXTURE_3D_OES:32879,TEXTURE_BINDING_2D:32873,TEXTURE_BINDING_3D_OES:32874,TEXTURE_BINDING_CUBE_MAP:34068,TEXTURE_BINDING_EXTERNAL_OES:36199,TEXTURE_BORDER_COLOR_NV:4100,TEXTURE_COMPARE_FUNC_EXT:34893,TEXTURE_COMPARE_MODE_EXT:34892,TEXTURE_CUBE_MAP:34067,TEXTURE_CUBE_MAP_NEGATIVE_X:34070,TEXTURE_CUBE_MAP_NEGATIVE_Y:34072,TEXTURE_CUBE_MAP_NEGATIVE_Z:34074,TEXTURE_CUBE_MAP_POSITIVE_X:34069,TEXTURE_CUBE_MAP_POSITIVE_Y:34071,TEXTURE_CUBE_MAP_POSITIVE_Z:34073,TEXTURE_DEPTH_QCOM:35796,TEXTURE_EXTERNAL_OES:36197,TEXTURE_FORMAT_QCOM:35798,TEXTURE_HEIGHT_QCOM:35795,TEXTURE_IMAGE_VALID_QCOM:35800,TEXTURE_IMMUTABLE_FORMAT_EXT:37167,TEXTURE_INTERNAL_FORMAT_QCOM:35797,TEXTURE_MAG_FILTER:10240,TEXTURE_MAX_ANISOTROPY_EXT:34046,TEXTURE_MAX_LEVEL_APPLE:33085,TEXTURE_MIN_FILTER:10241,TEXTURE_NUM_LEVELS_QCOM:35801,TEXTURE_OBJECT_VALID_QCOM:35803,TEXTURE_SAMPLES_IMG:37174,TEXTURE_TARGET_QCOM:35802,TEXTURE_TYPE_QCOM:35799,TEXTURE_USAGE_ANGLE:37794,TEXTURE_WIDTH_QCOM:35794,TEXTURE_WRAP_R_OES:32882,TEXTURE_WRAP_S:10242,TEXTURE_WRAP_T:10243,TIMEOUT_EXPIRED_APPLE:37147,TIMEOUT_IGNORED_APPLE:0xffffffffffffffff,TRANSLATED_SHADER_SOURCE_LENGTH_ANGLE:37792,TRIANGLES:4,TRIANGLE_FAN:6,TRIANGLE_STRIP:5,TRUE:1,UNKNOWN_CONTEXT_RESET_EXT:33365,UNPACK_ALIGNMENT:3317,UNPACK_ROW_LENGTH:3314,UNPACK_SKIP_PIXELS:3316,UNPACK_SKIP_ROWS:3315,UNSIGNALED_APPLE:37144,UNSIGNED_BYTE:5121,UNSIGNED_INT:5125,UNSIGNED_INT64_AMD:35778,UNSIGNED_INT_10_10_10_2_OES:36342,UNSIGNED_INT_24_8_OES:34042,UNSIGNED_INT_2_10_10_10_REV_EXT:33640,UNSIGNED_NORMALIZED_EXT:35863,UNSIGNED_SHORT:5123,UNSIGNED_SHORT_1_5_5_5_REV_EXT:33638,UNSIGNED_SHORT_4_4_4_4:32819,UNSIGNED_SHORT_4_4_4_4_REV_EXT:33637,UNSIGNED_SHORT_4_4_4_4_REV_IMG:33637,UNSIGNED_SHORT_5_5_5_1:32820,UNSIGNED_SHORT_5_6_5:33635,UNSIGNED_SHORT_8_8_APPLE:34234,UNSIGNED_SHORT_8_8_REV_APPLE:34235,VALIDATE_STATUS:35715,VENDOR:7936,VERSION:7938,VERTEX_ARRAY_BINDING_OES:34229,VERTEX_ARRAY_OBJECT_EXT:37204,VERTEX_ATTRIB_ARRAY_BUFFER_BINDING:34975,VERTEX_ATTRIB_ARRAY_DIVISOR_ANGLE:35070,VERTEX_ATTRIB_ARRAY_DIVISOR_NV:35070,VERTEX_ATTRIB_ARRAY_ENABLED:34338,VERTEX_ATTRIB_ARRAY_NORMALIZED:34922,VERTEX_ATTRIB_ARRAY_POINTER:34373,VERTEX_ATTRIB_ARRAY_SIZE:34339,VERTEX_ATTRIB_ARRAY_STRIDE:34340,VERTEX_ATTRIB_ARRAY_TYPE:34341,VERTEX_SHADER:35633,VERTEX_SHADER_BIT_EXT:1,VIEWPORT:2978,VIV_shader_binary:1,WAIT_FAILED_APPLE:37149,WRITEONLY_RENDERING_QCOM:34851,WRITE_ONLY_OES:35001,Z400_BINARY_AMD:34624,ZERO:0,RASTERIZER_DISCARD:35977,UNPACK_FLIP_Y_WEBGL:37440,UNPACK_PREMULTIPLY_ALPHA_WEBGL:37441,CONTEXT_LOST_WEBGL:37442,UNPACK_COLORSPACE_CONVERSION_WEBGL:37443,BROWSER_DEFAULT_WEBGL:37444},_j={};function Ej(e){var t=kj();return function(){var r=Ee(e),a;if(t){var i=Ee(this).constructor;a=Reflect.construct(r,arguments,i)}else a=r.apply(this,arguments);return Mt(this,a)}}function kj(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var Uy=new Map,s6=new Map,Sj=new Map,eo=function(e){Ct(n,e);var t=Ej(n);function n(){var r;return Ae(this,n),r=t.call(this),m(D(r),"onabort",void 0),m(D(r),"onerror",void 0),m(D(r),"onload",void 0),m(D(r),"onloadstart",void 0),m(D(r),"onprogress",void 0),m(D(r),"ontimeout",void 0),m(D(r),"onloadend",void 0),m(D(r),"onreadystatechange",void 0),m(D(r),"readyState",void 0),m(D(r),"response",void 0),m(D(r),"responseText",void 0),m(D(r),"_responseType",void 0),m(D(r),"responseXML",void 0),m(D(r),"status",void 0),m(D(r),"statusText",void 0),m(D(r),"upload",void 0),m(D(r),"withCredentials",void 0),m(D(r),"timeout",void 0),m(D(r),"_url",void 0),m(D(r),"_method",void 0),r.onabort=null,r.onerror=null,r.onload=null,r.onloadstart=null,r.onprogress=null,r.ontimeout=null,r.onloadend=null,r.onreadystatechange=null,r.readyState=0,r.response=null,r.responseText=null,r._responseType="text",r.responseXML=null,r.status=0,r.statusText="",r.upload={},r.withCredentials=!1,Uy.set("requestHeader",{"content-type":"application/x-www-form-urlencoded"}),r}return Oe(n,[{key:"responseType",set:function(a){this._responseType=a}},{key:"abort",value:function(){var a=Sj.get("requestTask");a&&a.abort()}},{key:"getAllResponseHeaders",value:function(){var a=s6.get("responseHeader");return Object.keys(a).map(function(i){return"".concat(i,": ").concat(a[i])}).join(`
`)}},{key:"getResponseHeader",value:function(a){return s6.get("responseHeader")[a]}},{key:"open",value:function(a,i,o){this._method=a,this._url=i}},{key:"overrideMimeType",value:function(){}},{key:"send",value:function(){}},{key:"setRequestHeader",value:function(a,i){var o=Uy.get("requestHeader");o[a]=i,Uy.set("requestHeader",o)}},{key:"addEventListener",value:function(a,i){var o=this;typeof i=="function"&&(this["on"+a]=function(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};s.target=s.target||o,i.call(o,s)})}},{key:"removeEventListener",value:function(a,i){this["on"+a]===i&&(this["on"+a]=null)}}]),n}(u2);m(eo,"UNSEND",void 0);m(eo,"OPENED",void 0);m(eo,"HEADERS_RECEIVED",void 0);m(eo,"LOADING",void 0);m(eo,"DONE",void 0);eo.UNSEND=0;eo.OPENED=1;eo.HEADERS_RECEIVED=2;eo.LOADING=3;eo.DONE=4;function Cj(e){var t=Tj();return function(){var r=Ee(e),a;if(t){var i=Ee(this).constructor;a=Reflect.construct(r,arguments,i)}else a=r.apply(this,arguments);return Mt(this,a)}}function Tj(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(function(e){Ct(n,e);var t=Cj(n);function n(r){var a;return Ae(this,n),a=t.call(this,r),m(D(a),"touches",void 0),m(D(a),"targetTouches",void 0),m(D(a),"changedTouches",void 0),a.touches=[],a.targetTouches=[],a.changedTouches=[],a.target=Ou(),a.currentTarget=Ou(),a}return Oe(n)})(kh);function Aj(e){var t=Oj();return function(){var r=Ee(e),a;if(t){var i=Ee(this).constructor;a=Reflect.construct(r,arguments,i)}else a=r.apply(this,arguments);return Mt(this,a)}}function Oj(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(function(e){Ct(n,e);var t=Aj(n);function n(r){var a;return Ae(this,n),a=t.call(this,r),m(D(a),"buttons",void 0),m(D(a),"which",void 0),m(D(a),"pointerId",void 0),m(D(a),"bubbles",void 0),m(D(a),"button",void 0),m(D(a),"width",void 0),m(D(a),"height",void 0),m(D(a),"pressure",void 0),m(D(a),"isPrimary",void 0),m(D(a),"pointerType",void 0),m(D(a),"altKey",void 0),m(D(a),"ctrlKey",void 0),m(D(a),"metaKey",void 0),m(D(a),"shiftKey",void 0),a.target=Ou(),a.currentTarget=Ou(),a}return Oe(n)})(kh);function Mj(e){var t=Rj();return function(){var r=Ee(e),a;if(t){var i=Ee(this).constructor;a=Reflect.construct(r,arguments,i)}else a=r.apply(this,arguments);return Mt(this,a)}}function Rj(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(function(e){Ct(n,e);var t=Mj(n);function n(r){return Ae(this,n),t.call(this,r)}return Oe(n)})(kh);var Pj=typeof my!="undefined"&&!!my&&typeof my.showToast=="function"&&my.isFRM!==!0,Ij=typeof wx!="undefined"&&wx!==null&&(typeof wx.request!="undefined"||typeof wx.miniProgram!="undefined"),bi=Pj||Ij,Lj={atob:BV,btoa:DI,devicePixelRatio:$V,Blob:zV,document:hu,Element:zI,Event:kh,EventTarget:u2,HTMLCanvasElement:uj,HTMLElement:Lf,HTMLMediaElement:VI,HTMLVideoElement:jI,Image:GI,ImageData:cj,navigator:hj,Node:BI,requestAnimationFrame:vj,cancelAnimationFrame:bj,screen:yp,XMLHttpRequest:eo,performance:mj,URL:yj,WebGLRenderingContext:wj,WebGL2RenderingContext:_j,addEventListener:function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};hu.addEventListener(t,n,r)},removeEventListener:function(t,n,r){hu.removeEventListener(t,n)},dispatchEvent:function(t){hu.dispatchEvent(t)},innerWidth:yp.availWidth,innerHeight:yp.availHeight,setTimeout,clearTimeout,setInterval,clearInterval},Hn=bi?Lj:Zi,Nj=bi?eo:Zi.XMLHttpRequest;bi||Zi.location;function Fj(e){var t=e;return typeof e=="string"&&(t=Hn.document.getElementById(e)),t}function YI(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function Dj(e){return YI(e).split(/\s+/)}function Bj(e){var t,n,r=Hn==null||(t=Hn.document)===null||t===void 0||(n=t.documentElement)===null||n===void 0?void 0:n.style;if(!r)return e[0];for(var a in e)if(e[a]&&e[a]in r)return e[a];return e[0]}function fr(e,t,n){var r=Hn.document.createElement(e);return r.className=t||"",n&&n.appendChild(r),r}function mf(e){var t=e.parentNode;t&&t.removeChild(e)}function Mu(e,t){if(e.classList!==void 0)for(var n=Dj(t),r=0,a=n.length;r<a;r++)e.classList.add(n[r]);else if(!zj(e,t)){var i=c2(e);ZI(e,(i?i+" ":"")+t)}}function Zp(e,t){e.classList!==void 0?e.classList.remove(t):ZI(e,YI((" "+c2(e)+" ").replace(" "+t+" "," ")))}function zj(e,t){if(e.classList!==void 0)return e.classList.contains(t);var n=c2(e);return n.length>0&&new RegExp("(^|\\s)"+t+"(\\s|$)").test(n)}function ZI(e,t){e instanceof HTMLElement?e.className=t:e.className.baseVal=t}function c2(e){return e instanceof SVGElement&&(e=e.correspondingElement),e.className.baseVal===void 0?e.className:e.className.baseVal}function l6(e){for(;e&&e.firstChild;)e.removeChild(e.firstChild)}var Uj=Bj(["transform","WebkitTransform"]);function qI(e,t){e.style[Uj]=t}function $j(){if(typeof Event=="function")Hn.dispatchEvent(new Event("resize"));else{var e=Hn.document.createEvent("UIEvents");e.initUIEvent("resize",!0,!1,Hn,0),Hn.dispatchEvent(e)}}function Vj(){var e,t=Hn.document.querySelector('meta[name="viewport"]');if(!t)return 1;var n=(e=t.content)===null||e===void 0?void 0:e.split(","),r=n.find(function(a){var i=a.split("="),o=Le(i,2),s=o[0];return o[1],s==="initial-scale"});return r?r.split("=")[1]*1:1}var vr=Vj()<1?1:Hn.devicePixelRatio;function jj(e){if(e.length===0)throw new Error("max requires at least one data point");for(var t=e[0],n=1;n<e.length;n++)e[n]>t&&(t=e[n]);return t*1}function Gj(e){if(e.length===0)throw new Error("min requires at least one data point");for(var t=e[0],n=1;n<e.length;n++)e[n]<t&&(t=e[n]);return t*1}function KI(e){if(e.length===0)return 0;for(var t=e[0]*1,n=1;n<e.length;n++)t+=e[n]*1;return t}function Hj(e){if(e.length===0)throw new Error("mean requires at least one data point");return KI(e)/e.length}function Wj(e){if(e.length===0)throw new Error("mean requires at least one data point");if(e.length<3)return e[0];e.sort();for(var t=e[0],n=NaN,r=0,a=1,i=1;i<e.length+1;i++)e[i]!==t?(a>r&&(r=a,n=t),a=1,t=e[i]):a++;return n*1}var f2={min:Gj,max:jj,mean:Hj,sum:KI,mode:Wj};function d2(e,t){return e.map(function(n){return n[t]})}function Xj(e,t){return f2[e](t)}function u6(e,t,n,r,a,i,o){try{var s=e[i](o),l=s.value}catch(u){n(u);return}s.done?t(l):Promise.resolve(l).then(r,a)}function qn(e){return function(){var t=this,n=arguments;return new Promise(function(r,a){var i=e.apply(t,n);function o(l){u6(i,r,a,o,s,"next",l)}function s(l){u6(i,r,a,o,s,"throw",l)}o(void 0)})}}function Yj(e){return Function.toString.call(e).indexOf("[native code]")!==-1}function QI(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Jc(e,t,n){return QI()?Jc=Reflect.construct.bind():Jc=function(a,i,o){var s=[null];s.push.apply(s,i);var l=Function.bind.apply(a,s),u=new l;return o&&Yp(u,o.prototype),u},Jc.apply(null,arguments)}function Z1(e){var t=typeof Map=="function"?new Map:void 0;return Z1=function(r){if(r===null||!Yj(r))return r;if(typeof r!="function")throw new TypeError("Super expression must either be null or a function");if(typeof t!="undefined"){if(t.has(r))return t.get(r);t.set(r,a)}function a(){return Jc(r,arguments,Ee(this).constructor)}return a.prototype=Object.create(r.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),Yp(a,r)},Z1(e)}var JI={exports:{}},e7={exports:{}};(function(e){function t(n){return e.exports=t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},e.exports.__esModule=!0,e.exports.default=e.exports,t(n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports})(e7);(function(e){var t=e7.exports.default;function n(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */e.exports=n=function(){return r},e.exports.__esModule=!0,e.exports.default=e.exports;var r={},a=Object.prototype,i=a.hasOwnProperty,o=typeof Symbol=="function"?Symbol:{},s=o.iterator||"@@iterator",l=o.asyncIterator||"@@asyncIterator",u=o.toStringTag||"@@toStringTag";function c(O,R,H){return Object.defineProperty(O,R,{value:H,enumerable:!0,configurable:!0,writable:!0}),O[R]}try{c({},"")}catch{c=function(H,ee,re){return H[ee]=re}}function f(O,R,H,ee){var re=R&&R.prototype instanceof h?R:h,Y=Object.create(re.prototype),J=new A(ee||[]);return Y._invoke=function(ae,le,fe){var ge="suspendedStart";return function(we,Ve){if(ge==="executing")throw new Error("Generator is already running");if(ge==="completed"){if(we==="throw")throw Ve;return M()}for(fe.method=we,fe.arg=Ve;;){var Lt=fe.delegate;if(Lt){var Nt=I(Lt,fe);if(Nt){if(Nt===p)continue;return Nt}}if(fe.method==="next")fe.sent=fe._sent=fe.arg;else if(fe.method==="throw"){if(ge==="suspendedStart")throw ge="completed",fe.arg;fe.dispatchException(fe.arg)}else fe.method==="return"&&fe.abrupt("return",fe.arg);ge="executing";var Zt=d(ae,le,fe);if(Zt.type==="normal"){if(ge=fe.done?"completed":"suspendedYield",Zt.arg===p)continue;return{value:Zt.arg,done:fe.done}}Zt.type==="throw"&&(ge="completed",fe.method="throw",fe.arg=Zt.arg)}}}(O,H,J),Y}function d(O,R,H){try{return{type:"normal",arg:O.call(R,H)}}catch(ee){return{type:"throw",arg:ee}}}r.wrap=f;var p={};function h(){}function g(){}function v(){}var b={};c(b,s,function(){return this});var y=Object.getPrototypeOf,x=y&&y(y(S([])));x&&x!==a&&i.call(x,s)&&(b=x);var E=v.prototype=h.prototype=Object.create(b);function T(O){["next","throw","return"].forEach(function(R){c(O,R,function(H){return this._invoke(R,H)})})}function C(O,R){function H(re,Y,J,ae){var le=d(O[re],O,Y);if(le.type!=="throw"){var fe=le.arg,ge=fe.value;return ge&&t(ge)=="object"&&i.call(ge,"__await")?R.resolve(ge.__await).then(function(we){H("next",we,J,ae)},function(we){H("throw",we,J,ae)}):R.resolve(ge).then(function(we){fe.value=we,J(fe)},function(we){return H("throw",we,J,ae)})}ae(le.arg)}var ee;this._invoke=function(re,Y){function J(){return new R(function(ae,le){H(re,Y,ae,le)})}return ee=ee?ee.then(J,J):J()}}function I(O,R){var H=O.iterator[R.method];if(H===void 0){if(R.delegate=null,R.method==="throw"){if(O.iterator.return&&(R.method="return",R.arg=void 0,I(O,R),R.method==="throw"))return p;R.method="throw",R.arg=new TypeError("The iterator does not provide a 'throw' method")}return p}var ee=d(H,O.iterator,R.arg);if(ee.type==="throw")return R.method="throw",R.arg=ee.arg,R.delegate=null,p;var re=ee.arg;return re?re.done?(R[O.resultName]=re.value,R.next=O.nextLoc,R.method!=="return"&&(R.method="next",R.arg=void 0),R.delegate=null,p):re:(R.method="throw",R.arg=new TypeError("iterator result is not an object"),R.delegate=null,p)}function P(O){var R={tryLoc:O[0]};1 in O&&(R.catchLoc=O[1]),2 in O&&(R.finallyLoc=O[2],R.afterLoc=O[3]),this.tryEntries.push(R)}function j(O){var R=O.completion||{};R.type="normal",delete R.arg,O.completion=R}function A(O){this.tryEntries=[{tryLoc:"root"}],O.forEach(P,this),this.reset(!0)}function S(O){if(O){var R=O[s];if(R)return R.call(O);if(typeof O.next=="function")return O;if(!isNaN(O.length)){var H=-1,ee=function re(){for(;++H<O.length;)if(i.call(O,H))return re.value=O[H],re.done=!1,re;return re.value=void 0,re.done=!0,re};return ee.next=ee}}return{next:M}}function M(){return{value:void 0,done:!0}}return g.prototype=v,c(E,"constructor",v),c(v,"constructor",g),g.displayName=c(v,u,"GeneratorFunction"),r.isGeneratorFunction=function(O){var R=typeof O=="function"&&O.constructor;return!!R&&(R===g||(R.displayName||R.name)==="GeneratorFunction")},r.mark=function(O){return Object.setPrototypeOf?Object.setPrototypeOf(O,v):(O.__proto__=v,c(O,u,"GeneratorFunction")),O.prototype=Object.create(E),O},r.awrap=function(O){return{__await:O}},T(C.prototype),c(C.prototype,l,function(){return this}),r.AsyncIterator=C,r.async=function(O,R,H,ee,re){re===void 0&&(re=Promise);var Y=new C(f(O,R,H,ee),re);return r.isGeneratorFunction(R)?Y:Y.next().then(function(J){return J.done?J.value:Y.next()})},T(E),c(E,u,"Generator"),c(E,s,function(){return this}),c(E,"toString",function(){return"[object Generator]"}),r.keys=function(O){var R=[];for(var H in O)R.push(H);return R.reverse(),function ee(){for(;R.length;){var re=R.pop();if(re in O)return ee.value=re,ee.done=!1,ee}return ee.done=!0,ee}},r.values=S,A.prototype={constructor:A,reset:function(R){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(j),!R)for(var H in this)H.charAt(0)==="t"&&i.call(this,H)&&!isNaN(+H.slice(1))&&(this[H]=void 0)},stop:function(){this.done=!0;var R=this.tryEntries[0].completion;if(R.type==="throw")throw R.arg;return this.rval},dispatchException:function(R){if(this.done)throw R;var H=this;function ee(fe,ge){return J.type="throw",J.arg=R,H.next=fe,ge&&(H.method="next",H.arg=void 0),!!ge}for(var re=this.tryEntries.length-1;re>=0;--re){var Y=this.tryEntries[re],J=Y.completion;if(Y.tryLoc==="root")return ee("end");if(Y.tryLoc<=this.prev){var ae=i.call(Y,"catchLoc"),le=i.call(Y,"finallyLoc");if(ae&&le){if(this.prev<Y.catchLoc)return ee(Y.catchLoc,!0);if(this.prev<Y.finallyLoc)return ee(Y.finallyLoc)}else if(ae){if(this.prev<Y.catchLoc)return ee(Y.catchLoc,!0)}else{if(!le)throw new Error("try statement without catch or finally");if(this.prev<Y.finallyLoc)return ee(Y.finallyLoc)}}}},abrupt:function(R,H){for(var ee=this.tryEntries.length-1;ee>=0;--ee){var re=this.tryEntries[ee];if(re.tryLoc<=this.prev&&i.call(re,"finallyLoc")&&this.prev<re.finallyLoc){var Y=re;break}}Y&&(R==="break"||R==="continue")&&Y.tryLoc<=H&&H<=Y.finallyLoc&&(Y=null);var J=Y?Y.completion:{};return J.type=R,J.arg=H,Y?(this.method="next",this.next=Y.finallyLoc,p):this.complete(J)},complete:function(R,H){if(R.type==="throw")throw R.arg;return R.type==="break"||R.type==="continue"?this.next=R.arg:R.type==="return"?(this.rval=this.arg=R.arg,this.method="return",this.next="end"):R.type==="normal"&&H&&(this.next=H),p},finish:function(R){for(var H=this.tryEntries.length-1;H>=0;--H){var ee=this.tryEntries[H];if(ee.finallyLoc===R)return this.complete(ee.completion,ee.afterLoc),j(ee),p}},catch:function(R){for(var H=this.tryEntries.length-1;H>=0;--H){var ee=this.tryEntries[H];if(ee.tryLoc===R){var re=ee.completion;if(re.type==="throw"){var Y=re.arg;j(ee)}return Y}}throw new Error("illegal catch attempt")},delegateYield:function(R,H,ee){return this.delegate={iterator:S(R),resultName:H,nextLoc:ee},this.method==="next"&&(this.arg=void 0),p}},r}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports})(JI);var O0=JI.exports(),pn=O0;try{regeneratorRuntime=O0}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=O0:Function("r","regeneratorRuntime = r")(O0)}function Zj(e){return typeof ImageBitmap!="undefined"&&e instanceof ImageBitmap}function c6(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function f6(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?c6(Object(n),!0).forEach(function(r){m(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c6(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function qj(e){var t=Kj();return function(){var r=Ee(e),a;if(t){var i=Ee(this).constructor;a=Reflect.construct(r,arguments,i)}else a=r.apply(this,arguments);return Mt(this,a)}}function Kj(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var Qj=function(e){Ct(n,e);var t=qj(n);function n(r,a,i,o){var s;return Ae(this,n),s=t.call(this,"AJAXError: ".concat(a," (").concat(r,"): ").concat(i)),m(D(s),"status",void 0),m(D(s),"statusText",void 0),m(D(s),"url",void 0),m(D(s),"body",void 0),s.status=r,s.statusText=a,s.url=i,s.body=o,s}return Oe(n)}(Z1(Error));function Jj(e,t){var n=new Nj;n.open(e.method||"GET",e.url,!0),e.type==="arrayBuffer"&&(n.responseType="arraybuffer");for(var r in e.headers)e.headers.hasOwnProperty(r)&&n.setRequestHeader(r,e.headers[r]);return e.type==="json"&&(n.responseType="text",n.setRequestHeader("Accept","application/json")),n.withCredentials=e.credentials==="include",n.onerror=function(){t(new Error(n.statusText))},n.onload=function(){if((n.status>=200&&n.status<300||n.status===0)&&n.response!==null){var a=n.response;if(e.type==="json")try{a=JSON.parse(n.response)}catch(o){return t(o)}t(null,a,n.getResponseHeader("Cache-Control"),n.getResponseHeader("Expires"))}else{var i=new Blob([n.response],{type:n.getResponseHeader("Content-Type")});t(new Qj(n.status,n.statusText,e.url,i))}},n.send(e.body),n}function eG(e,t){return Jj(e,t)}var p2=function(t,n){return eG(f6(f6({},t),{},{type:"arrayBuffer"}),n)},d6="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function tG(e,t){var n=new Hn.Image,r=Hn.URL||Hn.webkitURL;n.crossOrigin="anonymous",n.onload=function(){t(null,n),r.revokeObjectURL(n.src),n.onload=null,window.requestAnimationFrame(function(){n.src=d6})},n.onerror=function(){return t(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))};var a=new Blob([new Uint8Array(e)],{type:"image/png"});n.src=e.byteLength?r.createObjectURL(a):d6}function nG(e,t){var n=new Blob([new Uint8Array(e)],{type:"image/png"});createImageBitmap(n).then(function(r){t(null,r)}).catch(function(r){t(new Error("Could not load image because of ".concat(r.message,". Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.")))})}var q1=function(t,n){return p2(t,function(r,a){if(r)n(r);else if(a){var i=typeof createImageBitmap=="function";i?nG(a,n):tG(a,n)}})},rG=function(){var e=qn(pn.mark(function t(n,r,a){var i,o,s,l,u,c;return pn.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.prev=0,d.next=3,a(n);case 3:i=d.sent,o=i.rasterData,s=i.width,l=i.height,u=0,c=8e3,r(null,{data:o,width:s,height:l,min:u,max:c}),d.next=15;break;case 12:d.prev=12,d.t0=d.catch(0),r(null,new Error(""+d.t0));case 15:case"end":return d.stop()}},t,null,[[0,12]])}));return function(n,r,a){return e.apply(this,arguments)}}(),aG=function(t,n,r){return p2(t,function(a,i){a?n(a):i&&rG(i,n,r)})},p6=2*Math.PI*6378137/2;function iG(e){var t=[1/0,1/0,-1/0,-1/0];return e.forEach(function(n){var r=n.coordinates;t7(t,r)}),t}function t7(e,t){return Array.isArray(t[0])?t.forEach(function(n){t7(e,n)}):(e[0]>t[0]&&(e[0]=t[0]),e[1]>t[1]&&(e[1]=t[1]),e[2]<t[0]&&(e[2]=t[0]),e[3]<t[1]&&(e[3]=t[1])),e}function $y(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{enable:!0,decimal:1};e=lG(e,t);var r=e[0],a=e[1],i=r*p6/180,o=Math.log(Math.tan((90+a)*Math.PI/360))/(Math.PI/180);return o=o*p6/180,n.enable&&(i=Number(i.toFixed(n.decimal)),o=Number(o.toFixed(n.decimal))),e.length===3?[i,o,e[2]]:[i,o]}function oG(e){if(e==null)throw new Error("lng is required");return(e>180||e<-180)&&(e=e%360,e>180&&(e=-360+e),e<-180&&(e=360+e),e===0&&(e=0)),e}function sG(e){if(e==null)throw new Error("lat is required");return(e>90||e<-90)&&(e=e%180,e>90&&(e=-180+e),e<-90&&(e=180+e),e===0&&(e=0)),e}function lG(e,t){if(t===!1)return e;var n=oG(e[0]),r=sG(e[1]);return r>85&&(r=85),r<-85&&(r=-85),e.length===3?[n,r,e[2]]:[n,r]}function Uo(e){var t=85.0511287798,n=Math.max(Math.min(t,e[1]),-t),r=256<<20,a=Math.PI/180,i=e[0]*a,o=n*a;o=Math.log(Math.tan(Math.PI/4+o/2));var s=.5/Math.PI,l=.5,u=-.5/Math.PI;return a=.5,i=r*(s*i+l),o=r*(u*o+a),[Math.floor(i),Math.floor(o)]}function Dm(e,t){var n=85.0511287798,r=Math.PI/180,a=6378137;return t=Math.max(Math.min(n,t),-n),e*=r,t*=r,t=Math.log(Math.tan(Math.PI/4+t/2)),[e*a,t*a]}function uG(e,t,n){var r=Nm(t[1]-e[1]),a=Nm(t[0]-e[0]),i=Nm(e[1]),o=Nm(t[1]),s=Math.pow(Math.sin(r/2),2)+Math.pow(Math.sin(a/2),2)*Math.cos(i)*Math.cos(o);return MV(2*Math.atan2(Math.sqrt(s),Math.sqrt(1-s)),"meters")}function qp(e,t){var n=Math.abs(e[1][1]-e[0][1])*t,r=Math.abs(e[1][0]-e[0][0])*t;return[[e[0][0]-r,e[0][1]-n],[e[1][0]+r,e[1][1]+n]]}function h2(e,t){return e[0][0]<=t[0][0]&&e[0][1]<=t[0][1]&&e[1][0]>=t[1][0]&&e[1][1]>=t[1][1]}function vg(e){return[[e[0],e[1]],[e[2],e[3]]]}function n7(e){var t=cG(e,[0,0]);return[e[0]/t,e[1]/t]}function cG(e,t){return Math.sqrt(Math.pow(e[0]-t[0],2)+Math.pow(e[1]-t[1],2))}var fG=function(){function e(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:50,n=arguments.length>1?arguments[1]:void 0;Ae(this,e),m(this,"limit",void 0),m(this,"cache",void 0),m(this,"destroy",void 0),m(this,"order",void 0),this.limit=t,this.destroy=n||this.defaultDestroy,this.order=[],this.clear()}return Oe(e,[{key:"clear",value:function(){var n=this;this.order.forEach(function(r){n.delete(r)}),this.cache={},this.order=[]}},{key:"get",value:function(n){var r=this.cache[n];return r&&(this.deleteOrder(n),this.appendOrder(n)),r}},{key:"set",value:function(n,r){this.cache[n]?(this.delete(n),this.cache[n]=r,this.appendOrder(n)):(Object.keys(this.cache).length===this.limit&&this.delete(this.order[0]),this.cache[n]=r,this.appendOrder(n))}},{key:"delete",value:function(n){var r=this.cache[n];r&&(this.deleteCache(n),this.deleteOrder(n),this.destroy(r,n))}},{key:"deleteCache",value:function(n){delete this.cache[n]}},{key:"deleteOrder",value:function(n){var r=this.order.findIndex(function(a){return a===n});r>=0&&this.order.splice(r,1)}},{key:"appendOrder",value:function(n){this.order.push(n)}},{key:"defaultDestroy",value:function(n,r){return null}}]),e}();function Nf(e,t){e.forEach(function(n){!t[n]||(t[n]=t[n].bind(t))})}(function(){function e(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:16;Ae(this,e),m(this,"duration",16),m(this,"timestamp",new Date().getTime()),this.duration=t}return Oe(e,[{key:"run",value:function(n){var r=new Date().getTime(),a=r-this.timestamp;this.timestamp=r,a>=this.duration&&n()}}]),e})();function pv(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function m2(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function Ff(){}var Ru=.7,gf=1/Ru,ef="\\s*([+-]?\\d+)\\s*",Kp="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",Zo="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",dG=/^#([0-9a-f]{3,8})$/,pG=new RegExp("^rgb\\("+[ef,ef,ef]+"\\)$"),hG=new RegExp("^rgb\\("+[Zo,Zo,Zo]+"\\)$"),mG=new RegExp("^rgba\\("+[ef,ef,ef,Kp]+"\\)$"),gG=new RegExp("^rgba\\("+[Zo,Zo,Zo,Kp]+"\\)$"),vG=new RegExp("^hsl\\("+[Kp,Zo,Zo]+"\\)$"),bG=new RegExp("^hsla\\("+[Kp,Zo,Zo,Kp]+"\\)$"),h6={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};pv(Ff,Sl,{copy:function(e){return Object.assign(new this.constructor,this,e)},displayable:function(){return this.rgb().displayable()},hex:m6,formatHex:m6,formatHsl:yG,formatRgb:g6,toString:g6});function m6(){return this.rgb().formatHex()}function yG(){return a7(this).formatHsl()}function g6(){return this.rgb().formatRgb()}function Sl(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=dG.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?v6(t):n===3?new Ga(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?Bm(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?Bm(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=pG.exec(e))?new Ga(t[1],t[2],t[3],1):(t=hG.exec(e))?new Ga(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=mG.exec(e))?Bm(t[1],t[2],t[3],t[4]):(t=gG.exec(e))?Bm(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=vG.exec(e))?x6(t[1],t[2]/100,t[3]/100,1):(t=bG.exec(e))?x6(t[1],t[2]/100,t[3]/100,t[4]):h6.hasOwnProperty(e)?v6(h6[e]):e==="transparent"?new Ga(NaN,NaN,NaN,0):null}function v6(e){return new Ga(e>>16&255,e>>8&255,e&255,1)}function Bm(e,t,n,r){return r<=0&&(e=t=n=NaN),new Ga(e,t,n,r)}function r7(e){return e instanceof Ff||(e=Sl(e)),e?(e=e.rgb(),new Ga(e.r,e.g,e.b,e.opacity)):new Ga}function vf(e,t,n,r){return arguments.length===1?r7(e):new Ga(e,t,n,r==null?1:r)}function Ga(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}pv(Ga,vf,m2(Ff,{brighter:function(e){return e=e==null?gf:Math.pow(gf,e),new Ga(this.r*e,this.g*e,this.b*e,this.opacity)},darker:function(e){return e=e==null?Ru:Math.pow(Ru,e),new Ga(this.r*e,this.g*e,this.b*e,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:b6,formatHex:b6,formatRgb:y6,toString:y6}));function b6(){return"#"+Vy(this.r)+Vy(this.g)+Vy(this.b)}function y6(){var e=this.opacity;return e=isNaN(e)?1:Math.max(0,Math.min(1,e)),(e===1?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(e===1?")":", "+e+")")}function Vy(e){return e=Math.max(0,Math.min(255,Math.round(e)||0)),(e<16?"0":"")+e.toString(16)}function x6(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new jo(e,t,n,r)}function a7(e){if(e instanceof jo)return new jo(e.h,e.s,e.l,e.opacity);if(e instanceof Ff||(e=Sl(e)),!e)return new jo;if(e instanceof jo)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,a=Math.min(t,n,r),i=Math.max(t,n,r),o=NaN,s=i-a,l=(i+a)/2;return s?(t===i?o=(n-r)/s+(n<r)*6:n===i?o=(r-t)/s+2:o=(t-n)/s+4,s/=l<.5?i+a:2-i-a,o*=60):s=l>0&&l<1?0:o,new jo(o,s,l,e.opacity)}function xG(e,t,n,r){return arguments.length===1?a7(e):new jo(e,t,n,r==null?1:r)}function jo(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}pv(jo,xG,m2(Ff,{brighter:function(e){return e=e==null?gf:Math.pow(gf,e),new jo(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=e==null?Ru:Math.pow(Ru,e),new jo(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,a=2*n-r;return new Ga(jy(e>=240?e-240:e+120,a,r),jy(e,a,r),jy(e<120?e+240:e-120,a,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var e=this.opacity;return e=isNaN(e)?1:Math.max(0,Math.min(1,e)),(e===1?"hsl(":"hsla(")+(this.h||0)+", "+(this.s||0)*100+"%, "+(this.l||0)*100+"%"+(e===1?")":", "+e+")")}}));function jy(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}var wG=Math.PI/180,_G=180/Math.PI,i7=-.14861,g2=1.78277,v2=-.29227,hv=-.90649,Qp=1.97294,w6=Qp*hv,_6=Qp*g2,E6=g2*v2-hv*i7;function EG(e){if(e instanceof xu)return new xu(e.h,e.s,e.l,e.opacity);e instanceof Ga||(e=r7(e));var t=e.r/255,n=e.g/255,r=e.b/255,a=(E6*r+w6*t-_6*n)/(E6+w6-_6),i=r-a,o=(Qp*(n-a)-v2*i)/hv,s=Math.sqrt(o*o+i*i)/(Qp*a*(1-a)),l=s?Math.atan2(o,i)*_G-120:NaN;return new xu(l<0?l+360:l,s,a,e.opacity)}function K1(e,t,n,r){return arguments.length===1?EG(e):new xu(e,t,n,r==null?1:r)}function xu(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}pv(xu,K1,m2(Ff,{brighter:function(e){return e=e==null?gf:Math.pow(gf,e),new xu(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=e==null?Ru:Math.pow(Ru,e),new xu(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=isNaN(this.h)?0:(this.h+120)*wG,t=+this.l,n=isNaN(this.s)?0:this.s*t*(1-t),r=Math.cos(e),a=Math.sin(e);return new Ga(255*(t+n*(i7*r+g2*a)),255*(t+n*(v2*r+hv*a)),255*(t+n*(Qp*r)),this.opacity)}}));function o7(e){return typeof e=="string"?!!Sl(e):!1}function Ko(e){var t=Sl(e),n=[0,0,0,0];return t!=null&&(n[0]=t.r/255,n[1]=t.g/255,n[2]=t.b/255,n[3]=t.opacity),n}function Go(e){var t=e&&e[0],n=e&&e[1],r=e&&e[2],a=t+n*256+r*65536-1;return a}function Jp(e){return[e+1&255,e+1>>8&255,e+1>>8>>8&255]}function bg(e){var t=Hn.document.createElement("canvas"),n=t.getContext("2d");t.width=256,t.height=1;for(var r=n.createLinearGradient(0,0,256,1),a=null,i=e.positions[0],o=e.positions[e.positions.length-1],s=0;s<e.colors.length;++s){var l=(e.positions[s]-i)/(o-i);r.addColorStop(l,e.colors[s])}if(n.fillStyle=r,n.fillRect(0,0,256,1),bi)return a=new Uint8ClampedArray(n.getImageData(0,0,256,1).data),{data:a,width:256,height:1};a=n.getImageData(0,0,256,1).data;for(var u=n.createImageData(256,1),c=0;c<u.data.length;c+=4)u.data[c+0]=a[c+0],u.data[c+1]=a[c+1],u.data[c+2]=a[c+2],u.data[c+3]=a[c+3];return u}var yg;(function(e){e.CENTER="center",e.TOP="top",e["TOP-LEFT"]="top-left",e["TOP-RIGHT"]="top-right",e.BOTTOM="bottom",e["BOTTOM-LEFT"]="bottom-left",e.LEFT="left",e.RIGHT="right"})(yg||(yg={}));var xg={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function s7(e,t,n){var r=e.classList;for(var a in xg)xg.hasOwnProperty(a)&&r.remove("l7-".concat(n,"-anchor-").concat(a));r.add("l7-".concat(n,"-anchor-").concat(t))}function _i(e,t){return{enable:e,mask:255,func:{cmp:514,ref:t?1:0,mask:255}}}var ql={BACK:1029,FRONT:1028};function mv(e){switch(e){case"GAODE1.x":return ql.BACK;case"GAODE2.x":return ql.BACK;case"MAPBOX":return ql.FRONT;case"SIMPLE":return ql.FRONT;case"GLOBEL":return ql.BACK;case"L7MAP":return ql.FRONT;default:return ql.FRONT}}function b2(e,t){if(!e||!e.length)throw new Error("url is not allowed to be empty");var n=t.x,r=t.y,a=t.z;if(Array.isArray(e)){var i=Math.abs(n+r)%e.length;e=e[i]}return e.replace(/\{x\}/g,n.toString()).replace(/\{y\}/g,r.toString()).replace(/\{z\}/g,a.toString()).replace(/\{-y\}/g,(Math.pow(2,a)-r-1).toString())}var tf;(function(e){e.Realtime="realtime",e.Overlap="overlap",e.Replace="replace"})(tf||(tf={}));var mi;(function(e){e.Loading="Loading",e.Loaded="Loaded",e.Failure="Failure",e.Cancelled="Cancelled"})(mi||(mi={}));function kG(e,t){t===void 0&&(t={});var n=Number(e[0]),r=Number(e[1]),a=Number(e[2]),i=Number(e[3]);if(e.length===6)throw new Error("@turf/bbox-polygon does not support BBox with 6 positions");var o=[n,r],s=[n,i],l=[a,i],u=[a,r];return s2([[o,u,l,s,o]],t.properties,{bbox:e,id:t.id})}var l7=0,k6=1,gv=2;function SG(e){e.forEach(function(t){t.isCurrent&&(t.isVisible=t.isLoaded)})}function CG(e){e.forEach(function(t){t.properties.state=l7}),e.forEach(function(t){t.isCurrent&&!u7(t)&&y2(t)}),e.forEach(function(t){t.isVisible=Boolean(t.properties.state&gv)})}function TG(e){e.forEach(function(n){n.properties.state=l7}),e.forEach(function(n){n.isCurrent&&u7(n)});var t=e.slice().sort(function(n,r){return n.z-r.z});t.forEach(function(n){n.isVisible=Boolean(n.properties.state&gv),n.children.length&&(n.isVisible||n.properties.state&k6)?n.children.forEach(function(r){r.properties.state=k6}):n.isCurrent&&y2(n)})}function u7(e){for(;e;){if(e.isLoaded)return e.properties.state|=gv,!0;e=e.parent}return!1}function y2(e){e.children.forEach(function(t){t.isLoaded?t.properties.state|=gv:y2(t)})}var Sd,c7=[-1/0,-1/0,1/0,1/0],AG=.2,OG=5,MG=(Sd={},m(Sd,tf.Realtime,SG),m(Sd,tf.Overlap,CG),m(Sd,tf.Replace,TG),Sd),RG=function(){};function Q1(e,t,n){var r=Math.floor((e+180)/360*Math.pow(2,n)),a=Math.floor((1-Math.log(Math.tan(t*Math.PI/180)+1/Math.cos(t*Math.PI/180))/Math.PI)/2*Math.pow(2,n));return[r,a]}function S6(e,t,n){var r=e/Math.pow(2,n)*360-180,a=Math.PI-2*Math.PI*t/Math.pow(2,n),i=180/Math.PI*Math.atan(.5*(Math.exp(a)-Math.exp(-a)));return[r,i]}var PG=function(t,n,r){var a=S6(t,n,r),i=Le(a,2),o=i[0],s=i[1],l=S6(t+1,n+1,r),u=Le(l,2),c=u[0],f=u[1];return[o,f,c,s]};function IG(e){var t=e.zoom,n=e.latLonBounds,r=e.maxZoom,a=r===void 0?1/0:r,i=e.minZoom,o=i===void 0?0:i,s=e.zoomOffset,l=s===void 0?0:s,u=e.extent,c=u===void 0?c7:u,f=Math.ceil(t)+l;if(Number.isFinite(o)&&f<o)return[];Number.isFinite(a)&&f>a&&(f=a);for(var d=Le(n,4),p=d[0],h=d[1],g=d[2],v=d[3],b=[Math.max(p,c[0]),Math.max(h,c[1]),Math.min(g,c[2]),Math.min(v,c[3])],y=[],x=Q1(b[0],b[1],f),E=Le(x,2),T=E[0],C=E[1],I=Q1(b[2],b[3],f),P=Le(I,2),j=P[0],A=P[1],S=T;S<=j;S++)for(var M=A;M<=C;M++)y.push({x:S,y:M,z:f});var O=(j+T)/2,R=(C+A)/2,H=function(re,Y){return Math.abs(re-O)+Math.abs(Y-R)};return y.sort(function(ee,re){return H(ee.x,ee.y)-H(re.x,re.y)}),y}var LG=function(t,n,r){var a=Math.pow(2,r),i=a-1,o=a,s=t,l=n;return s<0?s=s+o:s>i&&(s=s%o),{warpX:s,warpY:l}},NG=function(){function e(t){Ae(this,e),m(this,"x",void 0),m(this,"y",void 0),m(this,"z",void 0),m(this,"tileSize",256),m(this,"isVisible",!1),m(this,"isCurrent",!1),m(this,"isVisibleChange",!1),m(this,"parentLayerIDList",[]),m(this,"layerIDList",[]),m(this,"parent",null),m(this,"children",[]),m(this,"data",null),m(this,"properties",{}),m(this,"xhrCancel",void 0),m(this,"loadStatus",void 0),m(this,"abortController",void 0),m(this,"loadDataId",0);var n=t.x,r=t.y,a=t.z,i=t.tileSize;this.x=n,this.y=r,this.z=a,this.tileSize=i}return Oe(e,[{key:"isLoading",get:function(){return this.loadStatus===mi.Loading}},{key:"isLoaded",get:function(){return this.loadStatus===mi.Loaded}},{key:"isFailure",get:function(){return this.loadStatus===mi.Failure}},{key:"isCancelled",get:function(){return this.loadStatus===mi.Cancelled}},{key:"isDone",get:function(){return[mi.Loaded,mi.Cancelled,mi.Failure].includes(this.loadStatus)}},{key:"bounds",get:function(){return PG(this.x,this.y,this.z)}},{key:"bboxPolygon",get:function(){var n=Le(this.bounds,4),r=n[0],a=n[1],i=n[2],o=n[3],s=[(i-r)/2,(o-a)/2],l=kG(this.bounds,{properties:{key:this.key,bbox:this.bounds,center:s,meta:`
      `.concat(this.key,`
      `)}});return l}},{key:"key",get:function(){var n="".concat(this.x,",").concat(this.y,",").concat(this.z);return n}},{key:"loadData",value:function(){var t=qn(pn.mark(function r(a){var i,o,s,l,u,c,f,d,p,h,g,v,b,y,x,E;return pn.wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return i=a.getData,o=a.onLoad,s=a.onError,this.loadDataId++,l=this.loadDataId,this.isLoading&&this.abortLoad(),this.abortController=new AbortController,this.loadStatus=mi.Loading,u=null,C.prev=7,f=this.x,d=this.y,p=this.z,h=this.bounds,g=this.tileSize,v=LG(f,d,p),b=v.warpX,y=v.warpY,x=this.abortController.signal,E={x:b,y,z:p,bounds:h,tileSize:g,signal:x},C.next=14,i(E,this);case 14:u=C.sent,C.next=20;break;case 17:C.prev=17,C.t0=C.catch(7),c=C.t0;case 20:if(l===this.loadDataId){C.next=22;break}return C.abrupt("return");case 22:if(!(this.isCancelled&&!u)){C.next=24;break}return C.abrupt("return");case 24:if(!(c||!u)){C.next=28;break}return this.loadStatus=mi.Failure,s(c,this),C.abrupt("return");case 28:this.loadStatus=mi.Loaded,this.data=u,o(this);case 31:case"end":return C.stop()}},r,this,[[7,17]])}));function n(r){return t.apply(this,arguments)}return n}()},{key:"reloadData",value:function(n){this.isLoading&&this.abortLoad(),this.loadData(n)}},{key:"abortLoad",value:function(){this.isLoaded||this.isCancelled||(this.loadStatus=mi.Cancelled,this.abortController.abort(),this.xhrCancel&&this.xhrCancel())}}]),e}(),Si={exports:{}};(function(e){var t=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function a(l,u,c){this.fn=l,this.context=u,this.once=c||!1}function i(l,u,c,f,d){if(typeof c!="function")throw new TypeError("The listener must be a function");var p=new a(c,f||l,d),h=n?n+u:u;return l._events[h]?l._events[h].fn?l._events[h]=[l._events[h],p]:l._events[h].push(p):(l._events[h]=p,l._eventsCount++),l}function o(l,u){--l._eventsCount===0?l._events=new r:delete l._events[u]}function s(){this._events=new r,this._eventsCount=0}s.prototype.eventNames=function(){var u=[],c,f;if(this._eventsCount===0)return u;for(f in c=this._events)t.call(c,f)&&u.push(n?f.slice(1):f);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(c)):u},s.prototype.listeners=function(u){var c=n?n+u:u,f=this._events[c];if(!f)return[];if(f.fn)return[f.fn];for(var d=0,p=f.length,h=new Array(p);d<p;d++)h[d]=f[d].fn;return h},s.prototype.listenerCount=function(u){var c=n?n+u:u,f=this._events[c];return f?f.fn?1:f.length:0},s.prototype.emit=function(u,c,f,d,p,h){var g=n?n+u:u;if(!this._events[g])return!1;var v=this._events[g],b=arguments.length,y,x;if(v.fn){switch(v.once&&this.removeListener(u,v.fn,void 0,!0),b){case 1:return v.fn.call(v.context),!0;case 2:return v.fn.call(v.context,c),!0;case 3:return v.fn.call(v.context,c,f),!0;case 4:return v.fn.call(v.context,c,f,d),!0;case 5:return v.fn.call(v.context,c,f,d,p),!0;case 6:return v.fn.call(v.context,c,f,d,p,h),!0}for(x=1,y=new Array(b-1);x<b;x++)y[x-1]=arguments[x];v.fn.apply(v.context,y)}else{var E=v.length,T;for(x=0;x<E;x++)switch(v[x].once&&this.removeListener(u,v[x].fn,void 0,!0),b){case 1:v[x].fn.call(v[x].context);break;case 2:v[x].fn.call(v[x].context,c);break;case 3:v[x].fn.call(v[x].context,c,f);break;case 4:v[x].fn.call(v[x].context,c,f,d);break;default:if(!y)for(T=1,y=new Array(b-1);T<b;T++)y[T-1]=arguments[T];v[x].fn.apply(v[x].context,y)}}return!0},s.prototype.on=function(u,c,f){return i(this,u,c,f,!1)},s.prototype.once=function(u,c,f){return i(this,u,c,f,!0)},s.prototype.removeListener=function(u,c,f,d){var p=n?n+u:u;if(!this._events[p])return this;if(!c)return o(this,p),this;var h=this._events[p];if(h.fn)h.fn===c&&(!d||h.once)&&(!f||h.context===f)&&o(this,p);else{for(var g=0,v=[],b=h.length;g<b;g++)(h[g].fn!==c||d&&!h[g].once||f&&h[g].context!==f)&&v.push(h[g]);v.length?this._events[p]=v.length===1?v[0]:v:o(this,p)}return this},s.prototype.removeAllListeners=function(u){var c;return u?(c=n?n+u:u,this._events[c]&&o(this,c)):(this._events=new r,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=n,s.EventEmitter=s,e.exports=s})(Si);var x2=Si.exports,FG=function(t,n){var r=vg(t),a=qp(r,n),i=360*3-180,o=85.0511287798065,s=[Math.max(a[0][0],-i),Math.max(a[0][1],-o),Math.min(a[1][0],i),Math.min(a[1][1],o)];return s},DG=function(t,n){var r=vg(t),a=vg(n),i=h2(r,a);return i};function Hs(e,t){var n=typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=BG(e))||t&&e&&typeof e.length=="number"){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(u){throw u},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i=!0,o=!1,s;return{s:function(){n=n.call(e)},n:function(){var u=n.next();return i=u.done,u},e:function(u){o=!0,s=u},f:function(){try{!i&&n.return!=null&&n.return()}finally{if(o)throw s}}}}function BG(e,t){if(!!e){if(typeof e=="string")return C6(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return C6(e,t)}}function C6(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function T6(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Gy(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?T6(Object(n),!0).forEach(function(r){m(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):T6(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function zG(e){var t=UG();return function(){var r=Ee(e),a;if(t){var i=Ee(this).constructor;a=Reflect.construct(r,arguments,i)}else a=r.apply(this,arguments);return Mt(this,a)}}function UG(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var $G=function(e){Ct(n,e);var t=zG(n);function n(r){var a;return Ae(this,n),a=t.call(this),m(D(a),"currentTiles",[]),m(D(a),"options",void 0),m(D(a),"cacheTiles",new Map),m(D(a),"lastViewStates",void 0),m(D(a),"onTileLoad",function(i){a.emit("tile-loaded",i),a.updateTileVisible()}),m(D(a),"onTileError",function(i,o){a.emit("tile-error",{error:i,tile:o}),a.updateTileVisible()}),m(D(a),"onTileUnload",function(i){a.emit("tile-unload",i)}),a.options={tileSize:256,minZoom:0,maxZoom:1/0,zoomOffset:0,extent:c7,getTileData:RG,updateStrategy:tf.Replace},a.updateOptions(r),a}return Oe(n,[{key:"isLoaded",get:function(){return this.currentTiles.every(function(a){return a.isDone})}},{key:"tiles",get:function(){var a=Array.from(this.cacheTiles.values()).sort(function(i,o){return i.z-o.z});return a}},{key:"updateOptions",value:function(a){var i=a.minZoom===void 0?this.options.minZoom:Math.ceil(a.minZoom),o=a.maxZoom===void 0?this.options.maxZoom:Math.floor(a.maxZoom);this.options=Gy(Gy(Gy({},this.options),a),{},{minZoom:i,maxZoom:o})}},{key:"update",value:function(a,i){var o=this,s=Math.ceil(a);if(!(this.lastViewStates&&this.lastViewStates.zoom===s&&DG(this.lastViewStates.latLonBoundsBuffer,i))){var l=FG(i,AG);this.lastViewStates={zoom:s,latLonBounds:i,latLonBoundsBuffer:l};var u=!1,c=this.getTileIndices(s,l);this.currentTiles=c.map(function(f){var d=f.x,p=f.y,h=f.z,g=o.getTile(d,p,h);if(g){var v,b,y=((v=g)===null||v===void 0?void 0:v.isFailure)||((b=g)===null||b===void 0?void 0:b.isCancelled);return y&&g.loadData({getData:o.options.getTileData,onLoad:o.onTileLoad,onError:o.onTileError}),g}return g=o.createTile(d,p,h),u=!0,g}),u&&(this.resizeCacheTiles(),this.rebuildTileTree()),this.updateTileVisible(),this.pruneRequests()}}},{key:"reloadAll",value:function(){var a=Hs(this.cacheTiles),i;try{for(a.s();!(i=a.n()).done;){var o=Le(i.value,2),s=o[0],l=o[1];this.currentTiles.includes(l)||(this.cacheTiles.delete(s),this.onTileUnload(l)),this.onTileUnload(l),l.loadData({getData:this.options.getTileData,onLoad:this.onTileLoad,onError:this.onTileError})}}catch(u){a.e(u)}finally{a.f()}}},{key:"pruneRequests",value:function(){var a=[],i=Hs(this.cacheTiles.values()),o;try{for(i.s();!(o=i.n()).done;){var s=o.value;s.isLoading&&!s.isCurrent&&!s.isVisible&&a.push(s)}}catch(u){i.e(u)}finally{i.f()}for(;a.length>0;){var l=a.shift();l.abortLoad()}}},{key:"destroy",value:function(){var a=Hs(this.cacheTiles.values()),i;try{for(a.s();!(i=a.n()).done;){var o=i.value;o.isLoading&&o.abortLoad()}}catch(s){a.e(s)}finally{a.f()}this.cacheTiles.clear(),this.currentTiles=[],this.removeAllListeners()}},{key:"updateTileVisible",value:function(){var a=this.options.updateStrategy,i=new Map,o=Hs(this.cacheTiles.values()),s;try{for(o.s();!(s=o.n()).done;){var l=s.value;i.set(l.key,l.isVisible),l.isCurrent=!1,l.isVisible=!1}}catch(h){o.e(h)}finally{o.f()}var u=Hs(this.currentTiles),c;try{for(u.s();!(c=u.n()).done;){var f=c.value;f.isCurrent=!0,f.isVisible=!0}}catch(h){u.e(h)}finally{u.f()}var d=Array.from(this.cacheTiles.values());typeof a=="function"?a(d):MG[a](d);var p=!1;Array.from(this.cacheTiles.values()).forEach(function(h){h.isVisible!==i.get(h.key)?(h.isVisibleChange=!0,p=!0):h.isVisibleChange=!1}),p&&this.emit("tile-update")}},{key:"getTileIndices",value:function(a,i){var o=this.options,s=o.tileSize,l=o.extent,u=o.zoomOffset,c=Math.floor(this.options.maxZoom),f=Math.ceil(this.options.minZoom),d=IG({maxZoom:c,minZoom:f,zoomOffset:u,tileSize:s,zoom:a,latLonBounds:i,extent:l});return d}},{key:"getTileId",value:function(a,i,o){var s="".concat(a,",").concat(i,",").concat(o);return s}},{key:"getTile",value:function(a,i,o){var s=this.getTileId(a,i,o),l=this.cacheTiles.get(s);return l}},{key:"createTile",value:function(a,i,o){var s=this.getTileId(a,i,o),l=new NG({x:a,y:i,z:o,tileSize:this.options.tileSize});return this.cacheTiles.set(s,l),l.loadData({getData:this.options.getTileData,onLoad:this.onTileLoad,onError:this.onTileError}),l}},{key:"resizeCacheTiles",value:function(){var a=OG*this.currentTiles.length,i=this.cacheTiles.size>a;if(i){var o=Hs(this.cacheTiles),s;try{for(o.s();!(s=o.n()).done;){var l=Le(s.value,2),u=l[0],c=l[1];if(!c.isVisible&&!this.currentTiles.includes(c)&&(this.cacheTiles.delete(u),this.onTileUnload(c)),this.cacheTiles.size<=a)break}}catch(f){o.e(f)}finally{o.f()}}}},{key:"rebuildTileTree",value:function(){var a=Hs(this.cacheTiles.values()),i;try{for(a.s();!(i=a.n()).done;){var o=i.value;o.parent=null,o.children.length=0}}catch(f){a.e(f)}finally{a.f()}var s=Hs(this.cacheTiles.values()),l;try{for(s.s();!(l=s.n()).done;){var u=l.value,c=this.getNearestAncestor(u.x,u.y,u.z);u.parent=c,c!=null&&c.children&&c.children.push(u)}}catch(f){s.e(f)}finally{s.f()}}},{key:"getNearestAncestor",value:function(a,i,o){for(;o>this.options.minZoom;){a=Math.floor(a/2),i=Math.floor(i/2),o=o-1;var s=this.getTile(a,i,o);if(s)return s}return null}}]),n}(x2);function f7(e,t){var n=t.extent,r=n===void 0?[121.168,30.2828,121.384,30.4219]:n,a=new Promise(function(o){e instanceof HTMLImageElement||Zj(e)?o([e]):VG(e,function(s){o(s)})}),i={originData:e,images:a,_id:1,dataArray:[{_id:0,coordinates:[[r[0],r[1]],[r[2],r[3]]]}]};return i}function VG(e,t){var n=e,r=[];if(typeof n=="string")q1({url:n},function(o,s){s&&(r.push(s),t(r))});else{var a=n.length,i=0;n.forEach(function(o){q1({url:o},function(s,l){i++,l&&r.push(l),i===a&&t(r)})})}return f7}var jG=nf;function nf(e,t){this.x=e,this.y=t}nf.prototype={clone:function(){return new nf(this.x,this.y)},add:function(e){return this.clone()._add(e)},sub:function(e){return this.clone()._sub(e)},multByPoint:function(e){return this.clone()._multByPoint(e)},divByPoint:function(e){return this.clone()._divByPoint(e)},mult:function(e){return this.clone()._mult(e)},div:function(e){return this.clone()._div(e)},rotate:function(e){return this.clone()._rotate(e)},rotateAround:function(e,t){return this.clone()._rotateAround(e,t)},matMult:function(e){return this.clone()._matMult(e)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(e){return this.x===e.x&&this.y===e.y},dist:function(e){return Math.sqrt(this.distSqr(e))},distSqr:function(e){var t=e.x-this.x,n=e.y-this.y;return t*t+n*n},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(e){return Math.atan2(this.y-e.y,this.x-e.x)},angleWith:function(e){return this.angleWithSep(e.x,e.y)},angleWithSep:function(e,t){return Math.atan2(this.x*t-this.y*e,this.x*e+this.y*t)},_matMult:function(e){var t=e[0]*this.x+e[1]*this.y,n=e[2]*this.x+e[3]*this.y;return this.x=t,this.y=n,this},_add:function(e){return this.x+=e.x,this.y+=e.y,this},_sub:function(e){return this.x-=e.x,this.y-=e.y,this},_mult:function(e){return this.x*=e,this.y*=e,this},_div:function(e){return this.x/=e,this.y/=e,this},_multByPoint:function(e){return this.x*=e.x,this.y*=e.y,this},_divByPoint:function(e){return this.x/=e.x,this.y/=e.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var e=this.y;return this.y=this.x,this.x=-e,this},_rotate:function(e){var t=Math.cos(e),n=Math.sin(e),r=t*this.x-n*this.y,a=n*this.x+t*this.y;return this.x=r,this.y=a,this},_rotateAround:function(e,t){var n=Math.cos(e),r=Math.sin(e),a=t.x+n*(this.x-t.x)-r*(this.y-t.y),i=t.y+r*(this.x-t.x)+n*(this.y-t.y);return this.x=a,this.y=i,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}};nf.convert=function(e){return e instanceof nf?e:Array.isArray(e)?new nf(e[0],e[1]):e};var GG=jG,HG=bf;function bf(e,t,n,r,a){this.properties={},this.extent=n,this.type=0,this._pbf=e,this._geometry=-1,this._keys=r,this._values=a,e.readFields(WG,this,t)}function WG(e,t,n){e==1?t.id=n.readVarint():e==2?XG(n,t):e==3?t.type=n.readVarint():e==4&&(t._geometry=n.pos)}function XG(e,t){for(var n=e.readVarint()+e.pos;e.pos<n;){var r=t._keys[e.readVarint()],a=t._values[e.readVarint()];t.properties[r]=a}}bf.types=["Unknown","Point","LineString","Polygon"];bf.prototype.loadGeometry=function(){var e=this._pbf;e.pos=this._geometry;for(var t=e.readVarint()+e.pos,n=1,r=0,a=0,i=0,o=[],s;e.pos<t;){if(r<=0){var l=e.readVarint();n=l&7,r=l>>3}if(r--,n===1||n===2)a+=e.readSVarint(),i+=e.readSVarint(),n===1&&(s&&o.push(s),s=[]),s.push(new GG(a,i));else if(n===7)s&&s.push(s[0].clone());else throw new Error("unknown command "+n)}return s&&o.push(s),o};bf.prototype.bbox=function(){var e=this._pbf;e.pos=this._geometry;for(var t=e.readVarint()+e.pos,n=1,r=0,a=0,i=0,o=1/0,s=-1/0,l=1/0,u=-1/0;e.pos<t;){if(r<=0){var c=e.readVarint();n=c&7,r=c>>3}if(r--,n===1||n===2)a+=e.readSVarint(),i+=e.readSVarint(),a<o&&(o=a),a>s&&(s=a),i<l&&(l=i),i>u&&(u=i);else if(n!==7)throw new Error("unknown command "+n)}return[o,l,s,u]};bf.prototype.toGeoJSON=function(e,t,n){var r=this.extent*Math.pow(2,n),a=this.extent*e,i=this.extent*t,o=this.loadGeometry(),s=bf.types[this.type],l,u;function c(p){for(var h=0;h<p.length;h++){var g=p[h],v=180-(g.y+i)*360/r;p[h]=[(g.x+a)*360/r-180,360/Math.PI*Math.atan(Math.exp(v*Math.PI/180))-90]}}switch(this.type){case 1:var f=[];for(l=0;l<o.length;l++)f[l]=o[l][0];o=f,c(o);break;case 2:for(l=0;l<o.length;l++)c(o[l]);break;case 3:for(o=YG(o),l=0;l<o.length;l++)for(u=0;u<o[l].length;u++)c(o[l][u]);break}o.length===1?o=o[0]:s="Multi"+s;var d={type:"Feature",geometry:{type:s,coordinates:o},properties:this.properties};return"id"in this&&(d.id=this.id),d};function YG(e){var t=e.length;if(t<=1)return[e];for(var n=[],r,a,i=0;i<t;i++){var o=ZG(e[i]);o!==0&&(a===void 0&&(a=o<0),a===o<0?(r&&n.push(r),r=[e[i]]):r.push(e[i]))}return r&&n.push(r),n}function ZG(e){for(var t=0,n=0,r=e.length,a=r-1,i,o;n<r;a=n++)i=e[n],o=e[a],t+=(o.x-i.x)*(i.y+o.y);return t}var qG=HG,KG=d7;function d7(e,t){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=e,this._keys=[],this._values=[],this._features=[],e.readFields(QG,this,t),this.length=this._features.length}function QG(e,t,n){e===15?t.version=n.readVarint():e===1?t.name=n.readString():e===5?t.extent=n.readVarint():e===2?t._features.push(n.pos):e===3?t._keys.push(n.readString()):e===4&&t._values.push(JG(n))}function JG(e){for(var t=null,n=e.readVarint()+e.pos;e.pos<n;){var r=e.readVarint()>>3;t=r===1?e.readString():r===2?e.readFloat():r===3?e.readDouble():r===4?e.readVarint64():r===5?e.readVarint():r===6?e.readSVarint():r===7?e.readBoolean():null}return t}d7.prototype.feature=function(e){if(e<0||e>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[e];var t=this._pbf.readVarint()+this._pbf.pos;return new qG(this._pbf,t,this.extent,this._keys,this._values)};var eH=KG,tH=nH;function nH(e,t){this.layers=e.readFields(rH,{},t)}function rH(e,t,n){if(e===3){var r=new eH(n,n.readVarint()+n.pos);r.length&&(t[r.name]=r)}}var aH=tH,w2={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */w2.read=function(e,t,n,r,a){var i,o,s=a*8-r-1,l=(1<<s)-1,u=l>>1,c=-7,f=n?a-1:0,d=n?-1:1,p=e[t+f];for(f+=d,i=p&(1<<-c)-1,p>>=-c,c+=s;c>0;i=i*256+e[t+f],f+=d,c-=8);for(o=i&(1<<-c)-1,i>>=-c,c+=r;c>0;o=o*256+e[t+f],f+=d,c-=8);if(i===0)i=1-u;else{if(i===l)return o?NaN:(p?-1:1)*(1/0);o=o+Math.pow(2,r),i=i-u}return(p?-1:1)*o*Math.pow(2,i-r)};w2.write=function(e,t,n,r,a,i){var o,s,l,u=i*8-a-1,c=(1<<u)-1,f=c>>1,d=a===23?Math.pow(2,-24)-Math.pow(2,-77):0,p=r?0:i-1,h=r?1:-1,g=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,o=c):(o=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-o))<1&&(o--,l*=2),o+f>=1?t+=d/l:t+=d*Math.pow(2,1-f),t*l>=2&&(o++,l/=2),o+f>=c?(s=0,o=c):o+f>=1?(s=(t*l-1)*Math.pow(2,a),o=o+f):(s=t*Math.pow(2,f-1)*Math.pow(2,a),o=0));a>=8;e[n+p]=s&255,p+=h,s/=256,a-=8);for(o=o<<a|s,u+=a;u>0;e[n+p]=o&255,p+=h,o/=256,u-=8);e[n+p-h]|=g*128};var iH=zn,zm=w2;function zn(e){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(e)?e:new Uint8Array(e||0),this.pos=0,this.type=0,this.length=this.buf.length}zn.Varint=0;zn.Fixed64=1;zn.Bytes=2;zn.Fixed32=5;var J1=(1<<16)*(1<<16),A6=1/J1,oH=12,p7=typeof TextDecoder=="undefined"?null:new TextDecoder("utf8");zn.prototype={destroy:function(){this.buf=null},readFields:function(e,t,n){for(n=n||this.length;this.pos<n;){var r=this.readVarint(),a=r>>3,i=this.pos;this.type=r&7,e(a,t,this),this.pos===i&&this.skip(r)}return t},readMessage:function(e,t){return this.readFields(e,t,this.readVarint()+this.pos)},readFixed32:function(){var e=Um(this.buf,this.pos);return this.pos+=4,e},readSFixed32:function(){var e=M6(this.buf,this.pos);return this.pos+=4,e},readFixed64:function(){var e=Um(this.buf,this.pos)+Um(this.buf,this.pos+4)*J1;return this.pos+=8,e},readSFixed64:function(){var e=Um(this.buf,this.pos)+M6(this.buf,this.pos+4)*J1;return this.pos+=8,e},readFloat:function(){var e=zm.read(this.buf,this.pos,!0,23,4);return this.pos+=4,e},readDouble:function(){var e=zm.read(this.buf,this.pos,!0,52,8);return this.pos+=8,e},readVarint:function(e){var t=this.buf,n,r;return r=t[this.pos++],n=r&127,r<128||(r=t[this.pos++],n|=(r&127)<<7,r<128)||(r=t[this.pos++],n|=(r&127)<<14,r<128)||(r=t[this.pos++],n|=(r&127)<<21,r<128)?n:(r=t[this.pos],n|=(r&15)<<28,sH(n,e,this))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var e=this.readVarint();return e%2===1?(e+1)/-2:e/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var e=this.readVarint()+this.pos,t=this.pos;return this.pos=e,e-t>=oH&&p7?wH(this.buf,t,e):xH(this.buf,t,e)},readBytes:function(){var e=this.readVarint()+this.pos,t=this.buf.subarray(this.pos,e);return this.pos=e,t},readPackedVarint:function(e,t){if(this.type!==zn.Bytes)return e.push(this.readVarint(t));var n=ls(this);for(e=e||[];this.pos<n;)e.push(this.readVarint(t));return e},readPackedSVarint:function(e){if(this.type!==zn.Bytes)return e.push(this.readSVarint());var t=ls(this);for(e=e||[];this.pos<t;)e.push(this.readSVarint());return e},readPackedBoolean:function(e){if(this.type!==zn.Bytes)return e.push(this.readBoolean());var t=ls(this);for(e=e||[];this.pos<t;)e.push(this.readBoolean());return e},readPackedFloat:function(e){if(this.type!==zn.Bytes)return e.push(this.readFloat());var t=ls(this);for(e=e||[];this.pos<t;)e.push(this.readFloat());return e},readPackedDouble:function(e){if(this.type!==zn.Bytes)return e.push(this.readDouble());var t=ls(this);for(e=e||[];this.pos<t;)e.push(this.readDouble());return e},readPackedFixed32:function(e){if(this.type!==zn.Bytes)return e.push(this.readFixed32());var t=ls(this);for(e=e||[];this.pos<t;)e.push(this.readFixed32());return e},readPackedSFixed32:function(e){if(this.type!==zn.Bytes)return e.push(this.readSFixed32());var t=ls(this);for(e=e||[];this.pos<t;)e.push(this.readSFixed32());return e},readPackedFixed64:function(e){if(this.type!==zn.Bytes)return e.push(this.readFixed64());var t=ls(this);for(e=e||[];this.pos<t;)e.push(this.readFixed64());return e},readPackedSFixed64:function(e){if(this.type!==zn.Bytes)return e.push(this.readSFixed64());var t=ls(this);for(e=e||[];this.pos<t;)e.push(this.readSFixed64());return e},skip:function(e){var t=e&7;if(t===zn.Varint)for(;this.buf[this.pos++]>127;);else if(t===zn.Bytes)this.pos=this.readVarint()+this.pos;else if(t===zn.Fixed32)this.pos+=4;else if(t===zn.Fixed64)this.pos+=8;else throw new Error("Unimplemented type: "+t)},writeTag:function(e,t){this.writeVarint(e<<3|t)},realloc:function(e){for(var t=this.length||16;t<this.pos+e;)t*=2;if(t!==this.length){var n=new Uint8Array(t);n.set(this.buf),this.buf=n,this.length=t}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(e){this.realloc(4),cc(this.buf,e,this.pos),this.pos+=4},writeSFixed32:function(e){this.realloc(4),cc(this.buf,e,this.pos),this.pos+=4},writeFixed64:function(e){this.realloc(8),cc(this.buf,e&-1,this.pos),cc(this.buf,Math.floor(e*A6),this.pos+4),this.pos+=8},writeSFixed64:function(e){this.realloc(8),cc(this.buf,e&-1,this.pos),cc(this.buf,Math.floor(e*A6),this.pos+4),this.pos+=8},writeVarint:function(e){if(e=+e||0,e>268435455||e<0){lH(e,this);return}this.realloc(4),this.buf[this.pos++]=e&127|(e>127?128:0),!(e<=127)&&(this.buf[this.pos++]=(e>>>=7)&127|(e>127?128:0),!(e<=127)&&(this.buf[this.pos++]=(e>>>=7)&127|(e>127?128:0),!(e<=127)&&(this.buf[this.pos++]=e>>>7&127)))},writeSVarint:function(e){this.writeVarint(e<0?-e*2-1:e*2)},writeBoolean:function(e){this.writeVarint(Boolean(e))},writeString:function(e){e=String(e),this.realloc(e.length*4),this.pos++;var t=this.pos;this.pos=_H(this.buf,e,this.pos);var n=this.pos-t;n>=128&&O6(t,n,this),this.pos=t-1,this.writeVarint(n),this.pos+=n},writeFloat:function(e){this.realloc(4),zm.write(this.buf,e,this.pos,!0,23,4),this.pos+=4},writeDouble:function(e){this.realloc(8),zm.write(this.buf,e,this.pos,!0,52,8),this.pos+=8},writeBytes:function(e){var t=e.length;this.writeVarint(t),this.realloc(t);for(var n=0;n<t;n++)this.buf[this.pos++]=e[n]},writeRawMessage:function(e,t){this.pos++;var n=this.pos;e(t,this);var r=this.pos-n;r>=128&&O6(n,r,this),this.pos=n-1,this.writeVarint(r),this.pos+=r},writeMessage:function(e,t,n){this.writeTag(e,zn.Bytes),this.writeRawMessage(t,n)},writePackedVarint:function(e,t){t.length&&this.writeMessage(e,fH,t)},writePackedSVarint:function(e,t){t.length&&this.writeMessage(e,dH,t)},writePackedBoolean:function(e,t){t.length&&this.writeMessage(e,mH,t)},writePackedFloat:function(e,t){t.length&&this.writeMessage(e,pH,t)},writePackedDouble:function(e,t){t.length&&this.writeMessage(e,hH,t)},writePackedFixed32:function(e,t){t.length&&this.writeMessage(e,gH,t)},writePackedSFixed32:function(e,t){t.length&&this.writeMessage(e,vH,t)},writePackedFixed64:function(e,t){t.length&&this.writeMessage(e,bH,t)},writePackedSFixed64:function(e,t){t.length&&this.writeMessage(e,yH,t)},writeBytesField:function(e,t){this.writeTag(e,zn.Bytes),this.writeBytes(t)},writeFixed32Field:function(e,t){this.writeTag(e,zn.Fixed32),this.writeFixed32(t)},writeSFixed32Field:function(e,t){this.writeTag(e,zn.Fixed32),this.writeSFixed32(t)},writeFixed64Field:function(e,t){this.writeTag(e,zn.Fixed64),this.writeFixed64(t)},writeSFixed64Field:function(e,t){this.writeTag(e,zn.Fixed64),this.writeSFixed64(t)},writeVarintField:function(e,t){this.writeTag(e,zn.Varint),this.writeVarint(t)},writeSVarintField:function(e,t){this.writeTag(e,zn.Varint),this.writeSVarint(t)},writeStringField:function(e,t){this.writeTag(e,zn.Bytes),this.writeString(t)},writeFloatField:function(e,t){this.writeTag(e,zn.Fixed32),this.writeFloat(t)},writeDoubleField:function(e,t){this.writeTag(e,zn.Fixed64),this.writeDouble(t)},writeBooleanField:function(e,t){this.writeVarintField(e,Boolean(t))}};function sH(e,t,n){var r=n.buf,a,i;if(i=r[n.pos++],a=(i&112)>>4,i<128||(i=r[n.pos++],a|=(i&127)<<3,i<128)||(i=r[n.pos++],a|=(i&127)<<10,i<128)||(i=r[n.pos++],a|=(i&127)<<17,i<128)||(i=r[n.pos++],a|=(i&127)<<24,i<128)||(i=r[n.pos++],a|=(i&1)<<31,i<128))return uc(e,a,t);throw new Error("Expected varint not more than 10 bytes")}function ls(e){return e.type===zn.Bytes?e.readVarint()+e.pos:e.pos+1}function uc(e,t,n){return n?t*4294967296+(e>>>0):(t>>>0)*4294967296+(e>>>0)}function lH(e,t){var n,r;if(e>=0?(n=e%4294967296|0,r=e/4294967296|0):(n=~(-e%4294967296),r=~(-e/4294967296),n^4294967295?n=n+1|0:(n=0,r=r+1|0)),e>=0xffffffffffffffff||e<-0xffffffffffffffff)throw new Error("Given varint doesn't fit into 10 bytes");t.realloc(10),uH(n,r,t),cH(r,t)}function uH(e,t,n){n.buf[n.pos++]=e&127|128,e>>>=7,n.buf[n.pos++]=e&127|128,e>>>=7,n.buf[n.pos++]=e&127|128,e>>>=7,n.buf[n.pos++]=e&127|128,e>>>=7,n.buf[n.pos]=e&127}function cH(e,t){var n=(e&7)<<4;t.buf[t.pos++]|=n|((e>>>=3)?128:0),e&&(t.buf[t.pos++]=e&127|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=e&127|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=e&127|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=e&127|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=e&127)))))}function O6(e,t,n){var r=t<=16383?1:t<=2097151?2:t<=268435455?3:Math.floor(Math.log(t)/(Math.LN2*7));n.realloc(r);for(var a=n.pos-1;a>=e;a--)n.buf[a+r]=n.buf[a]}function fH(e,t){for(var n=0;n<e.length;n++)t.writeVarint(e[n])}function dH(e,t){for(var n=0;n<e.length;n++)t.writeSVarint(e[n])}function pH(e,t){for(var n=0;n<e.length;n++)t.writeFloat(e[n])}function hH(e,t){for(var n=0;n<e.length;n++)t.writeDouble(e[n])}function mH(e,t){for(var n=0;n<e.length;n++)t.writeBoolean(e[n])}function gH(e,t){for(var n=0;n<e.length;n++)t.writeFixed32(e[n])}function vH(e,t){for(var n=0;n<e.length;n++)t.writeSFixed32(e[n])}function bH(e,t){for(var n=0;n<e.length;n++)t.writeFixed64(e[n])}function yH(e,t){for(var n=0;n<e.length;n++)t.writeSFixed64(e[n])}function Um(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16)+e[t+3]*16777216}function cc(e,t,n){e[n]=t,e[n+1]=t>>>8,e[n+2]=t>>>16,e[n+3]=t>>>24}function M6(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16)+(e[t+3]<<24)}function xH(e,t,n){for(var r="",a=t;a<n;){var i=e[a],o=null,s=i>239?4:i>223?3:i>191?2:1;if(a+s>n)break;var l,u,c;s===1?i<128&&(o=i):s===2?(l=e[a+1],(l&192)===128&&(o=(i&31)<<6|l&63,o<=127&&(o=null))):s===3?(l=e[a+1],u=e[a+2],(l&192)===128&&(u&192)===128&&(o=(i&15)<<12|(l&63)<<6|u&63,(o<=2047||o>=55296&&o<=57343)&&(o=null))):s===4&&(l=e[a+1],u=e[a+2],c=e[a+3],(l&192)===128&&(u&192)===128&&(c&192)===128&&(o=(i&15)<<18|(l&63)<<12|(u&63)<<6|c&63,(o<=65535||o>=1114112)&&(o=null))),o===null?(o=65533,s=1):o>65535&&(o-=65536,r+=String.fromCharCode(o>>>10&1023|55296),o=56320|o&1023),r+=String.fromCharCode(o),a+=s}return r}function wH(e,t,n){return p7.decode(e.subarray(t,n))}function _H(e,t,n){for(var r=0,a,i;r<t.length;r++){if(a=t.charCodeAt(r),a>55295&&a<57344)if(i)if(a<56320){e[n++]=239,e[n++]=191,e[n++]=189,i=a;continue}else a=i-55296<<10|a-56320|65536,i=null;else{a>56319||r+1===t.length?(e[n++]=239,e[n++]=191,e[n++]=189):i=a;continue}else i&&(e[n++]=239,e[n++]=191,e[n++]=189,i=null);a<128?e[n++]=a:(a<2048?e[n++]=a>>6|192:(a<65536?e[n++]=a>>12|224:(e[n++]=a>>18|240,e[n++]=a>>12&63|128),e[n++]=a>>6&63|128),e[n++]=a&63|128)}return n}function R6(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Hy(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?R6(Object(n),!0).forEach(function(r){m(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):R6(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var EH={tileSize:256,minZoom:0,maxZoom:1/0,zoomOffset:0},P6=512;function kH(e,t,n){var r=e/Math.pow(2,n)*360-180,a=Math.PI-2*Math.PI*t/Math.pow(2,n),i=180/Math.PI*Math.atan(.5*(Math.exp(a)-Math.exp(-a)));return[r,i]}function SH(e){for(var t=0,n=0,r=e.length,a=r-1,i,o;n<r;a=n++)i=e[n],o=e[a],t+=(o.x-i.x)*(i.y+o.y);return t}function CH(e){var t=e.length;if(t<=1)return[e];for(var n=[],r,a,i=0;i<t;i++){var o=SH(e[i]);o!==0&&(a===void 0&&(a=o<0),a===o<0?(r&&n.push(r),r=[e[i]]):r.push(e[i]))}return r&&n.push(r),n}var TH=["Unknown","Point","LineString","Polygon"];function AH(e,t){var n=t.extent,r=t.loadGeometry(),a=t.type,i=t.properties,o=t.id,s=n*Math.pow(2,e),l=TH[a],u,c;function f(h){for(var g=0;g<h.length;g++){var v=h[g];h[g]=[v.x/s*P6,v.y/s*P6]}}switch(a){case 1:var d=[];for(u=0;u<r.length;u++)d[u]=r[u][0];r=d,f(r);break;case 2:for(u=0;u<r.length;u++)f(r[u]);break;case 3:for(r=CH(r),u=0;u<r.length;u++)for(c=0;c<r[u].length;c++)f(r[u][c]);break}r.length===1?r=r[0]:l="Multi"+l;var p={type:"Feature",geometry:{type:l,coordinates:r},properties:i,id:o,tileOrigin:[0,0],coord:""};return p}var OH=function(){var e=qn(pn.mark(function t(n,r,a,i){var o;return pn.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return o=b2(n,r),l.abrupt("return",new Promise(function(u){var c=p2({url:o},function(f,d){if(f||!d)u({layers:{}});else{for(var p=new aH(new iH(d)),h=kH(r.x,r.y,r.z),g=r.z,v=0,b=Object.keys(p.layers);v<b.length;v++){for(var y=b[v],x=[],E=p.layers[y],T=0;T<p.layers[y].length;T++){var C=p.layers[y].feature(T),I=void 0;i==="lnglat"?I=C.toGeoJSON(r.x,r.y,r.z):(I=AH(g,C),E.l7TileOrigin=h,E.l7TileCoord=i),x.push(I)}E.features=x}u(p)}});a.xhrCancel=function(){return c.abort()}}));case 2:case"end":return l.stop()}},t)}));return function(n,r,a,i){return e.apply(this,arguments)}}();function MH(e,t){var n=(t==null?void 0:t.coord)||"lnglat",r=function(o,s){return OH(e,o,s,n)},a=Hy(Hy(Hy({},EH),t),{},{getTileData:r});return{data:e,dataArray:[],tilesetOptions:a,isTile:!0}}function RH(e,t){var n=t.extent,r=t.width,a=t.height,i=t.min,o=t.max,s={_id:1,dataArray:[{_id:1,data:Array.from(e),width:r,height:a,min:i,max:o,coordinates:[[n[0],n[1]],[n[2],n[3]]]}]};return s}var wg;(function(e){e.IMAGE="image",e.ARRAYBUFFER="arraybuffer"})(wg||(wg={}));var PH=function(){var e=qn(pn.mark(function t(n,r,a,i){var o;return pn.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return o=b2(n,r),l.abrupt("return",new Promise(function(u,c){var f=aG({url:o},function(d,p){d?c(d):p&&u(p)},i);a.xhrCancel=function(){return f.abort()}}));case 2:case"end":return l.stop()}},t)}));return function(n,r,a,i){return e.apply(this,arguments)}}(),IH=function(){var e=qn(pn.mark(function t(n,r,a){var i;return pn.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return i=b2(n,r),s.abrupt("return",new Promise(function(l,u){var c=q1({url:i},function(f,d){f?u(f):d&&l(d)});a.xhrCancel=function(){return c.abort()}}));case 2:case"end":return s.stop()}},t)}));return function(n,r,a){return e.apply(this,arguments)}}(),LH=function(){return{rasterData:new Uint8Array([0]),width:1,height:1}};function I6(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Wy(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?I6(Object(n),!0).forEach(function(r){m(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):I6(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var NH={tileSize:256,minZoom:0,maxZoom:1/0,zoomOffset:0};function FH(e,t){var n=(t==null?void 0:t.dataType)||wg.IMAGE,r=function(o,s){return n===wg.IMAGE?IH(e,o,s):PH(e,o,s,(t==null?void 0:t.format)||LH)},a=Wy(Wy(Wy({},NH),t),{},{getTileData:r});return{data:e,dataArray:[],tilesetOptions:a,isTile:!0}}function DH(){this.__data__=[],this.size=0}var BH=DH;function zH(e,t){return e===t||e!==e&&t!==t}var Sh=zH,UH=Sh;function $H(e,t){for(var n=e.length;n--;)if(UH(e[n][0],t))return n;return-1}var vv=$H,VH=vv,jH=Array.prototype,GH=jH.splice;function HH(e){var t=this.__data__,n=VH(t,e);if(n<0)return!1;var r=t.length-1;return n==r?t.pop():GH.call(t,n,1),--this.size,!0}var WH=HH,XH=vv;function YH(e){var t=this.__data__,n=XH(t,e);return n<0?void 0:t[n][1]}var ZH=YH,qH=vv;function KH(e){return qH(this.__data__,e)>-1}var QH=KH,JH=vv;function eW(e,t){var n=this.__data__,r=JH(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this}var tW=eW,nW=BH,rW=WH,aW=ZH,iW=QH,oW=tW;function Df(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}Df.prototype.clear=nW;Df.prototype.delete=rW;Df.prototype.get=aW;Df.prototype.has=iW;Df.prototype.set=oW;var bv=Df,sW=bv;function lW(){this.__data__=new sW,this.size=0}var uW=lW;function cW(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}var fW=cW;function dW(e){return this.__data__.get(e)}var pW=dW;function hW(e){return this.__data__.has(e)}var mW=hW,gW=typeof bs=="object"&&bs&&bs.Object===Object&&bs,h7=gW,vW=h7,bW=typeof self=="object"&&self&&self.Object===Object&&self,yW=vW||bW||Function("return this")(),Jo=yW,xW=Jo,wW=xW.Symbol,Ch=wW,L6=Ch,m7=Object.prototype,_W=m7.hasOwnProperty,EW=m7.toString,Cd=L6?L6.toStringTag:void 0;function kW(e){var t=_W.call(e,Cd),n=e[Cd];try{e[Cd]=void 0;var r=!0}catch{}var a=EW.call(e);return r&&(t?e[Cd]=n:delete e[Cd]),a}var SW=kW,CW=Object.prototype,TW=CW.toString;function AW(e){return TW.call(e)}var OW=AW,N6=Ch,MW=SW,RW=OW,PW="[object Null]",IW="[object Undefined]",F6=N6?N6.toStringTag:void 0;function LW(e){return e==null?e===void 0?IW:PW:F6&&F6 in Object(e)?MW(e):RW(e)}var Nl=LW;function NW(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var lr=NW,FW=Nl,DW=lr,BW="[object AsyncFunction]",zW="[object Function]",UW="[object GeneratorFunction]",$W="[object Proxy]";function VW(e){if(!DW(e))return!1;var t=FW(e);return t==zW||t==UW||t==BW||t==$W}var Qo=VW,jW=Jo,GW=jW["__core-js_shared__"],HW=GW,Xy=HW,D6=function(){var e=/[^.]+$/.exec(Xy&&Xy.keys&&Xy.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function WW(e){return!!D6&&D6 in e}var XW=WW,YW=Function.prototype,ZW=YW.toString;function qW(e){if(e!=null){try{return ZW.call(e)}catch{}try{return e+""}catch{}}return""}var g7=qW,KW=Qo,QW=XW,JW=lr,eX=g7,tX=/[\\^$.*+?()[\]{}|]/g,nX=/^\[object .+?Constructor\]$/,rX=Function.prototype,aX=Object.prototype,iX=rX.toString,oX=aX.hasOwnProperty,sX=RegExp("^"+iX.call(oX).replace(tX,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function lX(e){if(!JW(e)||QW(e))return!1;var t=KW(e)?sX:nX;return t.test(eX(e))}var uX=lX;function cX(e,t){return e==null?void 0:e[t]}var fX=cX,dX=uX,pX=fX;function hX(e,t){var n=pX(e,t);return dX(n)?n:void 0}var Fu=hX,mX=Fu,gX=Jo,vX=mX(gX,"Map"),_2=vX,bX=Fu,yX=bX(Object,"create"),yv=yX,B6=yv;function xX(){this.__data__=B6?B6(null):{},this.size=0}var wX=xX;function _X(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var EX=_X,kX=yv,SX="__lodash_hash_undefined__",CX=Object.prototype,TX=CX.hasOwnProperty;function AX(e){var t=this.__data__;if(kX){var n=t[e];return n===SX?void 0:n}return TX.call(t,e)?t[e]:void 0}var OX=AX,MX=yv,RX=Object.prototype,PX=RX.hasOwnProperty;function IX(e){var t=this.__data__;return MX?t[e]!==void 0:PX.call(t,e)}var LX=IX,NX=yv,FX="__lodash_hash_undefined__";function DX(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=NX&&t===void 0?FX:t,this}var BX=DX,zX=wX,UX=EX,$X=OX,VX=LX,jX=BX;function Bf(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}Bf.prototype.clear=zX;Bf.prototype.delete=UX;Bf.prototype.get=$X;Bf.prototype.has=VX;Bf.prototype.set=jX;var GX=Bf,z6=GX,HX=bv,WX=_2;function XX(){this.size=0,this.__data__={hash:new z6,map:new(WX||HX),string:new z6}}var YX=XX;function ZX(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}var qX=ZX,KX=qX;function QX(e,t){var n=e.__data__;return KX(t)?n[typeof t=="string"?"string":"hash"]:n.map}var xv=QX,JX=xv;function eY(e){var t=JX(this,e).delete(e);return this.size-=t?1:0,t}var tY=eY,nY=xv;function rY(e){return nY(this,e).get(e)}var aY=rY,iY=xv;function oY(e){return iY(this,e).has(e)}var sY=oY,lY=xv;function uY(e,t){var n=lY(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this}var cY=uY,fY=YX,dY=tY,pY=aY,hY=sY,mY=cY;function zf(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}zf.prototype.clear=fY;zf.prototype.delete=dY;zf.prototype.get=pY;zf.prototype.has=hY;zf.prototype.set=mY;var v7=zf,gY=bv,vY=_2,bY=v7,yY=200;function xY(e,t){var n=this.__data__;if(n instanceof gY){var r=n.__data__;if(!vY||r.length<yY-1)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new bY(r)}return n.set(e,t),this.size=n.size,this}var wY=xY,_Y=bv,EY=uW,kY=fW,SY=pW,CY=mW,TY=wY;function Uf(e){var t=this.__data__=new _Y(e);this.size=t.size}Uf.prototype.clear=EY;Uf.prototype.delete=kY;Uf.prototype.get=SY;Uf.prototype.has=CY;Uf.prototype.set=TY;var E2=Uf,AY=Fu,OY=function(){try{var e=AY(Object,"defineProperty");return e({},"",{}),e}catch{}}(),b7=OY,U6=b7;function MY(e,t,n){t=="__proto__"&&U6?U6(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}var k2=MY,RY=k2,PY=Sh;function IY(e,t,n){(n!==void 0&&!PY(e[t],n)||n===void 0&&!(t in e))&&RY(e,t,n)}var y7=IY;function LY(e){return function(t,n,r){for(var a=-1,i=Object(t),o=r(t),s=o.length;s--;){var l=o[e?s:++a];if(n(i[l],l,i)===!1)break}return t}}var NY=LY,FY=NY,DY=FY(),BY=DY,_g={exports:{}};(function(e,t){var n=Jo,r=t&&!t.nodeType&&t,a=r&&!0&&e&&!e.nodeType&&e,i=a&&a.exports===r,o=i?n.Buffer:void 0,s=o?o.allocUnsafe:void 0;function l(u,c){if(c)return u.slice();var f=u.length,d=s?s(f):new u.constructor(f);return u.copy(d),d}e.exports=l})(_g,_g.exports);var zY=Jo,UY=zY.Uint8Array,x7=UY,$6=x7;function $Y(e){var t=new e.constructor(e.byteLength);return new $6(t).set(new $6(e)),t}var S2=$Y,VY=S2;function jY(e,t){var n=t?VY(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}var w7=jY;function GY(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t}var _7=GY,HY=lr,V6=Object.create,WY=function(){function e(){}return function(t){if(!HY(t))return{};if(V6)return V6(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}(),XY=WY;function YY(e,t){return function(n){return e(t(n))}}var E7=YY,ZY=E7,qY=ZY(Object.getPrototypeOf,Object),C2=qY,KY=Object.prototype;function QY(e){var t=e&&e.constructor,n=typeof t=="function"&&t.prototype||KY;return e===n}var T2=QY,JY=XY,eZ=C2,tZ=T2;function nZ(e){return typeof e.constructor=="function"&&!tZ(e)?JY(eZ(e)):{}}var k7=nZ;function rZ(e){return e!=null&&typeof e=="object"}var Co=rZ,aZ=Nl,iZ=Co,oZ="[object Arguments]";function sZ(e){return iZ(e)&&aZ(e)==oZ}var lZ=sZ,j6=lZ,uZ=Co,S7=Object.prototype,cZ=S7.hasOwnProperty,fZ=S7.propertyIsEnumerable,dZ=j6(function(){return arguments}())?j6:function(e){return uZ(e)&&cZ.call(e,"callee")&&!fZ.call(e,"callee")},C7=dZ,pZ=Array.isArray,Du=pZ,hZ=9007199254740991;function mZ(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=hZ}var T7=mZ,gZ=Qo,vZ=T7;function bZ(e){return e!=null&&vZ(e.length)&&!gZ(e)}var wv=bZ,yZ=wv,xZ=Co;function wZ(e){return xZ(e)&&yZ(e)}var _Z=wZ,yf={exports:{}};function EZ(){return!1}var kZ=EZ;(function(e,t){var n=Jo,r=kZ,a=t&&!t.nodeType&&t,i=a&&!0&&e&&!e.nodeType&&e,o=i&&i.exports===a,s=o?n.Buffer:void 0,l=s?s.isBuffer:void 0,u=l||r;e.exports=u})(yf,yf.exports);var SZ=Nl,CZ=C2,TZ=Co,AZ="[object Object]",OZ=Function.prototype,MZ=Object.prototype,A7=OZ.toString,RZ=MZ.hasOwnProperty,PZ=A7.call(Object);function IZ(e){if(!TZ(e)||SZ(e)!=AZ)return!1;var t=CZ(e);if(t===null)return!0;var n=RZ.call(t,"constructor")&&t.constructor;return typeof n=="function"&&n instanceof n&&A7.call(n)==PZ}var O7=IZ,LZ=Nl,NZ=T7,FZ=Co,DZ="[object Arguments]",BZ="[object Array]",zZ="[object Boolean]",UZ="[object Date]",$Z="[object Error]",VZ="[object Function]",jZ="[object Map]",GZ="[object Number]",HZ="[object Object]",WZ="[object RegExp]",XZ="[object Set]",YZ="[object String]",ZZ="[object WeakMap]",qZ="[object ArrayBuffer]",KZ="[object DataView]",QZ="[object Float32Array]",JZ="[object Float64Array]",eq="[object Int8Array]",tq="[object Int16Array]",nq="[object Int32Array]",rq="[object Uint8Array]",aq="[object Uint8ClampedArray]",iq="[object Uint16Array]",oq="[object Uint32Array]",ir={};ir[QZ]=ir[JZ]=ir[eq]=ir[tq]=ir[nq]=ir[rq]=ir[aq]=ir[iq]=ir[oq]=!0;ir[DZ]=ir[BZ]=ir[qZ]=ir[zZ]=ir[KZ]=ir[UZ]=ir[$Z]=ir[VZ]=ir[jZ]=ir[GZ]=ir[HZ]=ir[WZ]=ir[XZ]=ir[YZ]=ir[ZZ]=!1;function sq(e){return FZ(e)&&NZ(e.length)&&!!ir[LZ(e)]}var lq=sq;function uq(e){return function(t){return e(t)}}var A2=uq,eh={exports:{}};(function(e,t){var n=h7,r=t&&!t.nodeType&&t,a=r&&!0&&e&&!e.nodeType&&e,i=a&&a.exports===r,o=i&&n.process,s=function(){try{var l=a&&a.require&&a.require("util").types;return l||o&&o.binding&&o.binding("util")}catch{}}();e.exports=s})(eh,eh.exports);var cq=lq,fq=A2,G6=eh.exports,H6=G6&&G6.isTypedArray,dq=H6?fq(H6):cq,_v=dq;function pq(e,t){if(!(t==="constructor"&&typeof e[t]=="function")&&t!="__proto__")return e[t]}var M7=pq,hq=k2,mq=Sh,gq=Object.prototype,vq=gq.hasOwnProperty;function bq(e,t,n){var r=e[t];(!(vq.call(e,t)&&mq(r,n))||n===void 0&&!(t in e))&&hq(e,t,n)}var R7=bq,yq=R7,xq=k2;function wq(e,t,n,r){var a=!n;n||(n={});for(var i=-1,o=t.length;++i<o;){var s=t[i],l=r?r(n[s],e[s],s,n,e):void 0;l===void 0&&(l=e[s]),a?xq(n,s,l):yq(n,s,l)}return n}var Th=wq;function _q(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}var Eq=_q,kq=9007199254740991,Sq=/^(?:0|[1-9]\d*)$/;function Cq(e,t){var n=typeof e;return t=t==null?kq:t,!!t&&(n=="number"||n!="symbol"&&Sq.test(e))&&e>-1&&e%1==0&&e<t}var P7=Cq,Tq=Eq,Aq=C7,Oq=Du,Mq=yf.exports,Rq=P7,Pq=_v,Iq=Object.prototype,Lq=Iq.hasOwnProperty;function Nq(e,t){var n=Oq(e),r=!n&&Aq(e),a=!n&&!r&&Mq(e),i=!n&&!r&&!a&&Pq(e),o=n||r||a||i,s=o?Tq(e.length,String):[],l=s.length;for(var u in e)(t||Lq.call(e,u))&&!(o&&(u=="length"||a&&(u=="offset"||u=="parent")||i&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||Rq(u,l)))&&s.push(u);return s}var I7=Nq;function Fq(e){var t=[];if(e!=null)for(var n in Object(e))t.push(n);return t}var Dq=Fq,Bq=lr,zq=T2,Uq=Dq,$q=Object.prototype,Vq=$q.hasOwnProperty;function jq(e){if(!Bq(e))return Uq(e);var t=zq(e),n=[];for(var r in e)r=="constructor"&&(t||!Vq.call(e,r))||n.push(r);return n}var Gq=jq,Hq=I7,Wq=Gq,Xq=wv;function Yq(e){return Xq(e)?Hq(e,!0):Wq(e)}var Ah=Yq,Zq=Th,qq=Ah;function Kq(e){return Zq(e,qq(e))}var Qq=Kq,W6=y7,Jq=_g.exports,eK=w7,tK=_7,nK=k7,X6=C7,Y6=Du,rK=_Z,aK=yf.exports,iK=Qo,oK=lr,sK=O7,lK=_v,Z6=M7,uK=Qq;function cK(e,t,n,r,a,i,o){var s=Z6(e,n),l=Z6(t,n),u=o.get(l);if(u){W6(e,n,u);return}var c=i?i(s,l,n+"",e,t,o):void 0,f=c===void 0;if(f){var d=Y6(l),p=!d&&aK(l),h=!d&&!p&&lK(l);c=l,d||p||h?Y6(s)?c=s:rK(s)?c=tK(s):p?(f=!1,c=Jq(l,!0)):h?(f=!1,c=eK(l,!0)):c=[]:sK(l)||X6(l)?(c=s,X6(s)?c=uK(s):(!oK(s)||iK(s))&&(c=nK(l))):f=!1}f&&(o.set(l,c),a(c,l,r,i,o),o.delete(l)),W6(e,n,c)}var fK=cK,dK=E2,pK=y7,hK=BY,mK=fK,gK=lr,vK=Ah,bK=M7;function L7(e,t,n,r,a){e!==t&&hK(t,function(i,o){if(a||(a=new dK),gK(i))mK(e,t,o,n,L7,r,a);else{var s=r?r(bK(e,o),i,o+"",e,t,a):void 0;s===void 0&&(s=i),pK(e,o,s)}},vK)}var N7=L7;function yK(e){return e}var F7=yK;function xK(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}var wK=xK,_K=wK,q6=Math.max;function EK(e,t,n){return t=q6(t===void 0?e.length-1:t,0),function(){for(var r=arguments,a=-1,i=q6(r.length-t,0),o=Array(i);++a<i;)o[a]=r[t+a];a=-1;for(var s=Array(t+1);++a<t;)s[a]=r[a];return s[t]=n(o),_K(e,this,s)}}var kK=EK;function SK(e){return function(){return e}}var CK=SK,TK=CK,K6=b7,AK=F7,OK=K6?function(e,t){return K6(e,"toString",{configurable:!0,enumerable:!1,value:TK(t),writable:!0})}:AK,MK=OK,RK=800,PK=16,IK=Date.now;function LK(e){var t=0,n=0;return function(){var r=IK(),a=PK-(r-n);if(n=r,a>0){if(++t>=RK)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var NK=LK,FK=MK,DK=NK,BK=DK(FK),zK=BK,UK=F7,$K=kK,VK=zK;function jK(e,t){return VK($K(e,t,UK),e+"")}var GK=jK,HK=Sh,WK=wv,XK=P7,YK=lr;function ZK(e,t,n){if(!YK(n))return!1;var r=typeof t;return(r=="number"?WK(n)&&XK(t,n.length):r=="string"&&t in n)?HK(n[t],e):!1}var qK=ZK,KK=GK,QK=qK;function JK(e){return KK(function(t,n){var r=-1,a=n.length,i=a>1?n[a-1]:void 0,o=a>2?n[2]:void 0;for(i=e.length>3&&typeof i=="function"?(a--,i):void 0,o&&QK(n[0],n[1],o)&&(i=a<3?void 0:i,a=1),t=Object(t);++r<a;){var s=n[r];s&&e(t,s,r,i)}return t})}var D7=JK,eQ=N7,tQ=D7,nQ=tQ(function(e,t,n,r){eQ(e,t,n,r)}),rQ=nQ,aQ=Nl,iQ=Du,oQ=Co,sQ="[object String]";function lQ(e){return typeof e=="string"||!iQ(e)&&oQ(e)&&aQ(e)==sQ}var xo=lQ;function uQ(e,t){for(var n=-1,r=e==null?0:e.length;++n<r&&t(e[n],n,e)!==!1;);return e}var cQ=uQ,fQ=E7,dQ=fQ(Object.keys,Object),pQ=dQ,hQ=T2,mQ=pQ,gQ=Object.prototype,vQ=gQ.hasOwnProperty;function bQ(e){if(!hQ(e))return mQ(e);var t=[];for(var n in Object(e))vQ.call(e,n)&&n!="constructor"&&t.push(n);return t}var yQ=bQ,xQ=I7,wQ=yQ,_Q=wv;function EQ(e){return _Q(e)?xQ(e):wQ(e)}var O2=EQ,kQ=Th,SQ=O2;function CQ(e,t){return e&&kQ(t,SQ(t),e)}var TQ=CQ,AQ=Th,OQ=Ah;function MQ(e,t){return e&&AQ(t,OQ(t),e)}var RQ=MQ;function PQ(e,t){for(var n=-1,r=e==null?0:e.length,a=0,i=[];++n<r;){var o=e[n];t(o,n,e)&&(i[a++]=o)}return i}var IQ=PQ;function LQ(){return[]}var B7=LQ,NQ=IQ,FQ=B7,DQ=Object.prototype,BQ=DQ.propertyIsEnumerable,Q6=Object.getOwnPropertySymbols,zQ=Q6?function(e){return e==null?[]:(e=Object(e),NQ(Q6(e),function(t){return BQ.call(e,t)}))}:FQ,M2=zQ,UQ=Th,$Q=M2;function VQ(e,t){return UQ(e,$Q(e),t)}var jQ=VQ;function GQ(e,t){for(var n=-1,r=t.length,a=e.length;++n<r;)e[a+n]=t[n];return e}var z7=GQ,HQ=z7,WQ=C2,XQ=M2,YQ=B7,ZQ=Object.getOwnPropertySymbols,qQ=ZQ?function(e){for(var t=[];e;)HQ(t,XQ(e)),e=WQ(e);return t}:YQ,U7=qQ,KQ=Th,QQ=U7;function JQ(e,t){return KQ(e,QQ(e),t)}var eJ=JQ,tJ=z7,nJ=Du;function rJ(e,t,n){var r=t(e);return nJ(e)?r:tJ(r,n(e))}var $7=rJ,aJ=$7,iJ=M2,oJ=O2;function sJ(e){return aJ(e,oJ,iJ)}var V7=sJ,lJ=$7,uJ=U7,cJ=Ah;function fJ(e){return lJ(e,cJ,uJ)}var dJ=fJ,pJ=Fu,hJ=Jo,mJ=pJ(hJ,"DataView"),gJ=mJ,vJ=Fu,bJ=Jo,yJ=vJ(bJ,"Promise"),xJ=yJ,wJ=Fu,_J=Jo,EJ=wJ(_J,"Set"),j7=EJ,kJ=Fu,SJ=Jo,CJ=kJ(SJ,"WeakMap"),TJ=CJ,ew=gJ,tw=_2,nw=xJ,rw=j7,aw=TJ,G7=Nl,$f=g7,J6="[object Map]",AJ="[object Object]",eC="[object Promise]",tC="[object Set]",nC="[object WeakMap]",rC="[object DataView]",OJ=$f(ew),MJ=$f(tw),RJ=$f(nw),PJ=$f(rw),IJ=$f(aw),lu=G7;(ew&&lu(new ew(new ArrayBuffer(1)))!=rC||tw&&lu(new tw)!=J6||nw&&lu(nw.resolve())!=eC||rw&&lu(new rw)!=tC||aw&&lu(new aw)!=nC)&&(lu=function(e){var t=G7(e),n=t==AJ?e.constructor:void 0,r=n?$f(n):"";if(r)switch(r){case OJ:return rC;case MJ:return J6;case RJ:return eC;case PJ:return tC;case IJ:return nC}return t});var Ev=lu,LJ=Object.prototype,NJ=LJ.hasOwnProperty;function FJ(e){var t=e.length,n=new e.constructor(t);return t&&typeof e[0]=="string"&&NJ.call(e,"index")&&(n.index=e.index,n.input=e.input),n}var DJ=FJ,BJ=S2;function zJ(e,t){var n=t?BJ(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}var UJ=zJ,$J=/\w*$/;function VJ(e){var t=new e.constructor(e.source,$J.exec(e));return t.lastIndex=e.lastIndex,t}var jJ=VJ,aC=Ch,iC=aC?aC.prototype:void 0,oC=iC?iC.valueOf:void 0;function GJ(e){return oC?Object(oC.call(e)):{}}var HJ=GJ,WJ=S2,XJ=UJ,YJ=jJ,ZJ=HJ,qJ=w7,KJ="[object Boolean]",QJ="[object Date]",JJ="[object Map]",eee="[object Number]",tee="[object RegExp]",nee="[object Set]",ree="[object String]",aee="[object Symbol]",iee="[object ArrayBuffer]",oee="[object DataView]",see="[object Float32Array]",lee="[object Float64Array]",uee="[object Int8Array]",cee="[object Int16Array]",fee="[object Int32Array]",dee="[object Uint8Array]",pee="[object Uint8ClampedArray]",hee="[object Uint16Array]",mee="[object Uint32Array]";function gee(e,t,n){var r=e.constructor;switch(t){case iee:return WJ(e);case KJ:case QJ:return new r(+e);case oee:return XJ(e,n);case see:case lee:case uee:case cee:case fee:case dee:case pee:case hee:case mee:return qJ(e,n);case JJ:return new r;case eee:case ree:return new r(e);case tee:return YJ(e);case nee:return new r;case aee:return ZJ(e)}}var vee=gee,bee=Ev,yee=Co,xee="[object Map]";function wee(e){return yee(e)&&bee(e)==xee}var _ee=wee,Eee=_ee,kee=A2,sC=eh.exports,lC=sC&&sC.isMap,See=lC?kee(lC):Eee,Cee=See,Tee=Ev,Aee=Co,Oee="[object Set]";function Mee(e){return Aee(e)&&Tee(e)==Oee}var Ree=Mee,Pee=Ree,Iee=A2,uC=eh.exports,cC=uC&&uC.isSet,Lee=cC?Iee(cC):Pee,Nee=Lee,Fee=E2,Dee=cQ,Bee=R7,zee=TQ,Uee=RQ,$ee=_g.exports,Vee=_7,jee=jQ,Gee=eJ,Hee=V7,Wee=dJ,Xee=Ev,Yee=DJ,Zee=vee,qee=k7,Kee=Du,Qee=yf.exports,Jee=Cee,ete=lr,tte=Nee,nte=O2,rte=Ah,ate=1,ite=2,ote=4,H7="[object Arguments]",ste="[object Array]",lte="[object Boolean]",ute="[object Date]",cte="[object Error]",W7="[object Function]",fte="[object GeneratorFunction]",dte="[object Map]",pte="[object Number]",X7="[object Object]",hte="[object RegExp]",mte="[object Set]",gte="[object String]",vte="[object Symbol]",bte="[object WeakMap]",yte="[object ArrayBuffer]",xte="[object DataView]",wte="[object Float32Array]",_te="[object Float64Array]",Ete="[object Int8Array]",kte="[object Int16Array]",Ste="[object Int32Array]",Cte="[object Uint8Array]",Tte="[object Uint8ClampedArray]",Ate="[object Uint16Array]",Ote="[object Uint32Array]",Qn={};Qn[H7]=Qn[ste]=Qn[yte]=Qn[xte]=Qn[lte]=Qn[ute]=Qn[wte]=Qn[_te]=Qn[Ete]=Qn[kte]=Qn[Ste]=Qn[dte]=Qn[pte]=Qn[X7]=Qn[hte]=Qn[mte]=Qn[gte]=Qn[vte]=Qn[Cte]=Qn[Tte]=Qn[Ate]=Qn[Ote]=!0;Qn[cte]=Qn[W7]=Qn[bte]=!1;function M0(e,t,n,r,a,i){var o,s=t&ate,l=t&ite,u=t&ote;if(n&&(o=a?n(e,r,a,i):n(e)),o!==void 0)return o;if(!ete(e))return e;var c=Kee(e);if(c){if(o=Yee(e),!s)return Vee(e,o)}else{var f=Xee(e),d=f==W7||f==fte;if(Qee(e))return $ee(e,s);if(f==X7||f==H7||d&&!a){if(o=l||d?{}:qee(e),!s)return l?Gee(e,Uee(o,e)):jee(e,zee(o,e))}else{if(!Qn[f])return a?e:{};o=Zee(e,f,s)}}i||(i=new Fee);var p=i.get(e);if(p)return p;i.set(e,o),tte(e)?e.forEach(function(v){o.add(M0(v,t,n,v,e,i))}):Jee(e)&&e.forEach(function(v,b){o.set(b,M0(v,t,n,b,e,i))});var h=u?l?Wee:Hee:l?rte:nte,g=c?void 0:h(e);return Dee(g||e,function(v,b){g&&(b=v,v=e[b]),Bee(o,b,M0(v,t,n,b,e,i))}),o}var Mte=M0,Rte=Mte,Pte=1,Ite=4;function Lte(e){return Rte(e,Pte|Ite)}var rf=Lte;/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */function Nte(e,t,n,r){function a(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function s(c){try{u(r.next(c))}catch(f){o(f)}}function l(c){try{u(r.throw(c))}catch(f){o(f)}}function u(c){c.done?i(c.value):a(c.value).then(s,l)}u((r=r.apply(e,t||[])).next())})}function Fte(e,t){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,a,i,o;return o={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function s(u){return function(c){return l([u,c])}}function l(u){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,a&&(i=u[0]&2?a.return:u[0]?a.throw||((i=a.return)&&i.call(a),0):a.next)&&!(i=i.call(a,u[1])).done)return i;switch(a=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return n.label++,{value:u[1],done:!1};case 5:n.label++,a=u[1],u=[0];continue;case 7:u=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){n=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){n.label=u[1];break}if(u[0]===6&&n.label<i[1]){n.label=i[1],i=u;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(u);break}i[2]&&n.ops.pop(),n.trys.pop();continue}u=t.call(e,n)}catch(c){u=[6,c],a=0}finally{r=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}function Dte(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),a,i=[],o;try{for(;(t===void 0||t-- >0)&&!(a=r.next()).done;)i.push(a.value)}catch(s){o={error:s}}finally{try{a&&!a.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return i}function Bte(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(Dte(arguments[t]));return e}function Gr(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function Hr(e,t){return t={exports:{}},e(t,t.exports),t.exports}var kv=Hr(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=n;function n(r){return r&&typeof r.length=="number"&&r.length>=0&&r.length%1===0}e.exports=t.default});Gr(kv);var Y7=Hr(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(n){return function(){for(var r=[],a=arguments.length;a--;)r[a]=arguments[a];var i=r.pop();return n.call(this,r,i)}},e.exports=t.default});Gr(Y7);var Vf=Hr(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.fallback=a,t.wrap=i;var n=t.hasSetImmediate=typeof setImmediate=="function"&&setImmediate,r=t.hasNextTick=typeof process=="object"&&typeof process.nextTick=="function";function a(s){setTimeout(s,0)}function i(s){return function(l){for(var u=[],c=arguments.length-1;c-- >0;)u[c]=arguments[c+1];return s(function(){return l.apply(void 0,u)})}}var o;n?o=setImmediate:r?o=process.nextTick:o=a,t.default=i(o)});Gr(Vf);Vf.fallback;Vf.wrap;Vf.hasSetImmediate;Vf.hasNextTick;var Z7=Hr(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var n=a(Y7),r=a(Vf);function a(l){return l&&l.__esModule?l:{default:l}}function i(l){return(0,Eo.isAsync)(l)?function(){for(var u=[],c=arguments.length;c--;)u[c]=arguments[c];var f=u.pop(),d=l.apply(this,u);return o(d,f)}:(0,n.default)(function(u,c){var f;try{f=l.apply(this,u)}catch(d){return c(d)}if(f&&typeof f.then=="function")return o(f,c);c(null,f)})}function o(l,u){return l.then(function(c){s(u,null,c)},function(c){s(u,c&&c.message?c:new Error(c))})}function s(l,u,c){try{l(u,c)}catch(f){(0,r.default)(function(d){throw d},f)}}e.exports=t.default});Gr(Z7);var Eo=Hr(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.isAsyncIterable=t.isAsyncGenerator=t.isAsync=void 0;var n=r(Z7);function r(l){return l&&l.__esModule?l:{default:l}}function a(l){return l[Symbol.toStringTag]==="AsyncFunction"}function i(l){return l[Symbol.toStringTag]==="AsyncGenerator"}function o(l){return typeof l[Symbol.asyncIterator]=="function"}function s(l){if(typeof l!="function")throw new Error("expected a function");return a(l)?(0,n.default)(l):l}t.default=s,t.isAsync=a,t.isAsyncGenerator=i,t.isAsyncIterable=o});Gr(Eo);Eo.isAsyncIterable;Eo.isAsyncGenerator;Eo.isAsync;var jf=Hr(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=n;function n(r,a){if(a===void 0&&(a=r.length),!a)throw new Error("arity is undefined");function i(){for(var o=this,s=[],l=arguments.length;l--;)s[l]=arguments[l];return typeof s[a-1]=="function"?r.apply(this,s):new Promise(function(u,c){s[a-1]=function(f){for(var d=[],p=arguments.length-1;p-- >0;)d[p]=arguments[p+1];if(f)return c(f);u(d.length>1?d:d[0])},r.apply(o,s)})}return Object.defineProperty(i,"name",{configurable:!0,value:"awaitable("+r.name+")"}),i}e.exports=t.default});Gr(jf);var R2=Hr(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n=i(kv),r=i(Eo),a=i(jf);function i(o){return o&&o.__esModule?o:{default:o}}t.default=(0,a.default)(function(o,s,l){var u=(0,n.default)(s)?[]:{};o(s,function(c,f,d){(0,r.default)(c)(function(p){for(var h,g=[],v=arguments.length-1;v-- >0;)g[v]=arguments[v+1];g.length<2&&(h=g,g=h[0]),u[f]=g,d(p)})},function(c){return l(c,u)})},3),e.exports=t.default});Gr(R2);var Sv=Hr(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=n;function n(r){function a(){for(var i=[],o=arguments.length;o--;)i[o]=arguments[o];if(r!==null){var s=r;r=null,s.apply(this,i)}}return Object.assign(a,r),a}e.exports=t.default});Gr(Sv);var q7=Hr(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(n){return n[Symbol.iterator]&&n[Symbol.iterator]()},e.exports=t.default});Gr(q7);var K7=Hr(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=l;var n=a(kv),r=a(q7);function a(u){return u&&u.__esModule?u:{default:u}}function i(u){var c=-1,f=u.length;return function(){return++c<f?{value:u[c],key:c}:null}}function o(u){var c=-1;return function(){var d=u.next();return d.done?null:(c++,{value:d.value,key:c})}}function s(u){var c=u?Object.keys(u):[],f=-1,d=c.length;return function(){var h=c[++f];return f<d?{value:u[h],key:h}:null}}function l(u){if((0,n.default)(u))return i(u);var c=(0,r.default)(u);return c?o(c):s(u)}e.exports=t.default});Gr(K7);var Cv=Hr(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=n;function n(r){return function(){for(var a=[],i=arguments.length;i--;)a[i]=arguments[i];if(r===null)throw new Error("Callback was already called.");var o=r;r=null,o.apply(this,a)}}e.exports=t.default});Gr(Cv);var Tv=Hr(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n={};t.default=n,e.exports=t.default});Gr(Tv);var Q7=Hr(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=a;var n=r(Tv);function r(i){return i&&i.__esModule?i:{default:i}}function a(i,o,s,l){var u=!1,c=!1,f=!1,d=0,p=0;function h(){d>=o||f||u||(f=!0,i.next().then(function(b){var y=b.value,x=b.done;if(!(c||u)){if(f=!1,x){u=!0,d<=0&&l(null);return}d++,s(y,p,g),p++,h()}}).catch(v))}function g(b,y){if(d-=1,!c){if(b)return v(b);if(b===!1){u=!0,c=!0;return}if(y===n.default||u&&d<=0)return u=!0,l(null);h()}}function v(b){c||(f=!1,u=!0,l(b))}h()}e.exports=t.default});Gr(Q7);var J7=Hr(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n=s(Sv),r=s(K7),a=s(Cv),i=s(Q7),o=s(Tv);function s(l){return l&&l.__esModule?l:{default:l}}t.default=function(l){return function(u,c,f){if(f=(0,n.default)(f),l<=0)throw new RangeError("concurrency limit cannot be less than 1");if(!u)return f(null);if((0,Eo.isAsyncGenerator)(u))return(0,i.default)(u,l,c,f);if((0,Eo.isAsyncIterable)(u))return(0,i.default)(u[Symbol.asyncIterator](),l,c,f);var d=(0,r.default)(u),p=!1,h=!1,g=0,v=!1;function b(x,E){if(!h)if(g-=1,x)p=!0,f(x);else if(x===!1)p=!0,h=!0;else{if(E===o.default||p&&g<=0)return p=!0,f(null);v||y()}}function y(){for(v=!0;g<l&&!p;){var x=d();if(x===null){p=!0,g<=0&&f(null);return}g+=1,c(x.value,x.key,(0,a.default)(b))}v=!1}y()}},e.exports=t.default});Gr(J7);var P2=Hr(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n=i(J7),r=i(Eo),a=i(jf);function i(s){return s&&s.__esModule?s:{default:s}}function o(s,l,u,c){return(0,n.default)(l)(s,(0,r.default)(u),c)}t.default=(0,a.default)(o,4),e.exports=t.default});Gr(P2);var eL=Hr(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n=a(P2),r=a(jf);function a(o){return o&&o.__esModule?o:{default:o}}function i(o,s,l){return(0,n.default)(o,1,s,l)}t.default=(0,r.default)(i,3),e.exports=t.default});Gr(eL);var zte=Hr(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var n=a(R2),r=a(eL);function a(o){return o&&o.__esModule?o:{default:o}}function i(o,s){return(0,n.default)(r.default,o,s)}e.exports=t.default}),tL=Gr(zte),Do=function(){function e(){this.args=[],this.tasks=[]}return e.prototype.call=function(){for(var t=arguments,n=[],r=0;r<arguments.length;r++)n[r]=t[r];return this.args=n,tL(this.tasks)},e.prototype.tap=function(t,n){var r=this;this.tasks.push(function(a){n.apply(void 0,Bte(r.args)),a(null,t)})},e}(),nL=Hr(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n=u(kv),r=u(Tv),a=u(P2),i=u(Sv),o=u(Cv),s=u(Eo),l=u(jf);function u(p){return p&&p.__esModule?p:{default:p}}function c(p,h,g){g=(0,i.default)(g);var v=0,b=0,y=p.length,x=!1;y===0&&g(null);function E(T,C){T===!1&&(x=!0),x!==!0&&(T?g(T):(++b===y||C===r.default)&&g(null))}for(;v<y;v++)h(p[v],v,(0,o.default)(E))}function f(p,h,g){return(0,a.default)(p,1/0,h,g)}function d(p,h,g){var v=(0,n.default)(p)?c:f;return v(p,(0,s.default)(h),g)}t.default=(0,l.default)(d,3),e.exports=t.default});Gr(nL);var Ute=Hr(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var n=a(nL),r=a(R2);function a(o){return o&&o.__esModule?o:{default:o}}function i(o,s){return(0,r.default)(n.default,o,s)}e.exports=t.default}),$te=Gr(Ute),Vte=function(){function e(){this.tasks=[]}return e.prototype.promise=function(){return $te(this.tasks)},e.prototype.tapPromise=function(t,n){var r=this;this.tasks.push(function(a){return Nte(r,void 0,void 0,function(){return Fte(this,function(i){switch(i.label){case 0:return[4,n()];case 1:return i.sent(),a(null,t),[2]}})})})},e}(),jte=Hr(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n=o(Sv),r=o(Cv),a=o(Eo),i=o(jf);function o(l){return l&&l.__esModule?l:{default:l}}function s(l,u){if(u=(0,n.default)(u),!Array.isArray(l))return u(new Error("First argument to waterfall must be an array of functions"));if(!l.length)return u();var c=0;function f(p){var h=(0,a.default)(l[c++]);h.apply(void 0,p.concat([(0,r.default)(d)]))}function d(p){for(var h=[],g=arguments.length-1;g-- >0;)h[g]=arguments[g+1];if(p!==!1){if(p||c===l.length)return u.apply(void 0,[p].concat(h));f(h)}}f([])}t.default=(0,i.default)(s),e.exports=t.default}),Gte=Gr(jte),Hte=function(){function e(){this.tasks=[]}return e.prototype.call=function(){return Gte(this.tasks)},e.prototype.tap=function(t,n){this.tasks.length===0?this.tasks.push(function(r){var a=n();r(a?null:!1,a)}):this.tasks.push(function(r,a){var i=n();a(i?null:!1,t)})},e}(),Yy=function(){function e(){this.tasks=[]}return e.prototype.call=function(){return tL(this.tasks)},e.prototype.tap=function(t,n){this.tasks.push(function(r){var a=n();r(a,t)})},e}(),rL={exports:{}};(function(e,t){(function(n,r){e.exports=r()})(bs,function(){function n(A,S,M,O,R,H){if(!(R-O<=M)){var ee=O+R>>1;r(A,S,ee,O,R,H%2),n(A,S,M,O,ee-1,H+1),n(A,S,M,ee+1,R,H+1)}}function r(A,S,M,O,R,H){for(;R>O;){if(R-O>600){var ee=R-O+1,re=M-O+1,Y=Math.log(ee),J=.5*Math.exp(2*Y/3),ae=.5*Math.sqrt(Y*J*(ee-J)/ee)*(re-ee/2<0?-1:1),le=Math.max(O,Math.floor(M-re*J/ee+ae)),fe=Math.min(R,Math.floor(M+(ee-re)*J/ee+ae));r(A,S,M,le,fe,H)}var ge=S[2*M+H],we=O,Ve=R;for(a(A,S,O,M),S[2*R+H]>ge&&a(A,S,O,R);we<Ve;){for(a(A,S,we,Ve),we++,Ve--;S[2*we+H]<ge;)we++;for(;S[2*Ve+H]>ge;)Ve--}S[2*O+H]===ge?a(A,S,O,Ve):(Ve++,a(A,S,Ve,R)),Ve<=M&&(O=Ve+1),M<=Ve&&(R=Ve-1)}}function a(A,S,M,O){i(A,M,O),i(S,2*M,2*O),i(S,2*M+1,2*O+1)}function i(A,S,M){var O=A[S];A[S]=A[M],A[M]=O}function o(A,S,M,O,R,H,ee){for(var re=[0,A.length-1,0],Y=[],J,ae;re.length;){var le=re.pop(),fe=re.pop(),ge=re.pop();if(fe-ge<=ee){for(var we=ge;we<=fe;we++)J=S[2*we],ae=S[2*we+1],J>=M&&J<=R&&ae>=O&&ae<=H&&Y.push(A[we]);continue}var Ve=Math.floor((ge+fe)/2);J=S[2*Ve],ae=S[2*Ve+1],J>=M&&J<=R&&ae>=O&&ae<=H&&Y.push(A[Ve]);var Lt=(le+1)%2;(le===0?M<=J:O<=ae)&&(re.push(ge),re.push(Ve-1),re.push(Lt)),(le===0?R>=J:H>=ae)&&(re.push(Ve+1),re.push(fe),re.push(Lt))}return Y}function s(A,S,M,O,R,H){for(var ee=[0,A.length-1,0],re=[],Y=R*R;ee.length;){var J=ee.pop(),ae=ee.pop(),le=ee.pop();if(ae-le<=H){for(var fe=le;fe<=ae;fe++)l(S[2*fe],S[2*fe+1],M,O)<=Y&&re.push(A[fe]);continue}var ge=Math.floor((le+ae)/2),we=S[2*ge],Ve=S[2*ge+1];l(we,Ve,M,O)<=Y&&re.push(A[ge]);var Lt=(J+1)%2;(J===0?M-R<=we:O-R<=Ve)&&(ee.push(le),ee.push(ge-1),ee.push(Lt)),(J===0?M+R>=we:O+R>=Ve)&&(ee.push(ge+1),ee.push(ae),ee.push(Lt))}return re}function l(A,S,M,O){var R=A-M,H=S-O;return R*R+H*H}var u=function(A){return A[0]},c=function(A){return A[1]},f=function(S,M,O,R,H){M===void 0&&(M=u),O===void 0&&(O=c),R===void 0&&(R=64),H===void 0&&(H=Float64Array),this.nodeSize=R,this.points=S;for(var ee=S.length<65536?Uint16Array:Uint32Array,re=this.ids=new ee(S.length),Y=this.coords=new H(S.length*2),J=0;J<S.length;J++)re[J]=J,Y[2*J]=M(S[J]),Y[2*J+1]=O(S[J]);n(re,Y,R,0,re.length-1,0)};f.prototype.range=function(S,M,O,R){return o(this.ids,this.coords,S,M,O,R,this.nodeSize)},f.prototype.within=function(S,M,O){return s(this.ids,this.coords,S,M,O,this.nodeSize)};var d={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:function(A){return A}},p=Math.fround||function(A){return function(S){return A[0]=+S,A[0]}}(new Float32Array(1)),h=function(S){this.options=I(Object.create(d),S),this.trees=new Array(this.options.maxZoom+1)};h.prototype.load=function(S){var M=this.options,O=M.log,R=M.minZoom,H=M.maxZoom,ee=M.nodeSize;O&&console.time("total time");var re="prepare "+S.length+" points";O&&console.time(re),this.points=S;for(var Y=[],J=0;J<S.length;J++)!S[J].geometry||Y.push(v(S[J],J));this.trees[H+1]=new f(Y,P,j,ee,Float32Array),O&&console.timeEnd(re);for(var ae=H;ae>=R;ae--){var le=+Date.now();Y=this._cluster(Y,ae),this.trees[ae]=new f(Y,P,j,ee,Float32Array),O&&console.log("z%d: %d clusters in %dms",ae,Y.length,+Date.now()-le)}return O&&console.timeEnd("total time"),this},h.prototype.getClusters=function(S,M){var O=((S[0]+180)%360+360)%360-180,R=Math.max(-90,Math.min(90,S[1])),H=S[2]===180?180:((S[2]+180)%360+360)%360-180,ee=Math.max(-90,Math.min(90,S[3]));if(S[2]-S[0]>=360)O=-180,H=180;else if(O>H){var re=this.getClusters([O,R,180,ee],M),Y=this.getClusters([-180,R,H,ee],M);return re.concat(Y)}for(var J=this.trees[this._limitZoom(M)],ae=J.range(x(O),E(ee),x(H),E(R)),le=[],fe=0,ge=ae;fe<ge.length;fe+=1){var we=ge[fe],Ve=J.points[we];le.push(Ve.numPoints?b(Ve):this.points[Ve.index])}return le},h.prototype.getChildren=function(S){var M=this._getOriginId(S),O=this._getOriginZoom(S),R="No cluster with the specified id.",H=this.trees[O];if(!H)throw new Error(R);var ee=H.points[M];if(!ee)throw new Error(R);for(var re=this.options.radius/(this.options.extent*Math.pow(2,O-1)),Y=H.within(ee.x,ee.y,re),J=[],ae=0,le=Y;ae<le.length;ae+=1){var fe=le[ae],ge=H.points[fe];ge.parentId===S&&J.push(ge.numPoints?b(ge):this.points[ge.index])}if(J.length===0)throw new Error(R);return J},h.prototype.getLeaves=function(S,M,O){M=M||10,O=O||0;var R=[];return this._appendLeaves(R,S,M,O,0),R},h.prototype.getTile=function(S,M,O){var R=this.trees[this._limitZoom(S)],H=Math.pow(2,S),ee=this.options,re=ee.extent,Y=ee.radius,J=Y/re,ae=(O-J)/H,le=(O+1+J)/H,fe={features:[]};return this._addTileFeatures(R.range((M-J)/H,ae,(M+1+J)/H,le),R.points,M,O,H,fe),M===0&&this._addTileFeatures(R.range(1-J/H,ae,1,le),R.points,H,O,H,fe),M===H-1&&this._addTileFeatures(R.range(0,ae,J/H,le),R.points,-1,O,H,fe),fe.features.length?fe:null},h.prototype.getClusterExpansionZoom=function(S){for(var M=this._getOriginZoom(S)-1;M<=this.options.maxZoom;){var O=this.getChildren(S);if(M++,O.length!==1)break;S=O[0].properties.cluster_id}return M},h.prototype._appendLeaves=function(S,M,O,R,H){for(var ee=this.getChildren(M),re=0,Y=ee;re<Y.length;re+=1){var J=Y[re],ae=J.properties;if(ae&&ae.cluster?H+ae.point_count<=R?H+=ae.point_count:H=this._appendLeaves(S,ae.cluster_id,O,R,H):H<R?H++:S.push(J),S.length===O)break}return H},h.prototype._addTileFeatures=function(S,M,O,R,H,ee){for(var re=0,Y=S;re<Y.length;re+=1){var J=Y[re],ae=M[J],le=ae.numPoints,fe=void 0,ge=void 0,we=void 0;if(le)fe=y(ae),ge=ae.x,we=ae.y;else{var Ve=this.points[ae.index];fe=Ve.properties,ge=x(Ve.geometry.coordinates[0]),we=E(Ve.geometry.coordinates[1])}var Lt={type:1,geometry:[[Math.round(this.options.extent*(ge*H-O)),Math.round(this.options.extent*(we*H-R))]],tags:fe},Nt=void 0;le?Nt=ae.id:this.options.generateId?Nt=ae.index:this.points[ae.index].id&&(Nt=this.points[ae.index].id),Nt!==void 0&&(Lt.id=Nt),ee.features.push(Lt)}},h.prototype._limitZoom=function(S){return Math.max(this.options.minZoom,Math.min(Math.floor(+S),this.options.maxZoom+1))},h.prototype._cluster=function(S,M){for(var O=[],R=this.options,H=R.radius,ee=R.extent,re=R.reduce,Y=R.minPoints,J=H/(ee*Math.pow(2,M)),ae=0;ae<S.length;ae++){var le=S[ae];if(!(le.zoom<=M)){le.zoom=M;for(var fe=this.trees[M+1],ge=fe.within(le.x,le.y,J),we=le.numPoints||1,Ve=we,Lt=0,Nt=ge;Lt<Nt.length;Lt+=1){var Zt=Nt[Lt],Fe=fe.points[Zt];Fe.zoom>M&&(Ve+=Fe.numPoints||1)}if(Ve>we&&Ve>=Y){for(var Je=le.x*we,tt=le.y*we,ve=re&&we>1?this._map(le,!0):null,pt=(ae<<5)+(M+1)+this.points.length,kt=0,wt=ge;kt<wt.length;kt+=1){var At=wt[kt],ht=fe.points[At];if(!(ht.zoom<=M)){ht.zoom=M;var jt=ht.numPoints||1;Je+=ht.x*jt,tt+=ht.y*jt,ht.parentId=pt,re&&(ve||(ve=this._map(le,!0)),re(ve,this._map(ht)))}}le.parentId=pt,O.push(g(Je/Ve,tt/Ve,pt,Ve,ve))}else if(O.push(le),Ve>1)for(var Gt=0,An=ge;Gt<An.length;Gt+=1){var _r=An[Gt],er=fe.points[_r];er.zoom<=M||(er.zoom=M,O.push(er))}}}return O},h.prototype._getOriginId=function(S){return S-this.points.length>>5},h.prototype._getOriginZoom=function(S){return(S-this.points.length)%32},h.prototype._map=function(S,M){if(S.numPoints)return M?I({},S.properties):S.properties;var O=this.points[S.index].properties,R=this.options.map(O);return M&&R===O?I({},R):R};function g(A,S,M,O,R){return{x:p(A),y:p(S),zoom:1/0,id:M,parentId:-1,numPoints:O,properties:R}}function v(A,S){var M=A.geometry.coordinates,O=M[0],R=M[1];return{x:p(x(O)),y:p(E(R)),zoom:1/0,index:S,parentId:-1}}function b(A){return{type:"Feature",id:A.id,properties:y(A),geometry:{type:"Point",coordinates:[T(A.x),C(A.y)]}}}function y(A){var S=A.numPoints,M=S>=1e4?Math.round(S/1e3)+"k":S>=1e3?Math.round(S/100)/10+"k":S;return I(I({},A.properties),{cluster:!0,cluster_id:A.id,point_count:S,point_count_abbreviated:M})}function x(A){return A/360+.5}function E(A){var S=Math.sin(A*Math.PI/180),M=.5-.25*Math.log((1+S)/(1-S))/Math.PI;return M<0?0:M>1?1:M}function T(A){return(A-.5)*360}function C(A){var S=(180-A*360)*Math.PI/180;return 360*Math.atan(Math.exp(S))/Math.PI-90}function I(A,S){for(var M in S)A[M]=S[M];return A}function P(A){return A.x}function j(A){return A.y}return h})})(rL);var aL=rL.exports;function fC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function iL(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?fC(Object(n),!0).forEach(function(r){m(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fC(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function oL(e,t){var n=t.radius,r=n===void 0?40:n,a=t.maxZoom,i=a===void 0?18:a,o=t.minZoom,s=o===void 0?0:o,l=t.zoom,u=l===void 0?2:l;if(e.pointIndex){var c=e.pointIndex.getClusters(e.extent,Math.floor(u));return e.dataArray=Wte(c),e}var f=new aL({radius:r,minZoom:s,maxZoom:i}),d={type:"FeatureCollection",features:[]};return d.features=e.dataArray.map(function(p){return{type:"Feature",geometry:{type:"Point",coordinates:p.coordinates},properties:iL({},p)}}),f.load(d.features),f}function Wte(e){return e.map(function(t,n){return iL({coordinates:t.geometry.coordinates,_id:n+1},t.properties)})}function Xte(e){if(e.length===0)throw new Error("max requires at least one data point");for(var t=e[0],n=1;n<e.length;n++)e[n]>t&&(t=e[n]);return t}function Yte(e){if(e.length===0)throw new Error("min requires at least one data point");for(var t=e[0],n=1;n<e.length;n++)e[n]<t&&(t=e[n]);return t}function sL(e){if(e.length===0)return 0;for(var t=e[0],n=0,r,a=1;a<e.length;a++)r=t+e[a]*1,Math.abs(t)>=Math.abs(e[a])?n+=t-r+e[a]:n+=e[a]-r+t,t=r;return t+n*1}function Zte(e){if(e.length===0)throw new Error("mean requires at least one data point");return sL(e)/e.length}var qte={min:Yte,max:Xte,mean:Zte,sum:sL};function Kte(e,t){return e.map(function(n){return n[t]*1})}function dC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Td(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?dC(Object(n),!0).forEach(function(r){m(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):dC(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Qte(e){var t=Jte();return function(){var r=Ee(e),a;if(t){var i=Ee(this).constructor;a=Reflect.construct(r,arguments,i)}else a=r.apply(this,arguments);return Mt(this,a)}}function Jte(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function ene(e,t){if(Array.isArray(t))return t}var Oh=function(e){Ct(n,e);var t=Qte(n);function n(r,a){var i;return Ae(this,n),i=t.call(this),m(D(i),"data",void 0),m(D(i),"center",void 0),m(D(i),"extent",void 0),m(D(i),"hooks",{init:new Do}),m(D(i),"parser",{type:"geojson"}),m(D(i),"transforms",[]),m(D(i),"cluster",!1),m(D(i),"clusterOptions",{enable:!1,radius:40,maxZoom:20,zoom:-99,method:"count"}),m(D(i),"tileset",void 0),m(D(i),"mapService",void 0),m(D(i),"invalidExtent",!1),m(D(i),"dataArrayChanged",!1),m(D(i),"originData",void 0),m(D(i),"rawData",void 0),m(D(i),"cfg",{}),m(D(i),"clusterIndex",void 0),i.originData=r,i.initCfg(a),i.hooks.init.tap("parser",function(){i.excuteParser()}),i.hooks.init.tap("cluster",function(){i.initCluster()}),i.hooks.init.tap("transform",function(){i.executeTrans()}),i.init(),i}return Oe(n,[{key:"getClusters",value:function(a){return this.clusterIndex.getClusters(this.caculClusterExtent(2),a)}},{key:"getClustersLeaves",value:function(a){return this.clusterIndex.getLeaves(a,1/0)}},{key:"updateClusterData",value:function(a){var i=this,o=this.clusterOptions,s=o.method,l=s===void 0?"sum":s,u=o.field,c=this.clusterIndex.getClusters(this.caculClusterExtent(2),Math.floor(a));this.clusterOptions.zoom=a,c.forEach(function(f){f.id||(f.properties.point_count=1)}),(u||Qo(l))&&(c=c.map(function(f){var d=f.id;if(d){var p=i.clusterIndex.getLeaves(d,1/0),h=p.map(function(b){return b.properties}),g;if(xo(l)&&u){var v=Kte(h,u);g=qte[l](v)}Qo(l)&&(g=l(h)),f.properties.stat=g}else f.properties.point_count=1;return f})),this.data=VS("geojson")({type:"FeatureCollection",features:c}),this.executeTrans()}},{key:"getFeatureById",value:function(a){var i=this.parser.type,o=i===void 0?"geojson":i;if(o==="geojson"&&!this.cluster){var s=a<this.originData.features.length?this.originData.features[a]:"null",l=rf(s);if(this.transforms.length!==0||this.dataArrayChanged){var u=this.data.dataArray.find(function(c){return c._id===a});l.properties=u}return l}else return a<this.data.dataArray.length?this.data.dataArray[a]:"null"}},{key:"updateFeaturePropertiesById",value:function(a,i){this.data.dataArray=this.data.dataArray.map(function(o){return o._id===a?Td(Td({},o),i):o}),this.dataArrayChanged=!0,this.emit("update")}},{key:"getFeatureId",value:function(a,i){var o=this.data.dataArray.find(function(s){return s[a]===i});return o==null?void 0:o._id}},{key:"setData",value:function(a,i){this.originData=a,this.dataArrayChanged=!1,this.initCfg(i),this.init(),this.emit("update")}},{key:"destroy",value:function(){var a;this.removeAllListeners(),this.originData=null,this.clusterIndex=null,this.data=null,(a=this.tileset)===null||a===void 0||a.destroy()}},{key:"initCfg",value:function(a){this.cfg=rQ(this.cfg,a,ene);var i=this.cfg;i&&(i.parser&&(this.parser=i.parser),i.transforms&&(this.transforms=i.transforms),this.cluster=i.cluster||!1,i.clusterOptions&&(this.cluster=!0,this.clusterOptions=Td(Td({},this.clusterOptions),i.clusterOptions)))}},{key:"init",value:function(){this.hooks.init.call(this)}},{key:"excuteParser",value:function(){var a=this.parser,i=a.type||"geojson",o=VS(i);this.data=o(this.originData,a),this.extent=iG(this.data.dataArray),this.setCenter(this.extent),this.invalidExtent=this.extent[0]===this.extent[2]||this.extent[1]===this.extent[3],this.tileset=this.initTileset()}},{key:"setCenter",value:function(a){this.center=[(a[0]+a[2])/2,(a[1]+a[3])/2],(isNaN(this.center[0])||isNaN(this.center[1]))&&(this.center=[108.92361111111111,34.54083333333333])}},{key:"initTileset",value:function(){var a=this.data.tilesetOptions;if(!!a){if(this.tileset)return this.tileset.updateOptions(a),this.tileset;var i=new $G(Td({},a));return i}}},{key:"executeTrans",value:function(){var a=this,i=this.transforms;i.forEach(function(o){var s=o.type,l=pV(s)(a.data,o);Object.assign(a.data,l)})}},{key:"initCluster",value:function(){if(!!this.cluster){var a=this.clusterOptions||{};this.clusterIndex=oL(this.data,a)}}},{key:"caculClusterExtent",value:function(a){var i=[[-1/0,-1/0],[1/0,1/0]];return this.invalidExtent||(i=qp(vg(this.extent),a)),i[0].concat(i[1])}}]),n}(Si.exports.EventEmitter);function tne(e,t){var n=t.callback;return n&&(e.dataArray=e.dataArray.filter(n)),e}function pC(e,t){var n=typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=nne(e))||t&&e&&typeof e.length=="number"){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(u){throw u},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i=!0,o=!1,s;return{s:function(){n=n.call(e)},n:function(){var u=n.next();return i=u.done,u},e:function(u){o=!0,s=u},f:function(){try{!i&&n.return!=null&&n.return()}finally{if(o)throw s}}}}function nne(e,t){if(!!e){if(typeof e=="string")return hC(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return hC(e,t)}}function hC(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var I2=6378e3;function rne(e,t){var n=e.dataArray,r=t.size,a=r===void 0?10:r,i=a/(2*Math.PI*I2)*(256<<20)/2,o=ane(n,a),s=o.gridHash,l=o.gridOffset,u=lne(s,l,t);return{yOffset:i,xOffset:i,radius:i,type:"grid",dataArray:u}}function ane(e,t){var n=1/0,r=-1/0,a,i=pC(e),o;try{for(i.s();!(o=i.n()).done;){var s=o.value;a=s.coordinates[1],Number.isFinite(a)&&(n=a<n?a:n,r=a>r?a:r)}}catch(x){i.e(x)}finally{i.f()}var l=(n+r)/2,u=ine(t,l);if(u.xOffset<=0||u.yOffset<=0)return{gridHash:{},gridOffset:u};var c={},f=pC(e),d;try{for(f.s();!(d=f.n()).done;){var p=d.value,h=p.coordinates[1],g=p.coordinates[0];if(Number.isFinite(h)&&Number.isFinite(g)){var v=Math.floor((h+90)/u.yOffset),b=Math.floor((g+180)/u.xOffset),y="".concat(v,"-").concat(b);c[y]=c[y]||{count:0,points:[]},c[y].count+=1,c[y].points.push(p)}}}catch(x){f.e(x)}finally{f.f()}return{gridHash:c,gridOffset:u}}function ine(e,t){var n=one(e),r=sne(t,e);return{yOffset:n,xOffset:r}}function one(e){return e/I2*(180/Math.PI)}function sne(e,t){return t/I2*(180/Math.PI)/Math.cos(e*Math.PI/180)}function lne(e,t,n){return Object.keys(e).reduce(function(r,a,i){var o=a.split("-"),s=parseInt(o[0],10),l=parseInt(o[1],10),u={};if(n.field&&n.method){var c=d2(e[a].points,n.field);u[n.method]=f2[n.method](c)}return Object.assign(u,{_id:i,coordinates:Uo([-180+t.xOffset*(l+.5),-90+t.yOffset*(s+.5)]),rawData:e[a].points,count:e[a].count}),r.push(u),r},[])}var kc=Math.PI/3,une=[0,kc,2*kc,3*kc,4*kc,5*kc];function cne(e){return e[0]}function fne(e){return e[1]}function dne(){var e=0,t=0,n=1,r=1,a=cne,i=fne,o,s,l;function u(f){var d={},p=[],h,g=f.length;for(h=0;h<g;++h)if(!(isNaN(b=+a.call(null,v=f[h],h,f))||isNaN(y=+i.call(null,v,h,f)))){var v,b,y,x=Math.round(y=y/l),E=Math.round(b=b/s-(x&1)/2),T=y-x;if(Math.abs(T)*3>1){var C=b-E,I=E+(b<E?-1:1)/2,P=x+(y<x?-1:1),j=b-I,A=y-P;C*C+T*T>j*j+A*A&&(E=I+(x&1?1:-1)/2,x=P)}var S=E+"-"+x,M=d[S];M?M.push(v):(p.push(M=d[S]=[v]),M.x=(E+(x&1)/2)*s,M.y=x*l)}return p}function c(f){var d=0,p=0;return une.map(function(h){var g=Math.sin(h)*f,v=-Math.cos(h)*f,b=g-d,y=v-p;return d=g,p=v,[b,y]})}return u.hexagon=function(f){return"m"+c(f==null?o:+f).join("l")+"z"},u.centers=function(){for(var f=[],d=Math.round(t/l),p=Math.round(e/s),h=d*l;h<r+o;h+=l,++d)for(var g=p*s+(d&1)*s/2;g<n+s/2;g+=s)f.push([g,h]);return f},u.mesh=function(){var f=c(o).slice(0,4).join("l");return u.centers().map(function(d){return"M"+d+"m"+f}).join("")},u.x=function(f){return arguments.length?(a=f,u):a},u.y=function(f){return arguments.length?(i=f,u):i},u.radius=function(f){return arguments.length?(o=+f,s=o*2*Math.sin(kc),l=o*1.5,u):o},u.size=function(f){return arguments.length?(e=t=0,n=+f[0],r=+f[1],u):[n-e,r-t]},u.extent=function(f){return arguments.length?(e=+f[0][0],t=+f[0][1],n=+f[1][0],r=+f[1][1],u):[[e,t],[n,r]]},u.radius(1)}function mC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function gC(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?mC(Object(n),!0).forEach(function(r){m(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):mC(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var pne=6378e3;function hne(e,t){var n=e.dataArray,r=t.size,a=r===void 0?10:r,i=t.method,o=i===void 0?"sum":i,s=a/(2*Math.PI*pne)*(256<<20)/2,l=n.map(function(d){var p=Uo(d.coordinates),h=Le(p,2),g=h[0],v=h[1];return gC(gC({},d),{},{coordinates:[g,v]})}),u=dne().radius(s).x(function(d){return d.coordinates[0]}).y(function(d){return d.coordinates[1]}),c=u(l),f={dataArray:c.map(function(d,p){var h;if(t.field&&o){var g=d2(d,t.field);d[o]=f2[o](g)}return h={},m(h,t.method,d[o]),m(h,"count",d.length),m(h,"rawData",d),m(h,"coordinates",[d.x,d.y]),m(h,"_id",p),h}),radius:s,xOffset:s,yOffset:s,type:"hexagon"};return f}function vC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function bC(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?vC(Object(n),!0).forEach(function(r){m(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vC(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function mne(e,t){var n=t.sourceField,r=t.targetField,a=t.data,i={};return a.forEach(function(o){i[o[n]]=o}),e.dataArray=e.dataArray.map(function(o){var s=o[r];return bC(bC({},o),i[s])}),e}function gne(e,t){var n=t.callback;return n&&(e.dataArray=e.dataArray.map(n)),e}Nu("rasterTile",FH);Nu("mvt",MH);Nu("geojson",FV);Nu("image",f7);Nu("csv",TV);Nu("json",LI);Nu("raster",RH);If("cluster",oL);If("filter",tne);If("join",mne);If("map",gne);If("grid",rne);If("hexagon",hne);var vne=SV,bne=CV;/*! *****************************************************************************
Copyright (C) Microsoft. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */var yC;(function(e){(function(t){var n=typeof bs=="object"?bs:typeof self=="object"?self:typeof this=="object"?this:Function("return this;")(),r=a(e);typeof n.Reflect=="undefined"?n.Reflect=e:r=a(n.Reflect,r),t(r);function a(i,o){return function(s,l){typeof i[s]!="function"&&Object.defineProperty(i,s,{configurable:!0,writable:!0,value:l}),o&&o(s,l)}}})(function(t){var n=Object.prototype.hasOwnProperty,r=typeof Symbol=="function",a=r&&typeof Symbol.toPrimitive!="undefined"?Symbol.toPrimitive:"@@toPrimitive",i=r&&typeof Symbol.iterator!="undefined"?Symbol.iterator:"@@iterator",o=typeof Object.create=="function",s={__proto__:[]}instanceof Array,l=!o&&!s,u={create:o?function(){return tr(Object.create(null))}:s?function(){return tr({__proto__:null})}:function(){return tr({})},has:l?function(k,Ce){return n.call(k,Ce)}:function(k,Ce){return Ce in k},get:l?function(k,Ce){return n.call(k,Ce)?k[Ce]:void 0}:function(k,Ce){return k[Ce]}},c=Object.getPrototypeOf(Function),f=typeof process=="object"&&process.env&&process.env.REFLECT_METADATA_USE_MAP_POLYFILL==="true",d=!f&&typeof Map=="function"&&typeof Map.prototype.entries=="function"?Map:An(),p=!f&&typeof Set=="function"&&typeof Set.prototype.entries=="function"?Set:_r(),h=!f&&typeof WeakMap=="function"?WeakMap:er(),g=new h;function v(k,Ce,Ie,lt){if(le(Ie)){if(!Je(k))throw new TypeError;if(!ve(Ce))throw new TypeError;return A(k,Ce)}else{if(!Je(k))throw new TypeError;if(!we(Ce))throw new TypeError;if(!we(lt)&&!le(lt)&&!fe(lt))throw new TypeError;return fe(lt)&&(lt=void 0),Ie=Fe(Ie),S(k,Ce,Ie,lt)}}t("decorate",v);function b(k,Ce){function Ie(lt,_t){if(!we(lt))throw new TypeError;if(!le(_t)&&!pt(_t))throw new TypeError;re(k,Ce,lt,_t)}return Ie}t("metadata",b);function y(k,Ce,Ie,lt){if(!we(Ie))throw new TypeError;return le(lt)||(lt=Fe(lt)),re(k,Ce,Ie,lt)}t("defineMetadata",y);function x(k,Ce,Ie){if(!we(Ce))throw new TypeError;return le(Ie)||(Ie=Fe(Ie)),O(k,Ce,Ie)}t("hasMetadata",x);function E(k,Ce,Ie){if(!we(Ce))throw new TypeError;return le(Ie)||(Ie=Fe(Ie)),R(k,Ce,Ie)}t("hasOwnMetadata",E);function T(k,Ce,Ie){if(!we(Ce))throw new TypeError;return le(Ie)||(Ie=Fe(Ie)),H(k,Ce,Ie)}t("getMetadata",T);function C(k,Ce,Ie){if(!we(Ce))throw new TypeError;return le(Ie)||(Ie=Fe(Ie)),ee(k,Ce,Ie)}t("getOwnMetadata",C);function I(k,Ce){if(!we(k))throw new TypeError;return le(Ce)||(Ce=Fe(Ce)),Y(k,Ce)}t("getMetadataKeys",I);function P(k,Ce){if(!we(k))throw new TypeError;return le(Ce)||(Ce=Fe(Ce)),J(k,Ce)}t("getOwnMetadataKeys",P);function j(k,Ce,Ie){if(!we(Ce))throw new TypeError;le(Ie)||(Ie=Fe(Ie));var lt=M(Ce,Ie,!1);if(le(lt)||!lt.delete(k))return!1;if(lt.size>0)return!0;var _t=g.get(Ce);return _t.delete(Ie),_t.size>0||g.delete(Ce),!0}t("deleteMetadata",j);function A(k,Ce){for(var Ie=k.length-1;Ie>=0;--Ie){var lt=k[Ie],_t=lt(Ce);if(!le(_t)&&!fe(_t)){if(!ve(_t))throw new TypeError;Ce=_t}}return Ce}function S(k,Ce,Ie,lt){for(var _t=k.length-1;_t>=0;--_t){var Yt=k[_t],St=Yt(Ce,Ie,lt);if(!le(St)&&!fe(St)){if(!we(St))throw new TypeError;lt=St}}return lt}function M(k,Ce,Ie){var lt=g.get(k);if(le(lt)){if(!Ie)return;lt=new d,g.set(k,lt)}var _t=lt.get(Ce);if(le(_t)){if(!Ie)return;_t=new d,lt.set(Ce,_t)}return _t}function O(k,Ce,Ie){var lt=R(k,Ce,Ie);if(lt)return!0;var _t=Gt(Ce);return fe(_t)?!1:O(k,_t,Ie)}function R(k,Ce,Ie){var lt=M(Ce,Ie,!1);return le(lt)?!1:Nt(lt.has(k))}function H(k,Ce,Ie){var lt=R(k,Ce,Ie);if(lt)return ee(k,Ce,Ie);var _t=Gt(Ce);if(!fe(_t))return H(k,_t,Ie)}function ee(k,Ce,Ie){var lt=M(Ce,Ie,!1);if(!le(lt))return lt.get(k)}function re(k,Ce,Ie,lt){var _t=M(Ie,lt,!0);_t.set(k,Ce)}function Y(k,Ce){var Ie=J(k,Ce),lt=Gt(k);if(lt===null)return Ie;var _t=Y(lt,Ce);if(_t.length<=0)return Ie;if(Ie.length<=0)return _t;for(var Yt=new p,St=[],Rt=0,Tt=Ie;Rt<Tt.length;Rt++){var $t=Tt[Rt],Bt=Yt.has($t);Bt||(Yt.add($t),St.push($t))}for(var Sn=0,Bn=_t;Sn<Bn.length;Sn++){var $t=Bn[Sn],Bt=Yt.has($t);Bt||(Yt.add($t),St.push($t))}return St}function J(k,Ce){var Ie=[],lt=M(k,Ce,!1);if(le(lt))return Ie;for(var _t=lt.keys(),Yt=wt(_t),St=0;;){var Rt=ht(Yt);if(!Rt)return Ie.length=St,Ie;var Tt=At(Rt);try{Ie[St]=Tt}catch($t){try{jt(Yt)}finally{throw $t}}St++}}function ae(k){if(k===null)return 1;switch(typeof k){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return k===null?1:6;default:return 6}}function le(k){return k===void 0}function fe(k){return k===null}function ge(k){return typeof k=="symbol"}function we(k){return typeof k=="object"?k!==null:typeof k=="function"}function Ve(k,Ce){switch(ae(k)){case 0:return k;case 1:return k;case 2:return k;case 3:return k;case 4:return k;case 5:return k}var Ie=Ce===3?"string":Ce===5?"number":"default",lt=kt(k,a);if(lt!==void 0){var _t=lt.call(k,Ie);if(we(_t))throw new TypeError;return _t}return Lt(k,Ie==="default"?"number":Ie)}function Lt(k,Ce){if(Ce==="string"){var Ie=k.toString;if(tt(Ie)){var lt=Ie.call(k);if(!we(lt))return lt}var _t=k.valueOf;if(tt(_t)){var lt=_t.call(k);if(!we(lt))return lt}}else{var _t=k.valueOf;if(tt(_t)){var lt=_t.call(k);if(!we(lt))return lt}var Yt=k.toString;if(tt(Yt)){var lt=Yt.call(k);if(!we(lt))return lt}}throw new TypeError}function Nt(k){return!!k}function Zt(k){return""+k}function Fe(k){var Ce=Ve(k,3);return ge(Ce)?Ce:Zt(Ce)}function Je(k){return Array.isArray?Array.isArray(k):k instanceof Object?k instanceof Array:Object.prototype.toString.call(k)==="[object Array]"}function tt(k){return typeof k=="function"}function ve(k){return typeof k=="function"}function pt(k){switch(ae(k)){case 3:return!0;case 4:return!0;default:return!1}}function kt(k,Ce){var Ie=k[Ce];if(Ie!=null){if(!tt(Ie))throw new TypeError;return Ie}}function wt(k){var Ce=kt(k,i);if(!tt(Ce))throw new TypeError;var Ie=Ce.call(k);if(!we(Ie))throw new TypeError;return Ie}function At(k){return k.value}function ht(k){var Ce=k.next();return Ce.done?!1:Ce}function jt(k){var Ce=k.return;Ce&&Ce.call(k)}function Gt(k){var Ce=Object.getPrototypeOf(k);if(typeof k!="function"||k===c||Ce!==c)return Ce;var Ie=k.prototype,lt=Ie&&Object.getPrototypeOf(Ie);if(lt==null||lt===Object.prototype)return Ce;var _t=lt.constructor;return typeof _t!="function"||_t===k?Ce:_t}function An(){var k={},Ce=[],Ie=function(){function St(Rt,Tt,$t){this._index=0,this._keys=Rt,this._values=Tt,this._selector=$t}return St.prototype["@@iterator"]=function(){return this},St.prototype[i]=function(){return this},St.prototype.next=function(){var Rt=this._index;if(Rt>=0&&Rt<this._keys.length){var Tt=this._selector(this._keys[Rt],this._values[Rt]);return Rt+1>=this._keys.length?(this._index=-1,this._keys=Ce,this._values=Ce):this._index++,{value:Tt,done:!1}}return{value:void 0,done:!0}},St.prototype.throw=function(Rt){throw this._index>=0&&(this._index=-1,this._keys=Ce,this._values=Ce),Rt},St.prototype.return=function(Rt){return this._index>=0&&(this._index=-1,this._keys=Ce,this._values=Ce),{value:Rt,done:!0}},St}();return function(){function St(){this._keys=[],this._values=[],this._cacheKey=k,this._cacheIndex=-2}return Object.defineProperty(St.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),St.prototype.has=function(Rt){return this._find(Rt,!1)>=0},St.prototype.get=function(Rt){var Tt=this._find(Rt,!1);return Tt>=0?this._values[Tt]:void 0},St.prototype.set=function(Rt,Tt){var $t=this._find(Rt,!0);return this._values[$t]=Tt,this},St.prototype.delete=function(Rt){var Tt=this._find(Rt,!1);if(Tt>=0){for(var $t=this._keys.length,Bt=Tt+1;Bt<$t;Bt++)this._keys[Bt-1]=this._keys[Bt],this._values[Bt-1]=this._values[Bt];return this._keys.length--,this._values.length--,Rt===this._cacheKey&&(this._cacheKey=k,this._cacheIndex=-2),!0}return!1},St.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=k,this._cacheIndex=-2},St.prototype.keys=function(){return new Ie(this._keys,this._values,lt)},St.prototype.values=function(){return new Ie(this._keys,this._values,_t)},St.prototype.entries=function(){return new Ie(this._keys,this._values,Yt)},St.prototype["@@iterator"]=function(){return this.entries()},St.prototype[i]=function(){return this.entries()},St.prototype._find=function(Rt,Tt){return this._cacheKey!==Rt&&(this._cacheIndex=this._keys.indexOf(this._cacheKey=Rt)),this._cacheIndex<0&&Tt&&(this._cacheIndex=this._keys.length,this._keys.push(Rt),this._values.push(void 0)),this._cacheIndex},St}();function lt(St,Rt){return St}function _t(St,Rt){return Rt}function Yt(St,Rt){return[St,Rt]}}function _r(){return function(){function k(){this._map=new d}return Object.defineProperty(k.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),k.prototype.has=function(Ce){return this._map.has(Ce)},k.prototype.add=function(Ce){return this._map.set(Ce,Ce),this},k.prototype.delete=function(Ce){return this._map.delete(Ce)},k.prototype.clear=function(){this._map.clear()},k.prototype.keys=function(){return this._map.keys()},k.prototype.values=function(){return this._map.values()},k.prototype.entries=function(){return this._map.entries()},k.prototype["@@iterator"]=function(){return this.keys()},k.prototype[i]=function(){return this.keys()},k}()}function er(){var k=16,Ce=u.create(),Ie=lt();return function(){function Tt(){this._key=lt()}return Tt.prototype.has=function($t){var Bt=_t($t,!1);return Bt!==void 0?u.has(Bt,this._key):!1},Tt.prototype.get=function($t){var Bt=_t($t,!1);return Bt!==void 0?u.get(Bt,this._key):void 0},Tt.prototype.set=function($t,Bt){var Sn=_t($t,!0);return Sn[this._key]=Bt,this},Tt.prototype.delete=function($t){var Bt=_t($t,!1);return Bt!==void 0?delete Bt[this._key]:!1},Tt.prototype.clear=function(){this._key=lt()},Tt}();function lt(){var Tt;do Tt="@@WeakMap@@"+Rt();while(u.has(Ce,Tt));return Ce[Tt]=!0,Tt}function _t(Tt,$t){if(!n.call(Tt,Ie)){if(!$t)return;Object.defineProperty(Tt,Ie,{value:u.create()})}return Tt[Ie]}function Yt(Tt,$t){for(var Bt=0;Bt<$t;++Bt)Tt[Bt]=Math.random()*255|0;return Tt}function St(Tt){return typeof Uint8Array=="function"?typeof crypto!="undefined"?crypto.getRandomValues(new Uint8Array(Tt)):typeof msCrypto!="undefined"?msCrypto.getRandomValues(new Uint8Array(Tt)):Yt(new Uint8Array(Tt),Tt):Yt(new Array(Tt),Tt)}function Rt(){var Tt=St(k);Tt[6]=Tt[6]&79|64,Tt[8]=Tt[8]&191|128;for(var $t="",Bt=0;Bt<k;++Bt){var Sn=Tt[Bt];(Bt===4||Bt===6||Bt===8)&&($t+="-"),Sn<16&&($t+="0"),$t+=Sn.toString(16).toLowerCase()}return $t}}function tr(k){return k.__=void 0,delete k.__,k}})})(yC||(yC={}));var Ho="named",lL="name",L2="unmanaged",uL="optional",Av="inject",th="multi_inject",cL="inversify:tagged",fL="inversify:tagged_props",iw="inversify:paramtypes",yne="design:paramtypes",xp="post_construct";function xne(){return[Av,th,lL,L2,Ho,uL]}var xC=xne(),wa={Request:"Request",Singleton:"Singleton",Transient:"Transient"},xa={ConstantValue:"ConstantValue",Constructor:"Constructor",DynamicValue:"DynamicValue",Factory:"Factory",Function:"Function",Instance:"Instance",Invalid:"Invalid",Provider:"Provider"},ws={ClassProperty:"ClassProperty",ConstructorArgument:"ConstructorArgument",Variable:"Variable"},wne=0;function Mh(){return wne++}var _ne=function(){function e(t,n){this.id=Mh(),this.activated=!1,this.serviceIdentifier=t,this.scope=n,this.type=xa.Invalid,this.constraint=function(r){return!0},this.implementationType=null,this.cache=null,this.factory=null,this.provider=null,this.onActivation=null,this.dynamicValue=null}return e.prototype.clone=function(){var t=new e(this.serviceIdentifier,this.scope);return t.activated=t.scope===wa.Singleton?this.activated:!1,t.implementationType=this.implementationType,t.dynamicValue=this.dynamicValue,t.scope=this.scope,t.type=this.type,t.factory=this.factory,t.provider=this.provider,t.constraint=this.constraint,t.onActivation=this.onActivation,t.cache=this.cache,t},e}(),Ene="Cannot apply @injectable decorator multiple times.",kne="Metadata key was used more than once in a parameter:",Ad="NULL argument",wC="Key Not Found",Sne="Ambiguous match found for serviceIdentifier:",Cne="Could not unbind serviceIdentifier:",Tne="No matching bindings found for serviceIdentifier:",Ane="Missing required @injectable annotation in:",One="Missing required @inject or @multiInject annotation in:",Mne=function(e){return"@inject called with undefined this could mean that the class "+e+" has a circular dependency problem. You can use a LazyServiceIdentifer to  overcome this limitation."},Rne="Circular dependency found:",Pne="Invalid binding type:",Ine="No snapshot available to restore.",Lne="Invalid return type in middleware. Middleware must return!",Nne="Value provided to function binding must be a function!",Fne="The toSelf function can only be applied when a constructor is used as service identifier",Dne="The @inject @multiInject @tagged and @named decorators must be applied to the parameters of a class constructor or a class property.",Bne=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return"The number of constructor arguments in the derived class "+(e[0]+" must be >= than the number of constructor arguments of its base class.")},zne="Invalid Container constructor argument. Container options must be an object.",Une="Invalid Container option. Default scope must be a string ('singleton' or 'transient').",$ne="Invalid Container option. Auto bind injectable must be a boolean",Vne="Invalid Container option. Skip base check must be a boolean",jne="Cannot apply @postConstruct decorator multiple times in the same class",Gne=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return"@postConstruct error in class "+e[0]+": "+e[1]},Hne=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return"It looks like there is a circular dependency "+("in one of the '"+e[0]+"' bindings. Please investigate bindings with")+("service identifier '"+e[1]+"'.")},Wne="Maximum call stack size exceeded",Xne=function(){function e(){}return e.prototype.getConstructorMetadata=function(t){var n=Reflect.getMetadata(iw,t),r=Reflect.getMetadata(cL,t);return{compilerGeneratedMetadata:n,userGeneratedMetadata:r||{}}},e.prototype.getPropertiesMetadata=function(t){var n=Reflect.getMetadata(fL,t)||[];return n},e}(),R0={MultipleBindingsAvailable:2,NoBindingsAvailable:0,OnlyOneBindingAvailable:1};function dL(e){return e instanceof RangeError||e.message===Wne}function nh(e){if(typeof e=="function"){var t=e;return t.name}else{if(typeof e=="symbol")return e.toString();var t=e;return t}}function _C(e,t,n){var r="",a=n(e,t);return a.length!==0&&(r=`
Registered bindings:`,a.forEach(function(i){var o="Object";i.implementationType!==null&&(o=Ov(i.implementationType)),r=r+`
 `+o,i.constraint.metaData&&(r=r+" - "+i.constraint.metaData)})),r}function pL(e,t){return e.parentRequest===null?!1:e.parentRequest.serviceIdentifier===t?!0:pL(e.parentRequest,t)}function Yne(e){function t(r,a){a===void 0&&(a=[]);var i=nh(r.serviceIdentifier);return a.push(i),r.parentRequest!==null?t(r.parentRequest,a):a}var n=t(e);return n.reverse().join(" --> ")}function hL(e){e.childRequests.forEach(function(t){if(pL(t,t.serviceIdentifier)){var n=Yne(t);throw new Error(Rne+" "+n)}else hL(t)})}function Zne(e,t){if(t.isTagged()||t.isNamed()){var n="",r=t.getNamedTag(),a=t.getCustomTags();return r!==null&&(n+=r.toString()+`
`),a!==null&&a.forEach(function(i){n+=i.toString()+`
`})," "+e+`
 `+e+" - "+n}else return" "+e}function Ov(e){if(e.name)return e.name;var t=e.toString(),n=t.match(/^function\s*([^\s(]+)/);return n?n[1]:"Anonymous function: "+t}var mL=function(){function e(t){this.id=Mh(),this.container=t}return e.prototype.addPlan=function(t){this.plan=t},e.prototype.setCurrentRequest=function(t){this.currentRequest=t},e}(),Cl=function(){function e(t,n){this.key=t,this.value=n}return e.prototype.toString=function(){return this.key===Ho?"named: "+this.value.toString()+" ":"tagged: { key:"+this.key.toString()+", value: "+this.value+" }"},e}(),qne=function(){function e(t,n){this.parentContext=t,this.rootRequest=n}return e}();function Kne(e,t,n,r){var a=cL;gL(a,e,t,r,n)}function Qne(e,t,n){var r=fL;gL(r,e.constructor,t,n)}function gL(e,t,n,r,a){var i={},o=typeof a=="number",s=a!==void 0&&o?a.toString():n;if(o&&n!==void 0)throw new Error(Dne);Reflect.hasOwnMetadata(e,t)&&(i=Reflect.getMetadata(e,t));var l=i[s];if(!Array.isArray(l))l=[];else for(var u=0,c=l;u<c.length;u++){var f=c[u];if(f.key===r.key)throw new Error(kne+" "+f.key.toString())}l.push(r),i[s]=l,Reflect.defineMetadata(e,i,t)}function EC(e,t){Reflect.decorate(e,t)}function Jne(e,t){return function(n,r){t(n,r,e)}}function ere(e,t,n){typeof n=="number"?EC([Jne(n,e)],t):typeof n=="string"?Reflect.decorate([e],t,n):EC([e],t)}var tre=function(){function e(t){this._cb=t}return e.prototype.unwrap=function(){return this._cb()},e}();function ln(e){return function(t,n,r){if(e===void 0)throw new Error(Mne(t.name));var a=new Cl(Av,e);typeof r=="number"?Kne(t,n,r,a):Qne(t,n,a)}}var nre=function(){function e(t){this.str=t}return e.prototype.startsWith=function(t){return this.str.indexOf(t)===0},e.prototype.endsWith=function(t){var n="",r=t.split("").reverse().join("");return n=this.str.split("").reverse().join(""),this.startsWith.call({str:n},r)},e.prototype.contains=function(t){return this.str.indexOf(t)!==-1},e.prototype.equals=function(t){return this.str===t},e.prototype.value=function(){return this.str},e}(),Mv=function(){function e(t,n,r,a){this.id=Mh(),this.type=t,this.serviceIdentifier=r,this.name=new nre(n||""),this.metadata=new Array;var i=null;typeof a=="string"?i=new Cl(Ho,a):a instanceof Cl&&(i=a),i!==null&&this.metadata.push(i)}return e.prototype.hasTag=function(t){for(var n=0,r=this.metadata;n<r.length;n++){var a=r[n];if(a.key===t)return!0}return!1},e.prototype.isArray=function(){return this.hasTag(th)},e.prototype.matchesArray=function(t){return this.matchesTag(th)(t)},e.prototype.isNamed=function(){return this.hasTag(Ho)},e.prototype.isTagged=function(){return this.metadata.some(function(t){return xC.every(function(n){return t.key!==n})})},e.prototype.isOptional=function(){return this.matchesTag(uL)(!0)},e.prototype.getNamedTag=function(){return this.isNamed()?this.metadata.filter(function(t){return t.key===Ho})[0]:null},e.prototype.getCustomTags=function(){return this.isTagged()?this.metadata.filter(function(t){return xC.every(function(n){return t.key!==n})}):null},e.prototype.matchesNamedTag=function(t){return this.matchesTag(Ho)(t)},e.prototype.matchesTag=function(t){var n=this;return function(r){for(var a=0,i=n.metadata;a<i.length;a++){var o=i[a];if(o.key===t&&o.value===r)return!0}return!1}},e}(),Eg=globalThis&&globalThis.__spreadArray||function(e,t){for(var n=0,r=t.length,a=e.length;n<r;n++,a++)e[a]=t[n];return e};function rre(e,t){var n=Ov(t),r=vL(e,n,t,!1);return r}function vL(e,t,n,r){var a=e.getConstructorMetadata(n),i=a.compilerGeneratedMetadata;if(i===void 0){var o=Ane+" "+t+".";throw new Error(o)}var s=a.userGeneratedMetadata,l=Object.keys(s),u=n.length===0&&l.length>0,c=l.length>n.length,f=u||c?l.length:n.length,d=ire(r,t,i,s,f),p=bL(e,n),h=Eg(Eg([],d),p);return h}function are(e,t,n,r,a){var i=a[e.toString()]||[],o=xL(i),s=o.unmanaged!==!0,l=r[e],u=o.inject||o.multiInject;if(l=u||l,l instanceof tre&&(l=l.unwrap()),s){var c=l===Object,f=l===Function,d=l===void 0,p=c||f||d;if(!t&&p){var h=One+" argument "+e+" in class "+n+".";throw new Error(h)}var g=new Mv(ws.ConstructorArgument,o.targetName,l);return g.metadata=i,g}return null}function ire(e,t,n,r,a){for(var i=[],o=0;o<a;o++){var s=o,l=are(s,e,t,n,r);l!==null&&i.push(l)}return i}function bL(e,t){for(var n=e.getPropertiesMetadata(t),r=[],a=Object.keys(n),i=0,o=a;i<o.length;i++){var s=o[i],l=n[s],u=xL(n[s]),c=u.targetName||s,f=u.inject||u.multiInject,d=new Mv(ws.ClassProperty,c,f);d.metadata=l,r.push(d)}var p=Object.getPrototypeOf(t.prototype).constructor;if(p!==Object){var h=bL(e,p);r=Eg(Eg([],r),h)}return r}function yL(e,t){var n=Object.getPrototypeOf(t.prototype).constructor;if(n!==Object){var r=Ov(n),a=vL(e,r,n,!0),i=a.map(function(l){return l.metadata.filter(function(u){return u.key===L2})}),o=[].concat.apply([],i).length,s=a.length-o;return s>0?s:yL(e,n)}else return 0}function xL(e){var t={};return e.forEach(function(n){t[n.key.toString()]=n.value}),{inject:t[Av],multiInject:t[th],targetName:t[lL],unmanaged:t[L2]}}var N2=function(){function e(t,n,r,a,i){this.id=Mh(),this.serviceIdentifier=t,this.parentContext=n,this.parentRequest=r,this.target=i,this.childRequests=[],this.bindings=Array.isArray(a)?a:[a],this.requestScope=r===null?new Map:null}return e.prototype.addChildRequest=function(t,n,r){var a=new e(t,this.parentContext,this,n,r);return this.childRequests.push(a),a},e}();function ow(e){return e._bindingDictionary}function ore(e,t,n,r,a,i){var o=e?th:Av,s=new Cl(o,n),l=new Mv(t,r,n,s);if(a!==void 0){var u=new Cl(a,i);l.metadata.push(u)}return l}function kC(e,t,n,r,a){var i=rh(n.container,a.serviceIdentifier),o=[];return i.length===R0.NoBindingsAvailable&&n.container.options.autoBindInjectable&&typeof a.serviceIdentifier=="function"&&e.getConstructorMetadata(a.serviceIdentifier).compilerGeneratedMetadata&&(n.container.bind(a.serviceIdentifier).toSelf(),i=rh(n.container,a.serviceIdentifier)),t?o=i:o=i.filter(function(s){var l=new N2(s.serviceIdentifier,n,r,s,a);return s.constraint(l)}),sre(a.serviceIdentifier,o,a,n.container),o}function sre(e,t,n,r){switch(t.length){case R0.NoBindingsAvailable:if(n.isOptional())return t;var a=nh(e),i=Tne;throw i+=Zne(a,n),i+=_C(r,a,rh),new Error(i);case R0.OnlyOneBindingAvailable:if(!n.isArray())return t;case R0.MultipleBindingsAvailable:default:if(n.isArray())return t;var a=nh(e),i=Sne+" "+a;throw i+=_C(r,a,rh),new Error(i)}}function wL(e,t,n,r,a,i){var o,s;if(a===null){o=kC(e,t,r,null,i),s=new N2(n,r,null,o,i);var l=new qne(r,s);r.addPlan(l)}else o=kC(e,t,r,a,i),s=a.addChildRequest(i.serviceIdentifier,o,i);o.forEach(function(u){var c=null;if(i.isArray())c=s.addChildRequest(u.serviceIdentifier,u,i);else{if(u.cache)return;c=s}if(u.type===xa.Instance&&u.implementationType!==null){var f=rre(e,u.implementationType);if(!r.container.options.skipBaseClassChecks){var d=yL(e,u.implementationType);if(f.length<d){var p=Bne(Ov(u.implementationType));throw new Error(p)}}f.forEach(function(h){wL(e,!1,h.serviceIdentifier,r,c,h)})}})}function rh(e,t){var n=[],r=ow(e);return r.hasKey(t)?n=r.get(t):e.parent!==null&&(n=rh(e.parent,t)),n}function lre(e,t,n,r,a,i,o,s){s===void 0&&(s=!1);var l=new mL(t),u=ore(n,r,a,"",i,o);try{return wL(e,s,a,l,null,u),l}catch(c){throw dL(c)&&l.plan&&hL(l.plan.rootRequest),c}}function ure(e,t,n,r){var a=new Mv(ws.Variable,"",t,new Cl(n,r)),i=new mL(e),o=new N2(t,i,null,[],a);return o}var cre=globalThis&&globalThis.__spreadArray||function(e,t){for(var n=0,r=t.length,a=e.length;n<r;n++,a++)e[a]=t[n];return e};function fre(e,t,n){var r=t.filter(function(i){return i.target!==null&&i.target.type===ws.ClassProperty}),a=r.map(n);return r.forEach(function(i,o){var s="";s=i.target.name.value();var l=a[o];e[s]=l}),e}function dre(e,t){return new(e.bind.apply(e,cre([void 0],t)))}function pre(e,t){if(Reflect.hasMetadata(xp,e)){var n=Reflect.getMetadata(xp,e);try{t[n.value]()}catch(r){throw new Error(Gne(e.name,r.message))}}}function hre(e,t,n){var r=null;if(t.length>0){var a=t.filter(function(o){return o.target!==null&&o.target.type===ws.ConstructorArgument}),i=a.map(n);r=dre(e,i),r=fre(r,t,n)}else r=new e;return pre(e,r),r}var Zy=function(e,t,n){try{return n()}catch(r){throw dL(r)?new Error(Hne(e,t.toString())):r}},sw=function(e){return function(t){t.parentContext.setCurrentRequest(t);var n=t.bindings,r=t.childRequests,a=t.target&&t.target.isArray(),i=!t.parentRequest||!t.parentRequest.target||!t.target||!t.parentRequest.target.matchesArray(t.target.serviceIdentifier);if(a&&i)return r.map(function(f){var d=sw(e);return d(f)});var o=null;if(t.target.isOptional()&&n.length===0)return;var s=n[0],l=s.scope===wa.Singleton,u=s.scope===wa.Request;if(l&&s.activated)return s.cache;if(u&&e!==null&&e.has(s.id))return e.get(s.id);if(s.type===xa.ConstantValue)o=s.cache,s.activated=!0;else if(s.type===xa.Function)o=s.cache,s.activated=!0;else if(s.type===xa.Constructor)o=s.implementationType;else if(s.type===xa.DynamicValue&&s.dynamicValue!==null)o=Zy("toDynamicValue",s.serviceIdentifier,function(){return s.dynamicValue(t.parentContext)});else if(s.type===xa.Factory&&s.factory!==null)o=Zy("toFactory",s.serviceIdentifier,function(){return s.factory(t.parentContext)});else if(s.type===xa.Provider&&s.provider!==null)o=Zy("toProvider",s.serviceIdentifier,function(){return s.provider(t.parentContext)});else if(s.type===xa.Instance&&s.implementationType!==null)o=hre(s.implementationType,r,sw(e));else{var c=nh(t.serviceIdentifier);throw new Error(Pne+" "+c)}return typeof s.onActivation=="function"&&(o=s.onActivation(t.parentContext,o)),l&&(s.cache=o,s.activated=!0),u&&e!==null&&!e.has(s.id)&&e.set(s.id,o),o}};function mre(e){var t=sw(e.plan.rootRequest.requestScope);return t(e.plan.rootRequest)}var ds=function(e,t){var n=e.parentRequest;return n!==null?t(n)?!0:ds(n,t):!1},tp=function(e){return function(t){var n=function(r){return r!==null&&r.target!==null&&r.target.matchesTag(e)(t)};return n.metaData=new Cl(e,t),n}},$m=tp(Ho),qy=function(e){return function(t){var n=null;if(t!==null)if(n=t.bindings[0],typeof e=="string"){var r=n.serviceIdentifier;return r===e}else{var a=t.bindings[0].implementationType;return e===a}return!1}},F2=function(){function e(t){this._binding=t}return e.prototype.when=function(t){return this._binding.constraint=t,new va(this._binding)},e.prototype.whenTargetNamed=function(t){return this._binding.constraint=$m(t),new va(this._binding)},e.prototype.whenTargetIsDefault=function(){return this._binding.constraint=function(t){var n=t.target!==null&&!t.target.isNamed()&&!t.target.isTagged();return n},new va(this._binding)},e.prototype.whenTargetTagged=function(t,n){return this._binding.constraint=tp(t)(n),new va(this._binding)},e.prototype.whenInjectedInto=function(t){return this._binding.constraint=function(n){return qy(t)(n.parentRequest)},new va(this._binding)},e.prototype.whenParentNamed=function(t){return this._binding.constraint=function(n){return $m(t)(n.parentRequest)},new va(this._binding)},e.prototype.whenParentTagged=function(t,n){return this._binding.constraint=function(r){return tp(t)(n)(r.parentRequest)},new va(this._binding)},e.prototype.whenAnyAncestorIs=function(t){return this._binding.constraint=function(n){return ds(n,qy(t))},new va(this._binding)},e.prototype.whenNoAncestorIs=function(t){return this._binding.constraint=function(n){return!ds(n,qy(t))},new va(this._binding)},e.prototype.whenAnyAncestorNamed=function(t){return this._binding.constraint=function(n){return ds(n,$m(t))},new va(this._binding)},e.prototype.whenNoAncestorNamed=function(t){return this._binding.constraint=function(n){return!ds(n,$m(t))},new va(this._binding)},e.prototype.whenAnyAncestorTagged=function(t,n){return this._binding.constraint=function(r){return ds(r,tp(t)(n))},new va(this._binding)},e.prototype.whenNoAncestorTagged=function(t,n){return this._binding.constraint=function(r){return!ds(r,tp(t)(n))},new va(this._binding)},e.prototype.whenAnyAncestorMatches=function(t){return this._binding.constraint=function(n){return ds(n,t)},new va(this._binding)},e.prototype.whenNoAncestorMatches=function(t){return this._binding.constraint=function(n){return!ds(n,t)},new va(this._binding)},e}(),va=function(){function e(t){this._binding=t}return e.prototype.onActivation=function(t){return this._binding.onActivation=t,new F2(this._binding)},e}(),al=function(){function e(t){this._binding=t,this._bindingWhenSyntax=new F2(this._binding),this._bindingOnSyntax=new va(this._binding)}return e.prototype.when=function(t){return this._bindingWhenSyntax.when(t)},e.prototype.whenTargetNamed=function(t){return this._bindingWhenSyntax.whenTargetNamed(t)},e.prototype.whenTargetIsDefault=function(){return this._bindingWhenSyntax.whenTargetIsDefault()},e.prototype.whenTargetTagged=function(t,n){return this._bindingWhenSyntax.whenTargetTagged(t,n)},e.prototype.whenInjectedInto=function(t){return this._bindingWhenSyntax.whenInjectedInto(t)},e.prototype.whenParentNamed=function(t){return this._bindingWhenSyntax.whenParentNamed(t)},e.prototype.whenParentTagged=function(t,n){return this._bindingWhenSyntax.whenParentTagged(t,n)},e.prototype.whenAnyAncestorIs=function(t){return this._bindingWhenSyntax.whenAnyAncestorIs(t)},e.prototype.whenNoAncestorIs=function(t){return this._bindingWhenSyntax.whenNoAncestorIs(t)},e.prototype.whenAnyAncestorNamed=function(t){return this._bindingWhenSyntax.whenAnyAncestorNamed(t)},e.prototype.whenAnyAncestorTagged=function(t,n){return this._bindingWhenSyntax.whenAnyAncestorTagged(t,n)},e.prototype.whenNoAncestorNamed=function(t){return this._bindingWhenSyntax.whenNoAncestorNamed(t)},e.prototype.whenNoAncestorTagged=function(t,n){return this._bindingWhenSyntax.whenNoAncestorTagged(t,n)},e.prototype.whenAnyAncestorMatches=function(t){return this._bindingWhenSyntax.whenAnyAncestorMatches(t)},e.prototype.whenNoAncestorMatches=function(t){return this._bindingWhenSyntax.whenNoAncestorMatches(t)},e.prototype.onActivation=function(t){return this._bindingOnSyntax.onActivation(t)},e}(),gre=function(){function e(t){this._binding=t}return e.prototype.inRequestScope=function(){return this._binding.scope=wa.Request,new al(this._binding)},e.prototype.inSingletonScope=function(){return this._binding.scope=wa.Singleton,new al(this._binding)},e.prototype.inTransientScope=function(){return this._binding.scope=wa.Transient,new al(this._binding)},e}(),SC=function(){function e(t){this._binding=t,this._bindingWhenSyntax=new F2(this._binding),this._bindingOnSyntax=new va(this._binding),this._bindingInSyntax=new gre(t)}return e.prototype.inRequestScope=function(){return this._bindingInSyntax.inRequestScope()},e.prototype.inSingletonScope=function(){return this._bindingInSyntax.inSingletonScope()},e.prototype.inTransientScope=function(){return this._bindingInSyntax.inTransientScope()},e.prototype.when=function(t){return this._bindingWhenSyntax.when(t)},e.prototype.whenTargetNamed=function(t){return this._bindingWhenSyntax.whenTargetNamed(t)},e.prototype.whenTargetIsDefault=function(){return this._bindingWhenSyntax.whenTargetIsDefault()},e.prototype.whenTargetTagged=function(t,n){return this._bindingWhenSyntax.whenTargetTagged(t,n)},e.prototype.whenInjectedInto=function(t){return this._bindingWhenSyntax.whenInjectedInto(t)},e.prototype.whenParentNamed=function(t){return this._bindingWhenSyntax.whenParentNamed(t)},e.prototype.whenParentTagged=function(t,n){return this._bindingWhenSyntax.whenParentTagged(t,n)},e.prototype.whenAnyAncestorIs=function(t){return this._bindingWhenSyntax.whenAnyAncestorIs(t)},e.prototype.whenNoAncestorIs=function(t){return this._bindingWhenSyntax.whenNoAncestorIs(t)},e.prototype.whenAnyAncestorNamed=function(t){return this._bindingWhenSyntax.whenAnyAncestorNamed(t)},e.prototype.whenAnyAncestorTagged=function(t,n){return this._bindingWhenSyntax.whenAnyAncestorTagged(t,n)},e.prototype.whenNoAncestorNamed=function(t){return this._bindingWhenSyntax.whenNoAncestorNamed(t)},e.prototype.whenNoAncestorTagged=function(t,n){return this._bindingWhenSyntax.whenNoAncestorTagged(t,n)},e.prototype.whenAnyAncestorMatches=function(t){return this._bindingWhenSyntax.whenAnyAncestorMatches(t)},e.prototype.whenNoAncestorMatches=function(t){return this._bindingWhenSyntax.whenNoAncestorMatches(t)},e.prototype.onActivation=function(t){return this._bindingOnSyntax.onActivation(t)},e}(),vre=function(){function e(t){this._binding=t}return e.prototype.to=function(t){return this._binding.type=xa.Instance,this._binding.implementationType=t,new SC(this._binding)},e.prototype.toSelf=function(){if(typeof this._binding.serviceIdentifier!="function")throw new Error(""+Fne);var t=this._binding.serviceIdentifier;return this.to(t)},e.prototype.toConstantValue=function(t){return this._binding.type=xa.ConstantValue,this._binding.cache=t,this._binding.dynamicValue=null,this._binding.implementationType=null,this._binding.scope=wa.Singleton,new al(this._binding)},e.prototype.toDynamicValue=function(t){return this._binding.type=xa.DynamicValue,this._binding.cache=null,this._binding.dynamicValue=t,this._binding.implementationType=null,new SC(this._binding)},e.prototype.toConstructor=function(t){return this._binding.type=xa.Constructor,this._binding.implementationType=t,this._binding.scope=wa.Singleton,new al(this._binding)},e.prototype.toFactory=function(t){return this._binding.type=xa.Factory,this._binding.factory=t,this._binding.scope=wa.Singleton,new al(this._binding)},e.prototype.toFunction=function(t){if(typeof t!="function")throw new Error(Nne);var n=this.toConstantValue(t);return this._binding.type=xa.Function,this._binding.scope=wa.Singleton,n},e.prototype.toAutoFactory=function(t){return this._binding.type=xa.Factory,this._binding.factory=function(n){var r=function(){return n.container.get(t)};return r},this._binding.scope=wa.Singleton,new al(this._binding)},e.prototype.toProvider=function(t){return this._binding.type=xa.Provider,this._binding.provider=t,this._binding.scope=wa.Singleton,new al(this._binding)},e.prototype.toService=function(t){this.toDynamicValue(function(n){return n.container.get(t)})},e}(),bre=function(){function e(){}return e.of=function(t,n){var r=new e;return r.bindings=t,r.middleware=n,r},e}(),CC=function(){function e(){this._map=new Map}return e.prototype.getMap=function(){return this._map},e.prototype.add=function(t,n){if(t==null)throw new Error(Ad);if(n==null)throw new Error(Ad);var r=this._map.get(t);r!==void 0?(r.push(n),this._map.set(t,r)):this._map.set(t,[n])},e.prototype.get=function(t){if(t==null)throw new Error(Ad);var n=this._map.get(t);if(n!==void 0)return n;throw new Error(wC)},e.prototype.remove=function(t){if(t==null)throw new Error(Ad);if(!this._map.delete(t))throw new Error(wC)},e.prototype.removeByCondition=function(t){var n=this;this._map.forEach(function(r,a){var i=r.filter(function(o){return!t(o)});i.length>0?n._map.set(a,i):n._map.delete(a)})},e.prototype.hasKey=function(t){if(t==null)throw new Error(Ad);return this._map.has(t)},e.prototype.clone=function(){var t=new e;return this._map.forEach(function(n,r){n.forEach(function(a){return t.add(r,a.clone())})}),t},e.prototype.traverse=function(t){this._map.forEach(function(n,r){t(r,n)})},e}(),yre=globalThis&&globalThis.__awaiter||function(e,t,n,r){function a(i){return i instanceof n?i:new n(function(o){o(i)})}return new(n||(n=Promise))(function(i,o){function s(c){try{u(r.next(c))}catch(f){o(f)}}function l(c){try{u(r.throw(c))}catch(f){o(f)}}function u(c){c.done?i(c.value):a(c.value).then(s,l)}u((r=r.apply(e,t||[])).next())})},xre=globalThis&&globalThis.__generator||function(e,t){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,a,i,o;return o={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function s(u){return function(c){return l([u,c])}}function l(u){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,a&&(i=u[0]&2?a.return:u[0]?a.throw||((i=a.return)&&i.call(a),0):a.next)&&!(i=i.call(a,u[1])).done)return i;switch(a=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return n.label++,{value:u[1],done:!1};case 5:n.label++,a=u[1],u=[0];continue;case 7:u=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){n=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){n.label=u[1];break}if(u[0]===6&&n.label<i[1]){n.label=i[1],i=u;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(u);break}i[2]&&n.ops.pop(),n.trys.pop();continue}u=t.call(e,n)}catch(c){u=[6,c],a=0}finally{r=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}},wre=globalThis&&globalThis.__spreadArray||function(e,t){for(var n=0,r=t.length,a=e.length;n<r;n++,a++)e[a]=t[n];return e},D2=function(){function e(t){this._appliedMiddleware=[];var n=t||{};if(typeof n!="object")throw new Error(""+zne);if(n.defaultScope===void 0)n.defaultScope=wa.Transient;else if(n.defaultScope!==wa.Singleton&&n.defaultScope!==wa.Transient&&n.defaultScope!==wa.Request)throw new Error(""+Une);if(n.autoBindInjectable===void 0)n.autoBindInjectable=!1;else if(typeof n.autoBindInjectable!="boolean")throw new Error(""+$ne);if(n.skipBaseClassChecks===void 0)n.skipBaseClassChecks=!1;else if(typeof n.skipBaseClassChecks!="boolean")throw new Error(""+Vne);this.options={autoBindInjectable:n.autoBindInjectable,defaultScope:n.defaultScope,skipBaseClassChecks:n.skipBaseClassChecks},this.id=Mh(),this._bindingDictionary=new CC,this._snapshots=[],this._middleware=null,this.parent=null,this._metadataReader=new Xne}return e.merge=function(t,n){for(var r=[],a=2;a<arguments.length;a++)r[a-2]=arguments[a];var i=new e,o=wre([t,n],r).map(function(u){return ow(u)}),s=ow(i);function l(u,c){u.traverse(function(f,d){d.forEach(function(p){c.add(p.serviceIdentifier,p.clone())})})}return o.forEach(function(u){l(u,s)}),i},e.prototype.load=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var r=this._getContainerModuleHelpersFactory(),a=0,i=t;a<i.length;a++){var o=i[a],s=r(o.id);o.registry(s.bindFunction,s.unbindFunction,s.isboundFunction,s.rebindFunction)}},e.prototype.loadAsync=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return yre(this,void 0,void 0,function(){var r,a,i,o,s;return xre(this,function(l){switch(l.label){case 0:r=this._getContainerModuleHelpersFactory(),a=0,i=t,l.label=1;case 1:return a<i.length?(o=i[a],s=r(o.id),[4,o.registry(s.bindFunction,s.unbindFunction,s.isboundFunction,s.rebindFunction)]):[3,4];case 2:l.sent(),l.label=3;case 3:return a++,[3,1];case 4:return[2]}})})},e.prototype.unload=function(){for(var t=this,n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var a=function(i){return function(o){return o.moduleId===i}};n.forEach(function(i){var o=a(i.id);t._bindingDictionary.removeByCondition(o)})},e.prototype.bind=function(t){var n=this.options.defaultScope||wa.Transient,r=new _ne(t,n);return this._bindingDictionary.add(t,r),new vre(r)},e.prototype.rebind=function(t){return this.unbind(t),this.bind(t)},e.prototype.unbind=function(t){try{this._bindingDictionary.remove(t)}catch{throw new Error(Cne+" "+nh(t))}},e.prototype.unbindAll=function(){this._bindingDictionary=new CC},e.prototype.isBound=function(t){var n=this._bindingDictionary.hasKey(t);return!n&&this.parent&&(n=this.parent.isBound(t)),n},e.prototype.isBoundNamed=function(t,n){return this.isBoundTagged(t,Ho,n)},e.prototype.isBoundTagged=function(t,n,r){var a=!1;if(this._bindingDictionary.hasKey(t)){var i=this._bindingDictionary.get(t),o=ure(this,t,n,r);a=i.some(function(s){return s.constraint(o)})}return!a&&this.parent&&(a=this.parent.isBoundTagged(t,n,r)),a},e.prototype.snapshot=function(){this._snapshots.push(bre.of(this._bindingDictionary.clone(),this._middleware))},e.prototype.restore=function(){var t=this._snapshots.pop();if(t===void 0)throw new Error(Ine);this._bindingDictionary=t.bindings,this._middleware=t.middleware},e.prototype.createChild=function(t){var n=new e(t||this.options);return n.parent=this,n},e.prototype.applyMiddleware=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];this._appliedMiddleware=this._appliedMiddleware.concat(t);var r=this._middleware?this._middleware:this._planAndResolve();this._middleware=t.reduce(function(a,i){return i(a)},r)},e.prototype.applyCustomMetadataReader=function(t){this._metadataReader=t},e.prototype.get=function(t){return this._get(!1,!1,ws.Variable,t)},e.prototype.getTagged=function(t,n,r){return this._get(!1,!1,ws.Variable,t,n,r)},e.prototype.getNamed=function(t,n){return this.getTagged(t,Ho,n)},e.prototype.getAll=function(t){return this._get(!0,!0,ws.Variable,t)},e.prototype.getAllTagged=function(t,n,r){return this._get(!1,!0,ws.Variable,t,n,r)},e.prototype.getAllNamed=function(t,n){return this.getAllTagged(t,Ho,n)},e.prototype.resolve=function(t){var n=this.createChild();return n.bind(t).toSelf(),this._appliedMiddleware.forEach(function(r){n.applyMiddleware(r)}),n.get(t)},e.prototype._getContainerModuleHelpersFactory=function(){var t=this,n=function(s,l){s._binding.moduleId=l},r=function(s){return function(l){var u=t.bind.bind(t),c=u(l);return n(c,s),c}},a=function(s){return function(l){var u=t.unbind.bind(t);u(l)}},i=function(s){return function(l){var u=t.isBound.bind(t);return u(l)}},o=function(s){return function(l){var u=t.rebind.bind(t),c=u(l);return n(c,s),c}};return function(s){return{bindFunction:r(s),isboundFunction:i(),rebindFunction:o(s),unbindFunction:a()}}},e.prototype._get=function(t,n,r,a,i,o){var s=null,l={avoidConstraints:t,contextInterceptor:function(u){return u},isMultiInject:n,key:i,serviceIdentifier:a,targetType:r,value:o};if(this._middleware){if(s=this._middleware(l),s==null)throw new Error(Lne)}else s=this._planAndResolve()(l);return s},e.prototype._planAndResolve=function(){var t=this;return function(n){var r=lre(t._metadataReader,t,n.isMultiInject,n.targetType,n.serviceIdentifier,n.key,n.value,n.avoidConstraints);r=n.contextInterceptor(r);var a=mre(r);return a}},e}();function nn(){return function(e){if(Reflect.hasOwnMetadata(iw,e))throw new Error(Ene);var t=Reflect.getMetadata(yne,e)||[];return Reflect.defineMetadata(iw,t,e),e}}function _re(){return function(e,t,n){var r=new Cl(xp,t);if(Reflect.hasOwnMetadata(xp,e.constructor))throw new Error(jne);Reflect.defineMetadata(xp,r,e.constructor)}}var Od=Symbol.for("INJECTION");function Rv(e,t,n,r){function a(){return r&&!Reflect.hasMetadata(Od,this,t)&&Reflect.defineMetadata(Od,n(),this,t),Reflect.hasMetadata(Od,this,t)?Reflect.getMetadata(Od,this,t):n()}function i(o){Reflect.defineMetadata(Od,o,this,t)}Object.defineProperty(e,t,{configurable:!0,enumerable:!0,get:a,set:i})}function Ere(e,t){return function(n){return function(r,a){var i=function(){return e.get(n)};Rv(r,a,i,t)}}}function kre(e,t){return function(n,r){return function(a,i){var o=function(){return e.getNamed(n,r)};Rv(a,i,o,t)}}}function Sre(e,t){return function(n,r,a){return function(i,o){var s=function(){return e.getTagged(n,r,a)};Rv(i,o,s,t)}}}function Cre(e,t){return function(n){return function(r,a){var i=function(){return e.getAll(n)};Rv(r,a,i,t)}}}function Tre(e,t){t===void 0&&(t=!0);var n=Ere(e,t),r=kre(e,t),a=Sre(e,t),i=Cre(e,t);return{lazyInject:n,lazyInjectNamed:r,lazyInjectTagged:a,lazyMultiInject:i}}var ye={IEventEmitter:Symbol.for("IEventEmitter"),ISceneService:Symbol.for("ISceneService"),IGlobalConfigService:Symbol.for("IGlobalConfigService"),ICameraService:Symbol.for("ICameraService"),ICoordinateSystemService:Symbol.for("ICoordinateSystemService"),ILayerService:Symbol.for("ILayerService"),ILayerMappingService:Symbol.for("ILayerMappingService"),ILayerStyleService:Symbol.for("ILayerStyleService"),IMapService:Symbol.for("IMapService"),IMarkerService:Symbol.for("IMarkerService"),IPopupService:Symbol.for("PopupService"),IFactoryMapService:Symbol.for("Factory<IMapService>"),IRendererService:Symbol.for("IRendererService"),IShaderModuleService:Symbol.for("IShaderModuleService"),IIconService:Symbol.for("IIconService"),IFontService:Symbol.for("IFontService"),IInteractionService:Symbol.for("IInteractionService"),IPickingService:Symbol.for("IPickingService"),IControlService:Symbol.for("IControlService"),IStyleAttributeService:Symbol.for("IStyleAttributeService"),ILayer:Symbol.for("ILayer"),ILayerPlugin:Symbol.for("ILayerPlugin"),INormalPass:Symbol.for("INormalPass"),IPostProcessor:Symbol.for("IPostProcessor"),IPostProcessingPass:Symbol.for("IPostProcessingPass"),IFactoryPostProcessingPass:Symbol.for("Factory<IPostProcessingPass>"),IFactoryNormalPass:Symbol.for("Factory<IFactoryNormalPass>"),IMultiPassRenderer:Symbol.for("IMultiPassRenderer"),SceneID:Symbol.for("SceneID"),MapConfig:Symbol.for("MapConfig")},B2={exports:{}};B2.exports=Rh;B2.exports.default=Rh;var af=1e20;function Rh(e,t,n,r,a,i){this.fontSize=e||24,this.buffer=t===void 0?3:t,this.cutoff=r||.25,this.fontFamily=a||"sans-serif",this.fontWeight=i||"normal",this.radius=n||8;var o=this.size=this.fontSize+this.buffer*2,s=o+this.buffer*2,l=typeof my!="undefined"&&!!my&&typeof my.showToast=="function"&&my.isFRM!==!0;l?this.canvas=my.createOffscreenCanvas(o,o,"2d"):(this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=o),this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textAlign="left",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(s*s),this.gridInner=new Float64Array(s*s),this.f=new Float64Array(s),this.z=new Float64Array(s+1),this.v=new Uint16Array(s),this.useMetrics=this.ctx.measureText("A").actualBoundingBoxLeft!==void 0,l?this.middle=Math.round(o/2*1):this.middle=Math.round(o/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function Are(e,t,n,r,a,i,o){i.fill(af,0,t*n),o.fill(0,0,t*n);for(var s=(t-r)/2,l=0;l<a;l++)for(var u=0;u<r;u++){var c=(l+s)*t+u+s,f=e.data[4*(l*r+u)+3]/255;if(f===1)i[c]=0,o[c]=af;else if(f===0)i[c]=af,o[c]=0;else{var d=Math.max(0,.5-f),p=Math.max(0,f-.5);i[c]=d*d,o[c]=p*p}}}function Ore(e,t,n,r,a,i,o){for(var s=0;s<t*n;s++){var l=Math.sqrt(r[s])-Math.sqrt(a[s]);e[s]=Math.round(255-255*(l/i+o))}}Rh.prototype._draw=function(e,t){var n=this.ctx.measureText(e),r=n.width,a=2*this.buffer,i,o,s,l,u,c,f,d;t&&this.useMetrics?(u=Math.floor(n.actualBoundingBoxAscent),d=this.buffer+Math.ceil(n.actualBoundingBoxAscent),c=this.buffer,f=this.buffer,o=Math.min(this.size,Math.ceil(n.actualBoundingBoxRight-n.actualBoundingBoxLeft)),l=Math.min(this.size-c,Math.ceil(n.actualBoundingBoxAscent+n.actualBoundingBoxDescent)),i=o+a,s=l+a,this.ctx.textBaseline="alphabetic"):(i=o=this.size,s=l=this.size,u=19*this.fontSize/24,c=f=0,d=this.middle,this.ctx.textBaseline="middle");var p;o&&l&&(this.ctx.clearRect(f,c,o,l),this.ctx.fillText(e,this.buffer,d),p=this.ctx.getImageData(f,c,o,l));var h=new Uint8ClampedArray(i*s);return Are(p,i,s,o,l,this.gridOuter,this.gridInner),TC(this.gridOuter,i,s,this.f,this.v,this.z),TC(this.gridInner,i,s,this.f,this.v,this.z),Ore(h,i,s,this.gridOuter,this.gridInner,this.radius,this.cutoff),{data:h,metrics:{width:o,height:l,sdfWidth:i,sdfHeight:s,top:u,left:0,advance:r}}};Rh.prototype.draw=function(e){return this._draw(e,!1).data};Rh.prototype.drawWithMetrics=function(e){return this._draw(e,!0)};function TC(e,t,n,r,a,i){for(var o=0;o<t;o++)AC(e,o,t,n,r,a,i);for(var s=0;s<n;s++)AC(e,s*t,1,t,r,a,i)}function AC(e,t,n,r,a,i,o){var s,l,u,c;for(i[0]=0,o[0]=-af,o[1]=af,s=0;s<r;s++)a[s]=e[t+s*n];for(s=1,l=0,u=0;s<r;s++){do c=i[l],u=(a[s]-a[c]+s*s-c*c)/(s-c)/2;while(u<=o[l]&&--l>-1);l++,i[l]=s,o[l]=u,o[l+1]=af}for(s=0,l=0;s<r;s++){for(;o[l+1]<s;)l++;c=i[l],e[t+s*n]=a[c]+(s-c)*(s-c)}}var Mre=B2.exports;function OC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function MC(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?OC(Object(n),!0).forEach(function(r){m(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):OC(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function _L(e,t){var n=typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=Rre(e))||t&&e&&typeof e.length=="number"){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(u){throw u},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i=!0,o=!1,s;return{s:function(){n=n.call(e)},n:function(){var u=n.next();return i=u.done,u},e:function(u){o=!0,s=u},f:function(){try{!i&&n.return!=null&&n.return()}finally{if(o)throw s}}}}function Rre(e,t){if(!!e){if(typeof e=="string")return RC(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return RC(e,t)}}function RC(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Md=30;function Pre(e){var t=e.characterSet,n=e.getFontWidth,r=e.fontHeight,a=e.buffer,i=e.maxCanvasWidth,o=e.mapping,s=o===void 0?{}:o,l=e.xOffset,u=l===void 0?0:l,c=e.yOffset,f=c===void 0?0:c,d=0,p=u;Array.from(t).forEach(function(g,v){if(!s[g]){var b=n(g,v);p+Md>i&&(p=0,d++),s[g]={x:p,y:f+d*Md,width:Md,height:Md,advance:b},p+=Md}});var h=r+a*2;return{mapping:s,xOffset:p,yOffset:f+d*h,canvasHeight:EL(f+(d+1)*h)}}function Ire(e,t,n){var r=0,a=0,i=0,o=[],s={},l=_L(e),u;try{for(l.s();!(u=l.n()).done;){var c=u.value;if(!s[c.id]){var f=c.size;r+f+t>n&&(PC(s,o,a),r=0,a=i+a+t,i=0,o=[]),o.push({icon:c,xOffset:r}),r=r+f+t,i=Math.max(i,f)}}}catch(p){l.e(p)}finally{l.f()}o.length>0&&PC(s,o,a);var d=EL(i+a+t);return{mapping:s,canvasHeight:d}}function PC(e,t,n){var r=_L(t),a;try{for(r.s();!(a=r.n()).done;){var i=a.value,o=i.icon,s=i.xOffset;e[o.id]=MC(MC({},o),{},{x:s,y:n,image:o.image,width:o.width,height:o.height})}}catch(l){r.e(l)}finally{r.f()}}function EL(e){return Math.pow(2,Math.ceil(Math.log2(e)))}var IC,LC;function NC(e,t){var n=typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=Lre(e))||t&&e&&typeof e.length=="number"){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(u){throw u},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i=!0,o=!1,s;return{s:function(){n=n.call(e)},n:function(){var u=n.next();return i=u.done,u},e:function(u){o=!0,s=u},f:function(){try{!i&&n.return!=null&&n.return()}finally{if(o)throw s}}}}function Lre(e,t){if(!!e){if(typeof e=="string")return FC(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return FC(e,t)}}function FC(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function DC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Ky(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?DC(Object(n),!0).forEach(function(r){m(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):DC(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var Nre=Gre(),Fre="sans-serif",Dre="normal",Bre=24,zre=3,Ure=.25,$re=8,BC=1024,Vre=1,zC=1,jre=3;function Gre(){for(var e=[],t=32;t<128;t++)e.push(String.fromCharCode(t));return e}function UC(e,t,n,r){e.font="".concat(r," ").concat(n,"px ").concat(t),e.fillStyle="black",e.textBaseline="middle"}function $C(e,t){for(var n=0;n<e.length;n++)t.data[4*n+3]=e[n]}var Hre=(IC=nn(),IC(LC=function(){function e(){Ae(this,e),m(this,"fontAtlas",void 0),m(this,"iconFontMap",void 0),m(this,"iconFontGlyphs",{}),m(this,"fontOptions",void 0),m(this,"key",void 0),m(this,"cache",new fG(jre))}return Oe(e,[{key:"scale",get:function(){return zC}},{key:"canvas",get:function(){var n=this.cache.get(this.key);return n&&n.data}},{key:"mapping",get:function(){var n=this.cache.get(this.key);return n&&n.mapping}},{key:"init",value:function(){this.cache.clear(),this.fontOptions={fontFamily:Fre,fontWeight:Dre,characterSet:Nre,fontSize:Bre,buffer:zre,sdf:!0,cutoff:Ure,radius:$re,iconfont:!1},this.key="",this.iconFontMap=new Map}},{key:"addIconGlyphs",value:function(n){var r=this;n.forEach(function(a){r.iconFontGlyphs[a.name]=a.unicode})}},{key:"addIconFont",value:function(n,r){this.iconFontMap.set(n,r)}},{key:"getIconFontKey",value:function(n){return this.iconFontMap.get(n)||n}},{key:"getGlyph",value:function(n){return this.iconFontGlyphs[n]?String.fromCharCode(parseInt(this.iconFontGlyphs[n],16)):""}},{key:"setFontOptions",value:function(n){this.fontOptions=Ky(Ky({},this.fontOptions),n),this.key=this.getKey();var r=this.getNewChars(this.key,this.fontOptions.characterSet),a=this.cache.get(this.key);if(!(a&&r.length===0)){var i=this.generateFontAtlas(this.key,r,a);this.fontAtlas=i,this.cache.set(this.key,i)}}},{key:"destroy",value:function(){this.cache.clear(),this.iconFontMap.clear()}},{key:"generateFontAtlas",value:function(n,r,a){var i=this.fontOptions,o=i.fontFamily,s=i.fontWeight,l=i.fontSize,u=i.buffer,c=i.sdf,f=i.radius,d=i.cutoff,p=i.iconfont,h=a&&a.data;h||(h=Hn.document.createElement("canvas"),h.width=BC);var g=h.getContext("2d");UC(g,o,l,s);var v=Pre(Ky({getFontWidth:function(re){return g.measureText(re).width},fontHeight:l*zC,buffer:u,characterSet:r,maxCanvasWidth:BC},a&&{mapping:a.mapping,xOffset:a.xOffset,yOffset:a.yOffset})),b=v.mapping,y=v.canvasHeight,x=v.xOffset,E=v.yOffset,T=g.getImageData(0,0,h.width,h.height);if(h.height=y,g.putImageData(T,0,0),UC(g,o,l,s),c){var C=new Mre(l,u,f,d,o,s),I=g.getImageData(0,0,C.size,C.size),P=NC(r),j;try{for(P.s();!(j=P.n()).done;){var A=j.value;if(p){var S=String.fromCharCode(parseInt(A.replace("&#x","").replace(";",""),16)),M=C.draw(S);$C(M,I)}else $C(C.draw(A),I);g.putImageData(I,b[A].x,b[A].y)}}catch(ee){P.e(ee)}finally{P.f()}}else{var O=NC(r),R;try{for(O.s();!(R=O.n()).done;){var H=R.value;g.fillText(H,b[H].x,b[H].y+l*Vre)}}catch(ee){O.e(ee)}finally{O.f()}}return{xOffset:x,yOffset:E,mapping:b,data:h,width:h.width,height:h.height}}},{key:"getKey",value:function(){return"key"}},{key:"getNewChars",value:function(n,r){var a=this.cache.get(n);if(!a)return r;var i=[],o=a.mapping,s=new Set(Object.keys(o)),l=new Set(r);return l.forEach(function(u){s.has(u)||i.push(u)}),i}}]),e}())||LC),VC,jC;function Wre(e){var t=Xre();return function(){var r=Ee(e),a;if(t){var i=Ee(this).constructor;a=Reflect.construct(r,arguments,i)}else a=r.apply(this,arguments);return Mt(this,a)}}function Xre(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var Yre=3,GC=1024,Rd=64,Zre=(VC=nn(),VC(jC=function(e){Ct(n,e);var t=Wre(n);function n(){var r;Ae(this,n);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return r=t.call.apply(t,[this].concat(i)),m(D(r),"canvasHeight",128),m(D(r),"texture",void 0),m(D(r),"canvas",void 0),m(D(r),"iconData",void 0),m(D(r),"iconMap",void 0),m(D(r),"ctx",void 0),m(D(r),"loadingImageCount",0),r}return Oe(n,[{key:"isLoading",value:function(){return this.loadingImageCount===0}},{key:"init",value:function(){this.iconData=[],this.iconMap={},this.canvas=Hn.document.createElement("canvas"),this.canvas.width=128,this.canvas.height=128,this.ctx=this.canvas.getContext("2d")}},{key:"addImage",value:function(a,i){var o=this,s=new Image;if(this.loadingImageCount++,this.hasImage(a))throw new Error("Image Id already exists");this.iconData.push({id:a,size:Rd}),this.updateIconMap(),this.loadImage(i).then(function(l){s=l;var u=o.iconData.find(function(c){return c.id===a});u&&(u.image=s,u.width=s.width,u.height=s.height),o.update()})}},{key:"addImageMini",value:function(a,i,o){var s=this,l=o.getSceneConfig().canvas,u=l.createImage();if(this.loadingImageCount++,this.hasImage(a))throw new Error("Image Id already exists");this.iconData.push({id:a,size:Rd}),this.updateIconMap(),this.loadImageMini(i,l).then(function(c){u=c;var f=s.iconData.find(function(d){return d.id===a});f&&(f.image=u,f.width=u.width,f.height=u.height),s.update()})}},{key:"getTexture",value:function(){return this.texture}},{key:"getIconMap",value:function(){return this.iconMap}},{key:"getCanvas",value:function(){return this.canvas}},{key:"hasImage",value:function(a){return this.iconMap.hasOwnProperty(a)}},{key:"removeImage",value:function(a){this.hasImage(a)&&(this.iconData=this.iconData.filter(function(i){return i.id!==a}),delete this.iconMap[a],this.update())}},{key:"destroy",value:function(){this.removeAllListeners("imageUpdate"),this.iconData=[],this.iconMap={}}},{key:"loadImage",value:function(a){return new Promise(function(i,o){if(a instanceof HTMLImageElement){i(a);return}var s=new Image;s.crossOrigin="anonymous",s.onload=function(){i(s)},s.onerror=function(){o(new Error("Could not load image at "+a))},s.src=a instanceof File?URL.createObjectURL(a):a})}},{key:"update",value:function(){this.updateIconMap(),this.updateIconAtlas(),this.loadingImageCount--,this.loadingImageCount===0&&this.emit("imageUpdate")}},{key:"updateIconAtlas",value:function(){var a=this;this.canvas.width=GC,this.canvas.height=this.canvasHeight,Object.keys(this.iconMap).forEach(function(i){var o=a.iconMap[i],s=o.x,l=o.y,u=o.image,c=o.width,f=c===void 0?64:c,d=o.height,p=d===void 0?64:d,h=Math.max(f,p),g=h/Rd,v=p/g,b=f/g;u&&a.ctx.drawImage(u,s+(Rd-b)/2,l+(Rd-v)/2,b,v)})}},{key:"updateIconMap",value:function(){var a=Ire(this.iconData,Yre,GC),i=a.mapping,o=a.canvasHeight;this.iconMap=i,this.canvasHeight=o}},{key:"loadImageMini",value:function(a,i){return new Promise(function(o,s){var l=i.createImage();l.crossOrigin="anonymous",l.onload=function(){o(l)},l.onerror=function(){s(new Error("Could not load image at "+a))},l.src=a})}}]),n}(Si.exports.EventEmitter))||jC),ur=1e-6,Na=typeof Float32Array!="undefined"?Float32Array:Array,HC=Math.random;Math.hypot||(Math.hypot=function(){for(var e=0,t=arguments.length;t--;)e+=arguments[t]*arguments[t];return Math.sqrt(e)});function Xi(){var e=new Na(16);return Na!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0),e[0]=1,e[5]=1,e[10]=1,e[15]=1,e}function kL(e){var t=new Na(16);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function qre(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function SL(e,t,n,r,a,i,o,s,l,u,c,f,d,p,h,g){var v=new Na(16);return v[0]=e,v[1]=t,v[2]=n,v[3]=r,v[4]=a,v[5]=i,v[6]=o,v[7]=s,v[8]=l,v[9]=u,v[10]=c,v[11]=f,v[12]=d,v[13]=p,v[14]=h,v[15]=g,v}function Kre(e,t,n,r,a,i,o,s,l,u,c,f,d,p,h,g,v){return e[0]=t,e[1]=n,e[2]=r,e[3]=a,e[4]=i,e[5]=o,e[6]=s,e[7]=l,e[8]=u,e[9]=c,e[10]=f,e[11]=d,e[12]=p,e[13]=h,e[14]=g,e[15]=v,e}function CL(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function Qre(e,t){if(e===t){var n=t[1],r=t[2],a=t[3],i=t[6],o=t[7],s=t[11];e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=n,e[6]=t[9],e[7]=t[13],e[8]=r,e[9]=i,e[11]=t[14],e[12]=a,e[13]=o,e[14]=s}else e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15];return e}function TL(e,t){var n=t[0],r=t[1],a=t[2],i=t[3],o=t[4],s=t[5],l=t[6],u=t[7],c=t[8],f=t[9],d=t[10],p=t[11],h=t[12],g=t[13],v=t[14],b=t[15],y=n*s-r*o,x=n*l-a*o,E=n*u-i*o,T=r*l-a*s,C=r*u-i*s,I=a*u-i*l,P=c*g-f*h,j=c*v-d*h,A=c*b-p*h,S=f*v-d*g,M=f*b-p*g,O=d*b-p*v,R=y*O-x*M+E*S+T*A-C*j+I*P;return R?(R=1/R,e[0]=(s*O-l*M+u*S)*R,e[1]=(a*M-r*O-i*S)*R,e[2]=(g*I-v*C+b*T)*R,e[3]=(d*C-f*I-p*T)*R,e[4]=(l*A-o*O-u*j)*R,e[5]=(n*O-a*A+i*j)*R,e[6]=(v*E-h*I-b*x)*R,e[7]=(c*I-d*E+p*x)*R,e[8]=(o*M-s*A+u*P)*R,e[9]=(r*A-n*M-i*P)*R,e[10]=(h*C-g*E+b*y)*R,e[11]=(f*E-c*C-p*y)*R,e[12]=(s*j-o*S-l*P)*R,e[13]=(n*S-r*j+a*P)*R,e[14]=(g*x-h*T-v*y)*R,e[15]=(c*T-f*x+d*y)*R,e):null}function Jre(e,t){var n=t[0],r=t[1],a=t[2],i=t[3],o=t[4],s=t[5],l=t[6],u=t[7],c=t[8],f=t[9],d=t[10],p=t[11],h=t[12],g=t[13],v=t[14],b=t[15];return e[0]=s*(d*b-p*v)-f*(l*b-u*v)+g*(l*p-u*d),e[1]=-(r*(d*b-p*v)-f*(a*b-i*v)+g*(a*p-i*d)),e[2]=r*(l*b-u*v)-s*(a*b-i*v)+g*(a*u-i*l),e[3]=-(r*(l*p-u*d)-s*(a*p-i*d)+f*(a*u-i*l)),e[4]=-(o*(d*b-p*v)-c*(l*b-u*v)+h*(l*p-u*d)),e[5]=n*(d*b-p*v)-c*(a*b-i*v)+h*(a*p-i*d),e[6]=-(n*(l*b-u*v)-o*(a*b-i*v)+h*(a*u-i*l)),e[7]=n*(l*p-u*d)-o*(a*p-i*d)+c*(a*u-i*l),e[8]=o*(f*b-p*g)-c*(s*b-u*g)+h*(s*p-u*f),e[9]=-(n*(f*b-p*g)-c*(r*b-i*g)+h*(r*p-i*f)),e[10]=n*(s*b-u*g)-o*(r*b-i*g)+h*(r*u-i*s),e[11]=-(n*(s*p-u*f)-o*(r*p-i*f)+c*(r*u-i*s)),e[12]=-(o*(f*v-d*g)-c*(s*v-l*g)+h*(s*d-l*f)),e[13]=n*(f*v-d*g)-c*(r*v-a*g)+h*(r*d-a*f),e[14]=-(n*(s*v-l*g)-o*(r*v-a*g)+h*(r*l-a*s)),e[15]=n*(s*d-l*f)-o*(r*d-a*f)+c*(r*l-a*s),e}function eae(e){var t=e[0],n=e[1],r=e[2],a=e[3],i=e[4],o=e[5],s=e[6],l=e[7],u=e[8],c=e[9],f=e[10],d=e[11],p=e[12],h=e[13],g=e[14],v=e[15],b=t*o-n*i,y=t*s-r*i,x=t*l-a*i,E=n*s-r*o,T=n*l-a*o,C=r*l-a*s,I=u*h-c*p,P=u*g-f*p,j=u*v-d*p,A=c*g-f*h,S=c*v-d*h,M=f*v-d*g;return b*M-y*S+x*A+E*j-T*P+C*I}function Es(e,t,n){var r=t[0],a=t[1],i=t[2],o=t[3],s=t[4],l=t[5],u=t[6],c=t[7],f=t[8],d=t[9],p=t[10],h=t[11],g=t[12],v=t[13],b=t[14],y=t[15],x=n[0],E=n[1],T=n[2],C=n[3];return e[0]=x*r+E*s+T*f+C*g,e[1]=x*a+E*l+T*d+C*v,e[2]=x*i+E*u+T*p+C*b,e[3]=x*o+E*c+T*h+C*y,x=n[4],E=n[5],T=n[6],C=n[7],e[4]=x*r+E*s+T*f+C*g,e[5]=x*a+E*l+T*d+C*v,e[6]=x*i+E*u+T*p+C*b,e[7]=x*o+E*c+T*h+C*y,x=n[8],E=n[9],T=n[10],C=n[11],e[8]=x*r+E*s+T*f+C*g,e[9]=x*a+E*l+T*d+C*v,e[10]=x*i+E*u+T*p+C*b,e[11]=x*o+E*c+T*h+C*y,x=n[12],E=n[13],T=n[14],C=n[15],e[12]=x*r+E*s+T*f+C*g,e[13]=x*a+E*l+T*d+C*v,e[14]=x*i+E*u+T*p+C*b,e[15]=x*o+E*c+T*h+C*y,e}function z2(e,t,n){var r=n[0],a=n[1],i=n[2],o,s,l,u,c,f,d,p,h,g,v,b;return t===e?(e[12]=t[0]*r+t[4]*a+t[8]*i+t[12],e[13]=t[1]*r+t[5]*a+t[9]*i+t[13],e[14]=t[2]*r+t[6]*a+t[10]*i+t[14],e[15]=t[3]*r+t[7]*a+t[11]*i+t[15]):(o=t[0],s=t[1],l=t[2],u=t[3],c=t[4],f=t[5],d=t[6],p=t[7],h=t[8],g=t[9],v=t[10],b=t[11],e[0]=o,e[1]=s,e[2]=l,e[3]=u,e[4]=c,e[5]=f,e[6]=d,e[7]=p,e[8]=h,e[9]=g,e[10]=v,e[11]=b,e[12]=o*r+c*a+h*i+t[12],e[13]=s*r+f*a+g*i+t[13],e[14]=l*r+d*a+v*i+t[14],e[15]=u*r+p*a+b*i+t[15]),e}function AL(e,t,n){var r=n[0],a=n[1],i=n[2];return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e[4]=t[4]*a,e[5]=t[5]*a,e[6]=t[6]*a,e[7]=t[7]*a,e[8]=t[8]*i,e[9]=t[9]*i,e[10]=t[10]*i,e[11]=t[11]*i,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function tae(e,t,n,r){var a=r[0],i=r[1],o=r[2],s=Math.hypot(a,i,o),l,u,c,f,d,p,h,g,v,b,y,x,E,T,C,I,P,j,A,S,M,O,R,H;return s<ur?null:(s=1/s,a*=s,i*=s,o*=s,l=Math.sin(n),u=Math.cos(n),c=1-u,f=t[0],d=t[1],p=t[2],h=t[3],g=t[4],v=t[5],b=t[6],y=t[7],x=t[8],E=t[9],T=t[10],C=t[11],I=a*a*c+u,P=i*a*c+o*l,j=o*a*c-i*l,A=a*i*c-o*l,S=i*i*c+u,M=o*i*c+a*l,O=a*o*c+i*l,R=i*o*c-a*l,H=o*o*c+u,e[0]=f*I+g*P+x*j,e[1]=d*I+v*P+E*j,e[2]=p*I+b*P+T*j,e[3]=h*I+y*P+C*j,e[4]=f*A+g*S+x*M,e[5]=d*A+v*S+E*M,e[6]=p*A+b*S+T*M,e[7]=h*A+y*S+C*M,e[8]=f*O+g*R+x*H,e[9]=d*O+v*R+E*H,e[10]=p*O+b*R+T*H,e[11]=h*O+y*R+C*H,t!==e&&(e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e)}function U2(e,t,n){var r=Math.sin(n),a=Math.cos(n),i=t[4],o=t[5],s=t[6],l=t[7],u=t[8],c=t[9],f=t[10],d=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=i*a+u*r,e[5]=o*a+c*r,e[6]=s*a+f*r,e[7]=l*a+d*r,e[8]=u*a-i*r,e[9]=c*a-o*r,e[10]=f*a-s*r,e[11]=d*a-l*r,e}function $2(e,t,n){var r=Math.sin(n),a=Math.cos(n),i=t[0],o=t[1],s=t[2],l=t[3],u=t[8],c=t[9],f=t[10],d=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=i*a-u*r,e[1]=o*a-c*r,e[2]=s*a-f*r,e[3]=l*a-d*r,e[8]=i*r+u*a,e[9]=o*r+c*a,e[10]=s*r+f*a,e[11]=l*r+d*a,e}function OL(e,t,n){var r=Math.sin(n),a=Math.cos(n),i=t[0],o=t[1],s=t[2],l=t[3],u=t[4],c=t[5],f=t[6],d=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=i*a+u*r,e[1]=o*a+c*r,e[2]=s*a+f*r,e[3]=l*a+d*r,e[4]=u*a-i*r,e[5]=c*a-o*r,e[6]=f*a-s*r,e[7]=d*a-l*r,e}function ML(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=t[0],e[13]=t[1],e[14]=t[2],e[15]=1,e}function nae(e,t){return e[0]=t[0],e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=t[1],e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=t[2],e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function rae(e,t,n){var r=n[0],a=n[1],i=n[2],o=Math.hypot(r,a,i),s,l,u;return o<ur?null:(o=1/o,r*=o,a*=o,i*=o,s=Math.sin(t),l=Math.cos(t),u=1-l,e[0]=r*r*u+l,e[1]=a*r*u+i*s,e[2]=i*r*u-a*s,e[3]=0,e[4]=r*a*u-i*s,e[5]=a*a*u+l,e[6]=i*a*u+r*s,e[7]=0,e[8]=r*i*u+a*s,e[9]=a*i*u-r*s,e[10]=i*i*u+l,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e)}function aae(e,t){var n=Math.sin(t),r=Math.cos(t);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=r,e[6]=n,e[7]=0,e[8]=0,e[9]=-n,e[10]=r,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function iae(e,t){var n=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=0,e[2]=-n,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=n,e[9]=0,e[10]=r,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function oae(e,t){var n=Math.sin(t),r=Math.cos(t);return e[0]=r,e[1]=n,e[2]=0,e[3]=0,e[4]=-n,e[5]=r,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function RL(e,t,n){var r=t[0],a=t[1],i=t[2],o=t[3],s=r+r,l=a+a,u=i+i,c=r*s,f=r*l,d=r*u,p=a*l,h=a*u,g=i*u,v=o*s,b=o*l,y=o*u;return e[0]=1-(p+g),e[1]=f+y,e[2]=d-b,e[3]=0,e[4]=f-y,e[5]=1-(c+g),e[6]=h+v,e[7]=0,e[8]=d+b,e[9]=h-v,e[10]=1-(c+p),e[11]=0,e[12]=n[0],e[13]=n[1],e[14]=n[2],e[15]=1,e}function sae(e,t){var n=new Na(3),r=-t[0],a=-t[1],i=-t[2],o=t[3],s=t[4],l=t[5],u=t[6],c=t[7],f=r*r+a*a+i*i+o*o;return f>0?(n[0]=(s*o+c*r+l*i-u*a)*2/f,n[1]=(l*o+c*a+u*r-s*i)*2/f,n[2]=(u*o+c*i+s*a-l*r)*2/f):(n[0]=(s*o+c*r+l*i-u*a)*2,n[1]=(l*o+c*a+u*r-s*i)*2,n[2]=(u*o+c*i+s*a-l*r)*2),RL(e,t,n),e}function lae(e,t){return e[0]=t[12],e[1]=t[13],e[2]=t[14],e}function PL(e,t){var n=t[0],r=t[1],a=t[2],i=t[4],o=t[5],s=t[6],l=t[8],u=t[9],c=t[10];return e[0]=Math.hypot(n,r,a),e[1]=Math.hypot(i,o,s),e[2]=Math.hypot(l,u,c),e}function uae(e,t){var n=new Na(3);PL(n,t);var r=1/n[0],a=1/n[1],i=1/n[2],o=t[0]*r,s=t[1]*a,l=t[2]*i,u=t[4]*r,c=t[5]*a,f=t[6]*i,d=t[8]*r,p=t[9]*a,h=t[10]*i,g=o+c+h,v=0;return g>0?(v=Math.sqrt(g+1)*2,e[3]=.25*v,e[0]=(f-p)/v,e[1]=(d-l)/v,e[2]=(s-u)/v):o>c&&o>h?(v=Math.sqrt(1+o-c-h)*2,e[3]=(f-p)/v,e[0]=.25*v,e[1]=(s+u)/v,e[2]=(d+l)/v):c>h?(v=Math.sqrt(1+c-o-h)*2,e[3]=(d-l)/v,e[0]=(s+u)/v,e[1]=.25*v,e[2]=(f+p)/v):(v=Math.sqrt(1+h-o-c)*2,e[3]=(s-u)/v,e[0]=(d+l)/v,e[1]=(f+p)/v,e[2]=.25*v),e}function cae(e,t,n,r){var a=t[0],i=t[1],o=t[2],s=t[3],l=a+a,u=i+i,c=o+o,f=a*l,d=a*u,p=a*c,h=i*u,g=i*c,v=o*c,b=s*l,y=s*u,x=s*c,E=r[0],T=r[1],C=r[2];return e[0]=(1-(h+v))*E,e[1]=(d+x)*E,e[2]=(p-y)*E,e[3]=0,e[4]=(d-x)*T,e[5]=(1-(f+v))*T,e[6]=(g+b)*T,e[7]=0,e[8]=(p+y)*C,e[9]=(g-b)*C,e[10]=(1-(f+h))*C,e[11]=0,e[12]=n[0],e[13]=n[1],e[14]=n[2],e[15]=1,e}function fae(e,t,n,r,a){var i=t[0],o=t[1],s=t[2],l=t[3],u=i+i,c=o+o,f=s+s,d=i*u,p=i*c,h=i*f,g=o*c,v=o*f,b=s*f,y=l*u,x=l*c,E=l*f,T=r[0],C=r[1],I=r[2],P=a[0],j=a[1],A=a[2],S=(1-(g+b))*T,M=(p+E)*T,O=(h-x)*T,R=(p-E)*C,H=(1-(d+b))*C,ee=(v+y)*C,re=(h+x)*I,Y=(v-y)*I,J=(1-(d+g))*I;return e[0]=S,e[1]=M,e[2]=O,e[3]=0,e[4]=R,e[5]=H,e[6]=ee,e[7]=0,e[8]=re,e[9]=Y,e[10]=J,e[11]=0,e[12]=n[0]+P-(S*P+R*j+re*A),e[13]=n[1]+j-(M*P+H*j+Y*A),e[14]=n[2]+A-(O*P+ee*j+J*A),e[15]=1,e}function dae(e,t){var n=t[0],r=t[1],a=t[2],i=t[3],o=n+n,s=r+r,l=a+a,u=n*o,c=r*o,f=r*s,d=a*o,p=a*s,h=a*l,g=i*o,v=i*s,b=i*l;return e[0]=1-f-h,e[1]=c+b,e[2]=d-v,e[3]=0,e[4]=c-b,e[5]=1-u-h,e[6]=p+g,e[7]=0,e[8]=d+v,e[9]=p-g,e[10]=1-u-f,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function pae(e,t,n,r,a,i,o){var s=1/(n-t),l=1/(a-r),u=1/(i-o);return e[0]=i*2*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=i*2*l,e[6]=0,e[7]=0,e[8]=(n+t)*s,e[9]=(a+r)*l,e[10]=(o+i)*u,e[11]=-1,e[12]=0,e[13]=0,e[14]=o*i*2*u,e[15]=0,e}function IL(e,t,n,r,a){var i=1/Math.tan(t/2),o;return e[0]=i/n,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=i,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,a!=null&&a!==1/0?(o=1/(r-a),e[10]=(a+r)*o,e[14]=2*a*r*o):(e[10]=-1,e[14]=-2*r),e}var LL=IL;function hae(e,t,n,r,a){var i=1/Math.tan(t/2),o;return e[0]=i/n,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=i,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,a!=null&&a!==1/0?(o=1/(r-a),e[10]=a*o,e[14]=a*r*o):(e[10]=-1,e[14]=-r),e}function mae(e,t,n,r){var a=Math.tan(t.upDegrees*Math.PI/180),i=Math.tan(t.downDegrees*Math.PI/180),o=Math.tan(t.leftDegrees*Math.PI/180),s=Math.tan(t.rightDegrees*Math.PI/180),l=2/(o+s),u=2/(a+i);return e[0]=l,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=u,e[6]=0,e[7]=0,e[8]=-((o-s)*l*.5),e[9]=(a-i)*u*.5,e[10]=r/(n-r),e[11]=-1,e[12]=0,e[13]=0,e[14]=r*n/(n-r),e[15]=0,e}function NL(e,t,n,r,a,i,o){var s=1/(t-n),l=1/(r-a),u=1/(i-o);return e[0]=-2*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*l,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*u,e[11]=0,e[12]=(t+n)*s,e[13]=(a+r)*l,e[14]=(o+i)*u,e[15]=1,e}var gae=NL;function vae(e,t,n,r,a,i,o){var s=1/(t-n),l=1/(r-a),u=1/(i-o);return e[0]=-2*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*l,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=u,e[11]=0,e[12]=(t+n)*s,e[13]=(a+r)*l,e[14]=i*u,e[15]=1,e}function FL(e,t,n,r){var a,i,o,s,l,u,c,f,d,p,h=t[0],g=t[1],v=t[2],b=r[0],y=r[1],x=r[2],E=n[0],T=n[1],C=n[2];return Math.abs(h-E)<ur&&Math.abs(g-T)<ur&&Math.abs(v-C)<ur?CL(e):(c=h-E,f=g-T,d=v-C,p=1/Math.hypot(c,f,d),c*=p,f*=p,d*=p,a=y*d-x*f,i=x*c-b*d,o=b*f-y*c,p=Math.hypot(a,i,o),p?(p=1/p,a*=p,i*=p,o*=p):(a=0,i=0,o=0),s=f*o-d*i,l=d*a-c*o,u=c*i-f*a,p=Math.hypot(s,l,u),p?(p=1/p,s*=p,l*=p,u*=p):(s=0,l=0,u=0),e[0]=a,e[1]=s,e[2]=c,e[3]=0,e[4]=i,e[5]=l,e[6]=f,e[7]=0,e[8]=o,e[9]=u,e[10]=d,e[11]=0,e[12]=-(a*h+i*g+o*v),e[13]=-(s*h+l*g+u*v),e[14]=-(c*h+f*g+d*v),e[15]=1,e)}function bae(e,t,n,r){var a=t[0],i=t[1],o=t[2],s=r[0],l=r[1],u=r[2],c=a-n[0],f=i-n[1],d=o-n[2],p=c*c+f*f+d*d;p>0&&(p=1/Math.sqrt(p),c*=p,f*=p,d*=p);var h=l*d-u*f,g=u*c-s*d,v=s*f-l*c;return p=h*h+g*g+v*v,p>0&&(p=1/Math.sqrt(p),h*=p,g*=p,v*=p),e[0]=h,e[1]=g,e[2]=v,e[3]=0,e[4]=f*v-d*g,e[5]=d*h-c*v,e[6]=c*g-f*h,e[7]=0,e[8]=c,e[9]=f,e[10]=d,e[11]=0,e[12]=a,e[13]=i,e[14]=o,e[15]=1,e}function yae(e){return"mat4("+e[0]+", "+e[1]+", "+e[2]+", "+e[3]+", "+e[4]+", "+e[5]+", "+e[6]+", "+e[7]+", "+e[8]+", "+e[9]+", "+e[10]+", "+e[11]+", "+e[12]+", "+e[13]+", "+e[14]+", "+e[15]+")"}function xae(e){return Math.hypot(e[0],e[1],e[2],e[3],e[4],e[5],e[6],e[7],e[8],e[9],e[10],e[11],e[12],e[13],e[14],e[15])}function wae(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e[3]=t[3]+n[3],e[4]=t[4]+n[4],e[5]=t[5]+n[5],e[6]=t[6]+n[6],e[7]=t[7]+n[7],e[8]=t[8]+n[8],e[9]=t[9]+n[9],e[10]=t[10]+n[10],e[11]=t[11]+n[11],e[12]=t[12]+n[12],e[13]=t[13]+n[13],e[14]=t[14]+n[14],e[15]=t[15]+n[15],e}function DL(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e[3]=t[3]-n[3],e[4]=t[4]-n[4],e[5]=t[5]-n[5],e[6]=t[6]-n[6],e[7]=t[7]-n[7],e[8]=t[8]-n[8],e[9]=t[9]-n[9],e[10]=t[10]-n[10],e[11]=t[11]-n[11],e[12]=t[12]-n[12],e[13]=t[13]-n[13],e[14]=t[14]-n[14],e[15]=t[15]-n[15],e}function _ae(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e[4]=t[4]*n,e[5]=t[5]*n,e[6]=t[6]*n,e[7]=t[7]*n,e[8]=t[8]*n,e[9]=t[9]*n,e[10]=t[10]*n,e[11]=t[11]*n,e[12]=t[12]*n,e[13]=t[13]*n,e[14]=t[14]*n,e[15]=t[15]*n,e}function Eae(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e[3]=t[3]+n[3]*r,e[4]=t[4]+n[4]*r,e[5]=t[5]+n[5]*r,e[6]=t[6]+n[6]*r,e[7]=t[7]+n[7]*r,e[8]=t[8]+n[8]*r,e[9]=t[9]+n[9]*r,e[10]=t[10]+n[10]*r,e[11]=t[11]+n[11]*r,e[12]=t[12]+n[12]*r,e[13]=t[13]+n[13]*r,e[14]=t[14]+n[14]*r,e[15]=t[15]+n[15]*r,e}function kae(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]&&e[4]===t[4]&&e[5]===t[5]&&e[6]===t[6]&&e[7]===t[7]&&e[8]===t[8]&&e[9]===t[9]&&e[10]===t[10]&&e[11]===t[11]&&e[12]===t[12]&&e[13]===t[13]&&e[14]===t[14]&&e[15]===t[15]}function Sae(e,t){var n=e[0],r=e[1],a=e[2],i=e[3],o=e[4],s=e[5],l=e[6],u=e[7],c=e[8],f=e[9],d=e[10],p=e[11],h=e[12],g=e[13],v=e[14],b=e[15],y=t[0],x=t[1],E=t[2],T=t[3],C=t[4],I=t[5],P=t[6],j=t[7],A=t[8],S=t[9],M=t[10],O=t[11],R=t[12],H=t[13],ee=t[14],re=t[15];return Math.abs(n-y)<=ur*Math.max(1,Math.abs(n),Math.abs(y))&&Math.abs(r-x)<=ur*Math.max(1,Math.abs(r),Math.abs(x))&&Math.abs(a-E)<=ur*Math.max(1,Math.abs(a),Math.abs(E))&&Math.abs(i-T)<=ur*Math.max(1,Math.abs(i),Math.abs(T))&&Math.abs(o-C)<=ur*Math.max(1,Math.abs(o),Math.abs(C))&&Math.abs(s-I)<=ur*Math.max(1,Math.abs(s),Math.abs(I))&&Math.abs(l-P)<=ur*Math.max(1,Math.abs(l),Math.abs(P))&&Math.abs(u-j)<=ur*Math.max(1,Math.abs(u),Math.abs(j))&&Math.abs(c-A)<=ur*Math.max(1,Math.abs(c),Math.abs(A))&&Math.abs(f-S)<=ur*Math.max(1,Math.abs(f),Math.abs(S))&&Math.abs(d-M)<=ur*Math.max(1,Math.abs(d),Math.abs(M))&&Math.abs(p-O)<=ur*Math.max(1,Math.abs(p),Math.abs(O))&&Math.abs(h-R)<=ur*Math.max(1,Math.abs(h),Math.abs(R))&&Math.abs(g-H)<=ur*Math.max(1,Math.abs(g),Math.abs(H))&&Math.abs(v-ee)<=ur*Math.max(1,Math.abs(v),Math.abs(ee))&&Math.abs(b-re)<=ur*Math.max(1,Math.abs(b),Math.abs(re))}var Cae=Es,Tae=DL,Aae=Object.freeze(Object.defineProperty({__proto__:null,create:Xi,clone:kL,copy:qre,fromValues:SL,set:Kre,identity:CL,transpose:Qre,invert:TL,adjoint:Jre,determinant:eae,multiply:Es,translate:z2,scale:AL,rotate:tae,rotateX:U2,rotateY:$2,rotateZ:OL,fromTranslation:ML,fromScaling:nae,fromRotation:rae,fromXRotation:aae,fromYRotation:iae,fromZRotation:oae,fromRotationTranslation:RL,fromQuat2:sae,getTranslation:lae,getScaling:PL,getRotation:uae,fromRotationTranslationScale:cae,fromRotationTranslationScaleOrigin:fae,fromQuat:dae,frustum:pae,perspectiveNO:IL,perspective:LL,perspectiveZO:hae,perspectiveFromFieldOfView:mae,orthoNO:NL,ortho:gae,orthoZO:vae,lookAt:FL,targetTo:bae,str:yae,frob:xae,add:wae,subtract:DL,multiplyScalar:_ae,multiplyScalarAndAdd:Eae,exactEquals:kae,equals:Sae,mul:Cae,sub:Tae},Symbol.toStringTag,{value:"Module"}));function $c(){var e=new Na(3);return Na!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e}function Oae(e){var t=new Na(3);return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function BL(e){var t=e[0],n=e[1],r=e[2];return Math.hypot(t,n,r)}function Pa(e,t,n){var r=new Na(3);return r[0]=e,r[1]=t,r[2]=n,r}function Mae(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function Rae(e,t,n,r){return e[0]=t,e[1]=n,e[2]=r,e}function Pae(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e[2]=t[2]+n[2],e}function zL(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e}function UL(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e[2]=t[2]*n[2],e}function $L(e,t,n){return e[0]=t[0]/n[0],e[1]=t[1]/n[1],e[2]=t[2]/n[2],e}function Iae(e,t){return e[0]=Math.ceil(t[0]),e[1]=Math.ceil(t[1]),e[2]=Math.ceil(t[2]),e}function Lae(e,t){return e[0]=Math.floor(t[0]),e[1]=Math.floor(t[1]),e[2]=Math.floor(t[2]),e}function Nae(e,t,n){return e[0]=Math.min(t[0],n[0]),e[1]=Math.min(t[1],n[1]),e[2]=Math.min(t[2],n[2]),e}function Fae(e,t,n){return e[0]=Math.max(t[0],n[0]),e[1]=Math.max(t[1],n[1]),e[2]=Math.max(t[2],n[2]),e}function Dae(e,t){return e[0]=Math.round(t[0]),e[1]=Math.round(t[1]),e[2]=Math.round(t[2]),e}function Bae(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e}function zae(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e[2]=t[2]+n[2]*r,e}function VL(e,t){var n=t[0]-e[0],r=t[1]-e[1],a=t[2]-e[2];return Math.hypot(n,r,a)}function jL(e,t){var n=t[0]-e[0],r=t[1]-e[1],a=t[2]-e[2];return n*n+r*r+a*a}function GL(e){var t=e[0],n=e[1],r=e[2];return t*t+n*n+r*r}function Uae(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e}function $ae(e,t){return e[0]=1/t[0],e[1]=1/t[1],e[2]=1/t[2],e}function Vc(e,t){var n=t[0],r=t[1],a=t[2],i=n*n+r*r+a*a;return i>0&&(i=1/Math.sqrt(i)),e[0]=t[0]*i,e[1]=t[1]*i,e[2]=t[2]*i,e}function HL(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function WL(e,t,n){var r=t[0],a=t[1],i=t[2],o=n[0],s=n[1],l=n[2];return e[0]=a*l-i*s,e[1]=i*o-r*l,e[2]=r*s-a*o,e}function Vae(e,t,n,r){var a=t[0],i=t[1],o=t[2];return e[0]=a+r*(n[0]-a),e[1]=i+r*(n[1]-i),e[2]=o+r*(n[2]-o),e}function jae(e,t,n,r,a,i){var o=i*i,s=o*(2*i-3)+1,l=o*(i-2)+i,u=o*(i-1),c=o*(3-2*i);return e[0]=t[0]*s+n[0]*l+r[0]*u+a[0]*c,e[1]=t[1]*s+n[1]*l+r[1]*u+a[1]*c,e[2]=t[2]*s+n[2]*l+r[2]*u+a[2]*c,e}function Gae(e,t,n,r,a,i){var o=1-i,s=o*o,l=i*i,u=s*o,c=3*i*s,f=3*l*o,d=l*i;return e[0]=t[0]*u+n[0]*c+r[0]*f+a[0]*d,e[1]=t[1]*u+n[1]*c+r[1]*f+a[1]*d,e[2]=t[2]*u+n[2]*c+r[2]*f+a[2]*d,e}function Hae(e,t){t=t||1;var n=HC()*2*Math.PI,r=HC()*2-1,a=Math.sqrt(1-r*r)*t;return e[0]=Math.cos(n)*a,e[1]=Math.sin(n)*a,e[2]=r*t,e}function np(e,t,n){var r=t[0],a=t[1],i=t[2],o=n[3]*r+n[7]*a+n[11]*i+n[15];return o=o||1,e[0]=(n[0]*r+n[4]*a+n[8]*i+n[12])/o,e[1]=(n[1]*r+n[5]*a+n[9]*i+n[13])/o,e[2]=(n[2]*r+n[6]*a+n[10]*i+n[14])/o,e}function Wae(e,t,n){var r=t[0],a=t[1],i=t[2];return e[0]=r*n[0]+a*n[3]+i*n[6],e[1]=r*n[1]+a*n[4]+i*n[7],e[2]=r*n[2]+a*n[5]+i*n[8],e}function Xae(e,t,n){var r=n[0],a=n[1],i=n[2],o=n[3],s=t[0],l=t[1],u=t[2],c=a*u-i*l,f=i*s-r*u,d=r*l-a*s,p=a*d-i*f,h=i*c-r*d,g=r*f-a*c,v=o*2;return c*=v,f*=v,d*=v,p*=2,h*=2,g*=2,e[0]=s+c+p,e[1]=l+f+h,e[2]=u+d+g,e}function Yae(e,t,n,r){var a=[],i=[];return a[0]=t[0]-n[0],a[1]=t[1]-n[1],a[2]=t[2]-n[2],i[0]=a[0],i[1]=a[1]*Math.cos(r)-a[2]*Math.sin(r),i[2]=a[1]*Math.sin(r)+a[2]*Math.cos(r),e[0]=i[0]+n[0],e[1]=i[1]+n[1],e[2]=i[2]+n[2],e}function Zae(e,t,n,r){var a=[],i=[];return a[0]=t[0]-n[0],a[1]=t[1]-n[1],a[2]=t[2]-n[2],i[0]=a[2]*Math.sin(r)+a[0]*Math.cos(r),i[1]=a[1],i[2]=a[2]*Math.cos(r)-a[0]*Math.sin(r),e[0]=i[0]+n[0],e[1]=i[1]+n[1],e[2]=i[2]+n[2],e}function qae(e,t,n,r){var a=[],i=[];return a[0]=t[0]-n[0],a[1]=t[1]-n[1],a[2]=t[2]-n[2],i[0]=a[0]*Math.cos(r)-a[1]*Math.sin(r),i[1]=a[0]*Math.sin(r)+a[1]*Math.cos(r),i[2]=a[2],e[0]=i[0]+n[0],e[1]=i[1]+n[1],e[2]=i[2]+n[2],e}function lw(e,t){var n=e[0],r=e[1],a=e[2],i=t[0],o=t[1],s=t[2],l=Math.sqrt(n*n+r*r+a*a),u=Math.sqrt(i*i+o*o+s*s),c=l*u,f=c&&HL(e,t)/c;return Math.acos(Math.min(Math.max(f,-1),1))}function Kae(e){return e[0]=0,e[1]=0,e[2]=0,e}function Qae(e){return"vec3("+e[0]+", "+e[1]+", "+e[2]+")"}function Jae(e,t){return e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]}function eie(e,t){var n=e[0],r=e[1],a=e[2],i=t[0],o=t[1],s=t[2];return Math.abs(n-i)<=ur*Math.max(1,Math.abs(n),Math.abs(i))&&Math.abs(r-o)<=ur*Math.max(1,Math.abs(r),Math.abs(o))&&Math.abs(a-s)<=ur*Math.max(1,Math.abs(a),Math.abs(s))}var uw=zL,tie=UL,nie=$L,rie=VL,aie=jL,iie=BL,oie=GL,sie=function(){var e=$c();return function(t,n,r,a,i,o){var s,l;for(n||(n=3),r||(r=0),a?l=Math.min(a*n+r,t.length):l=t.length,s=r;s<l;s+=n)e[0]=t[s],e[1]=t[s+1],e[2]=t[s+2],i(e,e,o),t[s]=e[0],t[s+1]=e[1],t[s+2]=e[2];return t}}(),of=Object.freeze(Object.defineProperty({__proto__:null,create:$c,clone:Oae,length:BL,fromValues:Pa,copy:Mae,set:Rae,add:Pae,subtract:zL,multiply:UL,divide:$L,ceil:Iae,floor:Lae,min:Nae,max:Fae,round:Dae,scale:Bae,scaleAndAdd:zae,distance:VL,squaredDistance:jL,squaredLength:GL,negate:Uae,inverse:$ae,normalize:Vc,dot:HL,cross:WL,lerp:Vae,hermite:jae,bezier:Gae,random:Hae,transformMat4:np,transformMat3:Wae,transformQuat:Xae,rotateX:Yae,rotateY:Zae,rotateZ:qae,angle:lw,zero:Kae,str:Qae,exactEquals:Jae,equals:eie,sub:uw,mul:tie,div:nie,dist:rie,sqrDist:aie,len:iie,sqrLen:oie,forEach:sie},Symbol.toStringTag,{value:"Module"}));function XL(){var e=new Na(4);return Na!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0,e[3]=0),e}function lie(e,t,n,r){var a=new Na(4);return a[0]=e,a[1]=t,a[2]=n,a[3]=r,a}function YL(e,t,n){var r=t[0],a=t[1],i=t[2],o=t[3];return e[0]=n[0]*r+n[4]*a+n[8]*i+n[12]*o,e[1]=n[1]*r+n[5]*a+n[9]*i+n[13]*o,e[2]=n[2]*r+n[6]*a+n[10]*i+n[14]*o,e[3]=n[3]*r+n[7]*a+n[11]*i+n[15]*o,e}(function(){var e=XL();return function(t,n,r,a,i,o){var s,l;for(n||(n=4),r||(r=0),a?l=Math.min(a*n+r,t.length):l=t.length,s=r;s<l;s+=n)e[0]=t[s],e[1]=t[s+1],e[2]=t[s+2],e[3]=t[s+3],i(e,e,o),t[s]=e[0],t[s+1]=e[1],t[s+2]=e[2],t[s+3]=e[3];return t}})();function $r(){var e=new Na(2);return Na!=Float32Array&&(e[0]=0,e[1]=0),e}function cw(e,t){var n=new Na(2);return n[0]=e,n[1]=t,n}function Pd(e,t){return e[0]=t[0],e[1]=t[1],e}function uie(e,t,n){return e[0]=t,e[1]=n,e}function Bo(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e}function P0(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e}function wp(e,t){var n=t[0],r=t[1],a=n*n+r*r;return a>0&&(a=1/Math.sqrt(a)),e[0]=t[0]*a,e[1]=t[1]*a,e}function I0(e,t){return e[0]*t[0]+e[1]*t[1]}var fw=P0;(function(){var e=$r();return function(t,n,r,a,i,o){var s,l;for(n||(n=2),r||(r=0),a?l=Math.min(a*n+r,t.length):l=t.length,s=r;s<l;s+=n)e[0]=t[s],e[1]=t[s+1],i(e,e,o),t[s]=e[0],t[s+1]=e[1];return t}})();var WC,XC,cie=(WC=nn(),WC(XC=function(){function e(){Ae(this,e),m(this,"viewport",void 0),m(this,"overridedViewProjectionMatrix",void 0),m(this,"jitteredViewProjectionMatrix",void 0),m(this,"jitteredProjectionMatrix",void 0),m(this,"viewMatrixInverse",void 0),m(this,"cameraPosition",void 0)}return Oe(e,[{key:"init",value:function(){}},{key:"update",value:function(n){this.viewport=n,this.viewMatrixInverse=Xi(),TL(this.viewMatrixInverse,n.getViewMatrix()),this.cameraPosition=[this.viewMatrixInverse[12],this.viewMatrixInverse[13],this.viewMatrixInverse[14]]}},{key:"getProjectionMatrix",value:function(){return this.jitteredProjectionMatrix||this.viewport.getProjectionMatrix()}},{key:"getModelMatrix",value:function(){return this.viewport.getModelMatrix()}},{key:"getViewMatrix",value:function(){return this.viewport.getViewMatrix()}},{key:"getViewMatrixUncentered",value:function(){return this.viewport.getViewMatrixUncentered()}},{key:"getViewProjectionMatrixUncentered",value:function(){return this.viewport.getViewProjectionMatrixUncentered()}},{key:"getViewProjectionMatrix",value:function(){return this.overridedViewProjectionMatrix||this.jitteredViewProjectionMatrix||this.viewport.getViewProjectionMatrix()}},{key:"getZoom",value:function(){return this.viewport.getZoom()}},{key:"getZoomScale",value:function(){return this.viewport.getZoomScale()}},{key:"getCenter",value:function(){var n=this.viewport.getCenter(),r=Le(n,2),a=r[0],i=r[1];return[a,i]}},{key:"getFocalDistance",value:function(){return this.viewport.getFocalDistance()}},{key:"getCameraPosition",value:function(){return this.cameraPosition}},{key:"projectFlat",value:function(n,r){return this.viewport.projectFlat(n,r)}},{key:"setViewProjectionMatrix",value:function(n){this.overridedViewProjectionMatrix=n}},{key:"jitterProjectionMatrix",value:function(n,r){var a=ML(Xi(),[n,r,0]);this.jitteredProjectionMatrix=Es(Xi(),a,this.viewport.getProjectionMatrix()),this.jitteredViewProjectionMatrix=Es(Xi(),this.jitteredProjectionMatrix,this.viewport.getViewMatrix())}},{key:"clearJitterProjectionMatrix",value:function(){this.jitteredProjectionMatrix=void 0,this.jitteredViewProjectionMatrix=void 0}}]),e}())||XC),YC,ZC;function fie(e,t){var n=typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=die(e))||t&&e&&typeof e.length=="number"){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(u){throw u},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i=!0,o=!1,s;return{s:function(){n=n.call(e)},n:function(){var u=n.next();return i=u.done,u},e:function(u){o=!0,s=u},f:function(){try{!i&&n.return!=null&&n.return()}finally{if(o)throw s}}}}function die(e,t){if(!!e){if(typeof e=="string")return qC(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return qC(e,t)}}function qC(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var pie=(YC=nn(),YC(ZC=function(){function e(){Ae(this,e),m(this,"container",void 0),m(this,"controlCorners",void 0),m(this,"controlContainer",void 0),m(this,"scene",void 0),m(this,"mapsService",void 0),m(this,"controls",[]),m(this,"unAddControls",[])}return Oe(e,[{key:"init",value:function(n,r){this.container=n.container,this.scene=r,this.mapsService=r.get(ye.IMapService),this.initControlPos()}},{key:"addControl",value:function(n,r){var a=r.get(ye.IMapService);a.map?(n.addTo(this.scene),this.controls.push(n)):this.unAddControls.push(n)}},{key:"getControlByName",value:function(n){return this.controls.find(function(r){return r.controlOption.name===n})}},{key:"removeControl",value:function(n){var r=this.controls.indexOf(n);return r>-1&&this.controls.splice(r,1),n.remove(),this}},{key:"addControls",value:function(){var n=this;this.unAddControls.forEach(function(r){r.addTo(n.scene),n.controls.push(r)}),this.unAddControls=[]}},{key:"destroy",value:function(){var n=fie(this.controls),r;try{for(n.s();!(r=n.n()).done;){var a=r.value;a.remove()}}catch(i){n.e(i)}finally{n.f()}this.controls=[],this.clearControlPos()}},{key:"initControlPos",value:function(){var n=this.controlCorners={},r="l7-",a=this.controlContainer=fr("div",r+"control-container",this.container);function i(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],s=o.map(function(l){return r+l}).join(" ");n[o.join("")]=fr("div",s,a)}i(["top","left"]),i(["top","right"]),i(["bottom","left"]),i(["bottom","right"]),i(["top","center"]),i(["right","center"]),i(["left","center"]),i(["bottom","center"])}},{key:"clearControlPos",value:function(){for(var n in this.controlCorners)this.controlCorners[n]&&mf(this.controlCorners[n]);this.controlContainer&&mf(this.controlContainer),delete this.controlCorners,delete this.controlContainer}}]),e}())||ZC),KC,QC,hie=(KC=nn(),KC(QC=function(){function e(){Ae(this,e),m(this,"container",void 0),m(this,"scene",void 0),m(this,"mapsService",void 0),m(this,"markers",[]),m(this,"markerLayers",[]),m(this,"unAddMarkers",[]),m(this,"unAddMarkerLayers",[])}return Oe(e,[{key:"addMarkerLayer",value:function(n){this.mapsService.map&&this.mapsService.getMarkerContainer()?(this.markerLayers.push(n),n.addTo(this.scene)):this.unAddMarkerLayers.push(n)}},{key:"removeMarkerLayer",value:function(n){n.destroy(),this.markerLayers.indexOf(n);var r=this.markerLayers.indexOf(n);r>-1&&this.markerLayers.splice(r,1)}},{key:"addMarker",value:function(n){this.mapsService.map&&this.mapsService.getMarkerContainer()?(this.markers.push(n),n.addTo(this.scene)):this.unAddMarkers.push(n)}},{key:"addMarkers",value:function(){var n=this;this.unAddMarkers.forEach(function(r){r.addTo(n.scene),n.markers.push(r)}),this.unAddMarkers=[]}},{key:"addMarkerLayers",value:function(){var n=this;this.unAddMarkerLayers.forEach(function(r){n.markerLayers.push(r),r.addTo(n.scene)}),this.unAddMarkers=[]}},{key:"removeMarker",value:function(n){n.remove(),this.markers.indexOf(n);var r=this.markers.indexOf(n);r>-1&&this.markers.splice(r,1)}},{key:"removeAllMarkers",value:function(){this.destroy()}},{key:"init",value:function(n){this.scene=n,this.mapsService=n.get(ye.IMapService)}},{key:"destroy",value:function(){this.markers.forEach(function(n){n.remove()}),this.markers=[],this.markerLayers.forEach(function(n){n.destroy()}),this.markerLayers=[]}},{key:"removeMakerLayerMarker",value:function(n){n.destroy()}}]),e}())||QC),JC,eT,mie=(JC=nn(),JC(eT=function(){function e(){Ae(this,e),m(this,"scene",void 0),m(this,"popup",void 0),m(this,"mapsService",void 0),m(this,"unAddPopup",void 0)}return Oe(e,[{key:"removePopup",value:function(n){n.remove()}},{key:"destroy",value:function(){this.popup.remove()}},{key:"addPopup",value:function(n){this.popup&&this.popup.remove(),this.mapsService.map&&this.mapsService.getMarkerContainer()?(n.addTo(this.scene),this.popup=n):this.unAddPopup=n}},{key:"initPopup",value:function(){this.unAddPopup&&(this.addPopup(this.unAddPopup),this.unAddPopup=null)}},{key:"init",value:function(n){this.scene=n,this.mapsService=n.get(ye.IMapService)}}]),e}())||eT),gie=N7,vie=D7,bie=vie(function(e,t,n){gie(e,t,n)}),ZL=bie,yie={MapToken:"\u60A8\u6B63\u5728\u4F7F\u7528 Demo\u6D4B\u8BD5\u5730\u56FEtoken\uFF0C\u5982\u679C\u751F\u4EA7\u73AF\u5883\u4E2D\u4F7F\u7528\u53BB\u5BF9\u5E94\u5730\u56FE\u8BF7\u6CE8\u518CToken",SDK:"\u8BF7\u786E\u8BA4\u5F15\u5165\u4E86mapbox-gl api\u4E14\u5728L7\u4E4B\u524D\u5F15\u5165"},tT,nT;function rT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Qy(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?rT(Object(n),!0).forEach(function(r){m(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rT(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var xie={id:"map",logoPosition:"bottomleft",logoVisible:!0,antialias:!0,preserveDrawingBuffer:!1,pickBufferScale:1,fitBoundsOptions:{animate:!1}},wie={colors:["rgb(103,0,31)","rgb(178,24,43)","rgb(214,96,77)","rgb(244,165,130)","rgb(253,219,199)","rgb(247,247,247)","rgb(209,229,240)","rgb(146,197,222)","rgb(67,147,195)","rgb(33,102,172)","rgb(5,48,97)"],size:10,shape:"circle",scales:{},shape2d:["circle","triangle","square","pentagon","hexagon","octogon","hexagram","rhombus","vesica"],shape3d:["cylinder","triangleColumn","hexagonColumn","squareColumn"],minZoom:-1,maxZoom:24,visible:!0,autoFit:!1,pickingBuffer:0,enablePropagation:!1,zIndex:0,blend:"normal",pickedFeatureID:-1,enableMultiPassRenderer:!1,enablePicking:!0,active:!1,activeColor:"#2f54eb",enableHighlight:!1,enableSelect:!1,highlightColor:"#2f54eb",activeMix:0,selectColor:"blue",selectMix:0,enableTAA:!1,jitterScale:1,enableLighting:!1,animateOption:{enable:!1,interval:.2,duration:4,trailLength:.15},forward:!0},_ie=(tT=nn(),tT(nT=function(){function e(){Ae(this,e),m(this,"sceneConfigCache",{}),m(this,"layerConfigCache",{})}return Oe(e,[{key:"getSceneConfig",value:function(n){return this.sceneConfigCache[n]}},{key:"getSceneWarninfo",value:function(n){return yie[n]}},{key:"setSceneConfig",value:function(n,r){this.sceneConfigCache[n]=Qy(Qy({},xie),r)}},{key:"getLayerConfig",value:function(n){return this.layerConfigCache[n]}},{key:"setLayerConfig",value:function(n,r,a){this.layerConfigCache[r]=Qy({},ZL({},this.sceneConfigCache[n],wie,a))}},{key:"clean",value:function(){this.sceneConfigCache={},this.layerConfigCache={}}}]),e}())||nT);function en(e,t,n,r){!n||Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(r):void 0})}function Jt(e,t,n,r,a){var i={};return Object.keys(r).forEach(function(o){i[o]=r[o]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce(function(o,s){return s(e,t,o)||o},i),a&&i.initializer!==void 0&&(i.value=i.initializer?i.initializer.call(a):void 0,i.initializer=void 0),i.initializer===void 0&&(Object.defineProperty(e,t,i),i=null),i}var Jy=Math.PI/180,Eie=512,aT=4003e4;function iT(e){var t=e.latitude,n=t===void 0?0:t,r=e.zoom,a=r===void 0?0:r,i=e.scale,o=e.highPrecision,s=o===void 0?!1:o,l=e.flipY,u=l===void 0?!1:l;i=i!==void 0?i:Math.pow(2,a);var c={},f=Eie*i,d=Math.cos(n*Jy),p=f/360,h=p/d,g=f/aT/d;if(c.pixelsPerMeter=[g,-g,g],c.metersPerPixel=[1/g,-1/g,1/g],c.pixelsPerDegree=[p,-h,g],c.degreesPerPixel=[1/p,-1/h,1/g],s){var v=Jy*Math.tan(n*Jy)/d,b=p*v/2,y=f/aT*v,x=y/h*g;c.pixelsPerDegree2=[0,-b,y],c.pixelsPerMeter2=[x,0,x],u&&(c.pixelsPerDegree2[1]=-c.pixelsPerDegree2[1],c.pixelsPerMeter2[1]=-c.pixelsPerMeter2[1])}return u&&(c.pixelsPerMeter[1]=-c.pixelsPerMeter[1],c.metersPerPixel[1]=-c.metersPerPixel[1],c.pixelsPerDegree[1]=-c.pixelsPerDegree[1],c.degreesPerPixel[1]=-c.degreesPerPixel[1]),c}var ll;(function(e){e[e.LNGLAT=1]="LNGLAT",e[e.LNGLAT_OFFSET=2]="LNGLAT_OFFSET",e[e.VECTOR_TILE=3]="VECTOR_TILE",e[e.IDENTITY=4]="IDENTITY",e[e.P20=5]="P20",e[e.P20_OFFSET=6]="P20_OFFSET",e[e.METER_OFFSET=7]="METER_OFFSET",e[e.P20_2=8]="P20_2"})(ll||(ll={}));var Kl={CoordinateSystem:"u_CoordinateSystem",ViewportCenter:"u_ViewportCenter",ViewportCenterProjection:"u_ViewportCenterProjection",PixelsPerDegree:"u_PixelsPerDegree",PixelsPerDegree2:"u_PixelsPerDegree2",PixelsPerMeter:"u_PixelsPerMeter",Mvp:"u_Mvp"},oT,sT,lT,ex,uT,kie=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0],Sie=(oT=nn(),sT=ln(ye.ICameraService),oT(lT=(ex=function(){function e(){Ae(this,e),m(this,"needRefresh",!0),en(this,"cameraService",uT,this),m(this,"coordinateSystem",void 0),m(this,"viewportCenter",void 0),m(this,"viewportCenterProjection",void 0),m(this,"pixelsPerDegree",void 0),m(this,"pixelsPerDegree2",void 0),m(this,"pixelsPerMeter",void 0)}return Oe(e,[{key:"refresh",value:function(n){var r=this.cameraService.getZoom(),a=this.cameraService.getZoomScale(),i=n||this.cameraService.getCenter(),o=iT({latitude:i[1],zoom:r}),s=o.pixelsPerMeter,l=o.pixelsPerDegree;this.viewportCenter=i,this.viewportCenterProjection=[0,0,0,0],this.pixelsPerMeter=s,this.pixelsPerDegree=l,this.pixelsPerDegree2=[0,0,0],this.coordinateSystem===ll.LNGLAT||this.coordinateSystem===ll.P20?this.cameraService.setViewProjectionMatrix(void 0):this.coordinateSystem===ll.LNGLAT_OFFSET?this.calculateLnglatOffset(i,r):this.coordinateSystem===ll.P20_OFFSET&&this.calculateLnglatOffset(i,r,a,!0),this.needRefresh=!1}},{key:"getCoordinateSystem",value:function(){return this.coordinateSystem}},{key:"setCoordinateSystem",value:function(n){this.coordinateSystem=n}},{key:"getViewportCenter",value:function(){return this.viewportCenter}},{key:"getViewportCenterProjection",value:function(){return this.viewportCenterProjection}},{key:"getPixelsPerDegree",value:function(){return this.pixelsPerDegree}},{key:"getPixelsPerDegree2",value:function(){return this.pixelsPerDegree2}},{key:"getPixelsPerMeter",value:function(){return this.pixelsPerMeter}},{key:"calculateLnglatOffset",value:function(n,r,a,i){var o=iT({latitude:n[1],zoom:r,scale:a,flipY:i,highPrecision:!0}),s=o.pixelsPerMeter,l=o.pixelsPerDegree,u=o.pixelsPerDegree2,c=this.cameraService.getViewMatrix(),f=this.cameraService.getProjectionMatrix(),d=Es([],f,c),p=this.cameraService.projectFlat([Math.fround(n[0]),Math.fround(n[1])],Math.pow(2,r));this.viewportCenterProjection=YL([],[p[0],p[1],0,1],d),c=this.cameraService.getViewMatrixUncentered()||c,d=Es([],f,c),d=Es([],d,kie),this.cameraService.setViewProjectionMatrix(d),this.pixelsPerMeter=s,this.pixelsPerDegree=l,this.pixelsPerDegree2=u}}]),e}(),uT=Jt(ex.prototype,"cameraService",[sT],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ex))||lT),qL={exports:{}};/*! Hammer.JS - v2.0.7 - 2016-04-22
 * http://hammerjs.github.io/
 *
 * Copyright (c) 2016 Jorik Tangelder;
 * Licensed under the MIT license */(function(e){(function(t,n,r,a){var i=typeof my!="undefined"&&!!my&&typeof my.showToast=="function"&&my.isFRM!==!0,o=typeof wx!="undefined"&&wx!==null&&(typeof wx.request!="undefined"||typeof wx.miniProgram!="undefined"),s=i||o,l=["","webkit","Moz","MS","ms","o"],u=s?"":n.createElement("div"),c="function",f=Math.round,d=Math.abs,p=Date.now;function h(N,U,K){return setTimeout(C(N,K),U)}function g(N,U,K){return Array.isArray(N)?(v(N,K[U],K),!0):!1}function v(N,U,K){var xe;if(!!N)if(N.forEach)N.forEach(U,K);else if(N.length!==a)for(xe=0;xe<N.length;)U.call(K,N[xe],xe,N),xe++;else for(xe in N)N.hasOwnProperty(xe)&&U.call(K,N[xe],xe,N)}function b(N,U,K){var xe="DEPRECATED METHOD: "+U+`
`+K+` AT 
`;return function(){var qe=new Error("get-stack-trace"),Ot=qe&&qe.stack?qe.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",yn=t.console&&(t.console.warn||t.console.log);return yn&&yn.call(t.console,xe,Ot),N.apply(this,arguments)}}var y;typeof Object.assign!="function"?y=function(U){if(U===a||U===null)throw new TypeError("Cannot convert undefined or null to object");for(var K=Object(U),xe=1;xe<arguments.length;xe++){var qe=arguments[xe];if(qe!==a&&qe!==null)for(var Ot in qe)qe.hasOwnProperty(Ot)&&(K[Ot]=qe[Ot])}return K}:y=Object.assign;var x=b(function(U,K,xe){for(var qe=Object.keys(K),Ot=0;Ot<qe.length;)(!xe||xe&&U[qe[Ot]]===a)&&(U[qe[Ot]]=K[qe[Ot]]),Ot++;return U},"extend","Use `assign`."),E=b(function(U,K){return x(U,K,!0)},"merge","Use `assign`.");function T(N,U,K){var xe=U.prototype,qe;qe=N.prototype=Object.create(xe),qe.constructor=N,qe._super=xe,K&&y(qe,K)}function C(N,U){return function(){return N.apply(U,arguments)}}function I(N,U){return typeof N==c?N.apply(U&&U[0]||a,U):N}function P(N,U){return N===a?U:N}function j(N,U,K){v(O(U),function(xe){N.addEventListener(xe,K,!1)})}function A(N,U,K){v(O(U),function(xe){N.removeEventListener(xe,K,!1)})}function S(N,U){for(;N;){if(N==U)return!0;N=N.parentNode}return!1}function M(N,U){return N.indexOf(U)>-1}function O(N){return N.trim().split(/\s+/g)}function R(N,U,K){if(N.indexOf&&!K)return N.indexOf(U);for(var xe=0;xe<N.length;){if(K&&N[xe][K]==U||!K&&N[xe]===U)return xe;xe++}return-1}function H(N){return Array.prototype.slice.call(N,0)}function ee(N,U,K){for(var xe=[],qe=[],Ot=0;Ot<N.length;){var yn=U?N[Ot][U]:N[Ot];R(qe,yn)<0&&xe.push(N[Ot]),qe[Ot]=yn,Ot++}return K&&(U?xe=xe.sort(function(Yr,ha){return Yr[U]>ha[U]}):xe=xe.sort()),xe}function re(N,U){for(var K,xe,qe=U[0].toUpperCase()+U.slice(1),Ot=0;Ot<l.length;){if(K=l[Ot],xe=K?K+qe:U,xe in N)return xe;Ot++}return a}var Y=1;function J(){return Y++}function ae(N){var U=N.ownerDocument||N;return U.defaultView||U.parentWindow||t}var le=/mobile|tablet|ip(ad|hone|od)|android/i,fe="ontouchstart"in t,ge=re(t,"PointerEvent")!==a,we=fe&&le.test(navigator.userAgent),Ve="touch",Lt="pen",Nt="mouse",Zt="kinect",Fe=25,Je=1,tt=2,ve=4,pt=8,kt=1,wt=2,At=4,ht=8,jt=16,Gt=wt|At,An=ht|jt,_r=Gt|An,er=["x","y"],tr=["clientX","clientY"];function k(N,U){var K=this;this.manager=N,this.callback=U,this.element=N.element,this.target=N.options.inputTarget,this.domHandler=function(xe){I(N.options.enable,[N])&&K.handler(xe)},this.init()}k.prototype={handler:function(){},init:function(){this.evEl&&j(this.element,this.evEl,this.domHandler),this.evTarget&&j(this.target,this.evTarget,this.domHandler),this.evWin&&j(ae(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&A(this.element,this.evEl,this.domHandler),this.evTarget&&A(this.target,this.evTarget,this.domHandler),this.evWin&&A(ae(this.element),this.evWin,this.domHandler)}};function Ce(N){var U,K=N.options.inputClass;return K?U=K:ge?U=Mr:we?U=Ti:fe?U=Un:U=Or,new U(N,Ie)}function Ie(N,U,K){var xe=K.pointers.length,qe=K.changedPointers.length,Ot=U&Je&&xe-qe===0,yn=U&(ve|pt)&&xe-qe===0;K.isFirst=!!Ot,K.isFinal=!!yn,Ot&&(N.session={}),K.eventType=U,lt(N,K),N.emit("hammer.input",K),N.recognize(K),N.session.prevInput=K}function lt(N,U){var K=N.session,xe=U.pointers,qe=xe.length;K.firstInput||(K.firstInput=St(U)),qe>1&&!K.firstMultiple?K.firstMultiple=St(U):qe===1&&(K.firstMultiple=!1);var Ot=K.firstInput,yn=K.firstMultiple,Rr=yn?yn.center:Ot.center,Yr=U.center=Rt(xe);U.timeStamp=p(),U.deltaTime=U.timeStamp-Ot.timeStamp,U.angle=Sn(Rr,Yr),U.distance=Bt(Rr,Yr),_t(K,U),U.offsetDirection=$t(U.deltaX,U.deltaY);var ha=Tt(U.deltaTime,U.deltaX,U.deltaY);U.overallVelocityX=ha.x,U.overallVelocityY=ha.y,U.overallVelocity=d(ha.x)>d(ha.y)?ha.x:ha.y,U.scale=yn?ca(yn.pointers,xe):1,U.rotation=yn?Bn(yn.pointers,xe):0,U.maxPointers=K.prevInput?U.pointers.length>K.prevInput.maxPointers?U.pointers.length:K.prevInput.maxPointers:U.pointers.length,Yt(K,U);var Qa=N.element;S(U.srcEvent.target,Qa)&&(Qa=U.srcEvent.target),U.target=Qa}function _t(N,U){var K=U.center,xe=N.offsetDelta||{},qe=N.prevDelta||{},Ot=N.prevInput||{};(U.eventType===Je||Ot.eventType===ve)&&(qe=N.prevDelta={x:Ot.deltaX||0,y:Ot.deltaY||0},xe=N.offsetDelta={x:K.x,y:K.y}),U.deltaX=qe.x+(K.x-xe.x),U.deltaY=qe.y+(K.y-xe.y)}function Yt(N,U){var K=N.lastInterval||U,xe=U.timeStamp-K.timeStamp,qe,Ot,yn,Rr;if(U.eventType!=pt&&(xe>Fe||K.velocity===a)){var Yr=U.deltaX-K.deltaX,ha=U.deltaY-K.deltaY,Qa=Tt(xe,Yr,ha);Ot=Qa.x,yn=Qa.y,qe=d(Qa.x)>d(Qa.y)?Qa.x:Qa.y,Rr=$t(Yr,ha),N.lastInterval=U}else qe=K.velocity,Ot=K.velocityX,yn=K.velocityY,Rr=K.direction;U.velocity=qe,U.velocityX=Ot,U.velocityY=yn,U.direction=Rr}function St(N){for(var U=[],K=0;K<N.pointers.length;)U[K]={clientX:f(N.pointers[K].clientX),clientY:f(N.pointers[K].clientY)},K++;return{timeStamp:p(),pointers:U,center:Rt(U),deltaX:N.deltaX,deltaY:N.deltaY}}function Rt(N){var U=N.length;if(U===1)return{x:f(N[0].clientX),y:f(N[0].clientY)};for(var K=0,xe=0,qe=0;qe<U;)K+=N[qe].clientX,xe+=N[qe].clientY,qe++;return{x:f(K/U),y:f(xe/U)}}function Tt(N,U,K){return{x:U/N||0,y:K/N||0}}function $t(N,U){return N===U?kt:d(N)>=d(U)?N<0?wt:At:U<0?ht:jt}function Bt(N,U,K){K||(K=er);var xe=U[K[0]]-N[K[0]],qe=U[K[1]]-N[K[1]];return Math.sqrt(xe*xe+qe*qe)}function Sn(N,U,K){K||(K=er);var xe=U[K[0]]-N[K[0]],qe=U[K[1]]-N[K[1]];return Math.atan2(qe,xe)*180/Math.PI}function Bn(N,U){return Sn(U[1],U[0],tr)+Sn(N[1],N[0],tr)}function ca(N,U){return Bt(U[0],U[1],tr)/Bt(N[0],N[1],tr)}var Da={mousedown:Je,mousemove:tt,mouseup:ve},Er="mousedown",Ba="mousemove mouseup";function Or(){this.evEl=Er,this.evWin=Ba,this.pressed=!1,k.apply(this,arguments)}T(Or,k,{handler:function(U){var K=Da[U.type];K&Je&&U.button===0&&(this.pressed=!0),K&tt&&U.which!==1&&(K=ve),this.pressed&&(K&ve&&(this.pressed=!1),this.callback(this.manager,K,{pointers:[U],changedPointers:[U],pointerType:Nt,srcEvent:U}))}});var Ka={pointerdown:Je,pointermove:tt,pointerup:ve,pointercancel:pt,pointerout:pt},Sa={2:Ve,3:Lt,4:Nt,5:Zt},li="pointerdown",fa="pointermove pointerup pointercancel";!s&&t.MSPointerEvent&&!t.PointerEvent&&(li="MSPointerDown",fa="MSPointerMove MSPointerUp MSPointerCancel");function Mr(){this.evEl=li,this.evWin=fa,k.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}T(Mr,k,{handler:function(U){var K=this.store,xe=!1,qe=U.type.toLowerCase().replace("ms",""),Ot=Ka[qe],yn=Sa[U.pointerType]||U.pointerType,Rr=yn==Ve,Yr=R(K,U.pointerId,"pointerId");Ot&Je&&(U.button===0||Rr)?Yr<0&&(K.push(U),Yr=K.length-1):Ot&(ve|pt)&&(xe=!0),!(Yr<0)&&(K[Yr]=U,this.callback(this.manager,Ot,{pointers:K,changedPointers:[U],pointerType:yn,srcEvent:U}),xe&&K.splice(Yr,1))}});var qt={touchstart:Je,touchmove:tt,touchend:ve,touchcancel:pt},un="touchstart",cn="touchstart touchmove touchend touchcancel";function kr(){this.evTarget=un,this.evWin=cn,this.started=!1,k.apply(this,arguments)}T(kr,k,{handler:function(U){var K=qt[U.type];if(K===Je&&(this.started=!0),!!this.started){var xe=da.call(this,U,K);K&(ve|pt)&&xe[0].length-xe[1].length===0&&(this.started=!1),this.callback(this.manager,K,{pointers:xe[0],changedPointers:xe[1],pointerType:Ve,srcEvent:U})}}});function da(N,U){var K=H(N.touches),xe=H(N.changedTouches);return U&(ve|pt)&&(K=ee(K.concat(xe),"identifier",!0)),[K,xe]}var ro={touchstart:Je,touchmove:tt,touchend:ve,touchcancel:pt},ao="touchstart touchmove touchend touchcancel";function Ti(){this.evTarget=ao,this.targetIds={},k.apply(this,arguments)}T(Ti,k,{handler:function(U){var K=ro[U.type],xe=Yn.call(this,U,K);!xe||this.callback(this.manager,K,{pointers:xe[0],changedPointers:xe[1],pointerType:Ve,srcEvent:U})}});function Yn(N,U){var K=H(N.touches),xe=this.targetIds;if(U&(Je|tt)&&K.length===1)return xe[K[0].identifier]=!0,[K,K];var qe,Ot,yn=H(N.changedTouches),Rr=[],Yr=this.target;if(Ot=K.filter(function(ha){return S(ha.target,Yr)}),U===Je)for(qe=0;qe<Ot.length;)xe[Ot[qe].identifier]=!0,qe++;for(qe=0;qe<yn.length;)xe[yn[qe].identifier]&&Rr.push(yn[qe]),U&(ve|pt)&&delete xe[yn[qe].identifier],qe++;if(!!Rr.length)return[ee(Ot.concat(Rr),"identifier",!0),Rr]}var fn=2500,Qt=25;function Un(){k.apply(this,arguments);var N=C(this.handler,this);this.touch=new Ti(this.manager,N),this.mouse=new Or(this.manager,N),this.primaryTouch=null,this.lastTouches=[]}T(Un,k,{handler:function(U,K,xe){var qe=xe.pointerType==Ve,Ot=xe.pointerType==Nt;if(!(Ot&&xe.sourceCapabilities&&xe.sourceCapabilities.firesTouchEvents)){if(qe)Mn.call(this,K,xe);else if(Ot&&Wr.call(this,xe))return;this.callback(U,K,xe)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});function Mn(N,U){N&Je?(this.primaryTouch=U.changedPointers[0].identifier,dn.call(this,U)):N&(ve|pt)&&dn.call(this,U)}function dn(N){var U=N.changedPointers[0];if(U.identifier===this.primaryTouch){var K={x:U.clientX,y:U.clientY};this.lastTouches.push(K);var xe=this.lastTouches,qe=function(){var Ot=xe.indexOf(K);Ot>-1&&xe.splice(Ot,1)};setTimeout(qe,fn)}}function Wr(N){for(var U=N.srcEvent.clientX,K=N.srcEvent.clientY,xe=0;xe<this.lastTouches.length;xe++){var qe=this.lastTouches[xe],Ot=Math.abs(U-qe.x),yn=Math.abs(K-qe.y);if(Ot<=Qt&&yn<=Qt)return!0}return!1}var Xr=s?a:re(u.style,"touchAction"),za=Xr!==a,Ai="compute",bn="auto",tn="manipulation",Rn="none",Sr="pan-x",pa="pan-y",Ua=Ns();function io(N,U){this.manager=N,this.set(U)}io.prototype={set:function(N){N==Ai&&(N=this.compute()),za&&this.manager.element.style&&Ua[N]&&(this.manager.element.style[Xr]=N),this.actions=N.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var N=[];return v(this.manager.recognizers,function(U){I(U.options.enable,[U])&&(N=N.concat(U.getTouchAction()))}),Bl(N.join(" "))},preventDefaults:function(N){var U=N.srcEvent,K=N.offsetDirection;if(this.manager.session.prevented){U.preventDefault();return}var xe=this.actions,qe=M(xe,Rn)&&!Ua[Rn],Ot=M(xe,pa)&&!Ua[pa],yn=M(xe,Sr)&&!Ua[Sr];if(qe){var Rr=N.pointers.length===1,Yr=N.distance<2,ha=N.deltaTime<250;if(Rr&&Yr&&ha)return}if(!(yn&&Ot)&&(qe||Ot&&K&Gt||yn&&K&An))return this.preventSrc(U)},preventSrc:function(N){this.manager.session.prevented=!0,N.preventDefault()}};function Bl(N){if(M(N,Rn))return Rn;var U=M(N,Sr),K=M(N,pa);return U&&K?Rn:U||K?U?Sr:pa:M(N,tn)?tn:bn}function Ns(){if(!za)return!1;var N={};if(s)return N;var U=t.CSS&&t.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(K){N[K]=U?t.CSS.supports("touch-action",K):!0}),N}var oo=1,na=2,Oi=4,wn=8,mn=wn,Pn=16,$n=32;function nr(N){this.options=y({},this.defaults,N||{}),this.id=J(),this.manager=null,this.options.enable=P(this.options.enable,!0),this.state=oo,this.simultaneous={},this.requireFail=[]}nr.prototype={defaults:{},set:function(N){return y(this.options,N),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(N){if(g(N,"recognizeWith",this))return this;var U=this.simultaneous;return N=Fs(N,this),U[N.id]||(U[N.id]=N,N.recognizeWith(this)),this},dropRecognizeWith:function(N){return g(N,"dropRecognizeWith",this)?this:(N=Fs(N,this),delete this.simultaneous[N.id],this)},requireFailure:function(N){if(g(N,"requireFailure",this))return this;var U=this.requireFail;return N=Fs(N,this),R(U,N)===-1&&(U.push(N),N.requireFailure(this)),this},dropRequireFailure:function(N){if(g(N,"dropRequireFailure",this))return this;N=Fs(N,this);var U=R(this.requireFail,N);return U>-1&&this.requireFail.splice(U,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(N){return!!this.simultaneous[N.id]},emit:function(N){var U=this,K=this.state;function xe(qe){U.manager.emit(qe,N)}K<wn&&xe(U.options.event+Mi(K)),xe(U.options.event),N.additionalEvent&&xe(N.additionalEvent),K>=wn&&xe(U.options.event+Mi(K))},tryEmit:function(N){if(this.canEmit())return this.emit(N);this.state=$n},canEmit:function(){for(var N=0;N<this.requireFail.length;){if(!(this.requireFail[N].state&($n|oo)))return!1;N++}return!0},recognize:function(N){var U=y({},N);if(!I(this.options.enable,[this,U])){this.reset(),this.state=$n;return}this.state&(mn|Pn|$n)&&(this.state=oo),this.state=this.process(U),this.state&(na|Oi|wn|Pn)&&this.tryEmit(U)},process:function(N){},getTouchAction:function(){},reset:function(){}};function Mi(N){return N&Pn?"cancel":N&wn?"end":N&Oi?"move":N&na?"start":""}function Ao(N){return N==jt?"down":N==ht?"up":N==wt?"left":N==At?"right":""}function Fs(N,U){var K=U.manager;return K?K.get(N):N}function ui(){nr.apply(this,arguments)}T(ui,nr,{defaults:{pointers:1},attrTest:function(N){var U=this.options.pointers;return U===0||N.pointers.length===U},process:function(N){var U=this.state,K=N.eventType,xe=U&(na|Oi),qe=this.attrTest(N);return xe&&(K&pt||!qe)?U|Pn:xe||qe?K&ve?U|wn:U&na?U|Oi:na:$n}});function ju(){ui.apply(this,arguments),this.pX=null,this.pY=null}T(ju,ui,{defaults:{event:"pan",threshold:10,pointers:1,direction:_r},getTouchAction:function(){var N=this.options.direction,U=[];return N&Gt&&U.push(pa),N&An&&U.push(Sr),U},directionTest:function(N){var U=this.options,K=!0,xe=N.distance,qe=N.direction,Ot=N.deltaX,yn=N.deltaY;return qe&U.direction||(U.direction&Gt?(qe=Ot===0?kt:Ot<0?wt:At,K=Ot!=this.pX,xe=Math.abs(N.deltaX)):(qe=yn===0?kt:yn<0?ht:jt,K=yn!=this.pY,xe=Math.abs(N.deltaY))),N.direction=qe,K&&xe>U.threshold&&qe&U.direction},attrTest:function(N){return ui.prototype.attrTest.call(this,N)&&(this.state&na||!(this.state&na)&&this.directionTest(N))},emit:function(N){this.pX=N.deltaX,this.pY=N.deltaY;var U=Ao(N.direction);U&&(N.additionalEvent=this.options.event+U),this._super.emit.call(this,N)}});function Yf(){ui.apply(this,arguments)}T(Yf,ui,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[Rn]},attrTest:function(N){return this._super.attrTest.call(this,N)&&(Math.abs(N.scale-1)>this.options.threshold||this.state&na)},emit:function(N){if(N.scale!==1){var U=N.scale<1?"in":"out";N.additionalEvent=this.options.event+U}this._super.emit.call(this,N)}});function Ds(){nr.apply(this,arguments),this._timer=null,this._input=null}T(Ds,nr,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[bn]},process:function(N){var U=this.options,K=N.pointers.length===U.pointers,xe=N.distance<U.threshold,qe=N.deltaTime>U.time;if(this._input=N,!xe||!K||N.eventType&(ve|pt)&&!qe)this.reset();else if(N.eventType&Je)this.reset(),this._timer=h(function(){this.state=mn,this.tryEmit()},U.time,this);else if(N.eventType&ve)return mn;return $n},reset:function(){clearTimeout(this._timer)},emit:function(N){this.state===mn&&(N&&N.eventType&ve?this.manager.emit(this.options.event+"up",N):(this._input.timeStamp=p(),this.manager.emit(this.options.event,this._input)))}});function Gu(){ui.apply(this,arguments)}T(Gu,ui,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[Rn]},attrTest:function(N){return this._super.attrTest.call(this,N)&&(Math.abs(N.rotation)>this.options.threshold||this.state&na)}});function Zf(){ui.apply(this,arguments)}T(Zf,ui,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:Gt|An,pointers:1},getTouchAction:function(){return ju.prototype.getTouchAction.call(this)},attrTest:function(N){var U=this.options.direction,K;return U&(Gt|An)?K=N.overallVelocity:U&Gt?K=N.overallVelocityX:U&An&&(K=N.overallVelocityY),this._super.attrTest.call(this,N)&&U&N.offsetDirection&&N.distance>this.options.threshold&&N.maxPointers==this.options.pointers&&d(K)>this.options.velocity&&N.eventType&ve},emit:function(N){var U=Ao(N.offsetDirection);U&&this.manager.emit(this.options.event+U,N),this.manager.emit(this.options.event,N)}});function Hu(){nr.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}T(Hu,nr,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[tn]},process:function(N){var U=this.options,K=N.pointers.length===U.pointers,xe=N.distance<U.threshold,qe=N.deltaTime<U.time;if(this.reset(),N.eventType&Je&&this.count===0)return this.failTimeout();if(xe&&qe&&K){if(N.eventType!=ve)return this.failTimeout();var Ot=this.pTime?N.timeStamp-this.pTime<U.interval:!0,yn=!this.pCenter||Bt(this.pCenter,N.center)<U.posThreshold;this.pTime=N.timeStamp,this.pCenter=N.center,!yn||!Ot?this.count=1:this.count+=1,this._input=N;var Rr=this.count%U.taps;if(Rr===0)return this.hasRequireFailures()?(this._timer=h(function(){this.state=mn,this.tryEmit()},U.interval,this),na):mn}return $n},failTimeout:function(){return this._timer=h(function(){this.state=$n},this.options.interval,this),$n},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==mn&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}});function $a(N,U){return U=U||{},U.recognizers=P(U.recognizers,$a.defaults.preset),new zl(N,U)}$a.VERSION="2.0.7",$a.defaults={domEvents:!1,touchAction:Ai,enable:!0,inputTarget:null,inputClass:null,preset:[[Gu,{enable:!1}],[Yf,{enable:!1},["rotate"]],[Zf,{direction:Gt}],[ju,{direction:Gt},["swipe"]],[Hu],[Hu,{event:"doubletap",taps:2},["tap"]],[Ds]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};var qf=1,Kf=2;function zl(N,U){this.options=y({},$a.defaults,U||{}),this.options.inputTarget=this.options.inputTarget||N,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=N,this.input=Ce(this),this.touchAction=new io(this,this.options.touchAction),jh(this,!0),v(this.options.recognizers,function(K){var xe=this.add(new K[0](K[1]));K[2]&&xe.recognizeWith(K[2]),K[3]&&xe.requireFailure(K[3])},this)}zl.prototype={set:function(N){return y(this.options,N),N.touchAction&&this.touchAction.update(),N.inputTarget&&(this.input.destroy(),this.input.target=N.inputTarget,this.input.init()),this},stop:function(N){this.session.stopped=N?Kf:qf},recognize:function(N){var U=this.session;if(!U.stopped){this.touchAction.preventDefaults(N);var K,xe=this.recognizers,qe=U.curRecognizer;(!qe||qe&&qe.state&mn)&&(qe=U.curRecognizer=null);for(var Ot=0;Ot<xe.length;)K=xe[Ot],U.stopped!==Kf&&(!qe||K==qe||K.canRecognizeWith(qe))?K.recognize(N):K.reset(),!qe&&K.state&(na|Oi|wn)&&(qe=U.curRecognizer=K),Ot++}},get:function(N){if(N instanceof nr)return N;for(var U=this.recognizers,K=0;K<U.length;K++)if(U[K].options.event==N)return U[K];return null},add:function(N){if(g(N,"add",this))return this;var U=this.get(N.options.event);return U&&this.remove(U),this.recognizers.push(N),N.manager=this,this.touchAction.update(),N},remove:function(N){if(g(N,"remove",this))return this;if(N=this.get(N),N){var U=this.recognizers,K=R(U,N);K!==-1&&(U.splice(K,1),this.touchAction.update())}return this},on:function(N,U){if(N!==a&&U!==a){var K=this.handlers;return v(O(N),function(xe){K[xe]=K[xe]||[],K[xe].push(U)}),this}},off:function(N,U){if(N!==a){var K=this.handlers;return v(O(N),function(xe){U?K[xe]&&K[xe].splice(R(K[xe],U),1):delete K[xe]}),this}},emit:function(N,U){this.options.domEvents&&db(N,U);var K=this.handlers[N]&&this.handlers[N].slice();if(!(!K||!K.length)){U.type=N,U.preventDefault=function(){U.srcEvent.preventDefault()};for(var xe=0;xe<K.length;)K[xe](U),xe++}},destroy:function(){this.element&&jh(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}};function jh(N,U){var K=N.element;if(!!K.style){var xe;v(N.options.cssProps,function(qe,Ot){xe=re(K.style,Ot),U?(N.oldCssProps[xe]=K.style[xe],K.style[xe]=qe):K.style[xe]=N.oldCssProps[xe]||""}),U||(N.oldCssProps={})}}function db(N,U){if(!s){var K=n.createEvent("Event");K.initEvent(N,!0,!0),K.gesture=U,U.target.dispatchEvent(K)}}if(!s){y($a,{INPUT_START:Je,INPUT_MOVE:tt,INPUT_END:ve,INPUT_CANCEL:pt,STATE_POSSIBLE:oo,STATE_BEGAN:na,STATE_CHANGED:Oi,STATE_ENDED:wn,STATE_RECOGNIZED:mn,STATE_CANCELLED:Pn,STATE_FAILED:$n,DIRECTION_NONE:kt,DIRECTION_LEFT:wt,DIRECTION_RIGHT:At,DIRECTION_UP:ht,DIRECTION_DOWN:jt,DIRECTION_HORIZONTAL:Gt,DIRECTION_VERTICAL:An,DIRECTION_ALL:_r,Manager:zl,Input:k,TouchAction:io,TouchInput:Ti,MouseInput:Or,PointerEventInput:Mr,TouchMouseInput:Un,SingleTouchInput:kr,Recognizer:nr,AttrRecognizer:ui,Tap:Hu,Pan:ju,Swipe:Zf,Pinch:Yf,Rotate:Gu,Press:Ds,on:j,off:A,each:v,merge:E,extend:x,assign:y,inherit:T,bindFn:C,prefixed:re});var pb=typeof window!="undefined"?window:typeof self!="undefined"?self:{};pb.Hammer=$a,typeof a=="function"&&a.amd?a(function(){return $a}):e.exports?e.exports=$a:t[r]=$a}})(typeof window!="undefined"?window:{console:null,MSPointerEvent:null,PointerEvent:null,CSS:null},document,"Hammer")})(qL);var Id=qL.exports,ya;(function(e){e.Hover="hover",e.Click="click",e.Select="select",e.Active="active",e.Drag="drag"})(ya||(ya={}));var cT,fT,dT,tx,pT;function Cie(e){var t=Tie();return function(){var r=Ee(e),a;if(t){var i=Ee(this).constructor;a=Reflect.construct(r,arguments,i)}else a=r.apply(this,arguments);return Mt(this,a)}}function Tie(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var Aie={panstart:"dragstart",panmove:"dragging",panend:"dragend",pancancel:"dragcancel"},Oie=(cT=nn(),fT=ln(ye.IMapService),cT(dT=(tx=function(e){Ct(n,e);var t=Cie(n);function n(){var r;Ae(this,n);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return r=t.call.apply(t,[this].concat(i)),m(D(r),"indragging",!1),en(D(r),"mapService",pT,D(r)),m(D(r),"hammertime",void 0),m(D(r),"lastClickTime",0),m(D(r),"lastClickXY",[-1,-1]),m(D(r),"clickTimer",void 0),m(D(r),"$containter",void 0),m(D(r),"onDrag",function(s){var l=r.interactionEvent(s);l.type=Aie[l.type],l.type==="dragging"?r.indragging=!0:r.indragging=!1,r.emit(ya.Drag,l)}),m(D(r),"onHammer",function(s){s.srcEvent.stopPropagation();var l=r.interactionEvent(s);r.emit(ya.Hover,l)}),m(D(r),"onTouch",function(s){var l=s.touches[0];r.onHover({x:l.pageX,y:l.pageY,type:"touch"})}),m(D(r),"onHover",function(s){var l=s.clientX,u=s.clientY,c=l,f=u,d=s.type,p=r.mapService.getMapContainer();if(p)if(bi)c=c-p.left-0,f=f-p.top-0;else{var h=p.getBoundingClientRect(),g=h.top,v=h.left;c=c-v-p.clientLeft,f=f-g-p.clientTop}var b=r.mapService.containerToLngLat([c,f]);if(d==="click"){if(!bi&&"ontouchstart"in document.documentElement)return;r.isDoubleTap(c,f,b);return}if(d==="touch"){r.isDoubleTap(c,f,b);return}d!=="click"&&d!=="dblclick"&&r.emit(ya.Hover,{x:c,y:f,lngLat:b,type:d,target:s})}),r}return Oe(n,[{key:"init",value:function(){this.addEventListenerOnMap(),this.$containter=this.mapService.getMapContainer()}},{key:"destroy",value:function(){this.hammertime&&this.hammertime.destroy(),this.removeEventListenerOnMap(),this.off(ya.Hover)}},{key:"triggerHover",value:function(a){var i=a.x,o=a.y;this.emit(ya.Hover,{x:i,y:o})}},{key:"triggerSelect",value:function(a){this.emit(ya.Select,{featureId:a})}},{key:"triggerActive",value:function(a){this.emit(ya.Active,{featureId:a})}},{key:"handleMiniEvent",value:function(a){this.onHover({clientX:a.touches[0].pageX,clientY:a.touches[0].pageY,type:"touch"})}},{key:"addEventListenerOnMap",value:function(){var a=this.mapService.getMapContainer();if(a)if(bi)Hn.document.addEventListener("touchstart",this.handleMiniEvent.bind(this));else{var i=new Id.Manager(a);i.add(new Id.Tap({event:"dblclick",taps:2})),i.add(new Id.Tap({event:"click"})),i.add(new Id.Pan({threshold:0,pointers:0})),i.add(new Id.Press({})),i.on("dblclick click",this.onHammer),i.on("panstart panmove panend pancancel",this.onDrag),a.addEventListener("mousemove",this.onHover),a.addEventListener("mousedown",this.onHover,!0),a.addEventListener("mouseup",this.onHover),a.addEventListener("contextmenu",this.onHover),this.hammertime=i}}},{key:"removeEventListenerOnMap",value:function(){if(bi)Hn.document.removeEventListener("touchstart",this.handleMiniEvent.bind(this));else{var a=this.mapService.getMapContainer();a&&(a.removeEventListener("mousemove",this.onHover),this.hammertime.off("dblclick click",this.onHammer),this.hammertime.off("panstart panmove panend pancancel",this.onDrag),a.removeEventListener("mousedown",this.onHover),a.removeEventListener("mouseup",this.onHover),a.removeEventListener("contextmenu",this.onHover))}}},{key:"interactionEvent",value:function(a){var i=a.type,o=a.pointerType,s,l;o==="touch"?(l=Math.floor(a.pointers[0].clientY),s=Math.floor(a.pointers[0].clientX)):(l=Math.floor(a.srcEvent.y),s=Math.floor(a.srcEvent.x));var u=this.mapService.getMapContainer();if(u){var c=u.getBoundingClientRect(),f=c.top,d=c.left;s-=d,l-=f}var p=this.mapService.containerToLngLat([s,l]);return{x:s,y:l,lngLat:p,type:i,target:a.srcEvent}}},{key:"isDoubleTap",value:function(a,i,o){var s=this,l=new Date().getTime(),u="click";l-this.lastClickTime<400&&Math.abs(this.lastClickXY[0]-a)<10&&Math.abs(this.lastClickXY[1]-i)<10?(this.lastClickTime=0,this.lastClickXY=[-1,-1],this.clickTimer&&clearTimeout(this.clickTimer),u="dblclick",this.emit(ya.Hover,{x:a,y:i,lngLat:o,type:u})):(this.lastClickTime=l,this.lastClickXY=[a,i],this.clickTimer=setTimeout(function(){u="click",s.emit(ya.Hover,{x:a,y:i,lngLat:o,type:u})},400))}}]),n}(x2),pT=Jt(tx.prototype,"mapService",[fT],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),tx))||dT),Mie=0;function Rie(e){if(bi)return null;var t=e;if(typeof e=="string"&&(t=document.getElementById(e)),t){var n=document.createElement("div");return n.style.cssText+=`
      position: absolute;
      z-index:2;
      height: 100%;
      width: 100%;
      pointer-events: none;
    `,n.id="l7-scene-".concat(Mie++),n.classList.add("l7-scene"),t.appendChild(n),n}return null}function Pie(e){var t,n,r=!0;return e==null||(t=e.target)===null||t===void 0||(n=t.path)===null||n===void 0||n.map(function(a){if(a!=null&&a.classList){var i;a==null||(i=a.classList)===null||i===void 0||i.forEach(function(o){(o==="l7-marker"||o==="l7-popup")&&(r=!1)})}}),r}var V;(function(e){e[e.DEPTH_BUFFER_BIT=256]="DEPTH_BUFFER_BIT",e[e.STENCIL_BUFFER_BIT=1024]="STENCIL_BUFFER_BIT",e[e.COLOR_BUFFER_BIT=16384]="COLOR_BUFFER_BIT",e[e.POINTS=0]="POINTS",e[e.LINES=1]="LINES",e[e.LINE_LOOP=2]="LINE_LOOP",e[e.LINE_STRIP=3]="LINE_STRIP",e[e.TRIANGLES=4]="TRIANGLES",e[e.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",e[e.TRIANGLE_FAN=6]="TRIANGLE_FAN",e[e.ZERO=0]="ZERO",e[e.ONE=1]="ONE",e[e.SRC_COLOR=768]="SRC_COLOR",e[e.ONE_MINUS_SRC_COLOR=769]="ONE_MINUS_SRC_COLOR",e[e.SRC_ALPHA=770]="SRC_ALPHA",e[e.ONE_MINUS_SRC_ALPHA=771]="ONE_MINUS_SRC_ALPHA",e[e.DST_ALPHA=772]="DST_ALPHA",e[e.ONE_MINUS_DST_ALPHA=773]="ONE_MINUS_DST_ALPHA",e[e.DST_COLOR=774]="DST_COLOR",e[e.ONE_MINUS_DST_COLOR=775]="ONE_MINUS_DST_COLOR",e[e.SRC_ALPHA_SATURATE=776]="SRC_ALPHA_SATURATE",e[e.FUNC_ADD=32774]="FUNC_ADD",e[e.BLEND_EQUATION=32777]="BLEND_EQUATION",e[e.BLEND_EQUATION_RGB=32777]="BLEND_EQUATION_RGB",e[e.BLEND_EQUATION_ALPHA=34877]="BLEND_EQUATION_ALPHA",e[e.FUNC_SUBTRACT=32778]="FUNC_SUBTRACT",e[e.FUNC_REVERSE_SUBTRACT=32779]="FUNC_REVERSE_SUBTRACT",e[e.MAX_EXT=32776]="MAX_EXT",e[e.MIN_EXT=32775]="MIN_EXT",e[e.BLEND_DST_RGB=32968]="BLEND_DST_RGB",e[e.BLEND_SRC_RGB=32969]="BLEND_SRC_RGB",e[e.BLEND_DST_ALPHA=32970]="BLEND_DST_ALPHA",e[e.BLEND_SRC_ALPHA=32971]="BLEND_SRC_ALPHA",e[e.CONSTANT_COLOR=32769]="CONSTANT_COLOR",e[e.ONE_MINUS_CONSTANT_COLOR=32770]="ONE_MINUS_CONSTANT_COLOR",e[e.CONSTANT_ALPHA=32771]="CONSTANT_ALPHA",e[e.ONE_MINUS_CONSTANT_ALPHA=32772]="ONE_MINUS_CONSTANT_ALPHA",e[e.BLEND_COLOR=32773]="BLEND_COLOR",e[e.ARRAY_BUFFER=34962]="ARRAY_BUFFER",e[e.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",e[e.ARRAY_BUFFER_BINDING=34964]="ARRAY_BUFFER_BINDING",e[e.ELEMENT_ARRAY_BUFFER_BINDING=34965]="ELEMENT_ARRAY_BUFFER_BINDING",e[e.STREAM_DRAW=35040]="STREAM_DRAW",e[e.STATIC_DRAW=35044]="STATIC_DRAW",e[e.DYNAMIC_DRAW=35048]="DYNAMIC_DRAW",e[e.BUFFER_SIZE=34660]="BUFFER_SIZE",e[e.BUFFER_USAGE=34661]="BUFFER_USAGE",e[e.CURRENT_VERTEX_ATTRIB=34342]="CURRENT_VERTEX_ATTRIB",e[e.FRONT=1028]="FRONT",e[e.BACK=1029]="BACK",e[e.FRONT_AND_BACK=1032]="FRONT_AND_BACK",e[e.CULL_FACE=2884]="CULL_FACE",e[e.BLEND=3042]="BLEND",e[e.DITHER=3024]="DITHER",e[e.STENCIL_TEST=2960]="STENCIL_TEST",e[e.DEPTH_TEST=2929]="DEPTH_TEST",e[e.SCISSOR_TEST=3089]="SCISSOR_TEST",e[e.POLYGON_OFFSET_FILL=32823]="POLYGON_OFFSET_FILL",e[e.SAMPLE_ALPHA_TO_COVERAGE=32926]="SAMPLE_ALPHA_TO_COVERAGE",e[e.SAMPLE_COVERAGE=32928]="SAMPLE_COVERAGE",e[e.NO_ERROR=0]="NO_ERROR",e[e.INVALID_ENUM=1280]="INVALID_ENUM",e[e.INVALID_VALUE=1281]="INVALID_VALUE",e[e.INVALID_OPERATION=1282]="INVALID_OPERATION",e[e.OUT_OF_MEMORY=1285]="OUT_OF_MEMORY",e[e.CW=2304]="CW",e[e.CCW=2305]="CCW",e[e.LINE_WIDTH=2849]="LINE_WIDTH",e[e.ALIASED_POINT_SIZE_RANGE=33901]="ALIASED_POINT_SIZE_RANGE",e[e.ALIASED_LINE_WIDTH_RANGE=33902]="ALIASED_LINE_WIDTH_RANGE",e[e.CULL_FACE_MODE=2885]="CULL_FACE_MODE",e[e.FRONT_FACE=2886]="FRONT_FACE",e[e.DEPTH_RANGE=2928]="DEPTH_RANGE",e[e.DEPTH_WRITEMASK=2930]="DEPTH_WRITEMASK",e[e.DEPTH_CLEAR_VALUE=2931]="DEPTH_CLEAR_VALUE",e[e.DEPTH_FUNC=2932]="DEPTH_FUNC",e[e.STENCIL_CLEAR_VALUE=2961]="STENCIL_CLEAR_VALUE",e[e.STENCIL_FUNC=2962]="STENCIL_FUNC",e[e.STENCIL_FAIL=2964]="STENCIL_FAIL",e[e.STENCIL_PASS_DEPTH_FAIL=2965]="STENCIL_PASS_DEPTH_FAIL",e[e.STENCIL_PASS_DEPTH_PASS=2966]="STENCIL_PASS_DEPTH_PASS",e[e.STENCIL_REF=2967]="STENCIL_REF",e[e.STENCIL_VALUE_MASK=2963]="STENCIL_VALUE_MASK",e[e.STENCIL_WRITEMASK=2968]="STENCIL_WRITEMASK",e[e.STENCIL_BACK_FUNC=34816]="STENCIL_BACK_FUNC",e[e.STENCIL_BACK_FAIL=34817]="STENCIL_BACK_FAIL",e[e.STENCIL_BACK_PASS_DEPTH_FAIL=34818]="STENCIL_BACK_PASS_DEPTH_FAIL",e[e.STENCIL_BACK_PASS_DEPTH_PASS=34819]="STENCIL_BACK_PASS_DEPTH_PASS",e[e.STENCIL_BACK_REF=36003]="STENCIL_BACK_REF",e[e.STENCIL_BACK_VALUE_MASK=36004]="STENCIL_BACK_VALUE_MASK",e[e.STENCIL_BACK_WRITEMASK=36005]="STENCIL_BACK_WRITEMASK",e[e.VIEWPORT=2978]="VIEWPORT",e[e.SCISSOR_BOX=3088]="SCISSOR_BOX",e[e.COLOR_CLEAR_VALUE=3106]="COLOR_CLEAR_VALUE",e[e.COLOR_WRITEMASK=3107]="COLOR_WRITEMASK",e[e.UNPACK_ALIGNMENT=3317]="UNPACK_ALIGNMENT",e[e.PACK_ALIGNMENT=3333]="PACK_ALIGNMENT",e[e.MAX_TEXTURE_SIZE=3379]="MAX_TEXTURE_SIZE",e[e.MAX_VIEWPORT_DIMS=3386]="MAX_VIEWPORT_DIMS",e[e.SUBPIXEL_BITS=3408]="SUBPIXEL_BITS",e[e.RED_BITS=3410]="RED_BITS",e[e.GREEN_BITS=3411]="GREEN_BITS",e[e.BLUE_BITS=3412]="BLUE_BITS",e[e.ALPHA_BITS=3413]="ALPHA_BITS",e[e.DEPTH_BITS=3414]="DEPTH_BITS",e[e.STENCIL_BITS=3415]="STENCIL_BITS",e[e.POLYGON_OFFSET_UNITS=10752]="POLYGON_OFFSET_UNITS",e[e.POLYGON_OFFSET_FACTOR=32824]="POLYGON_OFFSET_FACTOR",e[e.TEXTURE_BINDING_2D=32873]="TEXTURE_BINDING_2D",e[e.SAMPLE_BUFFERS=32936]="SAMPLE_BUFFERS",e[e.SAMPLES=32937]="SAMPLES",e[e.SAMPLE_COVERAGE_VALUE=32938]="SAMPLE_COVERAGE_VALUE",e[e.SAMPLE_COVERAGE_INVERT=32939]="SAMPLE_COVERAGE_INVERT",e[e.COMPRESSED_TEXTURE_FORMATS=34467]="COMPRESSED_TEXTURE_FORMATS",e[e.DONT_CARE=4352]="DONT_CARE",e[e.FASTEST=4353]="FASTEST",e[e.NICEST=4354]="NICEST",e[e.GENERATE_MIPMAP_HINT=33170]="GENERATE_MIPMAP_HINT",e[e.BYTE=5120]="BYTE",e[e.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",e[e.SHORT=5122]="SHORT",e[e.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",e[e.INT=5124]="INT",e[e.UNSIGNED_INT=5125]="UNSIGNED_INT",e[e.FLOAT=5126]="FLOAT",e[e.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",e[e.ALPHA=6406]="ALPHA",e[e.RGB=6407]="RGB",e[e.RGBA=6408]="RGBA",e[e.LUMINANCE=6409]="LUMINANCE",e[e.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",e[e.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",e[e.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",e[e.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",e[e.FRAGMENT_SHADER=35632]="FRAGMENT_SHADER",e[e.VERTEX_SHADER=35633]="VERTEX_SHADER",e[e.MAX_VERTEX_ATTRIBS=34921]="MAX_VERTEX_ATTRIBS",e[e.MAX_VERTEX_UNIFORM_VECTORS=36347]="MAX_VERTEX_UNIFORM_VECTORS",e[e.MAX_VARYING_VECTORS=36348]="MAX_VARYING_VECTORS",e[e.MAX_COMBINED_TEXTURE_IMAGE_UNITS=35661]="MAX_COMBINED_TEXTURE_IMAGE_UNITS",e[e.MAX_VERTEX_TEXTURE_IMAGE_UNITS=35660]="MAX_VERTEX_TEXTURE_IMAGE_UNITS",e[e.MAX_TEXTURE_IMAGE_UNITS=34930]="MAX_TEXTURE_IMAGE_UNITS",e[e.MAX_FRAGMENT_UNIFORM_VECTORS=36349]="MAX_FRAGMENT_UNIFORM_VECTORS",e[e.SHADER_TYPE=35663]="SHADER_TYPE",e[e.DELETE_STATUS=35712]="DELETE_STATUS",e[e.LINK_STATUS=35714]="LINK_STATUS",e[e.VALIDATE_STATUS=35715]="VALIDATE_STATUS",e[e.ATTACHED_SHADERS=35717]="ATTACHED_SHADERS",e[e.ACTIVE_UNIFORMS=35718]="ACTIVE_UNIFORMS",e[e.ACTIVE_ATTRIBUTES=35721]="ACTIVE_ATTRIBUTES",e[e.SHADING_LANGUAGE_VERSION=35724]="SHADING_LANGUAGE_VERSION",e[e.CURRENT_PROGRAM=35725]="CURRENT_PROGRAM",e[e.NEVER=512]="NEVER",e[e.LESS=513]="LESS",e[e.EQUAL=514]="EQUAL",e[e.LEQUAL=515]="LEQUAL",e[e.GREATER=516]="GREATER",e[e.NOTEQUAL=517]="NOTEQUAL",e[e.GEQUAL=518]="GEQUAL",e[e.ALWAYS=519]="ALWAYS",e[e.KEEP=7680]="KEEP",e[e.REPLACE=7681]="REPLACE",e[e.INCR=7682]="INCR",e[e.DECR=7683]="DECR",e[e.INVERT=5386]="INVERT",e[e.INCR_WRAP=34055]="INCR_WRAP",e[e.DECR_WRAP=34056]="DECR_WRAP",e[e.VENDOR=7936]="VENDOR",e[e.RENDERER=7937]="RENDERER",e[e.VERSION=7938]="VERSION",e[e.NEAREST=9728]="NEAREST",e[e.LINEAR=9729]="LINEAR",e[e.NEAREST_MIPMAP_NEAREST=9984]="NEAREST_MIPMAP_NEAREST",e[e.LINEAR_MIPMAP_NEAREST=9985]="LINEAR_MIPMAP_NEAREST",e[e.NEAREST_MIPMAP_LINEAR=9986]="NEAREST_MIPMAP_LINEAR",e[e.LINEAR_MIPMAP_LINEAR=9987]="LINEAR_MIPMAP_LINEAR",e[e.TEXTURE_MAG_FILTER=10240]="TEXTURE_MAG_FILTER",e[e.TEXTURE_MIN_FILTER=10241]="TEXTURE_MIN_FILTER",e[e.TEXTURE_WRAP_S=10242]="TEXTURE_WRAP_S",e[e.TEXTURE_WRAP_T=10243]="TEXTURE_WRAP_T",e[e.TEXTURE_2D=3553]="TEXTURE_2D",e[e.TEXTURE=5890]="TEXTURE",e[e.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",e[e.TEXTURE_BINDING_CUBE_MAP=34068]="TEXTURE_BINDING_CUBE_MAP",e[e.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",e[e.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",e[e.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",e[e.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",e[e.MAX_CUBE_MAP_TEXTURE_SIZE=34076]="MAX_CUBE_MAP_TEXTURE_SIZE",e[e.TEXTURE0=33984]="TEXTURE0",e[e.TEXTURE1=33985]="TEXTURE1",e[e.TEXTURE2=33986]="TEXTURE2",e[e.TEXTURE3=33987]="TEXTURE3",e[e.TEXTURE4=33988]="TEXTURE4",e[e.TEXTURE5=33989]="TEXTURE5",e[e.TEXTURE6=33990]="TEXTURE6",e[e.TEXTURE7=33991]="TEXTURE7",e[e.TEXTURE8=33992]="TEXTURE8",e[e.TEXTURE9=33993]="TEXTURE9",e[e.TEXTURE10=33994]="TEXTURE10",e[e.TEXTURE11=33995]="TEXTURE11",e[e.TEXTURE12=33996]="TEXTURE12",e[e.TEXTURE13=33997]="TEXTURE13",e[e.TEXTURE14=33998]="TEXTURE14",e[e.TEXTURE15=33999]="TEXTURE15",e[e.TEXTURE16=34e3]="TEXTURE16",e[e.TEXTURE17=34001]="TEXTURE17",e[e.TEXTURE18=34002]="TEXTURE18",e[e.TEXTURE19=34003]="TEXTURE19",e[e.TEXTURE20=34004]="TEXTURE20",e[e.TEXTURE21=34005]="TEXTURE21",e[e.TEXTURE22=34006]="TEXTURE22",e[e.TEXTURE23=34007]="TEXTURE23",e[e.TEXTURE24=34008]="TEXTURE24",e[e.TEXTURE25=34009]="TEXTURE25",e[e.TEXTURE26=34010]="TEXTURE26",e[e.TEXTURE27=34011]="TEXTURE27",e[e.TEXTURE28=34012]="TEXTURE28",e[e.TEXTURE29=34013]="TEXTURE29",e[e.TEXTURE30=34014]="TEXTURE30",e[e.TEXTURE31=34015]="TEXTURE31",e[e.ACTIVE_TEXTURE=34016]="ACTIVE_TEXTURE",e[e.REPEAT=10497]="REPEAT",e[e.CLAMP_TO_EDGE=33071]="CLAMP_TO_EDGE",e[e.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",e[e.FLOAT_VEC2=35664]="FLOAT_VEC2",e[e.FLOAT_VEC3=35665]="FLOAT_VEC3",e[e.FLOAT_VEC4=35666]="FLOAT_VEC4",e[e.INT_VEC2=35667]="INT_VEC2",e[e.INT_VEC3=35668]="INT_VEC3",e[e.INT_VEC4=35669]="INT_VEC4",e[e.BOOL=35670]="BOOL",e[e.BOOL_VEC2=35671]="BOOL_VEC2",e[e.BOOL_VEC3=35672]="BOOL_VEC3",e[e.BOOL_VEC4=35673]="BOOL_VEC4",e[e.FLOAT_MAT2=35674]="FLOAT_MAT2",e[e.FLOAT_MAT3=35675]="FLOAT_MAT3",e[e.FLOAT_MAT4=35676]="FLOAT_MAT4",e[e.SAMPLER_2D=35678]="SAMPLER_2D",e[e.SAMPLER_CUBE=35680]="SAMPLER_CUBE",e[e.VERTEX_ATTRIB_ARRAY_ENABLED=34338]="VERTEX_ATTRIB_ARRAY_ENABLED",e[e.VERTEX_ATTRIB_ARRAY_SIZE=34339]="VERTEX_ATTRIB_ARRAY_SIZE",e[e.VERTEX_ATTRIB_ARRAY_STRIDE=34340]="VERTEX_ATTRIB_ARRAY_STRIDE",e[e.VERTEX_ATTRIB_ARRAY_TYPE=34341]="VERTEX_ATTRIB_ARRAY_TYPE",e[e.VERTEX_ATTRIB_ARRAY_NORMALIZED=34922]="VERTEX_ATTRIB_ARRAY_NORMALIZED",e[e.VERTEX_ATTRIB_ARRAY_POINTER=34373]="VERTEX_ATTRIB_ARRAY_POINTER",e[e.VERTEX_ATTRIB_ARRAY_BUFFER_BINDING=34975]="VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",e[e.COMPILE_STATUS=35713]="COMPILE_STATUS",e[e.LOW_FLOAT=36336]="LOW_FLOAT",e[e.MEDIUM_FLOAT=36337]="MEDIUM_FLOAT",e[e.HIGH_FLOAT=36338]="HIGH_FLOAT",e[e.LOW_INT=36339]="LOW_INT",e[e.MEDIUM_INT=36340]="MEDIUM_INT",e[e.HIGH_INT=36341]="HIGH_INT",e[e.FRAMEBUFFER=36160]="FRAMEBUFFER",e[e.RENDERBUFFER=36161]="RENDERBUFFER",e[e.RGBA4=32854]="RGBA4",e[e.RGB5_A1=32855]="RGB5_A1",e[e.RGB565=36194]="RGB565",e[e.DEPTH_COMPONENT16=33189]="DEPTH_COMPONENT16",e[e.STENCIL_INDEX=6401]="STENCIL_INDEX",e[e.STENCIL_INDEX8=36168]="STENCIL_INDEX8",e[e.DEPTH_STENCIL=34041]="DEPTH_STENCIL",e[e.RENDERBUFFER_WIDTH=36162]="RENDERBUFFER_WIDTH",e[e.RENDERBUFFER_HEIGHT=36163]="RENDERBUFFER_HEIGHT",e[e.RENDERBUFFER_INTERNAL_FORMAT=36164]="RENDERBUFFER_INTERNAL_FORMAT",e[e.RENDERBUFFER_RED_SIZE=36176]="RENDERBUFFER_RED_SIZE",e[e.RENDERBUFFER_GREEN_SIZE=36177]="RENDERBUFFER_GREEN_SIZE",e[e.RENDERBUFFER_BLUE_SIZE=36178]="RENDERBUFFER_BLUE_SIZE",e[e.RENDERBUFFER_ALPHA_SIZE=36179]="RENDERBUFFER_ALPHA_SIZE",e[e.RENDERBUFFER_DEPTH_SIZE=36180]="RENDERBUFFER_DEPTH_SIZE",e[e.RENDERBUFFER_STENCIL_SIZE=36181]="RENDERBUFFER_STENCIL_SIZE",e[e.FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE=36048]="FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",e[e.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME=36049]="FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",e[e.FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL=36050]="FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",e[e.FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE=36051]="FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",e[e.COLOR_ATTACHMENT0=36064]="COLOR_ATTACHMENT0",e[e.DEPTH_ATTACHMENT=36096]="DEPTH_ATTACHMENT",e[e.STENCIL_ATTACHMENT=36128]="STENCIL_ATTACHMENT",e[e.DEPTH_STENCIL_ATTACHMENT=33306]="DEPTH_STENCIL_ATTACHMENT",e[e.NONE=0]="NONE",e[e.FRAMEBUFFER_COMPLETE=36053]="FRAMEBUFFER_COMPLETE",e[e.FRAMEBUFFER_INCOMPLETE_ATTACHMENT=36054]="FRAMEBUFFER_INCOMPLETE_ATTACHMENT",e[e.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT=36055]="FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",e[e.FRAMEBUFFER_INCOMPLETE_DIMENSIONS=36057]="FRAMEBUFFER_INCOMPLETE_DIMENSIONS",e[e.FRAMEBUFFER_UNSUPPORTED=36061]="FRAMEBUFFER_UNSUPPORTED",e[e.FRAMEBUFFER_BINDING=36006]="FRAMEBUFFER_BINDING",e[e.RENDERBUFFER_BINDING=36007]="RENDERBUFFER_BINDING",e[e.MAX_RENDERBUFFER_SIZE=34024]="MAX_RENDERBUFFER_SIZE",e[e.INVALID_FRAMEBUFFER_OPERATION=1286]="INVALID_FRAMEBUFFER_OPERATION",e[e.UNPACK_FLIP_Y_WEBGL=37440]="UNPACK_FLIP_Y_WEBGL",e[e.UNPACK_PREMULTIPLY_ALPHA_WEBGL=37441]="UNPACK_PREMULTIPLY_ALPHA_WEBGL",e[e.CONTEXT_LOST_WEBGL=37442]="CONTEXT_LOST_WEBGL",e[e.UNPACK_COLORSPACE_CONVERSION_WEBGL=37443]="UNPACK_COLORSPACE_CONVERSION_WEBGL",e[e.BROWSER_DEFAULT_WEBGL=37444]="BROWSER_DEFAULT_WEBGL"})(V||(V={}));var hT,mT,gT,vT,bT,yT,xT,Ql,wT,_T,ET,kT,ST;function CT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Vm(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?CT(Object(n),!0).forEach(function(r){m(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):CT(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var Iie=(hT=nn(),mT=ln(ye.IMapService),gT=ln(ye.IRendererService),vT=ln(ye.IGlobalConfigService),bT=ln(ye.IInteractionService),yT=ln(ye.ILayerService),hT(xT=(Ql=function(){function e(){var t=this;Ae(this,e),m(this,"pickedColors",void 0),m(this,"pickedTileLayers",[]),en(this,"mapService",wT,this),en(this,"rendererService",_T,this),en(this,"configService",ET,this),en(this,"interactionService",kT,this),en(this,"layerService",ST,this),m(this,"pickingFBO",void 0),m(this,"width",0),m(this,"height",0),m(this,"alreadyInPicking",!1),m(this,"pickBufferScale",1),m(this,"pickedLayers",[]),m(this,"pickFromPickingFBO",function(n,r){var a,i=r.x,o=r.y,s=r.lngLat,l=r.type,u=r.target,c=!1,f=t.rendererService;f.getViewportSize;var d=f.readPixels,p=f.getContainer,h=t.getContainerSize(p()),g=h.width,v=h.height;g*=vr,v*=vr;var b=n.getLayerConfig(),y=b.enableHighlight,x=b.enableSelect,E=i*vr,T=o*vr;if(E>g-1*vr||E<0||T>v-1*vr||T<0)return!1;var C;if(C=d({x:Math.floor(E/t.pickBufferScale),y:Math.floor((v-(o+1)*vr)/t.pickBufferScale),width:1,height:1,data:new Uint8Array(1*1*4),framebuffer:t.pickingFBO}),t.pickedColors=C,C[0]!==0||C[1]!==0||C[2]!==0){var I=Go(C),P=n.getSource().getFeatureById(I);I!==n.getCurrentPickId()&&l==="mousemove"&&(l="mouseenter");var j={x:i,y:o,type:l,lngLat:s,featureId:I,feature:P,target:u};P&&(c=!0,n.setCurrentPickId(I),t.pickedLayers=[n],t.triggerHoverOnLayer(n,j))}else{var A={x:i,y:o,lngLat:s,type:n.getCurrentPickId()!==null&&l==="mousemove"?"mouseout":"un"+l,featureId:null,target:u,feature:null};t.triggerHoverOnLayer(n,Vm(Vm({},A),{},{type:"unpick"})),t.triggerHoverOnLayer(n,A),n.setCurrentPickId(null),t.pickedLayers=[]}if(y&&t.highlightPickedFeature(n,C),x&&l==="click"&&((a=C)===null||a===void 0?void 0:a.toString())!==[0,0,0,0].toString()){var S=Go(C);n.getCurrentSelectedId()===null||S!==n.getCurrentSelectedId()?(t.selectFeature(n,C),n.setCurrentSelectedId(S)):(t.selectFeature(n,new Uint8Array([0,0,0,0])),n.setCurrentSelectedId(null)),n.isVector||t.layerService.getLayers().filter(function(M){return M.tileLayer}).map(function(M){M.tileLayer.clearPickState()})}return c})}return Oe(e,[{key:"init",value:function(n){var r=this.rendererService,a=r.createTexture2D,i=r.createFramebuffer;r.getViewportSize;var o=r.getContainer,s=this.getContainerSize(o()),l=s.width,u=s.height;l*=vr,u*=vr,this.pickBufferScale=this.configService.getSceneConfig(n).pickBufferScale||1,this.pickingFBO=i({color:a({width:Math.round(l/this.pickBufferScale),height:Math.round(u/this.pickBufferScale),wrapS:V.CLAMP_TO_EDGE,wrapT:V.CLAMP_TO_EDGE})}),this.interactionService.on(ya.Hover,this.pickingAllLayer.bind(this))}},{key:"boxPickLayer",value:function(){var t=qn(pn.mark(function r(a,i,o){var s=this,l,u,c;return pn.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:l=this.rendererService,u=l.useFramebuffer,c=l.clear,l.getContainer,this.resizePickingFBO(),u(this.pickingFBO,function(){c({framebuffer:s.pickingFBO,color:[0,0,0,0],stencil:0,depth:1}),a.hooks.beforePickingEncode.call(),a.renderModels(),a.hooks.afterPickingEncode.call();var p=s.pickBox(a,i);o(p)});case 3:case"end":return d.stop()}},r,this)}));function n(r,a,i){return t.apply(this,arguments)}return n}()},{key:"pickBox",value:function(n,r){var a=this,i=r.map(function(A){var S=A<0?0:A;return Math.floor(S*vr/a.pickBufferScale)}),o=Le(i,4),s=o[0],l=o[1],u=o[2],c=o[3],f=this.rendererService;f.getViewportSize;var d=f.readPixels,p=f.getContainer,h=this.getContainerSize(p()),g=h.width,v=h.height;if(g*=vr,v*=vr,s>(g-1)*vr/this.pickBufferScale||u<0||l>(v-1)*vr/this.pickBufferScale||c<0)return[];var b,y=Math.min(g/this.pickBufferScale,u)-s,x=Math.min(v/this.pickBufferScale,c)-l;b=d({x:s,y:Math.floor(v/this.pickBufferScale-(c+1)),width:y,height:x,data:new Uint8Array(y*x*4),framebuffer:this.pickingFBO});for(var E=[],T={},C=0;C<b.length/4;C=C+1){var I=b.slice(C*4,C*4+4),P=Go(I);if(P!==-1&&!T[P]){var j=n.getSource().getFeatureById(P);E.push(Vm(Vm({},j),{},{pickedFeatureIdx:P})),T[P]=!0}}return E}},{key:"handleCursor",value:function(n,r){var a=n.getLayerConfig(),i=a.cursor,o=i===void 0?"":i,s=a.cursorEnabled;if(s){var l=this.mapService.version,u=l==="GAODE2.x"?this.mapService.getMapContainer():this.mapService.getMarkerContainer(),c=u==null?void 0:u.style.getPropertyValue("cursor");r==="unmousemove"&&c!==""?u==null||u.style.setProperty("cursor",""):r==="mousemove"&&(u==null||u.style.setProperty("cursor",o))}}},{key:"destroy",value:function(){this.pickingFBO.destroy(),this.pickingFBO=null}},{key:"getContainerSize",value:function(n){return n.getContext?{width:n.width/vr,height:n.height/vr}:n.getBoundingClientRect()}},{key:"pickingAllLayer",value:function(){var t=qn(pn.mark(function r(a){return pn.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:if(!(this.alreadyInPicking||this.layerService.alreadyInRendering||this.interactionService.indragging||!this.layerService.getShaderPickStat())){o.next=2;break}return o.abrupt("return");case 2:return this.alreadyInPicking=!0,o.next=5,this.pickingLayers(a);case 5:this.layerService.renderLayers(),this.alreadyInPicking=!1;case 7:case"end":return o.stop()}},r,this)}));function n(r){return t.apply(this,arguments)}return n}()},{key:"resizePickingFBO",value:function(){var n=this.rendererService.getContainer,r=this.getContainerSize(n()),a=r.width,i=r.height;a*=vr,i*=vr,(this.width!==a||this.height!==i)&&(this.pickingFBO.resize({width:Math.round(a/this.pickBufferScale),height:Math.round(i/this.pickBufferScale)}),this.width=a,this.height=i)}},{key:"pickingLayers",value:function(){var t=qn(pn.mark(function r(a){var i=this,o,s,l;return pn.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:o=this.rendererService,o.getViewportSize,s=o.useFramebuffer,l=o.clear,o.getContainer,this.resizePickingFBO(),s(this.pickingFBO,function(){var f=i.layerService.getRenderList();f.filter(function(d){return d.needPick(a.type)}).reverse().some(function(d){if(l({framebuffer:i.pickingFBO,color:[0,0,0,0],stencil:0,depth:1}),i.pickedLayers.filter(function(h){return!h.isVector}).map(function(h){i.selectFeature(h,new Uint8Array([0,0,0,0]))}),i.pickedTileLayers.map(function(h){var g;return(g=h.tileLayer)===null||g===void 0?void 0:g.clearPick(a.type)}),d.tileLayer)return d.tileLayer.pickLayers(a);d.hooks.beforePickingEncode.call(),d.masks.length>0&&d.masks.map(function(h){h.hooks.beforeRenderData.call(),h.hooks.beforeRender.call(),h.render(),h.hooks.afterRender.call()}),d.renderModels(!0),d.hooks.afterPickingEncode.call();var p=i.pickFromPickingFBO(d,a);return i.layerService.pickedLayerId=p?+d.id:-1,p&&!d.getLayerConfig().enablePropagation})});case 3:case"end":return c.stop()}},r,this)}));function n(r){return t.apply(this,arguments)}return n}()},{key:"triggerHoverOnLayer",value:function(n,r){Pie(r)&&(this.handleCursor(n,r.type),n.emit(r.type,r))}},{key:"highlightPickedFeature",value:function(n,r){var a=Le(r,3),i=a[0],o=a[1],s=a[2];n.hooks.beforeHighlight.call([i,o,s])}},{key:"selectFeature",value:function(n,r){var a=Le(r,3),i=a[0],o=a[1],s=a[2];n.hooks.beforeSelect.call([i,o,s])}}]),e}(),wT=Jt(Ql.prototype,"mapService",[mT],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),_T=Jt(Ql.prototype,"rendererService",[gT],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ET=Jt(Ql.prototype,"configService",[vT],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),kT=Jt(Ql.prototype,"interactionService",[bT],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ST=Jt(Ql.prototype,"layerService",[yT],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ql))||xT),Lie=function(){function e(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;Ae(this,e),m(this,"autoStart",void 0),m(this,"startTime",0),m(this,"oldTime",0),m(this,"running",!1),m(this,"elapsedTime",0),this.autoStart=t}return Oe(e,[{key:"start",value:function(){this.startTime=(typeof performance=="undefined"?Date:performance).now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}},{key:"stop",value:function(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}},{key:"getElapsedTime",value:function(){return this.getDelta(),this.elapsedTime}},{key:"getDelta",value:function(){var n=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){var r=(typeof performance=="undefined"?Date:performance).now();n=(r-this.oldTime)/1e3,this.oldTime=r,this.elapsedTime+=n}return n}}]),e}(),TT,AT,OT,MT,RT,Ld,PT,IT,LT;function Nie(e,t){var n=typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=Fie(e))||t&&e&&typeof e.length=="number"){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(u){throw u},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i=!0,o=!1,s;return{s:function(){n=n.call(e)},n:function(){var u=n.next();return i=u.done,u},e:function(u){o=!0,s=u},f:function(){try{!i&&n.return!=null&&n.return()}finally{if(o)throw s}}}}function Fie(e,t){if(!!e){if(typeof e=="string")return NT(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return NT(e,t)}}function NT(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Die=(TT=nn(),AT=ln(ye.IRendererService),OT=ln(ye.IMapService),MT=ln(ye.IGlobalConfigService),TT(RT=(Ld=function(){function e(){Ae(this,e),m(this,"pickedLayerId",-1),m(this,"clock",new Lie),m(this,"alreadyInRendering",!1),m(this,"layers",[]),m(this,"layerList",[]),m(this,"layerRenderID",void 0),m(this,"sceneInited",!1),m(this,"animateInstanceCount",0),m(this,"shaderPicking",!0),m(this,"enableRender",!0),en(this,"renderService",PT,this),en(this,"mapService",IT,this),en(this,"configService",LT,this)}return Oe(e,[{key:"add",value:function(n){this.sceneInited&&n.init(),this.layers.push(n),this.updateLayerRenderList()}},{key:"addMask",value:function(n){this.sceneInited&&n.init()}},{key:"initLayers",value:function(){this.sceneInited=!0,this.layers.forEach(function(n){n.inited||n.init()}),this.updateLayerRenderList()}},{key:"getSceneInited",value:function(){return this.sceneInited}},{key:"getRenderList",value:function(){return this.layerList}},{key:"getLayers",value:function(){return this.layers}},{key:"getLayer",value:function(n){return this.layers.find(function(r){return r.id===n})}},{key:"getLayerByName",value:function(n){return this.layers.find(function(r){return r.name===n})}},{key:"cleanRemove",value:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,a=this.layers.indexOf(n);a>-1&&this.layers.splice(a,1),r&&(this.updateLayerRenderList(),this.renderLayers())}},{key:"remove",value:function(n,r){if(r){var a=r.layerChildren.indexOf(n);a>-1&&r.layerChildren.splice(a,1)}else{var i=this.layers.indexOf(n);i>-1&&this.layers.splice(i,1)}this.updateLayerRenderList(),n.destroy(),this.renderLayers()}},{key:"removeAllLayers",value:function(){this.destroy()}},{key:"setEnableRender",value:function(n){this.enableRender=n}},{key:"renderLayers",value:function(){var t=qn(pn.mark(function r(){var a,i,o;return pn.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if(!(this.alreadyInRendering||!this.enableRender)){l.next=2;break}return l.abrupt("return");case 2:this.alreadyInRendering=!0,this.clear(),a=Nie(this.layerList),l.prev=5,a.s();case 7:if((i=a.n()).done){l.next=21;break}if(o=i.value,o.hooks.beforeRenderData.call(),o.hooks.beforeRender.call(),o.masks.length>0&&(this.renderService.clear({stencil:0,depth:1,framebuffer:null}),o.masks.map(function(u){u.hooks.beforeRenderData.call(),u.hooks.beforeRender.call(),u.render(),u.hooks.afterRender.call()})),!o.getLayerConfig().enableMultiPassRenderer){l.next=17;break}return l.next=15,o.renderMultiPass();case 15:l.next=18;break;case 17:o.render();case 18:o.hooks.afterRender.call();case 19:l.next=7;break;case 21:l.next=26;break;case 23:l.prev=23,l.t0=l.catch(5),a.e(l.t0);case 26:return l.prev=26,a.f(),l.finish(26);case 29:this.alreadyInRendering=!1;case 30:case"end":return l.stop()}},r,this,[[5,23,26,29]])}));function n(){return t.apply(this,arguments)}return n}()},{key:"updateLayerRenderList",value:function(){var n=this;this.layerList=[],this.layers.filter(function(r){return r.inited}).filter(function(r){return r.isVisible()}).sort(function(r,a){return r.zIndex-a.zIndex}).forEach(function(r){n.layerList.push(r)})}},{key:"destroy",value:function(){this.layers.forEach(function(n){n.destroy()}),this.layers=[],this.layerList=[],this.renderLayers()}},{key:"startAnimate",value:function(){this.animateInstanceCount++===0&&(this.clock.start(),this.runRender())}},{key:"stopAnimate",value:function(){--this.animateInstanceCount===0&&(this.stopRender(),this.clock.stop())}},{key:"getOESTextureFloat",value:function(){return this.renderService.extensionObject.OES_texture_float}},{key:"enableShaderPick",value:function(){this.shaderPicking=!0}},{key:"disableShaderPick",value:function(){this.shaderPicking=!1}},{key:"getShaderPickStat",value:function(){return this.shaderPicking}},{key:"clear",value:function(){var n=Ko(this.mapService.bgColor);this.renderService.clear({color:n,depth:1,stencil:0,framebuffer:null})}},{key:"runRender",value:function(){this.renderLayers(),this.layerRenderID=Hn.requestAnimationFrame(this.runRender.bind(this))}},{key:"stopRender",value:function(){Hn.cancelAnimationFrame(this.layerRenderID)}}]),e}(),PT=Jt(Ld.prototype,"renderService",[AT],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),IT=Jt(Ld.prototype,"mapService",[OT],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),LT=Jt(Ld.prototype,"configService",[MT],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ld))||RT);function Bie(e,t){if(e==null)return{};var n={},r=Object.keys(e),a,i;for(i=0;i<r.length;i++)a=r[i],!(t.indexOf(a)>=0)&&(n[a]=e[a]);return n}function On(e,t){if(e==null)return{};var n=Bie(e,t),r,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],!(t.indexOf(r)>=0)&&(!Object.prototype.propertyIsEnumerable.call(e,r)||(n[r]=e[r]))}return n}function zie(e){return e==null}var ks=zie,Uie=function(){function e(t){var n=this;Ae(this,e),m(this,"name",void 0),m(this,"type",void 0),m(this,"scale",void 0),m(this,"descriptor",void 0),m(this,"featureBufferLayout",[]),m(this,"needRescale",!1),m(this,"needRemapping",!1),m(this,"needRegenerateVertices",!1),m(this,"featureRange",{startIndex:0,endIndex:1/0}),m(this,"vertexAttribute",void 0),m(this,"defaultCallback",function(r){if(r.length===0){var a;return((a=n.scale)===null||a===void 0?void 0:a.defaultValues)||[]}return r.map(function(i,o){var s,l=(s=n.scale)===null||s===void 0?void 0:s.scalers[o].func,u=l(i);return u})}),this.setProps(t)}return Oe(e,[{key:"setProps",value:function(n){Object.assign(this,n)}},{key:"mapping",value:function(n){var r;if((r=this.scale)!==null&&r!==void 0&&r.callback){var a,i=(a=this.scale)===null||a===void 0?void 0:a.callback.apply(a,Ue(n));if(!ks(i))return[i]}return this.defaultCallback(n)}},{key:"resetDescriptor",value:function(){this.descriptor&&(this.descriptor.buffer.data=[])}}]),e}(),$ie=["buffer","update","name"],Vie=["buffer","update","name"],Nd,FT,DT,BT,nx,zT;function UT(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function jm(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?UT(Object(n),!0).forEach(function(r){m(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):UT(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var jie=(Nd={},m(Nd,V.FLOAT,4),m(Nd,V.UNSIGNED_BYTE,1),m(Nd,V.UNSIGNED_SHORT,2),Nd),Gie=(FT=nn(),DT=ln(ye.IRendererService),FT(BT=(nx=function(){function e(){Ae(this,e),m(this,"attributesAndIndices",void 0),en(this,"rendererService",zT,this),m(this,"attributes",[]),m(this,"triangulation",void 0),m(this,"featureLayout",{sizePerElement:0,elements:[]})}return Oe(e,[{key:"registerStyleAttribute",value:function(n){var r=this.getLayerStyleAttribute(n.name||"");return r?r.setProps(n):(r=new Uie(n),this.attributes.push(r)),r}},{key:"updateStyleAttribute",value:function(n,r,a){var i=this.getLayerStyleAttribute(n);i||(i=this.registerStyleAttribute(jm(jm({},r),{},{name:n})));var o=r.scale;o&&i&&(i.scale=o,i.needRescale=!0,i.needRemapping=!0,i.needRegenerateVertices=!0,a&&a.featureRange&&(i.featureRange=a.featureRange))}},{key:"getLayerStyleAttributes",value:function(){return this.attributes}},{key:"getLayerStyleAttribute",value:function(n){return this.attributes.find(function(r){return r.name===n})}},{key:"getLayerAttributeScale",value:function(n){var r,a=this.getLayerStyleAttribute(n),i=a==null||(r=a.scale)===null||r===void 0?void 0:r.scalers;return i&&i[0]?i[0].func:null}},{key:"updateAttributeByFeatureRange",value:function(n,r){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3?arguments[3]:void 0,o=this.attributes.find(function(E){return E.name===n});if(o&&o.descriptor){var s=o.descriptor,l=s.update,u=s.buffer,c=s.size,f=c===void 0?0:c,d=jie[u.type||V.FLOAT];if(l){var p=this.featureLayout,h=p.elements,g=p.sizePerElement,v=h.slice(a,i);if(!v.length)return;var b=v[0].offset,y=b*f*d,x=v.map(function(E,T){for(var C=E.featureIdx,I=E.vertices,P=E.normals,j=I.length/g,A=[],S=0;S<j;S++){var M=P?P.slice(S*3,S*3+3):[];A.push.apply(A,Ue(l(r[C],C,I.slice(S*g,S*g+g),T,M)))}return A}).reduce(function(E,T){return E.push.apply(E,Ue(T)),E},[]);o.vertexAttribute.updateBuffer({data:x,offset:y})}}}},{key:"createAttributesAndIndices",value:function(n,r,a){var i=this;this.featureLayout={sizePerElement:0,elements:[]},r&&(this.triangulation=r);var o=this.attributes.map(function(v){return v.resetDescriptor(),v.descriptor}),s=0,l=[],u=3;n.forEach(function(v,b){var y=i.triangulation(v,a),x=y.indices,E=y.vertices,T=y.normals,C=y.size,I=y.indexes;x.forEach(function(S){l.push(S+s)}),u=C;var P=E.length/C;i.featureLayout.sizePerElement=u,i.featureLayout.elements.push({featureIdx:b,vertices:E,normals:T,offset:s}),s+=P;for(var j=function(M){var O=(T==null?void 0:T.slice(M*3,M*3+3))||[],R=E.slice(M*C,M*C+C),H=0;I&&I[M]!==void 0&&(H=I[M]),o.forEach(function(ee,re){if(ee&&ee.update){var Y;(Y=ee.buffer.data).push.apply(Y,Ue(ee.update(v,b,R,M,O,H)))}})},A=0;A<P;A++)j(A)});var c=this.rendererService,f=c.createAttribute,d=c.createBuffer,p=c.createElements,h={};o.forEach(function(v,b){if(v){var y=v.buffer;v.update,v.name;var x=On(v,$ie),E=f(jm({buffer:d(y)},x));h[v.name||""]=E,i.attributes[b].vertexAttribute=E}});var g=p({data:l,type:V.UNSIGNED_INT,count:l.length});return this.attributesAndIndices={attributes:h,elements:g},this.attributesAndIndices}},{key:"createAttributes",value:function(n,r){var a=this;this.featureLayout={sizePerElement:0,elements:[]},r&&(this.triangulation=r);var i=this.attributes.map(function(d){return d.resetDescriptor(),d.descriptor}),o=0,s=3;n.forEach(function(d,p){var h=a.triangulation(d),g=h.indices,v=h.vertices,b=h.normals,y=h.size,x=h.indexes;g.forEach(function(I){}),s=y;var E=v.length/y;a.featureLayout.sizePerElement=s,a.featureLayout.elements.push({featureIdx:p,vertices:v,normals:b,offset:o}),o+=E;for(var T=function(P){var j=(b==null?void 0:b.slice(P*3,P*3+3))||[],A=v.slice(P*y,P*y+y),S=0;x&&x[P]!==void 0&&(S=x[P]),i.forEach(function(M,O){if(M&&M.update){var R;(R=M.buffer.data).push.apply(R,Ue(M.update(d,p,A,P,j,S)))}})},C=0;C<E;C++)T(C)});var l=this.rendererService,u=l.createAttribute,c=l.createBuffer,f={};return i.forEach(function(d,p){if(d){var h=d.buffer;d.update,d.name;var g=On(d,Vie),v=u(jm({buffer:c(h)},g));f[d.name||""]=v,a.attributes[p].vertexAttribute=v}}),{attributes:f}}},{key:"clearAllAttributes",value:function(){var n;this.attributes.forEach(function(r){r.vertexAttribute&&r.vertexAttribute.destroy()}),(n=this.attributesAndIndices)===null||n===void 0||n.elements.destroy(),this.attributes=[]}}]),e}(),zT=Jt(nx.prototype,"rendererService",[DT],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),nx))||BT),V2={exports:{}};function kg(e){var t=e.target||e.srcElement;t.__resizeRAF__&&cancelAnimationFrame(t.__resizeRAF__),t.__resizeRAF__=requestAnimationFrame(function(){var n=t.__resizeTrigger__,r=n&&n.__resizeListeners__;r&&r.forEach(function(a){a.call(n,e)})})}var $T=function(t,n){var r=this,a=r.document,i,o=a.attachEvent;typeof navigator!="undefined"&&(i=navigator.userAgent.match(/Trident/)||navigator.userAgent.match(/Edge/));function s(){this.contentDocument.defaultView.__resizeTrigger__=this.__resizeElement__,this.contentDocument.defaultView.addEventListener("resize",kg)}if(!t.__resizeListeners__)if(t.__resizeListeners__=[],o)t.__resizeTrigger__=t,t.attachEvent("onresize",kg);else{getComputedStyle(t).position==="static"&&(t.style.position="relative");var l=t.__resizeTrigger__=a.createElement("object");l.setAttribute("style","position: absolute; top: 0; left: 0; height: 100%; width: 100%; pointer-events: none; z-index: -1; opacity: 0;"),l.setAttribute("class","resize-sensor"),l.setAttribute("tabindex","-1"),l.setAttribute("title",""),l.__resizeElement__=t,l.onload=s,l.type="text/html",i&&t.appendChild(l),l.data="about:blank",i||t.appendChild(l)}t.__resizeListeners__.push(n)};V2.exports=typeof window=="undefined"?$T:$T.bind(window);var Hie=V2.exports.unbind=function(e,t){var n=document.attachEvent,r=e.__resizeListeners__||[];if(t){var a=r.indexOf(t);a!==-1&&r.splice(a,1)}else r=e.__resizeListeners__=[];if(!r.length){if(n)e.detachEvent("onresize",kg);else if(e.__resizeTrigger__){var i=e.__resizeTrigger__.contentDocument,o=i&&i.defaultView;o&&(o.removeEventListener("resize",kg),delete o.__resizeTrigger__),e.__resizeTrigger__=!e.removeChild(e.__resizeTrigger__)}delete e.__resizeListeners__}},Wie=V2.exports,VT,jT,GT,HT,WT,XT,YT,ZT,qT,KT,QT,JT,eA,tA,nA,rA,aA,ma,iA,oA,sA,lA,uA,cA,fA,dA,pA,hA,mA,gA,vA,bA,yA;function Xie(e){var t=Yie();return function(){var r=Ee(e),a;if(t){var i=Ee(this).constructor;a=Reflect.construct(r,arguments,i)}else a=r.apply(this,arguments);return Mt(this,a)}}function Yie(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var Zie=(VT=nn(),jT=ln(ye.SceneID),GT=ln(ye.IIconService),HT=ln(ye.IFontService),WT=ln(ye.IControlService),XT=ln(ye.IGlobalConfigService),YT=ln(ye.IMapService),ZT=ln(ye.ICoordinateSystemService),qT=ln(ye.IRendererService),KT=ln(ye.ILayerService),QT=ln(ye.ICameraService),JT=ln(ye.IInteractionService),eA=ln(ye.IPickingService),tA=ln(ye.IShaderModuleService),nA=ln(ye.IMarkerService),rA=ln(ye.IPopupService),VT(aA=(ma=function(e){Ct(n,e);var t=Xie(n);function n(){var r;return Ae(this,n),r=t.call(this),m(D(r),"destroyed",!1),m(D(r),"loaded",!1),m(D(r),"loadFont",!1),m(D(r),"fontFamily",""),en(D(r),"id",iA,D(r)),en(D(r),"iconService",oA,D(r)),en(D(r),"fontService",sA,D(r)),en(D(r),"controlService",lA,D(r)),en(D(r),"configService",uA,D(r)),en(D(r),"map",cA,D(r)),en(D(r),"coordinateSystemService",fA,D(r)),en(D(r),"rendererService",dA,D(r)),en(D(r),"layerService",pA,D(r)),en(D(r),"cameraService",hA,D(r)),en(D(r),"interactionService",mA,D(r)),en(D(r),"pickingService",gA,D(r)),en(D(r),"shaderModuleService",vA,D(r)),en(D(r),"markerService",bA,D(r)),en(D(r),"popupService",yA,D(r)),m(D(r),"inited",!1),m(D(r),"initPromise",void 0),m(D(r),"rendering",!1),m(D(r),"$container",void 0),m(D(r),"canvas",void 0),m(D(r),"markerContainer",void 0),m(D(r),"hooks",void 0),m(D(r),"handleWindowResized",function(){r.emit("resize"),r.$container&&(r.initContainer(),$j(),r.coordinateSystemService.needRefresh=!0,r.render())}),m(D(r),"handleMapCameraChanged",function(a){r.cameraService.update(a),r.render()}),r.hooks={init:new Vte},r}return Oe(n,[{key:"init",value:function(a){var i=this;this.configService.setSceneConfig(this.id,a),this.shaderModuleService.registerBuiltinModules(),this.iconService.init(),this.iconService.on("imageUpdate",function(){return i.render()}),this.fontService.init(),this.hooks.init.tapPromise("initMap",qn(pn.mark(function o(){return pn.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,new Promise(function(u){i.map.onCameraChanged(function(c){i.cameraService.init(),i.cameraService.update(c),i.map.version!=="GAODE2.x"&&u()}),i.map.version!=="GAODE2.x"?i.map.init():u()});case 2:if(!(i.map.version==="GAODE2.x"&&i.map.initViewPort)){l.next=6;break}return l.next=5,i.map.init();case 5:i.map.initViewPort();case 6:i.map.onCameraChanged(i.handleMapCameraChanged),i.map.addMarkerContainer(),i.markerService.addMarkers(),i.markerService.addMarkerLayers(),i.popupService.initPopup(),i.interactionService.init(),i.interactionService.on(ya.Drag,i.addSceneEvent.bind(i));case 13:case"end":return l.stop()}},o)}))),this.hooks.init.tapPromise("initRenderer",qn(pn.mark(function o(){var s,l;return pn.wrap(function(c){for(;;)switch(c.prev=c.next){case 0:if(s=Rie(i.configService.getSceneConfig(i.id).id||""),i.$container=s,!s){c.next=11;break}return i.canvas=fr("canvas","",s),i.setCanvas(),c.next=7,i.rendererService.init(i.canvas,i.configService.getSceneConfig(i.id));case 7:Wie(i.$container,i.handleWindowResized),Hn.matchMedia&&((l=Hn.matchMedia("screen and (-webkit-min-device-pixel-ratio: 1.5)"))===null||l===void 0||l.addListener(i.handleWindowResized)),c.next=12;break;case 11:console.error("\u5BB9\u5668 id \u4E0D\u5B58\u5728");case 12:i.pickingService.init(i.id);case 13:case"end":return c.stop()}},o)}))),this.initPromise=this.hooks.init.promise(),this.render()}},{key:"initMiniScene",value:function(a){var i=this;this.configService.setSceneConfig(this.id,a),this.shaderModuleService.registerBuiltinModules(),this.iconService.init(),this.iconService.on("imageUpdate",function(){return i.render()}),this.fontService.init(),this.hooks.init.tapPromise("initMap",qn(pn.mark(function o(){return pn.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,new Promise(function(u){i.map.onCameraChanged(function(c){i.cameraService.init(),i.cameraService.update(c),i.map.version!=="GAODE2.x"&&u()}),i.map.initMiniMap()});case 2:i.map.onCameraChanged(i.handleMapCameraChanged),i.interactionService.init(),i.interactionService.on(ya.Drag,i.addSceneEvent.bind(i));case 5:case"end":return l.stop()}},o)}))),this.hooks.init.tapPromise("initRenderer",qn(pn.mark(function o(){var s;return pn.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(s=a.canvas,i.$container=s||null,!i.$container){u.next=7;break}return u.next=5,i.rendererService.init(a.canvas,i.configService.getSceneConfig(i.id));case 5:u.next=8;break;case 7:console.error("\u5BB9\u5668 id \u4E0D\u5B58\u5728");case 8:i.pickingService.init(i.id);case 9:case"end":return u.stop()}},o)}))),this.initPromise=this.hooks.init.promise(),this.render()}},{key:"addLayer",value:function(a){this.layerService.sceneService=this,this.layerService.add(a),this.render()}},{key:"addMask",value:function(a){this.layerService.sceneService=this,this.layerService.addMask(a),this.render()}},{key:"render",value:function(){var r=qn(pn.mark(function i(){return pn.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(!(this.rendering||this.destroyed)){s.next=2;break}return s.abrupt("return");case 2:if(this.rendering=!0,this.inited){s.next=23;break}return s.next=6,this.initPromise;case 6:if(this.destroyed&&this.destroy(),!(this.loadFont&&document.fonts)){s.next=18;break}return s.prev=8,s.next=11,document.fonts.load("24px ".concat(this.fontFamily),"L7text");case 11:s.next=18;break;case 13:s.prev=13,s.t0=s.catch(8),console.warn("\u5F53\u524D\u73AF\u5883\u4E0D\u652F\u6301 document.fonts !"),console.warn("\u5F53\u524D\u73AF\u5883\u4E0D\u652F\u6301 iconfont !"),console.warn(s.t0);case 18:this.layerService.initLayers(),this.controlService.addControls(),this.loaded=!0,this.emit("loaded"),this.inited=!0;case 23:this.layerService.updateLayerRenderList(),this.layerService.renderLayers(),this.rendering=!1;case 26:case"end":return s.stop()}},i,this,[[8,13]])}));function a(){return r.apply(this,arguments)}return a}()},{key:"addFontFace",value:function(a,i){this.fontFamily=a;var o=document.createElement("style");o.type="text/css",o.innerText=`
        @font-face{
            font-family: '`.concat(a,`';
            src: url('`).concat(i,`') format('woff2'),
            url('`).concat(i,`') format('woff'),
            url('`).concat(i,`') format('truetype');
        }`),document.getElementsByTagName("head")[0].appendChild(o),this.loadFont=!0}},{key:"getSceneContainer",value:function(){return this.$container}},{key:"exportPng",value:function(a){var i,o=(i=this.$container)===null||i===void 0?void 0:i.getElementsByTagName("canvas")[0];this.render();var s=a==="jpg"?o==null?void 0:o.toDataURL("image/jpeg"):o==null?void 0:o.toDataURL("image/png");return s}},{key:"getSceneConfig",value:function(){return this.configService.getSceneConfig(this.id)}},{key:"getPointSizeRange",value:function(){return this.rendererService.getPointSizeRange()}},{key:"addMarkerContainer",value:function(){var a=this.$container.parentElement;a!==null&&(this.markerContainer=fr("div","l7-marker-container",a))}},{key:"getMarkerContainer",value:function(){return this.markerContainer}},{key:"destroy",value:function(){var a=this,i,o;if(!this.inited){this.destroyed=!0;return}if(this.emit("destroy"),this.pickingService.destroy(),this.layerService.destroy(),setTimeout(function(){var l;(l=a.$container)===null||l===void 0||l.removeChild(a.canvas),a.canvas=null,a.rendererService.destroy()}),this.map.destroy(),this.interactionService.destroy(),this.controlService.destroy(),this.markerService.destroy(),this.fontService.destroy(),this.iconService.destroy(),(i=this.$container)===null||i===void 0||(o=i.parentNode)===null||o===void 0||o.removeChild(this.$container),this.removeAllListeners(),this.inited=!1,Hie(this.$container,this.handleWindowResized),Hn.matchMedia){var s;(s=Hn.matchMedia("screen and (min-resolution: 2dppx)"))===null||s===void 0||s.removeListener(this.handleWindowResized)}}},{key:"initContainer",value:function(){var a,i,o=vr,s=((a=this.$container)===null||a===void 0?void 0:a.clientWidth)||400,l=((i=this.$container)===null||i===void 0?void 0:i.clientHeight)||300,u=this.canvas;u&&(u.width=s*o,u.height=l*o),this.rendererService.viewport({x:0,y:0,width:o*s,height:o*l})}},{key:"setCanvas",value:function(){var a,i,o=vr,s=((a=this.$container)===null||a===void 0?void 0:a.clientWidth)||400,l=((i=this.$container)===null||i===void 0?void 0:i.clientHeight)||300,u=this.canvas;u.width=s*o,u.height=l*o,u.style.width="100%",u.style.height="100%"}},{key:"addSceneEvent",value:function(a){this.emit(a.type,a)}}]),n}(Si.exports.EventEmitter),iA=Jt(ma.prototype,"id",[jT],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),oA=Jt(ma.prototype,"iconService",[GT],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),sA=Jt(ma.prototype,"fontService",[HT],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),lA=Jt(ma.prototype,"controlService",[WT],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),uA=Jt(ma.prototype,"configService",[XT],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),cA=Jt(ma.prototype,"map",[YT],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),fA=Jt(ma.prototype,"coordinateSystemService",[ZT],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),dA=Jt(ma.prototype,"rendererService",[qT],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),pA=Jt(ma.prototype,"layerService",[KT],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),hA=Jt(ma.prototype,"cameraService",[QT],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),mA=Jt(ma.prototype,"interactionService",[JT],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),gA=Jt(ma.prototype,"pickingService",[eA],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),vA=Jt(ma.prototype,"shaderModuleService",[tA],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),bA=Jt(ma.prototype,"markerService",[nA],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),yA=Jt(ma.prototype,"popupService",[rA],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ma))||aA),qie="__lodash_hash_undefined__";function Kie(e){return this.__data__.set(e,qie),this}var Qie=Kie;function Jie(e){return this.__data__.has(e)}var eoe=Jie,toe=v7,noe=Qie,roe=eoe;function Sg(e){var t=-1,n=e==null?0:e.length;for(this.__data__=new toe;++t<n;)this.add(e[t])}Sg.prototype.add=Sg.prototype.push=noe;Sg.prototype.has=roe;var KL=Sg;function aoe(e,t,n,r){for(var a=e.length,i=n+(r?1:-1);r?i--:++i<a;)if(t(e[i],i,e))return i;return-1}var ioe=aoe;function ooe(e){return e!==e}var soe=ooe;function loe(e,t,n){for(var r=n-1,a=e.length;++r<a;)if(e[r]===t)return r;return-1}var uoe=loe,coe=ioe,foe=soe,doe=uoe;function poe(e,t,n){return t===t?doe(e,t,n):coe(e,foe,n)}var hoe=poe,moe=hoe;function goe(e,t){var n=e==null?0:e.length;return!!n&&moe(e,t,0)>-1}var voe=goe;function boe(e,t,n){for(var r=-1,a=e==null?0:e.length;++r<a;)if(n(t,e[r]))return!0;return!1}var yoe=boe;function xoe(e,t){return e.has(t)}var QL=xoe;function woe(){}var _oe=woe;function Eoe(e){var t=-1,n=Array(e.size);return e.forEach(function(r){n[++t]=r}),n}var j2=Eoe,rx=j7,koe=_oe,Soe=j2,Coe=1/0,Toe=rx&&1/Soe(new rx([,-0]))[1]==Coe?function(e){return new rx(e)}:koe,Aoe=Toe,Ooe=KL,Moe=voe,Roe=yoe,Poe=QL,Ioe=Aoe,Loe=j2,Noe=200;function Foe(e,t,n){var r=-1,a=Moe,i=e.length,o=!0,s=[],l=s;if(n)o=!1,a=Roe;else if(i>=Noe){var u=t?null:Ioe(e);if(u)return Loe(u);o=!1,a=Poe,l=new Ooe}else l=t?[]:s;e:for(;++r<i;){var c=e[r],f=t?t(c):c;if(c=n||c!==0?c:0,o&&f===f){for(var d=l.length;d--;)if(l[d]===f)continue e;t&&l.push(f),s.push(c)}else a(l,f,n)||(l!==s&&l.push(f),s.push(c))}return s}var Doe=Foe,Boe=Doe;function zoe(e){return e&&e.length?Boe(e):[]}var JL=zoe;function Uoe(e){var t=0;switch(e){case"vec2":case"ivec2":t=2;break;case"vec3":case"ivec3":t=3;break;case"vec4":case"ivec4":case"mat2":t=4;break;case"mat3":t=9;break;case"mat4":t=16;break}return t}var $oe=/uniform\s+(bool|float|int|vec2|vec3|vec4|ivec2|ivec3|ivec4|mat2|mat3|mat4|sampler2D|samplerCube)\s+([\s\S]*?);/g;function xA(e){var t={};return e=e.replace($oe,function(n,r,a){var i=a.split(":"),o=i[0].trim(),s="";switch(i.length>1&&(s=i[1].trim()),r){case"bool":s=s==="true";break;case"float":case"int":s=Number(s);break;case"vec2":case"vec3":case"vec4":case"ivec2":case"ivec3":case"ivec4":case"mat2":case"mat3":case"mat4":s?s=s.replace("[","").replace("]","").split(",").reduce(function(l,u){return l.push(Number(u.trim())),l},[]):s=new Array(Uoe(r)).fill(0);break}return t[o]=s,"uniform ".concat(r," ").concat(o,`;
`)}),{content:e,uniforms:t}}var wA,_A;function EA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Fd(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?EA(Object(n),!0).forEach(function(r){m(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):EA(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var kA="#define PI 3.14159265359",Voe=`#define SHIFT_RIGHT17 1.0 / 131072.0
#define SHIFT_RIGHT18 1.0 / 262144.0
#define SHIFT_RIGHT19 1.0 / 524288.0
#define SHIFT_RIGHT20 1.0 / 1048576.0
#define SHIFT_RIGHT21 1.0 / 2097152.0
#define SHIFT_RIGHT22 1.0 / 4194304.0
#define SHIFT_RIGHT23 1.0 / 8388608.0
#define SHIFT_RIGHT24 1.0 / 16777216.0

#define SHIFT_LEFT17 131072.0
#define SHIFT_LEFT18 262144.0
#define SHIFT_LEFT19 524288.0
#define SHIFT_LEFT20 1048576.0
#define SHIFT_LEFT21 2097152.0
#define SHIFT_LEFT22 4194304.0
#define SHIFT_LEFT23 8388608.0
#define SHIFT_LEFT24 16777216.0

vec2 unpack_float(float packedValue) {
  int packedIntValue = int(packedValue);
  int v0 = packedIntValue / 256;
  return vec2(v0, packedIntValue - v0 * 256);
}

vec4 decode_color(vec2 encodedColor) {
  return vec4(
    unpack_float(encodedColor[0]) / 255.0,
    unpack_float(encodedColor[1]) / 255.0
  );
}
`,joe=`#define ambientRatio 0.5
#define diffuseRatio 0.3
#define specularRatio 0.2


float calc_lighting(vec4 pos) {

    vec3 worldPos = vec3(pos * u_ModelMatrix);

    vec3 worldNormal = a_Normal;
      // //cal light weight
    vec3 viewDir = normalize(u_CameraPosition - worldPos);

    vec3 lightDir = normalize(vec3(1, -10.5, 12));

    vec3 halfDir = normalize(viewDir+lightDir);
      // //lambert
    float lambert = dot(worldNormal, lightDir);
        //specular
    float specular = pow(max(0.0, dot(worldNormal, halfDir)), 32.0);
        //sum to light weight
    float lightWeight = ambientRatio + diffuseRatio * lambert + specularRatio * specular;

    return lightWeight;
}
`,Goe=`// Blinn-Phong model
// apply lighting in vertex shader instead of fragment shader
// @see https://learnopengl.com/Advanced-Lighting/Advanced-Lighting
uniform float u_Ambient : 1.0;
uniform float u_Diffuse : 1.0;
uniform float u_Specular : 1.0;
uniform int u_NumOfDirectionalLights : 1;
uniform int u_NumOfSpotLights : 0;

#define SHININESS 32.0
#define MAX_NUM_OF_DIRECTIONAL_LIGHTS 3
#define MAX_NUM_OF_SPOT_LIGHTS 3

struct DirectionalLight {
  vec3 direction;
  vec3 ambient;
  vec3 diffuse;
  vec3 specular;
};

struct SpotLight {
  vec3 position;
  vec3 direction;
  vec3 ambient;
  vec3 diffuse;
  vec3 specular;
  float constant;
  float linear;
  float quadratic;
  float angle;
  float blur;
  float exponent;
};

uniform DirectionalLight u_DirectionalLights[MAX_NUM_OF_DIRECTIONAL_LIGHTS];
uniform SpotLight u_SpotLights[MAX_NUM_OF_SPOT_LIGHTS];

vec3 calc_directional_light(DirectionalLight light, vec3 normal, vec3 viewDir) {
  vec3 lightDir = normalize(light.direction);
  // diffuse shading
  float diff = max(dot(normal, lightDir), 0.0);
  // Blinn-Phong specular shading
  vec3 halfwayDir = normalize(lightDir + viewDir);
  float spec = pow(max(dot(normal, halfwayDir), 0.0), SHININESS);

  vec3 ambient = light.ambient * u_Ambient;
  vec3 diffuse = light.diffuse * diff * u_Diffuse;
  vec3 specular = light.specular * spec * u_Specular;

  return ambient + diffuse + specular;
}

// vec3 calc_spot_light(SpotLight light, vec3 normal, vec3 fragPos, vec3 viewDir) {
//   vec3 lightDir = normalize(light.position - fragPos);
//   // diffuse shading
//   float diff = max(dot(normal, lightDir), 0.0);
//   // specular shading
//   vec3 reflectDir = reflect(-lightDir, normal);
//   float spec = pow(max(dot(viewDir, reflectDir), 0.0), SHININESS);
//   // attenuation
//   float distance = length(light.position - fragPos);
//   float attenuation = 1.0 / (light.constant + light.linear * distance +
//           light.quadratic * (distance * distance));

//   vec3 ambient = light.ambient * u_Ambient;
//   vec3 diffuse = light.diffuse * diff * u_Diffuse;
//   vec3 specular = light.specular * spec * u_Specular;

//   float spotEffect = dot(normalize(light.direction), -lightDir);
//   float spotCosCutoff = cos(light.angle / 180.0 * PI);
//   float spotCosOuterCutoff = cos((light.angle + light.blur) / 180.0 * PI);
//   float spotCosInnerCutoff = cos((light.angle - light.blur) / 180.0 * PI);
//   if (spotEffect > spotCosCutoff) {
//     spotEffect = pow(smoothstep(spotCosOuterCutoff, spotCosInnerCutoff, spotEffect), light.exponent);
//   } else {
//     spotEffect = 0.0;
//   }

//   return ambient + attenuation * (spotEffect * diffuse + specular);
// }

vec3 calc_lighting(vec3 position, vec3 normal, vec3 viewDir) {
  vec3 weight = vec3(0.0);
  for (int i = 0; i < MAX_NUM_OF_DIRECTIONAL_LIGHTS; i++) {
    if (i >= u_NumOfDirectionalLights) {
      break;
    }
    weight += calc_directional_light(u_DirectionalLights[i], normal, viewDir);
  }
  // for (int i = 0; i < MAX_NUM_OF_SPOT_LIGHTS; i++) {
  //   if (i >= u_NumOfSpotLights) {
  //     break;
  //   }
  //   weight += calc_spot_light(u_SpotLights[i], normal, position, viewDir);
  // }
  return weight;
}
`,Hoe=`varying vec4 v_PickingResult;
uniform vec4 u_HighlightColor : [0, 0, 0, 0];
uniform vec4 u_SelectColor : [0, 0, 0, 0];
uniform float u_PickingStage : 0.0;
uniform float u_shaderPick;

uniform float u_activeMix: 0;

#define PICKING_NONE 0.0
#define PICKING_ENCODE 1.0
#define PICKING_HIGHLIGHT 2.0
#define COLOR_SCALE 1. / 255.

#define HIGHLIGHT 1.0
#define SELECT 2.0

/*
 * Returns highlight color if this item is selected.
 */
vec4 filterHighlightColor(vec4 color, float weight) {
  // float selected = v_PickingResult.a;
  bool selected = bool(v_PickingResult.a);

  // if (selected == SELECT) {
  if (selected) {
  //   // \u70B9\u51FB\u9009\u4E2D\u72B6\u6001
  //   vec4 selectColor = u_SelectColor * COLOR_SCALE;
  //   return selectColor;
  // } else if (selected == HIGHLIGHT) {
  //   // hover \u9AD8\u4EAE\u72B6\u6001
    vec4 highLightColor = u_HighlightColor * COLOR_SCALE;

    float highLightAlpha = highLightColor.a;
    float highLightRatio = highLightAlpha / (highLightAlpha + color.a * (1.0 - highLightAlpha));

    vec3 resultRGB = mix(color.rgb, highLightColor.rgb, highLightRatio);
    return vec4(mix(resultRGB * weight, color.rgb, u_activeMix), color.a);
  } else {
    return color;
  }
}

/*
 * Returns picking color if picking enabled else unmodified argument.
 */
vec4 filterPickingColor(vec4 color) {
  vec3 pickingColor = v_PickingResult.rgb;
  if (u_PickingStage == PICKING_ENCODE && length(pickingColor) < 0.001) {
    discard;
  }
  return u_PickingStage == PICKING_ENCODE ? vec4(pickingColor, step(0.001,color.a)): color;
}

/*
 * Returns picking color if picking is enabled if not
 * highlight color if this item is selected, otherwise unmodified argument.
 */
vec4 filterColor(vec4 color) {
  // TODO: \u8FC7\u6EE4\u591A\u4F59\u7684 shader \u8BA1\u7B97
  // return color;
  if(u_shaderPick < 0.5) {
    return color; // \u6682\u65F6\u53BB\u9664 \u76F4\u63A5\u53D6\u6D88\u8BA1\u7B97\u5728\u9009\u4E2D\u65F6\u62D6\u62FD\u5730\u56FE\u4F1A\u6709\u95EE\u9898
  } else {
    return filterPickingColor(filterHighlightColor(color, 1.0));
  }
  
}

vec4 filterColorAlpha(vec4 color, float alpha) {
  // TODO: \u8FC7\u6EE4\u591A\u4F59\u7684 shader \u8BA1\u7B97
  // return color;
  if(u_shaderPick < 0.5) {
    return color; // \u6682\u65F6\u53BB\u9664 \u76F4\u63A5\u53D6\u6D88\u8BA1\u7B97\u5728\u9009\u4E2D\u65F6\u62D6\u62FD\u5730\u56FE\u4F1A\u6709\u95EE\u9898
  } else {
    return filterPickingColor(filterHighlightColor(color, alpha));
  }
}

`,Woe=`attribute vec3 a_PickingColor;
varying vec4 v_PickingResult;

uniform vec3 u_PickingColor : [0, 0, 0];
uniform vec3 u_CurrentSelectedId : [0, 0, 0];
uniform vec4 u_HighlightColor : [0, 0, 0, 0];
uniform vec4 u_SelectColor : [0, 0, 0, 0];
uniform float u_PickingStage : 0.0;
uniform float u_PickingThreshold : 1.0;
uniform float u_PickingBuffer: 0.0;
uniform float u_shaderPick;
uniform float u_EnableSelect: 0.0;

#define PICKING_NONE 0.0
#define PICKING_ENCODE 1.0
#define PICKING_HIGHLIGHT 2.0
#define COLOR_SCALE 1. / 255.

#define NORMAL 0.0
#define HIGHLIGHT 1.0
#define SELECT 2.0

bool isVertexPicked(vec3 vertexColor) {
  return
    abs(vertexColor.r - u_PickingColor.r) < u_PickingThreshold &&
    abs(vertexColor.g - u_PickingColor.g) < u_PickingThreshold &&
    abs(vertexColor.b - u_PickingColor.b) < u_PickingThreshold;
}

// \u5224\u65AD\u5F53\u524D\u70B9\u662F\u5426\u5DF2\u7ECF\u88AB select \u9009\u4E2D
bool isVertexSelected(vec3 vertexColor) {
  return
    abs(vertexColor.r - u_CurrentSelectedId.r) < u_PickingThreshold &&
    abs(vertexColor.g - u_CurrentSelectedId.g) < u_PickingThreshold &&
    abs(vertexColor.b - u_CurrentSelectedId.b) < u_PickingThreshold;
}

void setPickingColor(vec3 pickingColor) {
  if(u_shaderPick < 0.5) {
    return;
  }
  // compares only in highlight stage

  v_PickingResult.a = float((u_PickingStage == PICKING_HIGHLIGHT) && isVertexPicked(pickingColor));

  // if (u_EnableSelect == 1.0 && u_PickingStage == PICKING_HIGHLIGHT && isVertexSelected(pickingColor)) {
  //   // \u9009\u4E2D\u6001
  //   v_PickingResult.a = SELECT;
  // } else if (u_PickingStage == PICKING_HIGHLIGHT && isVertexPicked(pickingColor)) {
  //   // \u9AD8\u4EAE\u6001
  //   v_PickingResult.a = HIGHLIGHT;
  // } else {
  //   v_PickingResult.a = NORMAL;
  // }

  // Stores the picking color so that the fragment shader can render it during picking
  v_PickingResult.rgb = pickingColor * COLOR_SCALE;
}

float setPickingSize(float x) {
   return u_PickingStage == PICKING_ENCODE ? x + u_PickingBuffer : x;
}

float setPickingOrder(float z) {
   bool selected = bool(v_PickingResult.a);
   return selected ? z + 1. : 0.;
}
`,Xoe=`
#define E 2.718281828459045
vec2 ProjectFlat(vec2 lnglat){
  float maxs=85.0511287798;
  float lat=max(min(maxs,lnglat.y),-maxs);
  float scale= 268435456.;
  float d=PI/180.;
  float x=lnglat.x*d;
  float y=lat*d;
  y=log(tan((PI/4.)+(y/2.)));

  float a=.5/PI,
  b=.5,
  c=-.5/PI;
  d=.5;
  x=scale*(a*x+b);
  y=scale*(c*y+d);
  return vec2(x,y);
}

vec2 unProjectFlat(vec2 px){
  float a=.5/PI;
  float b=.5;
  float c=-.5/PI;
  float d=.5;
  float scale = 268435456.;
  float x=(px.x/scale-b)/a;
  float y=(px.y/scale-d)/c;
  y=(atan(pow(E,y))-(PI/4.))*2.;
  d=PI/180.;
  float lat=y/d;
  float lng=x/d;
  return vec2(lng,lat);
}

float pixelDistance(vec2 from, vec2 to) {
 vec2 a1 = ProjectFlat(from);
 vec2 b1 = ProjectFlat(to);
 return distance(a1, b1);
}

// gaode2.0
vec2 customProject(vec2 lnglat) { // \u7ECF\u7EAC\u5EA6 => \u5E73\u9762\u5750\u6807
  float t = lnglat.x;
  float e = lnglat.y;
  float Sm = 180.0 / PI;
  float Tm = 6378137.0;
  float Rm = PI / 180.0;
  float r = 85.0511287798;
  e = max(min(r, e), -r);
  t *= Rm;
  e *= Rm;
  e = log(tan(PI / 4.0 + e / 2.0));
  return vec2(t * Tm, e * Tm);
}

vec2 unProjCustomCoord(vec2 point) { // \u5E73\u9762\u5750\u6807 => \u7ECF\u7EAC\u5EA6
  float Sm = 57.29577951308232; //180 / Math.PI
  float Tm = 6378137.0;
  float t = point.x;
  float e = point.y;
  return vec2(t / Tm * Sm, (2.0 * atan(exp(e / Tm)) - PI / 2.0) * Sm);
}


float customPixelDistance(vec2 from, vec2 to) {
 vec2 a1 = ProjectFlat(from);
 vec2 b1 = ProjectFlat(to);
 return distance(a1, b1);
}`,Yoe=`#define TILE_SIZE 512.0
#define PI 3.1415926536
#define WORLD_SCALE TILE_SIZE / (PI * 2.0)

#define COORDINATE_SYSTEM_LNGLAT 1.0        // mapbox
#define COORDINATE_SYSTEM_LNGLAT_OFFSET 2.0 // mapbox offset
#define COORDINATE_SYSTEM_VECTOR_TILE 3.0
#define COORDINATE_SYSTEM_IDENTITY 4.0
#define COORDINATE_SYSTEM_P20 5.0           // amap
#define COORDINATE_SYSTEM_P20_OFFSET 6.0    // amap offset
#define COORDINATE_SYSTEM_METER_OFFSET 7.0

#define COORDINATE_SYSTEM_P20_2 8.0         // amap2.0

uniform mat4 u_ViewMatrix;
uniform mat4 u_ProjectionMatrix;
uniform mat4 u_ViewProjectionMatrix;
uniform float u_Zoom : 1;
uniform float u_ZoomScale : 1;

uniform float u_CoordinateSystem;
uniform vec2 u_ViewportCenter;
uniform vec4 u_ViewportCenterProjection;
uniform vec3 u_PixelsPerDegree;
uniform vec3 u_PixelsPerDegree2;
uniform vec3 u_PixelsPerMeter;

uniform vec2 u_ViewportSize;
uniform float u_DevicePixelRatio;
uniform float u_FocalDistance;
uniform vec3 u_CameraPosition;

// uniform mat4 u_Mvp;

// web mercator coords -> world coords
vec2 project_mercator(vec2 lnglat) {
  float x = lnglat.x;
  return vec2(
    radians(x) + PI,
    PI - log(tan(PI * 0.25 + radians(lnglat.y) * 0.5))
  );
}

float project_scale(float meters) {
  return meters * u_PixelsPerMeter.z;
}


// offset coords -> world coords
vec4 project_offset(vec4 offset) {
  float dy = offset.y;
  dy = clamp(dy, -1., 1.);
  vec3 pixels_per_unit = u_PixelsPerDegree + u_PixelsPerDegree2 * dy;
  return vec4(offset.xyz * pixels_per_unit, offset.w);
}

vec3 project_normal(vec3 normal) {
  vec4 normal_modelspace = u_ModelMatrix * vec4(normal, 0.0);
  return normalize(normal_modelspace.xyz * u_PixelsPerMeter);
}

vec3 project_offset_normal(vec3 vector) {
  if (u_CoordinateSystem < COORDINATE_SYSTEM_LNGLAT + 0.01 && u_CoordinateSystem >COORDINATE_SYSTEM_LNGLAT - 0.01
    || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
    // normals generated by the polygon tesselator are in lnglat offsets instead of meters
    return normalize(vector * u_PixelsPerDegree);
  }
  return project_normal(vector);
}
// || u_CoordinateSystem < COORDINATE_SYSTEM_P20_OFFSET + 0.01 && u_CoordinateSystem >COORDINATE_SYSTEM_P20_OFFSET - 0.01
// reverse Y
vec3 reverse_offset_normal(vec3 vector) {
  if (u_CoordinateSystem == COORDINATE_SYSTEM_P20 ||u_CoordinateSystem == COORDINATE_SYSTEM_P20_OFFSET ) {
    return vector * vec3(1.0, -1.0, 1.0);
  }

  if (u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.0
    return vector;
  }
  return vector;
}

vec4 project_mvt_offset_position(vec4 position) {
  float a = COORDINATE_SYSTEM_LNGLAT_OFFSET;
  float b = COORDINATE_SYSTEM_P20_OFFSET;
  float c = COORDINATE_SYSTEM_LNGLAT;
  if (u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET || u_CoordinateSystem == COORDINATE_SYSTEM_P20_OFFSET) {
    return project_offset(vec4(0.0, 0.0, position.z, position.w));
  }
  if (u_CoordinateSystem < COORDINATE_SYSTEM_LNGLAT + 0.01 && u_CoordinateSystem >COORDINATE_SYSTEM_LNGLAT - 0.01) {
    return vec4(
      project_mercator(position.xy) * WORLD_SCALE * u_ZoomScale,
      project_scale(position.z),
      position.w
    );
  }
  return position;
}

vec4 project_position(vec4 position) {
  float a = COORDINATE_SYSTEM_LNGLAT_OFFSET;
  float b = COORDINATE_SYSTEM_P20_OFFSET;
  float c = COORDINATE_SYSTEM_LNGLAT;
  if (u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET
    || u_CoordinateSystem == COORDINATE_SYSTEM_P20_OFFSET) {
    float X = position.x - u_ViewportCenter.x;
    float Y = position.y - u_ViewportCenter.y;
    return project_offset(vec4(X, Y, position.z, position.w));
  }
  if (u_CoordinateSystem < COORDINATE_SYSTEM_LNGLAT + 0.01 && u_CoordinateSystem >COORDINATE_SYSTEM_LNGLAT - 0.01) {
    return vec4(
      project_mercator(position.xy) * WORLD_SCALE * u_ZoomScale,
      project_scale(position.z),
      position.w
    );
  }

  if (u_CoordinateSystem == COORDINATE_SYSTEM_P20) {
    return vec4(
      (project_mercator(position.xy) * WORLD_SCALE * u_ZoomScale - vec2(215440491., 106744817.)) * vec2(1., -1.),
      project_scale(position.z),
      position.w
    );
  }

  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) {
    // return vec4(
    //   (position.xy * WORLD_SCALE * u_ZoomScale) * vec2(1., -1.), 
    //   project_scale(position.z), 
    //   position.w);

     return vec4(
      position.xy, 
      project_scale(position.z), 
      position.w);
  }
  return position;

  // TODO: \u74E6\u7247\u5750\u6807\u7CFB & \u5E38\u89C4\u4E16\u754C\u5750\u6807\u7CFB
}
vec2 project_pixel_size_to_clipspace(vec2 pixels) {
  vec2 offset = pixels / u_ViewportSize * u_DevicePixelRatio * 2.0;
  return offset * u_FocalDistance;
}

float project_pixel_allmap(float pixel) {
  if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {
    return pixel * pow(2.0, u_Zoom);
  }
  return pixel;
}

// \u9002\u914D\u7EB9\u7406\u8D34\u56FE\u7684\u7B49\u50CF\u7D20\u5927\u5C0F
float project_pixel_texture(float pixel) {
  // mapbox zoom > 12
  if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
    return pixel * pow(0.5, u_Zoom);
  }

  // amap2 zoom > 12
  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) {
    return pixel * pow(2.0, (19.0 - 3.0 - u_Zoom));
  }

  // amap zoom > 12
  if (u_CoordinateSystem == COORDINATE_SYSTEM_P20_OFFSET) {
    return pixel * pow(0.5, u_Zoom);
  }
  
  // amap zoom < 12
  if (u_CoordinateSystem == COORDINATE_SYSTEM_P20) {
    return pixel * pow(2.0, (20.0 - u_Zoom));
  }
  return pixel * 2.0;
}

// \u5728\u4E0D\u8BBA\u4EC0\u4E48\u5E95\u56FE\u4E0B\u9700\u8981\u7EDF\u4E00\u5904\u7406\u7684\u65F6\u5019\u4F7F\u7528
float project_float_pixel(float pixel) {
  if (u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
    // mapbox P20 \u5750\u6807\u7CFB\u4E0B\uFF0C\u4E3A\u4E86\u548C Web \u58A8\u5361\u6258\u5750\u6807\u7CFB\u7EDF\u4E00\uFF0Czoom \u9ED8\u8BA4\u51CF1
    return pixel * pow(2.0, (19.0 - u_Zoom));
  }
  if (u_CoordinateSystem == COORDINATE_SYSTEM_P20 || u_CoordinateSystem == COORDINATE_SYSTEM_P20_OFFSET) {
    // amap P20 \u5750\u6807\u7CFB\u4E0B\uFF0C\u4E3A\u4E86\u548C Web \u58A8\u5361\u6258\u5750\u6807\u7CFB\u7EDF\u4E00\uFF0Czoom \u9ED8\u8BA4\u51CF1
    return pixel * pow(2.0, (19.0 - u_Zoom));
  }
  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) {
    // amap2 P20_2 \u5750\u6807\u7CFB\u4E0B\uFF0C\u4E3A\u4E86\u548C Web \u58A8\u5361\u6258\u5750\u6807\u7CFB\u7EDF\u4E00\uFF0Czoom \u9ED8\u8BA4\u51CF3
    return pixel * pow(2.0, (19.0 - 3.0 - u_Zoom));
  }
  return pixel;
}

float project_pixel(float pixel) {
  if (u_CoordinateSystem == COORDINATE_SYSTEM_P20 || u_CoordinateSystem == COORDINATE_SYSTEM_P20_OFFSET) {
    // amap P20 \u5750\u6807\u7CFB\u4E0B\uFF0C\u4E3A\u4E86\u548C Web \u58A8\u5361\u6258\u5750\u6807\u7CFB\u7EDF\u4E00\uFF0Czoom \u9ED8\u8BA4\u51CF1
    return pixel * pow(2.0, (19.0 - u_Zoom));
  }
  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) {
    // amap2 P20_2 \u5750\u6807\u7CFB\u4E0B\uFF0C\u4E3A\u4E86\u548C Web \u58A8\u5361\u6258\u5750\u6807\u7CFB\u7EDF\u4E00\uFF0Czoom \u9ED8\u8BA4\u51CF3
    return pixel * pow(2.0, (19.0 - 3.0 - u_Zoom));
  }
  return pixel;
}
vec2 project_pixel(vec2 pixel) {
  if (u_CoordinateSystem == COORDINATE_SYSTEM_P20 || u_CoordinateSystem == COORDINATE_SYSTEM_P20_OFFSET) {
    // P20 \u5750\u6807\u7CFB\u4E0B\uFF0C\u4E3A\u4E86\u548C Web \u58A8\u5361\u6258\u5750\u6807\u7CFB\u7EDF\u4E00\uFF0Czoom \u9ED8\u8BA4\u51CF1
    return pixel * pow(2.0, (19.0 - u_Zoom));
  }
  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) {
    // P20_2 \u5750\u6807\u7CFB\u4E0B\uFF0C\u4E3A\u4E86\u548C Web \u58A8\u5361\u6258\u5750\u6807\u7CFB\u7EDF\u4E00\uFF0Czoom \u9ED8\u8BA4\u51CF3
    return pixel * pow(2.0, (19.0 - 3.0 - u_Zoom));
  }
  return pixel * -1.;
}
vec3 project_pixel(vec3 pixel) {
  if (u_CoordinateSystem == COORDINATE_SYSTEM_P20 || u_CoordinateSystem == COORDINATE_SYSTEM_P20_OFFSET) {
    // P20 \u5750\u6807\u7CFB\u4E0B\uFF0C\u4E3A\u4E86\u548C Web \u58A8\u5361\u6258\u5750\u6807\u7CFB\u7EDF\u4E00\uFF0Czoom \u9ED8\u8BA4\u51CF1
    return pixel * pow(2.0, (19.0 - u_Zoom));
  }
  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) {
    // P20_2 \u5750\u6807\u7CFB\u4E0B\uFF0C\u4E3A\u4E86\u548C Web \u58A8\u5361\u6258\u5750\u6807\u7CFB\u7EDF\u4E00\uFF0Czoom \u9ED8\u8BA4\u51CF3
    return pixel * pow(2.0, (19.0 - 3.0 - u_Zoom));
  }
  return pixel * -1.;
}

vec4 project_common_position_to_clipspace(vec4 position, mat4 viewProjectionMatrix, vec4 center) {
  if (u_CoordinateSystem == COORDINATE_SYSTEM_METER_OFFSET ||
    u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
    // Needs to be divided with project_uCommonUnitsPerMeter
    position.w *= u_PixelsPerMeter.z;
  }

  return viewProjectionMatrix * position + center;
}

// Projects from common space coordinates to clip space
vec4 project_common_position_to_clipspace(vec4 position) {
  return project_common_position_to_clipspace(
    position,
    u_ViewProjectionMatrix,
    u_ViewportCenterProjection
  );
}

vec4 unproject_clipspace_to_position(vec4 clipspacePos, mat4 u_InverseViewProjectionMatrix) {
  vec4 pos = u_InverseViewProjectionMatrix * (clipspacePos - u_ViewportCenterProjection);

  if (u_CoordinateSystem == COORDINATE_SYSTEM_METER_OFFSET ||
    u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
    // Needs to be divided with project_uCommonUnitsPerMeter
     pos.w = pos.w / u_PixelsPerMeter.z;
  }
  return pos;
}


bool isEqual( float a,  float b) {
    return  a< b + 0.001 && a > b - 0.001;
}`,Zoe=`/**
 * 2D signed distance field functions
 * @see http://www.iquilezles.org/www/articles/distfunctions2d/distfunctions2d.htm
 */

float ndot(vec2 a, vec2 b ) { return a.x*b.x - a.y*b.y; }

float sdCircle(vec2 p, float r) {
  return length(p) - r;
}

float sdEquilateralTriangle(vec2 p) {
  float k = sqrt(3.0);
  p.x = abs(p.x) - 1.0;
  p.y = p.y + 1.0/k;
  if( p.x + k*p.y > 0.0 ) p = vec2(p.x-k*p.y,-k*p.x-p.y)/2.0;
  p.x -= clamp( p.x, -2.0, 0.0 );
  return -length(p)*sign(p.y);
}

float sdBox(vec2 p, vec2 b) {
  vec2 d = abs(p)-b;
  return length(max(d,vec2(0))) + min(max(d.x,d.y),0.0);
}

float sdPentagon(vec2 p, float r) {
  vec3 k = vec3(0.809016994,0.587785252,0.726542528);
  p.x = abs(p.x);
  p -= 2.0*min(dot(vec2(-k.x,k.y),p),0.0)*vec2(-k.x,k.y);
  p -= 2.0*min(dot(vec2( k.x,k.y),p),0.0)*vec2( k.x,k.y);
  p -= vec2(clamp(p.x,-r*k.z,r*k.z),r);
  return length(p)*sign(p.y);
}

float sdHexagon(vec2 p, float r) {
  vec3 k = vec3(-0.866025404,0.5,0.577350269);
  p = abs(p);
  p -= 2.0*min(dot(k.xy,p),0.0)*k.xy;
  p -= vec2(clamp(p.x, -k.z*r, k.z*r), r);
  return length(p)*sign(p.y);
}

float sdOctogon(vec2 p, float r) {
  vec3 k = vec3(-0.9238795325, 0.3826834323, 0.4142135623 );
  p = abs(p);
  p -= 2.0*min(dot(vec2( k.x,k.y),p),0.0)*vec2( k.x,k.y);
  p -= 2.0*min(dot(vec2(-k.x,k.y),p),0.0)*vec2(-k.x,k.y);
  p -= vec2(clamp(p.x, -k.z*r, k.z*r), r);
  return length(p)*sign(p.y);
}

float sdHexagram(vec2 p, float r) {
  vec4 k=vec4(-0.5,0.8660254038,0.5773502692,1.7320508076);
  p = abs(p);
  p -= 2.0*min(dot(k.xy,p),0.0)*k.xy;
  p -= 2.0*min(dot(k.yx,p),0.0)*k.yx;
  p -= vec2(clamp(p.x,r*k.z,r*k.w),r);
  return length(p)*sign(p.y);
}

float sdRhombus(vec2 p, vec2 b) {
  vec2 q = abs(p);
  float h = clamp((-2.0*ndot(q,b)+ndot(b,b))/dot(b,b),-1.0,1.0);
  float d = length( q - 0.5*b*vec2(1.0-h,1.0+h) );
  return d * sign( q.x*b.y + q.y*b.x - b.x*b.y );
}

float sdVesica(vec2 p, float r, float d) {
  p = abs(p);
  float b = sqrt(r*r-d*d); // can delay this sqrt
  return ((p.y-b)*d>p.x*b)
          ? length(p-vec2(0.0,b))
          : length(p-vec2(-d,0.0))-r;
}
`,qoe=`attribute float a_vertexId;

uniform mat4 u_cellTypeLayout;      // \u63CF\u8FF0\u6570\u636E\u7EB9\u7406 cell \u7ED3\u6784\u7684\u77E9\u9635
uniform sampler2D u_dataTexture;    // \u6570\u636E\u7EB9\u7406

bool hasOpacity() { // \u5224\u65AD cell \u4E2D\u662F\u5426\u5B58\u5728 opacity \u7684\u6570\u636E
  return u_cellTypeLayout[1][0] > 0.0 && u_cellTypeLayout[3][3] > 0.0;
}

bool hasStrokeOpacity() { // \u5224\u65AD cell \u4E2D\u662F\u5426\u5B58\u5728 strokeOpacity \u7684\u6570\u636E
  return u_cellTypeLayout[1][1] > 0.0 && u_cellTypeLayout[3][3] > 0.0;
}

bool hasStrokeWidth() { // \u5224\u65AD cell \u4E2D\u662F\u5426\u5B58\u5728 strokeWidth \u7684\u6570\u636E
  return u_cellTypeLayout[1][2] > 0.0 && u_cellTypeLayout[3][3] > 0.0;
}

bool hasStroke() { // \u5224\u65AD cell \u4E2D\u662F\u5426\u5B58\u5728 stroke \u7684\u6570\u636E
  return u_cellTypeLayout[1][3] > 0.0 && u_cellTypeLayout[3][3] > 0.0;
}

bool hasOffsets() { // \u5224\u65AD cell \u4E2D\u662F\u5426\u5B58\u5728 offsets \u7684\u6570\u636E
  return u_cellTypeLayout[2][0] > 0.0 && u_cellTypeLayout[3][3] > 0.0;
}

bool hasThetaOffset() { // \u5224\u65AD cell \u4E2D\u662F\u5426\u5B58\u5728 thetaOffset \u7684\u6570\u636E
  return u_cellTypeLayout[2][1] > 0.0 && u_cellTypeLayout[3][3] > 0.0;
}

// \u6839\u636E\u5750\u6807\u4F4D\u7F6E\u5148\u662F\u8BA1\u7B97 uv \uFF0C\u7136\u540E\u6839\u636E uv \u4ECE\u6570\u636E\u7EB9\u7406\u4E2D\u53D6\u503C
float pos2value(vec2 pos, float columnWidth, float rowHeight) {
  float u = (pos.r - 1.0) * columnWidth + columnWidth/2.0;
  float v = 1.0 - ((pos.g - 1.0) * rowHeight + rowHeight/2.0);
  return texture2D(u_dataTexture, vec2(u, v)).r;
}

/*
  currentRow \u5F53\u524D\u884C
  currentColumn \u5F53\u524D\u5217
  columnCount \u6709\u591A\u5C11\u5217
  nextStep \u9700\u8981\u8BA1\u7B97\u5F53\u524D cell \u540E\u7684\u7B2C\u51E0\u4E2A cell \uFF08\u5F53\u524D cell \u5219 nextStep = 0\uFF09
*/
vec2 nextPos(float currentRow, float currentColumn, float columnCount, float nextStep) {
  float nextColumn = currentColumn;
  float nextRow = currentRow;
  if(currentColumn + nextStep <= columnCount){
    nextColumn = currentColumn + nextStep;
  } else {
    nextColumn = mod(currentColumn + nextStep, columnCount); // \u4E0D\u4F1A\u51FA\u73B0\u8DE8\u4E24\u884C
    nextRow = currentRow + 1.0;
  }
  return vec2(nextColumn, nextRow);
}

// \u8BA1\u7B97\u5F53\u524D\u5355\u4E2A cell \u7684\u5927\u5C0F
float calCellCount() { 
  //   u_cellTypeLayout
  //   cal_height, WIDTH, 0.0, 0.0, // rowCount columnCount - \u51E0\u884C\u51E0\u5217
  //   1.0, 1.0, 1.0, 0.0, // opacity strokeOpacity strokeWidth stroke - 1.0 \u8868\u793A\u6709\u6570\u636E\u6620\u5C04\u30010.0 \u8868\u793A\u6CA1\u6709
  //   1.0, 1.0, 0.0, 0.0, // offsets thetaOffset
  //   0.0, 0.0, 0.0, 0.0
  
  return  u_cellTypeLayout[1][0] +        // opacity
          u_cellTypeLayout[1][1] +        // strokeOpacity
          u_cellTypeLayout[1][2] +        // strokeWidth
          u_cellTypeLayout[1][3] * 4.0 +  // stroke
          u_cellTypeLayout[2][0] * 2.0 +  // offsets
          u_cellTypeLayout[2][1];         // thetaOffset
}`,Koe=`
// \u8BA1\u7B97 opacity \u548C\u6807\u793A\u5728 cell \u4E2D\u53D6\u503C\u4F4D\u7F6E\u7684\u504F\u79FB\u91CF textureOffset
vec2 calOpacityAndOffset(float cellCurrentRow, float cellCurrentColumn, float columnCount, float textureOffset, float columnWidth, float rowHeight) {
  if(!hasOpacity()) { // \u6570\u636E\u7EB9\u7406\u4E2D\u4E0D\u5B58\u5728 opacity \u7684\u65F6\u5019\u53D6\u9ED8\u8BA4\u503C\uFF08\u7528\u6237\u5728 style \u4E2D\u4F20\u5165\u7684\u662F\u5E38\u91CF\uFF09
    return vec2(u_opacity, textureOffset);
  } else {
    vec2 valuePos = nextPos(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset);
    float textureOpacity = pos2value(valuePos, columnWidth, rowHeight);
    return vec2(textureOpacity, textureOffset + 1.0);
  }
}
`,Qoe=`
// \u8BA1\u7B97 strokeOpaicty \u548C\u6807\u793A\u5728 cell \u4E2D\u53D6\u503C\u4F4D\u7F6E\u7684\u504F\u79FB\u91CF textureOffset
vec2 calStrokeOpacityAndOffset(float cellCurrentRow, float cellCurrentColumn, float columnCount, float textureOffset, float columnWidth, float rowHeight) {
  if(!hasStrokeOpacity()) {
    return vec2(u_stroke_opacity, textureOffset);
  } else {
    vec2 valuePos = nextPos(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset);
    float textureStrokeOpacity = pos2value(valuePos, columnWidth, rowHeight);
    return vec2(textureStrokeOpacity, textureOffset + 1.0);
  }
}
`,Joe=`
// \u8BA1\u7B97 strokeWidth \u548C\u6807\u793A\u5728 cell \u4E2D\u53D6\u503C\u4F4D\u7F6E\u7684\u504F\u79FB\u91CF textureOffset
vec2 calStrokeWidthAndOffset(float cellCurrentRow, float cellCurrentColumn, float columnCount, float textureOffset, float columnWidth, float rowHeight) {
  if(!hasStrokeWidth()) {
    return vec2(u_stroke_width, textureOffset);
  } else {
    vec2 valuePos = nextPos(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset);
    float textureStrokeWidth = pos2value(valuePos, columnWidth, rowHeight);
    return vec2(textureStrokeWidth, textureOffset + 1.0);
  }
}
`,ese=`
// \u8BA1\u7B97 thetaOffset \u548C\u6807\u793A\u5728 cell \u4E2D\u53D6\u503C\u4F4D\u7F6E\u7684\u504F\u79FB\u91CF textureOffset
vec2 calThetaOffsetAndOffset(float cellCurrentRow, float cellCurrentColumn, float columnCount, float textureOffset, float columnWidth, float rowHeight) {
  if(!hasThetaOffset()) { // \u6570\u636E\u7EB9\u7406\u4E2D\u4E0D\u5B58\u5728 thetaOffset \u7684\u65F6\u5019\u53D6\u9ED8\u8BA4\u503C\uFF08\u7528\u6237\u5728 style \u4E2D\u4F20\u5165\u7684\u662F\u5E38\u91CF\uFF09
    return vec2(u_thetaOffset, textureOffset);
  } else {
    vec2 valuePos = nextPos(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset);
    float textureThetaOffset = pos2value(valuePos, columnWidth, rowHeight);
    return vec2(textureThetaOffset, textureOffset + 1.0);
  }
}
`,tse=/precision\s+(high|low|medium)p\s+float/,nse=`#ifdef GL_FRAGMENT_PRECISION_HIGH
 precision highp float;
 #else
 precision mediump float;
#endif
`,rse=/#pragma include (["^+"]?["\ "[a-zA-Z_0-9](.*)"]*?)/g,ase=(wA=nn(),wA(_A=function(){function e(){Ae(this,e),m(this,"moduleCache",{}),m(this,"rawContentCache",{})}return Oe(e,[{key:"registerBuiltinModules",value:function(){this.destroy(),this.registerModule("common",{vs:kA,fs:kA}),this.registerModule("decode",{vs:Voe,fs:""}),this.registerModule("projection",{vs:Yoe,fs:""}),this.registerModule("project",{vs:Xoe,fs:""}),this.registerModule("sdf_2d",{vs:"",fs:Zoe}),this.registerModule("lighting",{vs:Goe,fs:""}),this.registerModule("light",{vs:joe,fs:""}),this.registerModule("picking",{vs:Woe,fs:Hoe}),this.registerModule("styleMapping",{vs:qoe,fs:""}),this.registerModule("styleMappingCalThetaOffset",{vs:ese,fs:""}),this.registerModule("styleMappingCalOpacity",{vs:Koe,fs:""}),this.registerModule("styleMappingCalStrokeOpacity",{vs:Qoe,fs:""}),this.registerModule("styleMappingCalStrokeWidth",{vs:Joe,fs:""})}},{key:"registerModule",value:function(n,r){if(!this.rawContentCache[n]){var a=r.vs,i=r.fs,o=r.uniforms,s=xA(a),l=s.content,u=s.uniforms,c=xA(i),f=c.content,d=c.uniforms;this.rawContentCache[n]={fs:f,uniforms:Fd(Fd(Fd({},u),d),o),vs:l}}}},{key:"destroy",value:function(){this.moduleCache={},this.rawContentCache={}}},{key:"getModule",value:function(n){var r=this;if(this.moduleCache[n])return this.moduleCache[n];var a=this.rawContentCache[n].vs,i=this.rawContentCache[n].fs,o=this.processModule(a,[],"vs"),s=o.content,l=o.includeList,u=this.processModule(i,[],"fs"),c=u.content,f=u.includeList,d=c,p=JL(l.concat(f).concat(n)).reduce(function(h,g){return Fd(Fd({},h),r.rawContentCache[g].uniforms)},{});return tse.test(c)||(d=nse+c),this.moduleCache[n]={fs:d.trim(),uniforms:p,vs:s.trim()},this.moduleCache[n]}},{key:"processModule",value:function(n,r,a){var i=this,o=n.replace(rse,function(s,l){var u=l.split(" "),c=u[0].replace(/"/g,"");if(r.indexOf(c)>-1)return"";var f=i.rawContentCache[c][a];r.push(c);var d=i.processModule(f,r,a),p=d.content;return p});return{content:o,includeList:r}}}]),e}())||_A);function ise(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&(e=Ee(e),e!==null););return e}function wu(){return typeof Reflect!="undefined"&&Reflect.get?wu=Reflect.get.bind():wu=function(t,n,r){var a=ise(t,n);if(!!a){var i=Object.getOwnPropertyDescriptor(a,n);return i.get?i.get.call(arguments.length<3?t:r):i.value}},wu.apply(this,arguments)}var Tl;(function(e){e.Normal="normal",e.PostProcessing="post-processing"})(Tl||(Tl={}));var SA,CA,Pv=(SA=nn(),SA(CA=function(){function e(){Ae(this,e),m(this,"shaderModuleService",void 0),m(this,"rendererService",void 0),m(this,"cameraService",void 0),m(this,"mapService",void 0),m(this,"interactionService",void 0),m(this,"layerService",void 0),m(this,"config",void 0)}return Oe(e,[{key:"getName",value:function(){return""}},{key:"getType",value:function(){return Tl.Normal}},{key:"init",value:function(n,r){this.config=r,this.rendererService=n.getContainer().get(ye.IRendererService),this.cameraService=n.getContainer().get(ye.ICameraService),this.mapService=n.getContainer().get(ye.IMapService),this.interactionService=n.getContainer().get(ye.IInteractionService),this.layerService=n.getContainer().get(ye.ILayerService),this.shaderModuleService=n.getContainer().get(ye.IShaderModuleService)}},{key:"render",value:function(n){}}]),e}())||CA),TA,AA;function ose(e){var t=sse();return function(){var r=Ee(e),a;if(t){var i=Ee(this).constructor;a=Reflect.construct(r,arguments,i)}else a=r.apply(this,arguments);return Mt(this,a)}}function sse(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var lse=(TA=nn(),TA(AA=function(e){Ct(n,e);var t=ose(n);function n(){return Ae(this,n),t.apply(this,arguments)}return Oe(n,[{key:"getName",value:function(){return"clear"}},{key:"init",value:function(a,i){wu(Ee(n.prototype),"init",this).call(this,a,i)}},{key:"render",value:function(){this.rendererService.clear({color:[0,0,0,0],depth:1,framebuffer:null})}}]),n}(Pv))||AA),OA,MA,RA,ax,PA;function use(e,t){var n=typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=cse(e))||t&&e&&typeof e.length=="number"){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(u){throw u},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i=!0,o=!1,s;return{s:function(){n=n.call(e)},n:function(){var u=n.next();return i=u.done,u},e:function(u){o=!0,s=u},f:function(){try{!i&&n.return!=null&&n.return()}finally{if(o)throw s}}}}function cse(e,t){if(!!e){if(typeof e=="string")return IA(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return IA(e,t)}}function IA(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var fse=(OA=nn(),MA=ln(ye.IPostProcessor),OA(RA=(ax=function(){function e(){Ae(this,e),m(this,"passes",[]),en(this,"postProcessor",PA,this),m(this,"layer",void 0),m(this,"renderFlag",void 0),m(this,"width",0),m(this,"height",0)}return Oe(e,[{key:"setLayer",value:function(n){this.layer=n}},{key:"setRenderFlag",value:function(n){this.renderFlag=n}},{key:"getRenderFlag",value:function(){return this.renderFlag}},{key:"getPostProcessor",value:function(){return this.postProcessor}},{key:"render",value:function(){var t=qn(pn.mark(function r(){var a,i,o;return pn.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:a=use(this.passes),l.prev=1,a.s();case 3:if((i=a.n()).done){l.next=9;break}return o=i.value,l.next=7,o.render(this.layer);case 7:l.next=3;break;case 9:l.next=14;break;case 11:l.prev=11,l.t0=l.catch(1),a.e(l.t0);case 14:return l.prev=14,a.f(),l.finish(14);case 17:return l.next=19,this.postProcessor.render(this.layer);case 19:case"end":return l.stop()}},r,this,[[1,11,14,17]])}));function n(){return t.apply(this,arguments)}return n}()},{key:"resize",value:function(n,r){(this.width!==n||this.height!==r)&&(this.postProcessor.resize(n,r),this.width=n,this.height=r)}},{key:"add",value:function(n,r){n.getType()===Tl.PostProcessing?this.postProcessor.add(n,this.layer,r):(n.init(this.layer,r),this.passes.push(n))}},{key:"insert",value:function(n,r,a){n.init(this.layer,r),this.passes.splice(a,0,n)}},{key:"destroy",value:function(){this.passes.length=0}}]),e}(),PA=Jt(ax.prototype,"postProcessor",[MA],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ax))||RA),LA,NA;function FA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function DA(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?FA(Object(n),!0).forEach(function(r){m(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):FA(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function dse(e){var t=pse();return function(){var r=Ee(e),a;if(t){var i=Ee(this).constructor;a=Reflect.construct(r,arguments,i)}else a=r.apply(this,arguments);return Mt(this,a)}}function pse(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var hse=(LA=nn(),LA(NA=function(e){Ct(n,e);var t=dse(n);function n(){var r;Ae(this,n);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return r=t.call.apply(t,[this].concat(i)),m(D(r),"pickingFBO",void 0),m(D(r),"layer",void 0),m(D(r),"width",0),m(D(r),"height",0),m(D(r),"alreadyInRendering",!1),m(D(r),"pickFromPickingFBO",function(s){var l=s.x,u=s.y,c=s.lngLat,f=s.type;if(!(!r.layer.isVisible()||!r.layer.needPick(f))){var d=r.rendererService,p=d.getViewportSize,h=d.readPixels,g=d.useFramebuffer,v=p(),b=v.width,y=v.height,x=r.layer.getLayerConfig(),E=x.enableHighlight,T=x.enableSelect,C=l*vr,I=u*vr;if(!(C>b||C<0||I>y||I<0)){var P;g(r.pickingFBO,function(){var j;if(P=h({x:Math.round(C),y:Math.round(y-(u+1)*vr),width:1,height:1,data:new Uint8Array(1*1*4),framebuffer:r.pickingFBO}),P[0]!==0||P[1]!==0||P[2]!==0){var A=Go(P),S=r.layer.getSource().getFeatureById(A),M={x:l,y:u,type:f,lngLat:c,featureId:A,feature:S};S&&(r.layer.setCurrentPickId(A),r.triggerHoverOnLayer(M))}else{var O={x:l,y:u,lngLat:c,type:r.layer.getCurrentPickId()===null?"un"+f:"mouseout",featureId:null,feature:null};r.triggerHoverOnLayer(DA(DA({},O),{},{type:"unpick"})),r.triggerHoverOnLayer(O),r.layer.setCurrentPickId(null)}E&&r.highlightPickedFeature(P),T&&f==="click"&&((j=P)===null||j===void 0?void 0:j.toString())!==[0,0,0,0].toString()&&r.selectFeature(P)})}}}),r}return Oe(n,[{key:"getType",value:function(){return Tl.Normal}},{key:"getName",value:function(){return"pixelPicking"}},{key:"init",value:function(a,i){wu(Ee(n.prototype),"init",this).call(this,a,i),this.layer=a;var o=this.rendererService,s=o.createTexture2D,l=o.createFramebuffer,u=o.getViewportSize,c=u(),f=c.width,d=c.height;this.pickingFBO=l({color:s({width:f,height:d,wrapS:V.CLAMP_TO_EDGE,wrapT:V.CLAMP_TO_EDGE})}),this.interactionService.on(ya.Hover,this.pickFromPickingFBO),this.interactionService.on(ya.Select,this.selectFeatureHandle.bind(this)),this.interactionService.on(ya.Active,this.highlightFeatureHandle.bind(this))}},{key:"render",value:function(a){var i=this;if(!this.alreadyInRendering){var o=this.rendererService,s=o.getViewportSize,l=o.useFramebuffer,u=o.clear,c=s(),f=c.width,d=c.height;this.alreadyInRendering=!0,(this.width!==f||this.height!==d)&&(this.pickingFBO.resize({width:f,height:d}),this.width=f,this.height=d),l(this.pickingFBO,function(){u({framebuffer:i.pickingFBO,color:[0,0,0,0],stencil:0,depth:1});var p=i.layer.multiPassRenderer.getRenderFlag();i.layer.multiPassRenderer.setRenderFlag(!1),a.hooks.beforePickingEncode.call(),a.render(),a.hooks.afterPickingEncode.call(),i.layer.multiPassRenderer.setRenderFlag(p),i.alreadyInRendering=!1})}}},{key:"triggerHoverOnLayer",value:function(a){this.layer.emit(a.type,a)}},{key:"highlightPickedFeature",value:function(a){var i=Le(a,3),o=i[0],s=i[1],l=i[2];this.layer.hooks.beforeHighlight.call([o,s,l]),this.layerService.renderLayers()}},{key:"selectFeature",value:function(a){var i=Le(a,3),o=i[0],s=i[1],l=i[2];this.layer.hooks.beforeSelect.call([o,s,l]),this.layerService.renderLayers()}},{key:"selectFeatureHandle",value:function(a){var i=a.featureId,o=Jp(i);this.selectFeature(new Uint8Array(o))}},{key:"highlightFeatureHandle",value:function(a){var i=a.featureId,o=Jp(i);this.highlightPickedFeature(new Uint8Array(o))}}]),n}(Pv))||NA);function mse(e,t,n){var r=-1,a=e.length;t<0&&(t=-t>a?0:a+t),n=n>a?a:n,n<0&&(n+=a),a=t>n?0:n-t>>>0,t>>>=0;for(var i=Array(a);++r<a;)i[r]=e[r+t];return i}var gse=mse,vse=gse;function bse(e,t,n){var r=e.length;return n=n===void 0?r:n,!t&&n>=r?e:vse(e,t,n)}var yse=bse,xse="\\ud800-\\udfff",wse="\\u0300-\\u036f",_se="\\ufe20-\\ufe2f",Ese="\\u20d0-\\u20ff",kse=wse+_se+Ese,Sse="\\ufe0e\\ufe0f",Cse="\\u200d",Tse=RegExp("["+Cse+xse+kse+Sse+"]");function Ase(e){return Tse.test(e)}var eN=Ase;function Ose(e){return e.split("")}var Mse=Ose,tN="\\ud800-\\udfff",Rse="\\u0300-\\u036f",Pse="\\ufe20-\\ufe2f",Ise="\\u20d0-\\u20ff",Lse=Rse+Pse+Ise,Nse="\\ufe0e\\ufe0f",Fse="["+tN+"]",dw="["+Lse+"]",pw="\\ud83c[\\udffb-\\udfff]",Dse="(?:"+dw+"|"+pw+")",nN="[^"+tN+"]",rN="(?:\\ud83c[\\udde6-\\uddff]){2}",aN="[\\ud800-\\udbff][\\udc00-\\udfff]",Bse="\\u200d",iN=Dse+"?",oN="["+Nse+"]?",zse="(?:"+Bse+"(?:"+[nN,rN,aN].join("|")+")"+oN+iN+")*",Use=oN+iN+zse,$se="(?:"+[nN+dw+"?",dw,rN,aN,Fse].join("|")+")",Vse=RegExp(pw+"(?="+pw+")|"+$se+Use,"g");function jse(e){return e.match(Vse)||[]}var Gse=jse,Hse=Mse,Wse=eN,Xse=Gse;function Yse(e){return Wse(e)?Xse(e):Hse(e)}var Zse=Yse;function qse(e,t){for(var n=-1,r=e==null?0:e.length,a=Array(r);++n<r;)a[n]=t(e[n],n,e);return a}var Kse=qse,Qse=Nl,Jse=Co,ele="[object Symbol]";function tle(e){return typeof e=="symbol"||Jse(e)&&Qse(e)==ele}var nle=tle,BA=Ch,rle=Kse,ale=Du,ile=nle,ole=1/0,zA=BA?BA.prototype:void 0,UA=zA?zA.toString:void 0;function sN(e){if(typeof e=="string")return e;if(ale(e))return rle(e,sN)+"";if(ile(e))return UA?UA.call(e):"";var t=e+"";return t=="0"&&1/e==-ole?"-0":t}var sle=sN,lle=sle;function ule(e){return e==null?"":lle(e)}var Iv=ule,cle=yse,fle=eN,dle=Zse,ple=Iv;function hle(e){return function(t){t=ple(t);var n=fle(t)?dle(t):void 0,r=n?n[0]:t.charAt(0),a=n?cle(n,1).join(""):t.slice(1);return r[e]()+a}}var mle=hle,gle=mle,vle=gle("toUpperCase"),lN=vle,ble=Iv,yle=lN;function xle(e){return yle(ble(e).toLowerCase())}var wle=xle;function _le(e,t,n,r){var a=-1,i=e==null?0:e.length;for(r&&i&&(n=e[++a]);++a<i;)n=t(n,e[a],a,e);return n}var Ele=_le;function kle(e){return function(t){return e==null?void 0:e[t]}}var Sle=kle,Cle=Sle,Tle={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},Ale=Cle(Tle),Ole=Ale,Mle=Ole,Rle=Iv,Ple=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Ile="\\u0300-\\u036f",Lle="\\ufe20-\\ufe2f",Nle="\\u20d0-\\u20ff",Fle=Ile+Lle+Nle,Dle="["+Fle+"]",Ble=RegExp(Dle,"g");function zle(e){return e=Rle(e),e&&e.replace(Ple,Mle).replace(Ble,"")}var Ule=zle,$le=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;function Vle(e){return e.match($le)||[]}var jle=Vle,Gle=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;function Hle(e){return Gle.test(e)}var Wle=Hle,uN="\\ud800-\\udfff",Xle="\\u0300-\\u036f",Yle="\\ufe20-\\ufe2f",Zle="\\u20d0-\\u20ff",qle=Xle+Yle+Zle,cN="\\u2700-\\u27bf",fN="a-z\\xdf-\\xf6\\xf8-\\xff",Kle="\\xac\\xb1\\xd7\\xf7",Qle="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Jle="\\u2000-\\u206f",eue=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",dN="A-Z\\xc0-\\xd6\\xd8-\\xde",tue="\\ufe0e\\ufe0f",pN=Kle+Qle+Jle+eue,hN="['\u2019]",$A="["+pN+"]",nue="["+qle+"]",mN="\\d+",rue="["+cN+"]",gN="["+fN+"]",vN="[^"+uN+pN+mN+cN+fN+dN+"]",aue="\\ud83c[\\udffb-\\udfff]",iue="(?:"+nue+"|"+aue+")",oue="[^"+uN+"]",bN="(?:\\ud83c[\\udde6-\\uddff]){2}",yN="[\\ud800-\\udbff][\\udc00-\\udfff]",Sc="["+dN+"]",sue="\\u200d",VA="(?:"+gN+"|"+vN+")",lue="(?:"+Sc+"|"+vN+")",jA="(?:"+hN+"(?:d|ll|m|re|s|t|ve))?",GA="(?:"+hN+"(?:D|LL|M|RE|S|T|VE))?",xN=iue+"?",wN="["+tue+"]?",uue="(?:"+sue+"(?:"+[oue,bN,yN].join("|")+")"+wN+xN+")*",cue="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",fue="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",due=wN+xN+uue,pue="(?:"+[rue,bN,yN].join("|")+")"+due,hue=RegExp([Sc+"?"+gN+"+"+jA+"(?="+[$A,Sc,"$"].join("|")+")",lue+"+"+GA+"(?="+[$A,Sc+VA,"$"].join("|")+")",Sc+"?"+VA+"+"+jA,Sc+"+"+GA,fue,cue,mN,pue].join("|"),"g");function mue(e){return e.match(hue)||[]}var gue=mue,vue=jle,bue=Wle,yue=Iv,xue=gue;function wue(e,t,n){return e=yue(e),t=n?void 0:t,t===void 0?bue(e)?xue(e):vue(e):e.match(t)||[]}var _ue=wue,Eue=Ele,kue=Ule,Sue=_ue,Cue="['\u2019]",Tue=RegExp(Cue,"g");function Aue(e){return function(t){return Eue(Sue(kue(t).replace(Tue,"")),e,"")}}var Oue=Aue,Mue=wle,Rue=Oue,Pue=Rue(function(e,t,n){return t=t.toLowerCase(),e+(n?Mue(t):t)}),Iue=Pue,HA,WA,XA,ix,YA;function ZA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Dd(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ZA(Object(n),!0).forEach(function(r){m(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ZA(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var Lue=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,Ps=(HA=nn(),WA=ln(ye.IShaderModuleService),HA(XA=(ix=function(){function e(){Ae(this,e),en(this,"shaderModuleService",YA,this),m(this,"rendererService",void 0),m(this,"config",void 0),m(this,"quad",Lue),m(this,"enabled",!0),m(this,"renderToScreen",!1),m(this,"model",void 0),m(this,"name",void 0),m(this,"optionsToUpdate",{})}return Oe(e,[{key:"getName",value:function(){return this.name}},{key:"setName",value:function(n){this.name=n}},{key:"getType",value:function(){return Tl.PostProcessing}},{key:"init",value:function(n,r){this.config=r,this.rendererService=n.getContainer().get(ye.IRendererService),this.shaderModuleService=n.getContainer().get(ye.IShaderModuleService);var a=this.rendererService,i=a.createAttribute,o=a.createBuffer,s=a.createModel,l=this.setupShaders(),u=l.vs,c=l.fs,f=l.uniforms;this.model=s({vs:u,fs:c,attributes:{a_Position:i({buffer:o({data:[-4,-4,4,-4,0,4],type:V.FLOAT}),size:2})},uniforms:Dd(Dd({u_Texture:null},f),this.config&&this.convertOptionsToUniforms(this.config)),depth:{enable:!1},count:3,blend:{enable:this.getName()==="copy"}})}},{key:"render",value:function(n,r){var a=this,i=n.multiPassRenderer.getPostProcessor(),o=this.rendererService,s=o.useFramebuffer,l=o.getViewportSize,u=o.clear,c=l(),f=c.width,d=c.height;s(this.renderToScreen?null:i.getWriteFBO(),function(){u({framebuffer:i.getWriteFBO(),color:[0,0,0,0],depth:1,stencil:0});var p=Dd({u_BloomFinal:0,u_Texture:i.getReadFBO(),u_ViewportSize:[f,d]},a.convertOptionsToUniforms(a.optionsToUpdate));r&&(p.u_BloomFinal=1,p.u_Texture2=r),a.model.draw({uniforms:p})})}},{key:"isEnabled",value:function(){return this.enabled}},{key:"setEnabled",value:function(n){this.enabled=n}},{key:"setRenderToScreen",value:function(n){this.renderToScreen=n}},{key:"updateOptions",value:function(n){this.optionsToUpdate=Dd(Dd({},this.optionsToUpdate),n)}},{key:"setupShaders",value:function(){throw new Error("Method not implemented.")}},{key:"convertOptionsToUniforms",value:function(n){var r={};return Object.keys(n).forEach(function(a){ks(n[a])||(r["u_".concat(lN(Iue(a)))]=n[a])}),r}}]),e}(),YA=Jt(ix.prototype,"shaderModuleService",[WA],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ix))||XA),qA,KA;function QA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function JA(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?QA(Object(n),!0).forEach(function(r){m(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):QA(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Nue(e){var t=Fue();return function(){var r=Ee(e),a;if(t){var i=Ee(this).constructor;a=Reflect.construct(r,arguments,i)}else a=r.apply(this,arguments);return Mt(this,a)}}function Fue(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var Due=`varying vec2 v_UV;

uniform float u_BloomFinal: 0.0;
uniform sampler2D u_Texture;
uniform sampler2D u_Texture2;

uniform vec2 u_ViewportSize: [1.0, 1.0];
uniform float u_radius: 5.0;
uniform float u_intensity: 0.3;
uniform float u_baseRadio: 0.5;

// https://github.com/Jam3/glsl-fast-gaussian-blur/blob/master/9.glsl
vec4 blur9(sampler2D image, vec2 uv, vec2 resolution, vec2 direction) {
  vec4 color = vec4(0.0);
  vec2 off1 = vec2(1.3846153846) * direction;
  vec2 off2 = vec2(3.2307692308) * direction;
  color += texture2D(image, uv) * 0.2270270270;
  color += texture2D(image, uv + (off1 / resolution)) * 0.3162162162;
  color += texture2D(image, uv - (off1 / resolution)) * 0.3162162162;
  color += texture2D(image, uv + (off2 / resolution)) * 0.0702702703;
  color += texture2D(image, uv - (off2 / resolution)) * 0.0702702703;
  return color;
}

float luminance(vec4 color) {
  return  0.2125 * color.r + 0.7154 * color.g + 0.0721 * color.b;
}

void main() {
  // vec4 baseColor = texture2D(u_Texture, v_UV);

  float r = sqrt(u_radius);

  vec4 c1 = blur9(u_Texture, v_UV, u_ViewportSize, vec2(u_radius, 0.0));
  // c1 *= luminance(c1);
  vec4 c2 = blur9(u_Texture, v_UV, u_ViewportSize, vec2(0.0, u_radius));
  // c2 *= luminance(c2);
  vec4 c3 = blur9(u_Texture, v_UV, u_ViewportSize, vec2(r, r));
  // c3 *= luminance(c3);
  vec4 c4 = blur9(u_Texture, v_UV, u_ViewportSize, vec2(r, -r));
  // c4 *= luminance(c4);
  vec4 inbloomColor = (c1 + c2 + c3 + c4) * 0.25;

  // float lum = luminance(inbloomColor);
  // inbloomColor.rgb *= lum;

  if(u_BloomFinal > 0.0) {
    vec4 baseColor = texture2D(u_Texture2, v_UV);
    float baselum = luminance(baseColor);
    gl_FragColor = mix(inbloomColor, baseColor, u_baseRadio);
    if(baselum <= 0.2) {
      gl_FragColor = inbloomColor * u_intensity;
    }
  } else {
    gl_FragColor = inbloomColor;
  }
}`,Bue=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,zue=(qA=nn(),qA(KA=function(e){Ct(n,e);var t=Nue(n);function n(){return Ae(this,n),t.apply(this,arguments)}return Oe(n,[{key:"setupShaders",value:function(){this.shaderModuleService.registerModule("blur-pass",{vs:Bue,fs:Due});var a=this.shaderModuleService.getModule("blur-pass"),i=a.vs,o=a.fs,s=a.uniforms,l=this.rendererService.getViewportSize(),u=l.width,c=l.height;return{vs:i,fs:o,uniforms:JA(JA({},s),{},{u_ViewportSize:[u,c]})}}},{key:"convertOptionsToUniforms",value:function(a){var i={};return ks(a.bloomRadius)||(i.u_radius=a.bloomRadius),ks(a.bloomIntensity)||(i.u_intensity=a.bloomIntensity),ks(a.bloomBaseRadio)||(i.u_baseRadio=a.bloomBaseRadio),i}}]),n}(Ps))||KA),e5,t5;function n5(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function r5(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?n5(Object(n),!0).forEach(function(r){m(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):n5(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Uue(e){var t=$ue();return function(){var r=Ee(e),a;if(t){var i=Ee(this).constructor;a=Reflect.construct(r,arguments,i)}else a=r.apply(this,arguments);return Mt(this,a)}}function $ue(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var Vue=`varying vec2 v_UV;

uniform sampler2D u_Texture;

uniform vec2 u_ViewportSize: [1.0, 1.0];
uniform vec2 u_BlurDir: [1.0, 0.0];

// https://github.com/Jam3/glsl-fast-gaussian-blur/blob/master/9.glsl
vec4 blur9(sampler2D image, vec2 uv, vec2 resolution, vec2 direction) {
  vec4 color = vec4(0.0);
  vec2 off1 = vec2(1.3846153846) * direction;
  vec2 off2 = vec2(3.2307692308) * direction;
  color += texture2D(image, uv) * 0.2270270270;
  color += texture2D(image, uv + (off1 / resolution)) * 0.3162162162;
  color += texture2D(image, uv - (off1 / resolution)) * 0.3162162162;
  color += texture2D(image, uv + (off2 / resolution)) * 0.0702702703;
  color += texture2D(image, uv - (off2 / resolution)) * 0.0702702703;
  return color;
}

void main() {
  gl_FragColor = blur9(u_Texture, v_UV, u_ViewportSize, u_BlurDir);
}`,jue=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,Gue=(e5=nn(),e5(t5=function(e){Ct(n,e);var t=Uue(n);function n(){return Ae(this,n),t.apply(this,arguments)}return Oe(n,[{key:"setupShaders",value:function(){this.shaderModuleService.registerModule("blur-pass",{vs:jue,fs:Vue});var a=this.shaderModuleService.getModule("blur-pass"),i=a.vs,o=a.fs,s=a.uniforms,l=this.rendererService.getViewportSize(),u=l.width,c=l.height;return{vs:i,fs:o,uniforms:r5(r5({},s),{},{u_ViewportSize:[u,c]})}}},{key:"convertOptionsToUniforms",value:function(a){var i={};return ks(a.blurRadius)||(i.u_BlurDir=[a.blurRadius,0]),i}}]),n}(Ps))||t5),a5,i5;function o5(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function s5(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?o5(Object(n),!0).forEach(function(r){m(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o5(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Hue(e){var t=Wue();return function(){var r=Ee(e),a;if(t){var i=Ee(this).constructor;a=Reflect.construct(r,arguments,i)}else a=r.apply(this,arguments);return Mt(this,a)}}function Wue(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var Xue=`varying vec2 v_UV;

uniform sampler2D u_Texture;

uniform vec2 u_ViewportSize: [1.0, 1.0];
uniform vec2 u_BlurDir: [1.0, 0.0];

// https://github.com/Jam3/glsl-fast-gaussian-blur/blob/master/9.glsl
vec4 blur9(sampler2D image, vec2 uv, vec2 resolution, vec2 direction) {
  vec4 color = vec4(0.0);
  vec2 off1 = vec2(1.3846153846) * direction;
  vec2 off2 = vec2(3.2307692308) * direction;
  color += texture2D(image, uv) * 0.2270270270;
  color += texture2D(image, uv + (off1 / resolution)) * 0.3162162162;
  color += texture2D(image, uv - (off1 / resolution)) * 0.3162162162;
  color += texture2D(image, uv + (off2 / resolution)) * 0.0702702703;
  color += texture2D(image, uv - (off2 / resolution)) * 0.0702702703;
  return color;
}

void main() {
  gl_FragColor = blur9(u_Texture, v_UV, u_ViewportSize, u_BlurDir);
}`,Yue=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,Zue=(a5=nn(),a5(i5=function(e){Ct(n,e);var t=Hue(n);function n(){return Ae(this,n),t.apply(this,arguments)}return Oe(n,[{key:"setupShaders",value:function(){this.shaderModuleService.registerModule("blur-pass",{vs:Yue,fs:Xue});var a=this.shaderModuleService.getModule("blur-pass"),i=a.vs,o=a.fs,s=a.uniforms,l=this.rendererService.getViewportSize(),u=l.width,c=l.height;return{vs:i,fs:o,uniforms:s5(s5({},s),{},{u_ViewportSize:[u,c]})}}},{key:"convertOptionsToUniforms",value:function(a){var i={};return ks(a.blurRadius)||(i.u_BlurDir=[0,a.blurRadius]),i}}]),n}(Ps))||i5),l5,u5;function c5(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function f5(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?c5(Object(n),!0).forEach(function(r){m(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c5(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function que(e){var t=Kue();return function(){var r=Ee(e),a;if(t){var i=Ee(this).constructor;a=Reflect.construct(r,arguments,i)}else a=r.apply(this,arguments);return Mt(this,a)}}function Kue(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var Que=`varying vec2 v_UV;

uniform sampler2D u_Texture;
uniform vec2 u_ViewportSize: [1.0, 1.0];
uniform vec2 u_Center : [0.5, 0.5];
uniform float u_Angle : 0;
uniform float u_Size : 8;

#pragma include "common"

float scale = PI / u_Size;

float pattern(float u_Angle, vec2 texSize, vec2 texCoord) {
  float s = sin(u_Angle), c = cos(u_Angle);
  vec2 tex = texCoord * texSize - u_Center * texSize;
  vec2 point = vec2(
    c * tex.x - s * tex.y,
    s * tex.x + c * tex.y
  ) * scale;
  return (sin(point.x) * sin(point.y)) * 4.0;
}

// https://github.com/evanw/glfx.js/blob/master/src/filters/fun/colorhalftone.js
vec4 colorHalftone_filterColor(vec4 color, vec2 texSize, vec2 texCoord) {
  vec3 cmy = 1.0 - color.rgb;
  float k = min(cmy.x, min(cmy.y, cmy.z));
  cmy = (cmy - k) / (1.0 - k);
  cmy = clamp(
    cmy * 10.0 - 3.0 + vec3(
      pattern(u_Angle + 0.26179, texSize, texCoord),
      pattern(u_Angle + 1.30899, texSize, texCoord),
      pattern(u_Angle, texSize, texCoord)
    ),
    0.0,
    1.0
  );
  k = clamp(k * 10.0 - 5.0 + pattern(u_Angle + 0.78539, texSize, texCoord), 0.0, 1.0);
  return vec4(1.0 - cmy - k, color.a);
}

void main() {
  gl_FragColor = vec4(texture2D(u_Texture, v_UV));
  gl_FragColor = colorHalftone_filterColor(gl_FragColor, u_ViewportSize, v_UV);
}`,Jue=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,ece=(l5=nn(),l5(u5=function(e){Ct(n,e);var t=que(n);function n(){return Ae(this,n),t.apply(this,arguments)}return Oe(n,[{key:"setupShaders",value:function(){this.shaderModuleService.registerModule("colorhalftone-pass",{vs:Jue,fs:Que});var a=this.shaderModuleService.getModule("colorhalftone-pass"),i=a.vs,o=a.fs,s=a.uniforms,l=this.rendererService.getViewportSize(),u=l.width,c=l.height;return{vs:i,fs:o,uniforms:f5(f5({},s),{},{u_ViewportSize:[u,c]})}}}]),n}(Ps))||u5),d5,p5;function tce(e){var t=nce();return function(){var r=Ee(e),a;if(t){var i=Ee(this).constructor;a=Reflect.construct(r,arguments,i)}else a=r.apply(this,arguments);return Mt(this,a)}}function nce(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var rce=`varying vec2 v_UV;

uniform sampler2D u_Texture;

void main() {
  gl_FragColor = vec4(texture2D(u_Texture, v_UV));
}`,ace=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,ice=(d5=nn(),d5(p5=function(e){Ct(n,e);var t=tce(n);function n(){return Ae(this,n),t.apply(this,arguments)}return Oe(n,[{key:"setupShaders",value:function(){return this.shaderModuleService.registerModule("copy-pass",{vs:ace,fs:rce}),this.shaderModuleService.getModule("copy-pass")}}]),n}(Ps))||p5),h5,m5;function g5(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function v5(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?g5(Object(n),!0).forEach(function(r){m(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g5(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function oce(e){var t=sce();return function(){var r=Ee(e),a;if(t){var i=Ee(this).constructor;a=Reflect.construct(r,arguments,i)}else a=r.apply(this,arguments);return Mt(this,a)}}function sce(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var lce=`varying vec2 v_UV;

uniform sampler2D u_Texture;
uniform vec2 u_ViewportSize: [1.0, 1.0];
uniform vec2 u_Center : [0.5, 0.5];
uniform float u_Scale : 10;

// https://github.com/evanw/glfx.js/blob/master/src/filters/fun/hexagonalpixelate.js
vec4 hexagonalPixelate_sampleColor(sampler2D texture, vec2 texSize, vec2 texCoord) {
  vec2 tex = (texCoord * texSize - u_Center * texSize) / u_Scale;
  tex.y /= 0.866025404;
  tex.x -= tex.y * 0.5;
  vec2 a;
  if (tex.x + tex.y - floor(tex.x) - floor(tex.y) < 1.0) {
    a = vec2(floor(tex.x), floor(tex.y));
  }
  else a = vec2(ceil(tex.x), ceil(tex.y));
  vec2 b = vec2(ceil(tex.x), floor(tex.y));
  vec2 c = vec2(floor(tex.x), ceil(tex.y));
  vec3 TEX = vec3(tex.x, tex.y, 1.0 - tex.x - tex.y);
  vec3 A = vec3(a.x, a.y, 1.0 - a.x - a.y);
  vec3 B = vec3(b.x, b.y, 1.0 - b.x - b.y);
  vec3 C = vec3(c.x, c.y, 1.0 - c.x - c.y);
  float alen = length(TEX - A);
  float blen = length(TEX - B);
  float clen = length(TEX - C);
  vec2 choice;
  if (alen < blen) {
    if (alen < clen) choice = a;
    else choice = c;
  } else {
    if (blen < clen) choice = b;
    else choice = c;
  }
  choice.x += choice.y * 0.5;
  choice.y *= 0.866025404;
  choice *= u_Scale / texSize;
  return texture2D(texture, choice + u_Center);
}

void main() {
  gl_FragColor = vec4(texture2D(u_Texture, v_UV));
  gl_FragColor = hexagonalPixelate_sampleColor(u_Texture, u_ViewportSize, v_UV);
}`,uce=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,cce=(h5=nn(),h5(m5=function(e){Ct(n,e);var t=oce(n);function n(){return Ae(this,n),t.apply(this,arguments)}return Oe(n,[{key:"setupShaders",value:function(){this.shaderModuleService.registerModule("hexagonalpixelate-pass",{vs:uce,fs:lce});var a=this.shaderModuleService.getModule("hexagonalpixelate-pass"),i=a.vs,o=a.fs,s=a.uniforms,l=this.rendererService.getViewportSize(),u=l.width,c=l.height;return{vs:i,fs:o,uniforms:v5(v5({},s),{},{u_ViewportSize:[u,c]})}}}]),n}(Ps))||m5),b5,y5;function x5(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function w5(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?x5(Object(n),!0).forEach(function(r){m(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):x5(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function fce(e){var t=dce();return function(){var r=Ee(e),a;if(t){var i=Ee(this).constructor;a=Reflect.construct(r,arguments,i)}else a=r.apply(this,arguments);return Mt(this,a)}}function dce(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var pce=`varying vec2 v_UV;

uniform sampler2D u_Texture;
uniform vec2 u_ViewportSize: [1.0, 1.0];
uniform float u_Strength : 0.6;

vec4 ink_sampleColor(sampler2D texture, vec2 texSize, vec2 texCoord) {
  vec2 dx = vec2(1.0 / texSize.x, 0.0);
  vec2 dy = vec2(0.0, 1.0 / texSize.y);
  vec4 color = texture2D(texture, texCoord);
  float bigTotal = 0.0;
  float smallTotal = 0.0;
  vec3 bigAverage = vec3(0.0);
  vec3 smallAverage = vec3(0.0);
  for (float x = -2.0; x <= 2.0; x += 1.0) {
    for (float y = -2.0; y <= 2.0; y += 1.0) {
      vec3 sample = texture2D(texture, texCoord + dx * x + dy * y).rgb;
      bigAverage += sample;
      bigTotal += 1.0;
      if (abs(x) + abs(y) < 2.0) {
        smallAverage += sample;
        smallTotal += 1.0;
      }
    }
  }
  vec3 edge = max(vec3(0.0), bigAverage / bigTotal - smallAverage / smallTotal);
  float power = u_Strength * u_Strength * u_Strength * u_Strength * u_Strength;
  return vec4(color.rgb - dot(edge, edge) * power * 100000.0, color.a);
}

void main() {
  gl_FragColor = vec4(texture2D(u_Texture, v_UV));
  gl_FragColor = ink_sampleColor(u_Texture, u_ViewportSize, v_UV);
}`,hce=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,mce=(b5=nn(),b5(y5=function(e){Ct(n,e);var t=fce(n);function n(){return Ae(this,n),t.apply(this,arguments)}return Oe(n,[{key:"setupShaders",value:function(){this.shaderModuleService.registerModule("ink-pass",{vs:hce,fs:pce});var a=this.shaderModuleService.getModule("ink-pass"),i=a.vs,o=a.fs,s=a.uniforms,l=this.rendererService.getViewportSize(),u=l.width,c=l.height;return{vs:i,fs:o,uniforms:w5(w5({},s),{},{u_ViewportSize:[u,c]})}}}]),n}(Ps))||y5),_5,E5;function gce(e){var t=vce();return function(){var r=Ee(e),a;if(t){var i=Ee(this).constructor;a=Reflect.construct(r,arguments,i)}else a=r.apply(this,arguments);return Mt(this,a)}}function vce(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var bce=`varying vec2 v_UV;

uniform sampler2D u_Texture;
uniform float u_Amount : 0.5;

float rand(vec2 co) {
  return fract(sin(dot(co.xy ,vec2(12.9898,78.233))) * 43758.5453);
}

// https://github.com/evanw/glfx.js/blob/master/src/filters/adjust/noise.js
vec4 noise_filterColor(vec4 color, vec2 texCoord) {
  float diff = (rand(texCoord) - 0.5) * u_Amount;
  color.r += diff;
  color.g += diff;
  color.b += diff;
  return color;
}

void main() {
  gl_FragColor = vec4(texture2D(u_Texture, v_UV));
  gl_FragColor = noise_filterColor(gl_FragColor, v_UV);
}`,yce=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,xce=(_5=nn(),_5(E5=function(e){Ct(n,e);var t=gce(n);function n(){return Ae(this,n),t.apply(this,arguments)}return Oe(n,[{key:"setupShaders",value:function(){return this.shaderModuleService.registerModule("noise-pass",{vs:yce,fs:bce}),this.shaderModuleService.getModule("noise-pass")}}]),n}(Ps))||E5),k5,S5;function wce(e){var t=_ce();return function(){var r=Ee(e),a;if(t){var i=Ee(this).constructor;a=Reflect.construct(r,arguments,i)}else a=r.apply(this,arguments);return Mt(this,a)}}function _ce(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var Ece=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`,kce=`varying vec2 v_UV;

uniform sampler2D u_Texture;

uniform float u_Amount : 0.5;

// https://github.com/evanw/glfx.js/blob/master/src/filters/adjust/sepia.js
vec4 sepia_filterColor(vec4 color) {
  float r = color.r;
  float g = color.g;
  float b = color.b;
  color.r =
    min(1.0, (r * (1.0 - (0.607 * u_Amount))) + (g * (0.769 * u_Amount)) + (b * (0.189 * u_Amount)));
  color.g = min(1.0, (r * 0.349 * u_Amount) + (g * (1.0 - (0.314 * u_Amount))) + (b * 0.168 * u_Amount));
  color.b = min(1.0, (r * 0.272 * u_Amount) + (g * 0.534 * u_Amount) + (b * (1.0 - (0.869 * u_Amount))));
  return color;
}

void main() {
  gl_FragColor = vec4(texture2D(u_Texture, v_UV));
  gl_FragColor = sepia_filterColor(gl_FragColor);
}`,Sce=(k5=nn(),k5(S5=function(e){Ct(n,e);var t=wce(n);function n(){return Ae(this,n),t.apply(this,arguments)}return Oe(n,[{key:"setupShaders",value:function(){return this.shaderModuleService.registerModule("sepia-pass",{vs:Ece,fs:kce}),this.shaderModuleService.getModule("sepia-pass")}}]),n}(Ps))||S5),C5,T5,A5,O5,fc,M5,Cce=(C5=nn(),T5=ln(ye.IRendererService),A5=_re(),C5(O5=(fc=function(){function e(){Ae(this,e),en(this,"rendererService",M5,this),m(this,"passes",[]),m(this,"readFBO",void 0),m(this,"writeFBO",void 0)}return Oe(e,[{key:"getReadFBO",value:function(){return this.readFBO}},{key:"getWriteFBO",value:function(){return this.writeFBO}},{key:"getCurrentFBOTex",value:function(){var n=this.rendererService,r=n.getViewportSize,a=n.createTexture2D,i=r(),o=i.width,s=i.height;return a({x:0,y:0,width:o,height:s,copy:!0})}},{key:"getReadFBOTex",value:function(){var n=this,r=this.rendererService.useFramebuffer;return new Promise(function(a,i){r(n.readFBO,qn(pn.mark(function o(){return pn.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:a(n.getCurrentFBOTex());case 1:case"end":return l.stop()}},o)})))})}},{key:"renderBloomPass",value:function(){var t=qn(pn.mark(function r(a,i){var o,s;return pn.wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,this.getReadFBOTex();case 2:o=u.sent,s=0;case 4:if(!(s<4)){u.next=11;break}return u.next=7,i.render(a,o);case 7:this.swap(),s++,u.next=4;break;case 11:case"end":return u.stop()}},r,this)}));function n(r,a){return t.apply(this,arguments)}return n}()},{key:"render",value:function(){var t=qn(pn.mark(function r(a){var i,o;return pn.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:i=0;case 1:if(!(i<this.passes.length)){l.next=15;break}if(o=this.passes[i],o.setRenderToScreen(this.isLastEnabledPass(i)),o.getName()!=="bloom"){l.next=9;break}return l.next=7,this.renderBloomPass(a,o);case 7:l.next=12;break;case 9:return l.next=11,o.render(a);case 11:i!==this.passes.length-1&&this.swap();case 12:i++,l.next=1;break;case 15:case"end":return l.stop()}},r,this)}));function n(r){return t.apply(this,arguments)}return n}()},{key:"resize",value:function(n,r){this.readFBO.resize({width:n,height:r}),this.writeFBO.resize({width:n,height:r})}},{key:"add",value:function(n,r,a){n.init(r,a),this.passes.push(n)}},{key:"insert",value:function(n,r,a,i){n.init(a,i),this.passes.splice(r,0,n)}},{key:"getPostProcessingPassByName",value:function(n){return this.passes.find(function(r){return r.getName()===n})}},{key:"init",value:function(){var n=this.rendererService,r=n.createFramebuffer,a=n.createTexture2D;this.readFBO=r({color:a({width:1,height:1,wrapS:V.CLAMP_TO_EDGE,wrapT:V.CLAMP_TO_EDGE})}),this.writeFBO=r({color:a({width:1,height:1,wrapS:V.CLAMP_TO_EDGE,wrapT:V.CLAMP_TO_EDGE})})}},{key:"isLastEnabledPass",value:function(n){for(var r=n+1;r<this.passes.length;r++)if(this.passes[r].isEnabled())return!1;return!0}},{key:"swap",value:function(){var n=this.readFBO;this.readFBO=this.writeFBO,this.writeFBO=n}}]),e}(),M5=Jt(fc.prototype,"rendererService",[T5],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Jt(fc.prototype,"init",[A5],Object.getOwnPropertyDescriptor(fc.prototype,"init"),fc.prototype),fc))||O5),R5,P5;function Tce(e){var t=Ace();return function(){var r=Ee(e),a;if(t){var i=Ee(this).constructor;a=Reflect.construct(r,arguments,i)}else a=r.apply(this,arguments);return Mt(this,a)}}function Ace(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var Oce=(R5=nn(),R5(P5=function(e){Ct(n,e);var t=Tce(n);function n(){return Ae(this,n),t.apply(this,arguments)}return Oe(n,[{key:"getType",value:function(){return Tl.Normal}},{key:"getName",value:function(){return"render"}},{key:"init",value:function(a,i){wu(Ee(n.prototype),"init",this).call(this,a,i)}},{key:"render",value:function(a){var i=this.rendererService,o=i.useFramebuffer,s=i.clear,l=a.multiPassRenderer.getPostProcessor().getReadFBO();o(l,function(){s({color:[0,0,0,0],depth:1,stencil:0,framebuffer:l}),a.multiPassRenderer.setRenderFlag(!1),a.models.forEach(function(u){u.draw({uniforms:a.layerModel.getUninforms()})}),a.multiPassRenderer.setRenderFlag(!0)})}}]),n}(Pv))||P5),I5,L5,N5,ox,F5;function D5(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function B5(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?D5(Object(n),!0).forEach(function(r){m(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):D5(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Mce(e){var t=Rce();return function(){var r=Ee(e),a;if(t){var i=Ee(this).constructor;a=Reflect.construct(r,arguments,i)}else a=r.apply(this,arguments);return Mt(this,a)}}function Rce(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var Pce=`uniform float u_opacity : 1.0;
uniform float u_MixRatio : 0.5;

uniform sampler2D u_Diffuse1;
uniform sampler2D u_Diffuse2;

varying vec2 v_UV;

void main() {
  vec4 texel1 = texture2D(u_Diffuse1, v_UV);
  vec4 texel2 = texture2D(u_Diffuse2, v_UV);
  gl_FragColor = u_opacity * mix(texel1, texel2, u_MixRatio);
}
`,z5=`varying vec2 v_UV;

uniform sampler2D u_Texture;

void main() {
  gl_FragColor = vec4(texture2D(u_Texture, v_UV));
}`,Ice=`attribute vec2 a_Position;

varying vec2 v_UV;

void main() {
  v_UV = 0.5 * (a_Position + 1.0);
  gl_Position = vec4(a_Position, 0., 1.);
}`;function U5(e,t){for(var n=0,r=1/t,a=e;a>0;)n=n+r*(a%t),a=Math.floor(a/t),r=r/t;return n}var Lce=1,Nce=(I5=nn(),L5=ln(ye.IShaderModuleService),I5(N5=(ox=function(e){Ct(n,e);var t=Mce(n);function n(){var r;Ae(this,n);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return r=t.call.apply(t,[this].concat(i)),en(D(r),"shaderModuleService",F5,D(r)),m(D(r),"haltonSequence",[]),m(D(r),"accumulatingId",0),m(D(r),"frame",0),m(D(r),"timer",void 0),m(D(r),"sampleRenderTarget",void 0),m(D(r),"prevRenderTarget",void 0),m(D(r),"outputRenderTarget",void 0),m(D(r),"copyRenderTarget",void 0),m(D(r),"blendModel",void 0),m(D(r),"outputModel",void 0),m(D(r),"copyModel",void 0),r}return Oe(n,[{key:"getType",value:function(){return Tl.Normal}},{key:"getName",value:function(){return"taa"}},{key:"init",value:function(a,i){wu(Ee(n.prototype),"init",this).call(this,a,i);var o=this.rendererService,s=o.createFramebuffer,l=o.createTexture2D;this.sampleRenderTarget=s({color:l({width:1,height:1,wrapS:V.CLAMP_TO_EDGE,wrapT:V.CLAMP_TO_EDGE})}),this.prevRenderTarget=s({color:l({width:1,height:1,wrapS:V.CLAMP_TO_EDGE,wrapT:V.CLAMP_TO_EDGE})}),this.outputRenderTarget=s({color:l({width:1,height:1,wrapS:V.CLAMP_TO_EDGE,wrapT:V.CLAMP_TO_EDGE})}),this.copyRenderTarget=s({color:l({width:1,height:1,wrapS:V.CLAMP_TO_EDGE,wrapT:V.CLAMP_TO_EDGE})});for(var u=0;u<30;u++)this.haltonSequence.push([U5(u,2),U5(u,3)]);this.blendModel=this.createTriangleModel("blend-pass",Pce),this.outputModel=this.createTriangleModel("copy-pass",z5,{blend:{enable:!0,func:{srcRGB:V.ONE,dstRGB:V.ONE_MINUS_SRC_ALPHA,srcAlpha:V.ONE,dstAlpha:V.ONE_MINUS_SRC_ALPHA},equation:{rgb:V.FUNC_ADD,alpha:V.FUNC_ADD}}}),this.copyModel=this.createTriangleModel("copy-pass",z5)}},{key:"render",value:function(a){var i=this,o=this.rendererService,s=o.clear,l=o.getViewportSize,u=o.useFramebuffer,c=l(),f=c.width,d=c.height;this.sampleRenderTarget.resize({width:f,height:d}),this.prevRenderTarget.resize({width:f,height:d}),this.outputRenderTarget.resize({width:f,height:d}),this.copyRenderTarget.resize({width:f,height:d}),this.resetFrame(),this.stopAccumulating();var p=a.multiPassRenderer.getPostProcessor().getReadFBO();u(p,function(){s({color:[0,0,0,0],depth:1,stencil:0,framebuffer:p}),a.multiPassRenderer.setRenderFlag(!1),a.render(),a.multiPassRenderer.setRenderFlag(!0)});var h=function g(v){!i.accumulatingId||v!==i.accumulatingId||i.isFinished()||(i.doRender(a),Hn.requestAnimationFrame(function(){g(v)}))};this.accumulatingId=Lce++,this.timer=Hn.setTimeout(function(){h(i.accumulatingId)},50)}},{key:"doRender",value:function(a){var i=this,o=this.rendererService,s=o.clear,l=o.getViewportSize,u=o.useFramebuffer,c=l(),f=c.width,d=c.height,p=a.getLayerConfig(),h=p.jitterScale,g=h===void 0?1:h,v=this.haltonSequence[this.frame%this.haltonSequence.length];this.cameraService.jitterProjectionMatrix((v[0]*2-1)/f*g,(v[1]*2-1)/d*g),a.multiPassRenderer.setRenderFlag(!1),a.hooks.beforeRender.call(),u(this.sampleRenderTarget,function(){s({color:[0,0,0,0],depth:1,stencil:0,framebuffer:i.sampleRenderTarget}),a.render()}),a.hooks.afterRender.call(),a.multiPassRenderer.setRenderFlag(!0);var b=a.getLayerConfig();u(this.outputRenderTarget,function(){i.blendModel.draw({uniforms:{u_opacity:b.opacity||1,u_MixRatio:i.frame===0?1:.9,u_Diffuse1:i.sampleRenderTarget,u_Diffuse2:i.frame===0?a.multiPassRenderer.getPostProcessor().getReadFBO():i.prevRenderTarget}})}),this.frame===0&&s({color:[0,0,0,0],depth:1,stencil:0,framebuffer:this.copyRenderTarget}),this.frame>=1&&(u(this.copyRenderTarget,function(){i.outputModel.draw({uniforms:{u_Texture:i.outputRenderTarget}})}),u(a.multiPassRenderer.getPostProcessor().getReadFBO(),function(){i.copyModel.draw({uniforms:{u_Texture:i.copyRenderTarget}})}),a.multiPassRenderer.getPostProcessor().render(a));var y=this.prevRenderTarget;this.prevRenderTarget=this.outputRenderTarget,this.outputRenderTarget=y,this.frame++,this.cameraService.clearJitterProjectionMatrix()}},{key:"isFinished",value:function(){return this.frame>=this.haltonSequence.length}},{key:"resetFrame",value:function(){this.frame=0}},{key:"stopAccumulating",value:function(){this.accumulatingId=0,Hn.clearTimeout(this.timer)}},{key:"createTriangleModel",value:function(a,i,o){this.shaderModuleService.registerModule(a,{vs:Ice,fs:i});var s=this.shaderModuleService.getModule(a),l=s.vs,u=s.fs,c=s.uniforms,f=this.rendererService,d=f.createAttribute,p=f.createBuffer,h=f.createModel;return h(B5({vs:l,fs:u,attributes:{a_Position:d({buffer:p({data:[-4,-4,4,-4,0,4],type:V.FLOAT}),size:2})},uniforms:B5({},c),depth:{enable:!1},count:3},o))}}]),n}(Pv),F5=Jt(ox.prototype,"shaderModuleService",[L5],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ox))||N5),ka=new D2;ka.bind(ye.IGlobalConfigService).to(_ie).inSingletonScope();ere(nn(),Si.exports.EventEmitter);ka.bind(ye.IEventEmitter).to(Si.exports.EventEmitter);var Fce=Tre(ka,!1),G2=function(t){var n=Fce.lazyInject(t);return function(r,a,i){n.call(this,r,a),i&&(i.initializer=function(){return r[a]})}},Dce=0;function Bce(){var e=new D2;return e.parent=ka,e.bind(ye.SceneID).toConstantValue("".concat(Dce++)),e.bind(ye.IShaderModuleService).to(ase).inSingletonScope(),e.bind(ye.ILayerService).to(Die).inSingletonScope(),e.bind(ye.ISceneService).to(Zie).inSingletonScope(),e.bind(ye.ICameraService).to(cie).inSingletonScope(),e.bind(ye.ICoordinateSystemService).to(Sie).inSingletonScope(),e.bind(ye.IInteractionService).to(Oie).inSingletonScope(),e.bind(ye.IPickingService).to(Iie).inSingletonScope(),e.bind(ye.IControlService).to(pie).inSingletonScope(),e.bind(ye.IMarkerService).to(hie).inSingletonScope(),e.bind(ye.IIconService).to(Zre).inSingletonScope(),e.bind(ye.IFontService).to(Hre).inSingletonScope(),e.bind(ye.IPopupService).to(mie).inSingletonScope(),e.bind(ye.INormalPass).to(lse).whenTargetNamed("clear"),e.bind(ye.INormalPass).to(hse).whenTargetNamed("pixelPicking"),e.bind(ye.INormalPass).to(Oce).whenTargetNamed("render"),e.bind(ye.INormalPass).to(Nce).whenTargetNamed("taa"),e.bind(ye.IFactoryNormalPass).toFactory(function(t){return function(n){return t.container.getNamed(ye.INormalPass,n)}}),e.bind(ye.IPostProcessingPass).to(ice).whenTargetNamed("copy"),e.bind(ye.IPostProcessingPass).to(zue).whenTargetNamed("bloom"),e.bind(ye.IPostProcessingPass).to(Gue).whenTargetNamed("blurH"),e.bind(ye.IPostProcessingPass).to(Zue).whenTargetNamed("blurV"),e.bind(ye.IPostProcessingPass).to(xce).whenTargetNamed("noise"),e.bind(ye.IPostProcessingPass).to(Sce).whenTargetNamed("sepia"),e.bind(ye.IPostProcessingPass).to(ece).whenTargetNamed("colorHalftone"),e.bind(ye.IPostProcessingPass).to(cce).whenTargetNamed("hexagonalPixelate"),e.bind(ye.IPostProcessingPass).to(mce).whenTargetNamed("ink"),e.bind(ye.IFactoryPostProcessingPass).toFactory(function(t){return function(n){var r=t.container.getNamed(ye.IPostProcessingPass,n);return r.setName(n),r}}),e}function hw(e){var t=new D2;return t.parent=e,t.bind(ye.IStyleAttributeService).to(Gie).inSingletonScope(),t.bind(ye.IMultiPassRenderer).to(fse).inSingletonScope(),t.bind(ye.IPostProcessor).to(Cce).inSingletonScope(),t}var Hi;(function(e){e.normal="normal",e.additive="additive",e.subtractive="subtractive",e.min="min",e.max="max",e.none="none"})(Hi||(Hi={}));var Fn;(function(e){e.LINEAR="linear",e.SEQUENTIAL="sequential",e.POWER="power",e.LOG="log",e.IDENTITY="identity",e.TIME="time",e.QUANTILE="quantile",e.QUANTIZE="quantize",e.THRESHOLD="threshold",e.CAT="cat",e.DIVERGING="diverging"})(Fn||(Fn={}));var el;(function(e){e.CONSTANT="constant",e.VARIABLE="variable"})(el||(el={}));var vn;(function(e){e[e.Attribute=0]="Attribute",e[e.InstancedAttribute=1]="InstancedAttribute",e[e.Uniform=2]="Uniform"})(vn||(vn={}));var $5=["mapload","mapchange","mapAfterFrameChange"],Jl={ProjectionMatrix:"u_ProjectionMatrix",ViewMatrix:"u_ViewMatrix",ViewProjectionMatrix:"u_ViewProjectionMatrix",Zoom:"u_Zoom",ZoomScale:"u_ZoomScale",FocalDistance:"u_FocalDistance",CameraPosition:"u_CameraPosition"},sx=["loaded","maploaded","resize","destroy","dragstart","dragging","dragend","dragcancel"],Al;(function(e){e.TOPRIGHT="topright",e.TOPLEFT="topleft",e.BOTTOMRIGHT="bottomright",e.BOTTOMLEFT="bottomleft",e.TOPCENTER="topcenter",e.BOTTOMCENTER="bottomcenter",e.LEFTCENTER="leftcenter",e.RIGHTCENTER="rightcenter"})(Al||(Al={}));function V5(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function j5(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?V5(Object(n),!0).forEach(function(r){m(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):V5(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function zce(e){var t=Uce();return function(){var r=Ee(e),a;if(t){var i=Ee(this).constructor;a=Reflect.construct(r,arguments,i)}else a=r.apply(this,arguments);return Mt(this,a)}}function Uce(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var $ce=0,Lv=function(e){Ct(n,e);var t=zce(n);function n(r){var a;return Ae(this,n),a=t.call(this),m(D(a),"controlOption",void 0),m(D(a),"container",void 0),m(D(a),"sceneContainer",void 0),m(D(a),"mapsService",void 0),m(D(a),"renderService",void 0),m(D(a),"layerService",void 0),m(D(a),"controlService",void 0),m(D(a),"isShow",void 0),a.controlOption=j5(j5({},a.getDefault()),r||{}),a}return Oe(n,[{key:"getDefault",value:function(){return{position:Al.TOPRIGHT,name:"".concat($ce++)}}},{key:"setPosition",value:function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Al.BOTTOMRIGHT,i=this.controlService;return i&&i.removeControl(this),this.controlOption.position=a,i&&i.addControl(this,this.sceneContainer),this}},{key:"addTo",value:function(a){this.mapsService=a.get(ye.IMapService),this.renderService=a.get(ye.IRendererService),this.layerService=a.get(ye.ILayerService),this.controlService=a.get(ye.IControlService),this.sceneContainer=a,this.isShow=!0,this.container=this.onAdd();var i=this.container,o=this.controlOption.position,s=this.controlService.controlCorners[o];return Mu(i,"l7-control"),o.indexOf("bottom")!==-1?s.insertBefore(i,s.firstChild):s.appendChild(i),this}},{key:"onAdd",value:function(){throw new Error("Method not implemented.")}},{key:"onRemove",value:function(){throw new Error("Method not implemented.")}},{key:"hide",value:function(){var a=this.container;Mu(a,"l7-control-hide"),this.isShow=!1}},{key:"show",value:function(){var a=this.container;Zp(a,"l7-control-hide"),this.isShow=!0}},{key:"remove",value:function(){if(!this.mapsService)return this;mf(this.container),this.onRemove()}},{key:"_refocusOnMap",value:function(a){if(this.mapsService&&a&&a.screenX>0&&a.screenY>0){var i=this.mapsService.getContainer();i!==null&&i.focus()}}}]),n}(Si.exports.EventEmitter);function Vce(e){var t=jce();return function(){var r=Ee(e),a;if(t){var i=Ee(this).constructor;a=Reflect.construct(r,arguments,i)}else a=r.apply(this,arguments);return Mt(this,a)}}function jce(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(function(e){Ct(n,e);var t=Vce(n);function n(r){var a;return Ae(this,n),a=t.call(this,r),m(D(a),"layerControlInputs",void 0),m(D(a),"layers",void 0),m(D(a),"lastZIndex",void 0),m(D(a),"handlingClick",void 0),m(D(a),"layersLink",void 0),m(D(a),"baseLayersList",void 0),m(D(a),"separator",void 0),m(D(a),"overlaysList",void 0),m(D(a),"form",void 0),a.layerControlInputs=[],a.layers=[],a.lastZIndex=0,a.handlingClick=!1,a.initLayers(),Nf(["checkDisabledLayers","onLayerChange","collapse","extend","expand","onInputClick"],D(a)),a}return Oe(n,[{key:"getDefault",value:function(){return{collapsed:!0,position:Al.TOPRIGHT,autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,name:"layers"}}},{key:"onAdd",value:function(){var a=this;return this.initLayout(),this.update(),this.mapsService.on("zoomend",this.checkDisabledLayers),this.layers.forEach(function(i){i.layer.on("remove",a.onLayerChange),i.layer.on("add",a.onLayerChange)}),this.container}},{key:"addVisualLayer",value:function(a,i){return this.addLayer(a,i,!0),this.mapsService?this.update():this}},{key:"expand",value:function(){var a=this.renderService.getViewportSize(),i=a.height;Mu(this.container,"l7-control-layers-expanded"),this.form.style.height="null";var o=i-(this.container.offsetTop+50);return o<this.form.clientHeight?(Mu(this.form,"l7-control-layers-scrollbar"),this.form.style.height=o+"px"):Zp(this.form,"l7-control-layers-scrollbar"),this.checkDisabledLayers(),this}},{key:"collapse",value:function(){return Zp(this.container,"l7-control-layers-expanded"),this}},{key:"onRemove",value:function(){var a=this;!this.mapsService||(this.mapsService.off("click",this.collapse),this.layers.forEach(function(i){i.layer.off("remove",a.onLayerChange),i.layer.off("add",a.onLayerChange)}))}},{key:"initLayout",value:function(){var a="l7-control-layers",i=this.container=fr("div",a),o=this.controlOption.collapsed;i.setAttribute("aria-haspopup","true");var s=this.form=fr("form",a+"-list");o&&(this.mapsService.on("click",this.collapse),i.addEventListener("mouseenter",this.expand),i.addEventListener("mouseleave",this.collapse)),this.layersLink=fr("a",a+"-toggle",i);var l=this.layersLink;l.title="Layers",o||this.expand(),this.baseLayersList=fr("div",a+"-base",s),this.separator=fr("div",a+"-separator",s),this.overlaysList=fr("div",a+"-overlays",s),i.appendChild(s)}},{key:"initLayers",value:function(){var a=this,i=this.controlOption,o=i.baseLayers,s=o===void 0?{}:o,l=i.overlayers,u=l===void 0?{}:l;Object.keys(s).forEach(function(c,f){a.addLayer(s[c],c,!1)}),Object.keys(u).forEach(function(c,f){a.addLayer(u[c],c,!0)})}},{key:"update",value:function(){if(!this.container)return this;l6(this.baseLayersList),l6(this.overlaysList),this.layerControlInputs=[];var a,i,o,s,l=0;for(o=0;o<this.layers.length;o++)s=this.layers[o],this.addItem(s),i=i||s.overlay,a=a||!s.overlay,l+=s.overlay?0:1;return this.controlOption.hideSingleBase&&(a=a&&l>1,this.baseLayersList.style.display=a?"":"none"),this.separator.style.display=i&&a?"":"none",this}},{key:"checkDisabledLayers",value:function(){for(var a=this.layerControlInputs,i,o,s=this.mapsService.getZoom(),l=a.length-1;l>=0;l--)if(i=a[l],o=this.layerService.getLayer(i.layerId),o&&o.inited){var u=o.getMinZoom(),c=o.getMaxZoom();i.disabled=s<u||s>c}}},{key:"addLayer",value:function(a,i,o){this.mapsService&&(a.on("add",this.onLayerChange),a.on("remove",this.onLayerChange)),this.layers.push({layer:a,name:i,overlay:o});var s=this.controlOption,l=s.sortLayers,u=s.sortFunction,c=s.autoZIndex;l&&this.layers.sort(function(f,d){return u(f.layer,d.layer,f.name,d.name)}),c&&a.setZIndex&&(this.lastZIndex++,a.setZIndex(this.lastZIndex)),this.expandIfNotCollapsed()}},{key:"expandIfNotCollapsed",value:function(){return this.mapsService&&!this.controlOption.collapsed&&this.expand(),this}},{key:"onLayerChange",value:function(a){this.handlingClick||this.update();var i=this.layerService.getLayer(a.target.layerId),o=i!=null&&i.overlay?a.type==="add"?"overlayadd":"overlayremove":a.type==="add"?"baselayerchange":null;o&&this.emit(o,i)}},{key:"createRadioElement",value:function(a,i){var o='<input type="radio" class="l7-control-layers-selector" name="'+a+'"'+(i?' checked="checked"':"")+"/>",s=document.createElement("div");return s.innerHTML=o,s.firstChild}},{key:"addItem",value:function(a){var i=document.createElement("label"),o=this.layerService.getLayer(a.layer.id),s=o&&o.inited&&a.layer.isVisible(),l;a.overlay?(l=document.createElement("input"),l.type="checkbox",l.className="l7-control-layers-selector",l.defaultChecked=s):l=this.createRadioElement("l7-base-layers",s),this.layerControlInputs.push(l),l.layerId=a.layer.id,l.addEventListener("click",this.onInputClick);var u=document.createElement("span");u.innerHTML=" "+a.name;var c=document.createElement("div");i.appendChild(c),c.appendChild(l),c.appendChild(u);var f=a.overlay?this.overlaysList:this.baseLayersList;return f.appendChild(i),this.checkDisabledLayers(),i}},{key:"onInputClick",value:function(){var a=this.layerControlInputs,i,o,s=[],l=[];this.handlingClick=!0;for(var u=a.length-1;u>=0;u--)i=a[u],o=this.layerService.getLayer(i.layerId),i.checked?s.push(o):i.checked||l.push(o);l.forEach(function(c){c.hide()}),s.forEach(function(c){c.show()}),this.handlingClick=!1}}]),n})(Lv);function Gce(e){var t=Hce();return function(){var r=Ee(e),a;if(t){var i=Ee(this).constructor;a=Reflect.construct(r,arguments,i)}else a=r.apply(this,arguments);return Mt(this,a)}}function Hce(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var Wce=function(e){Ct(n,e);var t=Gce(n);function n(){return Ae(this,n),t.apply(this,arguments)}return Oe(n,[{key:"getDefault",value:function(){return{position:Al.BOTTOMLEFT,name:"logo"}}},{key:"onAdd",value:function(){var a="l7-control-logo",i=fr("div",a),o=fr("a","l7-ctrl-logo");return o.target="_blank",o.rel="noopener nofollow",o.href="https://antv.alipay.com/l7",o.setAttribute("aria-label","AntV logo"),o.setAttribute("rel","noopener nofollow"),i.appendChild(o),i}},{key:"onRemove",value:function(){return null}}]),n}(Lv);function Xce(e){var t=Yce();return function(){var r=Ee(e),a;if(t){var i=Ee(this).constructor;a=Reflect.construct(r,arguments,i)}else a=r.apply(this,arguments);return Mt(this,a)}}function Yce(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(function(e){Ct(n,e);var t=Xce(n);function n(r){var a;return Ae(this,n),a=t.call(this,r),m(D(a),"mScale",void 0),m(D(a),"iScale",void 0),Nf(["update"],D(a)),a}return Oe(n,[{key:"getDefault",value:function(){return{position:Al.BOTTOMLEFT,maxWidth:100,metric:!0,updateWhenIdle:!1,imperial:!1,name:"scale"}}},{key:"onAdd",value:function(){var a="l7-control-scale",i=fr("div",a);this.addScales(a+"-line",i);var o=this.controlOption.updateWhenIdle;return this.mapsService.on(o?"moveend":"mapmove",this.update),this.mapsService.on(o?"zoomend":"zoomchange",this.update),this.update(),i}},{key:"onRemove",value:function(){var a=this.controlOption.updateWhenIdle;this.mapsService.off(a?"zoomend":"zoomchange",this.update),this.mapsService.off(a?"moveend":"mapmove",this.update)}},{key:"update",value:function(){var a=this.mapsService,i=this.controlOption.maxWidth,o=a.getSize()[1]/2,s=a.containerToLngLat([0,o]),l=a.containerToLngLat([i,o]),u=uG([s.lng,s.lat],[l.lng,l.lat]);this.updateScales(u)}},{key:"updateScales",value:function(a){var i=this.controlOption,o=i.metric,s=i.imperial;o&&a&&this.updateMetric(a),s&&a&&this.updateImperial(a)}},{key:"updateMetric",value:function(a){var i=this.getRoundNum(a),o=i<1e3?i+" m":i/1e3+" km";this.updateScale(this.mScale,o,i/a)}},{key:"updateImperial",value:function(a){var i=a*3.2808399,o,s,l;i>5280?(o=i/5280,s=this.getRoundNum(o),this.updateScale(this.iScale,s+" mi",s/o)):(l=this.getRoundNum(i),this.updateScale(this.iScale,l+" ft",l/i))}},{key:"updateScale",value:function(a,i,o){var s=this.controlOption.maxWidth;a.style.width=Math.round(s*o)+"px",a.innerHTML=i}},{key:"getRoundNum",value:function(a){var i=Math.pow(10,(Math.floor(a)+"").length-1),o=a/i;return o=o>=10?10:o>=5?5:o>=3?3:o>=2?2:1,i*o}},{key:"addScales",value:function(a,i){var o=this.controlOption,s=o.metric,l=o.imperial;s&&(this.mScale=fr("div",a,i)),l&&(this.iScale=fr("div",a,i))}}]),n})(Lv);function Zce(e){var t=qce();return function(){var r=Ee(e),a;if(t){var i=Ee(this).constructor;a=Reflect.construct(r,arguments,i)}else a=r.apply(this,arguments);return Mt(this,a)}}function qce(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(function(e){Ct(n,e);var t=Zce(n);function n(r){var a;return Ae(this,n),a=t.call(this,r),m(D(a),"disabled",void 0),m(D(a),"zoomInButton",void 0),m(D(a),"zoomOutButton",void 0),Nf(["updateDisabled","zoomIn","zoomOut"],D(a)),a}return Oe(n,[{key:"getDefault",value:function(){return{position:Al.TOPLEFT,zoomInText:"+",zoomInTitle:"Zoom in",zoomOutText:"&#x2212;",zoomOutTitle:"Zoom out",name:"zoom"}}},{key:"onAdd",value:function(){var a="l7-control-zoom",i=fr("div",a+" l7-bar");return this.zoomInButton=this.createButton(this.controlOption.zoomInText,this.controlOption.zoomInTitle,a+"-in",i,this.zoomIn),this.zoomOutButton=this.createButton(this.controlOption.zoomOutText,this.controlOption.zoomOutTitle,a+"-out",i,this.zoomOut),this.mapsService.on("zoomend",this.updateDisabled),this.mapsService.on("zoomchange",this.updateDisabled),this.updateDisabled(),i}},{key:"onRemove",value:function(){this.mapsService.off("zoomend",this.updateDisabled),this.mapsService.off("zoomchange",this.updateDisabled)}},{key:"disable",value:function(){return this.disabled=!0,this.updateDisabled(),this}},{key:"enable",value:function(){return this.disabled=!1,this.updateDisabled(),this}},{key:"zoomIn",value:function(){!this.disabled&&this.mapsService.getZoom()<this.mapsService.getMaxZoom()&&this.mapsService.zoomIn()}},{key:"zoomOut",value:function(){!this.disabled&&this.mapsService.getZoom()>this.mapsService.getMinZoom()&&this.mapsService.zoomOut()}},{key:"createButton",value:function(a,i,o,s,l){var u=fr("a",o,s);return u.innerHTML=a,u.title=i,u.href="javascript:void(0)",u.addEventListener("click",l),u}},{key:"updateDisabled",value:function(){var a=this.mapsService,i="l7-disabled";Zp(this.zoomInButton,i),Zp(this.zoomOutButton,i),(this.disabled||a.getZoom()<=a.getMinZoom())&&Mu(this.zoomOutButton,i),(this.disabled||a.getZoom()>=a.getMaxZoom())&&Mu(this.zoomInButton,i)}}]),n})(Lv);function G5(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function H5(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?G5(Object(n),!0).forEach(function(r){m(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):G5(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Kce(e){var t=Qce();return function(){var r=Ee(e),a;if(t){var i=Ee(this).constructor;a=Reflect.construct(r,arguments,i)}else a=r.apply(this,arguments);return Mt(this,a)}}function Qce(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var Jce=function(e){Ct(n,e);var t=Kce(n);function n(r){var a;return Ae(this,n),a=t.call(this),m(D(a),"markerOption",void 0),m(D(a),"defaultMarker",void 0),m(D(a),"popup",void 0),m(D(a),"mapsService",void 0),m(D(a),"sceneSerive",void 0),m(D(a),"lngLat",void 0),m(D(a),"scene",void 0),m(D(a),"added",!1),m(D(a),"eventHandle",function(i){a.emit(i.type,{target:i,data:a.markerOption.extData,lngLat:a.lngLat})}),a.markerOption=H5(H5({},a.getDefault()),r),Nf(["update","onMove","onUp","addDragHandler","onMapClick"],D(a)),a.init(),a}return Oe(n,[{key:"getDefault",value:function(){return{element:void 0,anchor:yg.BOTTOM,offsets:[0,0],color:"#5B8FF9",draggable:!1}}},{key:"addTo",value:function(a){this.scene=a,this.mapsService=a.get(ye.IMapService),this.sceneSerive=a.get(ye.ISceneService);var i=this.markerOption,o=i.element;return i.draggable,this.mapsService.getMarkerContainer().appendChild(o),this.registerMarkerEvent(o),this.mapsService.on("camerachange",this.update),this.mapsService.on("viewchange",this.update),this.update(),this.added=!0,this.emit("added"),this}},{key:"remove",value:function(){this.mapsService&&(this.mapsService.off("click",this.onMapClick),this.mapsService.off("move",this.update),this.mapsService.off("moveend",this.update),this.mapsService.off("mousedown",this.addDragHandler),this.mapsService.off("touchstart",this.addDragHandler),this.mapsService.off("mouseup",this.onUp),this.mapsService.off("touchend",this.onUp)),this.unRegisterMarkerEvent(),this.removeAllListeners();var a=this.markerOption.element;return a&&mf(a),this.popup&&this.popup.remove(),this}},{key:"setLnglat",value:function(a){return this.lngLat=a,Array.isArray(a)&&(this.lngLat={lng:a[0],lat:a[1]}),this.popup&&this.popup.setLnglat(this.lngLat),this.update(),this}},{key:"getLnglat",value:function(){return this.lngLat}},{key:"getElement",value:function(){return this.markerOption.element}},{key:"setElement",value:function(a){var i=this;if(!this.added)return this.once("added",function(){i.setElement(a)}),this;var o=this.markerOption.element;return o&&mf(o),this.markerOption.element=a,this.init(),this.mapsService.getMarkerContainer().appendChild(a),this.registerMarkerEvent(a),this.update(),this}},{key:"openPopup",value:function(){var a=this;if(!this.added)return this.once("added",function(){a.openPopup()}),this;var i=this.popup;return i?(i.isOpen()||i.addTo(this.scene),this):this}},{key:"closePopup",value:function(){var a=this;this.added||this.once("added",function(){a.closePopup()});var i=this.popup;return i&&i.remove(),this}},{key:"setPopup",value:function(a){return this.popup=a,this.lngLat&&this.popup.setLnglat(this.lngLat),this}},{key:"togglePopup",value:function(){var a=this.popup;if(a)a.isOpen()?a.remove():a.addTo(this.scene);else return this;return this}},{key:"getPopup",value:function(){return this.popup}},{key:"getOffset",value:function(){return this.markerOption.offsets}},{key:"setDraggable",value:function(a){throw new Error("Method not implemented.")}},{key:"isDraggable",value:function(){return this.markerOption.draggable}},{key:"getExtData",value:function(){return this.markerOption.extData}},{key:"setExtData",value:function(a){this.markerOption.extData=a}},{key:"update",value:function(){if(!!this.mapsService){var a=this.markerOption,i=a.element,o=a.anchor;this.updatePosition(),qI(i,"".concat(xg[o]))}}},{key:"onMapClick",value:function(a){var i=this.markerOption.element;this.popup&&i&&this.togglePopup()}},{key:"updatePosition",value:function(){if(!!this.mapsService){var a=this.markerOption,i=a.element,o=a.offsets,s=this.lngLat,l=s.lng,u=s.lat,c=this.mapsService.getBounds(),f=this.mapsService.lngLatToContainer([l,u]);if(i){i.style.display="block",i.style.whiteSpace="nowrap";var d=this.mapsService.getContainer(),p=0,h=0;if(d&&(p=d.scrollWidth,h=d.scrollHeight),Math.abs(c[0][0])>180||Math.abs(c[1][0])>180){if(f.x>p){var g=this.mapsService.lngLatToContainer([l-360,u]);f.x=g.x}if(f.x<0){var v=this.mapsService.lngLatToContainer([l+360,u]);f.x=v.x}}(f.x>p||f.x<0||f.y>h||f.y<0)&&(i.style.display="none"),i.style.left=f.x+o[0]+"px",i.style.top=f.y-o[1]+"px"}}}},{key:"init",value:function(){var a=this,i=this.markerOption.element,o=this.markerOption,s=o.color,l=o.anchor;if(!i){this.defaultMarker=!0,i=fr("div"),this.markerOption.element=i;var u=document.createElementNS("http://www.w3.org/2000/svg","svg");u.setAttributeNS(null,"display","block"),u.setAttributeNS(null,"height","48px"),u.setAttributeNS(null,"width","48px"),u.setAttributeNS(null,"viewBox","0 0 1024 1024");var c=document.createElementNS("http://www.w3.org/2000/svg","path");c.setAttributeNS(null,"d","M512 490.666667C453.12 490.666667 405.333333 442.88 405.333333 384 405.333333 325.12 453.12 277.333333 512 277.333333 570.88 277.333333 618.666667 325.12 618.666667 384 618.666667 442.88 570.88 490.666667 512 490.666667M512 85.333333C346.88 85.333333 213.333333 218.88 213.333333 384 213.333333 608 512 938.666667 512 938.666667 512 938.666667 810.666667 608 810.666667 384 810.666667 218.88 677.12 85.333333 512 85.333333Z"),c.setAttributeNS(null,"fill",s),u.appendChild(c),i.appendChild(u)}Mu(i,"l7-marker"),Object.keys(this.markerOption.style||{}).forEach(function(f){var d,p,h=((d=a.markerOption)===null||d===void 0?void 0:d.style)&&((p=a.markerOption)===null||p===void 0?void 0:p.style[f]);i&&(i.style[f]=h)}),i.addEventListener("click",function(f){a.onMapClick(f)}),i.addEventListener("click",this.eventHandle),s7(i,l,"marker")}},{key:"registerMarkerEvent",value:function(a){a.addEventListener("mousemove",this.eventHandle),a.addEventListener("click",this.eventHandle),a.addEventListener("mousedown",this.eventHandle),a.addEventListener("mouseup",this.eventHandle),a.addEventListener("dblclick",this.eventHandle),a.addEventListener("contextmenu",this.eventHandle),a.addEventListener("mouseover",this.eventHandle),a.addEventListener("mouseout",this.eventHandle)}},{key:"unRegisterMarkerEvent",value:function(){var a=this.getElement();a.removeEventListener("mousemove",this.eventHandle),a.removeEventListener("click",this.eventHandle),a.removeEventListener("mousedown",this.eventHandle),a.removeEventListener("mouseup",this.eventHandle),a.removeEventListener("dblclick",this.eventHandle),a.removeEventListener("contextmenu",this.eventHandle),a.removeEventListener("mouseover",this.eventHandle),a.removeEventListener("mouseout",this.eventHandle)}},{key:"addDragHandler",value:function(a){throw new Error("Method not implemented.")}},{key:"onUp",value:function(a){throw new Error("Method not implemented.")}}]),n}(Si.exports.EventEmitter);function W5(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function X5(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?W5(Object(n),!0).forEach(function(r){m(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):W5(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function efe(e){var t=tfe();return function(){var r=Ee(e),a;if(t){var i=Ee(this).constructor;a=Reflect.construct(r,arguments,i)}else a=r.apply(this,arguments);return Mt(this,a)}}function tfe(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(function(e){Ct(n,e);var t=efe(n);function n(r){var a,i;return Ae(this,n),i=t.call(this),m(D(i),"markers",[]),m(D(i),"markerLayerOption",void 0),m(D(i),"clusterIndex",void 0),m(D(i),"points",[]),m(D(i),"clusterMarkers",[]),m(D(i),"mapsService",void 0),m(D(i),"scene",void 0),m(D(i),"zoom",void 0),m(D(i),"bbox",void 0),i.markerLayerOption=ZL(i.getDefault(),r),Nf(["update"],D(i)),i.zoom=((a=i.markerLayerOption.clusterOption)===null||a===void 0?void 0:a.zoom)||-99,i}return Oe(n,[{key:"getDefault",value:function(){return{cluster:!1,clusterOption:{radius:80,maxZoom:20,minZoom:0,zoom:-99,style:{},className:""}}}},{key:"addTo",value:function(a){return this.scene=a,this.mapsService=a.get(ye.IMapService),this.markerLayerOption.cluster&&(this.initCluster(),this.update(),this.mapsService.on("camerachange",this.update),this.mapsService.on("viewchange",this.update)),this.addMarkers(),this}},{key:"addMarker",value:function(a){var i=this.markerLayerOption.cluster;if(i&&(this.addPoint(a,this.markers.length),this.mapsService)){var o=this.mapsService.getZoom(),s=this.mapsService.getBounds();this.bbox=qp(s,.5),this.zoom=Math.floor(o),this.getClusterMarker(this.bbox,this.zoom)}this.markers.push(a)}},{key:"removeMarker",value:function(a){this.markers.indexOf(a);var i=this.markers.indexOf(a);i>-1&&this.markers.splice(i,1)}},{key:"hide",value:function(){this.markers.map(function(a){a.getElement().style.opacity="0"}),this.clusterMarkers.map(function(a){a.getElement().style.opacity="0"})}},{key:"show",value:function(){this.markers.map(function(a){a.getElement().style.opacity="1"}),this.clusterMarkers.map(function(a){a.getElement().style.opacity="1"})}},{key:"getMarkers",value:function(){var a=this.markerLayerOption.cluster;return a?this.clusterMarkers:this.markers}},{key:"addMarkers",value:function(){var a=this;this.getMarkers().forEach(function(i){i.addTo(a.scene)})}},{key:"clear",value:function(){this.markers.forEach(function(a){a.remove()}),this.clusterMarkers.forEach(function(a){a.remove()}),this.mapsService.off("camerachange",this.update),this.markers=[],this.clusterMarkers=[]}},{key:"destroy",value:function(){this.clear(),this.removeAllListeners()}},{key:"addPoint",value:function(a,i){var o=a.getLnglat(),s=o.lng,l=o.lat,u={geometry:{type:"Point",coordinates:[s,l]},properties:X5(X5({},a.getExtData()),{},{marker_id:i})};this.points.push(u),this.clusterIndex&&this.clusterIndex.load(this.points)}},{key:"initCluster",value:function(){if(!!this.markerLayerOption.cluster){var a=this.markerLayerOption.clusterOption,i=a.radius,o=a.minZoom,s=o===void 0?0:o,l=a.maxZoom;this.clusterIndex=new aL({radius:i,minZoom:s,maxZoom:l}),this.clusterIndex.load(this.points)}}},{key:"getClusterMarker",value:function(a,i){var o=this,s=a[0].concat(a[1]),l=this.clusterIndex.getClusters(s,i);this.clusterMarkers.forEach(function(u){u.remove()}),this.clusterMarkers=[],l.forEach(function(u){var c,f=o.markerLayerOption.clusterOption,d=f.field,p=f.method;if(u.properties&&(c=u.properties)!==null&&c!==void 0&&c.cluster_id){var h,g=o.getLeaves((h=u.properties)===null||h===void 0?void 0:h.cluster_id);if(u.properties.clusterData=g,d&&p){var v=g==null?void 0:g.map(function(T){var C=m({},d,T.properties[d]);return C}),b=d2(v,d),y=Xj(p,b),x="point_"+p;u.properties[x]=y.toFixed(2)}}var E=o.clusterMarker(u);o.clusterMarkers.push(E),E.addTo(o.scene)})}},{key:"getLeaves",value:function(a){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1/0,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;return a?this.clusterIndex.getLeaves(a,i,o):null}},{key:"clusterMarker",value:function(a){var i=this.markerLayerOption.clusterOption,o=i,s=o.element,l=s===void 0?this.generateElement.bind(this):s,u=new Jce({element:l(a)}).setLnglat({lng:a.geometry.coordinates[0],lat:a.geometry.coordinates[1]});return u}},{key:"normalMarker",value:function(a){var i=a.properties.marker_id;return this.markers[i]}},{key:"update",value:function(){if(!!this.mapsService){var a=this.mapsService.getZoom(),i=this.mapsService.getBounds();(!this.bbox||Math.abs(a-this.zoom)>=1||!h2(this.bbox,i))&&(this.bbox=qp(i,.5),this.zoom=Math.floor(a),this.getClusterMarker(this.bbox,this.zoom))}}},{key:"generateElement",value:function(a){var i=fr("div","l7-marker-cluster"),o=fr("div","",i),s=fr("span","",o),l=this.markerLayerOption.clusterOption,u=l.field,c=l.method;a.properties.point_count=a.properties.point_count||1;var f=u&&c?a.properties["point_"+c]||a.properties[u]:a.properties.point_count;return s.textContent=f,i}}]),n})(Si.exports.EventEmitter);function Y5(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Z5(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Y5(Object(n),!0).forEach(function(r){m(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Y5(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function nfe(e){var t=rfe();return function(){var r=Ee(e),a;if(t){var i=Ee(this).constructor;a=Reflect.construct(r,arguments,i)}else a=r.apply(this,arguments);return Mt(this,a)}}function rfe(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}(function(e){Ct(n,e);var t=nfe(n);function n(r){var a;return Ae(this,n),a=t.call(this),m(D(a),"popupOption",void 0),m(D(a),"mapsService",void 0),m(D(a),"sceneSerive",void 0),m(D(a),"lngLat",void 0),m(D(a),"content",void 0),m(D(a),"closeButton",void 0),m(D(a),"timeoutInstance",void 0),m(D(a),"container",void 0),m(D(a),"tip",void 0),m(D(a),"scene",void 0),a.popupOption=Z5(Z5({},a.getdefault()),r),Nf(["update","onClickClose","remove"],D(a)),a}return Oe(n,[{key:"addTo",value:function(a){var i=this;return this.mapsService=a.get(ye.IMapService),this.sceneSerive=a.get(ye.ISceneService),this.mapsService.on("camerachange",this.update),this.mapsService.on("viewchange",this.update),this.scene=a,this.update(),this.popupOption.closeOnClick&&(this.timeoutInstance=setTimeout(function(){i.mapsService.on("click",i.onClickClose)},30)),this.emit("open"),this}},{key:"close",value:function(){this.remove()}},{key:"open",value:function(){this.addTo(this.scene)}},{key:"setHTML",value:function(a){var i=window.document.createDocumentFragment(),o=window.document.createElement("body"),s;for(o.innerHTML=a;s=o.firstChild,!!s;)i.appendChild(s);return this.setDOMContent(i)}},{key:"setLnglat",value:function(a){return this.lngLat=a,Array.isArray(a)&&(this.lngLat={lng:a[0],lat:a[1]}),this.mapsService&&(this.mapsService.on("camerachange",this.update),this.mapsService.on("viewchange",this.update)),this.update(),this}},{key:"getLnglat",value:function(){return this.lngLat}},{key:"setText",value:function(a){return this.setDOMContent(window.document.createTextNode(a))}},{key:"setMaxWidth",value:function(a){return this.popupOption.maxWidth=a,this.update(),this}},{key:"setDOMContent",value:function(a){return this.createContent(),this.content.appendChild(a),this.update(),this}},{key:"remove",value:function(){return this.content&&this.removeDom(this.content),this.container&&(this.removeDom(this.container),delete this.container),this.mapsService&&(this.mapsService.off("camerachange",this.update),this.mapsService.off("viewchange",this.update),this.mapsService.off("click",this.onClickClose),delete this.mapsService),clearTimeout(this.timeoutInstance),this.emit("close"),this}},{key:"isOpen",value:function(){return!!this.mapsService}},{key:"createContent",value:function(){this.content&&mf(this.content),this.content=fr("div","l7-popup-content",this.container),this.popupOption.closeButton&&(this.closeButton=fr("button","l7-popup-close-button",this.content),this.popupOption.closeButtonOffsets&&(this.closeButton.style.right=this.popupOption.closeButtonOffsets[0]+"px",this.closeButton.style.top=this.popupOption.closeButtonOffsets[1]+"px"),this.closeButton.setAttribute("aria-label","Close popup"),this.closeButton.innerHTML="&#215;",this.closeButton.addEventListener("click",this.onClickClose))}},{key:"creatDom",value:function(a,i,o){var s=window.document.createElement(a);return i!==void 0&&(s.className=i),o&&o.appendChild(s),s}},{key:"removeDom",value:function(a){a.parentNode&&a.parentNode.removeChild(a)}},{key:"getdefault",value:function(){return{closeButton:!0,closeOnClick:!0,maxWidth:"240px",offsets:[0,0],anchor:yg.BOTTOM,className:"",stopPropagation:!0}}},{key:"onClickClose",value:function(a){a.stopPropagation&&a.stopPropagation(),this.remove()}},{key:"update",value:function(){var a=this,i=this.lngLat,o=this.popupOption,s=o.className,l=o.maxWidth,u=o.anchor;if(!(!this.mapsService||!i||!this.content)){var c=this.mapsService.getMarkerContainer();if(!this.container&&c){this.container=this.creatDom("div","l7-popup",c),this.tip=this.creatDom("div","l7-popup-tip",this.container),this.container.appendChild(this.content),s&&s.split(" ").forEach(function(d){return a.container.classList.add(d)});var f=this.popupOption.stopPropagation;f&&["mousemove","mousedown","mouseup","click","dblclick"].forEach(function(d){a.container.addEventListener(d,function(p){p.stopPropagation()})}),this.container.style.whiteSpace="nowrap"}l&&this.container.style.maxWidth!==l&&(this.container.style.maxWidth=l),this.updatePosition(),qI(this.container,"".concat(xg[u])),s7(this.container,u,"popup")}}},{key:"updatePosition",value:function(){if(!!this.mapsService){var a=this.lngLat,i=a.lng,o=a.lat,s=this.popupOption.offsets,l=this.mapsService.lngLatToContainer([i,o]);this.container.style.left=l.x+s[0]+"px",this.container.style.top=l.y-s[1]+"px"}}}]),n})(Si.exports.EventEmitter);function afe(e,t){var n=typeof my!="undefined"&&!!my&&typeof my.showToast=="function"&&my.isFRM!==!0,r=typeof wx!="undefined"&&wx!==null&&(typeof wx.request!="undefined"||typeof wx.miniProgram!="undefined");if(!(n||r)&&(t||(t=document),!!t)){var a=t.head||t.getElementsByTagName("head")[0];if(!a){a=t.createElement("head");var i=t.body||t.getElementsByTagName("body")[0];i?i.parentNode.insertBefore(a,i):t.documentElement.appendChild(a)}var o=t.createElement("style");return o.type="text/css",o.styleSheet?o.styleSheet.cssText=e:o.appendChild(t.createTextNode(e)),a.appendChild(o),o}}afe(`.l7-marker-container {
  width: 100%;
  height: 100%;
  overflow: hidden;
  position: absolute;
}

.l7-marker {
  position: absolute !important;
  top: 0;
  left: 0;
  z-index: 5;
  cursor: pointer;
}

.l7-marker-cluster {
  background-clip: padding-box;
  border-radius: 20px;
  background-color: rgba(181, 226, 140, 0.6);
  width: 40px;
  height: 40px;
}
.l7-marker-cluster div {
  width: 30px;
  height: 30px;
  margin-left: 5px;
  margin-top: 5px;
  text-align: center;
  border-radius: 15px;
  font: 12px 'Helvetica Neue', Arial, Helvetica, sans-serif;
  background-color: rgba(110, 204, 57, 0.6);
}
.l7-marker-cluster span {
  line-height: 30px;
}

.l7-popup-anchor-bottom,
.l7-popup-anchor-bottom-left,
.l7-popup-anchor-bottom-right {
  -webkit-box-orient: vertical;
  -webkit-box-direction: reverse;
      -ms-flex-direction: column-reverse;
          flex-direction: column-reverse;
}

.l7-popup-close-button {
  position: absolute;
  right: 0;
  top: 0;
  border: 0;
  border-radius: 0 3px 0 0;
  cursor: pointer;
  background-color: transparent;
}

.l7-popup-close-button:hover {
  background-color: rgba(0, 0, 0, 0.05);
}

.l7-popup-content {
  position: relative;
  background: #fff;
  border-radius: 3px;
  -webkit-box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
          box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
  padding: 10px 10px 15px;
  pointer-events: auto;
}

/* layers control */

.l7-control-layers {
  -webkit-box-shadow: 0 1px 5px rgba(0, 0, 0, 0.4);
          box-shadow: 0 1px 5px rgba(0, 0, 0, 0.4);
  background: #fff;
  border-radius: 5px;
}
.l7-popup-anchor-top,
.l7-popup-anchor-top-left,
.l7-popup-anchor-top-right {
  -webkit-box-orient: vertical;
  -webkit-box-direction: normal;
      -ms-flex-direction: column;
          flex-direction: column;
}

.l7-popup-anchor-left {
  -webkit-box-orient: horizontal;
  -webkit-box-direction: normal;
      -ms-flex-direction: row;
          flex-direction: row;
}

.l7-popup-anchor-right {
  -webkit-box-orient: horizontal;
  -webkit-box-direction: reverse;
      -ms-flex-direction: row-reverse;
          flex-direction: row-reverse;
}
.l7-popup {
  position: absolute;
  top: 0;
  left: 0;
  display: -webkit-box;
  display: -ms-flexbox;
  display: flex;
  will-change: transform;
  pointer-events: none;
  z-index: 5;
}
.l7-popup-tip {
  width: 0;
  height: 0;
  border: 10px solid transparent;
  z-index: 1;
}
.l7-popup-anchor-top .l7-popup-tip {
  -webkit-align-self: center;
  -ms-flex-item-align: center;
      align-self: center;
  border-top: none;
  border-bottom-color: #fff;
}

.l7-popup-anchor-top-left .l7-popup-tip {
  -webkit-align-self: flex-start;
  -ms-flex-item-align: start;
      align-self: flex-start;
  border-top: none;
  border-left: none;
  border-bottom-color: #fff;
}

.l7-popup-anchor-top-right .l7-popup-tip {
  -webkit-align-self: flex-end;
  -ms-flex-item-align: end;
      align-self: flex-end;
  border-top: none;
  border-right: none;
  border-bottom-color: #fff;
}

.l7-popup-anchor-bottom .l7-popup-tip {
  -webkit-align-self: center;
  -ms-flex-item-align: center;
      align-self: center;
  border-bottom: none;
  border-top-color: #fff;
}

.l7-popup-anchor-bottom-left .l7-popup-tip {
  -webkit-align-self: flex-start;
  -ms-flex-item-align: start;
      align-self: flex-start;
  border-bottom: none;
  border-left: none;
  border-top-color: #fff;
}

.l7-popup-anchor-bottom-right .l7-popup-tip {
  -webkit-align-self: flex-end;
  -ms-flex-item-align: end;
      align-self: flex-end;
  border-bottom: none;
  border-right: none;
  border-top-color: #fff;
}

.l7-popup-anchor-left .l7-popup-tip {
  -webkit-align-self: center;
  -ms-flex-item-align: center;
      align-self: center;
  border-left: none;
  border-right-color: #fff;
}

.l7-popup-anchor-right .l7-popup-tip {
  -webkit-align-self: center;
  -ms-flex-item-align: center;
      align-self: center;
  border-right: none;
  border-left-color: #fff;
}

.l7-popup-close-button {
  position: absolute;
  right: 0;
  top: 0;
  border: 0;
  padding: 0;
  font-size: 25px;
  line-height: 20px;
  border-radius: 0 3px 0 0;
  cursor: pointer;
  background-color: transparent;
}

.l7-popup-close-button:hover {
  background-color: rgba(0, 0, 0, 0.05);
}

.l7-popup-content {
  position: relative;
  background: #fff;
  border-radius: 3px;
  -webkit-box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
          box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
  padding: 10px 10px 15px;
  pointer-events: auto;
}

.l7-popup-anchor-top-left .l7-popup-content {
  border-top-left-radius: 0;
}

.l7-popup-anchor-top-right .l7-popup-content {
  border-top-right-radius: 0;
}

.l7-popup-anchor-bottom-left .l7-popup-content {
  border-bottom-left-radius: 0;
}

.l7-popup-anchor-bottom-right .l7-popup-content {
  border-bottom-right-radius: 0;
}

.l7-popup-track-pointer {
  display: none;
}

.l7-popup-track-pointer * {
  pointer-events: none;
  -webkit-user-select: none;
     -moz-user-select: none;
      -ms-user-select: none;
          user-select: none;
}

.l7-map:hover .l7-popup-track-pointer {
  display: -webkit-box;
  display: -ms-flexbox;
  display: flex;
}

.l7-map:active .l7-popup-track-pointer {
  display: none;
}

.l7-popup-close-button:hover {
  background-color: rgba(0, 0, 0, 0.05);
}

.l7-popup-content {
  position: relative;
  background: #fff;
  border-radius: 3px;
  -webkit-box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
          box-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
  padding: 10px 10px 15px;
  pointer-events: auto;
}

/* general toolbar styles */

.l7-bar {
  -webkit-box-shadow: 0 0 1px rgba(0, 0, 0, 0.3);
          box-shadow: 0 0 1px rgba(0, 0, 0, 0.3);
  border-radius: 4px;
}
.l7-bar a,
.l7-bar a:hover {
  background-color: #fff;
  width: 30px;
  height: 30px;
  font-size: 20px;
  display: block;
  text-align: center;
  text-decoration: none;
  color: #8e9dab;
}
.l7-bar a,
.l7-control-layers-toggle {
  background-position: 50% 50%;
  background-repeat: no-repeat;
  display: block;
}
.l7-bar a:hover {
  background-color: #f4f4f4;
}
.l7-bar a:first-child {
  border-top-left-radius: 2px;
  border-top-right-radius: 2px;
}
.l7-bar a:last-child {
  border-bottom-left-radius: 2px;
  border-bottom-right-radius: 2px;
  border-bottom: none;
}
.l7-bar a.l7-disabled {
  cursor: default;
  background-color: #f4f4f4;
  color: #bbb;
}

/* control positioning */

.l7-control-container {
  font: 12px/1.5 'Helvetica Neue', Arial, Helvetica, sans-serif;
}
.l7-control-hide {
  display: none;
}
.l7-control {
  position: relative;
  z-index: 800;
  pointer-events: visiblePainted; /* IE 9-10 doesn't have auto */
  pointer-events: auto;
}
.l7-control {
  float: left;
  clear: both;
}
.l7-top,
.l7-bottom {
  position: absolute;
  z-index: 1000;
  pointer-events: none;
}
.l7-top {
  top: 0;
}
.l7-right {
  right: 0;
}
.l7-bottom {
  bottom: 0;
}
.l7-left {
  left: 0;
}
.l7-center {
  display: -webkit-box;
  display: -ms-flexbox;
  display: flex;
  position: absolute;
  -webkit-box-pack: center;
      -ms-flex-pack: center;
          justify-content: center;
}
.l7-bottom.l7-center,
.l7-top.l7-center {
  width: 100%;
}
.l7-right.l7-center,
.l7-left.l7-center {
  height: 100%;
  -webkit-box-orient: vertical;
  -webkit-box-direction: normal;
      -ms-flex-direction: column;
          flex-direction: column;
}

.l7-top.l7-center,
.l7-left.l7-center {
  -webkit-box-align: start;
      -ms-flex-align: start;
          align-items: flex-start;
}

.l7-bottom.l7-center,
.l7-right.l7-center {
  -webkit-box-align: end;
      -ms-flex-align: end;
          align-items: flex-end;
}

.l7-center .l7-control {
  margin-right: 10px;
  margin-bottom: 10px;
}

.l7-control {
  float: left;
  clear: both;
}
.l7-right .l7-control {
  float: right;
}
.l7-top .l7-control {
  margin-top: 10px;
}
.l7-bottom .l7-control {
  margin-bottom: 10px;
}
.l7-left .l7-control {
  margin-left: 10px;
}
.l7-right .l7-control {
  margin-right: 10px;
}

/* attribution and scale controls */

.l7-control-container .l7-control-attribution {
  background: #fff;
  background: rgba(59, 58, 58, 0.7);
  margin: 0;
}
.l7-control-attribution,
.l7-control-scale-line {
  padding: 0 5px;
  color: #333;
}
.l7-control-attribution a {
  text-decoration: none;
}
.l7-control-attribution a:hover {
  text-decoration: underline;
}
.l7-container .l7-control-attribution,
.l7-container .l7-control-scale {
  font-size: 11px;
  padding: 5px 5px 2px 5px;
  background: rgba(255, 255, 255, 0.7);
}
.l7-left .l7-control-scale {
  margin-left: 5px;
}
.l7-bottom .l7-control-scale {
  margin-bottom: 5px;
}
.l7-control-scale-line {
  border: 2px solid #000;
  border-top: none;
  color: #000;
  line-height: 1.1;
  padding: 2px 5px 1px;
  font-size: 11px;
  white-space: nowrap;
  overflow: hidden;
  -webkit-box-sizing: border-box;
          box-sizing: border-box;

  background: #fff;
}
.l7-control-scale-line:not(:first-child) {
  border-top: 2px solid #777;
  border-bottom: none;
  margin-top: -2px;
}
.l7-control-scale-line:not(:first-child):not(:last-child) {
  border-bottom: 2px solid #777;
}

.l7-touch .l7-control-attribution,
.l7-touch .l7-control-layers,
.l7-touch .l7-bar {
  -webkit-box-shadow: none;
          box-shadow: none;
}
.l7-touch .l7-control-layers,
.l7-touch .l7-bar {
  border: 2px solid rgba(0, 0, 0, 0.2);
  background-clip: padding-box;
}
/*logo */

.l7-ctrl-logo {
  background-size: 100% 100%;
  width: 89px;
  height: 16px;
  margin: 0 0 -3px -3px;
  display: -webkit-box;
  display: -ms-flexbox;
  display: flex;
  background-repeat: no-repeat;
  cursor: pointer;
  background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAALIAAAAgCAYAAAHBIxK2AAAABGdBTUEAALGPC/xhBQAAIJZJREFUeAHtfAl8Tkf3/9z7PNmDRFbZSawhQcRSaqva1xCqpataqrT2UkuUUiqlaKtafe1VS1pUiypB0dIgIkpKRPZIELI/2/zO98akN48nltL3838//84nNzNzzpkzc+eee+bMOXMfxijNaMJ7LOrGO/HdYfZ8fb12gD2JJINJdR8WNHVQnRtSn7hilpz0u2DMKaEcFhZmhdzLNbiPyNVlwPxcm4Qh93Fr0gO4Ol5hfqiz6Q14G+QzGpYzQ9nXrUl7X/fgbrXdG3skX7m26+bNW2fQqJ5XmCs6RQKd6EQwB0zgtKgsvCidGF+N8wV/SBLqSKnXzx2WKIHw1xNxq2xtrKsBXqgrbePt1rivJFmloa5OoD129NcVQwa9Phxwaflw3ifvHCus1YIVjW7fwEF66dIhdYO/XV7Qk+9HY/5F7RA+w0G5TdRxq7gw10FBPWwA+3r9jpkYGcoJ5/7YiFxMiYCjLspsekOeCiJ1AhJJNER+8rfTX/j4BNcUMNCLMmhF+wC3cE9RZmMd/0IQjeTtGdwJjURD5EajsRQN1EwEHjAkUVce2LLhnKf8xGId3ZhkX4uxmj7MMKqJz0ZmMr3MJNZBmphV8WDBOCCgo+2QiE7DF3005wvU75e8vMLs4+P3HwwN7do5MzOu2NcjpPHRX/csCqjt2wvtxEAy8xJ3o+7j3jjkcurpn2xtrT0EPiS0oQPKSOfi/ygqL9H/qNbls8EXuer4+65xUa149QnBvGYFgapAN21EZ+pnuH3rrrnKdNA/zCRmjoqGzu36RoL21q38BLAAjRgo6iir63g1QAOcOoU27DAgwKtpPzVMKU+qBWIuve3Jx0zw4j/eQ0CASeNnjUi5mrYH72ZxUfFV0emJ479/BvrM9KxDAgZZEjziTp1d8+pL415sEdJloIAhF7QCZmnQoCkuLkkXNPfkozU8b4wVb30P4i4ADNQ41P08mtSBogHc27Vx70CPEHeUgRNwgUOuTqBR8wwODraGSIkrKipKxqVuI300mntri1jz9OOs0IHeHUdvms2t0iG+vn5nxmnan5QeUff6GGWttpidSjvGbCSZJdAAGTMwtjWSH2G5XrOp3oEv9wuWxqdeUPchZkW8OGqcedmcdujgUcMOH/zltmgL2YW2Fu22fbMz6q2xM+IEvmvHiCGyRq7AK3QLe959+T6v46co0uVBisLk0/9SqIIhcnQiVBPqULJ4dPVd2ypLg6Dx8wxuhAGDHrCOHTtqUfZ2b6KsYYIOuUiXL1/dKW4SMJRxkbbpG9nv5ecVutlt+PSoNvw7VPg8V4X5wqf4YQVp9g+NDQZDITr2cm/8lNIGlbvp+edGD/946eqJqOKmoBJRhjyjrclk0qlZAqeumw8YOEwE6ILdgh0raN9pcHeWx9n3mViPh9IKnlmBVBWI4bfoePDAEcOGPz9WWUDBzMe1cUdft5CnUfb2DvFR8rsz2avrkOdmT18wJisz5zDaqthVWjwAtzRgtBF9VbSdVofXIPWmB2CCouYqUBUFH59QbwwEqg0XykAi96/VuCEetRrm59msEfA+nqEtAUeqNEt324JGJEsDxpMi26gnaCpUxqJk6bahkGFp3akrZO8IBurcVGponpGW+VOdQP++uIAznzE1/cBBvRRZTc+OP0miUBJ78OiyxNxE6uX+KSP3vDIZuEE/z9BgWZZtHHj1oxZbkS6uJFNqIn+SWSy1AubjFtLd171xoHrQooyFQJRB7+0eHBrk2cxNtBW5mgYwoYNFXg5r7CvoFXWxajQ3mjiTc84wVkB2kTWt5NYk3lZ02SCvzphDDVrNZOY2p3mdA0wrhQoGSm5ig6SRyTsqwSxUaMKk+t4tXJIy4/IsoP82yNu7pYusKwk2WdslZmScvGHOyNs1tJ5GNrjVaeT2W2xsLCnuv5J6woQq/QtbXoLCMJqYtbWj208pKbGK4aamgWJR19XlCvpFEdxn6SDOl0byAjXB/cp8rlM/PteZ83k1T92PTuAw0Ly8GychmosWLB/v7xFSW+AeJQ/0auyLiYFEBgQ0dYKdDRsJfFOvpe0V76fgCVrgkNQTao63hAONr2vjFtAFltoTTFLzB415Al7RFdNipHRviWlLbzCHhZ05HxfEy9e7T/zX8FV+XLk+96e8Tl0xOJZfOpjdKp4kzboZXgGrouDj1rTunHnTQl1caoZ/unLNlKnTx32sNxobR0ZGakQTDCY8tEtEkG+LfihDg+NC2ccjpBXoyMTqVaLjTaFLduxe219XqH+67HYGKU5D0pbN30X5+vl0a9m6mZOPTxvFUIayPRAbM1RpS1uztp0a/SD6e9hcYlKVqgi7QEg/DAyRsAUsKSlNLyvT56Bs8e2Ias4LZzfnfEowJyOOVocZDs9jt8YnMDvUZzblZ+jis1rwtqg/KMHgwEThCUOCUS64U/An6iiL9oIGcFjwqMOQQB0JdTyEXd/tfR/1rMzsWCrPBxwPCxJMfJMELVYq0KO+fNkXk6CHRV/qXPSLXA0XZejpqiRZ0IgcY7hzu+AS2TB3quInaNnU2vzSlNqcT/fhHSqAVJgawAunEXxCPU4W9MMlcRN0ryZMAl2XcOHm6YlnYgMAToIOuxks+YBBErGrAa0YtKDDDkeYAaBFErjSUl2uKOfm5v1GE9y1nOLe/4IO+b3YchfKw0wy3lZ6m2arxyr4KV4RURH54qtS/fGufEMZZ7Hja/Ko0ptsgYML0+kKGM+4wbTbmGQUtPfLMfBrWWc3gIZenX4aJmUp9OQdqunk4nv2QmzMus0rO730wtj0qu2DqnuQjCYbrOjYrINq5JuRe/CKQp3QtRMweivm0yur+FBQf9xk6WFQX99Tvw2GDO0390jssWXW1vKf6n4q7Dc1EOXledJwQxF7RV/EomQbptMXssJlNyT5YSe4dq1m/s907eik1WprNKjdur9sW/1AWt7535Ur6/zvN2/lpcds/37eM892mEgTXGHuHD1y4qLRYK0YvrJsMly5knKu0tg0csmObbvfC2/ZbETK9bOnW4TU7xtGEw0a2geZbKysz/Xu9txQvV6fX6VOrMTw/hVsdF8b/tbGgX1feqF1m7Bq5hda+/o+pVgXm9Ztmzk0ctTBlMyEi/fnaoZ9g3HH1xmv5GgwI/m3+oAZUOzkj4fx7rQBt7qdxnhJDiuj/YlBe9dG1pLNbF9D8c2dem2xVMA3NQhjBk6WMyVaelmZVaL0+vmcB/Tz/zVa+8lIPlWW2SLMQh559ZSNCE2sbCq/FBuLyrrbLJVHsYZMr/sdfpiKJOv1pOxtyISp0tQRtHXqhNWQZffSy5d/LBOwJ5H71mrcAnzSSA2Z84ObJPlCbiujSZubkRefZI5X61hL5pavbzMvY4kuTCuzm6nXE4+Ztwf/lBRmcW1zcSkwxsXF6bWmEnbQSPJsoqWMZumwUqYC7QCVi3Y6tMmnCZdYDItiJezj0v3MaLJmRmXX58w0zKJ3w3ww2IwE+fk7JSUll9b2Crl4NfPcJXOav1OH7fyfdSs6cS7zl18Y65GRd36Pmk/S+dwex0/tHTN54pxNJ0/I2tTsM5WccqDFQgn9rW4nyphg4J95ut9gZis7p6Ym3BI4L9eQ+sS/ntrbLXDIE8/fLKaHVP7goyN5whKyKKMHcsWboSasqsznORfSRYEaz3v29uZt4JiDxMC8QVJLjzntg+ow+dBe7BhRJ1MwQ/AVkRbwQbBj7OtTXgVu49qt79LDrW/OX4yrqjEJ/OIPVrwlfM2CB/rW6XQ3wd9SgjsM41SsC9pLt+H0AptK2fdRjFdYHHwdhY0QOsL1VZDimkIHfLLD8xThcmCF+p3SjOxc0WlV+Zervm2x68dN/QQ+MLC2DVSHqOOVw6ZFXDRgCXjUBQ1y7Py+3bO+HyQLO0bArGV2auRrkxRv1orPPgjXF6XVARxJz0vCPvz4vbkoT50899yTenvAD0ljLx0L8Gr2Et4C9XXnTkEiecNKv/xiU/q1nHNXlQmN2iYVlpWwL0qLmSR3ZNFgQCpCogXuLDMa45WrTH8AcCVpTL8Q7ChbVDhAgO6XmwwGj7AWoa9lZ+UcBt3ufZvn6Ar0bUSbP/+42cJQ7NhbNjj3ybpW2p0G3LtP966DUIYk0TbZDr4Kk9Ho7lXLw1+0g6qo6Wtz8+f9sfmARQzqPZNWiCCBJ/NLtrOz9SkoKPxDlmT1SiJIHiuH6oAeF5e1o9XRGjWqa6pXrxbcqlm3YY7Wtifu6WDeU1xHF59an1cDki9wm8nnU7h3AV0fergDNrsln0+BtKUoP0yizYJr/57DhuJ1wnY5/mziepTVr6e3R0hrsbPLyck7BrxIZO/eAi2uuwE4I3Aok5rIAtzPPbjtxQuXtgCOOtQTwkqrPvlqMmBd2vcfDGeSpfGCXrS7H96SujCnBy+oj6LComSoEoGvUA0A6EvZ8DLaO9nYsUOoSzNy57Oi4mJyBu2SpuRcj2rGvZievUsRgleBf5gk6cpabd62egFoaYtr6NFl8DaUoz96LzTAq0kDlNWppLhE2UTg9Tuf8MdG2sw4DRjQU9H7e3b/FE2vomLoU3nJjm92rYSEwoXZuX3EJvDZsWtdz/+sjGlqMJqCXx/90jzALlz4syQl5awi7aj/EwnxPfC1srJy7ti232Sb6jZHRT+VJvm909I3pjKWayxjYdODeLkO1hnC2OLC/mhQWsJO6UvInCtjHQWDB+XKK2tvF3Dq5JkvVR4t/tzwiHk6namuefunwruvEq9ft86RW4Ef9sqQcK2WXRkzYtKBgtsFGYCNHjHpt3enzd+cnpvwo8pHbKQd2Wg9M3qDhjz9tqd+O7tao2XZqP+TKf8Ga3vyzP630EdGRpY+OTnutuiv0iQDqDOxVgaaSDLpjqMuResukoXHpwTw7jT5XnQlfHBBOgPcgxIiEqu+jG4NuoYN63a4mHzio0vJvy7Blhcwa2srWW0NAFZVgh0uaTSKj0LQYFERZVmy+WP1Z2uno25vZyd/tX5FO5T79x72faoF+xm4J5m4geLOPl7PHPvl1CeyLF1T875nkpdckq7qdOwIqY4aEz35i+XEXCYJ30MXs7dnSghSzaSqMunN2n36dZsBfG7uzYt3r0vpaVm/AHbkxJ4xJYWpD80PbapK6bmnL8+dvURRJXsPbXu5W49OU6n/ItA/zEapKr4PA8fC7OVVS1EXgwe8sq9Nh4aJ6nYWdyrFmayLvQsrIwleF8n4Jk9ntlCvo00gZ6ujE6UHBujQAZw2ZY52Cv8fvj/wwahXJu6VGFdu2sh4rdTs+M6+fl7dSAI+kTS0yfkbCWEndbhJIzPdjRu3TgcGBijqbcHc6Km21iz+b7C22KTEaGxFi1slHDyLsrGgKHr5kvYCsW3btkpeynskGYSrmaQnvTufLubhyL6WDGwK0zH9ypvSKMHoQXmuoaztz0diJoHu9VfePp6el3BYeOGstVYJ0Ys/VSR81OjhPmQqKAvbg3hqZNOd9PTsZNAt/3Rhi+5dW/cmy6SzaGfv7HS817NDlUUWsFWfrU9LzkxMFfjHyadMe3MZ7HPzCwJjMnK/8JbNI6rib1GSQfxpoTT7TRs+mYzLSJJoWkTYsKqYWIIbTNzWuaZTA0iWOT4l+2zKxx99fpXCUKxXv+5hn6/akP7n5eRztbw9O5rToi7cnx5+0rWIvi/uSU4/M2BgZJ/ZAwb2KiO9HynaXLp0rIAkTZeff/tc7MFju2Qm0T7r8RPcnJa43MjL1+PtocUif8SrE2ZkpWWX0Tmbex4q5q/KNFLLO8mcHSTXRc7nRsmzSkILCOzWsJkAypLjBXE4U+mdtmSCGclC+AEbC8US0Wh+u5Jz7jraIWREYfRGuJG064n7AAvxCHHIMxorpLcac4q9lHesYjLRb06qrgtZMoVpuecqzCi0tZRg2wq4pXEiKCDwlnIRMMD9WFvrjGqrwhK9RRj5kp+bwLgS37NI8C/wgTOgSPLyV7ibxoa9Rp7kV8nrVo1E3qSjJSr/CuNlBUxHTswSZmLFkhWTtLSGUqSEjO7yXEN1DZW1FBuQrQllxzK5FVuTc5HtnnOIwlRf1X6Waa1GM24KoNGQT69SkpiGFtIyYwwrMK1jb1+9/U9bApV6/7fyxGYAwewzZ1IdiosNBvF2PzHmD8FIWfcoKPIV7ZZ7Q8rImmJGPWPpR0jqdMxEAs5IgEkWCUm6mf6YRITIOXIFUC6heCvIyguhPIR5s1PE9TYrMixlWkM9ZqRwC2jLkywKSm4tPc005KKeOxe+qb+oKhE9fAUOvLLi0ubYH6AVNpoaLU++lnWezs8/OLbw8D09GUp8HkB7wHCEEwVHjBkOxqvX7x906kgOzMvn89qZWLm7SbSXmXwnqLHLMdVmWKAq5eolSY2wtDyp8aIcFNSqekl+Uftjhy5IbduGV0tKulrCdMEGrcRupeYm/iLoLOXkMpJqe4fUN+hZHRM3keQ9Wip3IGiSEIupmLjooXwByeoUA2daCrSw4nx2Kucye86qhJUq7MUKSznt+SqSHcq0KAqY1okZxqySrlcQUIEvJ7e+RDocW2JdmR3T8K0UT2lOwk1viKQnh2oUuaIqrFt120ct4ySGwaALHDPuVb8ZM9+OxjlFOh95oGXzrsvpxk2e/jb7ERB6VL6PQw9hS79427lUqzOOGBGZj5i64IcPYUp1paHDXxzs+UH07NUCvnrVumlzZ334h0ajuZqWc+68gKtz+Bq//CSmq4kbrRL/PDbPyalGKPDJySm7n27V+wtJywozshMPqduYl4Ugw/oHDm455A8ryDjEhp3CkV+/HxEYGKC0/XDRyreXLVmVbKeyE8HTPOE0DNmONhS3Gu0f4NPTHP+gOj7JGRwx4icYzRU7kUlfSzMW9+PJJMTLS03MztqahXs1YuuK8tmAqFgp70FM74eXxpeHTvhkR3eKY2wic6K5YmRoWBE51UdI825tuV/7h8Uh1qQzFAf26vusy8zZE1eKdt6+Xl1ooovbt+795fVUXRuC03rzzyecisZBYwoCsvETRgbcupFfunrl1mwSHtIW7EpqduKF5My4VBIG9w3rt7L+g3qtggsRI3t91IvzNq7d/sKVK1drk8bOtaSZ16zc3pw0sdV332/sLYSYzofd7tdj+H/Aw1O2/S0DhX8wlWvFv7eI0jpJqs1gs33brv09ej6TT7wqFKulIbt7utalw5RKxJwO4+yCEGMDFdjILbFCkNFw6k7py0XP8qu0Fm8nl4UTcW1nY81ORHXjPaL2SZcFcxq2xNbUXsSstB0oiCbA5TkWCCMvYQbda9KotCuVkCbTQGYyNCFb3ESh72wmayOlRbePV6L5m5UAOh+sK8wNh4tzxaeLF99lY6KjunGuri7h0BZf/GfZBfhQfDyaNEnPSUgw70o5bm8yuZrDUcdSTXftYL4EaiT5tobZJqXknsq+p52e+wB28vT+cfQyPYtyxOA+nw/oPXwPyiKl5ibE+Xs06UJb9x/OJB4OdXd3aUMmkPX2XWsnNAvu8EGZJDWhZfi62izyouPDRh2v9cabr/iGt2o6UvCa9c7CqfQFo0Gy0ZyJyyg/uiZw/0SuNocelX9qbvwv8F5+suxzv6VLPo211J6EvRZWnCXL5jUb+sKAoaDBh5SYKzyT1JxzRzAvlQQZRNN+kn6Oepq3JXn8gar+JKZBRPQbffnSJ+qEpAgdCTjnt/UbGCt7jkq+lbZwVmQqGPlcaVJWhRBHPcXd6ciG29xDbOecNtIGCm3VkKJLnqiy0JfcbIvxxx7fOc7Gxkpx6G3ZEDNn1rsLEy5cOb6GIkIuPXt3eef5FwaO3LxpByNteTM9Pb7yGO7az7+fPTBR+Km2bIyZPWPa/Pi1m1b0b0FONnt7Oz/0g0Su6oLLSVd+GP/G9G9154uLtZL2lsnGPo6XFjyDB0wx33JCC/8NBoavKQKBogB8noskH89jxs5dOw78MC7h5/VkUjiSQD+1fvPKDi8+/+ZhX0/lawzl5bv70jZ1dHTQTJ0xfr5gv+/HQ4vXr/smC/GC9Ixz6QL+T+aPo5ExrvT0E/BwX7I0RoR9TSajFebgmWc7TgINjk6OG/POKVnLctKzE06SECtNK2+67nKLOipdIEEOp7jI73QKg+lKWE3aDB56N5wPuUvCpInpCazEEM7yS86wQloh7tBVXFLEbpa8REL8fjkdl2Y158NItDOp/XnZimXM/ZW3lJY+WSH2dwttRt5o+6+3r+6C4A/6Tkq6EjNp4uz44pIS05wZi94V4164ZNYSN1cXKyz54hyowFnK+0X0GJGccXpneKuwQRcvJB3YvXPfAgSX6CPVeBK2avUb1huy79COLecuHp1Dx5fgU+wCId70zapnhNdZaGPwb9mq2SgBRx45uK87p1Xgjh3NjrV0FmHm92YtnirGggfYp09XV5PRFIBNIeDGohstke/9edtrCNmifC0l/YdXXxz3Cxy76dfPVz4DC4L/sYQvkhFh+HT1h62EEP+45+dFEGJ8xp6enXhSfUsWBRkEM45KubIDe5qE+DsE9XSlNM2lbMv0YP4OxaJIzsm+ePd6DivMb8vu6GKYviyJFRq7Se/d+hq4KMa104PZLBLgDXRiRkPhbU5h7s03PNgx4J9UCvBsGqDnBh/YoO07PDUefEtLyzK7tI9Yh80dQtTr1m7JPHL4+HLg6GxB9f2Hy0M1CNtg5wx4VUnWaO1bNn12YJBfizf69hr+5Zujpqx5PnLUp43rtZvVtFHHCBFAdHFxDlu28v1w8JEljf6FIaN/FseJ8DGe4I9wvYAj37Z113XZVnsaZxUyM8+nkYJJw5Gjn386/JFos3Tl+3NQ1nMpDB/aGbmpxkfL329Wu46fcqiD7je7U9u+n0M72jr5nhDt/ldzH7fgIJOJ+0+aNjaw34AeihI6ezph7YiX3zpGk3sjI/fsWfN7q1KQQUibvNIF51kECfMysmuNlFPUjy2sHchWvhzAyXNM9aWshDTsQOmD0vrShwWKkI704vZFddkXRDuXhJgsELKYS9n7CxKkF1b8KNFr8WQS3Gw6g74JztRNeefNDwXXyeNnzSIBI88gl40GpkRyhg4aeeD69RvKQ8aSHbNrfS+Exvy8yn9OQ7Q1z2kCd+D8BDZnGdcTTqTmJCTjRKgky3nQntezc0+JNl7etRT7WqM1XcOuX9ZoKnlvBB1yrdb6CmhwqU2cjNzEs/A2vPj82Nj0tMz9oLWzt/Pfd3DbYNjntJmr06x5Ywf6ZEIRbuBHvz5lWplOp7jrnvRxZPD/byZ8IE0u3IZ16wbaTpw8Zgn6pjBiQq9uQ2Po6/SyjJwEiy/qfQW5/AYkvviyNIEEcgIFqstweou07GgXA4sZ6cxrlNP89X9MDe7sILM9JK4v60CrYyUlejZy0Z/SrL+oHr8EB7w4q7hr78ZZcLMJritXL16jXr5FGZsoQdOqTfNRM2ZNrGvU81pVfXUGWnoZlN2seqOl8PgH/dFWtm4noF07te33KX0GmIv+GjdpOIzs4SCUN2xZ9Q5lyrPbuuW7uT/tPXjLykq6bMmzAfr/pVQs3WmG8W785rMRlCkr//w50eWrKWPx9zyHuzenvZs/MItOl1a85cGvajjbpJNYdYpd97C3YkfH2fGeK0qkdDCg3x4JoI3fXknH6hMNRnFLx9igZTnSwQd28IgExw9fpO9PTVbQVOR6CkFzslvP0pI/+36scLwRp+9A88a4Vxbt2bV3WHz8hUb0uzm3yn9i4H6tVbgHmCQqykcuptBX2/6uYXFk37d4+413pn62Jvo/YPLm+Nfmt+/QZouzs5PiL066dHnrhHEz4xB8QLDnkTv6hxuQtyWAPESKXV9VV5JReyM193QWBNTXlT4Y4boaeGF9fL26og3cbF9vjsmRtdqcq9nxVX6R9NCCDKYf50jfv+3EO5gYHYbjzItATZg1OzVG5t3IFrWmjeGPpL9cCQ8HXYpGw3rQB38XUX2SCd8ilOmMrouXzAmBpgJvsnUNg/u/shBlnMC2dD7Wzy24HTaAzVuFxtSrFxhBk6fd+u1X8+rXaT2Jlcmt6ZzVHQMYPKEk0SecYEVnd/WCpZNzjZoKjII28FrgvK9tDftjly//dkfQIL+WF5dF9nDyrl37WLeYZ+b3j+g5kzaX9s2aN3kV+OLC4iud2vXfiMMqdYJdfk2NBfT/jfTc0P49unXrVKXQiVEWFhUXvT12xgHaK+jpxf3doNH7IUjWf0DPZwXNvh8OHkFZMsiKshRw8/yRBBmNl+VLZ0fb8ZayzH4krdyEnpQnudbiKRxMAbry9Y5gJwnfOzpfUpZF804fp46dOwlxvY5dnnZ64aVIRbOC39ovN8/GAW9ZsrpoSYhBU82dnczPkbpiI5iUcrK1ra2Nl2M1x7oHf/lueOd2/TeYmEnxAID2iSSDdQbZVp6ff7J214IPZ3YnnnLdunUiyNSJuMvfSC/fi8eOnepAp6EOnss5Rydc/kp0EDORfuXOZeyoqSeDmzSIQVtg8Q3K4IGvzkSZW9vd87sdgP+3Ejw05n3hFxroMgffU6f7KBs4uM8fy5euTjFKRkf6ks4FRJ61PJojL7hTePH99z5Kwsuael3R2gBbTPcMwiKVBeBkxh0KtGw7mQ/dhbeUynihvrU2sKEr2JPb1Km7h238a+ylp4zc6IRNXsdObV3JTswqKCw0kUeCNmLxiWp68zLOBpTeLm5LGydt377dXJycnazhewUd/K/YLZPmk8aOf80/LSW96Ntvf8jFRGodXA5iyRf88Es5xQZda0GbkZZVtGP77ntocaKXlRW3wQOv5ugot+vUyqluUGB18CGT5hZ+jwuOfRx0FbzVOcLQaz7Z0Q6eCsDRHzayiodCI58URwXVbR6l/Lghavw6hYGZsDr/rYSNLSKQcfS7AwiOSGWF4eJewRAmRVAD59MPOjPytwUZncAN5yyzhVacDSFlbDJIbO1qkzQXuP9Gql+/bTXj7WLbUq1t4V3H+kN3q5zWOnq5Jn05Jdm6GvMTExPJnC9PCDgYC2/X1Mp6o38j1xv3m0Q1LT5wu985DghlzGcxdqUaKzvSRpLJXtaFhdUpND8mLsZhKQcPuhSTxRL+UWFCkM3bPexZC/N2/9b/nYF/Z+AxZuD/AA8zEhkTLyOGAAAAAElFTkSuQmCC');
}

/* layers control */

.l7-control-layers {
  -webkit-box-shadow: 0 1px 8px rgba(0, 0, 0, 0.4);
          box-shadow: 0 1px 8px rgba(0, 0, 0, 0.4);
  background: #fff;
  border-radius: 2px;
}
.l7-control-layers-toggle {
  background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAkCAYAAAGf7Ah0AAAABGdBTUEAALGPC/xhBQAABzdJREFUWAnVV3lslEUUn/l2F0tpwdAih1HEqCReDcphNCo1EkgFkXa5PNpuC0Fo2e7Wgko8KiaKWrvbK5672xYFpNtiRRuNiY0aURA14BGviBcVlaKltVa6+42/N9v5Mrtt05rwj/PHzjt+8743b+a9N8vYwKgMNlUQyemnMtAkaJajvb3dToQSGp8e6boopkr4VYgEMYwO0vhCTfMVzBcMf8bx086YyODcuM80zTqp9IWat+7evW8sMdIxIqqCLa6oiAaJpuEtcBqcc2HEWMZ0JclgZR/Nchf++ubrzKjJSguXS4tVjXvPjfb3/UAAacGTn/MOMb7QnjNpNqP/bKZ50Ai0tqYmCi0n4zbM+W+lBc7JBOa+QPhDwcTsxJXE2+32edKCL9h8hRDmRzpIOWydAylhrcMfDN+ugBRKSdP3KwPhsFJIPth02FISIYQwYsDYcVfWhy/Bon4JgumffMGmiGTwQ0B/sHml4q2ZFAD3WQIQVhx0IdFw8B189lolN+w8w5PnjPmlhJgtA8/vfn3iye7u3yGzDljDxZEG4097Cp3rSSjBtMHunp6vFR+HHoIxmbgTe1xHKssDHecLNFUjMzbqMs5ZlHF7ute17M84+TMHDzr+OvR9JwKdCms9yRkzJq6bPTsWXh05QOPUN+PUHyPWMPhm6UHd7vaUohWZPSRE8OqxpTyibQa/qcTlbEP0vwF7AWUAT3JM9dy69FfSNza+MU4awNE8iQtXSkJuGLleV852ov2h5jkwVof0mUs8aO4LhTuYYFOAjExId0wcFIPahpaLTkWiX9ECfHG/sLNi1i8+HODfgLFFRI96+INNi0cNTgTS1obKQh03aAuk9DeELzcj4pACYivvwvXrFK/PcQZiQWo+hmidpYMUjQC7EOB6xdNsGfAHwk/RDdOVw9Dm+NTUSWtWLDohDVQ37JkbiUT2DwMeVswZP+gtdM4x3HnLDhjcGM2XLWOISaenIGee9MCSgqgMht/H/q/SZYk0qviV3oKcj5XcioESyOoqIseFYDYloxnAGm/hcrcuk3JV2XBMl+pKqn6mENux11+w12m6jpqMMFn7rPPTHdwfCm8yTfG4tMaNu+GepPUFiqbM7T105ARSPQU+dY/LOC/N2gI65WEkyWUEtjmSppfkLvlRLaQ5VnZFDtGGzbheNRROKZmbu/AvUvh3tE4Wff2/0IUC+y2q+4VVoXBW1BSvkR7Rb8BW84lWJQBdlGozcs7GLy3Nd35OSqTxBqtfgkc1+sPjcqbDgEl6xK0dH5lv545LOCVL1/F+3CoY4eyY1+WcBiC2KYEHQBd5XDkyndE17xCm2Ug6BLcSwb3LigE1AlOYu6TS4HUwVEw0Df1osfBnLDwnpiFDCQPuvQ73Fkqxg8/hEVYLXt66MXbbzOK8bKre1hhkgDT0RDja3fEHytwZxCMLH0YWPkD0fxqjqUZDejDSV3z1LbexqPkEPJxKWLqtKOGbvPnZL460NlE/KgfkIZiRrfjShsQcG2QQDUwwXjcuZcID61Ys6ErUJ/LDOiCfLUzUjVQdEg0O4jn/ABEq0iuIjrEcwE0x/KGWNbjPj4BO00Gni0ZOoIPzLR5X9vMqqaQDqDzzENra4V5zp8sBZQcROYjsLvYUOPdbEVBKeiZ193QjCmwtZCM+ldS6EWYTH3wuNSV1i+pFCj/IAaWgGUfBq0N78qPM3DZcp9TxcTQeyzZm3ON2LatXpSlOP8BIB6qDLddHmHnFrBlpNZmZmdZbNXEB9XsRlZXFennqGHzoXW5DaId4iSoc/Q365EjnRjszPnYXZL9NDWUtGsqzCjAw7xprTypbn7fkaILcYqkInzzeX06C8emO8sKlS7stZQLxVMPes/+O9FVAvEpXob+utY6gZmfrtMjf/RUI+2odhF7wJbq+Gzf3zTj5CAwyaoEwozVoCzN1KKK00z7WUbZx9dIOklsO6CAZpu87i5gpHoJ8gtLh9vZixSO2KckV7qysf5Sc5uq2tjOix3rL0FW3IJuSNV0XM/iDs85LqxvqeKUD8n3LxUobt5WVuLJlS9IM4O9i09VRwWtxLWfpcix+hXjs8mZdjn19YuOiuKRgufzXqOuqQi2r8O+yAk/tl2Q/RMW7ETe8UdX1GJhHDM5qjDHJ5e7bs07qBp7ZsTe9t6/vUXykkLKEdLFbLgLJSUn3rrt1yXEdX/1C23jzVG+5Keg/B5r2wJD9g/NcaUAJq4MvXxxl/TWoATcoGc0Av4eUKnIXZlsvXpLHO0CS2KgOtGQgdeuwqWuUjGbUgrdszLHRXXDLF0oe54AS0kyPnc5Iz/2CmV7EeIzSwcjvsHQPXkUhld/kCP6Xu+DRNjg/SWHh+SnODF+aPeVh9XCydAPEsA4kAqsCzcuiTPiw7+maTj6SwGsVk/9gY9xbUpizR8MNS47aAd0C7s35CG8VdrxYyjl/FcdUgo73nY77X9D/Au9RDMh+aBoVAAAAAElFTkSuQmCC');
  width: 30px;
  height: 30px;
  background-size: 20px 20px;
}

.l7-touch .l7-control-layers-toggle {
  width: 44px;
  height: 44px;
}
.l7-control-layers .l7-control-layers-list,
.l7-control-layers-expanded .l7-control-layers-toggle {
  display: none;
}
.l7-control-layers-expanded .l7-control-layers-list {
  display: block;
  position: relative;
}
.l7-control-layers-expanded {
  padding: 6px 10px 6px 6px;
  color: #59626b;
  background: #fff;
}
.l7-control-layers-scrollbar {
  overflow-y: scroll;
  overflow-x: hidden;
  padding-right: 5px;
}
.l7-control-layers-selector {
  margin-top: 2px;
  position: relative;
  top: 1px;
}
.l7-control-layers label {
  display: block;
  padding: 8px;
}
.l7-control-layers label input[type='radio'],
.l7-control-layers label input[type='checkbox'] {
  width: 14px;
  height: 14px;
  margin: 0;
}
.l7-control-layers-separator {
  height: 0;
  border-top: 1px solid #d8d8d8;
  margin: 5px -10px 5px -6px;
}
.mapboxgl-ctrl-logo {
  display: none !important;
}
.amap-logo {
  display: none !important;
}
`);function ife(e){return e===void 0}var ofe=ife,Ws,_N=(Ws={},m(Ws,Hi.additive,{enable:!0,func:{srcRGB:V.ONE,dstRGB:V.ONE,srcAlpha:1,dstAlpha:1}}),m(Ws,Hi.none,{enable:!1}),m(Ws,Hi.normal,{enable:!0,func:{srcRGB:V.SRC_ALPHA,dstRGB:V.ONE_MINUS_SRC_ALPHA,srcAlpha:1,dstAlpha:1}}),m(Ws,Hi.subtractive,{enable:!0,func:{srcRGB:V.ONE,dstRGB:V.ONE,srcAlpha:V.ZERO,dstAlpha:V.ONE_MINUS_SRC_COLOR},equation:{rgb:V.FUNC_SUBTRACT,alpha:V.FUNC_SUBTRACT}}),m(Ws,Hi.max,{enable:!0,func:{srcRGB:V.ONE,dstRGB:V.ONE},equation:{rgb:V.MAX_EXT}}),m(Ws,Hi.min,{enable:!0,func:{srcRGB:V.ONE,dstRGB:V.ONE},equation:{rgb:V.MIN_EXT}}),Ws),sfe=Nl,lfe=Co,ufe="[object Number]";function cfe(e){return typeof e=="number"||lfe(e)&&sfe(e)==ufe}var Gn=cfe;function ja(e,t,n,r,a){t.updateStyleAttribute(e,n,r,a)}function ffe(e,t){e.opacity&&Gm("opacity",t,e.opacity),e.strokeWidth&&Gm("strokeWidth",t,e.strokeWidth),e.strokeOpacity&&Gm("strokeOpacity",t,e.strokeOpacity),e.stroke&&dfe("stroke",t,e.stroke),e.offsets&&q5("offsets",t,e.offsets),e.textOffset&&q5("textOffset",t,e.textOffset),e.thetaOffset&&Gm("thetaOffset",t,e.thetaOffset)}function Gm(e,t,n){xo(n)?ja(e,t,n,function(r){return r}):Gn(n)?ja(e,t,[n],void 0):Array.isArray(n)&&n.length===2?xo(n[0])&&Qo(n[1])||xo(n[0])&&Array.isArray(n[1])&&Gn(n[1][0])&&Gn(n[1][1])?ja(e,t,n[0],n[1]):ja(e,t,[1],void 0):ja(e,t,[1],void 0)}function q5(e,t,n){xo(n)?ja(e,t,n,function(r){return r}):Array.isArray(n)&&n.length===2&&xo(n[0])&&Qo(n[1])?ja(e,t,n[0],n[1]):Array.isArray(n)&&n.length===2&&Gn(n[0])&&Gn(n[1])?ja(e,t,n,void 0):ja(e,t,[0,0],void 0)}function dfe(e,t,n){xo(n)?ja(e,t,n,void 0):Array.isArray(n)&&n.length===2&&(xo(n[0])&&Qo(n[1])||xo(n[0])&&Array.isArray(n[1])&&n[1].length>0)?ja(e,t,n[0],n[1]):ja(e,t,"#fff",void 0)}var K5,lx,Q5;function J5(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function e4(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?J5(Object(n),!0).forEach(function(r){m(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):J5(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var pfe=(K5=G2(ye.IGlobalConfigService),lx=function(){function e(t){Ae(this,e),en(this,"configService",Q5,this),m(this,"config",void 0),this.config=t}return Oe(e,[{key:"setContainer",value:function(n,r,a,i){n.bind(ye.MapConfig).toConstantValue(e4(e4({},this.config),{},{id:r,canvas:a,hasBaseMap:i})),n.bind(ye.IMapService).to(this.getServiceConstructor()).inSingletonScope()}},{key:"getServiceConstructor",value:function(){throw new Error("Method not implemented.")}}]),e}(),Q5=Jt(lx.prototype,"configService",[K5],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),lx),EN={exports:{}};(function(e,t){(function(n,r){e.exports=r()})(bs,function(){function n(f){var d=[];return f.AMapUI&&d.push(r(f.AMapUI)),f.Loca&&d.push(a(f.Loca)),Promise.all(d)}function r(f){return new Promise(function(d,p){var h=[];if(f.plugins)for(var g=0;g<f.plugins.length;g+=1)o.AMapUI.plugins.indexOf(f.plugins[g])==-1&&h.push(f.plugins[g]);if(s.AMapUI===i.failed)p("\u524D\u6B21\u8BF7\u6C42 AMapUI \u5931\u8D25");else if(s.AMapUI===i.notload){s.AMapUI=i.loading,o.AMapUI.version=f.version||o.AMapUI.version,g=o.AMapUI.version;var v=document.body||document.head,b=document.createElement("script");b.type="text/javascript",b.src="https://webapi.amap.com/ui/"+g+"/main.js",b.onerror=function(y){s.AMapUI=i.failed,p("\u8BF7\u6C42 AMapUI \u5931\u8D25")},b.onload=function(){if(s.AMapUI=i.loaded,h.length)window.AMapUI.loadUI(h,function(){for(var y=0,x=h.length;y<x;y++){var E=h[y].split("/").slice(-1)[0];window.AMapUI[E]=arguments[y]}for(d();l.AMapUI.length;)l.AMapUI.splice(0,1)[0]()});else for(d();l.AMapUI.length;)l.AMapUI.splice(0,1)[0]()},v.appendChild(b)}else s.AMapUI===i.loaded?f.version&&f.version!==o.AMapUI.version?p("\u4E0D\u5141\u8BB8\u591A\u4E2A\u7248\u672C AMapUI \u6DF7\u7528"):h.length?window.AMapUI.loadUI(h,function(){for(var y=0,x=h.length;y<x;y++){var E=h[y].split("/").slice(-1)[0];window.AMapUI[E]=arguments[y]}d()}):d():f.version&&f.version!==o.AMapUI.version?p("\u4E0D\u5141\u8BB8\u591A\u4E2A\u7248\u672C AMapUI \u6DF7\u7528"):l.AMapUI.push(function(y){y?p(y):h.length?window.AMapUI.loadUI(h,function(){for(var x=0,E=h.length;x<E;x++){var T=h[x].split("/").slice(-1)[0];window.AMapUI[T]=arguments[x]}d()}):d()})})}function a(f){return new Promise(function(d,p){if(o.AMap.version.startsWith("2.0"))p("Loca \u6682\u4E0D\u9002\u914D JSAPI 2.0,\u8BF7\u4F7F\u7528 1.4.15");else if(s.Loca===i.failed)p("\u524D\u6B21\u8BF7\u6C42 Loca \u5931\u8D25");else if(s.Loca===i.notload){s.Loca=i.loading,o.Loca.version=f.version||o.Loca.version;var h=o.Loca.version,g=o.key,v=document.body||document.head,b=document.createElement("script");b.type="text/javascript",b.src="https://webapi.amap.com/loca?v="+h+"&key="+g,b.onerror=function(y){s.Loca=i.failed,p("\u8BF7\u6C42 AMapUI \u5931\u8D25")},b.onload=function(){for(s.Loca=i.loaded,d();l.Loca.length;)l.Loca.splice(0,1)[0]()},v.appendChild(b)}else s.Loca===i.loaded?f.version&&f.version!==o.Loca.version?p("\u4E0D\u5141\u8BB8\u591A\u4E2A\u7248\u672C Loca \u6DF7\u7528"):d():f.version&&f.version!==o.Loca.version?p("\u4E0D\u5141\u8BB8\u591A\u4E2A\u7248\u672C Loca \u6DF7\u7528"):l.Loca.push(function(y){y?p(y):p()})})}if(!window)throw Error("AMap JSAPI can only be used in Browser.");var i;(function(f){f.notload="notload",f.loading="loading",f.loaded="loaded",f.failed="failed"})(i||(i={}));var o={key:"",AMap:{version:"1.4.15",plugins:[]},AMapUI:{version:"1.1",plugins:[]},Loca:{version:"1.3.2"}},s={AMap:i.notload,AMapUI:i.notload,Loca:i.notload},l={AMap:[],AMapUI:[],Loca:[]},u=[],c=function(f){typeof f=="function"&&(s.AMap===i.loaded?f(window.AMap):u.push(f))};return{load:function(f){return new Promise(function(d,p){if(s.AMap==i.failed)p("");else if(s.AMap==i.notload){var h=f.key,g=f.version,v=f.plugins;h?(window.AMap&&location.host!=="lbs.amap.com"&&p("\u7981\u6B62\u591A\u79CDAPI\u52A0\u8F7D\u65B9\u5F0F\u6DF7\u7528"),o.key=h,o.AMap.version=g||o.AMap.version,o.AMap.plugins=v||o.AMap.plugins,s.AMap=i.loading,g=document.body||document.head,window.___onAPILoaded=function(y){if(delete window.___onAPILoaded,y)s.AMap=i.failed,p(y);else for(s.AMap=i.loaded,n(f).then(function(){d(window.AMap)}).catch(p);u.length;)u.splice(0,1)[0]()},v=document.createElement("script"),v.type="text/javascript",v.src="https://webapi.amap.com/maps?callback=___onAPILoaded&v="+o.AMap.version+"&key="+h+"&plugin="+o.AMap.plugins.join(","),v.onerror=function(y){s.AMap=i.failed,p(y)},g.appendChild(v)):p("\u8BF7\u586B\u5199key")}else if(s.AMap==i.loaded)if(f.key&&f.key!==o.key)p("\u591A\u4E2A\u4E0D\u4E00\u81F4\u7684 key");else if(f.version&&f.version!==o.AMap.version)p("\u4E0D\u5141\u8BB8\u591A\u4E2A\u7248\u672C JSAPI \u6DF7\u7528");else{if(h=[],f.plugins)for(g=0;g<f.plugins.length;g+=1)o.AMap.plugins.indexOf(f.plugins[g])==-1&&h.push(f.plugins[g]);h.length?window.AMap.plugin(h,function(){n(f).then(function(){d(window.AMap)}).catch(p)}):n(f).then(function(){d(window.AMap)}).catch(p)}else if(f.key&&f.key!==o.key)p("\u591A\u4E2A\u4E0D\u4E00\u81F4\u7684 key");else if(f.version&&f.version!==o.AMap.version)p("\u4E0D\u5141\u8BB8\u591A\u4E2A\u7248\u672C JSAPI \u6DF7\u7528");else{var b=[];if(f.plugins)for(g=0;g<f.plugins.length;g+=1)o.AMap.plugins.indexOf(f.plugins[g])==-1&&b.push(f.plugins[g]);c(function(){b.length?window.AMap.plugin(b,function(){n(f).then(function(){d(window.AMap)}).catch(p)}):n(f).then(function(){d(window.AMap)}).catch(p)})}})},reset:function(){delete window.AMap,delete window.AMapUI,delete window.Loca,o={key:"",AMap:{version:"1.4.15",plugins:[]},AMapUI:{version:"1.1",plugins:[]},Loca:{version:"1.3.2"}},s={AMap:i.notload,AMapUI:i.notload,Loca:i.notload},l={AMap:[],AMapUI:[],Loca:[]}}}})})(EN);var hfe=EN.exports,mfe=function(){function e(t){Ae(this,e),m(this,"size",1e4),this.size=t||1e4}return Oe(e,[{key:"setSize",value:function(n){this.size=n}},{key:"getSize",value:function(){return[this.size,this.size]}},{key:"mercatorXfromLng",value:function(n){return(180+n)/360*this.size}},{key:"mercatorYfromLat",value:function(n){return(1-(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+n*Math.PI/360)))/360)*this.size}},{key:"lngFromMercatorX",value:function(n){return n/this.size*360-180}},{key:"latFromMercatorY",value:function(n){var r=180-(1-n/this.size)*360;return 360/Math.PI*Math.atan(Math.exp(r*Math.PI/180))-90}},{key:"project",value:function(n){var r=this.mercatorXfromLng(n[0]),a=this.mercatorYfromLat(n[1]);return[r,a]}},{key:"unproject",value:function(n){var r=this.lngFromMercatorX(n[0]),a=this.latFromMercatorY(n[1]);return[r,a]}}]),e}();function t4(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function n4(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?t4(Object(n),!0).forEach(function(r){m(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):t4(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function r4(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t={top:0,right:0,bottom:0,left:0};if(typeof e=="number")return{top:e,right:e,bottom:e,left:e};if(Array.isArray(e)){if(e.length===4)return{top:e[0],right:e[1],bottom:e[2],left:e[3]};if(e.length===2)return{top:e[0],right:e[1],bottom:e[0],left:e[1]}}return n4(n4({},t),e)}var dr;(function(e){e["GAODE1.x"]="GAODE1.x",e["GAODE2.x"]="GAODE2.x",e.MAPBOX="MAPBOX",e.L7MAP="L7MAP",e.SIMPLE="SIMPLE",e.GLOBEL="GLOBEL"})(dr||(dr={}));var a4={dark:"amap://styles/c9f1d10cae34f8ab05e425462c5a58d7?isPublic=true",light:"amap://styles/c422f5c0cfced5be9fe3a83f05f28a68?isPublic=true",normal:"amap://styles/normal",blank:"amap://styles/07c17002b38775b32a7a76c66cf90e99?isPublic=true"},gfe=function(){function e(){Ae(this,e),m(this,"projectionMatrix",Xi()),m(this,"viewMatrix",Xi()),m(this,"viewProjectionMatrix",Xi()),m(this,"ViewProjectionMatrixUncentered",Xi()),m(this,"viewUncenteredMatrix",Xi()),m(this,"zoom",void 0),m(this,"center",void 0)}return Oe(e,[{key:"syncWithMapCamera",value:function(n){var r=n.zoom,a=r===void 0?1:r,i=n.center,o=i===void 0?[0,0]:i,s=n.offsetOrigin,l=s===void 0?[0,0]:s,u=n.cameraPosition,c=u===void 0?[0,0,0]:u,f=n.up,d=f===void 0?[0,1,0]:f,p=n.lookAt,h=p===void 0?[0,0,0]:p,g=n.aspect,v=g===void 0?1:g,b=n.near,y=b===void 0?.1:b,x=n.far,E=x===void 0?1e3:x,T=n.fov,C=T===void 0?45:T;this.zoom=a,this.center=o,LL(this.projectionMatrix,C/180*Math.PI,v,y,E);var I=Pa.apply(of,Ue(c)),P=Pa.apply(of,Ue(h)),j=Pa.apply(of,Ue(d));FL(this.viewMatrix,I,P,j),this.viewUncenteredMatrix=kL(this.viewMatrix),z2(this.viewMatrix,this.viewMatrix,Pa(-l[0],l[1],0)),Es(this.viewProjectionMatrix,this.projectionMatrix,this.viewMatrix),Es(this.ViewProjectionMatrixUncentered,this.projectionMatrix,this.viewMatrix)}},{key:"getZoom",value:function(){return this.zoom}},{key:"getZoomScale",value:function(){return 1048576}},{key:"getCenter",value:function(){var n=Le(this.center,2),r=n[0],a=n[1];return[r,a]}},{key:"getProjectionMatrix",value:function(){return this.projectionMatrix}},{key:"getModelMatrix",value:function(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}},{key:"getViewMatrix",value:function(){return this.viewMatrix}},{key:"getViewMatrixUncentered",value:function(){return this.viewUncenteredMatrix}},{key:"getViewProjectionMatrix",value:function(){return this.viewProjectionMatrix}},{key:"getViewProjectionMatrixUncentered",value:function(){return this.ViewProjectionMatrixUncentered}},{key:"getFocalDistance",value:function(){return 1}},{key:"projectFlat",value:function(n,r){var a=85.0511287798,i=Math.max(Math.min(a,n[1]),-a),o=256<<20,s=Math.PI/180,l=n[0]*s,u=i*s;u=Math.log(Math.tan(Math.PI/4+u/2));var c=.5/Math.PI,f=.5,d=-.5/Math.PI;return s=.5,l=o*(c*l+f)-215440491,u=-(o*(d*u+s)-106744817),[l,u]}}]),e}(),vfe=["id","style","minZoom","maxZoom","token","mapInstance","plugin","version"],i4,o4,s4,l4,u4,c4,dc,f4,d4,p4,h4;function m4(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function bfe(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?m4(Object(n),!0).forEach(function(r){m(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m4(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function yfe(e,t){var n=typeof my!="undefined"&&!!my&&typeof my.showToast=="function"&&my.isFRM!==!0,r=typeof wx!="undefined"&&wx!==null&&(typeof wx.request!="undefined"||typeof wx.miniProgram!="undefined");if(!(n||r)&&(t||(t=document),!!t)){var a=t.head||t.getElementsByTagName("head")[0];if(!a){a=t.createElement("head");var i=t.body||t.getElementsByTagName("body")[0];i?i.parentNode.insertBefore(a,i):t.documentElement.appendChild(a)}var o=t.createElement("style");return o.type="text/css",o.styleSheet?o.styleSheet.cssText=e:o.appendChild(t.createTextNode(e)),a.appendChild(o),o}}yfe(`.amap-logo{
 display: none !important;
}
`);var xfe=0;window.forceWebGL=!0;var g4="ff533602d57df6f8ab3b0fea226ae52f",wfe="2.0",_fe="amap-script",ux=!1,Hm=[],Efe=(i4=nn(),o4=ln(ye.IGlobalConfigService),s4=ln(ye.MapConfig),l4=ln(ye.ICoordinateSystemService),u4=ln(ye.IEventEmitter),i4(c4=(dc=function(){function e(){var t=this;Ae(this,e),m(this,"version",dr["GAODE2.x"]),m(this,"simpleMapCoord",new mfe),m(this,"map",void 0),m(this,"sceneCenter",void 0),m(this,"sceneCenterMKT",void 0),m(this,"bgColor","rgba(0, 0, 0, 0)"),en(this,"configService",f4,this),en(this,"config",d4,this),en(this,"coordinateSystemService",p4,this),en(this,"eventEmitter",h4,this),m(this,"markerContainer",void 0),m(this,"$mapContainer",void 0),m(this,"viewport",void 0),m(this,"cameraChangedCallback",void 0),m(this,"handleViewChanged",function(n){var r=t.map.customCoords.getCameraParams(),a=r.fov,i=r.near,o=r.far,s=r.aspect,l=r.position,u=r.lookAt,c=r.up;t.emit("mapchange");var f=t.map.customCoords.getCenter();t.cameraChangedCallback&&(t.viewport.syncWithMapCamera({aspect:s,far:o,fov:a,cameraPosition:l,lookAt:u,up:c,near:i,zoom:t.map.getZoom()-1,center:f,offsetOrigin:[l[0],l[1]]}),t.coordinateSystemService.setCoordinateSystem(ll.P20_2),t.cameraChangedCallback(t.viewport))})}return Oe(e,[{key:"setBgColor",value:function(n){this.bgColor=n}},{key:"setCustomCoordCenter",value:function(n){this.sceneCenter=n,this.sceneCenterMKT=Dm.apply(void 0,Ue(n))}},{key:"getCustomCoordCenter",value:function(){return this.sceneCenterMKT}},{key:"lngLatToCoordByLayer",value:function(n,r){var a=Dm.apply(void 0,Ue(r));return this._sub(Dm(n[0],n[1]),a)}},{key:"lngLatToCoordsByLayer",value:function(n,r){var a=this;return n.map(function(i){return typeof i[0]=="number"?a.lngLatToCoordByLayer(i,r):i.map(function(o){return a.lngLatToCoordByLayer(o,r)})})}},{key:"lngLatToCoord",value:function(n){return this.sceneCenter||(this.map.customCoords.setCenter(n),this.setCustomCoordCenter(n)),this._sub(Dm(n[0],n[1]),this.sceneCenterMKT)}},{key:"lngLatToCoords",value:function(n){var r=this;return n.map(function(a){return typeof a[0]=="number"?r.lngLatToCoord(a):a.map(function(i){return r.lngLatToCoord(i)})})}},{key:"addMarkerContainer",value:function(){if(!!this.map){var n=this.map.getContainer();if(n!==null){var r=n.getElementsByClassName("amap-maps")[0];r.style.zIndex="auto",this.markerContainer=fr("div","l7-marker-container2",r)}}}},{key:"getMarkerContainer",value:function(){return this.markerContainer}},{key:"on",value:function(n,r){$5.indexOf(n)!==-1?this.eventEmitter.on(n,r):this.map.on(n,r)}},{key:"off",value:function(n,r){$5.indexOf(n)!==-1?this.eventEmitter.off(n,r):this.map.off(n,r)}},{key:"getContainer",value:function(){return this.map.getContainer()}},{key:"getMapCanvasContainer",value:function(){var n;return(n=this.map.getContainer())===null||n===void 0?void 0:n.getElementsByClassName("amap-maps")[0]}},{key:"getSize",value:function(){var n=this.map.getSize();return[n.getWidth(),n.getHeight()]}},{key:"getType",value:function(){return"amap2"}},{key:"getZoom",value:function(){return this.map.getZoom()-1}},{key:"setZoom",value:function(n){return this.map.setZoom(n+1)}},{key:"getCenter",value:function(n){if(n!=null&&n.padding){var r=this.getCenter(),a=this.getSize(),i=Le(a,2);i[0],i[1];var o=r4(n.padding),s=this.lngLatToPixel([r.lng,r.lat]),l=[(o.right-o.left)/2,(o.bottom-o.top)/2],u=this.pixelToLngLat([s.x-l[0],s.y-l[1]]);return u}var c=this.map.getCenter();return{lng:c.getLng(),lat:c.getLat()}}},{key:"setCenter",value:function(n,r){if(r!=null&&r.padding){var a=r4(r.padding),i=this.lngLatToPixel(n),o=[(a.right-a.left)/2,(a.bottom-a.top)/2],s=this.pixelToLngLat([i.x+o[0],i.y+o[1]]);this.map.setCenter([s.lng,s.lat])}else this.map.setCenter(n)}},{key:"getPitch",value:function(){return this.map.getPitch()}},{key:"getRotation",value:function(){return 360-this.map.getRotation()}},{key:"getBounds",value:function(){var n=this.map.getBounds(),r=n.getNorthEast(),a=n.getSouthWest(),i=this.getCenter(),o=i.lng>r.getLng()||i.lng<a.getLng()?180-r.getLng():r.getLng(),s=i.lng<a.getLng()?a.getLng()-180:a.getLng();return[[s,a.getLat()],[o,r.getLat()]]}},{key:"getMinZoom",value:function(){var n=this.map.getZooms();return n[0]-1}},{key:"getMaxZoom",value:function(){var n=this.map.getZooms();return n[1]-1}},{key:"setRotation",value:function(n){return this.map.setRotation(n)}},{key:"setPitch",value:function(n){return this.map.setPitch(n)}},{key:"zoomIn",value:function(){this.map.zoomIn()}},{key:"zoomOut",value:function(){this.map.zoomOut()}},{key:"panTo",value:function(n){this.map.panTo(n)}},{key:"panBy",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;this.map.panBy(n,r)}},{key:"fitBounds",value:function(n){this.map.setBounds(new AMap.Bounds([n[0][0],n[0][1],n[1][0],n[1][1]]))}},{key:"setZoomAndCenter",value:function(n,r){this.map.setZoomAndCenter(n+1,r)}},{key:"setMapStyle",value:function(n){this.map.setMapStyle(this.getMapStyle(n))}},{key:"setMapStatus",value:function(n){this.map.setStatus(n)}},{key:"pixelToLngLat",value:function(n){var r=this.map.pixelToLngLat(new AMap.Pixel(n[0],n[1]));return{lng:r.getLng(),lat:r.getLat()}}},{key:"lngLatToPixel",value:function(n){var r=this.map.lnglatToPixel(new AMap.LngLat(n[0],n[1]));return{x:r.getX(),y:r.getY()}}},{key:"containerToLngLat",value:function(n){var r=new AMap.Pixel(n[0],n[1]),a=this.map.containerToLngLat(r);return{lng:a==null?void 0:a.getLng(),lat:a==null?void 0:a.getLat()}}},{key:"lngLatToContainer",value:function(n){var r=this.map.lngLatToContainer(n);return{x:r.getX(),y:r.getY()}}},{key:"lngLatToMercator",value:function(n,r){return{x:0,y:0,z:0}}},{key:"getModelMatrix",value:function(n,r,a){var i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:[1,1,1],o=this.map.customCoords.lngLatToCoord(n),s=Xi();return z2(s,s,Pa(o[0],o[1],r)),AL(s,s,Pa(i[0],i[1],i[2])),U2(s,s,a[0]),$2(s,s,a[1]),OL(s,s,a[2]),s}},{key:"init",value:function(){var t=qn(pn.mark(function r(){var a=this,i,o,s,l,u,c,f,d,p,h,g,v,b,y,x,E;return pn.wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return i=this.config,o=i.id,s=i.style,l=s===void 0?"light":s,u=i.minZoom,c=u===void 0?0:u,f=i.maxZoom,d=f===void 0?18:f,p=i.token,h=p===void 0?g4:p,g=i.mapInstance,v=i.plugin,b=v===void 0?[]:v,y=i.version,x=y===void 0?wfe:y,E=On(i,vfe),C.next=3,new Promise(function(I){var P=function(){if(g){var A;a.map=g,a.$mapContainer=a.map.getContainer();var S=a.map.getCenter();(A=a.map.customCoords)===null||A===void 0||A.setCenter([S.lng,S.lat]),a.setCustomCoordCenter([S.lng,S.lat]),setTimeout(function(){a.map.on("viewchange",a.handleViewChanged),I()},30)}else{a.$mapContainer=a.creatAmapContainer(o);var M=bfe({mapStyle:a.getMapStyle(l),zooms:[c,d],viewMode:"3D"},E);M.zoom&&(M.zoom+=1);var O=new AMap.Map(a.$mapContainer,M);a.map=O;var R=O.getCenter();O.customCoords.setCenter([R.lng,R.lat]),a.setCustomCoordCenter([R.lng,R.lat]),O.on("viewchange",a.handleViewChanged),setTimeout(function(){I()},10)}};a.viewport=new gfe,!ux&&!g?(h===g4&&console.warn(a.configService.getSceneWarninfo("MapToken")),ux=!0,b.push("Map3D"),hfe.load({key:h,version:x,plugins:b}).then(function(j){P(),Hm.length&&(Hm.forEach(function(A){return A()}),Hm=[])}).catch(function(j){throw new Error(j)})):ux&&window.AMap||g?P():Hm.push(P)});case 3:case"end":return C.stop()}},r,this)}));function n(){return t.apply(this,arguments)}return n}()},{key:"meterToCoord",value:function(n,r){var a=AMap.GeometryUtil.distance(Jc(AMap.LngLat,Ue(n)),Jc(AMap.LngLat,Ue(r))),i=this.lngLatToCoord(n),o=Le(i,2),s=o[0],l=o[1],u=this.lngLatToCoord(r),c=Le(u,2),f=c[0],d=c[1],p=Math.sqrt(Math.pow(s-f,2)+Math.pow(l-d,2));return p/a}},{key:"exportMap",value:function(n){var r,a=(r=this.getContainer())===null||r===void 0?void 0:r.getElementsByClassName("amap-layer")[0],i=n==="jpg"?a==null?void 0:a.toDataURL("image/jpeg"):a==null?void 0:a.toDataURL("image/png");return i}},{key:"emit",value:function(n){for(var r,a=arguments.length,i=new Array(a>1?a-1:0),o=1;o<a;o++)i[o-1]=arguments[o];(r=this.eventEmitter).emit.apply(r,[n].concat(i))}},{key:"once",value:function(n){for(var r,a=arguments.length,i=new Array(a>1?a-1:0),o=1;o<a;o++)i[o-1]=arguments[o];(r=this.eventEmitter).once.apply(r,[n].concat(i))}},{key:"destroy",value:function(){var n,r;this.map.destroy(),(n=this.$mapContainer)===null||n===void 0||(r=n.parentNode)===null||r===void 0||r.removeChild(this.$mapContainer),delete window.initAMap;var a=document.getElementById(_fe);a&&document.head.removeChild(a)}},{key:"getMapContainer",value:function(){return this.$mapContainer}},{key:"onCameraChanged",value:function(n){this.cameraChangedCallback=n}},{key:"initViewPort",value:function(){var n,r=(n=this.map.customCoords)===null||n===void 0?void 0:n.getCameraParams(),a=r.fov,i=r.near,o=r.far,s=r.aspect,l=r.position,u=r.lookAt,c=r.up;this.emit("mapchange");var f=this.map.customCoords.getCenter(),d=this.map.getZoom();this.cameraChangedCallback&&(this.viewport.syncWithMapCamera({aspect:s,far:o,fov:a,cameraPosition:l,lookAt:u,near:i,up:c,zoom:d-1,center:f,offsetOrigin:[l[0],l[1]]}),this.coordinateSystemService.setCoordinateSystem(ll.P20_2),this.cameraChangedCallback(this.viewport))}},{key:"_sub",value:function(n,r){var a=[0,0];return a[0]=n[0]-r[0],a[1]=n[1]-r[1],a}},{key:"getMapStyle",value:function(n){return a4[n]?a4[n]:n}},{key:"creatAmapContainer",value:function(n){var r=n;typeof n=="string"&&(r=document.getElementById(n));var a=document.createElement("div");return a.style.cssText+=`
      position: absolute;
      top: 0;
      height: 100%;
      width: 100%;
    `,a.id="l7_amap_div"+xfe++,r.appendChild(a),a}}]),e}(),f4=Jt(dc.prototype,"configService",[o4],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),d4=Jt(dc.prototype,"config",[s4],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),p4=Jt(dc.prototype,"coordinateSystemService",[l4],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),h4=Jt(dc.prototype,"eventEmitter",[u4],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),dc))||c4);function kfe(e){var t=Sfe();return function(){var r=Ee(e),a;if(t){var i=Ee(this).constructor;a=Reflect.construct(r,arguments,i)}else a=r.apply(this,arguments);return Mt(this,a)}}function Sfe(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var Cfe=function(e){Ct(n,e);var t=kfe(n);function n(){return Ae(this,n),t.apply(this,arguments)}return Oe(n,[{key:"getServiceConstructor",value:function(){return Efe}}]),n}(pfe);function Tfe(e,t){var n=[t[0]-e[0],t[1]-e[1]],r=n7(n),a=[e[0]+r[0]*1e-4,e[1]+r[1]*1e-4];return a}function Afe(e,t){var n=this;e.length>0&&t.version===dr["GAODE2.x"]&&(typeof e[0].coordinates[0]=="number"?e.filter(function(r){return!r.originCoordinates}).map(function(r){r.version=dr["GAODE2.x"],r.originCoordinates=cloneDeep(r.coordinates),r.coordinates=n.mapService.lngLatToCoord(r.coordinates)}):e.filter(function(r){return!r.originCoordinates}).map(function(r){r.version=dr["GAODE2.x"],r.originCoordinates=cloneDeep(r.coordinates),r.coordinates=n.mapService.lngLatToCoords(r.coordinates)}))}function Ofe(e,t){e.length>0&&t.version===dr.SIMPLE&&e.map(function(n){n.simpleCoordinate||(n.coordinates=Mfe(n.coordinates,t),n.simpleCoordinate=!0)})}function Mfe(e,t){if(typeof e[0]=="number")return t.simpleMapCoord.unproject(e);if(e[0]&&e[0][0]instanceof Array){var n=[];return e.map(function(a){var i=[];a.map(function(o){i.push(t.simpleMapCoord.unproject(o))}),n.push(i)}),n}else{var r=[];return e.map(function(a){r.push(t.simpleMapCoord.unproject(a))}),r}}function Rfe(e,t,n){var r;if(!e.scale)return[];var a=(e==null||(r=e.scale)===null||r===void 0?void 0:r.scalers)||[],i=[];a.forEach(function(s){var l,u=s.field;(t.hasOwnProperty(u)||((l=e.scale)===null||l===void 0?void 0:l.type)==="variable")&&i.push(t[u])});var o=e.mapping?e.mapping(i):[];return e.name==="color"&&!o7(o[0])?[n]:o}function Pfe(e,t,n,r,a,i){var o=i==null?void 0:i.getLayerConfig(),s=o.arrow,l=s===void 0?{enable:!1}:s,u=t.map(function(c){var f={id:c._id,coordinates:c.coordinates};if(e.filter(function(h){return h.scale!==void 0}).forEach(function(h){var g=Rfe(h,c,a);h.needRemapping=!1,h.name==="color"&&(g=g.map(function(v){return Ko(v)})),f[h.name]=Array.isArray(g)&&g.length===1?g[0]:g,h.name==="shape"&&(f.shape=n.getIconFontKey(f[h.name]))}),f.shape==="line"&&l.enable){var d=f.coordinates,p=Tfe(d[0],d[1]);f.coordinates.splice(1,0,p,p)}return f});return Afe(u,r),Ofe(u,r),u}function Ife(e,t,n,r,a,i){var o=new Oh(a,i),s=e.getBottomColor(),l=r.getLayerStyleAttributes()||[],u=o.data.dataArray,c=u,f=Pfe(l,c,t,n,s,e);return o.destroy(),f}function kN(e){return e.map(function(t){return typeof t=="string"&&(t=[t,{}]),t})}function SN(e,t,n,r){var a=e.multiPassRenderer,i=e.getLayerConfig();i.enablePicking;var o=i.enableTAA;return o?a.add(r("taa")):a.add(r("render")),kN(t).forEach(function(s){var l=Le(s,2),u=l[0],c=l[1];a.add(n(u),c)}),a.add(n("copy")),a}var Lfe=[["circle","cylinder"],["square","cylinder"],["triangle","cylinder"],["pentagon","cylinder"],["hexagon","cylinder"],["octogon","cylinder"],["hexagram","cylinder"],["rhombus","cylinder"],["vesica","cylinder"]];function Nfe(e,t,n){if(typeof t=="string"&&typeof n=="string"&&t!==n){if(e.type==="PointLayer"){e.dataState.dataSourceNeedUpdate=!0;return}Lfe.map(function(r){if(r.includes(t)&&r.includes(n)){e.dataState.dataSourceNeedUpdate=!0;return}})}}var Ffe=["passes"],Dfe=["moduleName","vertexShader","fragmentShader","triangulation","segmentNumber"],v4,cx,b4;function Bfe(e,t){var n=typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=zfe(e))||t&&e&&typeof e.length=="number"){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(u){throw u},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i=!0,o=!1,s;return{s:function(){n=n.call(e)},n:function(){var u=n.next();return i=u.done,u},e:function(u){o=!0,s=u},f:function(){try{!i&&n.return!=null&&n.return()}finally{if(o)throw s}}}}function zfe(e,t){if(!!e){if(typeof e=="string")return y4(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return y4(e,t)}}function y4(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function x4(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Oa(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?x4(Object(n),!0).forEach(function(r){m(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):x4(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Ufe(e){var t=$fe();return function(){var r=Ee(e),a;if(t){var i=Ee(this).constructor;a=Reflect.construct(r,arguments,i)}else a=r.apply(this,arguments);return Mt(this,a)}}function $fe(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var w4=0,Ph=(v4=G2(ye.IGlobalConfigService),cx=function(e){Ct(n,e);var t=Ufe(n);function n(){var r,a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Ae(this,n),r=t.call(this),m(D(r),"id","".concat(w4++)),m(D(r),"name","".concat(w4)),m(D(r),"type",void 0),m(D(r),"visible",!0),m(D(r),"zIndex",0),m(D(r),"minZoom",void 0),m(D(r),"maxZoom",void 0),m(D(r),"inited",!1),m(D(r),"layerModelNeedUpdate",!1),m(D(r),"pickedFeatureID",null),m(D(r),"selectedFeatureID",null),m(D(r),"styleNeedUpdate",!1),m(D(r),"rendering",void 0),m(D(r),"clusterZoom",0),m(D(r),"layerType",void 0),m(D(r),"triangulation",void 0),m(D(r),"dataState",{dataSourceNeedUpdate:!1,dataMappingNeedUpdate:!1,filterNeedUpdate:!1,featureScaleNeedUpdate:!1,StyleAttrNeedUpdate:!1}),m(D(r),"hooks",{init:new Yy,afterInit:new Yy,beforeRender:new Yy,beforeRenderData:new Hte,afterRender:new Do,beforePickingEncode:new Do,afterPickingEncode:new Do,beforeHighlight:new Do(["pickedColor"]),afterHighlight:new Do,beforeSelect:new Do(["pickedColor"]),afterSelect:new Do,beforeDestroy:new Do,afterDestroy:new Do}),m(D(r),"models",[]),m(D(r),"multiPassRenderer",void 0),m(D(r),"plugins",void 0),m(D(r),"sourceOption",void 0),m(D(r),"layerModel",void 0),m(D(r),"shapeOption",void 0),m(D(r),"sceneContainer",void 0),m(D(r),"tileLayer",void 0),m(D(r),"layerChildren",[]),m(D(r),"masks",[]),m(D(r),"isVector",!1),en(D(r),"configService",b4,D(r)),m(D(r),"shaderModuleService",void 0),m(D(r),"cameraService",void 0),m(D(r),"coordinateService",void 0),m(D(r),"iconService",void 0),m(D(r),"fontService",void 0),m(D(r),"pickingService",void 0),m(D(r),"rendererService",void 0),m(D(r),"layerService",void 0),m(D(r),"interactionService",void 0),m(D(r),"mapService",void 0),m(D(r),"styleAttributeService",void 0),m(D(r),"layerSource",void 0),m(D(r),"postProcessingPassFactory",void 0),m(D(r),"normalPassFactory",void 0),m(D(r),"animateOptions",{enable:!1}),m(D(r),"container",void 0),m(D(r),"encodedData",void 0),m(D(r),"configSchema",void 0),m(D(r),"currentPickId",null),m(D(r),"rawConfig",void 0),m(D(r),"needUpdateConfig",void 0),m(D(r),"pendingStyleAttributes",[]),m(D(r),"scaleOptions",{}),m(D(r),"animateStartTime",void 0),m(D(r),"aniamateStatus",!1),m(D(r),"bottomColor","rgba(0, 0, 0, 0)"),m(D(r),"isDestroied",!1),m(D(r),"sourceEvent",function(){r.dataState.dataSourceNeedUpdate=!0;var i=r.getLayerConfig(),o=i.autoFit,s=i.fitBoundsOptions;o&&r.fitBounds(s),r.reRender()}),r.name=a.name||r.id,r.zIndex=a.zIndex||0,r.rawConfig=a,r}return Oe(n,[{key:"addMaskLayer",value:function(a){this.masks.push(a)}},{key:"removeMaskLayer",value:function(a){var i=this.masks.indexOf(a);i>-1&&this.masks.splice(i,1),a.destroy()}},{key:"getAttribute",value:function(a){return this.styleAttributeService.getLayerStyleAttribute(a)}},{key:"getLayerConfig",value:function(){return this.configService.getLayerConfig(this.id)}},{key:"updateLayerConfig",value:function(a){if(!this.inited)this.needUpdateConfig=Oa(Oa({},this.needUpdateConfig),a);else{var i=this.container.get(ye.SceneID);ffe(a,this),this.configService.setLayerConfig(i,this.id,Oa(Oa(Oa({},this.configService.getLayerConfig(this.id)),this.needUpdateConfig),a)),this.needUpdateConfig={}}}},{key:"setContainer",value:function(a,i){this.container=a,this.sceneContainer=i}},{key:"getContainer",value:function(){return this.container}},{key:"setBottomColor",value:function(a){this.bottomColor=a}},{key:"getBottomColor",value:function(){return this.bottomColor}},{key:"addPlugin",value:function(a){return this.plugins.push(a),this}},{key:"init",value:function(){var a=this,i=this.container.get(ye.SceneID);this.configService.setLayerConfig(i,this.id,this.rawConfig),this.layerType=this.rawConfig.layerType,this.iconService=this.container.get(ye.IIconService),this.fontService=this.container.get(ye.IFontService),this.rendererService=this.container.get(ye.IRendererService),this.layerService=this.container.get(ye.ILayerService),this.interactionService=this.container.get(ye.IInteractionService),this.pickingService=this.container.get(ye.IPickingService),this.mapService=this.container.get(ye.IMapService);var o=this.getLayerConfig(),s=o.enableMultiPassRenderer,l=o.passes;s&&l!==null&&l!==void 0&&l.length&&l.length>0&&this.mapService.on("mapAfterFrameChange",function(){a.renderLayers()}),this.cameraService=this.container.get(ye.ICameraService),this.coordinateService=this.container.get(ye.ICoordinateSystemService),this.shaderModuleService=this.container.get(ye.IShaderModuleService),this.postProcessingPassFactory=this.container.get(ye.IFactoryPostProcessingPass),this.normalPassFactory=this.container.get(ye.IFactoryNormalPass),this.styleAttributeService=this.container.get(ye.IStyleAttributeService),this.multiPassRenderer=this.container.get(ye.IMultiPassRenderer),this.multiPassRenderer.setLayer(this),this.pendingStyleAttributes.forEach(function(d){var p=d.attributeName,h=d.attributeField,g=d.attributeValues,v=d.updateOptions;a.styleAttributeService.updateStyleAttribute(p,{scale:Oa({field:h},a.splitValuesAndCallbackInAttribute(g,a.getLayerConfig()[p]))},v)}),this.pendingStyleAttributes=[],this.plugins=this.container.getAll(ye.ILayerPlugin);var u=Bfe(this.plugins),c;try{for(u.s();!(c=u.n()).done;){var f=c.value;f.apply(this,{rendererService:this.rendererService,mapService:this.mapService,styleAttributeService:this.styleAttributeService,normalPassFactory:this.normalPassFactory,postProcessingPassFactory:this.postProcessingPassFactory})}}catch(d){u.e(d)}finally{u.f()}return this.hooks.init.call(),this.hooks.afterInit.call(),this.emit("inited",{target:this,type:"inited"}),this.emit("add",{target:this,type:"add"}),this}},{key:"updateModelData",value:function(a){a.attributes&&a.elements?this.models.map(function(i){i.updateAttributesAndElements(a.attributes,a.elements)}):console.warn("data error")}},{key:"createModelData",value:function(a,i){if(this.layerModel.createModelData)return this.layerModel.createModelData(i);var o=this.calculateEncodeData(a,i),s=this.triangulation;return o&&s?this.styleAttributeService.createAttributesAndIndices(o,s):{attributes:void 0,elements:void 0}}},{key:"calculateEncodeData",value:function(a,i){return this.inited?Ife(this,this.fontService,this.mapService,this.styleAttributeService,a,i):(console.warn("layer not inited!"),null)}},{key:"prepareBuildModel",value:function(){this.inited=!0,this.updateLayerConfig(Oa(Oa({},this.getDefaultConfig()),this.rawConfig));var a=this.getLayerConfig(),i=a.animateOption;i!=null&&i.enable&&(this.layerService.startAnimate(),this.aniamateStatus=!0)}},{key:"color",value:function(a,i,o){return this.updateStyleAttribute("color",a,i,o),this}},{key:"texture",value:function(a,i,o){return this.updateStyleAttribute("texture",a,i,o),this}},{key:"rotate",value:function(a,i,o){return this.updateStyleAttribute("rotate",a,i,o),this}},{key:"size",value:function(a,i,o){return this.updateStyleAttribute("size",a,i,o),this}},{key:"filter",value:function(a,i,o){return this.updateStyleAttribute("filter",a,i,o),this}},{key:"shape",value:function(a,i,o){var s,l,u,c=(s=this.styleAttributeService)===null||s===void 0||(l=s.getLayerStyleAttribute("shape"))===null||l===void 0||(u=l.scale)===null||u===void 0?void 0:u.field,f=a;return this.shapeOption={field:a,values:i},this.updateStyleAttribute("shape",a,i,o),this.tileLayer||Nfe(this,c,f),this}},{key:"label",value:function(a,i,o){return this.pendingStyleAttributes.push({attributeName:"label",attributeField:a,attributeValues:i,updateOptions:o}),this}},{key:"animate",value:function(a){var i={};return lr(a)?(i.enable=!0,i=Oa(Oa({},i),a)):i.enable=a,this.updateLayerConfig({animateOption:i}),this}},{key:"source",value:function(a,i){return a!=null&&a.data?(this.setSource(a),this):(this.sourceOption={data:a,options:i},this.clusterZoom=0,this)}},{key:"setData",value:function(a,i){var o=this;return this.inited?this.layerSource.setData(a,i):this.on("inited",function(){var s=o.getSource();s?o.layerSource.setData(a,i):(o.source(new Oh(a,i)),o.sourceEvent())}),this}},{key:"style",value:function(a){var i=this,o=this.getLayerConfig(),s=a.passes,l=On(a,Ffe);return s&&kN(s).forEach(function(u){var c=i.multiPassRenderer.getPostProcessor().getPostProcessingPassByName(u[0]);c&&c.updateOptions(u[1])}),this.rawConfig=Oa(Oa({},this.rawConfig),l),this.container&&(this.updateLayerConfig(this.rawConfig),this.styleNeedUpdate=!0),o&&o.mask===!0&&a.mask===!1&&(this.clearModels(),this.models=this.layerModel.buildModels()),this}},{key:"scale",value:function(a,i){return lr(a)?this.scaleOptions=Oa(Oa({},this.scaleOptions),a):this.scaleOptions[a]=i,this}},{key:"renderLayers",value:function(){this.rendering=!0,this.layerService.renderLayers(),this.rendering=!1}},{key:"render",value:function(){return this.tileLayer!==void 0?(this.tileLayer.render(),this):(this.getEncodedData().length!==0&&this.renderModels(),this)}},{key:"renderMultiPass",value:function(){var r=qn(pn.mark(function i(){return pn.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(this.getEncodedData().length===0){s.next=7;break}if(!(this.multiPassRenderer&&this.multiPassRenderer.getRenderFlag())){s.next=6;break}return s.next=4,this.multiPassRenderer.render();case 4:s.next=7;break;case 6:this.multiPassRenderer?this.renderModels():this.renderModels();case 7:case"end":return s.stop()}},i,this)}));function a(){return r.apply(this,arguments)}return a}()},{key:"active",value:function(a){var i={};return i.enableHighlight=lr(a)?!0:a,lr(a)?(i.enableHighlight=!0,a.color&&(i.highlightColor=a.color),a.mix&&(i.activeMix=a.mix)):i.enableHighlight=!!a,this.updateLayerConfig(i),this}},{key:"setActive",value:function(a,i){var o=this;if(lr(a)){var s=a.x,l=s===void 0?0:s,u=a.y,c=u===void 0?0:u;this.updateLayerConfig({highlightColor:lr(i)?i.color:this.getLayerConfig().highlightColor,activeMix:lr(i)?i.mix:this.getLayerConfig().activeMix}),this.pick({x:l,y:c})}else this.updateLayerConfig({pickedFeatureID:a,highlightColor:lr(i)?i.color:this.getLayerConfig().highlightColor,activeMix:lr(i)?i.mix:this.getLayerConfig().activeMix}),this.hooks.beforeSelect.call(Jp(a)).then(function(){setTimeout(function(){o.reRender()},1)})}},{key:"select",value:function(a){var i={};return i.enableSelect=lr(a)?!0:a,lr(a)?(i.enableSelect=!0,a.color&&(i.selectColor=a.color),a.mix&&(i.selectMix=a.mix)):i.enableSelect=!!a,this.updateLayerConfig(i),this}},{key:"setSelect",value:function(a,i){var o=this;if(lr(a)){var s=a.x,l=s===void 0?0:s,u=a.y,c=u===void 0?0:u;this.updateLayerConfig({selectColor:lr(i)?i.color:this.getLayerConfig().selectColor,selectMix:lr(i)?i.mix:this.getLayerConfig().selectMix}),this.pick({x:l,y:c})}else this.updateLayerConfig({pickedFeatureID:a,selectColor:lr(i)?i.color:this.getLayerConfig().selectColor,selectMix:lr(i)?i.mix:this.getLayerConfig().selectMix}),this.hooks.beforeSelect.call(Jp(a)).then(function(){setTimeout(function(){o.reRender()},1)})}},{key:"setBlend",value:function(a){return this.updateLayerConfig({blend:a}),this.layerModelNeedUpdate=!0,this.reRender(),this}},{key:"show",value:function(){return this.updateLayerConfig({visible:!0}),this.reRender(),this}},{key:"hide",value:function(){return this.type==="CanvasLayer"&&this.layerModel.clearCanvas&&this.layerModel.clearCanvas(),this.updateLayerConfig({visible:!1}),this.reRender(),this}},{key:"setIndex",value:function(a){return this.zIndex=a,this.layerService.updateLayerRenderList(),this.layerService.renderLayers(),this}},{key:"setCurrentPickId",value:function(a){this.currentPickId=a}},{key:"getCurrentPickId",value:function(){return this.currentPickId}},{key:"setCurrentSelectedId",value:function(a){this.selectedFeatureID=a}},{key:"getCurrentSelectedId",value:function(){return this.selectedFeatureID}},{key:"isVisible",value:function(){var a=this.mapService.getZoom(),i=this.getLayerConfig(),o=i.visible,s=i.minZoom,l=s===void 0?-1/0:s,u=i.maxZoom,c=u===void 0?1/0:u;return!!o&&a>=l&&a<=c}},{key:"setMultiPass",value:function(a,i){if(this.updateLayerConfig({enableMultiPassRenderer:a}),i&&this.updateLayerConfig({passes:i}),a){var o=this.getLayerConfig(),s=o.passes,l=s===void 0?[]:s;this.multiPassRenderer=SN(this,l,this.postProcessingPassFactory,this.normalPassFactory),this.multiPassRenderer.setRenderFlag(!0);var u=this.rendererService.getViewportSize(),c=u.width,f=u.height;this.multiPassRenderer.resize(c,f)}return this}},{key:"setMinZoom",value:function(a){return this.updateLayerConfig({minZoom:a}),this}},{key:"getMinZoom",value:function(){var a=this.getLayerConfig(),i=a.minZoom;return i}},{key:"getMaxZoom",value:function(){var a=this.getLayerConfig(),i=a.maxZoom;return i}},{key:"get",value:function(a){var i=this.getLayerConfig();return i[a]}},{key:"setMaxZoom",value:function(a){return this.updateLayerConfig({maxZoom:a}),this}},{key:"setAutoFit",value:function(a){return this.updateLayerConfig({autoFit:a}),this}},{key:"fitBounds",value:function(a){if(!this.inited)return this.updateLayerConfig({autoFit:!0}),this;var i=this.getSource(),o=i.extent,s=o.some(function(l){return Math.abs(l)===1/0});return s?this:(this.mapService.fitBounds([[o[0],o[1]],[o[2],o[3]]],a),this)}},{key:"destroy",value:function(){var a,i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.isDestroied||(this.layerChildren.map(function(o){return o.destroy()}),this.layerChildren=[],this.masks.map(function(o){return o.destroy()}),this.masks=[],this.hooks.beforeDestroy.call(),this.layerSource.off("update",this.sourceEvent),this.multiPassRenderer.destroy(),this.styleAttributeService.clearAllAttributes(),this.hooks.afterDestroy.call(),(a=this.layerModel)===null||a===void 0||a.clearModels(),this.models=[],this.layerService.cleanRemove(this,i),this.emit("remove",{target:this,type:"remove"}),this.emit("destroy",{target:this,type:"destroy"}),this.removeAllListeners(),this.isDestroied=!0)}},{key:"clear",value:function(){this.styleAttributeService.clearAllAttributes()}},{key:"clearModels",value:function(){this.models.forEach(function(a){return a.destroy()}),this.layerModel.clearModels(),this.models=[]}},{key:"isDirty",value:function(){return!!(this.styleAttributeService.getLayerStyleAttributes()||[]).filter(function(a){return a.needRescale||a.needRemapping||a.needRegenerateVertices}).length}},{key:"setSource",value:function(a){if(this.layerSource&&this.layerSource.off("update",this.sourceEvent),this.layerSource=a,this.clusterZoom=0,this.inited&&this.layerSource.cluster){var i=this.mapService.getZoom();this.layerSource.updateClusterData(i)}this.layerSource.on("update",this.sourceEvent)}},{key:"getSource",value:function(){return this.layerSource}},{key:"getScaleOptions",value:function(){return this.scaleOptions}},{key:"setEncodedData",value:function(a){this.encodedData=a}},{key:"getEncodedData",value:function(){return this.encodedData}},{key:"getScale",value:function(a){return this.styleAttributeService.getLayerAttributeScale(a)}},{key:"getLegendItems",value:function(a){var i=this.styleAttributeService.getLayerAttributeScale(a);if(!i)return[];if(i.invertExtent){var o=i.range().map(function(u){return m({value:i.invertExtent(u)},a,u)});return o}else if(i.ticks){var s=i.ticks().map(function(u){return m({value:u},a,i(u))});return s}else if(i!=null&&i.domain){var l=i.domain().filter(function(u){return!ofe(u)}).map(function(u){return m({value:u},a,i(u))});return l}return[]}},{key:"pick",value:function(a){var i=a.x,o=a.y;this.interactionService.triggerHover({x:i,y:o})}},{key:"boxSelect",value:function(a,i){this.pickingService.boxPickLayer(this,a,i)}},{key:"buildLayerModel",value:function(a){var i=a.moduleName,o=a.vertexShader,s=a.fragmentShader,l=a.triangulation,u=a.segmentNumber,c=On(a,Dfe);this.shaderModuleService.registerModule(i,{vs:o,fs:s});var f=this.shaderModuleService.getModule(i),d=f.vs,p=f.fs,h=f.uniforms,g=this.rendererService.createModel,v=this.styleAttributeService.createAttributesAndIndices(this.encodedData,l,u),b=v.attributes,y=v.elements;return g(Oa({attributes:b,uniforms:h,fs:p,vs:d,elements:y,blend:_N[Hi.normal]},c))}},{key:"createAttrubutes",value:function(a){var i=a.triangulation,o=this.styleAttributeService.createAttributes(this.encodedData,i),s=o.attributes;return s}},{key:"getTime",value:function(){return this.layerService.clock.getDelta()}},{key:"setAnimateStartTime",value:function(){this.animateStartTime=this.layerService.clock.getElapsedTime()}},{key:"stopAnimate",value:function(){this.aniamateStatus&&(this.layerService.stopAnimate(),this.aniamateStatus=!1,this.updateLayerConfig({animateOption:{enable:!1}}))}},{key:"getLayerAnimateTime",value:function(){return this.layerService.clock.getElapsedTime()-this.animateStartTime}},{key:"needPick",value:function(a){var i=this.getLayerConfig(),o=i.enableHighlight,s=o===void 0?!0:o,l=i.enableSelect,u=l===void 0?!0:l,c=this.eventNames().indexOf(a)!==-1||this.eventNames().indexOf("un"+a)!==-1;return(a==="click"||a==="dblclick")&&u&&(c=!0),a==="mousemove"&&(s||this.eventNames().indexOf("mouseenter")!==-1||this.eventNames().indexOf("unmousemove")!==-1||this.eventNames().indexOf("mouseout")!==-1)&&(c=!0),this.isVisible()&&c}},{key:"buildModels",value:function(){throw new Error("Method not implemented.")}},{key:"rebuildModels",value:function(){throw new Error("Method not implemented.")}},{key:"renderMulPass",value:function(){var r=qn(pn.mark(function i(o){return pn.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,o.render();case 2:case"end":return l.stop()}},i)}));function a(i){return r.apply(this,arguments)}return a}()},{key:"renderModels",value:function(a){var i=this;return this.getEncodedData().length>0&&(this.layerModelNeedUpdate&&this.layerModel&&(this.models=this.layerModel.buildModels(),this.hooks.beforeRender.call(),this.layerModelNeedUpdate=!1),this.layerModel.renderUpdate&&this.layerModel.renderUpdate(),this.models.forEach(function(o){o.draw({uniforms:i.layerModel.getUninforms()},a)})),this}},{key:"updateStyleAttribute",value:function(a,i,o,s){this.inited?this.styleAttributeService.updateStyleAttribute(a,{scale:Oa({field:i},this.splitValuesAndCallbackInAttribute(o,this.getLayerConfig()[i]))},s):this.pendingStyleAttributes.push({attributeName:a,attributeField:i,attributeValues:o,updateOptions:s})}},{key:"getShaderPickStat",value:function(){return this.layerService.getShaderPickStat()}},{key:"setEarthTime",value:function(a){console.warn("empty fn")}},{key:"getConfigSchema",value:function(){throw new Error("Method not implemented.")}},{key:"getModelType",value:function(){throw new Error("Method not implemented.")}},{key:"getDefaultConfig",value:function(){return{}}},{key:"reRender",value:function(){this.inited&&(this.layerService.updateLayerRenderList(),this.layerService.renderLayers())}},{key:"splitValuesAndCallbackInAttribute",value:function(a,i){return{values:Qo(a)?void 0:a||i,callback:Qo(a)?a:void 0}}}]),n}(Si.exports.EventEmitter),b4=Jt(cx.prototype,"configService",[v4],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),cx);function Vfe(e,t){for(var n=-1,r=e==null?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}var jfe=Vfe,Gfe=KL,Hfe=jfe,Wfe=QL,Xfe=1,Yfe=2;function Zfe(e,t,n,r,a,i){var o=n&Xfe,s=e.length,l=t.length;if(s!=l&&!(o&&l>s))return!1;var u=i.get(e),c=i.get(t);if(u&&c)return u==t&&c==e;var f=-1,d=!0,p=n&Yfe?new Gfe:void 0;for(i.set(e,t),i.set(t,e);++f<s;){var h=e[f],g=t[f];if(r)var v=o?r(g,h,f,t,e,i):r(h,g,f,e,t,i);if(v!==void 0){if(v)continue;d=!1;break}if(p){if(!Hfe(t,function(b,y){if(!Wfe(p,y)&&(h===b||a(h,b,n,r,i)))return p.push(y)})){d=!1;break}}else if(!(h===g||a(h,g,n,r,i))){d=!1;break}}return i.delete(e),i.delete(t),d}var CN=Zfe;function qfe(e){var t=-1,n=Array(e.size);return e.forEach(function(r,a){n[++t]=[a,r]}),n}var Kfe=qfe,_4=Ch,E4=x7,Qfe=Sh,Jfe=CN,ede=Kfe,tde=j2,nde=1,rde=2,ade="[object Boolean]",ide="[object Date]",ode="[object Error]",sde="[object Map]",lde="[object Number]",ude="[object RegExp]",cde="[object Set]",fde="[object String]",dde="[object Symbol]",pde="[object ArrayBuffer]",hde="[object DataView]",k4=_4?_4.prototype:void 0,fx=k4?k4.valueOf:void 0;function mde(e,t,n,r,a,i,o){switch(n){case hde:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case pde:return!(e.byteLength!=t.byteLength||!i(new E4(e),new E4(t)));case ade:case ide:case lde:return Qfe(+e,+t);case ode:return e.name==t.name&&e.message==t.message;case ude:case fde:return e==t+"";case sde:var s=ede;case cde:var l=r&nde;if(s||(s=tde),e.size!=t.size&&!l)return!1;var u=o.get(e);if(u)return u==t;r|=rde,o.set(e,t);var c=Jfe(s(e),s(t),r,a,i,o);return o.delete(e),c;case dde:if(fx)return fx.call(e)==fx.call(t)}return!1}var gde=mde,S4=V7,vde=1,bde=Object.prototype,yde=bde.hasOwnProperty;function xde(e,t,n,r,a,i){var o=n&vde,s=S4(e),l=s.length,u=S4(t),c=u.length;if(l!=c&&!o)return!1;for(var f=l;f--;){var d=s[f];if(!(o?d in t:yde.call(t,d)))return!1}var p=i.get(e),h=i.get(t);if(p&&h)return p==t&&h==e;var g=!0;i.set(e,t),i.set(t,e);for(var v=o;++f<l;){d=s[f];var b=e[d],y=t[d];if(r)var x=o?r(y,b,d,t,e,i):r(b,y,d,e,t,i);if(!(x===void 0?b===y||a(b,y,n,r,i):x)){g=!1;break}v||(v=d=="constructor")}if(g&&!v){var E=e.constructor,T=t.constructor;E!=T&&"constructor"in e&&"constructor"in t&&!(typeof E=="function"&&E instanceof E&&typeof T=="function"&&T instanceof T)&&(g=!1)}return i.delete(e),i.delete(t),g}var wde=xde,dx=E2,_de=CN,Ede=gde,kde=wde,C4=Ev,T4=Du,A4=yf.exports,Sde=_v,Cde=1,O4="[object Arguments]",M4="[object Array]",Wm="[object Object]",Tde=Object.prototype,R4=Tde.hasOwnProperty;function Ade(e,t,n,r,a,i){var o=T4(e),s=T4(t),l=o?M4:C4(e),u=s?M4:C4(t);l=l==O4?Wm:l,u=u==O4?Wm:u;var c=l==Wm,f=u==Wm,d=l==u;if(d&&A4(e)){if(!A4(t))return!1;o=!0,c=!1}if(d&&!c)return i||(i=new dx),o||Sde(e)?_de(e,t,n,r,a,i):Ede(e,t,l,n,r,a,i);if(!(n&Cde)){var p=c&&R4.call(e,"__wrapped__"),h=f&&R4.call(t,"__wrapped__");if(p||h){var g=p?e.value():e,v=h?t.value():t;return i||(i=new dx),a(g,v,n,r,i)}}return d?(i||(i=new dx),kde(e,t,n,r,a,i)):!1}var Ode=Ade,Mde=Ode,P4=Co;function TN(e,t,n,r,a){return e===t?!0:e==null||t==null||!P4(e)&&!P4(t)?e!==e&&t!==t:Mde(e,t,n,r,TN,a)}var Rde=TN,Pde=Rde;function Ide(e,t){return Pde(e,t)}var gs=Ide,I4,px,L4;function Lde(e,t){var n=typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=Nde(e))||t&&e&&typeof e.length=="number"){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(u){throw u},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i=!0,o=!1,s;return{s:function(){n=n.call(e)},n:function(){var u=n.next();return i=u.done,u},e:function(u){o=!0,s=u},f:function(){try{!i&&n.return!=null&&n.return()}finally{if(o)throw s}}}}function Nde(e,t){if(!!e){if(typeof e=="string")return N4(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return N4(e,t)}}function N4(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Fa=(I4=G2(ye.IGlobalConfigService),px=function(){function e(t){Ae(this,e),m(this,"triangulation",void 0),m(this,"createTexture2D",void 0),m(this,"layer",void 0),m(this,"dataTexture",void 0),m(this,"DATA_TEXTURE_WIDTH",void 0),m(this,"rowCount",void 0),m(this,"cacheStyleProperties",void 0),m(this,"cellLength",void 0),m(this,"cellProperties",void 0),m(this,"cellTypeLayout",void 0),m(this,"stylePropertyesExist",void 0),m(this,"dataTextureTest",void 0),en(this,"configService",L4,this),m(this,"shaderModuleService",void 0),m(this,"rendererService",void 0),m(this,"iconService",void 0),m(this,"fontService",void 0),m(this,"styleAttributeService",void 0),m(this,"mapService",void 0),m(this,"cameraService",void 0),m(this,"layerService",void 0),m(this,"pickingService",void 0),this.layer=t,this.rendererService=t.getContainer().get(ye.IRendererService),this.pickingService=t.getContainer().get(ye.IPickingService),this.shaderModuleService=t.getContainer().get(ye.IShaderModuleService),this.styleAttributeService=t.getContainer().get(ye.IStyleAttributeService),this.mapService=t.getContainer().get(ye.IMapService),this.iconService=t.getContainer().get(ye.IIconService),this.fontService=t.getContainer().get(ye.IFontService),this.cameraService=t.getContainer().get(ye.ICameraService),this.layerService=t.getContainer().get(ye.ILayerService),this.registerBuiltinAttributes(),this.startModelAnimate();var n=this.rendererService.createTexture2D;this.createTexture2D=n,this.DATA_TEXTURE_WIDTH=1024,this.rowCount=1,this.cellLength=0,this.cellProperties=[],this.cacheStyleProperties={thetaOffset:void 0,opacity:void 0,strokeOpacity:void 0,strokeWidth:void 0,stroke:void 0,offsets:void 0},this.stylePropertyesExist={hasThetaOffset:0,hasOpacity:0,hasStrokeOpacity:0,hasStrokeWidth:0,hasStroke:0,hasOffsets:0},this.dataTextureTest=this.layerService.getOESTextureFloat(),this.dataTextureTest||(this.dataTexture=this.createTexture2D({data:new Uint8Array(4),mag:V.NEAREST,min:V.NEAREST,width:1,height:1}))}return Oe(e,[{key:"clearLastCalRes",value:function(){this.cellProperties=[],this.cellLength=0,this.stylePropertyesExist={hasThetaOffset:0,hasOpacity:0,hasStrokeOpacity:0,hasStrokeWidth:0,hasStroke:0,hasOffsets:0}}},{key:"getCellTypeLayout",value:function(){return this.dataTextureTest?[this.rowCount,this.DATA_TEXTURE_WIDTH,0,0,this.stylePropertyesExist.hasOpacity,this.stylePropertyesExist.hasStrokeOpacity,this.stylePropertyesExist.hasStrokeWidth,this.stylePropertyesExist.hasStroke,this.stylePropertyesExist.hasOffsets,this.stylePropertyesExist.hasThetaOffset,0,0,0,0,0,1]:[1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,-1]}},{key:"dataTextureNeedUpdate",value:function(n){var r=!1;return gs(n.thetaOffset,this.cacheStyleProperties.thetaOffset)||(r=!0,this.cacheStyleProperties.thetaOffset=n.thetaOffset),gs(n.opacity,this.cacheStyleProperties.opacity)||(r=!0,this.cacheStyleProperties.opacity=n.opacity),gs(n.strokeOpacity,this.cacheStyleProperties.strokeOpacity)||(r=!0,this.cacheStyleProperties.strokeOpacity=n.strokeOpacity),gs(n.strokeWidth,this.cacheStyleProperties.strokeWidth)||(r=!0,this.cacheStyleProperties.strokeWidth=n.strokeWidth),gs(n.stroke,this.cacheStyleProperties.stroke)||(r=!0,this.cacheStyleProperties.stroke=n.stroke),gs(n.offsets,this.cacheStyleProperties.offsets)||(r=!0,this.cacheStyleProperties.offsets=n.offsets),this.dataTexture===void 0&&(r=!0),r}},{key:"judgeStyleAttributes",value:function(n){this.clearLastCalRes(),n.opacity!==void 0&&!Gn(n.opacity)&&(this.cellProperties.push({attr:"opacity",count:1}),this.stylePropertyesExist.hasOpacity=1,this.cellLength+=1),n.strokeOpacity!==void 0&&!Gn(n.strokeOpacity)&&(this.cellProperties.push({attr:"strokeOpacity",count:1}),this.stylePropertyesExist.hasStrokeOpacity=1,this.cellLength+=1),n.strokeWidth!==void 0&&!Gn(n.strokeWidth)&&(this.cellProperties.push({attr:"strokeWidth",count:1}),this.stylePropertyesExist.hasStrokeWidth=1,this.cellLength+=1),n.stroke!==void 0&&!this.isStaticColor(n.stroke)&&(this.cellProperties.push({attr:"stroke",count:4}),this.stylePropertyesExist.hasStroke=1,this.cellLength+=4),n.offsets!==void 0&&!this.isOffsetStatic(n.offsets)&&(this.cellProperties.push({attr:"offsets",count:2}),this.stylePropertyesExist.hasOffsets=1,this.cellLength+=2),n.thetaOffset!==void 0&&!Gn(n.thetaOffset)&&(this.cellProperties.push({attr:"thetaOffset",count:1}),this.stylePropertyesExist.hasThetaOffset=1,this.cellLength+=1)}},{key:"isStaticColor",value:function(n){return xo(n)?!!Sl(n):!1}},{key:"getStrokeColor",value:function(n){if(this.isStaticColor(n)){var r=Ko(n);return r[0]=r[0]?r[0]:0,r[1]=r[1]?r[1]:0,r[2]=r[2]?r[2]:0,r[3]=r[3]?r[3]:0,r}else return[0,0,0,0]}},{key:"isOffsetStatic",value:function(n){return!!(Array.isArray(n)&&n.length===2&&Gn(n[0])&&Gn(n[1]))}},{key:"patchMod",value:function(n,r){for(var a=0;a<r;a++)n.push(-1)}},{key:"patchData",value:function(n,r,a){var i=Lde(a),o;try{for(i.s();!(o=i.n()).done;){var s=o.value,l=s.attr,u=s.count,c=r[l];c!==void 0?l==="stroke"?n.push.apply(n,Ue(Ko(c))):l==="offsets"?this.isOffsetStatic(c)?n.push(-c[0],c[1]):n.push(0,0):n.push(Gn(c)?c:1):this.patchMod(n,u)}}catch(f){i.e(f)}finally{i.f()}}},{key:"calDataFrame",value:function(n,r,a){for(var i=r.length,o=Math.ceil(i*n/this.DATA_TEXTURE_WIDTH),s=o*this.DATA_TEXTURE_WIDTH,l=[],u=0;u<i;u++){var c=r[u];this.patchData(l,c,a)}for(var f=l.length;f<s;f++)l.push(-1);return{data:l,width:this.DATA_TEXTURE_WIDTH,height:o}}},{key:"getBlend",value:function(){var n=this.layer.getLayerConfig(),r=n.blend,a=r===void 0?"normal":r;return _N[Hi[a]]}},{key:"getDefaultStyle",value:function(){return{}}},{key:"getUninforms",value:function(){throw new Error("Method not implemented.")}},{key:"getAnimateUniforms",value:function(){return{}}},{key:"needUpdate",value:function(){return!1}},{key:"buildModels",value:function(){throw new Error("Method not implemented.")}},{key:"initModels",value:function(){throw new Error("Method not implemented.")}},{key:"clearModels",value:function(){}},{key:"getAttribute",value:function(){throw new Error("Method not implemented.")}},{key:"render",value:function(){throw new Error("Method not implemented.")}},{key:"registerBuiltinAttributes",value:function(){throw new Error("Method not implemented.")}},{key:"animateOption2Array",value:function(n){return[n.enable?0:1,n.duration||4,n.interval||.2,n.trailLength||.1]}},{key:"startModelAnimate",value:function(){var n=this.layer.getLayerConfig(),r=n.animateOption;r.enable&&this.layer.setAnimateStartTime()}}]),e}(),L4=Jt(px.prototype,"configService",[I4],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),px),H2={exports:{}};H2.exports=Nv;H2.exports.default=Nv;function Nv(e,t,n){n=n||2;var r=t&&t.length,a=r?t[0]*n:e.length,i=AN(e,0,a,n,!0),o=[];if(!i||i.next===i.prev)return o;var s,l,u,c,f,d,p;if(r&&(i=Ude(e,t,i,n)),e.length>80*n){s=u=e[0],l=c=e[1];for(var h=n;h<a;h+=n)f=e[h],d=e[h+1],f<s&&(s=f),d<l&&(l=d),f>u&&(u=f),d>c&&(c=d);p=Math.max(u-s,c-l),p=p!==0?1/p:0}return ah(i,o,n,s,l,p),o}function AN(e,t,n,r,a){var i,o;if(a===vw(e,t,n,r)>0)for(i=t;i<n;i+=r)o=F4(i,e[i],e[i+1],o);else for(i=n-r;i>=t;i-=r)o=F4(i,e[i],e[i+1],o);return o&&Fv(o,o.next)&&(oh(o),o=o.next),o}function Ol(e,t){if(!e)return e;t||(t=e);var n=e,r;do if(r=!1,!n.steiner&&(Fv(n,n.next)||yr(n.prev,n,n.next)===0)){if(oh(n),n=t=n.prev,n===n.next)break;r=!0}else n=n.next;while(r||n!==t);return t}function ah(e,t,n,r,a,i,o){if(!!e){!o&&i&&Hde(e,r,a,i);for(var s=e,l,u;e.prev!==e.next;){if(l=e.prev,u=e.next,i?Dde(e,r,a,i):Fde(e)){t.push(l.i/n),t.push(e.i/n),t.push(u.i/n),oh(e),e=u.next,s=u.next;continue}if(e=u,e===s){o?o===1?(e=Bde(Ol(e),t,n),ah(e,t,n,r,a,i,2)):o===2&&zde(e,t,n,r,a,i):ah(Ol(e),t,n,r,a,i,1);break}}}}function Fde(e){var t=e.prev,n=e,r=e.next;if(yr(t,n,r)>=0)return!1;for(var a=e.next.next;a!==e.prev;){if(jc(t.x,t.y,n.x,n.y,r.x,r.y,a.x,a.y)&&yr(a.prev,a,a.next)>=0)return!1;a=a.next}return!0}function Dde(e,t,n,r){var a=e.prev,i=e,o=e.next;if(yr(a,i,o)>=0)return!1;for(var s=a.x<i.x?a.x<o.x?a.x:o.x:i.x<o.x?i.x:o.x,l=a.y<i.y?a.y<o.y?a.y:o.y:i.y<o.y?i.y:o.y,u=a.x>i.x?a.x>o.x?a.x:o.x:i.x>o.x?i.x:o.x,c=a.y>i.y?a.y>o.y?a.y:o.y:i.y>o.y?i.y:o.y,f=mw(s,l,t,n,r),d=mw(u,c,t,n,r),p=e.prevZ,h=e.nextZ;p&&p.z>=f&&h&&h.z<=d;){if(p!==e.prev&&p!==e.next&&jc(a.x,a.y,i.x,i.y,o.x,o.y,p.x,p.y)&&yr(p.prev,p,p.next)>=0||(p=p.prevZ,h!==e.prev&&h!==e.next&&jc(a.x,a.y,i.x,i.y,o.x,o.y,h.x,h.y)&&yr(h.prev,h,h.next)>=0))return!1;h=h.nextZ}for(;p&&p.z>=f;){if(p!==e.prev&&p!==e.next&&jc(a.x,a.y,i.x,i.y,o.x,o.y,p.x,p.y)&&yr(p.prev,p,p.next)>=0)return!1;p=p.prevZ}for(;h&&h.z<=d;){if(h!==e.prev&&h!==e.next&&jc(a.x,a.y,i.x,i.y,o.x,o.y,h.x,h.y)&&yr(h.prev,h,h.next)>=0)return!1;h=h.nextZ}return!0}function Bde(e,t,n){var r=e;do{var a=r.prev,i=r.next.next;!Fv(a,i)&&ON(a,r,r.next,i)&&ih(a,i)&&ih(i,a)&&(t.push(a.i/n),t.push(r.i/n),t.push(i.i/n),oh(r),oh(r.next),r=e=i),r=r.next}while(r!==e);return Ol(r)}function zde(e,t,n,r,a,i){var o=e;do{for(var s=o.next.next;s!==o.prev;){if(o.i!==s.i&&Yde(o,s)){var l=MN(o,s);o=Ol(o,o.next),l=Ol(l,l.next),ah(o,t,n,r,a,i),ah(l,t,n,r,a,i);return}s=s.next}o=o.next}while(o!==e)}function Ude(e,t,n,r){var a=[],i,o,s,l,u;for(i=0,o=t.length;i<o;i++)s=t[i]*r,l=i<o-1?t[i+1]*r:e.length,u=AN(e,s,l,r,!1),u===u.next&&(u.steiner=!0),a.push(Xde(u));for(a.sort($de),i=0;i<a.length;i++)n=Vde(a[i],n),n=Ol(n,n.next);return n}function $de(e,t){return e.x-t.x}function Vde(e,t){var n=jde(e,t);if(!n)return t;var r=MN(n,e),a=Ol(n,n.next);return Ol(r,r.next),t===n?a:t}function jde(e,t){var n=t,r=e.x,a=e.y,i=-1/0,o;do{if(a<=n.y&&a>=n.next.y&&n.next.y!==n.y){var s=n.x+(a-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(s<=r&&s>i){if(i=s,s===r){if(a===n.y)return n;if(a===n.next.y)return n.next}o=n.x<n.next.x?n:n.next}}n=n.next}while(n!==t);if(!o)return null;if(r===i)return o;var l=o,u=o.x,c=o.y,f=1/0,d;n=o;do r>=n.x&&n.x>=u&&r!==n.x&&jc(a<c?r:i,a,u,c,a<c?i:r,a,n.x,n.y)&&(d=Math.abs(a-n.y)/(r-n.x),ih(n,e)&&(d<f||d===f&&(n.x>o.x||n.x===o.x&&Gde(o,n)))&&(o=n,f=d)),n=n.next;while(n!==l);return o}function Gde(e,t){return yr(e.prev,e,t.prev)<0&&yr(t.next,e,e.next)<0}function Hde(e,t,n,r){var a=e;do a.z===null&&(a.z=mw(a.x,a.y,t,n,r)),a.prevZ=a.prev,a.nextZ=a.next,a=a.next;while(a!==e);a.prevZ.nextZ=null,a.prevZ=null,Wde(a)}function Wde(e){var t,n,r,a,i,o,s,l,u=1;do{for(n=e,e=null,i=null,o=0;n;){for(o++,r=n,s=0,t=0;t<u&&(s++,r=r.nextZ,!!r);t++);for(l=u;s>0||l>0&&r;)s!==0&&(l===0||!r||n.z<=r.z)?(a=n,n=n.nextZ,s--):(a=r,r=r.nextZ,l--),i?i.nextZ=a:e=a,a.prevZ=i,i=a;n=r}i.nextZ=null,u*=2}while(o>1);return e}function mw(e,t,n,r,a){return e=32767*(e-n)*a,t=32767*(t-r)*a,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,e|t<<1}function Xde(e){var t=e,n=e;do(t.x<n.x||t.x===n.x&&t.y<n.y)&&(n=t),t=t.next;while(t!==e);return n}function jc(e,t,n,r,a,i,o,s){return(a-o)*(t-s)-(e-o)*(i-s)>=0&&(e-o)*(r-s)-(n-o)*(t-s)>=0&&(n-o)*(i-s)-(a-o)*(r-s)>=0}function Yde(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!Zde(e,t)&&(ih(e,t)&&ih(t,e)&&qde(e,t)&&(yr(e.prev,e,t.prev)||yr(e,t.prev,t))||Fv(e,t)&&yr(e.prev,e,e.next)>0&&yr(t.prev,t,t.next)>0)}function yr(e,t,n){return(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y)}function Fv(e,t){return e.x===t.x&&e.y===t.y}function ON(e,t,n,r){var a=Ym(yr(e,t,n)),i=Ym(yr(e,t,r)),o=Ym(yr(n,r,e)),s=Ym(yr(n,r,t));return!!(a!==i&&o!==s||a===0&&Xm(e,n,t)||i===0&&Xm(e,r,t)||o===0&&Xm(n,e,r)||s===0&&Xm(n,t,r))}function Xm(e,t,n){return t.x<=Math.max(e.x,n.x)&&t.x>=Math.min(e.x,n.x)&&t.y<=Math.max(e.y,n.y)&&t.y>=Math.min(e.y,n.y)}function Ym(e){return e>0?1:e<0?-1:0}function Zde(e,t){var n=e;do{if(n.i!==e.i&&n.next.i!==e.i&&n.i!==t.i&&n.next.i!==t.i&&ON(n,n.next,e,t))return!0;n=n.next}while(n!==e);return!1}function ih(e,t){return yr(e.prev,e,e.next)<0?yr(e,t,e.next)>=0&&yr(e,e.prev,t)>=0:yr(e,t,e.prev)<0||yr(e,e.next,t)<0}function qde(e,t){var n=e,r=!1,a=(e.x+t.x)/2,i=(e.y+t.y)/2;do n.y>i!=n.next.y>i&&n.next.y!==n.y&&a<(n.next.x-n.x)*(i-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next;while(n!==e);return r}function MN(e,t){var n=new gw(e.i,e.x,e.y),r=new gw(t.i,t.x,t.y),a=e.next,i=t.prev;return e.next=t,t.prev=e,n.next=a,a.prev=n,r.next=n,n.prev=r,i.next=r,r.prev=i,r}function F4(e,t,n,r){var a=new gw(e,t,n);return r?(a.next=r.next,a.prev=r,r.next.prev=a,r.next=a):(a.prev=a,a.next=a),a}function oh(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function gw(e,t,n){this.i=e,this.x=t,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}Nv.deviation=function(e,t,n,r){var a=t&&t.length,i=a?t[0]*n:e.length,o=Math.abs(vw(e,0,i,n));if(a)for(var s=0,l=t.length;s<l;s++){var u=t[s]*n,c=s<l-1?t[s+1]*n:e.length;o-=Math.abs(vw(e,u,c,n))}var f=0;for(s=0;s<r.length;s+=3){var d=r[s]*n,p=r[s+1]*n,h=r[s+2]*n;f+=Math.abs((e[d]-e[h])*(e[p+1]-e[d+1])-(e[d]-e[p])*(e[h+1]-e[d+1]))}return o===0&&f===0?0:Math.abs((f-o)/o)};function vw(e,t,n,r){for(var a=0,i=t,o=n-r;i<n;i+=r)a+=(e[o]-e[i])*(e[i+1]+e[o+1]),o=i;return a}Nv.flatten=function(e){for(var t=e[0][0].length,n={vertices:[],holes:[],dimensions:t},r=0,a=0;a<e.length;a++){for(var i=0;i<e[a].length;i++)for(var o=0;o<t;o++)n.vertices.push(e[a][i][o]);a>0&&(r+=e[a-1].length,n.holes.push(r))}return n};var Cg=H2.exports,Kde=100;function D4(e){return e/180*Math.acos(-1)}function RN(e){var t=D4(e[0])+Math.PI/2,n=D4(e[1]),r=Kde+Math.random()*.4,a=r*Math.cos(n)*Math.cos(t),i=r*Math.cos(n)*Math.sin(t),o=r*Math.sin(n);return[i,o,a]}var Zm=$r();$r();var Ur=$r(),Xs=$r(),pc=$r();function hx(e,t,n,r,a){Bo(e,n,r),wp(e,e),t=cw(-e[1],e[0]);var i=cw(-n[1],n[0]);return[a/I0(t,i),t]}function Ys(e,t){return uie(e,-t[1],t[0])}function hc(e,t,n){return fw(e,t,n),wp(e,e),e}function mx(e,t){return e[0]===t[0]&&e[1]===t[1]}var Qde=function(){function e(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Ae(this,e),m(this,"complex",void 0),m(this,"join",void 0),m(this,"cap",void 0),m(this,"miterLimit",void 0),m(this,"thickness",void 0),m(this,"normal",void 0),m(this,"lastFlip",-1),m(this,"miter",cw(0,0)),m(this,"started",!1),m(this,"dash",!1),m(this,"totalDistance",0),m(this,"currentIndex",0),this.join=t.join||"miter",this.cap=t.cap||"butt",this.miterLimit=t.miterLimit||10,this.thickness=t.thickness||1,this.dash=t.dash||!1,this.complex={positions:[],indices:[],normals:[],startIndex:0,indexes:[]}}return Oe(e,[{key:"extrude_gaode2",value:function(n,r){var a=this.complex;if(n.length<=1)return a;this.lastFlip=-1,this.started=!1,this.normal=null,this.totalDistance=0;for(var i=n.length,o=a.startIndex,s=1;s<i;s++){var l,u,c,f=n[s-1];f.push((l=r[s-1][2])!==null&&l!==void 0?l:0);var d=r[s-1],p=n[s];p.push((u=r[s][2])!==null&&u!==void 0?u:0);var h=r[s],g=s<n.length-1?[].concat(Ue(n[s+1]),[(c=r[s+1][2])!==null&&c!==void 0?c:0]):null,v=s<r.length-1?r[s+1]:null,b=this.segment_gaode2(a,o,f,p,g,d,h,v);o+=b}if(this.dash)for(var y=0;y<a.positions.length/6;y++)a.positions[y*6+5]=this.totalDistance;return a.startIndex=a.positions.length/6,a}},{key:"simpleExtrude_gaode2",value:function(n,r){var a=this.complex;if(n.length<=1)return a;this.lastFlip=-1,this.started=!1,this.normal=null,this.totalDistance=0;for(var i=n.length,o=a.startIndex,s=1;s<i;s++){var l,u,c,f=n[s-1];f.push((l=r[s-1][2])!==null&&l!==void 0?l:0);var d=r[s-1],p=n[s];p.push((u=r[s][2])!==null&&u!==void 0?u:0);var h=r[s],g=s<n.length-1?[].concat(Ue(n[s+1]),[(c=r[s+1][2])!==null&&c!==void 0?c:0]):null,v=s<r.length-1?r[s+1]:null,b=this.simpleSegment(a,o,f,p,g,d,h,v);o+=b}if(this.dash)for(var y=0;y<a.positions.length/6;y++)a.positions[y*6+5]=this.totalDistance;return a.startIndex=a.positions.length/6,a}},{key:"extrude",value:function(n){var r=this.complex;if(n.length<=1)return r;this.lastFlip=-1,this.started=!1,this.normal=null,this.totalDistance=0;for(var a=n.length,i=r.startIndex,o=1;o<a;o++){var s=n[o-1],l=n[o],u=o<n.length-1?n[o+1]:null,c=this.segment(r,i,s,l,u);i+=c}if(this.dash)for(var f=0;f<r.positions.length/6;f++)r.positions[f*6+5]=this.totalDistance;return r.startIndex=r.positions.length/6,r}},{key:"simpleExtrude",value:function(n){var r=this.complex;if(n.length<=1)return r;this.lastFlip=-1,this.started=!1,this.normal=null,this.totalDistance=0;for(var a=n.length,i=r.startIndex,o=1;o<a;o++){var s=n[o-1],l=n[o],u=o<n.length-1?n[o+1]:null,c=this.simpleSegment(r,i,s,l,u);i+=c}if(this.dash)for(var f=0;f<r.positions.length/6;f++)r.positions[f*6+5]=this.totalDistance;return r.startIndex=r.positions.length/6,r}},{key:"segment_gaode2",value:function(n,r,a,i,o,s,l,u){var c=0,f=n.indices,d=n.positions,p=n.normals,h=this.cap==="square",g=this.join==="bevel",v=Uo([l[0],l[1]]),b=Uo([s[0],s[1]]);hc(Ur,i,a);var y=0;if(this.dash&&(y=this.lineSegmentDistance(v,b),this.totalDistance+=y),this.normal||(this.normal=$r(),Ys(this.normal,Ur)),!this.started)if(this.started=!0,h){var x=$r(),E=$r();Bo(x,this.normal,Ur),Bo(E,this.normal,Ur),p.push(E[0],E[1],0),p.push(x[0],x[1],0),d.push(a[0],a[1],a[2]|0,this.totalDistance-y,-this.thickness,a[2]|0),this.complex.indexes.push(this.currentIndex),d.push(a[0],a[1],a[2]|0,this.totalDistance-y,this.thickness,a[2]|0),this.complex.indexes.push(this.currentIndex),this.currentIndex++}else this.extrusions(d,p,a,this.normal,this.thickness,this.totalDistance-y);if(f.push(r+0,r+1,r+2),o){mx(i,o)&&Bo(o,i,wp(o,P0(o,i,a))),hc(Xs,o,i);var I=hx(pc,$r(),Ur,Xs,this.thickness),P=Le(I,2),j=P[0],A=P[1],S=I0(pc,this.normal)<0?-1:1,M=g;if(!M&&this.join==="miter"){var O=j;O>this.miterLimit&&(M=!0)}M?(p.push(this.normal[0],this.normal[1],0),p.push(A[0],A[1],0),d.push(i[0],i[1],i[2]|0,this.totalDistance,-this.thickness*S,i[2]|0),this.complex.indexes.push(this.currentIndex),d.push(i[0],i[1],i[2]|0,this.totalDistance,this.thickness*S,i[2]|0),this.complex.indexes.push(this.currentIndex),this.currentIndex++,f.push.apply(f,Ue(this.lastFlip!==-S?[r,r+2,r+3]:[r+2,r+1,r+3])),f.push(r+2,r+3,r+4),Ys(Zm,Xs),Pd(this.normal,Zm),p.push(this.normal[0],this.normal[1],0),d.push(i[0],i[1],i[2]|0,this.totalDistance,-this.thickness*S,i[2]|0),this.complex.indexes.push(this.currentIndex),this.currentIndex++,c+=3):(this.extrusions(d,p,i,A,j,this.totalDistance),f.push.apply(f,Ue(this.lastFlip===1?[r,r+2,r+3]:[r+2,r+1,r+3])),S=-1,Pd(this.normal,A),c+=2),this.lastFlip=S}else{if(Ys(this.normal,Ur),h){var T=$r(),C=$r();fw(C,Ur,this.normal),Bo(T,Ur,this.normal),p.push(C[0],C[1],0),p.push(T[0],T[1],0),d.push(i[0],i[1],i[2]|0,this.totalDistance,this.thickness,i[2]|0),this.complex.indexes.push(this.currentIndex),d.push(i[0],i[1],i[2]|0,this.totalDistance,this.thickness,i[2]|0),this.complex.indexes.push(this.currentIndex),this.currentIndex++}else this.extrusions(d,p,i,this.normal,this.thickness,this.totalDistance);f.push.apply(f,Ue(this.lastFlip===1?[r,r+2,r+3]:[r+2,r+1,r+3])),c+=2}return c}},{key:"simpleSegment",value:function(n,r,a,i,o){var s=0,l=n.indices,u=n.positions,c=n.normals,f=Uo([i[0],i[1]]),d=Uo([a[0],a[1]]);hc(Ur,f,d);var p=0;if(this.dash&&(p=this.lineSegmentDistance(f,d),this.totalDistance+=p),this.normal||(this.normal=$r(),Ys(this.normal,Ur)),this.started||(this.started=!0,this.extrusions(u,c,a,this.normal,this.thickness,this.totalDistance-p)),l.push(r+0,r+1,r+2),!o)Ys(this.normal,Ur),this.extrusions(u,c,i,this.normal,this.thickness,this.totalDistance),l.push.apply(l,Ue(this.lastFlip===1?[r,r+2,r+3]:[r+2,r+1,r+3])),s+=2;else{var h=Uo([o[0],o[1]]);mx(f,h)&&Bo(h,f,wp(h,P0(h,f,d))),hc(Xs,h,f);var g=hx(pc,$r(),Ur,Xs,this.thickness),v=Le(g,2),b=v[0],y=v[1],x=I0(pc,this.normal)<0?-1:1;this.extrusions(u,c,i,y,b,this.totalDistance),l.push.apply(l,Ue(this.lastFlip===1?[r,r+2,r+3]:[r+2,r+1,r+3])),x=-1,Pd(this.normal,y),s+=2,this.lastFlip=x}return s}},{key:"segment",value:function(n,r,a,i,o){var s=0,l=n.indices,u=n.positions,c=n.normals,f=this.cap==="square",d=this.join==="bevel",p=Uo([i[0],i[1]]),h=Uo([a[0],a[1]]);hc(Ur,p,h);var g=0;if(this.dash&&(g=this.lineSegmentDistance(p,h),this.totalDistance+=g),this.normal||(this.normal=$r(),Ys(this.normal,Ur)),!this.started)if(this.started=!0,f){var v=$r(),b=$r();Bo(v,this.normal,Ur),Bo(b,this.normal,Ur),c.push(b[0],b[1],0),c.push(v[0],v[1],0),u.push(a[0],a[1],a[2]|0,this.totalDistance-g,-this.thickness,a[2]|0),this.complex.indexes.push(this.currentIndex),u.push(a[0],a[1],a[2]|0,this.totalDistance-g,this.thickness,a[2]|0),this.complex.indexes.push(this.currentIndex),this.currentIndex++}else this.extrusions(u,c,a,this.normal,this.thickness,this.totalDistance-g);if(l.push(r+0,r+1,r+2),o){var E=Uo([o[0],o[1]]);mx(p,E)&&Bo(E,p,wp(E,P0(E,p,h))),hc(Xs,E,p);var T=hx(pc,$r(),Ur,Xs,this.thickness),C=Le(T,2),I=C[0],P=C[1],j=I0(pc,this.normal)<0?-1:1,A=d;if(!A&&this.join==="miter"){var S=I;S>this.miterLimit&&(A=!0)}A?(c.push(this.normal[0],this.normal[1],0),c.push(P[0],P[1],0),u.push(i[0],i[1],i[2]|0,this.totalDistance,-this.thickness*j,i[2]|0),this.complex.indexes.push(this.currentIndex),u.push(i[0],i[1],i[2]|0,this.totalDistance,this.thickness*j,i[2]|0),this.complex.indexes.push(this.currentIndex),this.currentIndex++,l.push.apply(l,Ue(this.lastFlip!==-j?[r,r+2,r+3]:[r+2,r+1,r+3])),l.push(r+2,r+3,r+4),Ys(Zm,Xs),Pd(this.normal,Zm),c.push(this.normal[0],this.normal[1],0),u.push(i[0],i[1],i[2]|0,this.totalDistance,-this.thickness*j,i[2]|0),this.complex.indexes.push(this.currentIndex),this.currentIndex++,s+=3):(this.extrusions(u,c,i,P,I,this.totalDistance),l.push.apply(l,Ue(this.lastFlip===1?[r,r+2,r+3]:[r+2,r+1,r+3])),j=-1,Pd(this.normal,P),s+=2),this.lastFlip=j}else{if(Ys(this.normal,Ur),f){var y=$r(),x=$r();fw(x,Ur,this.normal),Bo(y,Ur,this.normal),c.push(x[0],x[1],0),c.push(y[0],y[1],0),u.push(i[0],i[1],i[2]|0,this.totalDistance,this.thickness,i[2]|0),this.complex.indexes.push(this.currentIndex),u.push(i[0],i[1],i[2]|0,this.totalDistance,this.thickness,i[2]|0),this.complex.indexes.push(this.currentIndex),this.currentIndex++}else this.extrusions(u,c,i,this.normal,this.thickness,this.totalDistance);l.push.apply(l,Ue(this.lastFlip===1?[r,r+2,r+3]:[r+2,r+1,r+3])),s+=2}return s}},{key:"extrusions",value:function(n,r,a,i,o,s){r.push(i[0],i[1],0),r.push(i[0],i[1],0),n.push(a[0],a[1],a[2]|0,s,-o,a[2]|0),this.complex.indexes.push(this.currentIndex),n.push(a[0],a[1],a[2]|0,s,o,a[2]|0),this.complex.indexes.push(this.currentIndex),this.currentIndex++}},{key:"lineSegmentDistance",value:function(n,r){var a=r[0]-n[0],i=r[1]-n[1];return Math.sqrt(a*a+i*i)}}]),e}();function _u(e){if(Gn(e[0]))return e;if(Gn(e[0][0]))throw new Error("\u5F53\u524D\u6570\u636E\u4E0D\u652F\u6301\u6807\u6CE8");if(Gn(e[0][0][0])){var t=e,n=0,r=0,a=0;return t.forEach(function(i){i.forEach(function(o){n+=o[0],r+=o[1],a++})}),[n/a,r/a,0]}else throw new Error("\u5F53\u524D\u6570\u636E\u4E0D\u652F\u6301\u6807\u6CE8")}function Jde(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,n=e[0][0],r=e[0][e[0].length-1];n[0]===r[0]&&n[1]===r[1]&&(e[0]=e[0].slice(0,e[0].length-1));for(var a=e[0].length,i=Cg.flatten(e),o=i.vertices,s=i.dimensions,l=[],u=[],c=[],f=0;f<o.length/s;f++)s===2?l.push(o[f*2],o[f*2+1],1,-1,-1):l.push(o[f*3],o[f*3+1],1,-1,-1),c.push(0,0,1);var d=Cg(i.vertices,i.holes,i.dimensions);u.push.apply(u,Ue(d));for(var p=function(v){var b=i.vertices.slice(v*s,(v+1)*s),y=i.vertices.slice((v+1)*s,(v+2)*s);y.length===0&&(y=i.vertices.slice(0,s));var x=l.length/5;l.push(b[0],b[1],1,0,0,y[0],y[1],1,.1,0,b[0],b[1],0,0,.8,y[0],y[1],0,.1,.8);var E=epe([y[0],y[1],1],[b[0],b[1],0],[b[0],b[1],1],t);c.push.apply(c,Ue(E).concat(Ue(E),Ue(E),Ue(E))),u.push.apply(u,Ue([1,2,0,3,2,1].map(function(T){return T+x})))},h=0;h<a;h++)p(h);return{positions:l,index:u,normals:c}}function epe(e,t,n){var r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,a=$c(),i=$c(),o=$c();r&&(e=$y(e),t=$y(t),n=$y(n));var s=Pa.apply(of,Ue(e)),l=Pa.apply(of,Ue(t)),u=Pa.apply(of,Ue(n));uw(a,u,l),uw(i,s,l),WL(o,a,i);var c=$c();return Vc(c,o),c}var Ii,uu;(function(e){e.CYLINDER="cylinder",e.SQUARECOLUMN="squareColumn",e.TRIANGLECOLUMN="triangleColumn",e.HEXAGONCOLUMN="hexagonColumn",e.PENTAGONCOLUMN="pentagonColumn"})(uu||(uu={}));var cu;(function(e){e.CIRCLE="circle",e.SQUARE="square",e.TRIANGLE="triangle",e.HEXAGON="hexagon",e.PENTAGON="pentagon"})(cu||(cu={}));function Ih(e){for(var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=Math.PI*2/e,r=[],a=0;a<e;a++)r.push(n*a+t*Math.PI/12);var i=r.map(function(o){var s=Math.sin(o+Math.PI/4),l=Math.cos(o+Math.PI/4);return[s,l,0]});return i}function B4(){return Ih(30)}function z4(){return Ih(4)}function U4(){return Ih(3)}function $4(){return Ih(6,1)}function V4(){return Ih(5)}var gx=(Ii={},m(Ii,cu.CIRCLE,B4),m(Ii,cu.HEXAGON,$4),m(Ii,cu.TRIANGLE,U4),m(Ii,cu.SQUARE,z4),m(Ii,cu.PENTAGON,V4),m(Ii,uu.CYLINDER,B4),m(Ii,uu.HEXAGONCOLUMN,$4),m(Ii,uu.TRIANGLECOLUMN,U4),m(Ii,uu.SQUARECOLUMN,z4),m(Ii,uu.PENTAGONCOLUMN,V4),Ii),qm={};function qo(e){var t=_u(e.coordinates);return{vertices:[].concat(Ue(t),Ue(t),Ue(t),Ue(t)),indices:[0,1,2,2,3,0],size:t.length}}function j4(e){var t=_u(e.coordinates),n=RN(t);return{vertices:[].concat(Ue(n),Ue(n),Ue(n),Ue(n)),indices:[0,1,2,2,3,0],size:n.length}}function tpe(e){var t=e.shape,n=npe(t,!1),r=n.positions,a=n.index,i=n.normals;return{vertices:r,indices:a,normals:i,size:5}}function PN(e){var t=_u(e.coordinates);return{vertices:Ue(t),indices:[0],size:t.length}}function G4(e){var t=e.coordinates,n=e.originCoordinates,r=e.version,a=new Qde({dash:!0,join:"bevel"});if(r==="GAODE2.x"){var i=t;Array.isArray(i[0][0])||(i=[t]);var o=n;Array.isArray(o[0][0])||(o=[n]);for(var s=0;s<i.length;s++){var l=i[s],u=o[s];a.extrude_gaode2(l,u)}}else{var c=t;c[0]&&!Array.isArray(c[0][0])&&(c=[t]),c.forEach(function(d){a.extrude(d)})}var f=a.complex;return{vertices:f.positions,indices:f.indices,normals:f.normals,indexes:f.indexes,size:6}}function IN(e){var t=e.coordinates,n=Cg.flatten(t),r=n.vertices,a=n.dimensions,i=n.holes;return{indices:Cg(r,i,a),vertices:r,size:a}}function LN(e){var t=e.coordinates,n=[].concat(Ue(t[0]),[0,0,1,t[1][0],t[0][1],0,1,1],Ue(t[1]),[0,1,0],Ue(t[0]),[0,0,1],Ue(t[1]),[0,1,0,t[0][0],t[1][1],0,0,0]),r=[0,1,2,3,4,5];return{vertices:n,indices:r,size:5}}function npe(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(qm&&qm[e])return qm[e];var n=gx[e]?gx[e]():gx.cylinder(),r=Jde([n],t);return qm[e]=r,r}function rpe(e){var t=ape();return function(){var r=Ee(e),a;if(t){var i=Ee(this).constructor;a=Reflect.construct(r,arguments,i)}else a=r.apply(this,arguments);return Mt(this,a)}}function ape(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var ipe=`precision mediump float;
uniform float u_opacity: 1.0;
uniform sampler2D u_texture;
varying vec2 v_texCoord;
void main() {
  vec4 color = texture2D(u_texture,vec2(v_texCoord.x,v_texCoord.y));
  gl_FragColor = color;
  gl_FragColor.a *= u_opacity;
}
`,ope=`precision highp float;
uniform mat4 u_ModelMatrix;
uniform mat4 u_Mvp;
attribute vec3 a_Position;
attribute vec2 a_Uv;
varying vec2 v_texCoord;
#pragma include "projection"
void main() {
   v_texCoord = a_Uv;
   vec4 project_pos = project_position(vec4(a_Position, 1.0));
   // gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy,0., 1.0));
   if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
      gl_Position = u_Mvp * (vec4(project_pos.xy,0., 1.0));
   } else {
      gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy,0., 1.0));
   }
}
`,spe=function(e){Ct(n,e);var t=rpe(n);function n(){var r;Ae(this,n);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return r=t.call.apply(t,[this].concat(i)),m(D(r),"texture",void 0),r}return Oe(n,[{key:"getUninforms",value:function(){var a=this.layer.getLayerConfig(),i=a.opacity;return{u_opacity:i||1,u_texture:this.texture}}},{key:"initModels",value:function(){var a=this,i=this.layer.getLayerConfig(),o=i.mask,s=o===void 0?!1:o,l=i.maskInside,u=l===void 0?!0:l,c=this.layer.getSource(),f=this.rendererService.createTexture2D;if(this.texture=f({height:0,width:0}),bi){var d=this.layerService.sceneService.getSceneConfig().canvas,p=d.createImage();p.crossOrigin="anonymous",p.src=c.data.originData,p.onload=function(){a.texture=f({data:p,width:p.width,height:p.height}),a.layerService.updateLayerRenderList(),a.layerService.renderLayers()}}else c.data.images.then(function(h){a.texture=f({data:h[0],width:h[0].width,height:h[0].height}),a.layerService.updateLayerRenderList(),a.layerService.renderLayers()});return[this.layer.buildLayerModel({moduleName:"RasterImage",vertexShader:ope,fragmentShader:ipe,triangulation:LN,primitive:V.TRIANGLES,depth:{enable:!1},blend:this.getBlend(),stencil:_i(s,u)})]}},{key:"buildModels",value:function(){return this.initModels()}},{key:"getConfigSchema",value:function(){return{properties:{opacity:{type:"number",minimum:0,maximum:1}}}}},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"uv",type:vn.Attribute,descriptor:{name:"a_Uv",buffer:{usage:V.DYNAMIC_DRAW,data:[],type:V.FLOAT},size:2,update:function(i,o,s,l){return[s[3],s[4]]}}})}}]),n}(Fa),lpe={image:spe},upe=lpe;function cpe(e){var t=fpe();return function(){var r=Ee(e),a;if(t){var i=Ee(this).constructor;a=Reflect.construct(r,arguments,i)}else a=r.apply(this,arguments);return Mt(this,a)}}function fpe(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var dpe=function(e){Ct(n,e);var t=cpe(n);function n(){var r;Ae(this,n);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return r=t.call.apply(t,[this].concat(i)),m(D(r),"type","ImageLayer"),r}return Oe(n,[{key:"buildModels",value:function(){var a=this.getModelType();this.layerModel=new upe[a](this),this.models=this.layerModel.initModels()}},{key:"rebuildModels",value:function(){this.models=this.layerModel.buildModels()}},{key:"getConfigSchema",value:function(){return{properties:{opacity:{type:"number",minimum:0,maximum:1}}}}},{key:"getDefaultConfig",value:function(){var a=this.getModelType(),i={image:{}};return i[a]}},{key:"getModelType",value:function(){return"image"}}]),n}(Ph);function ppe(e){var t=hpe();return function(){var r=Ee(e),a;if(t){var i=Ee(this).constructor;a=Reflect.construct(r,arguments,i)}else a=r.apply(this,arguments);return Mt(this,a)}}function hpe(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var mpe=`uniform float u_opacity;
varying vec4 v_Color;

void main() {
  gl_FragColor = v_Color;
  gl_FragColor.a *= u_opacity;
}
`,gpe=`attribute vec4 a_Color;
attribute vec3 a_Position;
uniform mat4 u_ModelMatrix;
uniform mat4 u_Mvp;

varying vec4 v_Color;

#pragma include "projection"

void main() {

  v_Color = a_Color;
  vec4 project_pos = project_position(vec4(a_Position, 1.0));
  // gl_Position = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));

  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
    gl_Position = u_Mvp * (vec4(project_pos.xyz, 1.0));
  } else {
    gl_Position = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));
  }
}

`,vpe=function(e){Ct(n,e);var t=ppe(n);function n(){return Ae(this,n),t.apply(this,arguments)}return Oe(n,[{key:"getUninforms",value:function(){var a=this.layer.getLayerConfig(),i=a.opacity,o=i===void 0?0:i;return{u_opacity:Gn(o)?o:0}}},{key:"initModels",value:function(){return this.buildModels()}},{key:"buildModels",value:function(){return[this.layer.buildLayerModel({moduleName:"mask",vertexShader:gpe,fragmentShader:mpe,triangulation:IN,blend:this.getBlend(),depth:{enable:!1},stencil:{enable:!0,mask:255,func:{cmp:V.ALWAYS,ref:1,mask:255},opFront:{fail:V.REPLACE,zfail:V.REPLACE,zpass:V.REPLACE}}})]}},{key:"clearModels",value:function(){var a;(a=this.dataTexture)===null||a===void 0||a.destroy(),this.layerService.clear()}},{key:"registerBuiltinAttributes",value:function(){return""}}]),n}(Fa),bpe={fill:vpe},ype=bpe;function xpe(e){var t=wpe();return function(){var r=Ee(e),a;if(t){var i=Ee(this).constructor;a=Reflect.construct(r,arguments,i)}else a=r.apply(this,arguments);return Mt(this,a)}}function wpe(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var NN=function(e){Ct(n,e);var t=xpe(n);function n(){var r;Ae(this,n);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return r=t.call.apply(t,[this].concat(i)),m(D(r),"type","MaskLayer"),r}return Oe(n,[{key:"buildModels",value:function(){var a=this.getModelType();this.layerModel=new ype[a](this),this.models=this.layerModel.initModels()}},{key:"rebuildModels",value:function(){this.models=this.layerModel.buildModels()}},{key:"getConfigSchema",value:function(){return{properties:{opacity:{type:"number",minimum:0,maximum:1}}}}},{key:"getModelType",value:function(){return"fill"}}]),n}(Ph);function FN(e,t){t.map(function(n){var r=hw(e.sceneContainer);n.setContainer(r,e.sceneContainer),n.init()})}function DN(e,t){var n,r=t.getAttribute("shape");if(r&&(n=r.scale)!==null&&n!==void 0&&n.field){var a;return((a=r.scale)===null||a===void 0?void 0:a.values)==="text"?[r.scale.field,r.scale.values]:r.scale.field}switch(e){case"PolygonLayer":return"fill";case"LineLayer":return"tileline";case"PointLayer":return"circle";case"RasterLayer":return"image";default:return""}}function _pe(e,t){switch(e){case"PolygonLayer":return!0;case"LineLayer":return!0;case"PointLayer":return!1;case"RasterLayer":return t;default:return t}}function Epe(e,t,n,r){var a,i,o,s,l=(e==null||(a=e.bboxPolygon)===null||a===void 0?void 0:a.bbox)||[0,0,10,-10],u=Le(l,4),c=u[0],f=c===void 0?0:c,d=u[1],p=d===void 0?0:d,h=u[2],g=h===void 0?10:h,v=u[3],b=v===void 0?-10:v,y=t.lngLatToContainer([f,p]),x=t.lngLatToContainer([g,b]),E=x.x-y.x,T=y.y-x.y,C=[(n-y.x)/E,(r-x.y)/T],I=(e==null||(i=e.data)===null||i===void 0?void 0:i.width)||1,P=(e==null||(o=e.data)===null||o===void 0?void 0:o.height)||1,j=Math.floor(C[0]*I),A=Math.floor(C[1]*P),S=Math.max(0,A-1)*I+j,M=e==null||(s=e.data)===null||s===void 0?void 0:s.data[S];return M}function kpe(e){var t=Spe();return function(){var r=Ee(e),a;if(t){var i=Ee(this).constructor;a=Reflect.construct(r,arguments,i)}else a=r.apply(this,arguments);return Mt(this,a)}}function Spe(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var Cpe=`#define LineTexture 1.0
uniform float u_blur : 0.99;
uniform float u_opacity : 1.0;
uniform float u_textureBlend;

uniform float u_borderWidth: 0.0;
uniform vec4 u_borderColor;
varying vec4 v_color;

// line texture
uniform float u_line_texture;
uniform sampler2D u_texture;
uniform vec2 u_textSize;

varying vec2 v_iconMapUV;

#pragma include "picking"

varying mat4 styleMappingMat;

void main() {
  float opacity = styleMappingMat[0][0];
  float d_distance_ratio = styleMappingMat[3].r; // \u5F53\u524D\u70B9\u4F4D\u8DDD\u79BB\u5360\u7EBF\u603B\u957F\u7684\u6BD4\u4F8B
  gl_FragColor = v_color;
  // anti-alias
  // float blur = 1.0 - smoothstep(u_blur, 1., length(v_normal.xy));
  gl_FragColor.a *= opacity; // \u5168\u5C40\u900F\u660E\u5EA6


  if(u_line_texture == LineTexture) { // while load texture
    float aDistance = styleMappingMat[3].g;      // \u5F53\u524D\u9876\u70B9\u7684\u8DDD\u79BB
    float d_texPixelLen = styleMappingMat[3].b;  // \u8D34\u56FE\u7684\u50CF\u7D20\u957F\u5EA6\uFF0C\u6839\u636E\u5730\u56FE\u5C42\u7EA7\u7F29\u653E
    float u = fract(mod(aDistance, d_texPixelLen)/d_texPixelLen);
    float v = styleMappingMat[3].a;  // \u7EBF\u56FE\u5C42\u8D34\u56FE\u90E8\u5206\u7684 v \u5750\u6807\u503C

    // v = max(smoothstep(0.95, 1.0, v), v);
    vec2 uv= v_iconMapUV / u_textSize + vec2(u, v) / u_textSize * 64.;
    
    // gl_FragColor = filterColor(gl_FragColor + texture2D(u_texture, vec2(u, v)));
    // gl_FragColor = filterColor(gl_FragColor + texture2D(u_texture, uv));
     vec4 pattern = texture2D(u_texture, uv);

    if(u_textureBlend == 0.0) { // normal
      pattern.a = 0.0;
      gl_FragColor += pattern;
    } else { // replace
        pattern.a *= opacity;
        if(gl_FragColor.a <= 0.0) {
          pattern.a = 0.0;
        }
        gl_FragColor = pattern;
    }
  } 

  float v = styleMappingMat[3].a;
  float borderWidth = min(0.5, u_borderWidth);
  // \u7ED8\u5236 border
  if(borderWidth > 0.01) {
    float borderOuterWidth = borderWidth/2.0;

    if(v >= 1.0 - borderWidth || v <= borderWidth) {
      if(v > borderWidth) {
        float linear = smoothstep(0.0, 1.0, (v - (1.0 - borderWidth))/borderWidth);
        gl_FragColor.rgb = mix(gl_FragColor.rgb, u_borderColor.rgb, linear);
      } else if(v <= borderWidth) {
        float linear = smoothstep(0.0, 1.0, v/borderWidth);
        gl_FragColor.rgb = mix(u_borderColor.rgb, gl_FragColor.rgb, linear);
      }
    }

    if(v < borderOuterWidth) {
      gl_FragColor.a = mix(0.0, gl_FragColor.a, v/borderOuterWidth);
    } else if(v > 1.0 - borderOuterWidth) {
      gl_FragColor.a = mix(gl_FragColor.a, 0.0, (v - (1.0 - borderOuterWidth))/borderOuterWidth);
    }
  }

  gl_FragColor = filterColor(gl_FragColor);
}
`,Tpe=`
attribute float a_Miter;
attribute vec4 a_Color;
attribute vec2 a_Size;
attribute vec3 a_Normal;
attribute vec3 a_Position;

attribute vec2 a_iconMapUV;

// dash line
attribute float a_Total_Distance;
attribute vec2 a_DistanceAndIndex;

uniform vec2 u_tileOrigin;
uniform float u_coord;

uniform mat4 u_ModelMatrix;
uniform mat4 u_Mvp;
uniform float u_icon_step: 100;

uniform float u_heightfixed: 0.0;
uniform float u_vertexScale: 1.0;

#pragma include "projection"
#pragma include "picking"

varying vec4 v_color;

// texV \u7EBF\u56FE\u5C42 - \u8D34\u56FE\u90E8\u5206\u7684 v \u5750\u6807\uFF08\u7EBF\u7684\u5BBD\u5EA6\u65B9\u5411\uFF09
varying vec2 v_iconMapUV;


uniform float u_linearColor: 0;
uniform float u_arrow: 0.0;
uniform float u_arrowHeight: 3.0;
uniform float u_arrowWidth: 2.0;
uniform float u_tailWidth: 1.0;

uniform float u_opacity: 1.0;
varying mat4 styleMappingMat; // \u7528\u4E8E\u5C06\u5728\u9876\u70B9\u7740\u8272\u5668\u4E2D\u8BA1\u7B97\u597D\u7684\u6837\u5F0F\u503C\u4F20\u9012\u7ED9\u7247\u5143

#pragma include "styleMapping"
#pragma include "styleMappingCalOpacity"

vec2 calculateArrow(vec2 offset) {
  /*
  * \u5728\u652F\u6301\u7BAD\u5934\u7684\u65F6\u5019\uFF0C\u7B2C\u4E8C\u3001\u7B2C\u4E09\u7EC4\u9876\u70B9\u662F\u989D\u5916\u63D2\u5165\u7528\u4E8E\u6784\u5EFA\u9876\u70B9\u7684
  */
  float arrowFlag = -1.0;
  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) {
    // \u9AD8\u5FB7 2.0 \u7684\u65CB\u8F6C\u89D2\u5EA6\u4E0D\u540C
    arrowFlag = 1.0;
  }
  float pi = arrowFlag * 3.1415926/2.;
  if(a_Miter < 0.) {
    // \u6839\u636E\u7EBF\u7684\u4E24\u4FA7\u504F\u79FB\u4E0D\u540C\u3001\u65CB\u8F6C\u7684\u65B9\u5411\u76F8\u53CD
    pi = -pi;
  }
  highp float angle_sin = sin(pi);
  highp float angle_cos = cos(pi);
  // \u8BA1\u7B97\u5782\u76F4\u4E0E\u7EBF\u65B9\u5411\u7684\u65CB\u8F6C\u77E9\u9635
  mat2 rotation_matrix = mat2(angle_cos, -1.0 * angle_sin, angle_sin, angle_cos);
  float arrowWidth = u_arrowWidth;
  float arrowHeight = u_arrowHeight;

  vec2 arrowOffset = vec2(0.0);
  /*
  * a_DistanceAndIndex.y \u7528\u4E8E\u6807\u8BB0\u5F53\u524D\u9876\u70B9\u5C5E\u4E8E\u54EA\u4E00\u7EC4\uFF08\u4E24\u4E2A\u9876\u70B9\u4E00\u7EC4\uFF0C\u6784\u6210\u7EBF\u7684\u5176\u5B9E\u662F\u77E9\u5F62\uFF0C\u6700\u7B80\u9700\u8981\u56DB\u4E2A\u9876\u70B9\u3001\u4E24\u7EC4\u9876\u70B9\u6784\u6210\uFF09
  */
  if(a_DistanceAndIndex.y == 0.0) {
    // \u7BAD\u5934\u5C16\u90E8
    offset = vec2(0.0);
  } else if(a_DistanceAndIndex.y == 1.0) {
    // \u7BAD\u5934\u4E24\u4FA7
    arrowOffset = rotation_matrix*(offset * arrowHeight);
    offset += arrowOffset; // \u6CBF\u7EBF\u504F\u79FB
    offset = offset * arrowWidth; // \u5782\u76F4\u7EBF\u5411\u5916\u504F\u79FB\uFF08\u662F\u6784\u5EFA\u7BAD\u5934\u4E24\u4FA7\u7684\u9876\u70B9\uFF09
  } else if(a_DistanceAndIndex.y == 2.0 || a_DistanceAndIndex.y == 3.0 || a_DistanceAndIndex.y == 4.0) {
    // \u504F\u79FB\u5176\u4F59\u7684\u70B9\u4F4D\uFF08\u5C06\u957F\u5EA6\u8BA9\u4F4D\u7ED9\u7BAD\u5934\uFF09
    arrowOffset = rotation_matrix*(offset * arrowHeight) * arrowWidth;
    offset += arrowOffset;// \u6CBF\u7EBF\u504F\u79FB
  }

  return offset;
}

void main() {
  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97
  styleMappingMat = mat4(
    0.0, 0.0, 0.0, 0.0, // opacity - strokeOpacity - strokeWidth - empty
    0.0, 0.0, 0.0, 0.0, // strokeR - strokeG - strokeB - strokeA
    0.0, 0.0, 0.0, 0.0, // offsets[0] - offsets[1]
    0.0, 0.0, 0.0, 0.0  // distance_ratio/distance/pixelLen/texV
  );

  float rowCount = u_cellTypeLayout[0][0];    // \u5F53\u524D\u7684\u6570\u636E\u7EB9\u7406\u6709\u51E0\u884C
  float columnCount = u_cellTypeLayout[0][1]; // \u5F53\u770B\u5230\u6570\u636E\u7EB9\u7406\u6709\u51E0\u5217
  float columnWidth = 1.0/columnCount;  // \u5217\u5BBD
  float rowHeight = 1.0/rowCount;       // \u884C\u9AD8
  float cellCount = calCellCount(); // opacity - strokeOpacity - strokeWidth - stroke - offsets
  float id = a_vertexId; // \u7B2Cn\u4E2A\u9876\u70B9
  float cellCurrentRow = floor(id * cellCount / columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u884C
  float cellCurrentColumn = mod(id * cellCount, columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u5217
  
  // cell \u56FA\u5B9A\u987A\u5E8F opacity -> strokeOpacity -> strokeWidth -> stroke ... 
  // \u6309\u987A\u5E8F\u4ECE cell \u4E2D\u53D6\u503C\u3001\u82E5\u6CA1\u6709\u5219\u81EA\u52A8\u5F80\u4E0B\u53D6\u503C
  float textureOffset = 0.0; // \u5728 cell \u4E2D\u53D6\u503C\u7684\u504F\u79FB\u91CF

  vec2 opacityAndOffset = calOpacityAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);
  styleMappingMat[0][0] = opacityAndOffset.r;
  textureOffset = opacityAndOffset.g;
  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97

  float d_texPixelLen;    // \u8D34\u56FE\u7684\u50CF\u7D20\u957F\u5EA6\uFF0C\u6839\u636E\u5730\u56FE\u5C42\u7EA7\u7F29\u653E

  v_iconMapUV = a_iconMapUV;
  d_texPixelLen = project_float_pixel(u_icon_step);
  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) {
    d_texPixelLen *= 10.0;
  }

  v_color = a_Color;

  vec3 size = a_Miter * setPickingSize(a_Size.x) * reverse_offset_normal(a_Normal);
  
  vec2 offset = project_pixel(size.xy);

  float lineDistance = a_DistanceAndIndex.x;
  float currentLinePointRatio = lineDistance / a_Total_Distance;
 
  if(u_arrow > 0.0) {
      //  \u8BA1\u7B97\u7BAD\u5934
    offset = calculateArrow(offset);

    if(a_DistanceAndIndex.y > 4.0) {
      offset *= mix(1.0, u_tailWidth, currentLinePointRatio);
    }
  }

  float lineOffsetWidth = length(offset + offset * sign(a_Miter)); // \u7EBF\u6A2A\u5411\u504F\u79FB\u7684\u8DDD\u79BB\uFF08\u5411\u4E24\u4FA7\u504F\u79FB\u7684\u548C\uFF09
  float linePixelSize = project_pixel(a_Size.x) * 2.0;  // \u5B9A\u70B9\u4F4D\u7F6E\u504F\u79FB\uFF0C\u6309\u5730\u56FE\u7B49\u7EA7\u7F29\u653E\u540E\u7684\u8DDD\u79BB \u5355\u4FA7 * 2
  float texV = lineOffsetWidth/linePixelSize; // \u7EBF\u56FE\u5C42\u8D34\u56FE\u90E8\u5206\u7684 v \u5750\u6807\u503C

  // \u8BBE\u7F6E\u6570\u636E\u96C6\u7684\u53C2\u6570
  styleMappingMat[3][0] = currentLinePointRatio; // \u5F53\u524D\u70B9\u4F4D\u8DDD\u79BB\u5360\u7EBF\u603B\u957F\u7684\u6BD4\u4F8B
  styleMappingMat[3][1] = lineDistance;       // \u5F53\u524D\u9876\u70B9\u7684\u8DDD\u79BB
  styleMappingMat[3][2] = d_texPixelLen;    // \u8D34\u56FE\u7684\u50CF\u7D20\u957F\u5EA6\uFF0C\u6839\u636E\u5730\u56FE\u5C42\u7EA7\u7F29\u653E
  styleMappingMat[3][3] = texV;             // \u7EBF\u56FE\u5C42\u8D34\u56FE\u90E8\u5206\u7684 v \u5750\u6807\u503C

  vec4 project_pos = project_position(vec4(a_Position.xy, 0, 1.0));

  // gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offset, a_Size.y, 1.0));

  float h = float(a_Position.z) * u_vertexScale; // \u7EBF\u9876\u70B9\u7684\u9AD8\u5EA6 - \u517C\u5BB9\u4E0D\u5B58\u5728\u7B2C\u4E09\u4E2A\u6570\u503C\u7684\u60C5\u51B5 vertex height
  float lineHeight = a_Size.y; // size \u7B2C\u4E8C\u4E2A\u53C2\u6570\u4EE3\u8868\u7684\u9AD8\u5EA6 [linewidth, lineheight]

if(u_coord > 0.0) {
    if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
    lineHeight *= 0.2; // \u4FDD\u6301\u548C amap/mapbox \u4E00\u81F4\u7684\u6548\u679C
    h *= 0.2;
    if(u_heightfixed < 1.0) {
      lineHeight = project_pixel(a_Size.y);
    }
    gl_Position = u_Mvp * (vec4(project_pos.xy + offset, lineHeight + h, 1.0));
  } else {
    // mapbox -  amap
    
    // \u517C\u5BB9 mapbox \u5728\u7EBF\u9AD8\u5EA6\u4E0A\u7684\u6548\u679C\u8868\u73B0\u57FA\u672C\u4E00\u81F4
    if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
      // mapbox
      // \u4FDD\u6301\u9AD8\u5EA6\u76F8\u5BF9\u4E0D\u53D8
      float mapboxZoomScale = 4.0/pow(2.0, 21.0 - u_Zoom);
      h *= mapboxZoomScale;
      if(u_heightfixed > 0.0) {
        lineHeight *= mapboxZoomScale;
      }
      
    } else {
      // amap
      // lineHeight \u9876\u70B9\u504F\u79FB\u9AD8\u5EA6
      if(u_heightfixed < 1.0) {
        lineHeight *= pow(2.0, 20.0 - u_Zoom);
      }
    }

    gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offset, lineHeight + h, 1.0));
  }
} else {
  vec2 pointPos = a_Position.xy;
  vec4 tileWorld = vec4(project_mvt_offset_position(vec4(u_tileOrigin, 0.0, 1.0)).xyz, 1.0); // \u74E6\u7247\u8D77\u59CB\u70B9\u7684\u4E16\u754C\u5750\u6807

  vec2 pointOffset =  pointPos *  pow(2.0, u_Zoom); // \u74E6\u7247\u5185\u7684\u70B9\u7684\u504F\u79FB\u5750\u6807
  
  tileWorld.xy += pointOffset;

  tileWorld.xy += offset;

  if (u_CoordinateSystem == COORDINATE_SYSTEM_METER_OFFSET || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
    // Needs to be divided with project_uCommonUnitsPerMeter
    tileWorld.w *= u_PixelsPerMeter.z;
  }

  gl_Position = u_ViewProjectionMatrix * tileWorld + u_ViewportCenterProjection;
}


  setPickingColor(a_PickingColor);


}
`,Ape=function(e){Ct(n,e);var t=kpe(n);function n(){var r;Ae(this,n);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return r=t.call.apply(t,[this].concat(i)),m(D(r),"texture",void 0),m(D(r),"updateTexture",function(){var s=r.rendererService.createTexture2D;if(r.texture){r.texture.update({data:r.iconService.getCanvas()}),r.layer.render();return}r.texture=s({data:r.iconService.getCanvas(),mag:V.NEAREST,min:V.NEAREST,premultiplyAlpha:!1,width:1024,height:r.iconService.canvasHeight||128})}),r}return Oe(n,[{key:"getUninforms",value:function(){var a=this.layer.getLayerConfig(),i=a.opacity,o=i===void 0?1:i,s=a.textureBlend,l=s===void 0?"normal":s,u=a.lineTexture,c=u===void 0?!1:u,f=a.iconStep,d=f===void 0?100:f,p=a.vertexHeightScale,h=p===void 0?20:p,g=a.borderWidth,v=g===void 0?0:g,b=a.borderColor,y=b===void 0?"#ccc":b,x=a.heightfixed,E=x===void 0?!1:x,T=a.arrow,C=T===void 0?{enable:!1,arrowWidth:2,arrowHeight:3,tailWidth:1}:T,I=a.coord,P=I===void 0?"lnglat":I,j=a.tileOrigin;if(this.rendererService.getDirty()&&this.texture.bind(),this.dataTextureTest&&this.dataTextureNeedUpdate({opacity:o})){this.judgeStyleAttributes({opacity:o});var A=this.layer.getEncodedData(),S=this.calDataFrame(this.cellLength,A,this.cellProperties),M=S.data,O=S.width,R=S.height;this.rowCount=R,this.dataTexture=this.cellLength>0&&M.length>0?this.createTexture2D({flipY:!0,data:M,format:V.LUMINANCE,type:V.FLOAT,width:O,height:R}):this.createTexture2D({flipY:!0,data:[1],format:V.LUMINANCE,type:V.FLOAT,width:1,height:1})}return{u_tileOrigin:j||[0,0],u_coord:P==="lnglat"?1:0,u_dataTexture:this.dataTexture,u_cellTypeLayout:this.getCellTypeLayout(),u_opacity:Number(o),u_textureBlend:l==="normal"?0:1,u_texture:this.texture,u_line_texture:c?1:0,u_icon_step:d,u_textSize:[1024,this.iconService.canvasHeight||128],u_borderWidth:v,u_borderColor:Ko(y),u_heightfixed:Number(E),u_vertexScale:h,u_arrow:Number(C.enable),u_arrowHeight:C.arrowHeight||3,u_arrowWidth:C.arrowWidth||2,u_tailWidth:C.tailWidth===void 0?1:C.tailWidth}}},{key:"initModels",value:function(){return this.updateTexture(),this.iconService.on("imageUpdate",this.updateTexture),this.buildModels()}},{key:"clearModels",value:function(){var a,i;(a=this.texture)===null||a===void 0||a.destroy(),(i=this.dataTexture)===null||i===void 0||i.destroy(),this.iconService.off("imageUpdate",this.updateTexture)}},{key:"buildModels",value:function(){var a=this.layer.getLayerConfig(),i=a.mask,o=i===void 0?!1:i,s=a.maskInside,l=s===void 0?!0:s,u=a.depth,c=u===void 0?!1:u,f=this.getShaders(),d=f.frag,p=f.vert,h=f.type;return this.layer.triangulation=G4,[this.layer.buildLayerModel({moduleName:h,vertexShader:p,fragmentShader:d,triangulation:G4,primitive:V.TRIANGLES,blend:this.getBlend(),depth:{enable:c},stencil:_i(o,l)})]}},{key:"getShaders",value:function(){return{frag:Cpe,vert:Tpe,type:"line_tile"}}},{key:"registerBuiltinAttributes",value:function(){var a=this;this.styleAttributeService.registerStyleAttribute({name:"distanceAndIndex",type:vn.Attribute,descriptor:{name:"a_DistanceAndIndex",buffer:{usage:V.STATIC_DRAW,data:[],type:V.FLOAT},size:2,update:function(o,s,l,u,c,f){return f===void 0?[l[3],10]:[l[3],f]}}}),this.styleAttributeService.registerStyleAttribute({name:"total_distance",type:vn.Attribute,descriptor:{name:"a_Total_Distance",buffer:{usage:V.STATIC_DRAW,data:[],type:V.FLOAT},size:1,update:function(o,s,l,u){return[l[5]]}}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:vn.Attribute,descriptor:{name:"a_Size",buffer:{usage:V.DYNAMIC_DRAW,data:[],type:V.FLOAT},size:2,update:function(o,s,l,u){var c=o.size,f=c===void 0?1:c;return Array.isArray(f)?[f[0],f[1]]:[f,0]}}}),this.styleAttributeService.registerStyleAttribute({name:"normal",type:vn.Attribute,descriptor:{name:"a_Normal",buffer:{usage:V.STATIC_DRAW,data:[],type:V.FLOAT},size:3,update:function(o,s,l,u,c){return c}}}),this.styleAttributeService.registerStyleAttribute({name:"miter",type:vn.Attribute,descriptor:{name:"a_Miter",buffer:{usage:V.STATIC_DRAW,data:[],type:V.FLOAT},size:1,update:function(o,s,l,u){return[l[4]]}}}),this.styleAttributeService.registerStyleAttribute({name:"uv",type:vn.Attribute,descriptor:{name:"a_iconMapUV",buffer:{usage:V.DYNAMIC_DRAW,data:[],type:V.FLOAT},size:2,update:function(o,s,l,u){var c=a.iconService.getIconMap(),f=o.texture,d=c[f]||{x:0,y:0},p=d.x,h=d.y;return[p,h]}}})}}]),n}(Fa);function Ope(e,t){var n=typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=Mpe(e))||t&&e&&typeof e.length=="number"){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(u){throw u},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i=!0,o=!1,s;return{s:function(){n=n.call(e)},n:function(){var u=n.next();return i=u.done,u},e:function(u){o=!0,s=u},f:function(){try{!i&&n.return!=null&&n.return()}finally{if(o)throw s}}}}function Mpe(e,t){if(!!e){if(typeof e=="string")return H4(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return H4(e,t)}}function H4(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Rpe=function(){function e(t,n,r){Ae(this,e),m(this,"boxCells",[]),m(this,"xCellCount",void 0),m(this,"yCellCount",void 0),m(this,"boxKeys",void 0),m(this,"bboxes",void 0),m(this,"width",void 0),m(this,"height",void 0),m(this,"xScale",void 0),m(this,"yScale",void 0),m(this,"boxUid",void 0);var a=this.boxCells;this.xCellCount=Math.ceil(t/r),this.yCellCount=Math.ceil(n/r);for(var i=0;i<this.xCellCount*this.yCellCount;i++)a.push([]);this.boxKeys=[],this.bboxes=[],this.width=t,this.height=n,this.xScale=this.xCellCount/t,this.yScale=this.yCellCount/n,this.boxUid=0}return Oe(e,[{key:"insert",value:function(n,r,a,i,o){this.forEachCell(r,a,i,o,this.insertBoxCell,this.boxUid++),this.boxKeys.push(n),this.bboxes.push(r),this.bboxes.push(a),this.bboxes.push(i),this.bboxes.push(o)}},{key:"query",value:function(n,r,a,i,o){return this.queryHitTest(n,r,a,i,!1,o)}},{key:"hitTest",value:function(n,r,a,i,o){return this.queryHitTest(n,r,a,i,!0,o)}},{key:"insertBoxCell",value:function(n,r,a,i,o,s){this.boxCells[o].push(s)}},{key:"queryHitTest",value:function(n,r,a,i,o,s){if(a<0||n>this.width||i<0||r>this.height)return o?!1:[];var l=[];if(n<=0&&r<=0&&this.width<=a&&this.height<=i){if(o)return!0;for(var u=0;u<this.boxKeys.length;u++)l.push({key:this.boxKeys[u],x1:this.bboxes[u*4],y1:this.bboxes[u*4+1],x2:this.bboxes[u*4+2],y2:this.bboxes[u*4+3]});return s?l.filter(s):l}var c={hitTest:o,seenUids:{box:{},circle:{}}};return this.forEachCell(n,r,a,i,this.queryCell,l,c,s),o?l.length>0:l}},{key:"queryCell",value:function(n,r,a,i,o,s,l,u){var c=l.seenUids,f=this.boxCells[o];if(f!==null){var d=this.bboxes,p=Ope(f),h;try{for(p.s();!(h=p.n()).done;){var g=h.value;if(!c.box[g]){c.box[g]=!0;var v=g*4;if(n<=d[v+2]&&r<=d[v+3]&&a>=d[v+0]&&i>=d[v+1]&&(!u||u(this.boxKeys[g]))){if(l.hitTest)return s.push(!0),!0;s.push({key:this.boxKeys[g],x1:d[v],y1:d[v+1],x2:d[v+2],y2:d[v+3]})}}}}catch(b){p.e(b)}finally{p.f()}}return!1}},{key:"forEachCell",value:function(n,r,a,i,o,s,l,u){for(var c=this.convertToXCellCoord(n),f=this.convertToYCellCoord(r),d=this.convertToXCellCoord(a),p=this.convertToYCellCoord(i),h=c;h<=d;h++)for(var g=f;g<=p;g++){var v=this.xCellCount*g+h;if(o.call(this,n,r,a,i,v,s,l,u))return}}},{key:"convertToXCellCoord",value:function(n){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(n*this.xScale)))}},{key:"convertToYCellCoord",value:function(n){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(n*this.yScale)))}}]),e}(),Ppe=Rpe,Ipe=function(){function e(t,n){Ae(this,e),m(this,"width",void 0),m(this,"height",void 0),m(this,"grid",void 0),m(this,"viewportPadding",100),m(this,"screenRightBoundary",void 0),m(this,"screenBottomBoundary",void 0),m(this,"gridRightBoundary",void 0),m(this,"gridBottomBoundary",void 0),this.width=t,this.height=n,this.viewportPadding=Math.max(t,n),this.grid=new Ppe(t+this.viewportPadding,n+this.viewportPadding,25),this.screenRightBoundary=t+this.viewportPadding,this.screenBottomBoundary=n+this.viewportPadding,this.gridRightBoundary=t+2*this.viewportPadding,this.gridBottomBoundary=n+2*this.viewportPadding}return Oe(e,[{key:"placeCollisionBox",value:function(n){var r=n.x1+n.anchorPointX+this.viewportPadding,a=n.y1+n.anchorPointY+this.viewportPadding,i=n.x2+n.anchorPointX+this.viewportPadding,o=n.y2+n.anchorPointY+this.viewportPadding;return!this.isInsideGrid(r,a,i,o)||this.grid.hitTest(r,a,i,o)?{box:[]}:{box:[r,a,i,o]}}},{key:"insertCollisionBox",value:function(n,r){var a={featureIndex:r};this.grid.insert(a,n[0],n[1],n[2],n[3])}},{key:"project",value:function(n,r,a){var i=lie(r,a,0,1),o=XL(),s=SL.apply(Aae,Ue(n));return YL(o,i,s),{x:(o[0]/o[3]+1)/2*this.width+this.viewportPadding,y:(-o[1]/o[3]+1)/2*this.height+this.viewportPadding}}},{key:"isInsideGrid",value:function(n,r,a,i){return a>=0&&n<this.gridRightBoundary&&i>=0&&r<this.gridBottomBoundary}}]),e}();function BN(e,t){var n=typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=Lpe(e))||t&&e&&typeof e.length=="number"){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(u){throw u},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i=!0,o=!1,s;return{s:function(){n=n.call(e)},n:function(){var u=n.next();return i=u.done,u},e:function(u){o=!0,s=u},f:function(){try{!i&&n.return!=null&&n.return()}finally{if(o)throw s}}}}function Lpe(e,t){if(!!e){if(typeof e=="string")return W4(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return W4(e,t)}}function W4(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function zN(e){var t=.5,n=.5;switch(e){case"right":case"top-right":case"bottom-right":t=1;break;case"left":case"top-left":case"bottom-left":t=0;break;default:t=.5}switch(e){case"bottom":case"bottom-right":case"bottom-left":n=1;break;case"top":case"top-right":case"top-left":n=0;break;default:n=.5}return{horizontalAlign:t,verticalAlign:n}}function UN(e,t,n,r,a){if(!!a){var i=e[r],o=i.glyph;if(o)for(var s=t[o].advance*i.scale,l=(e[r].x+s)*a,u=n;u<=r;u++)e[u].x-=l}}function $N(e,t,n,r,a,i,o){var s=(t-n)*a,l=(-r*o+.5)*i,u=BN(e),c;try{for(u.s();!(c=u.n()).done;){var f=c.value;f.x+=s,f.y+=l}}catch(d){u.e(d)}finally{u.f()}}function Npe(e,t,n,r,a,i,o){var s=-8,l=0,u=s,c=0,f=e.positionedGlyphs,d=i==="right"?1:i==="left"?0:.5,p=f.length;n.forEach(function(y){if(y.split("").forEach(function(E){var T=t[E],C=0;T&&(f.push({glyph:E,x:l,y:u+C,vertical:!1,scale:1,metrics:T}),l+=T.advance+o)}),f.length!==p){var x=l-o;c=Math.max(x,c),UN(f,t,p,f.length-1,d)}l=0,u-=r+5});var h=zN(a),g=h.horizontalAlign,v=h.verticalAlign;$N(f,d,g,v,c,r,n.length);var b=u-s;e.top+=-v*b,e.bottom=e.top-b,e.left+=-g*c,e.right=e.left+c}function Fpe(e,t,n,r,a,i,o){var s=-8,l=0,u=s,c=0,f=e.positionedGlyphs,d=i==="right"?1:i==="left"?0:.5,p=f.length;n.forEach(function(y){var x=t[y],E=0;if(x&&(f.push({glyph:y,x:x.advance/2,y:u+E,vertical:!1,scale:1,metrics:x}),l+=x.advance+o),f.length!==p){var T=l-o;c=Math.max(T,c),UN(f,t,p,f.length-1,d)}l=0,u-=r+5});var h=zN(a),g=h.horizontalAlign,v=h.verticalAlign;$N(f,d,g,v,c,r,n.length);var b=u-s;e.top+=-v*b,e.bottom=e.top-b,e.left+=-g*c,e.right=e.left+c}function Dpe(e,t,n,r,a,i){var o=arguments.length>6&&arguments[6]!==void 0?arguments[6]:[0,0],s=arguments.length>7?arguments[7]:void 0,l=e.split(`
`),u=[],c={positionedGlyphs:u,top:o[1],bottom:o[1],left:o[0],right:o[0],lineCount:l.length,text:e};return s?Fpe(c,t,l,n,r,a,i):Npe(c,t,l,n,r,a,i),u.length?c:!1}function Bpe(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[0,0],n=arguments.length>2?arguments[2]:void 0,r=e.positionedGlyphs,a=r===void 0?[]:r,i=[],o=BN(a),s;try{for(o.s();!(s=o.n()).done;){var l=s.value,u=l.metrics,c=4,f=u.advance*l.scale/2,d=n?[l.x+f,l.y]:[0,0],p=n?[0,0]:[l.x+f+t[0],l.y+t[1]],h=(0-c)*l.scale-f+p[0],g=(0-c)*l.scale+p[1],v=h+u.width*l.scale,b=g+u.height*l.scale,y={x:h,y:g},x={x:v,y:g},E={x:h,y:b},T={x:v,y:b};i.push({tl:y,tr:x,bl:E,br:T,tex:u,glyphOffset:d})}}catch(C){o.e(C)}finally{o.f()}return i}function zpe(e,t){var n=typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=Upe(e))||t&&e&&typeof e.length=="number"){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(u){throw u},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i=!0,o=!1,s;return{s:function(){n=n.call(e)},n:function(){var u=n.next();return i=u.done,u},e:function(u){o=!0,s=u},f:function(){try{!i&&n.return!=null&&n.return()}finally{if(o)throw s}}}}function Upe(e,t){if(!!e){if(typeof e=="string")return X4(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return X4(e,t)}}function X4(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function $pe(e){var t=Vpe();return function(){var r=Ee(e),a;if(t){var i=Ee(this).constructor;a=Reflect.construct(r,arguments,i)}else a=r.apply(this,arguments);return Mt(this,a)}}function Vpe(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var Y4=`#define SDF_PX 8.0
#define EDGE_GAMMA 0.105
#define FONT_SIZE 48.0
uniform sampler2D u_sdf_map;
uniform float u_gamma_scale : 0.5;
// uniform float u_font_size : 24.0;
uniform float u_opacity : 1.0;
uniform vec4 u_stroke_color : [0, 0, 0, 1];
uniform float u_stroke_width : 2.0;
uniform float u_halo_blur : 0.5;
uniform float u_DevicePixelRatio;

varying vec4 v_color;
varying vec2 v_uv;
varying float v_gamma_scale;
varying float v_fontScale;

varying mat4 styleMappingMat; // \u4F20\u9012\u4ECE\u7247\u5143\u4E2D\u4F20\u9012\u7684\u6620\u5C04\u6570\u636E

#pragma include "picking"
void main() {
  // get style data mapping
  float opacity = styleMappingMat[0][0];
  float strokeWidth = styleMappingMat[0][2];
  vec4 textrueStroke = vec4(
    styleMappingMat[1][0],
    styleMappingMat[1][1],
    styleMappingMat[1][2],
    styleMappingMat[1][3]
  );

  // get sdf from atlas
  float dist = texture2D(u_sdf_map, v_uv).a;

  // float fontScale = u_font_size / FONT_SIZE;

  // lowp float buff = (6.0 - u_stroke_width / v_fontScale) / SDF_PX;
  lowp float buff = (6.0 - strokeWidth / v_fontScale) / SDF_PX;
  highp float gamma = (u_halo_blur * 1.19 / SDF_PX + EDGE_GAMMA) / (v_fontScale * u_gamma_scale) / 1.0;

  highp float gamma_scaled = gamma * v_gamma_scale;

  highp float alpha = smoothstep(buff - gamma_scaled, buff + gamma_scaled, dist);
  // gl_FragColor = mix(vec4(v_color.rgb, v_color.a * u_opacity), vec4(u_stroke_color.rgb, u_stroke_color.a * u_opacity), smoothstep(0., 0.5, 1. - dist));
  gl_FragColor = mix(vec4(v_color.rgb, v_color.a * opacity), vec4(textrueStroke.rgb, textrueStroke.a * opacity), smoothstep(0., 0.5, 1. - dist));
  gl_FragColor.a= gl_FragColor.a * alpha;
  gl_FragColor = filterColor(gl_FragColor);
}
`,Z4=`#define SDF_PX 8.0
#define EDGE_GAMMA 0.105
#define FONT_SIZE 24.0
attribute vec3 a_Position;
attribute vec2 a_tex;
attribute vec2 a_textOffsets;
attribute vec4 a_Color;
attribute float a_Size;
attribute float a_Rotate;

uniform vec2 u_sdf_map_size;
uniform mat4 u_ModelMatrix;
uniform mat4 u_Mvp;
uniform float u_raisingHeight: 0.0;

varying vec2 v_uv;
varying float v_gamma_scale;
varying vec4 v_color;
varying float v_fontScale;

varying mat4 styleMappingMat; // \u7528\u4E8E\u5C06\u5728\u9876\u70B9\u7740\u8272\u5668\u4E2D\u8BA1\u7B97\u597D\u7684\u6837\u5F0F\u503C\u4F20\u9012\u7ED9\u7247\u5143

uniform float u_opacity : 1;
uniform float u_stroke_width : 2;
uniform vec4 u_stroke_color : [0.0, 0.0, 0.0, 0.0];

#pragma include "styleMapping"
#pragma include "styleMappingCalOpacity"
#pragma include "styleMappingCalStrokeWidth"

#pragma include "projection"
#pragma include "picking"

void main() {
  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97
   styleMappingMat = mat4(
    0.0, 0.0, 0.0, 0.0, // opacity - strokeOpacity - strokeWidth - empty
    0.0, 0.0, 0.0, 0.0, // strokeR - strokeG - strokeB - strokeA
    0.0, 0.0, 0.0, 0.0, // offsets[0] - offsets[1]
    0.0, 0.0, 0.0, 0.0
  );

  float rowCount = u_cellTypeLayout[0][0];    // \u5F53\u524D\u7684\u6570\u636E\u7EB9\u7406\u6709\u51E0\u884C
  float columnCount = u_cellTypeLayout[0][1]; // \u5F53\u770B\u5230\u6570\u636E\u7EB9\u7406\u6709\u51E0\u5217
  float columnWidth = 1.0/columnCount;  // \u5217\u5BBD
  float rowHeight = 1.0/rowCount;       // \u884C\u9AD8
  float cellCount = calCellCount(); // opacity - strokeOpacity - strokeWidth - stroke - offsets
  float id = a_vertexId; // \u7B2Cn\u4E2A\u9876\u70B9
  float cellCurrentRow = floor(id * cellCount / columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u884C
  float cellCurrentColumn = mod(id * cellCount, columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u5217
  
  // cell \u56FA\u5B9A\u987A\u5E8F opacity -> strokeOpacity -> strokeWidth -> stroke ... 
  // \u6309\u987A\u5E8F\u4ECE cell \u4E2D\u53D6\u503C\u3001\u82E5\u6CA1\u6709\u5219\u81EA\u52A8\u5F80\u4E0B\u53D6\u503C
  float textureOffset = 0.0; // \u5728 cell \u4E2D\u53D6\u503C\u7684\u504F\u79FB\u91CF

  vec2 opacityAndOffset = calOpacityAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);
  styleMappingMat[0][0] = opacityAndOffset.r;
  textureOffset = opacityAndOffset.g;

   vec2 strokeWidthAndOffset = calStrokeWidthAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);
  styleMappingMat[0][2] = strokeWidthAndOffset.r;
  textureOffset = strokeWidthAndOffset.g;

  vec4 textrueStroke = vec4(-1.0, -1.0, -1.0, -1.0);
  if(hasStroke()) {
    vec2 valueRPos = nextPos(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset);
    styleMappingMat[1][0] = pos2value(valueRPos, columnWidth, rowHeight); // R
    textureOffset += 1.0;

    vec2 valueGPos = nextPos(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset);
    styleMappingMat[1][1] = pos2value(valueGPos, columnWidth, rowHeight); // G
    textureOffset += 1.0;

    vec2 valueBPos = nextPos(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset);
    styleMappingMat[1][2] = pos2value(valueBPos, columnWidth, rowHeight); // B
    textureOffset += 1.0;

    vec2 valueAPos = nextPos(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset);
    styleMappingMat[1][3] = pos2value(valueAPos, columnWidth, rowHeight); // A
    textureOffset += 1.0;
  } else {
    if(u_stroke_color == vec4(0.0)) {
      styleMappingMat[1][0] = v_color.r;
      styleMappingMat[1][1] = v_color.g;
      styleMappingMat[1][2] = v_color.b;
      styleMappingMat[1][3] = v_color.a;
    } else {
      styleMappingMat[1][0] = u_stroke_color.r;
      styleMappingMat[1][1] = u_stroke_color.g;
      styleMappingMat[1][2] = u_stroke_color.b;
      styleMappingMat[1][3] = u_stroke_color.a;
    }
  }
  
  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97

  v_color = a_Color;
  v_uv = a_tex / u_sdf_map_size;

  // \u6587\u672C\u7F29\u653E\u6BD4\u4F8B
  float fontScale = a_Size / FONT_SIZE;
  v_fontScale = fontScale;

  vec4 project_pos = project_position(vec4(a_Position, 1.0));
  // vec4 projected_position  = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));

  highp float angle_sin = sin(a_Rotate);
  highp float angle_cos = cos(a_Rotate);
  mat2 rotation_matrix = mat2(angle_cos, -1.0 * angle_sin, angle_sin, angle_cos);
  
  // gl_Position = vec4(projected_position.xy / projected_position.w + rotation_matrix * a_textOffsets * fontScale / u_ViewportSize * 2.0 * u_DevicePixelRatio, 0.0, 1.0);

  float raiseHeight = u_raisingHeight;
  if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
    float mapboxZoomScale = 4.0/pow(2.0, 21.0 - u_Zoom);
    raiseHeight = u_raisingHeight * mapboxZoomScale;
  }

  vec4 projected_position;
  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
   projected_position  = u_Mvp * (vec4(a_Position.xyz + vec3(0.0, 0.0, raiseHeight), 1.0));
  } else { // else
   projected_position  = project_common_position_to_clipspace(vec4(project_pos.xyz + vec3(0.0, 0.0, raiseHeight), 1.0));
  }

  gl_Position = vec4(
    projected_position.xy / projected_position.w + rotation_matrix * a_textOffsets * fontScale / u_ViewportSize * 2.0 * u_DevicePixelRatio, 0.0, 1.0);
  v_gamma_scale = gl_Position.w;
  setPickingColor(a_PickingColor);

}
`;function q4(e){var t=this,n=e.id,r=[],a=[];if(!t.glyphInfoMap||!t.glyphInfoMap[n])return{vertices:[],indices:[],size:7};var i=t.glyphInfoMap[n].centroid,o=i.length===2?[i[0],i[1],0]:i;return t.glyphInfoMap[n].glyphQuads.forEach(function(s,l){r.push.apply(r,Ue(o).concat([s.tex.x,s.tex.y+s.tex.height,s.tl.x,s.tl.y],Ue(o),[s.tex.x+s.tex.width,s.tex.y+s.tex.height,s.tr.x,s.tr.y],Ue(o),[s.tex.x+s.tex.width,s.tex.y,s.br.x,s.br.y],Ue(o),[s.tex.x,s.tex.y,s.bl.x,s.bl.y])),a.push(0+l*4,1+l*4,2+l*4,2+l*4,3+l*4,0+l*4)}),{vertices:r,indices:a,size:7}}var VN=function(e){Ct(n,e);var t=$pe(n);function n(){var r;Ae(this,n);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return r=t.call.apply(t,[this].concat(i)),m(D(r),"glyphInfo",void 0),m(D(r),"glyphInfoMap",{}),m(D(r),"texture",void 0),m(D(r),"currentZoom",-1),m(D(r),"extent",void 0),m(D(r),"textureHeight",0),m(D(r),"textCount",0),m(D(r),"preTextStyle",{}),m(D(r),"buildModels",function(){var s=r.layer.getLayerConfig(),l=s.mask,u=l===void 0?!1:l,c=s.maskInside,f=c===void 0?!0:c;return r.initGlyph(),r.updateTexture(),r.filterGlyphs(),r.reBuildModel(),[r.layer.buildLayerModel({moduleName:"pointText",vertexShader:Z4,fragmentShader:Y4,triangulation:q4.bind(D(r)),depth:{enable:!1},blend:r.getBlend(),stencil:_i(u,f)})]}),r}return Oe(n,[{key:"getUninforms",value:function(){var a=this.layer.getLayerConfig(),i=a.opacity,o=i===void 0?1:i,s=a.stroke,l=s===void 0?"#fff":s,u=a.strokeWidth,c=u===void 0?0:u,f=a.textAnchor,d=f===void 0?"center":f,p=a.textAllowOverlap,h=p===void 0?!1:p,g=a.halo,v=g===void 0?.5:g,b=a.gamma,y=b===void 0?2:b,x=a.raisingHeight,E=x===void 0?0:x,T=this.fontService,C=T.canvas,I=T.mapping;if(Object.keys(I).length!==this.textCount&&(this.updateTexture(),this.textCount=Object.keys(I).length),this.preTextStyle={textAnchor:d,textAllowOverlap:h},this.dataTextureTest&&this.dataTextureNeedUpdate({opacity:o,strokeWidth:c,stroke:l})){this.judgeStyleAttributes({opacity:o,strokeWidth:c,stroke:l});var P=this.layer.getEncodedData(),j=this.calDataFrame(this.cellLength,P,this.cellProperties),A=j.data,S=j.width,M=j.height;this.rowCount=M,this.dataTexture=this.cellLength>0&&A.length>0?this.createTexture2D({flipY:!0,data:A,format:V.LUMINANCE,type:V.FLOAT,width:S,height:M}):this.createTexture2D({flipY:!0,data:[1],format:V.LUMINANCE,type:V.FLOAT,width:1,height:1})}return{u_dataTexture:this.dataTexture,u_cellTypeLayout:this.getCellTypeLayout(),u_raisingHeight:Number(E),u_opacity:Gn(o)?o:1,u_stroke_width:Gn(c)?c:1,u_stroke_color:this.getStrokeColor(l),u_sdf_map:this.texture,u_halo_blur:v,u_gamma_scale:y,u_sdf_map_size:[C.width,C.height]}}},{key:"initModels",value:function(){this.layer.on("remapping",this.buildModels),this.extent=this.textExtent();var a=this.layer.getLayerConfig(),i=a.textAnchor,o=i===void 0?"center":i,s=a.textAllowOverlap,l=s===void 0?!0:s;return this.preTextStyle={textAnchor:o,textAllowOverlap:l},this.buildModels()}},{key:"needUpdate",value:function(){var a=this.layer.getLayerConfig(),i=a.textAllowOverlap,o=i===void 0?!1:i,s=this.mapService.getZoom(),l=this.mapService.getBounds(),u=h2(this.extent,l);return!o&&(Math.abs(this.currentZoom-s)>1||!u)||o!==this.preTextStyle.textAllowOverlap?(this.reBuildModel(),!0):!1}},{key:"clearModels",value:function(){var a,i;(a=this.texture)===null||a===void 0||a.destroy(),(i=this.dataTexture)===null||i===void 0||i.destroy(),this.layer.off("remapping",this.buildModels)}},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"rotate",type:vn.Attribute,descriptor:{name:"a_Rotate",buffer:{usage:V.DYNAMIC_DRAW,data:[],type:V.FLOAT},size:1,update:function(i,o,s,l){var u=i.rotate,c=u===void 0?0:u;return Array.isArray(c)?[c[0]]:[c]}}}),this.styleAttributeService.registerStyleAttribute({name:"textOffsets",type:vn.Attribute,descriptor:{name:"a_textOffsets",buffer:{usage:V.STATIC_DRAW,data:[],type:V.FLOAT},size:2,update:function(i,o,s,l){return[s[5],s[6]]}}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:vn.Attribute,descriptor:{name:"a_Size",buffer:{usage:V.DYNAMIC_DRAW,data:[],type:V.FLOAT},size:1,update:function(i,o,s,l){var u=i.size,c=u===void 0?12:u;return Array.isArray(c)?[c[0]]:[c]}}}),this.styleAttributeService.registerStyleAttribute({name:"textUv",type:vn.Attribute,descriptor:{name:"a_tex",buffer:{usage:V.DYNAMIC_DRAW,data:[],type:V.FLOAT},size:2,update:function(i,o,s,l){return[s[3],s[4]]}}})}},{key:"textExtent",value:function(){var a=this.mapService.getBounds();return qp(a,.5)}},{key:"initTextFont",value:function(){var a=this.layer.getLayerConfig(),i=a.fontWeight,o=i===void 0?"400":i,s=a.fontFamily,l=s===void 0?"sans-serif":s,u=this.layer.getEncodedData(),c=[];u.forEach(function(f){var d=f.shape,p=d===void 0?"":d;p=p.toString();var h=zpe(p),g;try{for(h.s();!(g=h.n()).done;){var v=g.value;c.indexOf(v)===-1&&c.push(v)}}catch(b){h.e(b)}finally{h.f()}}),this.fontService.setFontOptions({characterSet:c,fontWeight:o,fontFamily:l,iconfont:!1})}},{key:"initIconFontTex",value:function(){var a=this.layer.getLayerConfig(),i=a.fontWeight,o=i===void 0?"400":i,s=a.fontFamily,l=s===void 0?"sans-serif":s,u=this.layer.getEncodedData(),c=[];u.forEach(function(f){var d=f.shape,p=d===void 0?"":d;p="".concat(p),c.indexOf(p)===-1&&c.push(p)}),this.fontService.setFontOptions({characterSet:c,fontWeight:o,fontFamily:l,iconfont:!0})}},{key:"generateGlyphLayout",value:function(a){var i=this,o=this.fontService.mapping,s=this.layer.getLayerConfig(),l=s.spacing,u=l===void 0?2:l,c=s.textAnchor,f=c===void 0?"center":c,d=this.layer.getEncodedData();this.glyphInfo=d.map(function(p){var h=p.shape,g=h===void 0?"":h,v=p.id,b=p.size,y=b===void 0?1:b,x=p.textOffset,E=x===void 0?[0,0]:x,T=Dpe(g.toString(),o,y,f,"left",u,E,a),C=Bpe(T,E,!1);return p.shaping=T,p.glyphQuads=C,p.centroid=_u(p.coordinates),p.originCentroid=p.version==="GAODE2.x"?_u(p.originCoordinates):p.originCentroid=p.centroid,i.glyphInfoMap[v]={shaping:T,glyphQuads:C,centroid:_u(p.coordinates)},p})}},{key:"filterGlyphs",value:function(){var a=this,i=this.layer.getLayerConfig(),o=i.padding,s=o===void 0?[4,4]:o,l=i.textAllowOverlap,u=l===void 0?!1:l;if(!u){this.glyphInfoMap={},this.currentZoom=this.mapService.getZoom(),this.extent=this.textExtent();var c=this.rendererService.getViewportSize(),f=c.width,d=c.height,p=new Ipe(f,d),h=this.glyphInfo.filter(function(g){var v=g.shaping,b=g.id,y=b===void 0?0:b,x=g.version==="GAODE2.x"?g.originCentroid:g.centroid,E=g.size,T=E/24,C=a.mapService.lngLatToContainer(x),I=p.placeCollisionBox({x1:v.left*T-s[0],x2:v.right*T+s[0],y1:v.top*T-s[1],y2:v.bottom*T+s[1],anchorPointX:C.x,anchorPointY:C.y}),P=I.box;return P&&P.length?(p.insertCollisionBox(P,y),!0):!1});h.forEach(function(g){a.glyphInfoMap[g.id]=g})}}},{key:"initGlyph",value:function(){var a=this.layer.getLayerConfig(),i=a.iconfont,o=i===void 0?!1:i;o?this.initIconFontTex():this.initTextFont(),this.generateGlyphLayout(o)}},{key:"updateTexture",value:function(){var a=this.rendererService.createTexture2D,i=this.fontService.canvas;this.textureHeight=i.height,this.texture&&this.texture.destroy(),this.texture=a({data:i,mag:V.LINEAR,min:V.LINEAR,width:i.width,height:i.height})}},{key:"reBuildModel",value:function(){var a=this.layer.getLayerConfig(),i=a.mask,o=i===void 0?!1:i,s=a.maskInside,l=s===void 0?!0:s;this.filterGlyphs(),this.layer.models=[this.layer.buildLayerModel({moduleName:"pointText",vertexShader:Z4,fragmentShader:Y4,triangulation:q4.bind(this),depth:{enable:!1},blend:this.getBlend(),stencil:_i(o,l)})]}}]),n}(Fa);function jpe(e){var t=Gpe();return function(){var r=Ee(e),a;if(t){var i=Ee(this).constructor;a=Reflect.construct(r,arguments,i)}else a=r.apply(this,arguments);return Mt(this,a)}}function Gpe(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var Hpe=`uniform float u_additive;
varying mat4 styleMappingMat; // \u4F20\u9012\u4ECE\u7247\u5143\u4E2D\u4F20\u9012\u7684\u6620\u5C04\u6570\u636E

varying vec4 v_data;
varying vec4 v_color;
varying float v_radius;

#pragma include "sdf_2d"
#pragma include "picking"

void main() {
  int shape = int(floor(v_data.w + 0.5));

  vec4 textrueStroke = vec4(
    styleMappingMat[1][0],
    styleMappingMat[1][1],
    styleMappingMat[1][2],
    styleMappingMat[1][3]
  );

  float opacity = styleMappingMat[0][0];
  float stroke_opacity = styleMappingMat[0][1];
  float strokeWidth = styleMappingMat[0][2];
  vec4 strokeColor = textrueStroke == vec4(0) ? v_color : textrueStroke;

  lowp float antialiasblur = v_data.z;
  float r = v_radius / (v_radius + strokeWidth);

  float outer_df;
  float inner_df;
  // 'circle', 'triangle', 'square', 'pentagon', 'hexagon', 'octogon', 'hexagram', 'rhombus', 'vesica'
  if (shape == 0) {
    outer_df = sdCircle(v_data.xy, 1.0);
    inner_df = sdCircle(v_data.xy, r);
  } else if (shape == 1) {
    outer_df = sdEquilateralTriangle(1.1 * v_data.xy);
    inner_df = sdEquilateralTriangle(1.1 / r * v_data.xy);
  } else if (shape == 2) {
    outer_df = sdBox(v_data.xy, vec2(1.));
    inner_df = sdBox(v_data.xy, vec2(r));
  } else if (shape == 3) {
    outer_df = sdPentagon(v_data.xy, 0.8);
    inner_df = sdPentagon(v_data.xy, r * 0.8);
  } else if (shape == 4) {
    outer_df = sdHexagon(v_data.xy, 0.8);
    inner_df = sdHexagon(v_data.xy, r * 0.8);
  } else if (shape == 5) {
    outer_df = sdOctogon(v_data.xy, 1.0);
    inner_df = sdOctogon(v_data.xy, r);
  } else if (shape == 6) {
    outer_df = sdHexagram(v_data.xy, 0.52);
    inner_df = sdHexagram(v_data.xy, r * 0.52);
  } else if (shape == 7) {
    outer_df = sdRhombus(v_data.xy, vec2(1.0));
    inner_df = sdRhombus(v_data.xy, vec2(r));
  } else if (shape == 8) {
    outer_df = sdVesica(v_data.xy, 1.1, 0.8);
    inner_df = sdVesica(v_data.xy, r * 1.1, r * 0.8);
  }


  float opacity_t = smoothstep(0.0, antialiasblur, outer_df);

  float color_t = strokeWidth < 0.01 ? 0.0 : smoothstep(
    antialiasblur,
    0.0,
    inner_df
  );

  if(strokeWidth < 0.01) {
    gl_FragColor = vec4(v_color.rgb, v_color.a * opacity);
  } else {
    gl_FragColor = mix(vec4(v_color.rgb, v_color.a * opacity), strokeColor * stroke_opacity, color_t);
  }

  if(u_additive > 0.0) {
    gl_FragColor *= opacity_t;
    gl_FragColor = filterColorAlpha(gl_FragColor, gl_FragColor.a);
  } else {
    gl_FragColor.a *= opacity_t;
    gl_FragColor = filterColor(gl_FragColor);
  }
}
`,Wpe=`attribute vec4 a_Color;
attribute vec3 a_Position;
attribute vec3 a_Extrude;
attribute float a_Size;
attribute float a_Shape;

varying mat4 styleMappingMat; // \u7528\u4E8E\u5C06\u5728\u9876\u70B9\u7740\u8272\u5668\u4E2D\u8BA1\u7B97\u597D\u7684\u6837\u5F0F\u503C\u4F20\u9012\u7ED9\u7247\u5143

uniform mat4 u_ModelMatrix;
uniform mat4 u_Mvp;
uniform float u_isMeter;

uniform vec2 u_tileOrigin;
uniform float u_coord;

varying vec4 v_data;
varying vec4 v_color;
varying float v_radius;

uniform float u_opacity : 1;
uniform float u_stroke_opacity : 1;
uniform float u_stroke_width : 2;
uniform vec4 u_stroke_color : [0.0, 0.0, 0.0, 0.0];
uniform vec2 u_offsets;

uniform float u_blur : 0.0;

#pragma include "styleMapping"
#pragma include "styleMappingCalOpacity"
#pragma include "styleMappingCalStrokeOpacity"
#pragma include "styleMappingCalStrokeWidth"

#pragma include "projection"
#pragma include "picking"

void main() {
  vec3 extrude = a_Extrude;
  float shape_type = a_Shape;
  float newSize = setPickingSize(a_Size);

  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97
  styleMappingMat = mat4(
    0.0, 0.0, 0.0, 0.0, // opacity - strokeOpacity - strokeWidth - empty
    0.0, 0.0, 0.0, 0.0, // strokeR - strokeG - strokeB - strokeA
    0.0, 0.0, 0.0, 0.0, // offsets[0] - offsets[1]
    0.0, 0.0, 0.0, 0.0
  );

  float rowCount = u_cellTypeLayout[0][0];    // \u5F53\u524D\u7684\u6570\u636E\u7EB9\u7406\u6709\u51E0\u884C
  float columnCount = u_cellTypeLayout[0][1]; // \u5F53\u770B\u5230\u6570\u636E\u7EB9\u7406\u6709\u51E0\u5217
  float columnWidth = 1.0/columnCount;  // \u5217\u5BBD
  float rowHeight = 1.0/rowCount;       // \u884C\u9AD8
  float cellCount = calCellCount(); // opacity - strokeOpacity - strokeWidth - stroke - offsets
  float id = a_vertexId; // \u7B2Cn\u4E2A\u9876\u70B9
  float cellCurrentRow = floor(id * cellCount / columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u884C
  float cellCurrentColumn = mod(id * cellCount, columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u5217
  
  // cell \u56FA\u5B9A\u987A\u5E8F opacity -> strokeOpacity -> strokeWidth -> stroke ... 
  // \u6309\u987A\u5E8F\u4ECE cell \u4E2D\u53D6\u503C\u3001\u82E5\u6CA1\u6709\u5219\u81EA\u52A8\u5F80\u4E0B\u53D6\u503C
  float textureOffset = 0.0; // \u5728 cell \u4E2D\u53D6\u503C\u7684\u504F\u79FB\u91CF

  vec2 opacityAndOffset = calOpacityAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);
  styleMappingMat[0][0] = opacityAndOffset.r;
  textureOffset = opacityAndOffset.g;

  vec2 strokeOpacityAndOffset = calStrokeOpacityAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);
  styleMappingMat[0][1] = strokeOpacityAndOffset.r;
  textureOffset = strokeOpacityAndOffset.g;

  vec2 strokeWidthAndOffset = calStrokeWidthAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);
  styleMappingMat[0][2] = strokeWidthAndOffset.r;
  textureOffset = strokeWidthAndOffset.g;

  vec4 textrueStroke = vec4(-1.0, -1.0, -1.0, -1.0);
  if(hasStroke()) {
    vec2 valueRPos = nextPos(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset);
    styleMappingMat[1][0] = pos2value(valueRPos, columnWidth, rowHeight); // R
    textureOffset += 1.0;

    vec2 valueGPos = nextPos(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset);
    styleMappingMat[1][1] = pos2value(valueGPos, columnWidth, rowHeight); // G
    textureOffset += 1.0;

    vec2 valueBPos = nextPos(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset);
    styleMappingMat[1][2] = pos2value(valueBPos, columnWidth, rowHeight); // B
    textureOffset += 1.0;

    vec2 valueAPos = nextPos(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset);
    styleMappingMat[1][3] = pos2value(valueAPos, columnWidth, rowHeight); // A
    textureOffset += 1.0;
  } else {
    if(u_stroke_color == vec4(0.0)) {
      styleMappingMat[1][0] = v_color.r;
      styleMappingMat[1][1] = v_color.g;
      styleMappingMat[1][2] = v_color.b;
      styleMappingMat[1][3] = v_color.a;
    } else {
      styleMappingMat[1][0] = u_stroke_color.r;
      styleMappingMat[1][1] = u_stroke_color.g;
      styleMappingMat[1][2] = u_stroke_color.b;
      styleMappingMat[1][3] = u_stroke_color.a;
    }
  }

  vec2 textrueOffsets = vec2(0.0, 0.0);
  if(hasOffsets()) {
    vec2 valueXPos = nextPos(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset);
    textrueOffsets.r = pos2value(valueXPos, columnWidth, rowHeight); // x
    textureOffset += 1.0;

    vec2 valueYPos = nextPos(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset);
    textrueOffsets.g = pos2value(valueYPos, columnWidth, rowHeight); // x
    textureOffset += 1.0;
  } else {
    textrueOffsets = u_offsets;
  }

  // cal style mapping

  v_color = a_Color;
  v_radius = newSize;

  // anti-alias
  //  float antialiased_blur = -max(u_blur, antialiasblur);
  float antialiasblur = -max(2.0 / u_DevicePixelRatio / a_Size, u_blur);

  vec2 offset = (extrude.xy * (newSize + u_stroke_width) + textrueOffsets);
  vec3 aPosition = a_Position;
  if(u_isMeter < 1.0) {
    // \u4E0D\u4EE5\u7C73\u4E3A\u5B9E\u9645\u5355\u4F4D
    offset = project_pixel(offset);
  } else {
    // \u4EE5\u7C73\u4E3A\u5B9E\u9645\u5355\u4F4D
    antialiasblur *= pow(19.0 - u_Zoom, 2.0);
    antialiasblur = max(antialiasblur, -0.01);
    // offset *= 0.5;

    if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
      aPosition.xy += offset;
      offset.x = 0.0;
      offset.y = 0.0;
    }
  }

  v_data = vec4(extrude.x, extrude.y, antialiasblur,shape_type);

  vec4 project_pos = project_position(vec4(aPosition.xy, 0.0, 1.0));

  if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
    float mapboxZoomScale = 4.0/pow(2.0, 21.0 - u_Zoom);
  }

if(u_coord > 0.0) {
  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
    gl_Position = u_Mvp * vec4(project_pos.xy + offset, 0.0, 1.0);
  } else {
    gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offset, 0.0, 1.0));
  }
} else {
  gl_PointSize = 24.0;
  vec2 pointPos = a_Position.xy;
  vec4 world = vec4(project_mvt_offset_position(vec4(u_tileOrigin, 0.0, 1.0)).xyz, 1.0); // \u74E6\u7247\u8D77\u59CB\u70B9\u7684\u4E16\u754C\u5750\u6807

  vec2 pointOffset =  pointPos *  pow(2.0, u_Zoom); // \u74E6\u7247\u5185\u7684\u70B9\u7684\u504F\u79FB\u5750\u6807
  
  world.xy += offset;
  world.xy += pointOffset;

  if (u_CoordinateSystem == COORDINATE_SYSTEM_METER_OFFSET || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
    // Needs to be divided with project_uCommonUnitsPerMeter
    world.w *= u_PixelsPerMeter.z;
  }

  gl_Position = u_ViewProjectionMatrix * world + u_ViewportCenterProjection;
}

 
  setPickingColor(a_PickingColor);


}
`,L0=function(e){Ct(n,e);var t=jpe(n);function n(){var r;Ae(this,n);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return r=t.call.apply(t,[this].concat(i)),m(D(r),"meter2coord",1),m(D(r),"isMeter",!1),r}return Oe(n,[{key:"getUninforms",value:function(){var a=this.layer.getLayerConfig(),i=a.opacity,o=i===void 0?1:i,s=a.strokeOpacity,l=s===void 0?1:s,u=a.strokeWidth,c=u===void 0?0:u,f=a.stroke,d=f===void 0?"rgba(0,0,0,0)":f,p=a.offsets,h=p===void 0?[0,0]:p,g=a.blend,v=a.blur,b=v===void 0?0:v,y=a.coord,x=y===void 0?"lnglat":y,E=a.tileOrigin;if(this.dataTextureTest&&this.dataTextureNeedUpdate({opacity:o,strokeOpacity:l,strokeWidth:c,stroke:d,offsets:h})){this.judgeStyleAttributes({opacity:o,strokeOpacity:l,strokeWidth:c,stroke:d,offsets:h});var T=this.layer.getEncodedData(),C=this.calDataFrame(this.cellLength,T,this.cellProperties),I=C.data,P=C.width,j=C.height;this.rowCount=j,this.dataTexture=this.cellLength>0&&I.length>0?this.createTexture2D({flipY:!0,data:I,format:V.LUMINANCE,type:V.FLOAT,width:P,height:j}):this.createTexture2D({flipY:!0,data:[1],format:V.LUMINANCE,type:V.FLOAT,width:1,height:1})}return{u_tileOrigin:E||[0,0],u_coord:x==="lnglat"?1:0,u_isMeter:Number(this.isMeter),u_blur:b,u_additive:g==="additive"?1:0,u_dataTexture:this.dataTexture,u_cellTypeLayout:this.getCellTypeLayout(),u_opacity:Number(o),u_stroke_opacity:Number(l),u_stroke_width:Number(c),u_stroke_color:this.getStrokeColor(d),u_offsets:this.isOffsetStatic(h)?h:[0,0]}}},{key:"getAttribute",value:function(){return this.styleAttributeService.createAttributesAndIndices(this.layer.getEncodedData(),qo)}},{key:"initModels",value:function(){var a=this.layer.getLayerConfig(),i=a.unit,o=i===void 0?"l7size":i,s=this.mapService.version;return o==="meter"&&s!==dr.L7MAP&&s!==dr.GLOBEL&&(this.isMeter=!0,this.calMeter2Coord()),this.buildModels()}},{key:"calMeter2Coord",value:function(){var a=Le(this.layer.getSource().extent,4),i=a[0],o=a[1],s=a[2],l=a[3],u=[(i+s)/2,(o+l)/2],c=this.mapService.version;if(c===dr.MAPBOX&&window.mapboxgl.MercatorCoordinate){var f=window.mapboxgl.MercatorCoordinate.fromLngLat({lng:u[0],lat:u[1]},0),d=1,p=d*f.meterInMercatorCoordinateUnits(),h=new window.mapboxgl.MercatorCoordinate(f.x-p,f.y,f.z),g=h.toLngLat();this.meter2coord=u[0]-g.lng;return}var v=this.mapService.meterToCoord(u,[i,o]),b=this.mapService.meterToCoord(u,[s===i?s+.1:s,l===o?o+.1:l]);this.meter2coord=(v+b)/2,Boolean(this.meter2coord)||(this.meter2coord=7.70681090738883)}},{key:"buildModels",value:function(){var a=this.layer.getLayerConfig(),i=a.mask,o=i===void 0?!1:i,s=a.maskInside,l=s===void 0?!0:s,u=this.getShaders(),c=u.frag,f=u.vert,d=u.type;return this.layer.triangulation=qo,[this.layer.buildLayerModel({moduleName:d,vertexShader:f,fragmentShader:c,triangulation:qo,depth:{enable:!1},blend:this.getBlend(),stencil:_i(o,l),cull:{enable:!0,face:mv(this.mapService.version)}})]}},{key:"getShaders",value:function(){return{frag:Hpe,vert:Wpe,type:"point_fill_tile"}}},{key:"clearModels",value:function(){var a;(a=this.dataTexture)===null||a===void 0||a.destroy()}},{key:"registerBuiltinAttributes",value:function(){var a=this;this.styleAttributeService.registerStyleAttribute({name:"extrude",type:vn.Attribute,descriptor:{name:"a_Extrude",buffer:{usage:V.DYNAMIC_DRAW,data:[],type:V.FLOAT},size:3,update:function(o,s,l,u){var c=[1,1,0,-1,1,0,-1,-1,0,1,-1,0],f=u%4*3;return[c[f],c[f+1],c[f+2]]}}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:vn.Attribute,descriptor:{name:"a_Size",buffer:{usage:V.DYNAMIC_DRAW,data:[],type:V.FLOAT},size:1,update:function(o,s,l,u){var c=o.size,f=c===void 0?5:c;return Array.isArray(f)?[f[0]*a.meter2coord]:[f*a.meter2coord]}}}),this.styleAttributeService.registerStyleAttribute({name:"shape",type:vn.Attribute,descriptor:{name:"a_Shape",buffer:{usage:V.DYNAMIC_DRAW,data:[],type:V.FLOAT},size:1,update:function(o,s,l,u){var c=o.shape,f=c===void 0?2:c,d=a.layer.getLayerConfig().shape2d,p=d.indexOf(f);return[p]}}})}}]),n}(Fa);function Xpe(e){var t=Ype();return function(){var r=Ee(e),a;if(t){var i=Ee(this).constructor;a=Reflect.construct(r,arguments,i)}else a=r.apply(this,arguments);return Mt(this,a)}}function Ype(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var Zpe=`uniform float u_opacity: 1.0;
varying vec4 v_Color;
varying mat4 styleMappingMat; // \u4F20\u9012\u4ECE\u7247\u5143\u4E2D\u4F20\u9012\u7684\u6620\u5C04\u6570\u636E

#pragma include "picking"

void main() {
  float opacity = styleMappingMat[0][0];
  gl_FragColor = v_Color;
  gl_FragColor.a *= opacity;
  gl_FragColor = filterColor(gl_FragColor);
}
`,qpe=`attribute vec4 a_Color;
attribute vec3 a_Position;

uniform mat4 u_ModelMatrix;
uniform mat4 u_Mvp;

uniform float u_opacity: 1.0;

uniform vec2 u_tileOrigin;
uniform float u_coord;

varying vec4 v_Color;
varying mat4 styleMappingMat; // \u7528\u4E8E\u5C06\u5728\u9876\u70B9\u7740\u8272\u5668\u4E2D\u8BA1\u7B97\u597D\u7684\u6837\u5F0F\u503C\u4F20\u9012\u7ED9\u7247\u5143

#pragma include "styleMapping"
#pragma include "styleMappingCalOpacity"

#pragma include "projection"
#pragma include "picking"

void main() {
  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97
styleMappingMat = mat4(
    0.0, 0.0, 0.0, 0.0, // opacity - strokeOpacity - strokeWidth - empty
    0.0, 0.0, 0.0, 0.0, // strokeR - strokeG - strokeB - strokeA
    0.0, 0.0, 0.0, 0.0, // offsets[0] - offsets[1]
    0.0, 0.0, 0.0, 0.0
  );

  float rowCount = u_cellTypeLayout[0][0];    // \u5F53\u524D\u7684\u6570\u636E\u7EB9\u7406\u6709\u51E0\u884C
  float columnCount = u_cellTypeLayout[0][1]; // \u5F53\u770B\u5230\u6570\u636E\u7EB9\u7406\u6709\u51E0\u5217
  float columnWidth = 1.0/columnCount;  // \u5217\u5BBD
  float rowHeight = 1.0/rowCount;       // \u884C\u9AD8
  float cellCount = calCellCount(); // opacity - strokeOpacity - strokeWidth - stroke - offsets
  float id = a_vertexId; // \u7B2Cn\u4E2A\u9876\u70B9
  float cellCurrentRow = floor(id * cellCount / columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u884C
  float cellCurrentColumn = mod(id * cellCount, columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u5217
  
  // cell \u56FA\u5B9A\u987A\u5E8F opacity -> strokeOpacity -> strokeWidth -> stroke ... 
  // \u6309\u987A\u5E8F\u4ECE cell \u4E2D\u53D6\u503C\u3001\u82E5\u6CA1\u6709\u5219\u81EA\u52A8\u5F80\u4E0B\u53D6\u503C
  float textureOffset = 0.0; // \u5728 cell \u4E2D\u53D6\u503C\u7684\u504F\u79FB\u91CF

  vec2 opacityAndOffset = calOpacityAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);
  styleMappingMat[0][0] = opacityAndOffset.r;
  textureOffset = opacityAndOffset.g;
  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97

  v_Color = a_Color;
  vec4 project_pos = project_position(vec4(a_Position, 1.0));


  if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
    float mapboxZoomScale = 4.0/pow(2.0, 21.0 - u_Zoom);
    project_pos.z *= mapboxZoomScale;
  }

if(u_coord > 0.0) {
  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
    gl_Position = u_Mvp * (vec4(project_pos.xyz, 1.0));
  } else {
    gl_Position = project_common_position_to_clipspace(vec4(project_pos.xyz, 1.0));
  }
} else {
    vec2 pointPos = a_Position.xy;
    vec4 world = vec4(project_mvt_offset_position(vec4(u_tileOrigin, 0.0, 1.0)).xyz, 1.0); // \u74E6\u7247\u8D77\u59CB\u70B9\u7684\u4E16\u754C\u5750\u6807

    vec2 pointOffset =  pointPos *  pow(2.0, u_Zoom); // \u74E6\u7247\u5185\u7684\u70B9\u7684\u504F\u79FB\u5750\u6807
    
    world.xy += pointOffset;

    if (u_CoordinateSystem == COORDINATE_SYSTEM_METER_OFFSET || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
      // Needs to be divided with project_uCommonUnitsPerMeter
      world.w *= u_PixelsPerMeter.z;
    }

    gl_Position = u_ViewProjectionMatrix * world + u_ViewportCenterProjection;
}


  setPickingColor(a_PickingColor);
}

`,Kpe=function(e){Ct(n,e);var t=Xpe(n);function n(){return Ae(this,n),t.apply(this,arguments)}return Oe(n,[{key:"getUninforms",value:function(){var a=this.layer.getLayerConfig(),i=a.opacity,o=i===void 0?1:i,s=a.tileOrigin,l=a.coord,u=l===void 0?"lnglat":l;if(this.dataTextureTest&&this.dataTextureNeedUpdate({opacity:o})){this.judgeStyleAttributes({opacity:o});var c=this.layer.getEncodedData(),f=this.calDataFrame(this.cellLength,c,this.cellProperties),d=f.data,p=f.width,h=f.height;this.rowCount=h,this.dataTexture=this.cellLength>0&&d.length>0?this.createTexture2D({flipY:!0,data:d,format:V.LUMINANCE,type:V.FLOAT,width:p,height:h}):this.createTexture2D({flipY:!0,data:[1],format:V.LUMINANCE,type:V.FLOAT,width:1,height:1})}return{u_tileOrigin:s||[0,0],u_coord:u==="lnglat"?1:0,u_dataTexture:this.dataTexture,u_cellTypeLayout:this.getCellTypeLayout(),u_opacity:o}}},{key:"initModels",value:function(){return this.buildModels()}},{key:"buildModels",value:function(){var a=this.getModelParams(),i=a.frag,o=a.vert,s=a.triangulation,l=a.type,u=this.layer.getLayerConfig(),c=u.mask,f=c===void 0?!1:c,d=u.maskInside,p=d===void 0?!0:d;return this.layer.triangulation=s,[this.layer.buildLayerModel({moduleName:l,vertexShader:o,fragmentShader:i,triangulation:s,blend:this.getBlend(),depth:{enable:!1},stencil:_i(f,p)})]}},{key:"clearModels",value:function(){var a;(a=this.dataTexture)===null||a===void 0||a.destroy()}},{key:"registerBuiltinAttributes",value:function(){}},{key:"getModelParams",value:function(){return{frag:Zpe,vert:qpe,type:"polygon_tile",triangulation:IN}}}]),n}(Fa);function Qpe(e){var t=Jpe();return function(){var r=Ee(e),a;if(t){var i=Ee(this).constructor;a=Reflect.construct(r,arguments,i)}else a=r.apply(this,arguments);return Mt(this,a)}}function Jpe(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var ehe=function(e){Ct(n,e);var t=Qpe(n);function n(){var r;Ae(this,n);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return r=t.call.apply(t,[this].concat(i)),m(D(r),"isVector",!0),m(D(r),"type",r.layerType),m(D(r),"pickedID",null),r}return Oe(n,[{key:"getPickID",value:function(){return this.pickedID}},{key:"setPickID",value:function(){return this.pickedID}},{key:"buildModels",value:function(){var a=this.getModelType();this.layerModel=new a(this),this.models=this.layerModel.initModels()}},{key:"rebuildModels",value:function(){this.models=this.layerModel.buildModels()}},{key:"getModelType",value:function(){switch(this.layerType){case"PolygonLayer":return Kpe;case"LineLayer":return Ape;case"PointLayer":return this.getPointModel();default:return L0}}},{key:"getPointModel",value:function(){var a=this.getEncodedData(),i=this.getLayerConfig(),o=i.shape2d,s=a.find(function(u){return u.hasOwnProperty("shape")});if(s){var l=s.shape;return(o==null?void 0:o.indexOf(l))!==-1?L0:VN}else return L0}},{key:"getConfigSchema",value:function(){return{properties:{opacity:{type:"number",minimum:0,maximum:1}}}}},{key:"getDefaultConfig",value:function(){return{}}}]),n}(Ph);/**
 * splaytree v3.1.1
 * Fast Splay tree for Node and browser
 *
 * @author Alexander Milevski <info@w8r.name>
 * @license MIT
 * @preserve
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */function the(e,t){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,a,i,o;return o={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function s(u){return function(c){return l([u,c])}}function l(u){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,a&&(i=u[0]&2?a.return:u[0]?a.throw||((i=a.return)&&i.call(a),0):a.next)&&!(i=i.call(a,u[1])).done)return i;switch(a=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return n.label++,{value:u[1],done:!1};case 5:n.label++,a=u[1],u=[0];continue;case 7:u=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){n=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){n.label=u[1];break}if(u[0]===6&&n.label<i[1]){n.label=i[1],i=u;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(u);break}i[2]&&n.ops.pop(),n.trys.pop();continue}u=t.call(e,n)}catch(c){u=[6,c],a=0}finally{r=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}var Ml=function(){function e(t,n){this.next=null,this.key=t,this.data=n,this.left=null,this.right=null}return e}();function nhe(e,t){return e>t?1:e<t?-1:0}function il(e,t,n){for(var r=new Ml(null,null),a=r,i=r;;){var o=n(e,t.key);if(o<0){if(t.left===null)break;if(n(e,t.left.key)<0){var s=t.left;if(t.left=s.right,s.right=t,t=s,t.left===null)break}i.left=t,i=t,t=t.left}else if(o>0){if(t.right===null)break;if(n(e,t.right.key)>0){var s=t.right;if(t.right=s.left,s.left=t,t=s,t.right===null)break}a.right=t,a=t,t=t.right}else break}return a.right=t.left,i.left=t.right,t.left=r.right,t.right=r.left,t}function vx(e,t,n,r){var a=new Ml(e,t);if(n===null)return a.left=a.right=null,a;n=il(e,n,r);var i=r(e,n.key);return i<0?(a.left=n.left,a.right=n,n.left=null):i>=0&&(a.right=n.right,a.left=n,n.right=null),a}function K4(e,t,n){var r=null,a=null;if(t){t=il(e,t,n);var i=n(t.key,e);i===0?(r=t.left,a=t.right):i<0?(a=t.right,t.right=null,r=t):(r=t.left,t.left=null,a=t)}return{left:r,right:a}}function rhe(e,t,n){return t===null?e:(e===null||(t=il(e.key,t,n),t.left=e),t)}function bw(e,t,n,r,a){if(e){r(""+t+(n?"\u2514\u2500\u2500 ":"\u251C\u2500\u2500 ")+a(e)+`
`);var i=t+(n?"    ":"\u2502   ");e.left&&bw(e.left,i,!1,r,a),e.right&&bw(e.right,i,!0,r,a)}}var W2=function(){function e(t){t===void 0&&(t=nhe),this._root=null,this._size=0,this._comparator=t}return e.prototype.insert=function(t,n){return this._size++,this._root=vx(t,n,this._root,this._comparator)},e.prototype.add=function(t,n){var r=new Ml(t,n);this._root===null&&(r.left=r.right=null,this._size++,this._root=r);var a=this._comparator,i=il(t,this._root,a),o=a(t,i.key);return o===0?this._root=i:(o<0?(r.left=i.left,r.right=i,i.left=null):o>0&&(r.right=i.right,r.left=i,i.right=null),this._size++,this._root=r),this._root},e.prototype.remove=function(t){this._root=this._remove(t,this._root,this._comparator)},e.prototype._remove=function(t,n,r){var a;if(n===null)return null;n=il(t,n,r);var i=r(t,n.key);return i===0?(n.left===null?a=n.right:(a=il(t,n.left,r),a.right=n.right),this._size--,a):n},e.prototype.pop=function(){var t=this._root;if(t){for(;t.left;)t=t.left;return this._root=il(t.key,this._root,this._comparator),this._root=this._remove(t.key,this._root,this._comparator),{key:t.key,data:t.data}}return null},e.prototype.findStatic=function(t){for(var n=this._root,r=this._comparator;n;){var a=r(t,n.key);if(a===0)return n;a<0?n=n.left:n=n.right}return null},e.prototype.find=function(t){return this._root&&(this._root=il(t,this._root,this._comparator),this._comparator(t,this._root.key)!==0)?null:this._root},e.prototype.contains=function(t){for(var n=this._root,r=this._comparator;n;){var a=r(t,n.key);if(a===0)return!0;a<0?n=n.left:n=n.right}return!1},e.prototype.forEach=function(t,n){for(var r=this._root,a=[],i=!1;!i;)r!==null?(a.push(r),r=r.left):a.length!==0?(r=a.pop(),t.call(n,r),r=r.right):i=!0;return this},e.prototype.range=function(t,n,r,a){for(var i=[],o=this._comparator,s=this._root,l;i.length!==0||s;)if(s)i.push(s),s=s.left;else{if(s=i.pop(),l=o(s.key,n),l>0)break;if(o(s.key,t)>=0&&r.call(a,s))return this;s=s.right}return this},e.prototype.keys=function(){var t=[];return this.forEach(function(n){var r=n.key;return t.push(r)}),t},e.prototype.values=function(){var t=[];return this.forEach(function(n){var r=n.data;return t.push(r)}),t},e.prototype.min=function(){return this._root?this.minNode(this._root).key:null},e.prototype.max=function(){return this._root?this.maxNode(this._root).key:null},e.prototype.minNode=function(t){if(t===void 0&&(t=this._root),t)for(;t.left;)t=t.left;return t},e.prototype.maxNode=function(t){if(t===void 0&&(t=this._root),t)for(;t.right;)t=t.right;return t},e.prototype.at=function(t){for(var n=this._root,r=!1,a=0,i=[];!r;)if(n)i.push(n),n=n.left;else if(i.length>0){if(n=i.pop(),a===t)return n;a++,n=n.right}else r=!0;return null},e.prototype.next=function(t){var n=this._root,r=null;if(t.right){for(r=t.right;r.left;)r=r.left;return r}for(var a=this._comparator;n;){var i=a(t.key,n.key);if(i===0)break;i<0?(r=n,n=n.left):n=n.right}return r},e.prototype.prev=function(t){var n=this._root,r=null;if(t.left!==null){for(r=t.left;r.right;)r=r.right;return r}for(var a=this._comparator;n;){var i=a(t.key,n.key);if(i===0)break;i<0?n=n.left:(r=n,n=n.right)}return r},e.prototype.clear=function(){return this._root=null,this._size=0,this},e.prototype.toList=function(){return ihe(this._root)},e.prototype.load=function(t,n,r){n===void 0&&(n=[]),r===void 0&&(r=!1);var a=t.length,i=this._comparator;if(r&&ww(t,n,0,a-1,i),this._root===null)this._root=yw(t,n,0,a),this._size=a;else{var o=ohe(this.toList(),ahe(t,n),i);a=this._size+a,this._root=xw({head:o},0,a)}return this},e.prototype.isEmpty=function(){return this._root===null},Object.defineProperty(e.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"root",{get:function(){return this._root},enumerable:!0,configurable:!0}),e.prototype.toString=function(t){t===void 0&&(t=function(r){return String(r.key)});var n=[];return bw(this._root,"",!0,function(r){return n.push(r)},t),n.join("")},e.prototype.update=function(t,n,r){var a=this._comparator,i=K4(t,this._root,a),o=i.left,s=i.right;a(t,n)<0?s=vx(n,r,s,a):o=vx(n,r,o,a),this._root=rhe(o,s,a)},e.prototype.split=function(t){return K4(t,this._root,this._comparator)},e.prototype[Symbol.iterator]=function(){var t;return the(this,function(n){switch(n.label){case 0:t=this.minNode(),n.label=1;case 1:return t?[4,t]:[3,3];case 2:return n.sent(),t=this.next(t),[3,1];case 3:return[2]}})},e}();function yw(e,t,n,r){var a=r-n;if(a>0){var i=n+Math.floor(a/2),o=e[i],s=t[i],l=new Ml(o,s);return l.left=yw(e,t,n,i),l.right=yw(e,t,i+1,r),l}return null}function ahe(e,t){for(var n=new Ml(null,null),r=n,a=0;a<e.length;a++)r=r.next=new Ml(e[a],t[a]);return r.next=null,n.next}function ihe(e){for(var t=e,n=[],r=!1,a=new Ml(null,null),i=a;!r;)t?(n.push(t),t=t.left):n.length>0?(t=i=i.next=n.pop(),t=t.right):r=!0;return i.next=null,a.next}function xw(e,t,n){var r=n-t;if(r>0){var a=t+Math.floor(r/2),i=xw(e,t,a),o=e.head;return o.left=i,e.head=e.head.next,o.right=xw(e,a+1,n),o}return null}function ohe(e,t,n){for(var r=new Ml(null,null),a=r,i=e,o=t;i!==null&&o!==null;)n(i.key,o.key)<0?(a.next=i,i=i.next):(a.next=o,o=o.next),a=a.next;return i!==null?a.next=i:o!==null&&(a.next=o),r.next}function ww(e,t,n,r,a){if(!(n>=r)){for(var i=e[n+r>>1],o=n-1,s=r+1;;){do o++;while(a(e[o],i)<0);do s--;while(a(e[s],i)>0);if(o>=s)break;var l=e[o];e[o]=e[s],e[s]=l,l=t[o],t[o]=t[s],t[s]=l}ww(e,t,n,s,a),ww(e,t,s+1,r,a)}}function to(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Q4(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Wa(e,t,n){return t&&Q4(e.prototype,t),n&&Q4(e,n),e}var Bd=function(t,n){return t.ll.x<=n.x&&n.x<=t.ur.x&&t.ll.y<=n.y&&n.y<=t.ur.y},_w=function(t,n){if(n.ur.x<t.ll.x||t.ur.x<n.ll.x||n.ur.y<t.ll.y||t.ur.y<n.ll.y)return null;var r=t.ll.x<n.ll.x?n.ll.x:t.ll.x,a=t.ur.x<n.ur.x?t.ur.x:n.ur.x,i=t.ll.y<n.ll.y?n.ll.y:t.ll.y,o=t.ur.y<n.ur.y?t.ur.y:n.ur.y;return{ll:{x:r,y:i},ur:{x:a,y:o}}},ul=Number.EPSILON;ul===void 0&&(ul=Math.pow(2,-52));var she=ul*ul,Ew=function(t,n){if(-ul<t&&t<ul&&-ul<n&&n<ul)return 0;var r=t-n;return r*r<she*t*n?0:t<n?-1:1},lhe=function(){function e(){to(this,e),this.reset()}return Wa(e,[{key:"reset",value:function(){this.xRounder=new J4,this.yRounder=new J4}},{key:"round",value:function(n,r){return{x:this.xRounder.round(n),y:this.yRounder.round(r)}}}]),e}(),J4=function(){function e(){to(this,e),this.tree=new W2,this.round(0)}return Wa(e,[{key:"round",value:function(n){var r=this.tree.add(n),a=this.tree.prev(r);if(a!==null&&Ew(r.key,a.key)===0)return this.tree.remove(n),a.key;var i=this.tree.next(r);return i!==null&&Ew(r.key,i.key)===0?(this.tree.remove(n),i.key):n}}]),e}(),sh=new lhe,_p=function(t,n){return t.x*n.y-t.y*n.x},jN=function(t,n){return t.x*n.x+t.y*n.y},eO=function(t,n,r){var a={x:n.x-t.x,y:n.y-t.y},i={x:r.x-t.x,y:r.y-t.y},o=_p(a,i);return Ew(o,0)},Tg=function(t){return Math.sqrt(jN(t,t))},uhe=function(t,n,r){var a={x:n.x-t.x,y:n.y-t.y},i={x:r.x-t.x,y:r.y-t.y};return _p(i,a)/Tg(i)/Tg(a)},che=function(t,n,r){var a={x:n.x-t.x,y:n.y-t.y},i={x:r.x-t.x,y:r.y-t.y};return jN(i,a)/Tg(i)/Tg(a)},tO=function(t,n,r){return n.y===0?null:{x:t.x+n.x/n.y*(r-t.y),y:r}},nO=function(t,n,r){return n.x===0?null:{x:r,y:t.y+n.y/n.x*(r-t.x)}},fhe=function(t,n,r,a){if(n.x===0)return nO(r,a,t.x);if(a.x===0)return nO(t,n,r.x);if(n.y===0)return tO(r,a,t.y);if(a.y===0)return tO(t,n,r.y);var i=_p(n,a);if(i==0)return null;var o={x:r.x-t.x,y:r.y-t.y},s=_p(o,n)/i,l=_p(o,a)/i,u=t.x+l*n.x,c=r.x+s*a.x,f=t.y+l*n.y,d=r.y+s*a.y,p=(u+c)/2,h=(f+d)/2;return{x:p,y:h}},$o=function(){Wa(e,null,[{key:"compare",value:function(n,r){var a=e.comparePoints(n.point,r.point);return a!==0?a:(n.point!==r.point&&n.link(r),n.isLeft!==r.isLeft?n.isLeft?1:-1:Ag.compare(n.segment,r.segment))}},{key:"comparePoints",value:function(n,r){return n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0}}]);function e(t,n){to(this,e),t.events===void 0?t.events=[this]:t.events.push(this),this.point=t,this.isLeft=n}return Wa(e,[{key:"link",value:function(n){if(n.point===this.point)throw new Error("Tried to link already linked events");for(var r=n.point.events,a=0,i=r.length;a<i;a++){var o=r[a];this.point.events.push(o),o.point=this.point}this.checkForConsuming()}},{key:"checkForConsuming",value:function(){for(var n=this.point.events.length,r=0;r<n;r++){var a=this.point.events[r];if(a.segment.consumedBy===void 0)for(var i=r+1;i<n;i++){var o=this.point.events[i];o.consumedBy===void 0&&a.otherSE.point.events===o.otherSE.point.events&&a.segment.consume(o.segment)}}}},{key:"getAvailableLinkedEvents",value:function(){for(var n=[],r=0,a=this.point.events.length;r<a;r++){var i=this.point.events[r];i!==this&&!i.segment.ringOut&&i.segment.isInResult()&&n.push(i)}return n}},{key:"getLeftmostComparator",value:function(n){var r=this,a=new Map,i=function(s){var l=s.otherSE;a.set(s,{sine:uhe(r.point,n.point,l.point),cosine:che(r.point,n.point,l.point)})};return function(o,s){a.has(o)||i(o),a.has(s)||i(s);var l=a.get(o),u=l.sine,c=l.cosine,f=a.get(s),d=f.sine,p=f.cosine;return u>=0&&d>=0?c<p?1:c>p?-1:0:u<0&&d<0?c<p?-1:c>p?1:0:d<u?-1:d>u?1:0}}}]),e}(),dhe=0,Ag=function(){Wa(e,null,[{key:"compare",value:function(n,r){var a=n.leftSE.point.x,i=r.leftSE.point.x,o=n.rightSE.point.x,s=r.rightSE.point.x;if(s<a)return 1;if(o<i)return-1;var l=n.leftSE.point.y,u=r.leftSE.point.y,c=n.rightSE.point.y,f=r.rightSE.point.y;if(a<i){if(u<l&&u<c)return 1;if(u>l&&u>c)return-1;var d=n.comparePoint(r.leftSE.point);if(d<0)return 1;if(d>0)return-1;var p=r.comparePoint(n.rightSE.point);return p!==0?p:-1}if(a>i){if(l<u&&l<f)return-1;if(l>u&&l>f)return 1;var h=r.comparePoint(n.leftSE.point);if(h!==0)return h;var g=n.comparePoint(r.rightSE.point);return g<0?1:g>0?-1:1}if(l<u)return-1;if(l>u)return 1;if(o<s){var v=r.comparePoint(n.rightSE.point);if(v!==0)return v}if(o>s){var b=n.comparePoint(r.rightSE.point);if(b<0)return 1;if(b>0)return-1}if(o!==s){var y=c-l,x=o-a,E=f-u,T=s-i;if(y>x&&E<T)return 1;if(y<x&&E>T)return-1}return o>s?1:o<s||c<f?-1:c>f?1:n.id<r.id?-1:n.id>r.id?1:0}}]);function e(t,n,r,a){to(this,e),this.id=++dhe,this.leftSE=t,t.segment=this,t.otherSE=n,this.rightSE=n,n.segment=this,n.otherSE=t,this.rings=r,this.windings=a}return Wa(e,[{key:"replaceRightSE",value:function(n){this.rightSE=n,this.rightSE.segment=this,this.rightSE.otherSE=this.leftSE,this.leftSE.otherSE=this.rightSE}},{key:"bbox",value:function(){var n=this.leftSE.point.y,r=this.rightSE.point.y;return{ll:{x:this.leftSE.point.x,y:n<r?n:r},ur:{x:this.rightSE.point.x,y:n>r?n:r}}}},{key:"vector",value:function(){return{x:this.rightSE.point.x-this.leftSE.point.x,y:this.rightSE.point.y-this.leftSE.point.y}}},{key:"isAnEndpoint",value:function(n){return n.x===this.leftSE.point.x&&n.y===this.leftSE.point.y||n.x===this.rightSE.point.x&&n.y===this.rightSE.point.y}},{key:"comparePoint",value:function(n){if(this.isAnEndpoint(n))return 0;var r=this.leftSE.point,a=this.rightSE.point,i=this.vector();if(r.x===a.x)return n.x===r.x?0:n.x<r.x?1:-1;var o=(n.y-r.y)/i.y,s=r.x+o*i.x;if(n.x===s)return 0;var l=(n.x-r.x)/i.x,u=r.y+l*i.y;return n.y===u?0:n.y<u?-1:1}},{key:"getIntersection",value:function(n){var r=this.bbox(),a=n.bbox(),i=_w(r,a);if(i===null)return null;var o=this.leftSE.point,s=this.rightSE.point,l=n.leftSE.point,u=n.rightSE.point,c=Bd(r,l)&&this.comparePoint(l)===0,f=Bd(a,o)&&n.comparePoint(o)===0,d=Bd(r,u)&&this.comparePoint(u)===0,p=Bd(a,s)&&n.comparePoint(s)===0;if(f&&c)return p&&!d?s:!p&&d?u:null;if(f)return d&&o.x===u.x&&o.y===u.y?null:o;if(c)return p&&s.x===l.x&&s.y===l.y?null:l;if(p&&d)return null;if(p)return s;if(d)return u;var h=fhe(o,this.vector(),l,n.vector());return h===null||!Bd(i,h)?null:sh.round(h.x,h.y)}},{key:"split",value:function(n){var r=[],a=n.events!==void 0,i=new $o(n,!0),o=new $o(n,!1),s=this.rightSE;this.replaceRightSE(o),r.push(o),r.push(i);var l=new e(i,s,this.rings.slice(),this.windings.slice());return $o.comparePoints(l.leftSE.point,l.rightSE.point)>0&&l.swapEvents(),$o.comparePoints(this.leftSE.point,this.rightSE.point)>0&&this.swapEvents(),a&&(i.checkForConsuming(),o.checkForConsuming()),r}},{key:"swapEvents",value:function(){var n=this.rightSE;this.rightSE=this.leftSE,this.leftSE=n,this.leftSE.isLeft=!0,this.rightSE.isLeft=!1;for(var r=0,a=this.windings.length;r<a;r++)this.windings[r]*=-1}},{key:"consume",value:function(n){for(var r=this,a=n;r.consumedBy;)r=r.consumedBy;for(;a.consumedBy;)a=a.consumedBy;var i=e.compare(r,a);if(i!==0){if(i>0){var o=r;r=a,a=o}if(r.prev===a){var s=r;r=a,a=s}for(var l=0,u=a.rings.length;l<u;l++){var c=a.rings[l],f=a.windings[l],d=r.rings.indexOf(c);d===-1?(r.rings.push(c),r.windings.push(f)):r.windings[d]+=f}a.rings=null,a.windings=null,a.consumedBy=r,a.leftSE.consumedBy=r.leftSE,a.rightSE.consumedBy=r.rightSE}}},{key:"prevInResult",value:function(){return this._prevInResult!==void 0?this._prevInResult:(this.prev?this.prev.isInResult()?this._prevInResult=this.prev:this._prevInResult=this.prev.prevInResult():this._prevInResult=null,this._prevInResult)}},{key:"beforeState",value:function(){if(this._beforeState!==void 0)return this._beforeState;if(!this.prev)this._beforeState={rings:[],windings:[],multiPolys:[]};else{var n=this.prev.consumedBy||this.prev;this._beforeState=n.afterState()}return this._beforeState}},{key:"afterState",value:function(){if(this._afterState!==void 0)return this._afterState;var n=this.beforeState();this._afterState={rings:n.rings.slice(0),windings:n.windings.slice(0),multiPolys:[]};for(var r=this._afterState.rings,a=this._afterState.windings,i=this._afterState.multiPolys,o=0,s=this.rings.length;o<s;o++){var l=this.rings[o],u=this.windings[o],c=r.indexOf(l);c===-1?(r.push(l),a.push(u)):a[c]+=u}for(var f=[],d=[],p=0,h=r.length;p<h;p++)if(a[p]!==0){var g=r[p],v=g.poly;if(d.indexOf(v)===-1)if(g.isExterior)f.push(v);else{d.indexOf(v)===-1&&d.push(v);var b=f.indexOf(g.poly);b!==-1&&f.splice(b,1)}}for(var y=0,x=f.length;y<x;y++){var E=f[y].multiPoly;i.indexOf(E)===-1&&i.push(E)}return this._afterState}},{key:"isInResult",value:function(){if(this.consumedBy)return!1;if(this._isInResult!==void 0)return this._isInResult;var n=this.beforeState().multiPolys,r=this.afterState().multiPolys;switch(vo.type){case"union":{var a=n.length===0,i=r.length===0;this._isInResult=a!==i;break}case"intersection":{var o,s;n.length<r.length?(o=n.length,s=r.length):(o=r.length,s=n.length),this._isInResult=s===vo.numMultiPolys&&o<s;break}case"xor":{var l=Math.abs(n.length-r.length);this._isInResult=l%2===1;break}case"difference":{var u=function(f){return f.length===1&&f[0].isSubject};this._isInResult=u(n)!==u(r);break}default:throw new Error("Unrecognized operation type found ".concat(vo.type))}return this._isInResult}}],[{key:"fromRing",value:function(n,r,a){var i,o,s,l=$o.comparePoints(n,r);if(l<0)i=n,o=r,s=1;else if(l>0)i=r,o=n,s=-1;else throw new Error("Tried to create degenerate segment at [".concat(n.x,", ").concat(n.y,"]"));var u=new $o(i,!0),c=new $o(o,!1);return new e(u,c,[a],[s])}}]),e}(),rO=function(){function e(t,n,r){if(to(this,e),!Array.isArray(t)||t.length===0)throw new Error("Input geometry is not a valid Polygon or MultiPolygon");if(this.poly=n,this.isExterior=r,this.segments=[],typeof t[0][0]!="number"||typeof t[0][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");var a=sh.round(t[0][0],t[0][1]);this.bbox={ll:{x:a.x,y:a.y},ur:{x:a.x,y:a.y}};for(var i=a,o=1,s=t.length;o<s;o++){if(typeof t[o][0]!="number"||typeof t[o][1]!="number")throw new Error("Input geometry is not a valid Polygon or MultiPolygon");var l=sh.round(t[o][0],t[o][1]);l.x===i.x&&l.y===i.y||(this.segments.push(Ag.fromRing(i,l,this)),l.x<this.bbox.ll.x&&(this.bbox.ll.x=l.x),l.y<this.bbox.ll.y&&(this.bbox.ll.y=l.y),l.x>this.bbox.ur.x&&(this.bbox.ur.x=l.x),l.y>this.bbox.ur.y&&(this.bbox.ur.y=l.y),i=l)}(a.x!==i.x||a.y!==i.y)&&this.segments.push(Ag.fromRing(i,a,this))}return Wa(e,[{key:"getSweepEvents",value:function(){for(var n=[],r=0,a=this.segments.length;r<a;r++){var i=this.segments[r];n.push(i.leftSE),n.push(i.rightSE)}return n}}]),e}(),phe=function(){function e(t,n){if(to(this,e),!Array.isArray(t))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");this.exteriorRing=new rO(t[0],this,!0),this.bbox={ll:{x:this.exteriorRing.bbox.ll.x,y:this.exteriorRing.bbox.ll.y},ur:{x:this.exteriorRing.bbox.ur.x,y:this.exteriorRing.bbox.ur.y}},this.interiorRings=[];for(var r=1,a=t.length;r<a;r++){var i=new rO(t[r],this,!1);i.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=i.bbox.ll.x),i.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=i.bbox.ll.y),i.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=i.bbox.ur.x),i.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=i.bbox.ur.y),this.interiorRings.push(i)}this.multiPoly=n}return Wa(e,[{key:"getSweepEvents",value:function(){for(var n=this.exteriorRing.getSweepEvents(),r=0,a=this.interiorRings.length;r<a;r++)for(var i=this.interiorRings[r].getSweepEvents(),o=0,s=i.length;o<s;o++)n.push(i[o]);return n}}]),e}(),aO=function(){function e(t,n){if(to(this,e),!Array.isArray(t))throw new Error("Input geometry is not a valid Polygon or MultiPolygon");try{typeof t[0][0][0]=="number"&&(t=[t])}catch{}this.polys=[],this.bbox={ll:{x:Number.POSITIVE_INFINITY,y:Number.POSITIVE_INFINITY},ur:{x:Number.NEGATIVE_INFINITY,y:Number.NEGATIVE_INFINITY}};for(var r=0,a=t.length;r<a;r++){var i=new phe(t[r],this);i.bbox.ll.x<this.bbox.ll.x&&(this.bbox.ll.x=i.bbox.ll.x),i.bbox.ll.y<this.bbox.ll.y&&(this.bbox.ll.y=i.bbox.ll.y),i.bbox.ur.x>this.bbox.ur.x&&(this.bbox.ur.x=i.bbox.ur.x),i.bbox.ur.y>this.bbox.ur.y&&(this.bbox.ur.y=i.bbox.ur.y),this.polys.push(i)}this.isSubject=n}return Wa(e,[{key:"getSweepEvents",value:function(){for(var n=[],r=0,a=this.polys.length;r<a;r++)for(var i=this.polys[r].getSweepEvents(),o=0,s=i.length;o<s;o++)n.push(i[o]);return n}}]),e}(),hhe=function(){Wa(e,null,[{key:"factory",value:function(n){for(var r=[],a=0,i=n.length;a<i;a++){var o=n[a];if(!(!o.isInResult()||o.ringOut)){for(var s=null,l=o.leftSE,u=o.rightSE,c=[l],f=l.point,d=[];s=l,l=u,c.push(l),l.point!==f;)for(;;){var p=l.getAvailableLinkedEvents();if(p.length===0){var h=c[0].point,g=c[c.length-1].point;throw new Error("Unable to complete output ring starting at [".concat(h.x,",")+" ".concat(h.y,"]. Last matching segment found ends at")+" [".concat(g.x,", ").concat(g.y,"]."))}if(p.length===1){u=p[0].otherSE;break}for(var v=null,b=0,y=d.length;b<y;b++)if(d[b].point===l.point){v=b;break}if(v!==null){var x=d.splice(v)[0],E=c.splice(x.index);E.unshift(E[0].otherSE),r.push(new e(E.reverse()));continue}d.push({index:c.length,point:l.point});var T=l.getLeftmostComparator(s);u=p.sort(T)[0].otherSE;break}r.push(new e(c))}}return r}}]);function e(t){to(this,e),this.events=t;for(var n=0,r=t.length;n<r;n++)t[n].segment.ringOut=this;this.poly=null}return Wa(e,[{key:"getGeom",value:function(){for(var n=this.events[0].point,r=[n],a=1,i=this.events.length-1;a<i;a++){var o=this.events[a].point,s=this.events[a+1].point;eO(o,n,s)!==0&&(r.push(o),n=o)}if(r.length===1)return null;var l=r[0],u=r[1];eO(l,n,u)===0&&r.shift(),r.push(r[0]);for(var c=this.isExteriorRing()?1:-1,f=this.isExteriorRing()?0:r.length-1,d=this.isExteriorRing()?r.length:-1,p=[],h=f;h!=d;h+=c)p.push([r[h].x,r[h].y]);return p}},{key:"isExteriorRing",value:function(){if(this._isExteriorRing===void 0){var n=this.enclosingRing();this._isExteriorRing=n?!n.isExteriorRing():!0}return this._isExteriorRing}},{key:"enclosingRing",value:function(){return this._enclosingRing===void 0&&(this._enclosingRing=this._calcEnclosingRing()),this._enclosingRing}},{key:"_calcEnclosingRing",value:function(){for(var n=this.events[0],r=1,a=this.events.length;r<a;r++){var i=this.events[r];$o.compare(n,i)>0&&(n=i)}for(var o=n.segment.prevInResult(),s=o?o.prevInResult():null;;){if(!o)return null;if(!s)return o.ringOut;if(s.ringOut!==o.ringOut)return s.ringOut.enclosingRing()!==o.ringOut?o.ringOut:o.ringOut.enclosingRing();o=s.prevInResult(),s=o?o.prevInResult():null}}}]),e}(),iO=function(){function e(t){to(this,e),this.exteriorRing=t,t.poly=this,this.interiorRings=[]}return Wa(e,[{key:"addInterior",value:function(n){this.interiorRings.push(n),n.poly=this}},{key:"getGeom",value:function(){var n=[this.exteriorRing.getGeom()];if(n[0]===null)return null;for(var r=0,a=this.interiorRings.length;r<a;r++){var i=this.interiorRings[r].getGeom();i!==null&&n.push(i)}return n}}]),e}(),mhe=function(){function e(t){to(this,e),this.rings=t,this.polys=this._composePolys(t)}return Wa(e,[{key:"getGeom",value:function(){for(var n=[],r=0,a=this.polys.length;r<a;r++){var i=this.polys[r].getGeom();i!==null&&n.push(i)}return n}},{key:"_composePolys",value:function(n){for(var r=[],a=0,i=n.length;a<i;a++){var o=n[a];if(!o.poly)if(o.isExteriorRing())r.push(new iO(o));else{var s=o.enclosingRing();s.poly||r.push(new iO(s)),s.poly.addInterior(o)}}return r}}]),e}(),ghe=function(){function e(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Ag.compare;to(this,e),this.queue=t,this.tree=new W2(n),this.segments=[]}return Wa(e,[{key:"process",value:function(n){var r=n.segment,a=[];if(n.consumedBy)return n.isLeft?this.queue.remove(n.otherSE):this.tree.remove(r),a;var i=n.isLeft?this.tree.insert(r):this.tree.find(r);if(!i)throw new Error("Unable to find segment #".concat(r.id," ")+"[".concat(r.leftSE.point.x,", ").concat(r.leftSE.point.y,"] -> ")+"[".concat(r.rightSE.point.x,", ").concat(r.rightSE.point.y,"] ")+"in SweepLine tree. Please submit a bug report.");for(var o=i,s=i,l=void 0,u=void 0;l===void 0;)o=this.tree.prev(o),o===null?l=null:o.key.consumedBy===void 0&&(l=o.key);for(;u===void 0;)s=this.tree.next(s),s===null?u=null:s.key.consumedBy===void 0&&(u=s.key);if(n.isLeft){var c=null;if(l){var f=l.getIntersection(r);if(f!==null&&(r.isAnEndpoint(f)||(c=f),!l.isAnEndpoint(f)))for(var d=this._splitSafely(l,f),p=0,h=d.length;p<h;p++)a.push(d[p])}var g=null;if(u){var v=u.getIntersection(r);if(v!==null&&(r.isAnEndpoint(v)||(g=v),!u.isAnEndpoint(v)))for(var b=this._splitSafely(u,v),y=0,x=b.length;y<x;y++)a.push(b[y])}if(c!==null||g!==null){var E=null;if(c===null)E=g;else if(g===null)E=c;else{var T=$o.comparePoints(c,g);E=T<=0?c:g}this.queue.remove(r.rightSE),a.push(r.rightSE);for(var C=r.split(E),I=0,P=C.length;I<P;I++)a.push(C[I])}a.length>0?(this.tree.remove(r),a.push(n)):(this.segments.push(r),r.prev=l)}else{if(l&&u){var j=l.getIntersection(u);if(j!==null){if(!l.isAnEndpoint(j))for(var A=this._splitSafely(l,j),S=0,M=A.length;S<M;S++)a.push(A[S]);if(!u.isAnEndpoint(j))for(var O=this._splitSafely(u,j),R=0,H=O.length;R<H;R++)a.push(O[R])}}this.tree.remove(r)}return a}},{key:"_splitSafely",value:function(n,r){this.tree.remove(n);var a=n.rightSE;this.queue.remove(a);var i=n.split(r);return i.push(a),n.consumedBy===void 0&&this.tree.insert(n),i}}]),e}(),oO=typeof process!="undefined"&&{}.POLYGON_CLIPPING_MAX_QUEUE_SIZE||1e6,vhe=typeof process!="undefined"&&{}.POLYGON_CLIPPING_MAX_SWEEPLINE_SEGMENTS||1e6,bhe=function(){function e(){to(this,e)}return Wa(e,[{key:"run",value:function(n,r,a){vo.type=n,sh.reset();for(var i=[new aO(r,!0)],o=0,s=a.length;o<s;o++)i.push(new aO(a[o],!1));if(vo.numMultiPolys=i.length,vo.type==="difference")for(var l=i[0],u=1;u<i.length;)_w(i[u].bbox,l.bbox)!==null?u++:i.splice(u,1);if(vo.type==="intersection"){for(var c=0,f=i.length;c<f;c++)for(var d=i[c],p=c+1,h=i.length;p<h;p++)if(_w(d.bbox,i[p].bbox)===null)return[]}for(var g=new W2($o.compare),v=0,b=i.length;v<b;v++)for(var y=i[v].getSweepEvents(),x=0,E=y.length;x<E;x++)if(g.insert(y[x]),g.size>oO)throw new Error("Infinite loop when putting segment endpoints in a priority queue (queue size too big). Please file a bug report.");for(var T=new ghe(g),C=g.size,I=g.pop();I;){var P=I.key;if(g.size===C){var j=P.segment;throw new Error("Unable to pop() ".concat(P.isLeft?"left":"right"," SweepEvent ")+"[".concat(P.point.x,", ").concat(P.point.y,"] from segment #").concat(j.id," ")+"[".concat(j.leftSE.point.x,", ").concat(j.leftSE.point.y,"] -> ")+"[".concat(j.rightSE.point.x,", ").concat(j.rightSE.point.y,"] from queue. ")+"Please file a bug report.")}if(g.size>oO)throw new Error("Infinite loop when passing sweep line over endpoints (queue size too big). Please file a bug report.");if(T.segments.length>vhe)throw new Error("Infinite loop when passing sweep line over endpoints (too many sweep line segments). Please file a bug report.");for(var A=T.process(P),S=0,M=A.length;S<M;S++){var O=A[S];O.consumedBy===void 0&&g.insert(O)}C=g.size,I=g.pop()}sh.reset();var R=hhe.factory(T.segments),H=new mhe(R);return H.getGeom()}}]),e}(),vo=new bhe,yhe=function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];return vo.run("union",t,r)},xhe=function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];return vo.run("intersection",t,r)},whe=function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];return vo.run("xor",t,r)},_he=function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];return vo.run("difference",t,r)},Ehe={union:yhe,intersection:xhe,xor:whe,difference:_he};function khe(e,t,n){n===void 0&&(n={});var r=KS(e),a=KS(t),i=Ehe.union(r.coordinates,a.coordinates);return i.length===0?null:i.length===1?s2(i[0],n.properties):OV(i,n.properties)}function sO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function bx(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?sO(Object(n),!0).forEach(function(r){m(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):sO(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var Lh=function(){function e(t){Ae(this,e),m(this,"type",void 0),m(this,"parentLayer",void 0),m(this,"mapService",void 0),m(this,"rendererService",void 0),m(this,"outSideEventTimer",null),m(this,"zoomOffset",void 0),m(this,"tilesetManager",void 0),m(this,"layers",void 0),m(this,"eventCache",{click:0,mousemove:0,mouseup:0,mousedown:0,contextmenu:0}),this.parentLayer=t.parent,this.mapService=t.mapService,this.rendererService=t.rendererService;var n=this.parentLayer.getSource();this.zoomOffset=n.parser.zoomOffset||0,this.tilesetManager=n.tileset}return Oe(e,[{key:"createTile",value:function(n,r){return{layers:[],layerIDList:[]}}},{key:"getFeatureData",value:function(n,r){var a={features:[],featureId:null,vectorTileLayer:null,source:null},i=r.sourceLayer,o=r.featureId;if(!i)return a;var s=n.data.layers[i],l=s==null?void 0:s.features;if(Array.isArray(l)&&l.length>0){var u=new Oh({type:"FeatureCollection",features:l},{parser:{type:"geojson",featureId:o}});return{features:l,featureId:o,vectorTileLayer:s,source:u}}else return a}},{key:"createLayer",value:function(n){var r=n.L7Layer,a=n.tile,i=n.initOptions,o=n.vectorTileLayer,s=n.source,l=i.mask,u=i.color,c=i.layerType,f=i.size,d=i.shape,p=r||ehe,h=new p(bx({visible:a.isVisible,tileOrigin:o==null?void 0:o.l7TileOrigin,coord:o==null?void 0:o.l7TileCoord},this.getLayerInitOption(i)));h.isVector&&(this.emitEvent([h]),h.type=c,h.select(!0)),h.source(s),this.setScale(h),this.setStyleAttributeField(h,"shape",d),this.setStyleAttributeField(h,"color",u),this.setStyleAttributeField(h,"size",f);var g=[h];if(l&&h.isVector){var v=new NN().source({type:"FeatureCollection",features:[a.bboxPolygon]}).shape("fill");g.push(v),h.addMaskLayer(v)}return FN(this.parentLayer,g),this.layers=[h],h}},{key:"updateStyle",value:function(n){return""}},{key:"getDefautStyleAttributeField",value:function(n,r){switch(r){case"size":return 2;case"color":return"#fff";case"shape":return DN(this.parentLayer.type,n);default:return""}}},{key:"setStyleAttributeField",value:function(n,r,a){if(Array.isArray(a)){n[r].apply(n,Ue(a));return}if(typeof a=="string"){n[r](a);return}var i=this.getDefautStyleAttributeField(n,r);if(!a)return n[r](i),n;var o=this.parseScaleValue(a,r);o.length===0?n[r](i):n[r].apply(n,Ue(o))}},{key:"parseScaleValue",value:function(n,r){if(r==="shape")return typeof n=="string"?[n]:n!=null&&n.field?[n==null?void 0:n.field]:[];var a=n,i=a.field,o=a.values,s=a.callback;return i&&o&&Array.isArray(o)?[i,o]:i&&s?[i,s]:i?[i]:[]}},{key:"getTile",value:function(n,r){var a=this.mapService.getZoom(),i=Math.ceil(a)+this.zoomOffset,o=Q1(n,r,i),s=this.tilesetManager.tiles.filter(function(u){return u.key==="".concat(o[0],",").concat(o[1],",").concat(i)}),l=s[0];return l}},{key:"emitEvent",value:function(n,r){var a=this;n.map(function(i){i.once("inited",function(){i.on("click",function(o){if(a.eventCache.click=1,a.parentLayer.type==="RasterLayer"){var s=o.lngLat,l=s.lng,u=s.lat,c=a.getTile(l,u);a.getFeatureAndEmitEvent(i,"subLayerClick",o,r,c)}else a.getFeatureAndEmitEvent(i,"subLayerClick",o)}),i.on("mousemove",function(o){if(a.eventCache.mousemove=1,a.parentLayer.type==="RasterLayer"){var s=o.lngLat,l=s.lng,u=s.lat,c=a.getTile(l,u);a.getFeatureAndEmitEvent(i,"subLayerMouseMove",o,r,c)}else a.getFeatureAndEmitEvent(i,"subLayerMouseMove",o)}),i.on("mouseup",function(o){a.eventCache.mouseup=1,a.getFeatureAndEmitEvent(i,"subLayerMouseUp",o)}),i.on("mouseenter",function(o){if(a.parentLayer.type==="RasterLayer"){var s=o.lngLat,l=s.lng,u=s.lat,c=a.getTile(l,u);a.getFeatureAndEmitEvent(i,"subLayerMouseMove",o,r,c)}else a.getFeatureAndEmitEvent(i,"subLayerMouseEnter",o)}),i.on("mouseout",function(o){a.getFeatureAndEmitEvent(i,"subLayerMouseOut",o)}),i.on("mousedown",function(o){a.eventCache.mousedown=1,a.getFeatureAndEmitEvent(i,"subLayerMouseDown",o)}),i.on("contextmenu",function(o){a.eventCache.contextmenu=1,a.getFeatureAndEmitEvent(i,"subLayerContextmenu",o)}),i.on("unclick",function(o){return a.handleOutsideEvent("click","subLayerUnClick",i,o)}),i.on("unmouseup",function(o){return a.handleOutsideEvent("mouseup","subLayerUnMouseUp",i,o)}),i.on("unmousedown",function(o){return a.handleOutsideEvent("mousedown","subLayerUnMouseDown",i,o)}),i.on("uncontextmenu",function(o){return a.handleOutsideEvent("contextmenu","subLayerUnContextmenu",i,o)})})})}},{key:"getCombineFeature",value:function(n){var r=null,a=n[0];return n.map(function(i){var o=s2(i.coordinates);r===null&&(r=o),r=khe(r,o)}),a&&(r.properties=bx({},a)),r}},{key:"getFeatureAndEmitEvent",value:function(n,r,a,i,o){if(i===!1)a.value=Epe(o,this.mapService,a.x,a.y);else{var s=a.featureId,l=this.getAllFeatures(s);try{a.feature=this.getCombineFeature(l)}catch{console.warn("Combine Featuer Err! Return First Feature!"),a.feature=l[0]}}this.parentLayer.emit(r,a)}},{key:"setScale",value:function(n){var r=this.parentLayer.tileLayer.scaleField,a=Object.keys(r);a.map(function(i){n.scale(i,r[i])})}},{key:"getAllFeatures",value:function(n){var r=this.parentLayer.tileLayer.children,a=[];return r.map(function(i){var o=i.getSource();o.data.dataArray.map(function(s){s._id===n&&a.push(s)})}),a}},{key:"getLayerInitOption",value:function(n){var r=bx({},n);return delete r.color,delete r.shape,delete r.size,delete r.coords,delete r.sourceLayer,delete r.coords,r}},{key:"handleOutsideEvent",value:function(n,r,a,i){var o=this;this.outSideEventTimer&&(clearTimeout(this.outSideEventTimer),this.outSideEventTimer=null),this.outSideEventTimer=setTimeout(function(){o.eventCache[n]>0?o.eventCache[n]=0:o.getFeatureAndEmitEvent(a,r,i)},64)}}]),e}();function She(e){var t=Che();return function(){var r=Ee(e),a;if(t){var i=Ee(this).constructor;a=Reflect.construct(r,arguments,i)}else a=r.apply(this,arguments);return Mt(this,a)}}function Che(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var The=function(e){Ct(n,e);var t=She(n);function n(r){var a;return Ae(this,n),a=t.call(this,r),m(D(a),"parentLayer",void 0),a.parentLayer=r.parent,a}return Oe(n,[{key:"createTile",value:function(a,i){var o=this.getFeatureData(a,i),s=o.features,l=o.vectorTileLayer,u=o.source;if(s.length===0)return{layers:[],layerIDList:[]};var c=this.createLayer({tile:a,initOptions:i,vectorTileLayer:l,source:u});return{layers:[c],layerIDList:[c.id]}}}]),n}(Lh);function Ahe(e){var t=Ohe();return function(){var r=Ee(e),a;if(t){var i=Ee(this).constructor;a=Reflect.construct(r,arguments,i)}else a=r.apply(this,arguments);return Mt(this,a)}}function Ohe(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var Mhe=function(e){Ct(n,e);var t=Ahe(n);function n(r){var a;return Ae(this,n),a=t.call(this,r),m(D(a),"parentLayer",void 0),a.parentLayer=r.parent,a}return Oe(n,[{key:"createTile",value:function(a,i){var o=this.getFeatureData(a,i),s=o.features,l=o.vectorTileLayer,u=o.source;if(s.length===0)return{layers:[],layerIDList:[]};var c=this.createLayer({tile:a,initOptions:i,vectorTileLayer:l,source:u});return{layers:[c],layerIDList:[c.id]}}}]),n}(Lh);function Rhe(e){var t=Phe();return function(){var r=Ee(e),a;if(t){var i=Ee(this).constructor;a=Reflect.construct(r,arguments,i)}else a=r.apply(this,arguments);return Mt(this,a)}}function Phe(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var Ihe=function(e){Ct(n,e);var t=Rhe(n);function n(r){var a;return Ae(this,n),a=t.call(this,r),m(D(a),"parentLayer",void 0),a.parentLayer=r.parent,a}return Oe(n,[{key:"createTile",value:function(a,i){var o=this.getFeatureData(a,i),s=o.features,l=o.vectorTileLayer,u=o.source;if(s.length===0)return{layers:[],layerIDList:[]};var c=this.createLayer({tile:a,initOptions:i,vectorTileLayer:l,source:u});return{layers:[c],layerIDList:[c.id]}}}]),n}(Lh);function Lhe(e){var t=Nhe();return function(){var r=Ee(e),a;if(t){var i=Ee(this).constructor;a=Reflect.construct(r,arguments,i)}else a=r.apply(this,arguments);return Mt(this,a)}}function Nhe(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var lO=function(e){Ct(n,e);var t=Lhe(n);function n(r){var a;return Ae(this,n),a=t.call(this,r),m(D(a),"parentLayer",void 0),a.parentLayer=r.parent,a}return Oe(n,[{key:"createTile",value:function(a,i){var o=new Oh(a.data,{parser:{type:"image",extent:a.bounds}}),s=this.createLayer({L7Layer:dpe,tile:a,initOptions:i,source:o});return{layers:[s],layerIDList:[s.id]}}}]),n}(Lh);function Fhe(e){var t=Dhe();return function(){var r=Ee(e),a;if(t){var i=Ee(this).constructor;a=Reflect.construct(r,arguments,i)}else a=r.apply(this,arguments);return Mt(this,a)}}function Dhe(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var Bhe=`precision mediump float;
uniform float u_opacity: 1.0;
uniform sampler2D u_texture;
uniform sampler2D u_colorTexture;
uniform float u_min;
uniform float u_max;
uniform vec2 u_domain;
uniform float u_noDataValue;
uniform bool u_clampLow: true;
uniform bool u_clampHigh: true;
varying vec2 v_texCoord;

void main() {

  float value = texture2D(u_texture,vec2(v_texCoord.x,v_texCoord.y)).r;
  if (value == u_noDataValue)
    gl_FragColor = vec4(0.0, 0, 0, 0.0);
  else if ((!u_clampLow && value < u_domain[0]) || (!u_clampHigh && value > u_domain[1]))
    gl_FragColor = vec4(0, 0, 0, 0);
  else {
    float normalisedValue =(value - u_domain[0]) / (u_domain[1] -u_domain[0]);
    vec4 color = texture2D(u_colorTexture,vec2(normalisedValue, 0));
    gl_FragColor = color;
    gl_FragColor.a =  gl_FragColor.a * u_opacity ;
  }


}
`,zhe=`precision highp float;
uniform mat4 u_ModelMatrix;
uniform mat4 u_Mvp;
attribute vec3 a_Position;
attribute vec2 a_Uv;
varying vec2 v_texCoord;
#pragma include "projection"
void main() {
   v_texCoord = a_Uv;
   vec4 project_pos = project_position(vec4(a_Position, 1.0));
   gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy,0., 1.0));

   if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
      gl_Position = u_Mvp * (vec4(project_pos.xy,0., 1.0));
   } else {
      gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy,0., 1.0));
   }
}
`,Uhe=function(e){Ct(n,e);var t=Fhe(n);function n(){var r;Ae(this,n);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return r=t.call.apply(t,[this].concat(i)),m(D(r),"texture",void 0),m(D(r),"colorTexture",void 0),m(D(r),"rampColors",void 0),r}return Oe(n,[{key:"getUninforms",value:function(){var a=this.layer.getLayerConfig(),i=a.opacity,o=i===void 0?1:i,s=a.clampLow,l=s===void 0?!0:s,u=a.clampHigh,c=u===void 0?!0:u,f=a.noDataValue,d=f===void 0?-9999999:f,p=a.domain,h=p===void 0?[0,1]:p,g=a.rampColors;return gs(this.rampColors,g)||(this.updateColorTexure(),this.rampColors=g),{u_opacity:o||1,u_texture:this.texture,u_domain:h,u_clampLow:l,u_clampHigh:typeof c!="undefined"?c:l,u_noDataValue:d,u_colorTexture:this.colorTexture}}},{key:"initModels",value:function(){var a=this.layer.getLayerConfig(),i=a.mask,o=i===void 0?!1:i,s=a.maskInside,l=s===void 0?!0:s,u=a.rampColorsData,c=a.rampColors,f=this.layer.getSource(),d=this.rendererService.createTexture2D,p=f.data.dataArray[0];this.texture=d({data:p.data,width:p.width,height:p.height,format:V.LUMINANCE,type:V.FLOAT});var h=u||bg(c);return this.colorTexture=d({data:h.data,width:h.width,height:h.height,flipY:!1}),[this.layer.buildLayerModel({moduleName:"RasterImageData",vertexShader:zhe,fragmentShader:Bhe,triangulation:LN,primitive:V.TRIANGLES,depth:{enable:!1},blend:this.getBlend(),stencil:_i(o,l)})]}},{key:"buildModels",value:function(){return this.initModels()}},{key:"clearModels",value:function(){var a,i;(a=this.texture)===null||a===void 0||a.destroy(),(i=this.colorTexture)===null||i===void 0||i.destroy()}},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"uv",type:vn.Attribute,descriptor:{name:"a_Uv",buffer:{usage:V.DYNAMIC_DRAW,data:[],type:V.FLOAT},size:2,update:function(i,o,s,l){return[s[3],s[4]]}}})}},{key:"updateColorTexure",value:function(){var a=this.rendererService.createTexture2D,i=this.layer.getLayerConfig(),o=i.rampColors,s=bg(o);this.colorTexture=a({data:s.data,width:s.width,height:s.height,flipY:!1})}}]),n}(Fa);function $he(e){var t=Vhe();return function(){var r=Ee(e),a;if(t){var i=Ee(this).constructor;a=Reflect.construct(r,arguments,i)}else a=r.apply(this,arguments);return Mt(this,a)}}function Vhe(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var jhe=function(e){Ct(n,e);var t=$he(n);function n(){var r;Ae(this,n);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return r=t.call.apply(t,[this].concat(i)),m(D(r),"type",r.layerType),r}return Oe(n,[{key:"buildModels",value:function(){var a=this.getModelType();this.layerModel=new a(this),this.models=this.layerModel.initModels()}},{key:"rebuildModels",value:function(){this.models=this.layerModel.buildModels()}},{key:"getModelType",value:function(){return Uhe}},{key:"getConfigSchema",value:function(){return{properties:{opacity:{type:"number",minimum:0,maximum:1}}}}},{key:"getDefaultConfig",value:function(){return{}}}]),n}(Ph);function Ghe(e){var t=Hhe();return function(){var r=Ee(e),a;if(t){var i=Ee(this).constructor;a=Reflect.construct(r,arguments,i)}else a=r.apply(this,arguments);return Mt(this,a)}}function Hhe(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var Whe=function(e){Ct(n,e);var t=Ghe(n);function n(r){var a;return Ae(this,n),a=t.call(this,r),m(D(a),"parentLayer",void 0),a.parentLayer=r.parent,a}return Oe(n,[{key:"createTile",value:function(a,i){var o=i.opacity,s=i.domain,l=i.clampHigh,u=i.clampLow,c=i.rampColors,f=i.rampColorsData,d=i.mask,p=a.data;if(!p.data)return console.warn("raster data not exist!"),{layers:[],layerIDList:[]};var h=new jhe({visible:a.isVisible,mask:d}).source(p.data,{parser:{type:"raster",width:p.width,height:p.height,extent:a.bboxPolygon.bbox}}).style({opacity:o,domain:s,clampHigh:l,clampLow:u,rampColors:c,rampColorsData:f});return this.emitEvent([h],!1),FN(this.parentLayer,[h]),{layers:[h],layerIDList:[h.id]}}}]),n}(Lh);function Xhe(e,t){switch(e){case"PolygonLayer":return Ihe;case"LineLayer":return The;case"PointLayer":return Mhe;case"RasterLayer":return t.dataType==="arraybuffer"?Whe:lO;default:return console.warn("Current Tile Not Exist!"),lO}}function Yhe(e){var t=Zhe();return function(){var r=Ee(e),a;if(t){var i=Ee(this).constructor;a=Reflect.construct(r,arguments,i)}else a=r.apply(this,arguments);return Mt(this,a)}}function Zhe(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var qhe=function(e){Ct(n,e);var t=Yhe(n);function n(){var r;return Ae(this,n),r=t.call(this),m(D(r),"cacheConfig",void 0),m(D(r),"checkConfigList",[]),r.cacheConfig=new Map,r}return Oe(n,[{key:"setConfig",value:function(a,i){this.checkConfigList.includes(a)||this.checkConfigList.push(a),this.cacheConfig.set(a,i)}},{key:"removeConfig",value:function(a){var i=this.checkConfigList.indexOf(a);i>-1&&(this.cacheConfig.delete(a),this.checkConfigList.splice(i,1))}},{key:"checkConfig",value:function(a){var i=this;if(!!a.inited){var o=a.getLayerConfig(),s=[];this.checkConfigList.map(function(l){var u=i.cacheConfig.get(l),c;if(["color","size","shape"].includes(l)){var f;c=(f=a.getAttribute(l))===null||f===void 0?void 0:f.scale}else{if(!(l in o))return;c=o[l]}gs(u,c)||(s.push(l),i.setConfig(l,c))}),s.length>0&&(console.warn("tile config cache update!",s),this.emit("updateConfig",s))}}},{key:"getAttributeScale",value:function(a,i){var o=a.getAttribute(i),s={field:void 0,values:void 0,callback:void 0};if(o&&o.scale){var l=o.scale,u=l.field,c=l.values,f=l.callback;s.field=u,s.values=c,s.callback=f}return s}}]),n}(x2);function Khe(e){var t=Qhe();return function(){var r=Ee(e),a;if(t){var i=Ee(this).constructor;a=Reflect.construct(r,arguments,i)}else a=r.apply(this,arguments);return Mt(this,a)}}function Qhe(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var Jhe=function(e){Ct(n,e);var t=Khe(n);function n(r,a,i,o,s){var l;return Ae(this,n),l=t.call(this),m(D(l),"isLastPicked",!1),m(D(l),"rendererService",void 0),m(D(l),"pickingService",void 0),m(D(l),"layerService",void 0),m(D(l),"children",void 0),m(D(l),"parent",void 0),l.parent=r,l.rendererService=a,l.pickingService=i,l.layerService=s,l.children=o,l}return Oe(n,[{key:"normalRender",value:function(a){var i=this;a.filter(function(o){return o.inited}).filter(function(o){return o.isVisible()}).map(function(o){o.hooks.beforeRenderData.call(),o.hooks.beforeRender.call(),o.masks.length>0&&(i.rendererService.clear({stencil:0,depth:1,framebuffer:null}),o.masks.map(function(s){s.hooks.beforeRender.call(),s.render(),s.hooks.afterRender.call()})),o.render(),o.hooks.afterRender.call()})}},{key:"pickRender",value:function(a,i){var o=this;this.parent.type==="RasterLayer"&&this.renderMask(this.parent);var s=a.filter(function(l){return o.parent.needPick(i.type)&&l.inited&&l.isVisible()}).some(function(l){l.hooks.beforePickingEncode.call(),l.masks.length>0&&(o.rendererService.clear({stencil:0,depth:1,framebuffer:null}),l.masks.map(function(c){c.hooks.beforeRender.call(),c.render(),c.hooks.afterRender.call()})),l.renderModels(!0),l.hooks.afterPickingEncode.call();var u=o.pickingService.pickFromPickingFBO(l,i);return u&&o.parent.type!=="RasterLayer"&&(o.emit("pick",{type:i.type,pickedColors:o.pickingService.pickedColors,layer:l}),o.pickingService.pickedTileLayers=[o.parent]),u});return this.parent.type!=="RasterLayer"&&!s&&this.isLastPicked&&i.type!=="click"&&(this.pickingService.pickedTileLayers=[],this.emit("unpick",{}),this.beforeHighlight([0,0,0])),this.isLastPicked=s,s}},{key:"clearPick",value:function(){this.children.filter(function(a){return a.inited&&a.isVisible()}).map(function(a){a.hooks.beforeSelect.call([0,0,0])}),this.pickingService.pickedTileLayers=[]}},{key:"beforeHighlight",value:function(a){this.children.filter(function(i){return i.inited&&i.isVisible()}).map(function(i){i.hooks.beforeHighlight.call(a)})}},{key:"beforeSelect",value:function(a){this.children.filter(function(i){return i.inited&&i.isVisible()}).map(function(i){i.hooks.beforeSelect.call(a)})}},{key:"renderMask",value:function(a){a.inited&&a.isVisible()&&(a.hooks.beforeRender.call(),a.masks.length>0&&(this.rendererService.clear({stencil:0,depth:1,framebuffer:null}),a.masks.map(function(i){i.hooks.beforeRender.call(),i.render(),i.hooks.afterRender.call()})),a.hooks.afterRender.call())}}]),n}(Si.exports.EventEmitter),eme=function(){function e(t,n,r,a,i){Ae(this,e),m(this,"sourceLayer",void 0),m(this,"parent",void 0),m(this,"children",void 0),m(this,"mapService",void 0),m(this,"rendererService",void 0),m(this,"tilePickManager",void 0),m(this,"tileConfigManager",void 0),m(this,"tileFactory",void 0),m(this,"initOptions",void 0),m(this,"rampColorsData",void 0),this.parent=t,this.children=t.layerChildren,this.mapService=n,this.rendererService=r,this.tilePickManager=new Jhe(t,r,a,this.children,i),this.tileConfigManager=new qhe,this.setSubLayerInitOptipn(),this.setConfigListener(),this.initTileFactory()}return Oe(e,[{key:"createTile",value:function(n){return this.tileFactory.createTile(n,this.initOptions)}},{key:"updateLayersConfig",value:function(n,r,a){n.map(function(i){r==="mask"?i.style({mask:a}):i.updateLayerConfig(m({},r,a))})}},{key:"addChild",value:function(n){this.children.push(n)}},{key:"addChilds",value:function(n){var r;(r=this.children).push.apply(r,Ue(n))}},{key:"removeChilds",value:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,a=[],i=[];this.children.filter(function(o){n.includes(o.id)?a.push(o):i.push(o)}),a.map(function(o){return o.destroy(r)}),this.children=i}},{key:"removeChild",value:function(n){var r=this.children.indexOf(n);r>-1&&this.children.splice(r,1),n.destroy()}},{key:"getChilds",value:function(n){return this.children.filter(function(r){return n.includes(r.id)})}},{key:"getChild",value:function(n){return this.children.filter(function(r){return r.id===n})[0]}},{key:"clearChild",value:function(){this.children.forEach(function(n){n.destroy()}),this.children.slice(0,this.children.length)}},{key:"hasChild",value:function(n){return this.children.includes(n)}},{key:"render",value:function(){var n,r;(n=this.tileConfigManager)===null||n===void 0||n.checkConfig(this.parent),(r=this.tilePickManager)===null||r===void 0||r.normalRender(this.children)}},{key:"pickLayers",value:function(n){var r;return(r=this.tilePickManager)===null||r===void 0?void 0:r.pickRender(this.children,n)}},{key:"setSubLayerInitOptipn",value:function(){var n,r=this.parent.getLayerConfig(),a=r.zIndex,i=a===void 0?0:a,o=r.opacity,s=o===void 0?1:o,l=r.mask,u=l===void 0?!1:l,c=r.stroke,f=c===void 0?"#fff":c,d=r.strokeWidth,p=d===void 0?0:d,h=r.strokeOpacity,g=h===void 0?1:h,v=r.clampLow,b=v===void 0?!0:v,y=r.clampHigh,x=y===void 0?!0:y,E=r.domain,T=E===void 0?[0,1]:E,C=r.rampColors,I=C===void 0?{colors:["rgb(166,97,26)","rgb(223,194,125)","rgb(245,245,245)","rgb(128,205,193)","rgb(1,133,113)"],positions:[0,.25,.5,.75,1]}:C,P=r.featureId,j=P===void 0?"id":P,A=r.sourceLayer,S=this.tileConfigManager.getAttributeScale(this.parent,"color"),M=this.tileConfigManager.getAttributeScale(this.parent,"size"),O=this.parent.getSource(),R=(O==null||(n=O.data)===null||n===void 0?void 0:n.tilesetOptions)||{},H=R.coords,ee=DN(this.parent.type,this.parent);I&&(this.rampColorsData=bg(I)),this.initOptions={layerType:this.parent.type,shape:ee,zIndex:i,opacity:s,sourceLayer:A,coords:H,featureId:j,color:S,size:M,mask:_pe(this.parent.type,u),stroke:f,strokeWidth:p,strokeOpacity:g,clampLow:b,clampHigh:x,domain:T,rampColors:I,rampColorsData:this.rampColorsData}}},{key:"setConfigListener",value:function(){var n=this;if(this.tileConfigManager.setConfig("opacity",this.initOptions.opacity),this.tileConfigManager.setConfig("zIndex",this.initOptions.zIndex),this.tileConfigManager.setConfig("mask",this.initOptions.mask),this.parent.type==="RasterLayer")this.tileConfigManager.setConfig("rampColors",this.initOptions.rampColors),this.tileConfigManager.setConfig("domain",this.initOptions.domain),this.tileConfigManager.setConfig("clampHigh",this.initOptions.clampHigh),this.tileConfigManager.setConfig("clampLow",this.initOptions.clampLow);else{var r,a,i;this.tileConfigManager.setConfig("stroke",this.initOptions.stroke),this.tileConfigManager.setConfig("strokeWidth",this.initOptions.strokeWidth),this.tileConfigManager.setConfig("strokeOpacity",this.initOptions.strokeOpacity),this.tileConfigManager.setConfig("color",(r=this.parent.getAttribute("color"))===null||r===void 0?void 0:r.scale),this.tileConfigManager.setConfig("shape",(a=this.parent.getAttribute("shape"))===null||a===void 0?void 0:a.scale),this.tileConfigManager.setConfig("size",(i=this.parent.getAttribute("size"))===null||i===void 0?void 0:i.scale)}this.tileConfigManager.on("updateConfig",function(o){o.map(function(s){return n.updateStyle(s),""})})}},{key:"updateStyle",value:function(n){var r=this,a=null;if(["size","color","shape"].includes(n)){var i,o=(i=this.parent.getAttribute(n))===null||i===void 0?void 0:i.scale;if(!o)return;a=o,this.children.map(function(u){return r.tileFactory.setStyleAttributeField(u,n,o),""})}else{var s=this.parent.getLayerConfig();if(!(n in s))return;var l=s[n];a=l,this.updateLayersConfig(this.children,n,l),n==="rampColors"&&l&&(this.rampColorsData=bg(l))}this.initOptions[n]=a}},{key:"initTileFactory",value:function(){var n=this.parent.getSource(),r=Xhe(this.parent.type,n.parser);this.tileFactory=new r({parent:this.parent,mapService:this.mapService,rendererService:this.rendererService})}}]),e}();function uO(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Li(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?uO(Object(n),!0).forEach(function(r){m(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):uO(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var tme=function(){function e(t){var n,r=t.parent,a=t.rendererService,i=t.mapService,o=t.layerService,s=t.pickingService;Ae(this,e),m(this,"type","baseTile"),m(this,"sourceLayer",void 0),m(this,"parent",void 0),m(this,"initedTileset",!1),m(this,"tilesetManager",void 0),m(this,"tileLayerManager",void 0),m(this,"scaleField",void 0),m(this,"lastViewStates",void 0),m(this,"timer",void 0),m(this,"mapService",void 0),m(this,"layerService",void 0),m(this,"pickColors",{select:null,active:null});var l=r.getSource(),u=(l==null||(n=l.data)===null||n===void 0?void 0:n.tilesetOptions)||{},c=u.sourceLayer;u.coords,u.featureId,this.sourceLayer=c,this.parent=r,this.mapService=i,this.layerService=o,this.tileLayerManager=new eme(r,i,a,s,o),this.initTileSetManager(),this.bindSubLayerEvent(),this.bindSubLayerPick(),this.scaleField=this.parent.getScaleOptions()}return Oe(e,[{key:"children",get:function(){return this.tileLayerManager.children}},{key:"render",value:function(){this.tileLayerManager&&this.tileLayerManager.render()}},{key:"clearPick",value:function(n){n==="mousemove"&&this.tileLayerManager.tilePickManager.clearPick()}},{key:"clearPickState",value:function(){var n=this;this.children.filter(function(r){return r.inited&&r.isVisible()}).filter(function(r){return r.getCurrentSelectedId()!==null}).map(function(r){n.selectFeature(r,new Uint8Array([0,0,0,0])),r.setCurrentSelectedId(null)})}},{key:"pickLayers",value:function(n){return this.tileLayerManager.pickLayers(n)}},{key:"tileLoaded",value:function(n){}},{key:"tileError",value:function(n){console.warn("error:",n)}},{key:"tileUnLoad",value:function(n){this.tileLayerManager.removeChilds(n.layerIDList,!1)}},{key:"tileUpdate",value:function(){var n=this;!this.tilesetManager||(this.tilesetManager.tiles.filter(function(r){return r.isLoaded}).map(function(r){if(r.layerIDList.length===0){var a=n.tileLayerManager.createTile(r),i=a.layers,o=a.layerIDList;r.layerIDList=o,n.tileLayerManager.addChilds(i)}else{if(!r.isVisibleChange)return;var s=n.tileLayerManager.getChilds(r.layerIDList);n.tileLayerManager.updateLayersConfig(s,"visible",r.isVisible)}}),this.tilesetManager.isLoaded&&this.parent.emit("tiles-loaded",this.tilesetManager.currentTiles))}},{key:"setPickState",value:function(n){var r=this;if(this.pickColors.select){var a=Go(this.pickColors.select);n.map(function(o){r.selectFeature(o,r.pickColors.select),o.setCurrentSelectedId(a)})}if(this.pickColors.active){var i=Go(this.pickColors.active);n.filter(function(o){return o.inited&&o.isVisible()}).map(function(o){o.hooks.beforeHighlight.call(r.pickColors.active),o.setCurrentPickId(i)})}}},{key:"bindSubLayerPick",value:function(){var n=this;this.tileLayerManager.tilePickManager.on("pick",function(r){var a=Le(r.pickedColors,3),i=a[0],o=a[1],s=a[2];if(r.type==="click"){var l=n.children.filter(function(u){return u.inited&&u.isVisible()&&u.isVector}).filter(function(u){return u!==r.layer});n.setSelect(l,[i,o,s])}else n.setHighlight([i,o,s])}),this.tileLayerManager.tilePickManager.on("unpick",function(){n.pickColors.active=null})}},{key:"setHighlight",value:function(n){var r=Go(n);this.pickColors.active=n,this.children.filter(function(a){return a.inited&&a.isVisible()&&a.isVector}).filter(function(a){return a.getPickID()!==r}).map(function(a){a.setPickID(r),a.hooks.beforeHighlight.call(n)})}},{key:"setSelect",value:function(n,r){var a=this,i=Go(r);n.map(function(s){s.getCurrentSelectedId()===null||i!==s.getCurrentSelectedId()?(a.selectFeature(s,r),s.setCurrentSelectedId(i),a.pickColors.select=r):(a.selectFeature(s,new Uint8Array([0,0,0,0])),s.setCurrentSelectedId(null),a.pickColors.select=null)});var o=this.layerService.getRenderList();o.filter(function(s){return s.inited&&!s.isVector&&s.isVisible()&&s.needPick("click")}).filter(function(s){return s.getCurrentSelectedId()!==null}).map(function(s){a.selectFeature(s,new Uint8Array([0,0,0,0])),s.setCurrentSelectedId(null)})}},{key:"selectFeature",value:function(n,r){var a=Le(r,3),i=a[0],o=a[1],s=a[2];n.hooks.beforeSelect.call([i,o,s])}},{key:"bindSubLayerEvent",value:function(){var n=this;this.parent.on("subLayerClick",function(r){n.parent.emit("click",Li({},r))}),this.parent.on("subLayerMouseMove",function(r){return n.parent.emit("mousemove",Li({},r))}),this.parent.on("subLayerMouseUp",function(r){return n.parent.emit("mouseup",Li({},r))}),this.parent.on("subLayerMouseEnter",function(r){return n.parent.emit("mouseenter",Li({},r))}),this.parent.on("subLayerMouseOut",function(r){return n.parent.emit("mouseout",Li({},r))}),this.parent.on("subLayerMouseDown",function(r){return n.parent.emit("mousedown",Li({},r))}),this.parent.on("subLayerContextmenu",function(r){return n.parent.emit("contextmenu",Li({},r))}),this.parent.on("subLayerUnClick",function(r){return n.parent.emit("unclick",Li({},r))}),this.parent.on("subLayerUnMouseMove",function(r){return n.parent.emit("unmousemove",Li({},r))}),this.parent.on("subLayerUnMouseUp",function(r){return n.parent.emit("unmouseup",Li({},r))}),this.parent.on("subLayerUnMouseDown",function(r){return n.parent.emit("unmousedown",Li({},r))}),this.parent.on("subLayerUnContextmenu",function(r){return n.parent.emit("uncontextmenu",Li({},r))})}},{key:"initTileSetManager",value:function(){var n,r=this.parent.getSource();this.tilesetManager=r.tileset,this.initedTileset||(this.bindTilesetEvent(),this.initedTileset=!0);var a=this.getCurrentView(),i=a.latLonBounds,o=a.zoom;(n=this.tilesetManager)===null||n===void 0||n.update(o,i)}},{key:"mapchange",value:function(){var n,r=this.getCurrentView(),a=r.latLonBounds,i=r.zoom;if(this.mapService.version==="GAODE1.x"){var o=this.parent.getLayerConfig(),s=o.visible;i<3&&s?(this.parent.updateLayerConfig({visible:!1}),this.layerService.updateLayerRenderList()):i>=3&&!s&&(this.parent.updateLayerConfig({visible:!0}),this.layerService.updateLayerRenderList())}this.lastViewStates&&this.lastViewStates.zoom===i&&this.lastViewStates.latLonBounds.toString()===a.toString()||(this.lastViewStates={zoom:i,latLonBounds:a},this.timer&&(clearTimeout(this.timer),this.timer=null),(n=this.tilesetManager)===null||n===void 0||n.update(i,a))}},{key:"bindTilesetEvent",value:function(){var n=this;!this.tilesetManager||(this.tilesetManager.on("tile-loaded",function(r){}),this.tilesetManager.on("tile-unload",function(r){n.tileUnLoad(r)}),this.tilesetManager.on("tile-error",function(r,a){n.tileError(r)}),this.tilesetManager.on("tile-update",function(){n.tileUpdate()}),this.mapService.on("zoomend",function(){return n.mapchange()}),this.mapService.on("moveend",function(){return n.mapchange()}))}},{key:"getCurrentView",value:function(){var n=this.mapService.getBounds(),r=[n[0][0],n[0][1],n[1][0],n[1][1]],a=this.mapService.getZoom();return{latLonBounds:r,zoom:a}}}]),e}();function nme(e){var t=rme();return function(){var r=Ee(e),a;if(t){var i=Ee(this).constructor;a=Reflect.construct(r,arguments,i)}else a=r.apply(this,arguments);return Mt(this,a)}}function rme(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var ame=function(e){Ct(n,e);var t=nme(n);function n(){var r;Ae(this,n);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return r=t.call.apply(t,[this].concat(i)),m(D(r),"type","TMS"),r}return Oe(n,[{key:"tileUnLoad",value:function(a){this.tileLayerManager.removeChilds(a.layerIDList,!1)}},{key:"tileUpdate",value:function(){var a=this;!this.tilesetManager||(this.tilesetManager.tiles.filter(function(i){return i.isLoaded}).map(function(i){var o;if((o=i.data)!==null&&o!==void 0&&o.layers&&a.sourceLayer){var s=i.data.layers[a.sourceLayer],l=s==null?void 0:s.features;if(!(Array.isArray(l)&&l.length>0))return}if(i.parentLayerIDList.includes(a.parent.id)){if(!i.isVisibleChange)return;var p=a.tileLayerManager.getChilds(i.layerIDList);a.tileLayerManager.updateLayersConfig(p,"visible",i.isVisible),a.setPickState(p)}else{var u,c=a.tileLayerManager.createTile(i),f=c.layers,d=c.layerIDList;i.parentLayerIDList.push(a.parent.id),(u=i.layerIDList).push.apply(u,Ue(d)),a.tileLayerManager.addChilds(f),a.setPickState(f)}}),this.parent.renderLayers(),this.tilesetManager.isLoaded&&this.parent.emit("tiles-loaded",this.tilesetManager.currentTiles))}}]),n}(tme);function ime(e){var t=ome();return function(){var r=Ee(e),a;if(t){var i=Ee(this).constructor;a=Reflect.construct(r,arguments,i)}else a=r.apply(this,arguments);return Mt(this,a)}}function ome(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var sme=function(e){Ct(n,e);var t=ime(n);function n(){return Ae(this,n),t.apply(this,arguments)}return Oe(n,[{key:"getUninforms",value:function(){return{}}},{key:"initModels",value:function(){var a;return(a=this.layer.getSource())!==null&&a!==void 0&&a.data.isTile&&(this.layer.tileLayer=new ame({parent:this.layer,rendererService:this.rendererService,mapService:this.mapService,layerService:this.layerService,pickingService:this.pickingService})),this.buildModels()}},{key:"buildModels",value:function(){return[]}},{key:"registerBuiltinAttributes",value:function(){}}]),n}(Fa);function lme(e){var t=ume();return function(){var r=Ee(e),a;if(t){var i=Ee(this).constructor;a=Reflect.construct(r,arguments,i)}else a=r.apply(this,arguments);return Mt(this,a)}}function ume(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var cme=`varying vec4 v_color;
uniform float u_opacity: 1.0;

uniform float u_pickLight: 0.0;

#pragma include "picking"

varying mat4 styleMappingMat; // \u4F20\u9012\u4ECE\u7247\u5143\u4E2D\u4F20\u9012\u7684\u6620\u5C04\u6570\u636E

uniform float u_linearColor: 0;
uniform vec4 u_sourceColor;
uniform vec4 u_targetColor;

uniform float u_opacitylinear: 0.0;
uniform float u_opacitylinear_dir: 1.0;

void main() {
  float opacity = styleMappingMat[0][0];
  float lightWeight = styleMappingMat[1][3];
  float barLinearZ = styleMappingMat[2][3];

  // \u8BBE\u7F6E\u5706\u67F1\u7684\u5E95\u8272
  if(u_linearColor == 1.0) { // \u4F7F\u7528\u6E10\u53D8\u989C\u8272
    gl_FragColor = mix(u_sourceColor, u_targetColor, barLinearZ);
    gl_FragColor.rgb *= lightWeight;
  } else { // \u4F7F\u7528 color \u65B9\u6CD5\u4F20\u5165\u7684\u989C\u8272
     gl_FragColor = v_color;
  }

  // \u5E94\u7528\u900F\u660E\u5EA6
  gl_FragColor.a *= opacity;

  // \u5F00\u542F\u900F\u660E\u5EA6\u6E10\u53D8
  if(u_opacitylinear > 0.0) {
    gl_FragColor.a *= u_opacitylinear_dir > 0.0 ? (1.0 - barLinearZ): barLinearZ;
  }

  // picking
  if(u_pickLight > 0.0) {
    gl_FragColor = filterColorAlpha(gl_FragColor, lightWeight);
  } else {
    gl_FragColor = filterColor(gl_FragColor);
  }
}
`,fme=`precision highp float;

#define pi 3.1415926535
#define ambientRatio 0.5
#define diffuseRatio 0.3
#define specularRatio 0.2

attribute vec3 a_Position;
attribute vec3 a_Pos;
attribute vec4 a_Color;
attribute vec3 a_Size;
attribute vec3 a_Normal;

uniform float u_heightfixed: 0.0; // \u9ED8\u8BA4\u4E0D\u56FA\u5B9A
uniform float u_globel;
uniform float u_r;
uniform mat4 u_ModelMatrix;
uniform mat4 u_Mvp;
varying vec4 v_color;

uniform float u_opacity : 1;
uniform float u_lightEnable: 1;

varying mat4 styleMappingMat; // \u7528\u4E8E\u5C06\u5728\u9876\u70B9\u7740\u8272\u5668\u4E2D\u8BA1\u7B97\u597D\u7684\u6837\u5F0F\u503C\u4F20\u9012\u7ED9\u7247\u5143

#pragma include "styleMapping"
#pragma include "styleMappingCalOpacity"

#pragma include "projection"
#pragma include "light"
#pragma include "picking"

float getYRadian(float x, float z) {
  if(x > 0.0 && z > 0.0) {
    return atan(x/z);
  } else if(x > 0.0 && z <= 0.0){
    return atan(-z/x) + pi/2.0;
  } else if(x <= 0.0 && z <= 0.0) {
    return  pi + atan(x/z); //atan(x/z) + 
  } else {
    return atan(z/-x) + pi*3.0/2.0;
  }
}

float getXRadian(float y, float r) {
  return atan(y/r);
}

void main() {

  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97
  styleMappingMat = mat4(
    0.0, 0.0, 0.0, 0.0, // opacity - strokeOpacity - strokeWidth - empty
    0.0, 0.0, 0.0, 0.0, // strokeR - strokeG - strokeB - strokeA - lightWeight
    0.0, 0.0, 0.0, 0.0, // offsets[0] - offsets[1] - linearZ(\u5782\u76F4\u65B9\u5411 0 - 1 \u7684\u503C)
    0.0, 0.0, 0.0, 0.0
  );

  float rowCount = u_cellTypeLayout[0][0];    // \u5F53\u524D\u7684\u6570\u636E\u7EB9\u7406\u6709\u51E0\u884C
  float columnCount = u_cellTypeLayout[0][1]; // \u5F53\u770B\u5230\u6570\u636E\u7EB9\u7406\u6709\u51E0\u5217
  float columnWidth = 1.0/columnCount;  // \u5217\u5BBD
  float rowHeight = 1.0/rowCount;       // \u884C\u9AD8
  float cellCount = calCellCount(); // opacity - strokeOpacity - strokeWidth - stroke - offsets
  float id = a_vertexId; // \u7B2Cn\u4E2A\u9876\u70B9
  float cellCurrentRow = floor(id * cellCount / columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u884C
  float cellCurrentColumn = mod(id * cellCount, columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u5217
  
  // cell \u56FA\u5B9A\u987A\u5E8F opacity -> strokeOpacity -> strokeWidth -> stroke ... 
  // \u6309\u987A\u5E8F\u4ECE cell \u4E2D\u53D6\u503C\u3001\u82E5\u6CA1\u6709\u5219\u81EA\u52A8\u5F80\u4E0B\u53D6\u503C
  float textureOffset = 0.0; // \u5728 cell \u4E2D\u53D6\u503C\u7684\u504F\u79FB\u91CF

  vec2 opacityAndOffset = calOpacityAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);
  styleMappingMat[0][0] = opacityAndOffset.r;
  textureOffset = opacityAndOffset.g;
  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97
  vec3 size = a_Size * a_Position;

  // a_Position.z \u662F\u5728\u6784\u5EFA\u7F51\u683C\u7684\u65F6\u5019\u4F20\u5165\u7684\u6807\u51C6\u503C 0 - 1\uFF0C\u5728\u63D2\u503C\u5668\u63D2\u503C\u53EF\u4EE5\u83B7\u53D6 0\uFF5E1 \u7EBF\u6027\u6E10\u53D8\u7684\u503C
  styleMappingMat[2][3] =  a_Position.z;

  vec3 offset = size; // \u63A7\u5236\u5706\u67F1\u4F53\u7684\u5927\u5C0F - \u4ECE\u6807\u51C6\u5355\u4F4D\u5706\u67F1\u4F53\u8FDB\u884C\u504F\u79FB
  if(u_heightfixed < 1.0) { // \u5706\u67F1\u4F53\u4E0D\u56FA\u5B9A\u9AD8\u5EA6
    
    if (u_CoordinateSystem == COORDINATE_SYSTEM_P20 || u_CoordinateSystem == COORDINATE_SYSTEM_P20_OFFSET) {
      // P20 \u5750\u6807\u7CFB\u4E0B\uFF0C\u4E3A\u4E86\u548C Web \u58A8\u5361\u6258\u5750\u6807\u7CFB\u7EDF\u4E00\uFF0Czoom \u9ED8\u8BA4\u51CF1
      offset = offset * pow(2.0, (19.0 - u_Zoom));
    }
    if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) {
      // P20_2 \u5750\u6807\u7CFB\u4E0B\uFF0C\u4E3A\u4E86\u548C Web \u58A8\u5361\u6258\u5750\u6807\u7CFB\u7EDF\u4E00\uFF0Czoom \u9ED8\u8BA4\u51CF3
      offset = offset * pow(2.0, (19.0 - 3.0 - u_Zoom));
    }
  } else {// \u5706\u67F1\u4F53\u56FA\u5B9A\u9AD8\u5EA6 \uFF08 \u5904\u7406 mapbox \uFF09
    if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
      offset *= 4.0/pow(2.0, 21.0 - u_Zoom);
    }
  }


  vec4 project_pos = project_position(vec4(a_Pos.xy, 0., 1.0));

  // u_r \u63A7\u5236\u5706\u67F1\u7684\u751F\u957F
  vec4 pos = vec4(project_pos.xy + offset.xy, offset.z * u_r, 1.0);

  // \u5706\u67F1\u5149\u7167\u6548\u679C
  float lightWeight = 1.0;
  if(u_lightEnable > 0.0) { // \u53D6\u6D88\u4E09\u5143\u8868\u8FBE\u5F0F\uFF0C\u589E\u5F3A\u5065\u58EE\u6027
    lightWeight = calc_lighting(pos);
  }
  styleMappingMat[1][3] = lightWeight;

  v_color =vec4(a_Color.rgb * lightWeight, a_Color.w);

  // gl_Position = project_common_position_to_clipspace(pos);

  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
    gl_Position = u_Mvp * pos;
  } else {
    gl_Position = project_common_position_to_clipspace(pos);
  }
  
  if(u_globel > 0.0) {
    // \u5728\u5730\u7403\u6A21\u5F0F\u4E0B\uFF0C\u5C06\u539F\u672C\u5782\u76F4\u4E8E xy \u5E73\u9762\u7684\u5706\u67F1\u8C03\u6574\u59FF\u6001\u5230\u9002\u5E94\u5706\u7684\u89D2\u5EA6
    //\u65CB\u8F6C\u77E9\u9635mx\uFF0C\u521B\u5EFA\u7ED5x\u8F74\u65CB\u8F6C\u77E9\u9635
    float r = sqrt(a_Pos.z*a_Pos.z + a_Pos.x*a_Pos.x);
    float xRadian = getXRadian(a_Pos.y, r);
    float xcos = cos(xRadian);//\u6C42\u89E3\u65CB\u8F6C\u89D2\u5EA6\u4F59\u5F26\u503C
    float xsin = sin(xRadian);//\u6C42\u89E3\u65CB\u8F6C\u89D2\u5EA6\u6B63\u5F26\u503C
    mat4 mx = mat4(
      1,0,0,0,  
      0,xcos,-xsin,0,  
      0,xsin,xcos,0,  
      0,0,0,1);

    //\u65CB\u8F6C\u77E9\u9635my\uFF0C\u521B\u5EFA\u7ED5y\u8F74\u65CB\u8F6C\u77E9\u9635
    float yRadian = getYRadian(a_Pos.x, a_Pos.z);
    float ycos = cos(yRadian);//\u6C42\u89E3\u65CB\u8F6C\u89D2\u5EA6\u4F59\u5F26\u503C
    float ysin = sin(yRadian);//\u6C42\u89E3\u65CB\u8F6C\u89D2\u5EA6\u6B63\u5F26\u503C
    mat4 my = mat4(
      ycos,0,-ysin,0,  
      0,1,0,0,  
      ysin,0,ycos,0,  
      0,0,0,1);

    gl_Position = u_ViewProjectionMatrix * vec4(( my * mx *  vec4(a_Position * a_Size, 1.0)).xyz + a_Pos, 1.0);
  }

  setPickingColor(a_PickingColor);
}
`,dme=function(e){Ct(n,e);var t=lme(n);function n(){var r;Ae(this,n);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return r=t.call.apply(t,[this].concat(i)),m(D(r),"raiseCount",0),m(D(r),"raiserepeat",0),r}return Oe(n,[{key:"getUninforms",value:function(){var a=this.layer.getLayerConfig(),i=a.animateOption,o=i===void 0?{enable:!1,speed:.01,repeat:!1}:i,s=a.opacity,l=s===void 0?1:s,u=a.sourceColor,c=a.targetColor,f=a.pickLight,d=f===void 0?!1:f,p=a.heightfixed,h=p===void 0?!1:p,g=a.opacityLinear,v=g===void 0?{enable:!1,dir:"up"}:g,b=a.lightEnable,y=b===void 0?!0:b;if(this.dataTextureTest&&this.dataTextureNeedUpdate({opacity:l})){this.judgeStyleAttributes({opacity:l});var x=this.layer.getEncodedData(),E=this.calDataFrame(this.cellLength,x,this.cellProperties),T=E.data,C=E.width,I=E.height;this.rowCount=I,this.dataTexture=this.cellLength>0&&T.length>0?this.createTexture2D({flipY:!0,data:T,format:V.LUMINANCE,type:V.FLOAT,width:C,height:I}):this.createTexture2D({flipY:!0,data:[1],format:V.LUMINANCE,type:V.FLOAT,width:1,height:1})}var P=0,j=[0,0,0,0],A=[0,0,0,0];if(u&&c&&(j=Ko(u),A=Ko(c),P=1),this.raiseCount<1&&this.raiserepeat>0&&o.enable){var S=o.speed,M=S===void 0?.01:S;o.repeat,this.raiseCount+=M,this.raiseCount>=1&&(this.raiserepeat>1?(this.raiseCount=0,this.raiserepeat--):this.raiseCount=1)}return{u_pickLight:Number(d),u_heightfixed:Number(h),u_r:o.enable&&this.raiserepeat>0?this.raiseCount:1,u_globel:this.mapService.version==="GLOBEL"?1:0,u_dataTexture:this.dataTexture,u_cellTypeLayout:this.getCellTypeLayout(),u_opacity:Gn(l)?l:1,u_linearColor:P,u_sourceColor:j,u_targetColor:A,u_opacitylinear:Number(v.enable),u_opacitylinear_dir:v.dir==="up"?1:0,u_lightEnable:Number(y)}}},{key:"initModels",value:function(){return this.buildModels()}},{key:"buildModels",value:function(){var a=this.layer.getLayerConfig(),i=a.depth,o=i===void 0?!0:i,s=a.animateOption.repeat,l=s===void 0?1:s;return this.raiserepeat=l,[this.layer.buildLayerModel({moduleName:"pointExtrude2",vertexShader:fme,fragmentShader:cme,triangulation:tpe,blend:this.getBlend(),cull:{enable:!0,face:mv(this.mapService.version)},depth:{enable:o}})]}},{key:"clearModels",value:function(){var a;(a=this.dataTexture)===null||a===void 0||a.destroy()}},{key:"registerBuiltinAttributes",value:function(){var a=this.mapService.version==="GLOBEL";this.styleAttributeService.registerStyleAttribute({name:"size",type:vn.Attribute,descriptor:{name:"a_Size",buffer:{usage:V.DYNAMIC_DRAW,data:[],type:V.FLOAT},size:3,update:function(o,s,l,u){var c=o.size;if(c){var f=[];return Array.isArray(c)&&(f=c.length===2?[c[0],c[0],c[1]]:c),Array.isArray(c)||(f=[c,c,c]),f}else return[2,2,2]}}}),this.styleAttributeService.registerStyleAttribute({name:"normal",type:vn.Attribute,descriptor:{name:"a_Normal",buffer:{usage:V.STATIC_DRAW,data:[],type:V.FLOAT},size:3,update:function(o,s,l,u,c){return c}}}),this.styleAttributeService.registerStyleAttribute({name:"pos",type:vn.Attribute,descriptor:{name:"a_Pos",buffer:{usage:V.DYNAMIC_DRAW,data:[],type:V.FLOAT},size:3,update:function(o,s){var l=_u(o.coordinates);return a?RN([l[0],l[1]]):[l[0],l[1],0]}}})}}]),n}(Fa);function pme(e){var t=hme();return function(){var r=Ee(e),a;if(t){var i=Ee(this).constructor;a=Reflect.construct(r,arguments,i)}else a=r.apply(this,arguments);return Mt(this,a)}}function hme(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var cO=`
uniform float u_additive;

varying mat4 styleMappingMat; // \u4F20\u9012\u4ECE\u7247\u5143\u4E2D\u4F20\u9012\u7684\u6620\u5C04\u6570\u636E

varying vec4 v_data;
varying vec4 v_color;
varying float v_radius;
uniform float u_time;
uniform vec4 u_aimate: [ 0, 2., 1.0, 0.2 ];

#pragma include "sdf_2d"
#pragma include "picking"

void main() {

  vec4 textrueStroke = vec4(
    styleMappingMat[1][0],
    styleMappingMat[1][1],
    styleMappingMat[1][2],
    styleMappingMat[1][3]
  );

  float opacity = styleMappingMat[0][0];

  lowp float antialiasblur = v_data.z;
  float r = v_radius / (v_radius);

  float outer_df;
  float inner_df;
  // 'circle', 'triangle', 'square', 'pentagon', 'hexagon', 'octogon', 'hexagram', 'rhombus', 'vesica'
  
  outer_df = sdCircle(v_data.xy, 1.0);
  inner_df = sdCircle(v_data.xy, r);


  float opacity_t = smoothstep(0.0, antialiasblur, outer_df);

  float color_t = smoothstep(
    antialiasblur,
    0.0,
    inner_df
  );
  float PI = 3.14159;
  float N_RINGS = 3.0;
  float FREQ = 1.0;

 gl_FragColor = vec4(v_color.rgb, v_color.a * opacity);

  float d = length(v_data.xy);
  if(d > 0.5) {
    discard;
  }
  float intensity = clamp(cos(d * PI), 0.0, 1.0) * clamp(cos(2.0 * PI * (d * 2.0 * u_aimate.z - u_aimate.y * u_time)), 0.0, 1.0);
  
  // TODO: \u6839\u636E\u53E0\u52A0\u6A21\u5F0F\u9009\u62E9\u6548\u679C
  if(u_additive > 0.0) {
    gl_FragColor *= intensity;
    // TODO: \u4F18\u5316\u6C34\u6CE2\u70B9 blend additive \u6A21\u5F0F\u4E0B\u6709\u7684\u62FE\u53D6\u6548\u679C 
    gl_FragColor = filterColorAlpha(gl_FragColor, gl_FragColor.a);
  } else {
    gl_FragColor = vec4(gl_FragColor.xyz, gl_FragColor.a * intensity);
    gl_FragColor = filterColor(gl_FragColor);
  }
}
`,mme=`
uniform float u_globel;
uniform float u_additive;

varying mat4 styleMappingMat; // \u4F20\u9012\u4ECE\u7247\u5143\u4E2D\u4F20\u9012\u7684\u6620\u5C04\u6570\u636E

varying vec4 v_data;
varying vec4 v_color;
varying float v_radius;

#pragma include "sdf_2d"
#pragma include "picking"


void main() {
  int shape = int(floor(v_data.w + 0.5));

  vec4 textrueStroke = vec4(
    styleMappingMat[1][0],
    styleMappingMat[1][1],
    styleMappingMat[1][2],
    styleMappingMat[1][3]
  );

  float opacity = styleMappingMat[0][0];
  float stroke_opacity = styleMappingMat[0][1];
  float strokeWidth = styleMappingMat[0][2];
  vec4 strokeColor = textrueStroke == vec4(0) ? v_color : textrueStroke;

  lowp float antialiasblur = v_data.z;
  float r = v_radius / (v_radius + strokeWidth);

  float outer_df;
  float inner_df;
  // 'circle', 'triangle', 'square', 'pentagon', 'hexagon', 'octogon', 'hexagram', 'rhombus', 'vesica'
  if (shape == 0) {
    outer_df = sdCircle(v_data.xy, 1.0);
    inner_df = sdCircle(v_data.xy, r);
  } else if (shape == 1) {
    outer_df = sdEquilateralTriangle(1.1 * v_data.xy);
    inner_df = sdEquilateralTriangle(1.1 / r * v_data.xy);
  } else if (shape == 2) {
    outer_df = sdBox(v_data.xy, vec2(1.));
    inner_df = sdBox(v_data.xy, vec2(r));
  } else if (shape == 3) {
    outer_df = sdPentagon(v_data.xy, 0.8);
    inner_df = sdPentagon(v_data.xy, r * 0.8);
  } else if (shape == 4) {
    outer_df = sdHexagon(v_data.xy, 0.8);
    inner_df = sdHexagon(v_data.xy, r * 0.8);
  } else if (shape == 5) {
    outer_df = sdOctogon(v_data.xy, 1.0);
    inner_df = sdOctogon(v_data.xy, r);
  } else if (shape == 6) {
    outer_df = sdHexagram(v_data.xy, 0.52);
    inner_df = sdHexagram(v_data.xy, r * 0.52);
  } else if (shape == 7) {
    outer_df = sdRhombus(v_data.xy, vec2(1.0));
    inner_df = sdRhombus(v_data.xy, vec2(r));
  } else if (shape == 8) {
    outer_df = sdVesica(v_data.xy, 1.1, 0.8);
    inner_df = sdVesica(v_data.xy, r * 1.1, r * 0.8);
  }

  if(u_globel > 0.0) {
    // TODO: \u5730\u7403\u6A21\u5F0F\u4E0B\u907F\u514D\u591A\u4F59\u7247\u5143\u7ED8\u5236\uFF0C\u540C\u65F6\u4E5F\u80FD\u907F\u514D\u6709\u7528\u7247\u5143\u5728\u900F\u660E\u4E14\u91CD\u53E0\u7684\u60C5\u51B5\u4E0B\u65E0\u6CD5\u5199\u5165
    // \u4ED8\u51FA\u7684\u4EE3\u4EF7\u662F\u8FB9\u7F18\u4F1A\u6709\u4E00\u4E9B\u952F\u9F7F
    if(outer_df > antialiasblur + 0.018) discard;
  }
  float opacity_t = smoothstep(0.0, antialiasblur, outer_df);

  float color_t = strokeWidth < 0.01 ? 0.0 : smoothstep(
    antialiasblur,
    0.0,
    inner_df
  );

  if(strokeWidth < 0.01) {
    gl_FragColor = vec4(v_color.rgb, v_color.a * opacity);
  } else {
    gl_FragColor = mix(vec4(v_color.rgb, v_color.a * opacity), strokeColor * stroke_opacity, color_t);
  }

  if(u_additive > 0.0) {
    gl_FragColor *= opacity_t;
    gl_FragColor = filterColorAlpha(gl_FragColor, gl_FragColor.a);
  } else {
    gl_FragColor.a *= opacity_t;
    gl_FragColor = filterColor(gl_FragColor);
  }
}
`,yx=`attribute vec4 a_Color;
attribute vec3 a_Position;
attribute vec3 a_Extrude;
attribute float a_Size;
attribute float a_Shape;

varying mat4 styleMappingMat; // \u7528\u4E8E\u5C06\u5728\u9876\u70B9\u7740\u8272\u5668\u4E2D\u8BA1\u7B97\u597D\u7684\u6837\u5F0F\u503C\u4F20\u9012\u7ED9\u7247\u5143

uniform float u_globel;
uniform mat4 u_ModelMatrix;
uniform mat4 u_Mvp;
uniform float u_isMeter;

varying vec4 v_data;
varying vec4 v_color;
varying float v_radius;

uniform float u_opacity : 1;
uniform float u_stroke_opacity : 1;
uniform float u_stroke_width : 2;
uniform vec4 u_stroke_color : [0.0, 0.0, 0.0, 0.0];
uniform vec2 u_offsets;

uniform float u_blur : 0.0;
uniform float u_raisingHeight: 0.0;

#pragma include "styleMapping"
#pragma include "styleMappingCalOpacity"
#pragma include "styleMappingCalStrokeOpacity"
#pragma include "styleMappingCalStrokeWidth"

#pragma include "projection"
#pragma include "picking"


void main() {
  vec3 extrude = a_Extrude;
  float shape_type = a_Shape;
  float newSize = setPickingSize(a_Size);

  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97
  styleMappingMat = mat4(
    0.0, 0.0, 0.0, 0.0, // opacity - strokeOpacity - strokeWidth - empty
    0.0, 0.0, 0.0, 0.0, // strokeR - strokeG - strokeB - strokeA
    0.0, 0.0, 0.0, 0.0, // offsets[0] - offsets[1]
    0.0, 0.0, 0.0, 0.0
  );

  float rowCount = u_cellTypeLayout[0][0];    // \u5F53\u524D\u7684\u6570\u636E\u7EB9\u7406\u6709\u51E0\u884C
  float columnCount = u_cellTypeLayout[0][1]; // \u5F53\u770B\u5230\u6570\u636E\u7EB9\u7406\u6709\u51E0\u5217
  float columnWidth = 1.0/columnCount;  // \u5217\u5BBD
  float rowHeight = 1.0/rowCount;       // \u884C\u9AD8
  float cellCount = calCellCount(); // opacity - strokeOpacity - strokeWidth - stroke - offsets
  float id = a_vertexId; // \u7B2Cn\u4E2A\u9876\u70B9
  float cellCurrentRow = floor(id * cellCount / columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u884C
  float cellCurrentColumn = mod(id * cellCount, columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u5217
  
  // cell \u56FA\u5B9A\u987A\u5E8F opacity -> strokeOpacity -> strokeWidth -> stroke ... 
  // \u6309\u987A\u5E8F\u4ECE cell \u4E2D\u53D6\u503C\u3001\u82E5\u6CA1\u6709\u5219\u81EA\u52A8\u5F80\u4E0B\u53D6\u503C
  float textureOffset = 0.0; // \u5728 cell \u4E2D\u53D6\u503C\u7684\u504F\u79FB\u91CF

  vec2 opacityAndOffset = calOpacityAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);
  styleMappingMat[0][0] = opacityAndOffset.r;
  textureOffset = opacityAndOffset.g;

  vec2 strokeOpacityAndOffset = calStrokeOpacityAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);
  styleMappingMat[0][1] = strokeOpacityAndOffset.r;
  textureOffset = strokeOpacityAndOffset.g;

  vec2 strokeWidthAndOffset = calStrokeWidthAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);
  styleMappingMat[0][2] = strokeWidthAndOffset.r;
  textureOffset = strokeWidthAndOffset.g;

  vec4 textrueStroke = vec4(-1.0, -1.0, -1.0, -1.0);
  if(hasStroke()) {
    vec2 valueRPos = nextPos(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset);
    styleMappingMat[1][0] = pos2value(valueRPos, columnWidth, rowHeight); // R
    textureOffset += 1.0;

    vec2 valueGPos = nextPos(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset);
    styleMappingMat[1][1] = pos2value(valueGPos, columnWidth, rowHeight); // G
    textureOffset += 1.0;

    vec2 valueBPos = nextPos(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset);
    styleMappingMat[1][2] = pos2value(valueBPos, columnWidth, rowHeight); // B
    textureOffset += 1.0;

    vec2 valueAPos = nextPos(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset);
    styleMappingMat[1][3] = pos2value(valueAPos, columnWidth, rowHeight); // A
    textureOffset += 1.0;
  } else {
    if(u_stroke_color == vec4(0.0)) {
      styleMappingMat[1][0] = v_color.r;
      styleMappingMat[1][1] = v_color.g;
      styleMappingMat[1][2] = v_color.b;
      styleMappingMat[1][3] = v_color.a;
    } else {
      styleMappingMat[1][0] = u_stroke_color.r;
      styleMappingMat[1][1] = u_stroke_color.g;
      styleMappingMat[1][2] = u_stroke_color.b;
      styleMappingMat[1][3] = u_stroke_color.a;
    }
  }

  vec2 textrueOffsets = vec2(0.0, 0.0);
  if(hasOffsets()) {
    vec2 valueXPos = nextPos(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset);
    textrueOffsets.r = pos2value(valueXPos, columnWidth, rowHeight); // x
    textureOffset += 1.0;

    vec2 valueYPos = nextPos(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset);
    textrueOffsets.g = pos2value(valueYPos, columnWidth, rowHeight); // x
    textureOffset += 1.0;
  } else {
    textrueOffsets = u_offsets;
  }

  // cal style mapping

  // unpack color(vec2)
  v_color = a_Color;

  // radius(16-bit)
  v_radius = newSize;

  // TODO: billboard
  // anti-alias
  //  float antialiased_blur = -max(u_blur, antialiasblur);
  float antialiasblur = -max(2.0 / u_DevicePixelRatio / a_Size, u_blur);

  vec2 offset = (extrude.xy * (newSize + u_stroke_width) + textrueOffsets);
  vec3 aPosition = a_Position;
  if(u_isMeter < 1.0) {
    // \u4E0D\u4EE5\u7C73\u4E3A\u5B9E\u9645\u5355\u4F4D
    offset = project_pixel(offset);
  } else {
    // \u4EE5\u7C73\u4E3A\u5B9E\u9645\u5355\u4F4D
    antialiasblur *= pow(19.0 - u_Zoom, 2.0);
    antialiasblur = max(antialiasblur, -0.01);
    // offset *= 0.5;

    if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
      aPosition.xy += offset;
      offset.x = 0.0;
      offset.y = 0.0;
    }
  }

  // TODP: /abs(extrude.x) \u662F\u4E3A\u4E86\u517C\u5BB9\u5730\u7403\u6A21\u5F0F
  v_data = vec4(extrude.x/abs(extrude.x), extrude.y/abs(extrude.y), antialiasblur,shape_type);


  // vec4 project_pos = project_position(vec4(a_Position.xy, 0.0, 1.0));
  vec4 project_pos = project_position(vec4(aPosition.xy, 0.0, 1.0));
  // gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offset, project_pixel(setPickingOrder(0.0)), 1.0));

  float raiseHeight = u_raisingHeight;
  if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
    float mapboxZoomScale = 4.0/pow(2.0, 21.0 - u_Zoom);
    raiseHeight = u_raisingHeight * mapboxZoomScale;
  }

  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
    gl_Position = u_Mvp * vec4(project_pos.xy + offset, raiseHeight, 1.0);
  } else {
    gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offset, u_raisingHeight, 1.0));
  }

  if(u_globel > 0.0) {
    gl_Position = u_ViewProjectionMatrix * vec4(a_Position + extrude * newSize * 0.1, 1.0);
  }
 
  // gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offset, 0.0, 1.0));

  setPickingColor(a_PickingColor);
}
`,gme=function(e){Ct(n,e);var t=pme(n);function n(){var r;Ae(this,n);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return r=t.call.apply(t,[this].concat(i)),m(D(r),"meter2coord",1),m(D(r),"isMeter",!1),r}return Oe(n,[{key:"getUninforms",value:function(){var a=this.layer.getLayerConfig(),i=a.opacity,o=i===void 0?1:i,s=a.strokeOpacity,l=s===void 0?1:s,u=a.strokeWidth,c=u===void 0?0:u,f=a.stroke,d=f===void 0?"rgba(0,0,0,0)":f,p=a.offsets,h=p===void 0?[0,0]:p,g=a.blend,v=a.blur,b=v===void 0?0:v,y=a.raisingHeight,x=y===void 0?0:y;if(this.dataTextureTest&&this.dataTextureNeedUpdate({opacity:o,strokeOpacity:l,strokeWidth:c,stroke:d,offsets:h})){this.judgeStyleAttributes({opacity:o,strokeOpacity:l,strokeWidth:c,stroke:d,offsets:h});var E=this.layer.getEncodedData(),T=this.calDataFrame(this.cellLength,E,this.cellProperties),C=T.data,I=T.width,P=T.height;this.rowCount=P,this.dataTexture=this.cellLength>0&&C.length>0?this.createTexture2D({flipY:!0,data:C,format:V.LUMINANCE,type:V.FLOAT,width:I,height:P}):this.createTexture2D({flipY:!0,data:[1],format:V.LUMINANCE,type:V.FLOAT,width:1,height:1})}return{u_raisingHeight:Number(x),u_isMeter:Number(this.isMeter),u_blur:b,u_additive:g==="additive"?1:0,u_globel:this.mapService.version===dr.GLOBEL?1:0,u_dataTexture:this.dataTexture,u_cellTypeLayout:this.getCellTypeLayout(),u_opacity:Gn(o)?o:1,u_stroke_opacity:Gn(l)?l:1,u_stroke_width:Gn(c)?c:1,u_stroke_color:this.getStrokeColor(d),u_offsets:this.isOffsetStatic(h)?h:[0,0]}}},{key:"getAnimateUniforms",value:function(){var a=this.layer.getLayerConfig(),i=a.animateOption,o=i===void 0?{enable:!1}:i;return{u_aimate:this.animateOption2Array(o),u_time:this.layer.getLayerAnimateTime()}}},{key:"getAttribute",value:function(){return this.styleAttributeService.createAttributesAndIndices(this.layer.getEncodedData(),qo)}},{key:"initModels",value:function(){var a=this.layer.getLayerConfig(),i=a.unit,o=i===void 0?"l7size":i,s=this.mapService.version;return o==="meter"&&s!==dr.L7MAP&&s!==dr.GLOBEL&&(this.isMeter=!0,this.calMeter2Coord()),this.buildModels()}},{key:"calMeter2Coord",value:function(){var a=Le(this.layer.getSource().extent,4),i=a[0],o=a[1],s=a[2],l=a[3],u=[(i+s)/2,(o+l)/2],c=this.mapService.version;if(c===dr.MAPBOX&&window.mapboxgl.MercatorCoordinate){var f=window.mapboxgl.MercatorCoordinate.fromLngLat({lng:u[0],lat:u[1]},0),d=1,p=d*f.meterInMercatorCoordinateUnits(),h=new window.mapboxgl.MercatorCoordinate(f.x-p,f.y,f.z),g=h.toLngLat();this.meter2coord=u[0]-g.lng;return}var v=this.mapService.meterToCoord(u,[i,o]),b=this.mapService.meterToCoord(u,[s===i?s+.1:s,l===o?o+.1:l]);this.meter2coord=(v+b)/2,Boolean(this.meter2coord)||(this.meter2coord=7.70681090738883)}},{key:"buildModels",value:function(){var a=this.layer.getLayerConfig(),i=a.mask,o=i===void 0?!1:i,s=a.maskInside,l=s===void 0?!0:s,u=a.animateOption,c=u===void 0?{enable:!1}:u,f=this.getShaders(c),d=f.frag,p=f.vert,h=f.type,g=this.mapService.version==="GLOBEL";return this.layer.triangulation=g?j4:qo,[this.layer.buildLayerModel({moduleName:"pointfill_"+h,vertexShader:p,fragmentShader:d,triangulation:g?j4:qo,depth:{enable:g},blend:this.getBlend(),stencil:_i(o,l),cull:{enable:!0,face:mv(this.mapService.version)}})]}},{key:"getShaders",value:function(a){if(a.enable)switch(a.type){case"wave":return{frag:cO,vert:yx,type:"wave"};default:return{frag:cO,vert:yx,type:"wave"}}else return{frag:mme,vert:yx,type:"normal"}}},{key:"clearModels",value:function(){var a;(a=this.dataTexture)===null||a===void 0||a.destroy()}},{key:"animateOption2Array",value:function(a){return[a.enable?0:1,a.speed||1,a.rings||3,0]}},{key:"registerBuiltinAttributes",value:function(){var a=this,i=this.mapService.version==="GLOBEL";this.styleAttributeService.registerStyleAttribute({name:"extrude",type:vn.Attribute,descriptor:{name:"a_Extrude",buffer:{usage:V.DYNAMIC_DRAW,data:[],type:V.FLOAT},size:3,update:function(s,l,u,c){var f;if(i){var d=Le(u,3),p=d[0],h=d[1],g=d[2],v=Pa(0,0,1),b=Pa(p,0,g),y=p>=0?lw(v,b):Math.PI*2-lw(v,b),x=Math.PI*2-Math.asin(h/100),E=Xi();$2(E,E,y),U2(E,E,x);var T=Pa(1,1,0);np(T,T,E),Vc(T,T);var C=Pa(-1,1,0);np(C,C,E),Vc(C,C);var I=Pa(-1,-1,0);np(I,I,E),Vc(I,I);var P=Pa(1,-1,0);np(P,P,E),Vc(P,P),f=[].concat(Ue(T),Ue(C),Ue(I),Ue(P))}else f=[1,1,0,-1,1,0,-1,-1,0,1,-1,0];var j=c%4*3;return[f[j],f[j+1],f[j+2]]}}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:vn.Attribute,descriptor:{name:"a_Size",buffer:{usage:V.DYNAMIC_DRAW,data:[],type:V.FLOAT},size:1,update:function(s,l,u,c){var f=s.size,d=f===void 0?5:f;return Array.isArray(d)?[d[0]*a.meter2coord]:[d*a.meter2coord]}}}),this.styleAttributeService.registerStyleAttribute({name:"shape",type:vn.Attribute,descriptor:{name:"a_Shape",buffer:{usage:V.DYNAMIC_DRAW,data:[],type:V.FLOAT},size:1,update:function(s,l,u,c){var f=s.shape,d=f===void 0?2:f,p=a.layer.getLayerConfig().shape2d,h=p.indexOf(d);return[h]}}})}}]),n}(Fa);function vme(e){var t=bme();return function(){var r=Ee(e),a;if(t){var i=Ee(this).constructor;a=Reflect.construct(r,arguments,i)}else a=r.apply(this,arguments);return Mt(this,a)}}function bme(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var yme=`uniform sampler2D u_texture;
uniform vec2 u_textSize;

varying mat4 styleMappingMat; // \u4F20\u9012\u4ECE\u7247\u5143\u4E2D\u4F20\u9012\u7684\u6620\u5C04\u6570\u636E

#pragma include "sdf_2d"
#pragma include "picking"
varying vec2 v_uv; // \u672C\u8EAB\u7684 uv \u5750\u6807
varying vec2 v_Iconuv;

void main() {

  float opacity = styleMappingMat[0][0];

  vec2 pos = v_Iconuv / u_textSize + v_uv / u_textSize * 64.;
  gl_FragColor = texture2D(u_texture, pos);
  gl_FragColor.a *= opacity;

  gl_FragColor = filterColor(gl_FragColor);
}
`,xme=`attribute vec4 a_Color;
attribute vec3 a_Position;
attribute vec3 a_Extrude;
attribute float a_Size;
attribute vec2 a_Uv;
attribute float a_Rotate;

varying mat4 styleMappingMat; // \u7528\u4E8E\u5C06\u5728\u9876\u70B9\u7740\u8272\u5668\u4E2D\u8BA1\u7B97\u597D\u7684\u6837\u5F0F\u503C\u4F20\u9012\u7ED9\u7247\u5143

uniform mat4 u_ModelMatrix;
uniform mat4 u_Mvp;
uniform mat2 u_RotateMatrix;
uniform float u_isMeter;

varying vec2 v_uv; // \u672C\u8EAB\u7684 uv \u5750\u6807
varying vec2 v_Iconuv; // icon \u8D34\u56FE\u7684 uv \u5750\u6807

uniform float u_opacity : 1;
uniform vec2 u_offsets;

#pragma include "styleMapping"
#pragma include "styleMappingCalOpacity"

#pragma include "projection"
#pragma include "picking"

void main() {
  vec3 extrude = a_Extrude;

  v_uv = (a_Extrude.xy + 1.0)/2.0;
  v_uv.y = 1.0 - v_uv.y;
  v_Iconuv = a_Uv;

  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97
  styleMappingMat = mat4(
    0.0, 0.0, 0.0, 0.0, // opacity - empty - empty - empty
    0.0, 0.0, 0.0, 0.0, // empty - empty - empty - empty
    0.0, 0.0, 0.0, 0.0, // offsets[0] - offsets[1]
    0.0, 0.0, 0.0, 0.0
  );

  float rowCount = u_cellTypeLayout[0][0];    // \u5F53\u524D\u7684\u6570\u636E\u7EB9\u7406\u6709\u51E0\u884C
  float columnCount = u_cellTypeLayout[0][1]; // \u5F53\u770B\u5230\u6570\u636E\u7EB9\u7406\u6709\u51E0\u5217
  float columnWidth = 1.0/columnCount;  // \u5217\u5BBD
  float rowHeight = 1.0/rowCount;       // \u884C\u9AD8
  float cellCount = calCellCount(); // opacity - strokeOpacity - strokeWidth - stroke - offsets
  float id = a_vertexId; // \u7B2Cn\u4E2A\u9876\u70B9
  float cellCurrentRow = floor(id * cellCount / columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u884C
  float cellCurrentColumn = mod(id * cellCount, columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u5217
  
  // cell \u56FA\u5B9A\u987A\u5E8F opacity -> strokeOpacity -> strokeWidth -> stroke ... 
  // \u6309\u987A\u5E8F\u4ECE cell \u4E2D\u53D6\u503C\u3001\u82E5\u6CA1\u6709\u5219\u81EA\u52A8\u5F80\u4E0B\u53D6\u503C
  float textureOffset = 0.0; // \u5728 cell \u4E2D\u53D6\u503C\u7684\u504F\u79FB\u91CF

  vec2 opacityAndOffset = calOpacityAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);
  styleMappingMat[0][0] = opacityAndOffset.r;
  textureOffset = opacityAndOffset.g;

  vec2 textrueOffsets = vec2(0.0, 0.0);
  if(hasOffsets()) {
    vec2 valueXPos = nextPos(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset);
    textrueOffsets.r = pos2value(valueXPos, columnWidth, rowHeight); // x
    textureOffset += 1.0;

    vec2 valueYPos = nextPos(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset);
    textrueOffsets.g = pos2value(valueYPos, columnWidth, rowHeight); // x
    textureOffset += 1.0;
  } else {
    textrueOffsets = u_offsets;
  }

  // cal style mapping

  highp float angle_sin = sin(a_Rotate);
  highp float angle_cos = cos(a_Rotate);
  mat2 rotation_matrix = mat2(angle_cos, -1.0 * angle_sin, angle_sin, angle_cos);

  // vec2 offset = (u_RotateMatrix * extrude.xy * (a_Size) + textrueOffsets);
  vec2 offset = (rotation_matrix * u_RotateMatrix * extrude.xy * (a_Size) + textrueOffsets);
  vec3 aPosition = a_Position;
  if(u_isMeter < 1.0) {
    // \u4E0D\u4EE5\u7C73\u4E3A\u5B9E\u9645\u5355\u4F4D
    offset = project_pixel(offset);
  } else {
    // \u4EE5\u7C73\u4E3A\u5B9E\u9645\u5355\u4F4D

    if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
      aPosition.xy += offset;
      offset.x = 0.0;
      offset.y = 0.0;
    }
  }


  // vec4 project_pos = project_position(vec4(a_Position.xy, 0.0, 1.0));
  vec4 project_pos = project_position(vec4(aPosition.xy, 0.0, 1.0));
  // gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offset, project_pixel(setPickingOrder(0.0)), 1.0));

  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
    gl_Position = u_Mvp * vec4(project_pos.xy + offset, 0.0, 1.0);
  } else {
    gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offset, project_pixel(setPickingOrder(0.0)), 1.0));
  }
 
  // gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offset, 0.0, 1.0));

  setPickingColor(a_PickingColor);
}
`,wme=function(e){Ct(n,e);var t=vme(n);function n(){var r;Ae(this,n);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return r=t.call.apply(t,[this].concat(i)),m(D(r),"meter2coord",1),m(D(r),"texture",void 0),m(D(r),"isMeter",!1),m(D(r),"radian",0),m(D(r),"updateTexture",function(){var s=r.rendererService.createTexture2D;if(r.texture){r.texture.update({data:r.iconService.getCanvas(),mag:"linear",min:"linear mipmap nearest",mipmap:!0}),r.layer.renderLayers();return}r.texture=s({data:r.iconService.getCanvas(),mag:V.LINEAR,min:V.LINEAR_MIPMAP_LINEAR,premultiplyAlpha:!1,width:1024,height:r.iconService.canvasHeight||128,mipmap:!0})}),r}return Oe(n,[{key:"getUninforms",value:function(){var a=this.layer.getLayerConfig(),i=a.opacity,o=i===void 0?1:i,s=a.offsets,l=s===void 0?[0,0]:s,u=a.rotation;this.rendererService.getDirty()&&this.texture.bind();var c=1;if((this.mapService.version==="GAODE2.x"||this.mapService.version==="GAODE1.x")&&(c=-1),this.radian=u!==void 0?c*Math.PI*u/180:c*Math.PI*(this.mapService.getRotation()%360)/180,this.dataTextureTest&&this.dataTextureNeedUpdate({opacity:o,offsets:l})){this.judgeStyleAttributes({opacity:o,offsets:l});var f=this.layer.getEncodedData(),d=this.calDataFrame(this.cellLength,f,this.cellProperties),p=d.data,h=d.width,g=d.height;this.rowCount=g,this.dataTexture=this.cellLength>0&&p.length>0?this.createTexture2D({flipY:!0,data:p,format:V.LUMINANCE,type:V.FLOAT,width:h,height:g}):this.createTexture2D({flipY:!0,data:[1],format:V.LUMINANCE,type:V.FLOAT,width:1,height:1})}return{u_isMeter:Number(this.isMeter),u_RotateMatrix:new Float32Array([Math.cos(this.radian),Math.sin(this.radian),-Math.sin(this.radian),Math.cos(this.radian)]),u_dataTexture:this.dataTexture,u_cellTypeLayout:this.getCellTypeLayout(),u_texture:this.texture,u_textSize:[1024,this.iconService.canvasHeight||128],u_opacity:Gn(o)?o:1,u_offsets:this.isOffsetStatic(l)?l:[0,0]}}},{key:"getAttribute",value:function(){return this.styleAttributeService.createAttributesAndIndices(this.layer.getEncodedData(),qo)}},{key:"initModels",value:function(){this.updateTexture(),this.iconService.on("imageUpdate",this.updateTexture);var a=this.layer.getLayerConfig(),i=a.unit,o=i===void 0?"l7size":i,s=this.mapService.version;return o==="meter"&&s!==dr.L7MAP&&s!==dr.GLOBEL&&(this.isMeter=!0,this.calMeter2Coord()),this.buildModels()}},{key:"calMeter2Coord",value:function(){var a=Le(this.layer.getSource().extent,4),i=a[0],o=a[1],s=a[2],l=a[3],u=[(i+s)/2,(o+l)/2],c=this.mapService.version;if(c===dr.MAPBOX&&window.mapboxgl.MercatorCoordinate){var f=window.mapboxgl.MercatorCoordinate.fromLngLat({lng:u[0],lat:u[1]},0),d=1,p=d*f.meterInMercatorCoordinateUnits(),h=new window.mapboxgl.MercatorCoordinate(f.x-p,f.y,f.z),g=h.toLngLat();this.meter2coord=u[0]-g.lng;return}var v=this.mapService.meterToCoord(u,[i,o]),b=this.mapService.meterToCoord(u,[s===i?s+.1:s,l===o?o+.1:l]);this.meter2coord=(v+b)/2,Boolean(this.meter2coord)||(this.meter2coord=7.70681090738883)}},{key:"buildModels",value:function(){var a=this.layer.getLayerConfig(),i=a.mask,o=i===void 0?!1:i,s=a.maskInside,l=s===void 0?!0:s,u=this.getShaders(),c=u.frag,f=u.vert,d=u.type;return[this.layer.buildLayerModel({moduleName:d,vertexShader:f,fragmentShader:c,triangulation:qo,depth:{enable:!1},blend:this.getBlend(),stencil:_i(o,l),cull:{enable:!0,face:mv(this.mapService.version)}})]}},{key:"getShaders",value:function(){return{frag:yme,vert:xme,type:"point_fillImage"}}},{key:"clearModels",value:function(){var a,i;this.iconService.off("imageUpdate",this.updateTexture),(a=this.texture)===null||a===void 0||a.destroy(),(i=this.dataTexture)===null||i===void 0||i.destroy()}},{key:"registerBuiltinAttributes",value:function(){var a=this;this.styleAttributeService.registerStyleAttribute({name:"rotate",type:vn.Attribute,descriptor:{name:"a_Rotate",buffer:{usage:V.DYNAMIC_DRAW,data:[],type:V.FLOAT},size:1,update:function(o,s,l,u){var c=o.rotate,f=c===void 0?0:c;return Array.isArray(f)?[f[0]]:[f]}}}),this.styleAttributeService.registerStyleAttribute({name:"uv",type:vn.Attribute,descriptor:{name:"a_Uv",buffer:{usage:V.DYNAMIC_DRAW,data:[],type:V.FLOAT},size:2,update:function(o,s,l,u){var c=a.iconService.getIconMap(),f=o.shape,d=c[f]||{x:0,y:0},p=d.x,h=d.y;return[p,h]}}}),this.styleAttributeService.registerStyleAttribute({name:"extrude",type:vn.Attribute,descriptor:{name:"a_Extrude",buffer:{usage:V.DYNAMIC_DRAW,data:[],type:V.FLOAT},size:3,update:function(o,s,l,u){var c=[1,1,0,-1,1,0,-1,-1,0,1,-1,0],f=u%4*3;return[c[f],c[f+1],c[f+2]]}}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:vn.Attribute,descriptor:{name:"a_Size",buffer:{usage:V.DYNAMIC_DRAW,data:[],type:V.FLOAT},size:1,update:function(o,s,l,u){var c=o.size,f=c===void 0?5:c;return Array.isArray(f)?[f[0]*a.meter2coord]:[f*a.meter2coord]}}})}}]),n}(Fa);function _me(e){var t=Eme();return function(){var r=Ee(e),a;if(t){var i=Ee(this).constructor;a=Reflect.construct(r,arguments,i)}else a=r.apply(this,arguments);return Mt(this,a)}}function Eme(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var kme=`
uniform sampler2D u_texture;
varying vec4 v_color;
varying vec2 v_uv;
uniform vec2 u_textSize;
uniform float u_opacity : 1;

varying mat4 styleMappingMat; // \u4F20\u9012\u4ECE\u7247\u5143\u4E2D\u4F20\u9012\u7684\u6620\u5C04\u6570\u636E

#pragma include "picking"

void main(){
      float opacity = styleMappingMat[0][0];
      float size = styleMappingMat[1][0];
      vec2 pos = v_uv / u_textSize + gl_PointCoord / u_textSize * 64.;
      vec4 textureColor;

      // Y = 0.299R + 0.587G + 0.114B // \u4EAE\u5EA6\u63D0\u53D6
     
      textureColor = texture2D(u_texture, pos);

      // Tip: \u53BB\u9664\u8FB9\u7F18\u90E8\u5206 mipmap \u5BFC\u81F4\u7684\u6DF7\u5408\u53D8\u6697
      float fragmengTocenter = distance(vec2(0.5), gl_PointCoord);
      if(fragmengTocenter >= 0.5) {
            float luma = 0.299 * textureColor.r + 0.587 * textureColor.g + 0.114 * textureColor.b;
            textureColor.a *= luma;
      }
      
      

      if(all(lessThan(v_color, vec4(1.0+0.00001))) && all(greaterThan(v_color, vec4(1.0-0.00001))) || v_color==vec4(1.0)){
            gl_FragColor= textureColor;
      }else {
            gl_FragColor= step(0.01, textureColor.z) * v_color;
      }

      gl_FragColor.a = gl_FragColor.a * opacity;
      gl_FragColor = filterColor(gl_FragColor);
}
`,Sme=`precision highp float;
attribute vec3 a_Position;
attribute vec4 a_Color;
attribute vec2 a_Uv;
attribute float a_Size;
varying vec4 v_color;
varying vec2 v_uv;
uniform mat4 u_ModelMatrix;
uniform mat4 u_Mvp;
uniform vec2 u_offsets;

uniform float u_opacity : 1;

varying mat4 styleMappingMat; // \u7528\u4E8E\u5C06\u5728\u9876\u70B9\u7740\u8272\u5668\u4E2D\u8BA1\u7B97\u597D\u7684\u6837\u5F0F\u503C\u4F20\u9012\u7ED9\u7247\u5143

#pragma include "styleMapping"
#pragma include "styleMappingCalOpacity"

#pragma include "projection"
#pragma include "picking"

void main() {
  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97
  styleMappingMat = mat4(
    0.0, 0.0, 0.0, 0.0, // opacity - strokeOpacity - strokeWidth - empty
    0.0, 0.0, 0.0, 0.0, // strokeR - strokeG - strokeB - strokeA
    0.0, 0.0, 0.0, 0.0, // offsets[0] - offsets[1]
    0.0, 0.0, 0.0, 0.0
  );

  float rowCount = u_cellTypeLayout[0][0];    // \u5F53\u524D\u7684\u6570\u636E\u7EB9\u7406\u6709\u51E0\u884C
  float columnCount = u_cellTypeLayout[0][1]; // \u5F53\u770B\u5230\u6570\u636E\u7EB9\u7406\u6709\u51E0\u5217
  float columnWidth = 1.0/columnCount;  // \u5217\u5BBD
  float rowHeight = 1.0/rowCount;       // \u884C\u9AD8
  float cellCount = calCellCount(); // opacity - strokeOpacity - strokeWidth - stroke - offsets
  float id = a_vertexId; // \u7B2Cn\u4E2A\u9876\u70B9
  float cellCurrentRow = floor(id * cellCount / columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u884C
  float cellCurrentColumn = mod(id * cellCount, columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u5217
  
  // cell \u56FA\u5B9A\u987A\u5E8F opacity -> strokeOpacity -> strokeWidth -> stroke ... 
  // \u6309\u987A\u5E8F\u4ECE cell \u4E2D\u53D6\u503C\u3001\u82E5\u6CA1\u6709\u5219\u81EA\u52A8\u5F80\u4E0B\u53D6\u503C
  float textureOffset = 0.0; // \u5728 cell \u4E2D\u53D6\u503C\u7684\u504F\u79FB\u91CF

  vec2 opacityAndOffset = calOpacityAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);
  styleMappingMat[0][0] = opacityAndOffset.r;
  textureOffset = opacityAndOffset.g;

  styleMappingMat[1][0] = a_Size;

  vec2 textrueOffsets = vec2(0.0, 0.0);
  if(hasOffsets()) {
    vec2 valueXPos = nextPos(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset);
    textrueOffsets.r = pos2value(valueXPos, columnWidth, rowHeight); // x
    textureOffset += 1.0;

    vec2 valueYPos = nextPos(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset);
    textrueOffsets.g = pos2value(valueYPos, columnWidth, rowHeight); // x
    textureOffset += 1.0;
  } else {
    textrueOffsets = u_offsets;
  }

  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97
   v_color = a_Color;
   v_uv = a_Uv;
   vec4 project_pos = project_position(vec4(a_Position, 1.0));
   
  //  vec2 offset = project_pixel(u_offsets);
  vec2 offset = project_pixel(textrueOffsets);

  //  gl_Position = project_common_position_to_clipspace(vec4(vec2(project_pos.xy + offset),project_pos.z, 1.0));

  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
    gl_Position = u_Mvp * vec4(vec2(project_pos.xy + offset),project_pos.z, 1.0);
  } else {
    gl_Position = project_common_position_to_clipspace(vec4(vec2(project_pos.xy + offset),project_pos.z, 1.0));
  }
  gl_PointSize = a_Size * 2.0 * u_DevicePixelRatio;

  setPickingColor(a_PickingColor);
}
`,Cme=function(e){Ct(n,e);var t=_me(n);function n(){var r;Ae(this,n);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return r=t.call.apply(t,[this].concat(i)),m(D(r),"texture",void 0),r}return Oe(n,[{key:"getUninforms",value:function(){var a=this.layer.getLayerConfig(),i=a.opacity;return{u_opacity:i||1,u_texture:this.texture,u_textSize:[1024,this.iconService.canvasHeight||128]}}},{key:"initModels",value:function(){var a=this;return this.initIconFontGlyphs(),this.registerBuiltinAttributes(),this.updateTexture(),this.iconService.on("imageUpdate",function(){a.updateTexture(),a.layer.render()}),[this.layer.buildLayerModel({moduleName:"pointiconImage",vertexShader:Sme,fragmentShader:kme,triangulation:PN,primitive:V.POINTS,depth:{enable:!1},blend:this.getBlend()})]}},{key:"clearModels",value:function(){var a;(a=this.dataTexture)===null||a===void 0||a.destroy()}},{key:"registerBuiltinAttributes",value:function(){var a=this;this.styleAttributeService.registerStyleAttribute({name:"size",type:vn.Attribute,descriptor:{name:"a_Size",buffer:{usage:V.DYNAMIC_DRAW,data:[],type:V.FLOAT},size:1,update:function(o,s,l,u){var c=o.size;return Array.isArray(c)?[c[0]]:[c]}}}),this.styleAttributeService.registerStyleAttribute({name:"uv",type:vn.Attribute,descriptor:{name:"a_Uv",buffer:{usage:V.DYNAMIC_DRAW,data:[],type:V.FLOAT},size:2,update:function(o,s,l,u){var c=a.fontService.mapping,f=o.shape,d=a.fontService.getGlyph(f),p=c[d],h=p.x,g=p.y;return[h,g]}}})}},{key:"updateTexture",value:function(){var a=this.rendererService.createTexture2D,i=this.fontService.canvas;this.texture=a({data:i,mag:V.LINEAR,min:V.LINEAR,width:i.width,height:i.height})}},{key:"initIconFontGlyphs",value:function(){var a=this,i=this.layer.getLayerConfig(),o=i.fontWeight,s=o===void 0?"normal":o,l=i.fontFamily,u=l===void 0?"sans-serif":l,c=this.layer.getEncodedData(),f=[];c.forEach(function(d){var p=d.shape,h=p===void 0?"":p;h=h.toString();var g=a.fontService.getGlyph(h);f.indexOf(g)===-1&&f.push(g)}),this.fontService.setFontOptions({characterSet:f,fontWeight:s,fontFamily:u,fontSize:48})}}]),n}(Fa);function Tme(e){var t=Ame();return function(){var r=Ee(e),a;if(t){var i=Ee(this).constructor;a=Reflect.construct(r,arguments,i)}else a=r.apply(this,arguments);return Mt(this,a)}}function Ame(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var Ome=`
uniform sampler2D u_texture;
varying vec4 v_color;
varying vec2 v_uv;
uniform vec2 u_textSize;
uniform float u_opacity : 1;

varying mat4 styleMappingMat; // \u4F20\u9012\u4ECE\u7247\u5143\u4E2D\u4F20\u9012\u7684\u6620\u5C04\u6570\u636E

#pragma include "picking"

void main(){
      float opacity = styleMappingMat[0][0];
      float size = styleMappingMat[1][0];
      vec2 pos = v_uv / u_textSize + gl_PointCoord / u_textSize * 64.;
      vec4 textureColor;

      // Y = 0.299R + 0.587G + 0.114B // \u4EAE\u5EA6\u63D0\u53D6
     
      textureColor = texture2D(u_texture, pos);

      // Tip: \u53BB\u9664\u8FB9\u7F18\u90E8\u5206 mipmap \u5BFC\u81F4\u7684\u6DF7\u5408\u53D8\u6697
      float fragmengTocenter = distance(vec2(0.5), gl_PointCoord);
      if(fragmengTocenter >= 0.5) {
            float luma = 0.299 * textureColor.r + 0.587 * textureColor.g + 0.114 * textureColor.b;
            textureColor.a *= luma;
      }
      
      

      if(all(lessThan(v_color, vec4(1.0+0.00001))) && all(greaterThan(v_color, vec4(1.0-0.00001))) || v_color==vec4(1.0)){
            gl_FragColor= textureColor;
      }else {
            gl_FragColor= step(0.01, textureColor.z) * v_color;
      }

      gl_FragColor.a = gl_FragColor.a * opacity;
      gl_FragColor = filterColor(gl_FragColor);
}
`,Mme=`precision highp float;
attribute vec3 a_Position;
attribute vec4 a_Color;
attribute vec2 a_Uv;
attribute float a_Size;
varying vec4 v_color;
varying vec2 v_uv;
uniform mat4 u_ModelMatrix;
uniform mat4 u_Mvp;
uniform vec2 u_offsets;

uniform float u_opacity : 1;

varying mat4 styleMappingMat; // \u7528\u4E8E\u5C06\u5728\u9876\u70B9\u7740\u8272\u5668\u4E2D\u8BA1\u7B97\u597D\u7684\u6837\u5F0F\u503C\u4F20\u9012\u7ED9\u7247\u5143

#pragma include "styleMapping"
#pragma include "styleMappingCalOpacity"

#pragma include "projection"
#pragma include "picking"

void main() {
  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97
  styleMappingMat = mat4(
    0.0, 0.0, 0.0, 0.0, // opacity - strokeOpacity - strokeWidth - empty
    0.0, 0.0, 0.0, 0.0, // strokeR - strokeG - strokeB - strokeA
    0.0, 0.0, 0.0, 0.0, // offsets[0] - offsets[1]
    0.0, 0.0, 0.0, 0.0
  );

  float rowCount = u_cellTypeLayout[0][0];    // \u5F53\u524D\u7684\u6570\u636E\u7EB9\u7406\u6709\u51E0\u884C
  float columnCount = u_cellTypeLayout[0][1]; // \u5F53\u770B\u5230\u6570\u636E\u7EB9\u7406\u6709\u51E0\u5217
  float columnWidth = 1.0/columnCount;  // \u5217\u5BBD
  float rowHeight = 1.0/rowCount;       // \u884C\u9AD8
  float cellCount = calCellCount(); // opacity - strokeOpacity - strokeWidth - stroke - offsets
  float id = a_vertexId; // \u7B2Cn\u4E2A\u9876\u70B9
  float cellCurrentRow = floor(id * cellCount / columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u884C
  float cellCurrentColumn = mod(id * cellCount, columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u5217
  
  // cell \u56FA\u5B9A\u987A\u5E8F opacity -> strokeOpacity -> strokeWidth -> stroke ... 
  // \u6309\u987A\u5E8F\u4ECE cell \u4E2D\u53D6\u503C\u3001\u82E5\u6CA1\u6709\u5219\u81EA\u52A8\u5F80\u4E0B\u53D6\u503C
  float textureOffset = 0.0; // \u5728 cell \u4E2D\u53D6\u503C\u7684\u504F\u79FB\u91CF

  vec2 opacityAndOffset = calOpacityAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);
  styleMappingMat[0][0] = opacityAndOffset.r;
  textureOffset = opacityAndOffset.g;

  styleMappingMat[1][0] = a_Size;

  vec2 textrueOffsets = vec2(0.0, 0.0);
  if(hasOffsets()) {
    vec2 valueXPos = nextPos(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset);
    textrueOffsets.r = pos2value(valueXPos, columnWidth, rowHeight); // x
    textureOffset += 1.0;

    vec2 valueYPos = nextPos(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset);
    textrueOffsets.g = pos2value(valueYPos, columnWidth, rowHeight); // x
    textureOffset += 1.0;
  } else {
    textrueOffsets = u_offsets;
  }

  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97
   v_color = a_Color;
   v_uv = a_Uv;
   vec4 project_pos = project_position(vec4(a_Position, 1.0));
   
  //  vec2 offset = project_pixel(u_offsets);
  vec2 offset = project_pixel(textrueOffsets);

  //  gl_Position = project_common_position_to_clipspace(vec4(vec2(project_pos.xy + offset),project_pos.z, 1.0));

  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
    gl_Position = u_Mvp * vec4(vec2(project_pos.xy + offset),project_pos.z, 1.0);
  } else {
    gl_Position = project_common_position_to_clipspace(vec4(vec2(project_pos.xy + offset),project_pos.z, 1.0));
  }
  gl_PointSize = a_Size * 2.0 * u_DevicePixelRatio;

  setPickingColor(a_PickingColor);
}
`,Rme=function(e){Ct(n,e);var t=Tme(n);function n(){var r;Ae(this,n);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return r=t.call.apply(t,[this].concat(i)),m(D(r),"texture",void 0),m(D(r),"updateTexture",function(){var s=r.rendererService.createTexture2D;if(r.texture){r.texture.update({data:r.iconService.getCanvas(),mag:"linear",min:"linear mipmap nearest",mipmap:!0}),r.layer.renderLayers();return}r.texture=s({data:r.iconService.getCanvas(),mag:V.LINEAR,min:V.LINEAR_MIPMAP_LINEAR,premultiplyAlpha:!1,width:1024,height:r.iconService.canvasHeight||128,mipmap:!0})}),r}return Oe(n,[{key:"getUninforms",value:function(){var a=this.layer.getLayerConfig(),i=a.opacity,o=i===void 0?1:i,s=a.offsets,l=s===void 0?[0,0]:s;if(this.rendererService.getDirty()&&this.texture.bind(),this.dataTextureTest&&this.dataTextureNeedUpdate({opacity:o,offsets:l})){this.judgeStyleAttributes({opacity:o,offsets:l});var u=this.layer.getEncodedData(),c=this.calDataFrame(this.cellLength,u,this.cellProperties),f=c.data,d=c.width,p=c.height;this.rowCount=p,this.dataTexture=this.cellLength>0&&f.length>0?this.createTexture2D({flipY:!0,data:f,format:V.LUMINANCE,type:V.FLOAT,width:d,height:p}):this.createTexture2D({flipY:!0,data:[1],format:V.LUMINANCE,type:V.FLOAT,width:1,height:1})}return{u_dataTexture:this.dataTexture,u_cellTypeLayout:this.getCellTypeLayout(),u_texture:this.texture,u_textSize:[1024,this.iconService.canvasHeight||128],u_opacity:Gn(o)?o:1,u_offsets:this.isOffsetStatic(l)?l:[0,0]}}},{key:"initModels",value:function(){return this.registerBuiltinAttributes(),this.updateTexture(),this.iconService.on("imageUpdate",this.updateTexture),this.buildModels()}},{key:"clearModels",value:function(){var a,i;(a=this.texture)===null||a===void 0||a.destroy(),(i=this.dataTexture)===null||i===void 0||i.destroy(),this.iconService.off("imageUpdate",this.updateTexture)}},{key:"buildModels",value:function(){var a=this.layer.getLayerConfig(),i=a.mask,o=i===void 0?!1:i,s=a.maskInside,l=s===void 0?!0:s;return[this.layer.buildLayerModel({moduleName:"pointImage",vertexShader:Mme,fragmentShader:Ome,triangulation:PN,primitive:V.POINTS,depth:{enable:!1},blend:this.getBlend(),stencil:_i(o,l)})]}},{key:"registerBuiltinAttributes",value:function(){var a=this;this.styleAttributeService.registerStyleAttribute({name:"size",type:vn.Attribute,descriptor:{name:"a_Size",buffer:{usage:V.DYNAMIC_DRAW,data:[],type:V.FLOAT},size:1,update:function(o,s,l,u){var c=o.size,f=c===void 0?5:c;return Array.isArray(f)?[f[0]]:[f]}}}),this.styleAttributeService.registerStyleAttribute({name:"uv",type:vn.Attribute,descriptor:{name:"a_Uv",buffer:{usage:V.DYNAMIC_DRAW,data:[],type:V.FLOAT},size:2,update:function(o,s,l,u){var c=a.iconService.getIconMap(),f=o.shape,d=c[f]||{x:0,y:0},p=d.x,h=d.y;return[p,h]}}})}}]),n}(Fa);function Pme(e){var t=Ime();return function(){var r=Ee(e),a;if(t){var i=Ee(this).constructor;a=Reflect.construct(r,arguments,i)}else a=r.apply(this,arguments);return Mt(this,a)}}function Ime(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var Lme=`
uniform float u_opacity : 1;
uniform vec2 u_offsets;
varying vec4 v_color;
varying mat4 styleMappingMat; // \u4F20\u9012\u4ECE\u7247\u5143\u4E2D\u4F20\u9012\u7684\u6620\u5C04\u6570\u636E

#pragma include "picking"
void main() {
  float opacity = styleMappingMat[0][0];

  gl_FragColor = v_color;
  // gl_FragColor.a =gl_FragColor.a * u_opacity;
  gl_FragColor.a =gl_FragColor.a * opacity;
  gl_FragColor = filterColor(gl_FragColor);
}
`,Nme=`
attribute vec3 a_Position;
uniform mat4 u_ModelMatrix;
uniform mat4 u_Mvp;
attribute float a_Size;
attribute vec4 a_Color;
varying vec4 v_color;

uniform float u_opacity : 1;
uniform vec2 u_offsets;

varying mat4 styleMappingMat; // \u7528\u4E8E\u5C06\u5728\u9876\u70B9\u7740\u8272\u5668\u4E2D\u8BA1\u7B97\u597D\u7684\u6837\u5F0F\u503C\u4F20\u9012\u7ED9\u7247\u5143

#pragma include "styleMapping"
#pragma include "styleMappingCalOpacity"

#pragma include "projection"
#pragma include "picking"
#pragma include "project"
void main() {
  v_color = a_Color;

  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97
styleMappingMat = mat4(
    0.0, 0.0, 0.0, 0.0, // opacity - strokeOpacity - strokeWidth - empty
    0.0, 0.0, 0.0, 0.0, // strokeR - strokeG - strokeB - strokeA
    0.0, 0.0, 0.0, 0.0, // offsets[0] - offsets[1]
    0.0, 0.0, 0.0, 0.0
  );

  float rowCount = u_cellTypeLayout[0][0];    // \u5F53\u524D\u7684\u6570\u636E\u7EB9\u7406\u6709\u51E0\u884C
  float columnCount = u_cellTypeLayout[0][1]; // \u5F53\u770B\u5230\u6570\u636E\u7EB9\u7406\u6709\u51E0\u5217
  float columnWidth = 1.0/columnCount;  // \u5217\u5BBD
  float rowHeight = 1.0/rowCount;       // \u884C\u9AD8
  float cellCount = calCellCount(); // opacity - strokeOpacity - strokeWidth - stroke - offsets
  float id = a_vertexId; // \u7B2Cn\u4E2A\u9876\u70B9
  float cellCurrentRow = floor(id * cellCount / columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u884C
  float cellCurrentColumn = mod(id * cellCount, columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u5217
  
  // cell \u56FA\u5B9A\u987A\u5E8F opacity -> strokeOpacity -> strokeWidth -> stroke ... 
  // \u6309\u987A\u5E8F\u4ECE cell \u4E2D\u53D6\u503C\u3001\u82E5\u6CA1\u6709\u5219\u81EA\u52A8\u5F80\u4E0B\u53D6\u503C
  float textureOffset = 0.0; // \u5728 cell \u4E2D\u53D6\u503C\u7684\u504F\u79FB\u91CF

  vec2 opacityAndOffset = calOpacityAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);
  styleMappingMat[0][0] = opacityAndOffset.r;
  textureOffset = opacityAndOffset.g;

  vec2 textrueOffsets = vec2(0.0, 0.0);
  if(hasOffsets()) {
    vec2 valueXPos = nextPos(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset);
    textrueOffsets.r = pos2value(valueXPos, columnWidth, rowHeight); // x
    textureOffset += 1.0;

    vec2 valueYPos = nextPos(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset);
    textrueOffsets.g = pos2value(valueYPos, columnWidth, rowHeight); // x
    textureOffset += 1.0;
  } else {
    textrueOffsets = u_offsets;
  }

  // cal style mapping
  
  // vec2 offset = project_pixel(u_offsets);
  vec2 offset = project_pixel(textrueOffsets);
  // vec4 project_pos = project_position(vec4(a_Position, 1.0)) + vec4(a_Size / 2.,-a_Size /2.,0.,0.);
  // gl_Position = project_common_position_to_clipspace(vec4(vec2(project_pos.xy+offset),project_pos.z,project_pos.w));\\
  // 
  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
    // vec2 offset = project_pixel((u_offsets));
    gl_Position = u_Mvp * vec4(a_Position.xy + offset, a_Position.z, 1.0);
  } else { // else
    // vec2 offset = project_pixel(u_offsets);
    vec4 project_pos = project_position(vec4(a_Position, 1.0)) + vec4(a_Size / 2.,-a_Size /2.,0.,0.);
    gl_Position = project_common_position_to_clipspace(vec4(vec2(project_pos.xy+offset),project_pos.z,project_pos.w));
  }

  gl_PointSize = a_Size * 2.0 * u_DevicePixelRatio;
  setPickingColor(a_PickingColor);
}
`;function fO(e){var t=e.coordinates;return{vertices:Ue(t),indices:[0],size:t.length}}var Fme=function(e){Ct(n,e);var t=Pme(n);function n(){return Ae(this,n),t.apply(this,arguments)}return Oe(n,[{key:"getDefaultStyle",value:function(){return{blend:"additive"}}},{key:"getUninforms",value:function(){var a=this.layer.getLayerConfig(),i=a.opacity,o=i===void 0?1:i,s=a.offsets,l=s===void 0?[0,0]:s;if(this.dataTextureTest&&this.dataTextureNeedUpdate({opacity:o,offsets:l})){this.judgeStyleAttributes({opacity:o,offsets:l});var u=this.layer.getEncodedData(),c=this.calDataFrame(this.cellLength,u,this.cellProperties),f=c.data,d=c.width,p=c.height;this.rowCount=p,this.dataTexture=this.cellLength>0&&f.length>0?this.createTexture2D({flipY:!0,data:f,format:V.LUMINANCE,type:V.FLOAT,width:d,height:p}):this.createTexture2D({flipY:!0,data:[1],format:V.LUMINANCE,type:V.FLOAT,width:1,height:1})}return{u_dataTexture:this.dataTexture,u_cellTypeLayout:this.getCellTypeLayout(),u_opacity:Gn(o)?o:1,u_offsets:this.isOffsetStatic(l)?l:[0,0]}}},{key:"initModels",value:function(){return this.buildModels()}},{key:"buildModels",value:function(){var a=this.layer.getLayerConfig(),i=a.mask,o=i===void 0?!1:i,s=a.maskInside,l=s===void 0?!0:s;return this.layer.triangulation=fO,[this.layer.buildLayerModel({moduleName:"normalpoint",vertexShader:Nme,fragmentShader:Lme,triangulation:fO,depth:{enable:!1},primitive:V.POINTS,blend:this.getBlend(),stencil:_i(o,l)})]}},{key:"clearModels",value:function(){var a;(a=this.dataTexture)===null||a===void 0||a.destroy()}},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"size",type:vn.Attribute,descriptor:{name:"a_Size",buffer:{usage:V.DYNAMIC_DRAW,data:[],type:V.FLOAT},size:1,update:function(i,o,s,l){var u=i.size,c=u===void 0?1:u;return Array.isArray(c)?[c[0]]:[c]}}})}},{key:"defaultStyleOptions",value:function(){return{blend:Hi.additive}}}]),n}(Fa);function Dme(e){var t=Bme();return function(){var r=Ee(e),a;if(t){var i=Ee(this).constructor;a=Reflect.construct(r,arguments,i)}else a=r.apply(this,arguments);return Mt(this,a)}}function Bme(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var zme=`
uniform float u_additive;

varying mat4 styleMappingMat; // \u4F20\u9012\u4ECE\u7247\u5143\u4E2D\u4F20\u9012\u7684\u6620\u5C04\u6570\u636E

varying vec4 v_data;
varying vec4 v_color;
varying float v_radius;

#pragma include "sdf_2d"
#pragma include "picking"

void main() {
  int shape = int(floor(v_data.w + 0.5));

  vec4 textrueStroke = vec4(
    styleMappingMat[1][0],
    styleMappingMat[1][1],
    styleMappingMat[1][2],
    styleMappingMat[1][3]
  );

  float opacity = styleMappingMat[0][0];

  lowp float antialiasblur = v_data.z;
  float r = v_radius / (v_radius);

  float outer_df = sdCircle(v_data.xy, 1.0);
  float inner_df = sdCircle(v_data.xy, r);

  float opacity_t = smoothstep(0.0, antialiasblur, outer_df);

  gl_FragColor = vec4(v_color.rgb, v_color.a * opacity);

  if(u_additive > 0.0) {
    gl_FragColor *= opacity_t;
  } else {
    gl_FragColor.a *= opacity_t;
  }

  if(gl_FragColor.a > 0.0) {
    gl_FragColor = filterColor(gl_FragColor);
  }

  vec2 extrude =  styleMappingMat[2].ba;
  vec2 dir = normalize(extrude);
  vec2 baseDir = vec2(1.0, 0.0);
  float pi = 3.14159265359;
  // full circle
  // float rades = dot(dir, baseDir);
  // float flag = sign(dir.y);
  // float radar_v = (flag - 1.0) * -0.5 + flag * acos(rades)/pi/2.0;
  
  // half circle
  float flag = sign(dir.y);
  float rades = dot(dir, baseDir);
  float radar_v = (flag - 1.0) * -0.5 * acos(rades)/pi;
  // simple AA
  if(radar_v > 0.99) {
    radar_v = 1.0 - (radar_v - 0.99)/0.01;
  }

  gl_FragColor.a *= radar_v;
}
`,Ume=`attribute vec4 a_Color;
attribute vec3 a_Position;
attribute vec3 a_Extrude;
attribute float a_Size;
attribute float a_Shape;
uniform float u_speed: 1.0;
uniform float u_time;

varying mat4 styleMappingMat; // \u7528\u4E8E\u5C06\u5728\u9876\u70B9\u7740\u8272\u5668\u4E2D\u8BA1\u7B97\u597D\u7684\u6837\u5F0F\u503C\u4F20\u9012\u7ED9\u7247\u5143

uniform mat4 u_ModelMatrix;
uniform mat4 u_Mvp;
uniform float u_isMeter;

varying vec4 v_data;
varying vec4 v_color;
varying float v_radius;

uniform float u_opacity : 1;
uniform vec2 u_offsets;

#pragma include "styleMapping"
#pragma include "styleMappingCalOpacity"

#pragma include "projection"
#pragma include "picking"

void main() {
  vec3 extrude = a_Extrude;
  float shape_type = a_Shape;
  float newSize = setPickingSize(a_Size);

  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97
  styleMappingMat = mat4(
    0.0, 0.0, 0.0, 0.0, // opacity - empty - empty - empty
    0.0, 0.0, 0.0, 0.0, // empty - empty - empty - empty
    0.0, 0.0, 0.0, 0.0, // offsets[0] - offsets[1] - a_Extrude.x - a_Extrude.y
    0.0, 0.0, 0.0, 0.0  // 
  );

  float time = u_time * u_speed;
  mat2 rotateMatrix = mat2( 
    cos(time), sin(time), 
    -sin(time), cos(time)
  );
  styleMappingMat[2].ba = rotateMatrix * a_Extrude.xy;

  float rowCount = u_cellTypeLayout[0][0];    // \u5F53\u524D\u7684\u6570\u636E\u7EB9\u7406\u6709\u51E0\u884C
  float columnCount = u_cellTypeLayout[0][1]; // \u5F53\u770B\u5230\u6570\u636E\u7EB9\u7406\u6709\u51E0\u5217
  float columnWidth = 1.0/columnCount;  // \u5217\u5BBD
  float rowHeight = 1.0/rowCount;       // \u884C\u9AD8
  float cellCount = calCellCount(); // opacity - strokeOpacity - strokeWidth - stroke - offsets
  float id = a_vertexId; // \u7B2Cn\u4E2A\u9876\u70B9
  float cellCurrentRow = floor(id * cellCount / columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u884C
  float cellCurrentColumn = mod(id * cellCount, columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u5217
  
  // cell \u56FA\u5B9A\u987A\u5E8F opacity -> strokeOpacity -> empty -> empty ... 
  // \u6309\u987A\u5E8F\u4ECE cell \u4E2D\u53D6\u503C\u3001\u82E5\u6CA1\u6709\u5219\u81EA\u52A8\u5F80\u4E0B\u53D6\u503C
  float textureOffset = 0.0; // \u5728 cell \u4E2D\u53D6\u503C\u7684\u504F\u79FB\u91CF

  vec2 opacityAndOffset = calOpacityAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);
  styleMappingMat[0][0] = opacityAndOffset.r;
  textureOffset = opacityAndOffset.g;


  vec2 textrueOffsets = vec2(0.0, 0.0);
  if(hasOffsets()) {
    vec2 valueXPos = nextPos(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset);
    textrueOffsets.r = pos2value(valueXPos, columnWidth, rowHeight); // x
    textureOffset += 1.0;

    vec2 valueYPos = nextPos(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset);
    textrueOffsets.g = pos2value(valueYPos, columnWidth, rowHeight); // x
    textureOffset += 1.0;
  } else {
    textrueOffsets = u_offsets;
  }

  // cal style mapping

  // unpack color(vec2)
  v_color = a_Color;

  // radius(16-bit)
  v_radius = newSize;

  // anti-alias
  float blur = 0.0;
  float antialiasblur = -max(2.0 / u_DevicePixelRatio / a_Size, blur);

  vec2 offset = (extrude.xy * (newSize) + textrueOffsets);
  vec3 aPosition = a_Position;
  if(u_isMeter < 1.0) {
    // \u4E0D\u4EE5\u7C73\u4E3A\u5B9E\u9645\u5355\u4F4D
    offset = project_pixel(offset);
  } else {
    // \u4EE5\u7C73\u4E3A\u5B9E\u9645\u5355\u4F4D
    antialiasblur *= pow(19.0 - u_Zoom, 2.0);
    antialiasblur = max(antialiasblur, -0.01);
    // offset *= 0.5;

    if(u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT || u_CoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSET) {
      aPosition.xy += offset;
      offset.x = 0.0;
      offset.y = 0.0;
    }
  }

  v_data = vec4(extrude.x, extrude.y, antialiasblur,shape_type);

  vec4 project_pos = project_position(vec4(aPosition.xy, 0.0, 1.0));

  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
    gl_Position = u_Mvp * vec4(project_pos.xy + offset, 0.0, 1.0);
  } else {
    gl_Position = project_common_position_to_clipspace(vec4(project_pos.xy + offset, project_pixel(setPickingOrder(0.0)), 1.0));
  }

  setPickingColor(a_PickingColor);
}
`,$me=function(e){Ct(n,e);var t=Dme(n);function n(){var r;Ae(this,n);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return r=t.call.apply(t,[this].concat(i)),m(D(r),"meter2coord",1),m(D(r),"isMeter",!1),r}return Oe(n,[{key:"getUninforms",value:function(){var a=this.layer.getLayerConfig(),i=a.opacity,o=i===void 0?1:i,s=a.offsets,l=s===void 0?[0,0]:s,u=a.blend,c=a.speed,f=c===void 0?1:c;if(this.dataTextureTest&&this.dataTextureNeedUpdate({opacity:o,offsets:l})){this.judgeStyleAttributes({opacity:o,offsets:l});var d=this.layer.getEncodedData(),p=this.calDataFrame(this.cellLength,d,this.cellProperties),h=p.data,g=p.width,v=p.height;this.rowCount=v,this.dataTexture=this.cellLength>0&&h.length>0?this.createTexture2D({flipY:!0,data:h,format:V.LUMINANCE,type:V.FLOAT,width:g,height:v}):this.createTexture2D({flipY:!0,data:[1],format:V.LUMINANCE,type:V.FLOAT,width:1,height:1})}return{u_isMeter:Number(this.isMeter),u_speed:f,u_additive:u==="additive"?1:0,u_dataTexture:this.dataTexture,u_cellTypeLayout:this.getCellTypeLayout(),u_opacity:Gn(o)?o:1,u_offsets:this.isOffsetStatic(l)?l:[0,0]}}},{key:"getAnimateUniforms",value:function(){var a=this.layer.getLayerConfig(),i=a.animateOption,o=i===void 0?{enable:!1}:i;return{u_aimate:this.animateOption2Array(o),u_time:this.layer.getLayerAnimateTime()}}},{key:"getAttribute",value:function(){return this.styleAttributeService.createAttributesAndIndices(this.layer.getEncodedData(),qo)}},{key:"initModels",value:function(){var a=this.layer.getLayerConfig(),i=a.unit,o=i===void 0?"l7size":i,s=this.mapService.version;return o==="meter"&&s!==dr.L7MAP&&s!==dr.GLOBEL&&(this.isMeter=!0,this.calMeter2Coord()),this.buildModels()}},{key:"calMeter2Coord",value:function(){var a=Le(this.layer.getSource().extent,4),i=a[0],o=a[1],s=a[2],l=a[3],u=[(i+s)/2,(o+l)/2],c=this.mapService.version;if(c===dr.MAPBOX&&window.mapboxgl.MercatorCoordinate){var f=window.mapboxgl.MercatorCoordinate.fromLngLat({lng:u[0],lat:u[1]},0),d=1,p=d*f.meterInMercatorCoordinateUnits(),h=new window.mapboxgl.MercatorCoordinate(f.x-p,f.y,f.z),g=h.toLngLat();this.meter2coord=u[0]-g.lng;return}var v=this.mapService.meterToCoord(u,[i,o]),b=this.mapService.meterToCoord(u,[s===i?s+.1:s,l===o?o+.1:l]);this.meter2coord=(v+b)/2,Boolean(this.meter2coord)||(this.meter2coord=7.70681090738883)}},{key:"buildModels",value:function(){var a=this.layer.getLayerConfig(),i=a.mask,o=i===void 0?!1:i,s=a.maskInside,l=s===void 0?!0:s,u=this.getShaders(),c=u.frag,f=u.vert,d=u.type;return[this.layer.buildLayerModel({moduleName:d,vertexShader:f,fragmentShader:c,triangulation:qo,depth:{enable:!1},blend:this.getBlend(),stencil:_i(o,l)})]}},{key:"getShaders",value:function(){return{frag:zme,vert:Ume,type:"point_radar"}}},{key:"clearModels",value:function(){var a;(a=this.dataTexture)===null||a===void 0||a.destroy()}},{key:"animateOption2Array",value:function(a){return[a.enable?0:1,a.speed||1,a.rings||3,0]}},{key:"registerBuiltinAttributes",value:function(){var a=this;this.styleAttributeService.registerStyleAttribute({name:"extrude",type:vn.Attribute,descriptor:{name:"a_Extrude",buffer:{usage:V.DYNAMIC_DRAW,data:[],type:V.FLOAT},size:3,update:function(o,s,l,u){var c;c=[1,1,0,-1,1,0,-1,-1,0,1,-1,0];var f=u%4*3;return[c[f],c[f+1],c[f+2]]}}}),this.styleAttributeService.registerStyleAttribute({name:"size",type:vn.Attribute,descriptor:{name:"a_Size",buffer:{usage:V.DYNAMIC_DRAW,data:[],type:V.FLOAT},size:1,update:function(o,s,l,u){var c=o.size,f=c===void 0?5:c;return Array.isArray(f)?[f[0]*a.meter2coord]:[f*a.meter2coord]}}}),this.styleAttributeService.registerStyleAttribute({name:"shape",type:vn.Attribute,descriptor:{name:"a_Shape",buffer:{usage:V.DYNAMIC_DRAW,data:[],type:V.FLOAT},size:1,update:function(o,s,l,u){var c=o.shape,f=c===void 0?2:c,d=a.layer.getLayerConfig().shape2d,p=d.indexOf(f);return[p]}}})}}]),n}(Fa);function Vme(e){var t=jme();return function(){var r=Ee(e),a;if(t){var i=Ee(this).constructor;a=Reflect.construct(r,arguments,i)}else a=r.apply(this,arguments);return Mt(this,a)}}function jme(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var Gme=`
uniform float u_opacity : 1;
uniform vec2 u_offsets;
uniform float u_additive;

uniform float u_stroke_opacity : 1;

uniform vec4 u_stroke_color : [0.0, 0.0, 0.0, 0.0];

varying vec4 v_color;
varying mat4 styleMappingMat; // \u4F20\u9012\u4ECE\u7247\u5143\u4E2D\u4F20\u9012\u7684\u6620\u5C04\u6570\u636E
varying float v_blur;
varying float v_innerRadius;

#pragma include "picking"
void main() {
  vec2 center = vec2(0.5);

  float opacity = styleMappingMat[0][0];
  // Tip: \u7247\u5143\u5230\u4E2D\u5FC3\u70B9\u7684\u8DDD\u79BB 0 - 1
  float fragmengTocenter = distance(center, gl_PointCoord) * 2.0;
  // Tip: \u7247\u5143\u7684\u526A\u5207\u6210\u5706\u5F62
  float circleClipOpacity = 1.0 - smoothstep(v_blur, 1.0, fragmengTocenter);


  if(v_innerRadius < 0.99) {
    // \u5F53\u5B58\u5728 stroke \u4E14 stroke > 0.01
    float blurWidth = (1.0 - v_blur)/2.0;
    vec4 stroke = vec4(u_stroke_color.rgb, u_stroke_opacity);
    if(fragmengTocenter > v_innerRadius + blurWidth) {
      gl_FragColor = stroke;
    } else if(fragmengTocenter > v_innerRadius - blurWidth){
      float mixR = (fragmengTocenter - (v_innerRadius - blurWidth)) / (blurWidth * 2.0);
      gl_FragColor = mix(v_color, stroke, mixR);
    } else {
      gl_FragColor = v_color;
    }
  } else {
    // \u5F53\u4E0D\u5B58\u5728 stroke \u6216 stroke <= 0.01
    gl_FragColor = v_color;
  }

  gl_FragColor.a *= opacity;

  gl_FragColor = filterColor(gl_FragColor);
  
  if(u_additive > 0.0) {
    gl_FragColor *= circleClipOpacity;
  } else {
    gl_FragColor.a *= circleClipOpacity;
  }

}
`,Hme=`
attribute vec3 a_Position;
uniform mat4 u_ModelMatrix;
uniform mat4 u_Mvp;
attribute float a_Size;
attribute vec4 a_Color;
varying vec4 v_color;

uniform float u_opacity : 1;
uniform vec2 u_offsets;
uniform float u_stroke_width;

varying mat4 styleMappingMat; // \u7528\u4E8E\u5C06\u5728\u9876\u70B9\u7740\u8272\u5668\u4E2D\u8BA1\u7B97\u597D\u7684\u6837\u5F0F\u503C\u4F20\u9012\u7ED9\u7247\u5143
varying float v_blur;
varying float v_innerRadius;

#pragma include "styleMapping"
#pragma include "styleMappingCalOpacity"

#pragma include "projection"
#pragma include "picking"
#pragma include "project"
void main() {
  v_color = a_Color;
  v_blur = 1.0 - max(2.0/a_Size, 0.05);
  v_innerRadius = max((a_Size - u_stroke_width) / a_Size, 0.0);

  // cal style mapping - \u6570\u636E\u7EB9\u7406\u6620\u5C04\u90E8\u5206\u7684\u8BA1\u7B97
styleMappingMat = mat4(
    0.0, 0.0, 0.0, 0.0, // opacity - strokeOpacity - strokeWidth - empty
    0.0, 0.0, 0.0, 0.0, // strokeR - strokeG - strokeB - strokeA
    0.0, 0.0, 0.0, 0.0, // offsets[0] - offsets[1]
    0.0, 0.0, 0.0, 0.0
  );

  float rowCount = u_cellTypeLayout[0][0];    // \u5F53\u524D\u7684\u6570\u636E\u7EB9\u7406\u6709\u51E0\u884C
  float columnCount = u_cellTypeLayout[0][1]; // \u5F53\u770B\u5230\u6570\u636E\u7EB9\u7406\u6709\u51E0\u5217
  float columnWidth = 1.0/columnCount;  // \u5217\u5BBD
  float rowHeight = 1.0/rowCount;       // \u884C\u9AD8
  float cellCount = calCellCount(); // opacity - strokeOpacity - strokeWidth - stroke - offsets
  float id = a_vertexId; // \u7B2Cn\u4E2A\u9876\u70B9
  float cellCurrentRow = floor(id * cellCount / columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u884C
  float cellCurrentColumn = mod(id * cellCount, columnCount) + 1.0; // \u8D77\u59CB\u70B9\u5728\u7B2C\u51E0\u5217
  
  // cell \u56FA\u5B9A\u987A\u5E8F opacity -> strokeOpacity -> strokeWidth -> stroke ... 
  // \u6309\u987A\u5E8F\u4ECE cell \u4E2D\u53D6\u503C\u3001\u82E5\u6CA1\u6709\u5219\u81EA\u52A8\u5F80\u4E0B\u53D6\u503C
  float textureOffset = 0.0; // \u5728 cell \u4E2D\u53D6\u503C\u7684\u504F\u79FB\u91CF

  vec2 opacityAndOffset = calOpacityAndOffset(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset, columnWidth, rowHeight);
  styleMappingMat[0][0] = opacityAndOffset.r;
  textureOffset = opacityAndOffset.g;

  vec2 textrueOffsets = vec2(0.0, 0.0);
  if(hasOffsets()) {
    vec2 valueXPos = nextPos(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset);
    textrueOffsets.r = pos2value(valueXPos, columnWidth, rowHeight); // x
    textureOffset += 1.0;

    vec2 valueYPos = nextPos(cellCurrentRow, cellCurrentColumn, columnCount, textureOffset);
    textrueOffsets.g = pos2value(valueYPos, columnWidth, rowHeight); // x
    textureOffset += 1.0;
  } else {
    textrueOffsets = u_offsets;
  }

  // cal style mapping
  
  vec2 offset = project_pixel(textrueOffsets);
  
  if(u_CoordinateSystem == COORDINATE_SYSTEM_P20_2) { // gaode2.x
    gl_Position = u_Mvp * vec4(a_Position.xy + offset, a_Position.z, 1.0);
  } else { // else
    vec4 project_pos = project_position(vec4(a_Position, 1.0)) + vec4(a_Size / 2.,-a_Size /2.,0.,0.);
    gl_Position = project_common_position_to_clipspace(vec4(vec2(project_pos.xy+offset),project_pos.z,project_pos.w));
  }

  gl_PointSize = a_Size * 2.0 * u_DevicePixelRatio;
  setPickingColor(a_PickingColor);
}
`;function dO(e){var t=e.coordinates;return{vertices:Ue(t),indices:[0],size:t.length}}var Wme=function(e){Ct(n,e);var t=Vme(n);function n(){return Ae(this,n),t.apply(this,arguments)}return Oe(n,[{key:"getDefaultStyle",value:function(){return{blend:"additive"}}},{key:"getUninforms",value:function(){var a=this.layer.getLayerConfig(),i=a.opacity,o=i===void 0?1:i,s=a.offsets,l=s===void 0?[0,0]:s,u=a.blend,c=a.strokeOpacity,f=c===void 0?1:c,d=a.strokeWidth,p=d===void 0?0:d,h=a.stroke,g=h===void 0?"#fff":h;if(this.dataTextureTest&&this.dataTextureNeedUpdate({opacity:o,offsets:l})){this.judgeStyleAttributes({opacity:o,offsets:l});var v=this.layer.getEncodedData(),b=this.calDataFrame(this.cellLength,v,this.cellProperties),y=b.data,x=b.width,E=b.height;this.rowCount=E,this.dataTexture=this.cellLength>0&&y.length>0?this.createTexture2D({flipY:!0,data:y,format:V.LUMINANCE,type:V.FLOAT,width:x,height:E}):this.createTexture2D({flipY:!0,data:[1],format:V.LUMINANCE,type:V.FLOAT,width:1,height:1})}return{u_additive:u==="additive"?1:0,u_dataTexture:this.dataTexture,u_cellTypeLayout:this.getCellTypeLayout(),u_opacity:Gn(o)?o:1,u_offsets:this.isOffsetStatic(l)?l:[0,0],u_stroke_opacity:Gn(f)?f:1,u_stroke_width:Gn(p)?p:1,u_stroke_color:this.getStrokeColor(g)}}},{key:"initModels",value:function(){return this.buildModels()}},{key:"buildModels",value:function(){var a=this.layer.getLayerConfig(),i=a.mask,o=i===void 0?!1:i,s=a.maskInside,l=s===void 0?!0:s;return this.layer.triangulation=dO,[this.layer.buildLayerModel({moduleName:"simplepoint",vertexShader:Hme,fragmentShader:Gme,triangulation:dO,depth:{enable:!1},primitive:V.POINTS,blend:this.getBlend(),stencil:_i(o,l)})]}},{key:"clearModels",value:function(){var a;(a=this.dataTexture)===null||a===void 0||a.destroy()}},{key:"registerBuiltinAttributes",value:function(){this.styleAttributeService.registerStyleAttribute({name:"size",type:vn.Attribute,descriptor:{name:"a_Size",buffer:{usage:V.DYNAMIC_DRAW,data:[],type:V.FLOAT},size:1,update:function(i,o,s,l){var u=i.size,c=u===void 0?1:u;return Array.isArray(c)?[c[0]]:[c]}}})}},{key:"defaultStyleOptions",value:function(){return{blend:Hi.additive}}}]),n}(Fa),Xme={fillImage:wme,fill:gme,radar:$me,image:Rme,normal:Fme,simplePoint:Wme,extrude:dme,text:VN,icon:Cme,vectorpoint:sme,tile:L0},Yme=Xme;function Zme(e,t){var n=typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=qme(e))||t&&e&&typeof e.length=="number"){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(u){throw u},f:a}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var i=!0,o=!1,s;return{s:function(){n=n.call(e)},n:function(){var u=n.next();return i=u.done,u},e:function(u){o=!0,s=u},f:function(){try{!i&&n.return!=null&&n.return()}finally{if(o)throw s}}}}function qme(e,t){if(!!e){if(typeof e=="string")return pO(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return pO(e,t)}}function pO(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Kme(e){var t=Qme();return function(){var r=Ee(e),a;if(t){var i=Ee(this).constructor;a=Reflect.construct(r,arguments,i)}else a=r.apply(this,arguments);return Mt(this,a)}}function Qme(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var Jme=function(e){Ct(n,e);var t=Kme(n);function n(){var r;Ae(this,n);for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return r=t.call.apply(t,[this].concat(i)),m(D(r),"type","PointLayer"),r}return Oe(n,[{key:"buildModels",value:function(){var a=this.getModelType();this.layerModel=new Yme[a](this),this.models=this.layerModel.initModels()}},{key:"rebuildModels",value:function(){this.models=this.layerModel.buildModels()}},{key:"getModelTypeWillEmptyData",value:function(){if(this.shapeOption){var a=this.shapeOption,i=a.field,o=a.values,s=this.getLayerConfig(),l=s.shape2d;s.shape3d;var u=this.iconService.getIconMap();if(i&&(l==null?void 0:l.indexOf(i))!==-1)return"fill";if(o&&o instanceof Array){var c=Zme(o),f;try{for(c.s();!(f=c.n()).done;){var d=f.value;if(typeof d=="string"&&u.hasOwnProperty(d))return"image"}}catch(p){c.e(p)}finally{c.f()}}}return"normal"}},{key:"getConfigSchema",value:function(){return{properties:{opacity:{type:"number",minimum:0,maximum:1}}}}},{key:"getDefaultConfig",value:function(){var a=this.getModelType(),i={fillImage:{},normal:{blend:"additive"},radar:{},simplePoint:{},fill:{blend:"normal"},extrude:{},image:{},icon:{},text:{blend:"normal"},vectorpoint:{},tile:{}};return i[a]}},{key:"getModelType",value:function(){var a=["fillImage","fill","radar","image","normal","simplePoint","extrude","text","icon","vectorpoint","tile"];if(this.layerSource.parser.type==="mvt")return"vectorpoint";if(this.layerType&&a.includes(this.layerType))return this.layerType;var i=this.getEncodedData(),o=this.getLayerConfig(),s=o.shape2d,l=o.shape3d,u=this.iconService.getIconMap(),c=i.find(function(d){return d.hasOwnProperty("shape")});if(c){var f=c.shape;return f==="dot"?"normal":f==="simple"?"simplePoint":f==="radar"?"radar":f==="fillImage"?"fillImage":(s==null?void 0:s.indexOf(f))!==-1?"fill":(l==null?void 0:l.indexOf(f))!==-1?"extrude":u.hasOwnProperty(f)?"image":this.fontService.getGlyph(f)!==""?"icon":"text"}else return this.getModelTypeWillEmptyData()}}]),n}(Ph),hO,mO,gO,vO,bO,zd,yO,xO,wO;function _O(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function e0e(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?_O(Object(n),!0).forEach(function(r){m(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_O(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var t0e=(hO=nn(),mO=ln(ye.IGlobalConfigService),gO=ln(ye.IMapService),vO=ln(ye.IFontService),hO(bO=(zd=function(){function e(){Ae(this,e),en(this,"configService",yO,this),en(this,"mapService",xO,this),en(this,"fontService",wO,this)}return Oe(e,[{key:"apply",value:function(n,r){var a=this,i=r.styleAttributeService;n.hooks.init.tap("DataMappingPlugin",function(){a.generateMaping(n,{styleAttributeService:i})}),n.hooks.beforeRenderData.tap("DataMappingPlugin",function(){return n.dataState.dataMappingNeedUpdate=!1,a.generateMaping(n,{styleAttributeService:i}),!0}),n.hooks.beforeRender.tap("DataMappingPlugin",function(){if(!n.layerModelNeedUpdate){var o=n.getBottomColor(),s=i.getLayerStyleAttributes()||[],l=i.getLayerStyleAttribute("filter"),u=n.getSource().data.dataArray,c=s.filter(function(d){return d.needRemapping}),f=u;l!=null&&l.needRemapping&&l!==null&&l!==void 0&&l.scale&&(f=u.filter(function(d){return a.applyAttributeMapping(l,d,o)[0]})),c.length&&(l!=null&&l.needRemapping?(n.setEncodedData(a.mapping(n,s,f,void 0,o)),l.needRemapping=!1):n.setEncodedData(a.mapping(n,c,f,n.getEncodedData(),o)),n.emit("remapping",null))}})}},{key:"generateMaping",value:function(n,r){var a=this,i=r.styleAttributeService,o=n.getBottomColor(),s=i.getLayerStyleAttributes()||[],l=i.getLayerStyleAttribute("filter"),u=n.getSource().data.dataArray,c=u;l!=null&&l.scale&&(c=u.filter(function(f){return a.applyAttributeMapping(l,f,o)[0]})),n.setEncodedData(this.mapping(n,s,c,void 0,o)),n.emit("dataUpdate",null)}},{key:"getArrowPoints",value:function(n,r){var a=[r[0]-n[0],r[1]-n[1]],i=n7(a),o=[n[0]+i[0]*1e-4,n[1]+i[1]*1e-4];return o}},{key:"mapping",value:function(n,r,a,i,o){var s=this,l=n.getLayerConfig(),u=l.arrow,c=u===void 0?{enable:!1}:u,f=a.map(function(d,p){var h=i?i[p]:{},g=e0e({id:d._id,coordinates:d.coordinates},h);if(r.filter(function(y){return y.scale!==void 0}).forEach(function(y){var x=s.applyAttributeMapping(y,d,o);y.needRemapping=!1,y.name==="color"&&(x=x.map(function(E){return Ko(E)})),g[y.name]=Array.isArray(x)&&x.length===1?x[0]:x,y.name==="shape"&&(g.shape=s.fontService.getIconFontKey(g[y.name]))}),g.shape==="line"&&c.enable){var v=g.coordinates,b=s.getArrowPoints(v[0],v[1]);g.coordinates.splice(1,0,b,b)}return g});return this.adjustData2Amap2Coordinates(f,n),this.adjustData2SimpleCoordinates(f),f}},{key:"adjustData2Amap2Coordinates",value:function(n,r){var a=this;if(n.length>0&&this.mapService.version===dr["GAODE2.x"]){var i=this.getLayerCenter(r);typeof n[0].coordinates[0]=="number"?n.filter(function(o){return!o.originCoordinates}).map(function(o){o.version=dr["GAODE2.x"],o.originCoordinates=rf(o.coordinates),o.coordinates=a.mapService.lngLatToCoordByLayer(o.coordinates,i)}):n.filter(function(o){return!o.originCoordinates}).map(function(o){o.version=dr["GAODE2.x"],o.originCoordinates=rf(o.coordinates),o.coordinates=a.mapService.lngLatToCoordsByLayer(o.coordinates,i)})}}},{key:"getLayerCenter",value:function(n){var r=n.getSource();return r.center}},{key:"adjustData2SimpleCoordinates",value:function(n){var r=this;n.length>0&&this.mapService.version===dr.SIMPLE&&n.map(function(a){a.simpleCoordinate||(a.coordinates=r.unProjectCoordinates(a.coordinates),a.simpleCoordinate=!0)})}},{key:"unProjectCoordinates",value:function(n){var r=this;if(typeof n[0]=="number")return this.mapService.simpleMapCoord.unproject(n);if(n[0]&&n[0][0]instanceof Array){var a=[];return n.map(function(o){var s=[];o.map(function(l){s.push(r.mapService.simpleMapCoord.unproject(l))}),a.push(s)}),a}else{var i=[];return n.map(function(o){i.push(r.mapService.simpleMapCoord.unproject(o))}),i}}},{key:"applyAttributeMapping",value:function(n,r,a){var i;if(!n.scale)return[];var o=(n==null||(i=n.scale)===null||i===void 0?void 0:i.scalers)||[],s=[];o.forEach(function(u){var c,f=u.field;(r.hasOwnProperty(f)||((c=n.scale)===null||c===void 0?void 0:c.type)==="variable")&&s.push(r[f])});var l=n.mapping?n.mapping(s):[];return n.name==="color"&&!o7(l[0])?[a]:l}}]),e}(),yO=Jt(zd.prototype,"configService",[mO],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),xO=Jt(zd.prototype,"mapService",[gO],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),wO=Jt(zd.prototype,"fontService",[vO],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),zd))||bO),EO,kO,n0e=(EO=nn(),EO(kO=function(){function e(){Ae(this,e),m(this,"mapService",void 0)}return Oe(e,[{key:"apply",value:function(n){var r=this;this.mapService=n.getContainer().get(ye.IMapService),n.hooks.init.tap("DataSourcePlugin",function(){var a=n.getSource();if(!a){var i=n.sourceOption||{data:vne,options:bne},o=i.data,s=i.options;n.setSource(new Oh(o,s))}r.updateClusterData(n)}),n.hooks.beforeRenderData.tap("DataSourcePlugin",function(){var a=r.updateClusterData(n),i=n.dataState.dataSourceNeedUpdate;return n.dataState.dataSourceNeedUpdate=!1,a||i})}},{key:"updateClusterData",value:function(n){var r=n.getSource(),a=r.cluster,i=r.clusterOptions,o=i.zoom,s=o===void 0?0:o;i.maxZoom;var l=this.mapService.getZoom()-1,u=n.dataState.dataSourceNeedUpdate;return a&&(u||Math.abs(n.clusterZoom-l)>=1)?(s!==Math.floor(l)&&r.updateClusterData(Math.floor(l)),n.clusterZoom=l,!0):!1}}]),e}())||kO);function X2(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function GN(e){return e.length===1&&(e=r0e(e)),{left:function(t,n,r,a){for(r==null&&(r=0),a==null&&(a=t.length);r<a;){var i=r+a>>>1;e(t[i],n)<0?r=i+1:a=i}return r},right:function(t,n,r,a){for(r==null&&(r=0),a==null&&(a=t.length);r<a;){var i=r+a>>>1;e(t[i],n)>0?a=i:r=i+1}return r}}}function r0e(e){return function(t,n){return X2(e(t),n)}}var a0e=GN(X2),Dv=a0e.right;function i0e(e){return e===null?NaN:+e}function SO(e,t){var n=e.length,r=-1,a,i,o;if(t==null){for(;++r<n;)if((a=e[r])!=null&&a>=a)for(i=o=a;++r<n;)(a=e[r])!=null&&(i>a&&(i=a),o<a&&(o=a))}else for(;++r<n;)if((a=t(e[r],r,e))!=null&&a>=a)for(i=o=a;++r<n;)(a=t(e[r],r,e))!=null&&(i>a&&(i=a),o<a&&(o=a));return[i,o]}var kw=Math.sqrt(50),Sw=Math.sqrt(10),Cw=Math.sqrt(2);function HN(e,t,n){var r,a=-1,i,o,s;if(t=+t,e=+e,n=+n,e===t&&n>0)return[e];if((r=t<e)&&(i=e,e=t,t=i),(s=N0(e,t,n))===0||!isFinite(s))return[];if(s>0)for(e=Math.ceil(e/s),t=Math.floor(t/s),o=new Array(i=Math.ceil(t-e+1));++a<i;)o[a]=(e+a)*s;else for(e=Math.floor(e*s),t=Math.ceil(t*s),o=new Array(i=Math.ceil(e-t+1));++a<i;)o[a]=(e-a)/s;return r&&o.reverse(),o}function N0(e,t,n){var r=(t-e)/Math.max(0,n),a=Math.floor(Math.log(r)/Math.LN10),i=r/Math.pow(10,a);return a>=0?(i>=kw?10:i>=Sw?5:i>=Cw?2:1)*Math.pow(10,a):-Math.pow(10,-a)/(i>=kw?10:i>=Sw?5:i>=Cw?2:1)}function Tw(e,t,n){var r=Math.abs(t-e)/Math.max(0,n),a=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),i=r/a;return i>=kw?a*=10:i>=Sw?a*=5:i>=Cw&&(a*=2),t<e?-a:a}function o0e(e,t,n){if(n==null&&(n=i0e),!!(r=e.length)){if((t=+t)<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,a=(r-1)*t,i=Math.floor(a),o=+n(e[i],i,e),s=+n(e[i+1],i+1,e);return o+(s-o)*(a-i)}}function s0e(e,t,n,r,a){var i=e*e,o=i*e;return((1-3*e+3*i-o)*t+(4-6*i+3*o)*n+(1+3*e+3*i-3*o)*r+o*a)/6}function l0e(e){var t=e.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),a=e[r],i=e[r+1],o=r>0?e[r-1]:2*a-i,s=r<t-1?e[r+2]:2*i-a;return s0e((n-r/t)*t,o,a,i,s)}}function Y2(e){return function(){return e}}function WN(e,t){return function(n){return e+n*t}}function u0e(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function c0e(e,t){var n=t-e;return n?WN(e,n>180||n<-180?n-360*Math.round(n/360):n):Y2(isNaN(e)?t:e)}function f0e(e){return(e=+e)==1?Ep:function(t,n){return n-t?u0e(t,n,e):Y2(isNaN(t)?n:t)}}function Ep(e,t){var n=t-e;return n?WN(e,n):Y2(isNaN(e)?t:e)}(function e(t){var n=f0e(t);function r(a,i){var o=n((a=vf(a)).r,(i=vf(i)).r),s=n(a.g,i.g),l=n(a.b,i.b),u=n(a.opacity,i.opacity);return function(c){return a.r=o(c),a.g=s(c),a.b=l(c),a.opacity=u(c),a+""}}return r.gamma=e,r})(1);function d0e(e){return function(t){var n=t.length,r=new Array(n),a=new Array(n),i=new Array(n),o,s;for(o=0;o<n;++o)s=vf(t[o]),r[o]=s.r||0,a[o]=s.g||0,i[o]=s.b||0;return r=e(r),a=e(a),i=e(i),s.opacity=1,function(l){return s.r=r(l),s.g=a(l),s.b=i(l),s+""}}}var p0e=d0e(l0e);function XN(e){return function t(n){n=+n;function r(a,i){var o=e((a=K1(a)).h,(i=K1(i)).h),s=Ep(a.s,i.s),l=Ep(a.l,i.l),u=Ep(a.opacity,i.opacity);return function(c){return a.h=o(c),a.s=s(c),a.l=l(Math.pow(c,n)),a.opacity=u(c),a+""}}return r.gamma=t,r}(1)}XN(c0e);XN(Ep);function Fl(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function YN(e,t){switch(arguments.length){case 0:break;case 1:this.interpolator(e);break;default:this.interpolator(t).domain(e);break}return this}var Vi="$";function Og(){}Og.prototype=Mg.prototype={constructor:Og,has:function(e){return Vi+e in this},get:function(e){return this[Vi+e]},set:function(e,t){return this[Vi+e]=t,this},remove:function(e){var t=Vi+e;return t in this&&delete this[t]},clear:function(){for(var e in this)e[0]===Vi&&delete this[e]},keys:function(){var e=[];for(var t in this)t[0]===Vi&&e.push(t.slice(1));return e},values:function(){var e=[];for(var t in this)t[0]===Vi&&e.push(this[t]);return e},entries:function(){var e=[];for(var t in this)t[0]===Vi&&e.push({key:t.slice(1),value:this[t]});return e},size:function(){var e=0;for(var t in this)t[0]===Vi&&++e;return e},empty:function(){for(var e in this)if(e[0]===Vi)return!1;return!0},each:function(e){for(var t in this)t[0]===Vi&&e(this[t],t.slice(1),this)}};function Mg(e,t){var n=new Og;if(e instanceof Og)e.each(function(s,l){n.set(l,s)});else if(Array.isArray(e)){var r=-1,a=e.length,i;if(t==null)for(;++r<a;)n.set(r,e[r]);else for(;++r<a;)n.set(t(i=e[r],r,e),i)}else if(e)for(var o in e)n.set(o,e[o]);return n}function CO(){}var eu=Mg.prototype;CO.prototype={constructor:CO,has:eu.has,add:function(e){return e+="",this[Vi+e]=e,this},remove:eu.remove,clear:eu.clear,values:eu.keys,size:eu.size,empty:eu.empty,each:eu.each};var ZN=Array.prototype,Rg=ZN.map,Pu=ZN.slice,TO={name:"implicit"};function Pg(){var e=Mg(),t=[],n=[],r=TO;function a(i){var o=i+"",s=e.get(o);if(!s){if(r!==TO)return r;e.set(o,s=t.push(i))}return n[(s-1)%n.length]}return a.domain=function(i){if(!arguments.length)return t.slice();t=[],e=Mg();for(var o=-1,s=i.length,l,u;++o<s;)e.has(u=(l=i[o])+"")||e.set(u,t.push(l));return a},a.range=function(i){return arguments.length?(n=Pu.call(i),a):n.slice()},a.unknown=function(i){return arguments.length?(r=i,a):r},a.copy=function(){return Pg(t,n).unknown(r)},Fl.apply(a,arguments),a}function Z2(e){return function(){return e}}function h0e(e,t){return function(n){return e+n*t}}function m0e(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function g0e(e){return(e=+e)==1?qN:function(t,n){return n-t?m0e(t,n,e):Z2(isNaN(t)?n:t)}}function qN(e,t){var n=t-e;return n?h0e(e,n):Z2(isNaN(e)?t:e)}var AO=function e(t){var n=g0e(t);function r(a,i){var o=n((a=vf(a)).r,(i=vf(i)).r),s=n(a.g,i.g),l=n(a.b,i.b),u=qN(a.opacity,i.opacity);return function(c){return a.r=o(c),a.g=s(c),a.b=l(c),a.opacity=u(c),a+""}}return r.gamma=e,r}(1);function v0e(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),a;return function(i){for(a=0;a<n;++a)r[a]=e[a]*(1-i)+t[a]*i;return r}}function b0e(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function y0e(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,a=new Array(r),i=new Array(n),o;for(o=0;o<r;++o)a[o]=q2(e[o],t[o]);for(;o<n;++o)i[o]=t[o];return function(s){for(o=0;o<r;++o)i[o]=a[o](s);return i}}function x0e(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function Ig(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function w0e(e,t){var n={},r={},a;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(a in t)a in e?n[a]=q2(e[a],t[a]):r[a]=t[a];return function(i){for(a in n)r[a]=n[a](i);return r}}var Aw=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,xx=new RegExp(Aw.source,"g");function _0e(e){return function(){return e}}function E0e(e){return function(t){return e(t)+""}}function k0e(e,t){var n=Aw.lastIndex=xx.lastIndex=0,r,a,i,o=-1,s=[],l=[];for(e=e+"",t=t+"";(r=Aw.exec(e))&&(a=xx.exec(t));)(i=a.index)>n&&(i=t.slice(n,i),s[o]?s[o]+=i:s[++o]=i),(r=r[0])===(a=a[0])?s[o]?s[o]+=a:s[++o]=a:(s[++o]=null,l.push({i:o,x:Ig(r,a)})),n=xx.lastIndex;return n<t.length&&(i=t.slice(n),s[o]?s[o]+=i:s[++o]=i),s.length<2?l[0]?E0e(l[0].x):_0e(t):(t=l.length,function(u){for(var c=0,f;c<t;++c)s[(f=l[c]).i]=f.x(u);return s.join("")})}function q2(e,t){var n=typeof t,r;return t==null||n==="boolean"?Z2(t):(n==="number"?Ig:n==="string"?(r=Sl(t))?(t=r,AO):k0e:t instanceof Sl?AO:t instanceof Date?x0e:b0e(t)?v0e:Array.isArray(t)?y0e:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?w0e:Ig)(e,t)}function S0e(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}function C0e(e){return function(){return e}}function Ow(e){return+e}var OO=[0,1];function Ia(e){return e}function Mw(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:C0e(isNaN(t)?NaN:.5)}function MO(e){var t=e[0],n=e[e.length-1],r;return t>n&&(r=t,t=n,n=r),function(a){return Math.max(t,Math.min(n,a))}}function T0e(e,t,n){var r=e[0],a=e[1],i=t[0],o=t[1];return a<r?(r=Mw(a,r),i=n(o,i)):(r=Mw(r,a),i=n(i,o)),function(s){return i(r(s))}}function A0e(e,t,n){var r=Math.min(e.length,t.length)-1,a=new Array(r),i=new Array(r),o=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<r;)a[o]=Mw(e[o],e[o+1]),i[o]=n(t[o],t[o+1]);return function(s){var l=Dv(e,s,1,r)-1;return i[l](a[l](s))}}function Bv(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function K2(){var e=OO,t=OO,n=q2,r,a,i,o=Ia,s,l,u;function c(){return s=Math.min(e.length,t.length)>2?A0e:T0e,l=u=null,f}function f(d){return isNaN(d=+d)?i:(l||(l=s(e.map(r),t,n)))(r(o(d)))}return f.invert=function(d){return o(a((u||(u=s(t,e.map(r),Ig)))(d)))},f.domain=function(d){return arguments.length?(e=Rg.call(d,Ow),o===Ia||(o=MO(e)),c()):e.slice()},f.range=function(d){return arguments.length?(t=Pu.call(d),c()):t.slice()},f.rangeRound=function(d){return t=Pu.call(d),n=S0e,c()},f.clamp=function(d){return arguments.length?(o=d?MO(e):Ia,f):o!==Ia},f.interpolate=function(d){return arguments.length?(n=d,c()):n},f.unknown=function(d){return arguments.length?(i=d,f):i},function(d,p){return r=d,a=p,c()}}function KN(e,t){return K2()(e,t)}function O0e(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function Lg(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function xf(e){return e=Lg(Math.abs(e)),e?e[1]:NaN}function M0e(e,t){return function(n,r){for(var a=n.length,i=[],o=0,s=e[0],l=0;a>0&&s>0&&(l+s+1>r&&(s=Math.max(1,r-l)),i.push(n.substring(a-=s,a+s)),!((l+=s+1)>r));)s=e[o=(o+1)%e.length];return i.reverse().join(t)}}function R0e(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var P0e=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Ng(e){if(!(t=P0e.exec(e)))throw new Error("invalid format: "+e);var t;return new Q2({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}Ng.prototype=Q2.prototype;function Q2(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}Q2.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function I0e(e){e:for(var t=e.length,n=1,r=-1,a;n<t;++n)switch(e[n]){case".":r=a=n;break;case"0":r===0&&(r=n),a=n;break;default:if(!+e[n])break e;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(a+1):e}var QN;function L0e(e,t){var n=Lg(e,t);if(!n)return e+"";var r=n[0],a=n[1],i=a-(QN=Math.max(-8,Math.min(8,Math.floor(a/3)))*3)+1,o=r.length;return i===o?r:i>o?r+new Array(i-o+1).join("0"):i>0?r.slice(0,i)+"."+r.slice(i):"0."+new Array(1-i).join("0")+Lg(e,Math.max(0,t+i-1))[0]}function RO(e,t){var n=Lg(e,t);if(!n)return e+"";var r=n[0],a=n[1];return a<0?"0."+new Array(-a).join("0")+r:r.length>a+1?r.slice(0,a+1)+"."+r.slice(a+1):r+new Array(a-r.length+2).join("0")}var PO={"%":function(e,t){return(e*100).toFixed(t)},b:function(e){return Math.round(e).toString(2)},c:function(e){return e+""},d:O0e,e:function(e,t){return e.toExponential(t)},f:function(e,t){return e.toFixed(t)},g:function(e,t){return e.toPrecision(t)},o:function(e){return Math.round(e).toString(8)},p:function(e,t){return RO(e*100,t)},r:RO,s:L0e,X:function(e){return Math.round(e).toString(16).toUpperCase()},x:function(e){return Math.round(e).toString(16)}};function IO(e){return e}var LO=Array.prototype.map,NO=["y","z","a","f","p","n","\xB5","m","","k","M","G","T","P","E","Z","Y"];function N0e(e){var t=e.grouping===void 0||e.thousands===void 0?IO:M0e(LO.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",a=e.decimal===void 0?".":e.decimal+"",i=e.numerals===void 0?IO:R0e(LO.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",s=e.minus===void 0?"-":e.minus+"",l=e.nan===void 0?"NaN":e.nan+"";function u(f){f=Ng(f);var d=f.fill,p=f.align,h=f.sign,g=f.symbol,v=f.zero,b=f.width,y=f.comma,x=f.precision,E=f.trim,T=f.type;T==="n"?(y=!0,T="g"):PO[T]||(x===void 0&&(x=12),E=!0,T="g"),(v||d==="0"&&p==="=")&&(v=!0,d="0",p="=");var C=g==="$"?n:g==="#"&&/[boxX]/.test(T)?"0"+T.toLowerCase():"",I=g==="$"?r:/[%p]/.test(T)?o:"",P=PO[T],j=/[defgprs%]/.test(T);x=x===void 0?6:/[gprs]/.test(T)?Math.max(1,Math.min(21,x)):Math.max(0,Math.min(20,x));function A(S){var M=C,O=I,R,H,ee;if(T==="c")O=P(S)+O,S="";else{S=+S;var re=S<0||1/S<0;if(S=isNaN(S)?l:P(Math.abs(S),x),E&&(S=I0e(S)),re&&+S==0&&h!=="+"&&(re=!1),M=(re?h==="("?h:s:h==="-"||h==="("?"":h)+M,O=(T==="s"?NO[8+QN/3]:"")+O+(re&&h==="("?")":""),j){for(R=-1,H=S.length;++R<H;)if(ee=S.charCodeAt(R),48>ee||ee>57){O=(ee===46?a+S.slice(R+1):S.slice(R))+O,S=S.slice(0,R);break}}}y&&!v&&(S=t(S,1/0));var Y=M.length+S.length+O.length,J=Y<b?new Array(b-Y+1).join(d):"";switch(y&&v&&(S=t(J+S,J.length?b-O.length:1/0),J=""),p){case"<":S=M+S+O+J;break;case"=":S=M+J+S+O;break;case"^":S=J.slice(0,Y=J.length>>1)+M+S+O+J.slice(Y);break;default:S=J+M+S+O;break}return i(S)}return A.toString=function(){return f+""},A}function c(f,d){var p=u((f=Ng(f),f.type="f",f)),h=Math.max(-8,Math.min(8,Math.floor(xf(d)/3)))*3,g=Math.pow(10,-h),v=NO[8+h/3];return function(b){return p(g*b)+v}}return{format:u,formatPrefix:c}}var Km,J2,JN;F0e({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"});function F0e(e){return Km=N0e(e),J2=Km.format,JN=Km.formatPrefix,Km}function D0e(e){return Math.max(0,-xf(Math.abs(e)))}function B0e(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(xf(t)/3)))*3-xf(Math.abs(e)))}function z0e(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,xf(t)-xf(e))+1}function U0e(e,t,n,r){var a=Tw(e,t,n),i;switch(r=Ng(r==null?",f":r),r.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(t));return r.precision==null&&!isNaN(i=B0e(a,o))&&(r.precision=i),JN(r,o)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(i=z0e(a,Math.max(Math.abs(e),Math.abs(t))))&&(r.precision=i-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(i=D0e(a))&&(r.precision=i-(r.type==="%")*2);break}}return J2(r)}function Gf(e){var t=e.domain;return e.ticks=function(n){var r=t();return HN(r[0],r[r.length-1],n==null?10:n)},e.tickFormat=function(n,r){var a=t();return U0e(a[0],a[a.length-1],n==null?10:n,r)},e.nice=function(n){n==null&&(n=10);var r=t(),a=0,i=r.length-1,o=r[a],s=r[i],l;return s<o&&(l=o,o=s,s=l,l=a,a=i,i=l),l=N0(o,s,n),l>0?(o=Math.floor(o/l)*l,s=Math.ceil(s/l)*l,l=N0(o,s,n)):l<0&&(o=Math.ceil(o*l)/l,s=Math.floor(s*l)/l,l=N0(o,s,n)),l>0?(r[a]=Math.floor(o/l)*l,r[i]=Math.ceil(s/l)*l,t(r)):l<0&&(r[a]=Math.ceil(o*l)/l,r[i]=Math.floor(s*l)/l,t(r)),e},e}function e9(){var e=KN(Ia,Ia);return e.copy=function(){return Bv(e,e9())},Fl.apply(e,arguments),Gf(e)}function t9(e){var t;function n(r){return isNaN(r=+r)?t:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(e=Rg.call(r,Ow),n):e.slice()},n.unknown=function(r){return arguments.length?(t=r,n):t},n.copy=function(){return t9(e).unknown(t)},e=arguments.length?Rg.call(e,Ow):[0,1],Gf(n)}function n9(e,t){e=e.slice();var n=0,r=e.length-1,a=e[n],i=e[r],o;return i<a&&(o=n,n=r,r=o,o=a,a=i,i=o),e[n]=t.floor(a),e[r]=t.ceil(i),e}function FO(e){return Math.log(e)}function DO(e){return Math.exp(e)}function $0e(e){return-Math.log(-e)}function V0e(e){return-Math.exp(-e)}function j0e(e){return isFinite(e)?+("1e"+e):e<0?0:e}function G0e(e){return e===10?j0e:e===Math.E?Math.exp:function(t){return Math.pow(e,t)}}function H0e(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),function(t){return Math.log(t)/e})}function BO(e){return function(t){return-e(-t)}}function W0e(e){var t=e(FO,DO),n=t.domain,r=10,a,i;function o(){return a=H0e(r),i=G0e(r),n()[0]<0?(a=BO(a),i=BO(i),e($0e,V0e)):e(FO,DO),t}return t.base=function(s){return arguments.length?(r=+s,o()):r},t.domain=function(s){return arguments.length?(n(s),o()):n()},t.ticks=function(s){var l=n(),u=l[0],c=l[l.length-1],f;(f=c<u)&&(d=u,u=c,c=d);var d=a(u),p=a(c),h,g,v,b=s==null?10:+s,y=[];if(!(r%1)&&p-d<b){if(d=Math.round(d)-1,p=Math.round(p)+1,u>0){for(;d<p;++d)for(g=1,h=i(d);g<r;++g)if(v=h*g,!(v<u)){if(v>c)break;y.push(v)}}else for(;d<p;++d)for(g=r-1,h=i(d);g>=1;--g)if(v=h*g,!(v<u)){if(v>c)break;y.push(v)}}else y=HN(d,p,Math.min(p-d,b)).map(i);return f?y.reverse():y},t.tickFormat=function(s,l){if(l==null&&(l=r===10?".0e":","),typeof l!="function"&&(l=J2(l)),s===1/0)return l;s==null&&(s=10);var u=Math.max(1,r*s/t.ticks().length);return function(c){var f=c/i(Math.round(a(c)));return f*r<r-.5&&(f*=r),f<=u?l(c):""}},t.nice=function(){return n(n9(n(),{floor:function(s){return i(Math.floor(a(s)))},ceil:function(s){return i(Math.ceil(a(s)))}}))},t}function r9(){var e=W0e(K2()).domain([1,10]);return e.copy=function(){return Bv(e,r9()).base(e.base())},Fl.apply(e,arguments),e}function zO(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function X0e(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function Y0e(e){return e<0?-e*e:e*e}function Z0e(e){var t=e(Ia,Ia),n=1;function r(){return n===1?e(Ia,Ia):n===.5?e(X0e,Y0e):e(zO(n),zO(1/n))}return t.exponent=function(a){return arguments.length?(n=+a,r()):n},Gf(t)}function a9(){var e=Z0e(K2());return e.copy=function(){return Bv(e,a9()).exponent(e.exponent())},Fl.apply(e,arguments),e}function i9(){var e=[],t=[],n=[],r;function a(){var o=0,s=Math.max(1,t.length);for(n=new Array(s-1);++o<s;)n[o-1]=o0e(e,o/s);return i}function i(o){return isNaN(o=+o)?r:t[Dv(n,o)]}return i.invertExtent=function(o){var s=t.indexOf(o);return s<0?[NaN,NaN]:[s>0?n[s-1]:e[0],s<n.length?n[s]:e[e.length-1]]},i.domain=function(o){if(!arguments.length)return e.slice();e=[];for(var s=0,l=o.length,u;s<l;++s)u=o[s],u!=null&&!isNaN(u=+u)&&e.push(u);return e.sort(X2),a()},i.range=function(o){return arguments.length?(t=Pu.call(o),a()):t.slice()},i.unknown=function(o){return arguments.length?(r=o,i):r},i.quantiles=function(){return n.slice()},i.copy=function(){return i9().domain(e).range(t).unknown(r)},Fl.apply(i,arguments)}function o9(){var e=0,t=1,n=1,r=[.5],a=[0,1],i;function o(l){return l<=l?a[Dv(r,l,0,n)]:i}function s(){var l=-1;for(r=new Array(n);++l<n;)r[l]=((l+1)*t-(l-n)*e)/(n+1);return o}return o.domain=function(l){return arguments.length?(e=+l[0],t=+l[1],s()):[e,t]},o.range=function(l){return arguments.length?(n=(a=Pu.call(l)).length-1,s()):a.slice()},o.invertExtent=function(l){var u=a.indexOf(l);return u<0?[NaN,NaN]:u<1?[e,r[0]]:u>=n?[r[n-1],t]:[r[u-1],r[u]]},o.unknown=function(l){return arguments.length&&(i=l),o},o.thresholds=function(){return r.slice()},o.copy=function(){return o9().domain([e,t]).range(a).unknown(i)},Fl.apply(Gf(o),arguments)}function s9(){var e=[.5],t=[0,1],n,r=1;function a(i){return i<=i?t[Dv(e,i,0,r)]:n}return a.domain=function(i){return arguments.length?(e=Pu.call(i),r=Math.min(e.length,t.length-1),a):e.slice()},a.range=function(i){return arguments.length?(t=Pu.call(i),r=Math.min(e.length,t.length-1),a):t.slice()},a.invertExtent=function(i){var o=t.indexOf(i);return[e[o-1],e[o]]},a.unknown=function(i){return arguments.length?(n=i,a):n},a.copy=function(){return s9().domain(e).range(t).unknown(n)},Fl.apply(a,arguments)}var _x=new Date,Ex=new Date;function Za(e,t,n,r){function a(i){return e(i=arguments.length===0?new Date:new Date(+i)),i}return a.floor=function(i){return e(i=new Date(+i)),i},a.ceil=function(i){return e(i=new Date(i-1)),t(i,1),e(i),i},a.round=function(i){var o=a(i),s=a.ceil(i);return i-o<s-i?o:s},a.offset=function(i,o){return t(i=new Date(+i),o==null?1:Math.floor(o)),i},a.range=function(i,o,s){var l=[],u;if(i=a.ceil(i),s=s==null?1:Math.floor(s),!(i<o)||!(s>0))return l;do l.push(u=new Date(+i)),t(i,s),e(i);while(u<i&&i<o);return l},a.filter=function(i){return Za(function(o){if(o>=o)for(;e(o),!i(o);)o.setTime(o-1)},function(o,s){if(o>=o)if(s<0)for(;++s<=0;)for(;t(o,-1),!i(o););else for(;--s>=0;)for(;t(o,1),!i(o););})},n&&(a.count=function(i,o){return _x.setTime(+i),Ex.setTime(+o),e(_x),e(Ex),Math.floor(n(_x,Ex))},a.every=function(i){return i=Math.floor(i),!isFinite(i)||!(i>0)?null:i>1?a.filter(r?function(o){return r(o)%i===0}:function(o){return a.count(0,o)%i===0}):a}),a}var Fg=Za(function(){},function(e,t){e.setTime(+e+t)},function(e,t){return t-e});Fg.every=function(e){return e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?Za(function(t){t.setTime(Math.floor(t/e)*e)},function(t,n){t.setTime(+t+n*e)},function(t,n){return(n-t)/e}):Fg};var q0e=Fg;Fg.range;var Dg=1e3,lh=6e4,UO=36e5,l9=864e5,u9=6048e5,c9=Za(function(e){e.setTime(e-e.getMilliseconds())},function(e,t){e.setTime(+e+t*Dg)},function(e,t){return(t-e)/Dg},function(e){return e.getUTCSeconds()}),K0e=c9;c9.range;var f9=Za(function(e){e.setTime(e-e.getMilliseconds()-e.getSeconds()*Dg)},function(e,t){e.setTime(+e+t*lh)},function(e,t){return(t-e)/lh},function(e){return e.getMinutes()}),Q0e=f9;f9.range;var d9=Za(function(e){e.setTime(e-e.getMilliseconds()-e.getSeconds()*Dg-e.getMinutes()*lh)},function(e,t){e.setTime(+e+t*UO)},function(e,t){return(t-e)/UO},function(e){return e.getHours()}),J0e=d9;d9.range;var p9=Za(function(e){e.setHours(0,0,0,0)},function(e,t){e.setDate(e.getDate()+t)},function(e,t){return(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*lh)/l9},function(e){return e.getDate()-1}),eE=p9;p9.range;function Bu(e){return Za(function(t){t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},function(t,n){t.setDate(t.getDate()+n*7)},function(t,n){return(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*lh)/u9})}var tE=Bu(0),Bg=Bu(1),ege=Bu(2),tge=Bu(3),wf=Bu(4),nge=Bu(5),rge=Bu(6);tE.range;Bg.range;ege.range;tge.range;wf.range;nge.range;rge.range;var h9=Za(function(e){e.setDate(1),e.setHours(0,0,0,0)},function(e,t){e.setMonth(e.getMonth()+t)},function(e,t){return t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12},function(e){return e.getMonth()}),age=h9;h9.range;var nE=Za(function(e){e.setMonth(0,1),e.setHours(0,0,0,0)},function(e,t){e.setFullYear(e.getFullYear()+t)},function(e,t){return t.getFullYear()-e.getFullYear()},function(e){return e.getFullYear()});nE.every=function(e){return!isFinite(e=Math.floor(e))||!(e>0)?null:Za(function(t){t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},function(t,n){t.setFullYear(t.getFullYear()+n*e)})};var _f=nE;nE.range;var m9=Za(function(e){e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCDate(e.getUTCDate()+t)},function(e,t){return(t-e)/l9},function(e){return e.getUTCDate()-1}),g9=m9;m9.range;function zu(e){return Za(function(t){t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},function(t,n){t.setUTCDate(t.getUTCDate()+n*7)},function(t,n){return(n-t)/u9})}var v9=zu(0),zg=zu(1),ige=zu(2),oge=zu(3),Ef=zu(4),sge=zu(5),lge=zu(6);v9.range;zg.range;ige.range;oge.range;Ef.range;sge.range;lge.range;var rE=Za(function(e){e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},function(e,t){e.setUTCFullYear(e.getUTCFullYear()+t)},function(e,t){return t.getUTCFullYear()-e.getUTCFullYear()},function(e){return e.getUTCFullYear()});rE.every=function(e){return!isFinite(e=Math.floor(e))||!(e>0)?null:Za(function(t){t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},function(t,n){t.setUTCFullYear(t.getUTCFullYear()+n*e)})};var uh=rE;rE.range;function kx(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function Sx(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Ud(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function uge(e){var t=e.dateTime,n=e.date,r=e.time,a=e.periods,i=e.days,o=e.shortDays,s=e.months,l=e.shortMonths,u=$d(a),c=Vd(a),f=$d(i),d=Vd(i),p=$d(o),h=Vd(o),g=$d(s),v=Vd(s),b=$d(l),y=Vd(l),x={a:re,A:Y,b:J,B:ae,c:null,d:WO,e:WO,f:Pge,g:Vge,G:Gge,H:Oge,I:Mge,j:Rge,L:b9,m:Ige,M:Lge,p:le,q:fe,Q:ZO,s:qO,S:Nge,u:Fge,U:Dge,V:Bge,w:zge,W:Uge,x:null,X:null,y:$ge,Y:jge,Z:Hge,"%":YO},E={a:ge,A:we,b:Ve,B:Lt,c:null,d:XO,e:XO,f:Zge,g:ive,G:sve,H:Wge,I:Xge,j:Yge,L:x9,m:qge,M:Kge,p:Nt,q:Zt,Q:ZO,s:qO,S:Qge,u:Jge,U:eve,V:tve,w:nve,W:rve,x:null,X:null,y:ave,Y:ove,Z:lve,"%":YO},T={a:A,A:S,b:M,B:O,c:R,d:GO,e:GO,f:Sge,g:jO,G:VO,H:HO,I:HO,j:wge,L:kge,m:xge,M:_ge,p:j,q:yge,Q:Tge,s:Age,S:Ege,u:hge,U:mge,V:gge,w:pge,W:vge,x:H,X:ee,y:jO,Y:VO,Z:bge,"%":Cge};x.x=C(n,x),x.X=C(r,x),x.c=C(t,x),E.x=C(n,E),E.X=C(r,E),E.c=C(t,E);function C(Fe,Je){return function(tt){var ve=[],pt=-1,kt=0,wt=Fe.length,At,ht,jt;for(tt instanceof Date||(tt=new Date(+tt));++pt<wt;)Fe.charCodeAt(pt)===37&&(ve.push(Fe.slice(kt,pt)),(ht=$O[At=Fe.charAt(++pt)])!=null?At=Fe.charAt(++pt):ht=At==="e"?" ":"0",(jt=Je[At])&&(At=jt(tt,ht)),ve.push(At),kt=pt+1);return ve.push(Fe.slice(kt,pt)),ve.join("")}}function I(Fe,Je){return function(tt){var ve=Ud(1900,void 0,1),pt=P(ve,Fe,tt+="",0),kt,wt;if(pt!=tt.length)return null;if("Q"in ve)return new Date(ve.Q);if("s"in ve)return new Date(ve.s*1e3+("L"in ve?ve.L:0));if(Je&&!("Z"in ve)&&(ve.Z=0),"p"in ve&&(ve.H=ve.H%12+ve.p*12),ve.m===void 0&&(ve.m="q"in ve?ve.q:0),"V"in ve){if(ve.V<1||ve.V>53)return null;"w"in ve||(ve.w=1),"Z"in ve?(kt=Sx(Ud(ve.y,0,1)),wt=kt.getUTCDay(),kt=wt>4||wt===0?zg.ceil(kt):zg(kt),kt=g9.offset(kt,(ve.V-1)*7),ve.y=kt.getUTCFullYear(),ve.m=kt.getUTCMonth(),ve.d=kt.getUTCDate()+(ve.w+6)%7):(kt=kx(Ud(ve.y,0,1)),wt=kt.getDay(),kt=wt>4||wt===0?Bg.ceil(kt):Bg(kt),kt=eE.offset(kt,(ve.V-1)*7),ve.y=kt.getFullYear(),ve.m=kt.getMonth(),ve.d=kt.getDate()+(ve.w+6)%7)}else("W"in ve||"U"in ve)&&("w"in ve||(ve.w="u"in ve?ve.u%7:"W"in ve?1:0),wt="Z"in ve?Sx(Ud(ve.y,0,1)).getUTCDay():kx(Ud(ve.y,0,1)).getDay(),ve.m=0,ve.d="W"in ve?(ve.w+6)%7+ve.W*7-(wt+5)%7:ve.w+ve.U*7-(wt+6)%7);return"Z"in ve?(ve.H+=ve.Z/100|0,ve.M+=ve.Z%100,Sx(ve)):kx(ve)}}function P(Fe,Je,tt,ve){for(var pt=0,kt=Je.length,wt=tt.length,At,ht;pt<kt;){if(ve>=wt)return-1;if(At=Je.charCodeAt(pt++),At===37){if(At=Je.charAt(pt++),ht=T[At in $O?Je.charAt(pt++):At],!ht||(ve=ht(Fe,tt,ve))<0)return-1}else if(At!=tt.charCodeAt(ve++))return-1}return ve}function j(Fe,Je,tt){var ve=u.exec(Je.slice(tt));return ve?(Fe.p=c[ve[0].toLowerCase()],tt+ve[0].length):-1}function A(Fe,Je,tt){var ve=p.exec(Je.slice(tt));return ve?(Fe.w=h[ve[0].toLowerCase()],tt+ve[0].length):-1}function S(Fe,Je,tt){var ve=f.exec(Je.slice(tt));return ve?(Fe.w=d[ve[0].toLowerCase()],tt+ve[0].length):-1}function M(Fe,Je,tt){var ve=b.exec(Je.slice(tt));return ve?(Fe.m=y[ve[0].toLowerCase()],tt+ve[0].length):-1}function O(Fe,Je,tt){var ve=g.exec(Je.slice(tt));return ve?(Fe.m=v[ve[0].toLowerCase()],tt+ve[0].length):-1}function R(Fe,Je,tt){return P(Fe,t,Je,tt)}function H(Fe,Je,tt){return P(Fe,n,Je,tt)}function ee(Fe,Je,tt){return P(Fe,r,Je,tt)}function re(Fe){return o[Fe.getDay()]}function Y(Fe){return i[Fe.getDay()]}function J(Fe){return l[Fe.getMonth()]}function ae(Fe){return s[Fe.getMonth()]}function le(Fe){return a[+(Fe.getHours()>=12)]}function fe(Fe){return 1+~~(Fe.getMonth()/3)}function ge(Fe){return o[Fe.getUTCDay()]}function we(Fe){return i[Fe.getUTCDay()]}function Ve(Fe){return l[Fe.getUTCMonth()]}function Lt(Fe){return s[Fe.getUTCMonth()]}function Nt(Fe){return a[+(Fe.getUTCHours()>=12)]}function Zt(Fe){return 1+~~(Fe.getUTCMonth()/3)}return{format:function(Fe){var Je=C(Fe+="",x);return Je.toString=function(){return Fe},Je},parse:function(Fe){var Je=I(Fe+="",!1);return Je.toString=function(){return Fe},Je},utcFormat:function(Fe){var Je=C(Fe+="",E);return Je.toString=function(){return Fe},Je},utcParse:function(Fe){var Je=I(Fe+="",!0);return Je.toString=function(){return Fe},Je}}}var $O={"-":"",_:" ",0:"0"},la=/^\s*\d+/,cge=/^%/,fge=/[\\^$*+?|[\]().{}]/g;function Dn(e,t,n){var r=e<0?"-":"",a=(r?-e:e)+"",i=a.length;return r+(i<n?new Array(n-i+1).join(t)+a:a)}function dge(e){return e.replace(fge,"\\$&")}function $d(e){return new RegExp("^(?:"+e.map(dge).join("|")+")","i")}function Vd(e){for(var t={},n=-1,r=e.length;++n<r;)t[e[n].toLowerCase()]=n;return t}function pge(e,t,n){var r=la.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function hge(e,t,n){var r=la.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function mge(e,t,n){var r=la.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function gge(e,t,n){var r=la.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function vge(e,t,n){var r=la.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function VO(e,t,n){var r=la.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function jO(e,t,n){var r=la.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function bge(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function yge(e,t,n){var r=la.exec(t.slice(n,n+1));return r?(e.q=r[0]*3-3,n+r[0].length):-1}function xge(e,t,n){var r=la.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function GO(e,t,n){var r=la.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function wge(e,t,n){var r=la.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function HO(e,t,n){var r=la.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function _ge(e,t,n){var r=la.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function Ege(e,t,n){var r=la.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function kge(e,t,n){var r=la.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function Sge(e,t,n){var r=la.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function Cge(e,t,n){var r=cge.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function Tge(e,t,n){var r=la.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function Age(e,t,n){var r=la.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function WO(e,t){return Dn(e.getDate(),t,2)}function Oge(e,t){return Dn(e.getHours(),t,2)}function Mge(e,t){return Dn(e.getHours()%12||12,t,2)}function Rge(e,t){return Dn(1+eE.count(_f(e),e),t,3)}function b9(e,t){return Dn(e.getMilliseconds(),t,3)}function Pge(e,t){return b9(e,t)+"000"}function Ige(e,t){return Dn(e.getMonth()+1,t,2)}function Lge(e,t){return Dn(e.getMinutes(),t,2)}function Nge(e,t){return Dn(e.getSeconds(),t,2)}function Fge(e){var t=e.getDay();return t===0?7:t}function Dge(e,t){return Dn(tE.count(_f(e)-1,e),t,2)}function y9(e){var t=e.getDay();return t>=4||t===0?wf(e):wf.ceil(e)}function Bge(e,t){return e=y9(e),Dn(wf.count(_f(e),e)+(_f(e).getDay()===4),t,2)}function zge(e){return e.getDay()}function Uge(e,t){return Dn(Bg.count(_f(e)-1,e),t,2)}function $ge(e,t){return Dn(e.getFullYear()%100,t,2)}function Vge(e,t){return e=y9(e),Dn(e.getFullYear()%100,t,2)}function jge(e,t){return Dn(e.getFullYear()%1e4,t,4)}function Gge(e,t){var n=e.getDay();return e=n>=4||n===0?wf(e):wf.ceil(e),Dn(e.getFullYear()%1e4,t,4)}function Hge(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+Dn(t/60|0,"0",2)+Dn(t%60,"0",2)}function XO(e,t){return Dn(e.getUTCDate(),t,2)}function Wge(e,t){return Dn(e.getUTCHours(),t,2)}function Xge(e,t){return Dn(e.getUTCHours()%12||12,t,2)}function Yge(e,t){return Dn(1+g9.count(uh(e),e),t,3)}function x9(e,t){return Dn(e.getUTCMilliseconds(),t,3)}function Zge(e,t){return x9(e,t)+"000"}function qge(e,t){return Dn(e.getUTCMonth()+1,t,2)}function Kge(e,t){return Dn(e.getUTCMinutes(),t,2)}function Qge(e,t){return Dn(e.getUTCSeconds(),t,2)}function Jge(e){var t=e.getUTCDay();return t===0?7:t}function eve(e,t){return Dn(v9.count(uh(e)-1,e),t,2)}function w9(e){var t=e.getUTCDay();return t>=4||t===0?Ef(e):Ef.ceil(e)}function tve(e,t){return e=w9(e),Dn(Ef.count(uh(e),e)+(uh(e).getUTCDay()===4),t,2)}function nve(e){return e.getUTCDay()}function rve(e,t){return Dn(zg.count(uh(e)-1,e),t,2)}function ave(e,t){return Dn(e.getUTCFullYear()%100,t,2)}function ive(e,t){return e=w9(e),Dn(e.getUTCFullYear()%100,t,2)}function ove(e,t){return Dn(e.getUTCFullYear()%1e4,t,4)}function sve(e,t){var n=e.getUTCDay();return e=n>=4||n===0?Ef(e):Ef.ceil(e),Dn(e.getUTCFullYear()%1e4,t,4)}function lve(){return"+0000"}function YO(){return"%"}function ZO(e){return+e}function qO(e){return Math.floor(+e/1e3)}var mc,_9;uve({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function uve(e){return mc=uge(e),_9=mc.format,mc.parse,mc.utcFormat,mc.utcParse,mc}var rp=1e3,ap=rp*60,ip=ap*60,ch=ip*24,cve=ch*7,KO=ch*30,Cx=ch*365;function fve(e){return new Date(e)}function dve(e){return e instanceof Date?+e:+new Date(+e)}function E9(e,t,n,r,a,i,o,s,l){var u=KN(Ia,Ia),c=u.invert,f=u.domain,d=l(".%L"),p=l(":%S"),h=l("%I:%M"),g=l("%I %p"),v=l("%a %d"),b=l("%b %d"),y=l("%B"),x=l("%Y"),E=[[o,1,rp],[o,5,5*rp],[o,15,15*rp],[o,30,30*rp],[i,1,ap],[i,5,5*ap],[i,15,15*ap],[i,30,30*ap],[a,1,ip],[a,3,3*ip],[a,6,6*ip],[a,12,12*ip],[r,1,ch],[r,2,2*ch],[n,1,cve],[t,1,KO],[t,3,3*KO],[e,1,Cx]];function T(I){return(o(I)<I?d:i(I)<I?p:a(I)<I?h:r(I)<I?g:t(I)<I?n(I)<I?v:b:e(I)<I?y:x)(I)}function C(I,P,j,A){if(I==null&&(I=10),typeof I=="number"){var S=Math.abs(j-P)/I,M=GN(function(O){return O[2]}).right(E,S);M===E.length?(A=Tw(P/Cx,j/Cx,I),I=e):M?(M=E[S/E[M-1][2]<E[M][2]/S?M-1:M],A=M[1],I=M[0]):(A=Math.max(Tw(P,j,I),1),I=s)}return A==null?I:I.every(A)}return u.invert=function(I){return new Date(c(I))},u.domain=function(I){return arguments.length?f(Rg.call(I,dve)):f().map(fve)},u.ticks=function(I,P){var j=f(),A=j[0],S=j[j.length-1],M=S<A,O;return M&&(O=A,A=S,S=O),O=C(I,A,S,P),O=O?O.range(A,S+1):[],M?O.reverse():O},u.tickFormat=function(I,P){return P==null?T:l(P)},u.nice=function(I,P){var j=f();return(I=C(I,j[0],j[j.length-1],P))?f(n9(j,I)):u},u.copy=function(){return Bv(u,E9(e,t,n,r,a,i,o,s,l))},u}function pve(){return Fl.apply(E9(_f,age,tE,eE,J0e,Q0e,K0e,q0e,_9).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function hve(){var e=0,t=1,n,r,a,i,o=Ia,s=!1,l;function u(c){return isNaN(c=+c)?l:o(a===0?.5:(c=(i(c)-n)*a,s?Math.max(0,Math.min(1,c)):c))}return u.domain=function(c){return arguments.length?(n=i(e=+c[0]),r=i(t=+c[1]),a=n===r?0:1/(r-n),u):[e,t]},u.clamp=function(c){return arguments.length?(s=!!c,u):s},u.interpolator=function(c){return arguments.length?(o=c,u):o},u.unknown=function(c){return arguments.length?(l=c,u):l},function(c){return i=c,n=c(e),r=c(t),a=n===r?0:1/(r-n),u}}function k9(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function S9(){var e=Gf(hve()(Ia));return e.copy=function(){return k9(e,S9())},YN.apply(e,arguments)}function mve(){var e=0,t=.5,n=1,r,a,i,o,s,l=Ia,u,c=!1,f;function d(p){return isNaN(p=+p)?f:(p=.5+((p=+u(p))-a)*(p<a?o:s),l(c?Math.max(0,Math.min(1,p)):p))}return d.domain=function(p){return arguments.length?(r=u(e=+p[0]),a=u(t=+p[1]),i=u(n=+p[2]),o=r===a?0:.5/(a-r),s=a===i?0:.5/(i-a),d):[e,t,n]},d.clamp=function(p){return arguments.length?(c=!!p,d):c},d.interpolator=function(p){return arguments.length?(l=p,d):l},d.unknown=function(p){return arguments.length?(f=p,d):f},function(p){return u=p,r=p(e),a=p(t),i=p(n),o=r===a?0:.5/(a-r),s=a===i?0:.5/(i-a),d}}function C9(){var e=Gf(mve()(Ia));return e.copy=function(){return k9(e,C9())},YN.apply(e,arguments)}var fi,QO,JO,eM,Tx,tM;function nM(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function rM(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?nM(Object(n),!0).forEach(function(r){m(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nM(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var gve=/^(?:(?!0000)[0-9]{4}([-/.]+)(?:(?:0?[1-9]|1[0-2])\1(?:0?[1-9]|1[0-9]|2[0-8])|(?:0?[13-9]|1[0-2])\1(?:29|30)|(?:0?[13578]|1[02])\1(?:31))|(?:[0-9]{2}(?:0[48]|[2468][048]|[13579][26])|(?:0[48]|[2468][048]|[13579][26])00)([-/.]?)0?2\2(?:29))(\s+([01]|([01][0-9]|2[0-3])):([0-9]|[0-5][0-9]):([0-9]|[0-5][0-9]))?$/,vve=(fi={},m(fi,Fn.LINEAR,e9),m(fi,Fn.POWER,a9),m(fi,Fn.LOG,r9),m(fi,Fn.IDENTITY,t9),m(fi,Fn.SEQUENTIAL,S9),m(fi,Fn.TIME,pve),m(fi,Fn.QUANTILE,i9),m(fi,Fn.QUANTIZE,o9),m(fi,Fn.THRESHOLD,s9),m(fi,Fn.CAT,Pg),m(fi,Fn.DIVERGING,C9),fi),bve=(QO=nn(),JO=ln(ye.IGlobalConfigService),QO(eM=(Tx=function(){function e(){Ae(this,e),en(this,"configService",tM,this),m(this,"scaleCache",{}),m(this,"scaleOptions",{})}return Oe(e,[{key:"apply",value:function(n,r){var a=this,i=r.styleAttributeService;n.hooks.init.tap("FeatureScalePlugin",function(){a.scaleOptions=n.getScaleOptions();var o=i.getLayerStyleAttributes(),s=n.getSource().data.dataArray;s.length!==0&&a.caculateScalesForAttributes(o||[],s)}),n.hooks.beforeRenderData.tap("FeatureScalePlugin",function(){a.scaleOptions=n.getScaleOptions();var o=i.getLayerStyleAttributes(),s=n.getSource().data.dataArray;return a.caculateScalesForAttributes(o||[],s),n.layerModelNeedUpdate=!0,!0}),n.hooks.beforeRender.tap("FeatureScalePlugin",function(){if(!n.layerModelNeedUpdate){a.scaleOptions=n.getScaleOptions();var o=i.getLayerStyleAttributes();if(o){var s=n.getSource().data.dataArray;if(s.length===0)return;var l=o.filter(function(u){return u.needRescale});l.length&&a.caculateScalesForAttributes(l,s)}}})}},{key:"isNumber",value:function(n){return!isNaN(parseFloat(n))&&isFinite(n)}},{key:"caculateScalesForAttributes",value:function(n,r){var a=this;this.scaleCache={},n.forEach(function(i){if(i.scale){var o=i.scale;i.name,o.names=a.parseFields(i.scale.field||[]);var s=[];o.names.forEach(function(l){var u;s.push(a.createScale(l,i.name,(u=i.scale)===null||u===void 0?void 0:u.values,r))}),s.some(function(l){return l.type===el.VARIABLE})?(o.type=el.VARIABLE,s.forEach(function(l){var u;if(!o.callback&&o.values!=="text")switch((u=l.option)===null||u===void 0?void 0:u.type){case Fn.LOG:case Fn.LINEAR:case Fn.POWER:if(o.values&&o.values.length>2){var c=l.scale.ticks(o.values.length);l.scale.domain(c)}o.values?l.scale.range(o.values):l.scale.range(l.option.domain);break;case Fn.QUANTILE:case Fn.QUANTIZE:case Fn.THRESHOLD:l.scale.range(o.values);break;case Fn.CAT:o.values?l.scale.range(o.values):l.scale.range(l.option.domain);break;case Fn.DIVERGING:case Fn.SEQUENTIAL:l.scale.interpolator(p0e(o.values));break}if(o.values==="text"){var f;l.scale.range((f=l.option)===null||f===void 0?void 0:f.domain)}})):(o.type=el.CONSTANT,o.defaultValues=s.map(function(l,u){return l.scale(o.names[u])})),o.scalers=s.map(function(l){return{field:l.field,func:l.scale,option:l.option}}),i.needRescale=!1}})}},{key:"parseFields",value:function(n){return Array.isArray(n)?n:xo(n)?n.split("*"):[n]}},{key:"createScale",value:function(n,r,a,i){var o,s,l=this.scaleOptions[r]&&((o=this.scaleOptions[r])===null||o===void 0?void 0:o.field)===n?this.scaleOptions[r]:this.scaleOptions[n],u={field:n,scale:void 0,type:el.VARIABLE,option:l};if(!i||!i.length)return l&&l.type?u.scale=this.createDefaultScale(l):(u.scale=Pg([n]),u.type=el.CONSTANT),u;var c=(s=i.find(function(p){return!ks(p[n])}))===null||s===void 0?void 0:s[n];if(this.isNumber(n)||ks(c)&&!l)u.scale=Pg([n]),u.type=el.CONSTANT;else{var f=l&&l.type||this.getDefaultType(c);a==="text"&&(f=Fn.CAT);var d=this.createScaleConfig(f,n,l,i);u.scale=this.createDefaultScale(d),u.option=d}return u}},{key:"getDefaultType",value:function(n){var r=Fn.LINEAR;return typeof n=="string"&&(r=gve.test(n)?Fn.TIME:Fn.CAT),r}},{key:"createScaleConfig",value:function(n,r,a,i){var o={type:n},s=(i==null?void 0:i.map(function(c){return c[r]}))||[];if(a!=null&&a.domain)o.domain=a==null?void 0:a.domain;else if(n!==Fn.CAT&&n!==Fn.QUANTILE&&n!==Fn.DIVERGING)o.domain=SO(s);else if(n===Fn.CAT)o.domain=JL(s);else if(n===Fn.QUANTILE)o.domain=s;else if(n===Fn.DIVERGING){var l=SO(s),u=(a==null?void 0:a.neutral)!==void 0?a==null?void 0:a.neutral:(l[0]+l[1])/2;o.domain=[l[0],u,l[1]]}return rM(rM({},o),a)}},{key:"createDefaultScale",value:function(n){var r=n.type,a=n.domain,i=n.unknown,o=n.clamp,s=n.nice,l=vve[r]();return a&&l.domain&&l.domain(a),i&&l.unknown(i),o!==void 0&&l.clamp&&l.clamp(o),s!==void 0&&l.nice&&l.nice(s),l}}]),e}(),tM=Jt(Tx.prototype,"configService",[JO],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Tx))||eM),aM,iM,oM,sM,Qm,lM,uM;function cM(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function yve(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?cM(Object(n),!0).forEach(function(r){m(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):cM(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var xve=(aM=nn(),iM=ln(ye.ICameraService),oM=ln(ye.IRendererService),aM(sM=(Qm=function(){function e(){Ae(this,e),en(this,"cameraService",lM,this),en(this,"rendererService",uM,this)}return Oe(e,[{key:"apply",value:function(n){n.hooks.beforeRender.tap("LayerAnimateStylePlugin",function(){n.models.forEach(function(r){r.addUniforms(yve({},n.layerModel.getAnimateUniforms()))})})}}]),e}(),lM=Jt(Qm.prototype,"cameraService",[iM],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),uM=Jt(Qm.prototype,"rendererService",[oM],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Qm))||sM),fM,dM,wve=(fM=nn(),fM(dM=function(){function e(){Ae(this,e)}return Oe(e,[{key:"apply",value:function(n){n.hooks.init.tap("LayerModelPlugin",function(){n.prepareBuildModel(),n.buildModels(),n.styleNeedUpdate=!1}),n.hooks.beforeRenderData.tap("DataSourcePlugin",function(){return n.prepareBuildModel(),n.clearModels(),n.buildModels(),n.layerModelNeedUpdate=!1,!1})}}]),e}())||dM),pM,hM,_ve=(pM=nn(),pM(hM=function(){function e(){Ae(this,e)}return Oe(e,[{key:"apply",value:function(n){n.hooks.afterInit.tap("LayerStylePlugin",function(){n.updateLayerConfig({});var r=n.getLayerConfig(),a=r.autoFit,i=r.fitBoundsOptions;a&&setTimeout(function(){n.fitBounds(i)},100)})}}]),e}())||hM),mM,gM,Eve=["type"];function vM(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function op(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?vM(Object(n),!0).forEach(function(r){m(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vM(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var bM={directional:{lights:"u_DirectionalLights",num:"u_NumOfDirectionalLights"},spot:{lights:"u_SpotLights",num:"u_NumOfSpotLights"}},kve={type:"directional",direction:[1,10.5,12],ambient:[.2,.2,.2],diffuse:[.6,.6,.6],specular:[.1,.1,.1]},Sve={direction:[0,0,0],ambient:[0,0,0],diffuse:[0,0,0],specular:[0,0,0]},Cve={position:[0,0,0],direction:[0,0,0],ambient:[0,0,0],diffuse:[0,0,0],specular:[0,0,0],constant:1,linear:0,quadratic:0,angle:14,exponent:40,blur:5};function Tve(e){var t={u_DirectionalLights:new Array(3).fill(op({},Sve)),u_NumOfDirectionalLights:0,u_SpotLights:new Array(3).fill(op({},Cve)),u_NumOfSpotLights:0};return(!e||!e.length)&&(e=[kve]),e.forEach(function(n,r){var a=n.type,i=a===void 0?"directional":a,o=On(n,Eve),s=bM[i].lights,l=bM[i].num,u=t[l];t[s][u]=op(op({},t[s][u]),o),t[l]++}),t}var Ave=(mM=nn(),mM(gM=function(){function e(){Ae(this,e)}return Oe(e,[{key:"apply",value:function(n){n.hooks.beforeRender.tap("LightingPlugin",function(){var r=n.getLayerConfig(),a=r.enableLighting;a&&n.models.forEach(function(i){return i.addUniforms(op({},Tve()))})})}}]),e}())||gM),yM,xM,wM,Ax,_M,Ove=(yM=nn(),xM=ln(ye.IGlobalConfigService),yM(wM=(Ax=function(){function e(){Ae(this,e),en(this,"configService",_M,this),m(this,"enabled",void 0)}return Oe(e,[{key:"apply",value:function(n,r){var a=this,i=r.rendererService,o=r.postProcessingPassFactory,s=r.normalPassFactory;n.hooks.init.tap("MultiPassRendererPlugin",function(){var l=n.getLayerConfig(),u=l.enableMultiPassRenderer,c=l.passes,f=c===void 0?[]:c;a.enabled=!!u&&n.getLayerConfig().enableMultiPassRenderer!==!1,a.enabled&&(n.multiPassRenderer=SN(n,f,o,s),n.multiPassRenderer.setRenderFlag(!0))}),n.hooks.beforeRender.tap("MultiPassRendererPlugin",function(){if(a.enabled){var l=i.getViewportSize(),u=l.width,c=l.height;n.multiPassRenderer.resize(u,c)}})}}]),e}(),_M=Jt(Ax.prototype,"configService",[xM],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ax))||wM),EM,kM,Jm={NONE:0,ENCODE:1,HIGHLIGHT:2},Mve=(EM=nn(),EM(kM=function(){function e(){Ae(this,e)}return Oe(e,[{key:"apply",value:function(n,r){r.rendererService;var a=r.styleAttributeService;n.hooks.init.tap("PixelPickingPlugin",function(){a.registerStyleAttribute({name:"pickingColor",type:vn.Attribute,descriptor:{name:"a_PickingColor",buffer:{data:[],type:V.FLOAT},size:3,update:function(o,s){var l=o.id;return Jp(l)}}})}),n.hooks.beforePickingEncode.tap("PixelPickingPlugin",function(){var i=n.getLayerConfig(),o=i.enablePicking;o&&n.isVisible()&&n.models.forEach(function(s){return s.addUniforms({u_PickingStage:Jm.ENCODE})})}),n.hooks.afterPickingEncode.tap("PixelPickingPlugin",function(){var i=n.getLayerConfig(),o=i.enablePicking;o&&n.isVisible()&&n.models.forEach(function(s){return s.addUniforms({u_PickingStage:Jm.HIGHLIGHT})})}),n.hooks.beforeHighlight.tap("PixelPickingPlugin",function(i){var o=n.getLayerConfig(),s=o.highlightColor,l=o.activeMix,u=l===void 0?0:l,c=typeof s=="string"?Ko(s):s||[1,0,0,1];n.updateLayerConfig({pickedFeatureID:Go(new Uint8Array(i))}),n.models.forEach(function(f){return f.addUniforms({u_PickingStage:Jm.HIGHLIGHT,u_PickingColor:i,u_HighlightColor:c.map(function(d){return d*255}),u_activeMix:u})})}),n.hooks.beforeSelect.tap("PixelPickingPlugin",function(i){var o=n.getLayerConfig(),s=o.selectColor,l=o.selectMix,u=l===void 0?0:l,c=typeof s=="string"?Ko(s):s||[1,0,0,1];n.updateLayerConfig({pickedFeatureID:Go(new Uint8Array(i))}),n.models.forEach(function(f){return f.addUniforms({u_PickingStage:Jm.HIGHLIGHT,u_PickingColor:i,u_HighlightColor:c.map(function(d){return d*255}),u_activeMix:u,u_CurrentSelectedId:i,u_SelectColor:c.map(function(d){return d*255}),u_EnableSelect:1})})})}}]),e}())||kM),SM,CM,Rve=(SM=nn(),SM(CM=function(){function e(){Ae(this,e)}return Oe(e,[{key:"apply",value:function(n,r){var a=this,i=r.styleAttributeService;n.hooks.init.tap("RegisterStyleAttributePlugin",function(){a.registerBuiltinAttributes(i)})}},{key:"registerBuiltinAttributes",value:function(n){n.registerStyleAttribute({name:"position",type:vn.Attribute,descriptor:{name:"a_Position",buffer:{data:[],type:V.FLOAT},size:3,update:function(a,i,o){return o.length===2?[o[0],o[1],0]:[o[0],o[1],o[2]]}}}),n.registerStyleAttribute({name:"filter",type:vn.Attribute,descriptor:{name:"filter",buffer:{usage:V.DYNAMIC_DRAW,data:[],type:V.FLOAT},size:1,update:function(a,i){var o=a.filter;return o?[1]:[0]}}}),n.registerStyleAttribute({name:"color",type:vn.Attribute,descriptor:{name:"a_Color",buffer:{usage:V.DYNAMIC_DRAW,data:[],type:V.FLOAT},size:4,update:function(a,i){var o=a.color;return!o||!o.length?[1,1,1,1]:o}}}),n.registerStyleAttribute({name:"vertexId",type:vn.Attribute,descriptor:{name:"a_vertexId",buffer:{usage:V.DYNAMIC_DRAW,data:[],type:V.FLOAT},size:1,update:function(a,i,o,s){return[i]}}})}}]),e}())||CM),TM,AM,OM,MM,RM,PM,gc,IM,LM,NM,FM,Pve=(TM=nn(),AM=ln(ye.ICameraService),OM=ln(ye.ICoordinateSystemService),MM=ln(ye.IRendererService),RM=ln(ye.IMapService),TM(PM=(gc=function(){function e(){Ae(this,e),en(this,"cameraService",IM,this),en(this,"coordinateSystemService",LM,this),en(this,"rendererService",NM,this),en(this,"mapService",FM,this)}return Oe(e,[{key:"apply",value:function(n){var r=this,a=this.mapService.version,i=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],o=[0,0];n.hooks.beforeRender.tap("ShaderUniformPlugin",function(){var s=n.getLayerConfig().tileOrigin;if(r.coordinateSystemService.refresh(s),a==="GAODE2.x"){var l=r.getLayerCenter(n);r.mapService.map.customCoords.setCenter(l),r.mapService.setCustomCoordCenter(l),i=r.mapService.map.customCoords.getMVPMatrix(),o=r.mapService.getCustomCoordCenter()}var u=r.rendererService.getViewportSize(),c=u.width,f=u.height;n.models.forEach(function(d){var p;d.addUniforms((p={},m(p,Jl.ProjectionMatrix,r.cameraService.getProjectionMatrix()),m(p,Jl.ViewMatrix,r.cameraService.getViewMatrix()),m(p,Jl.ViewProjectionMatrix,r.cameraService.getViewProjectionMatrix()),m(p,Jl.Zoom,r.cameraService.getZoom()),m(p,Jl.ZoomScale,r.cameraService.getZoomScale()),m(p,Jl.FocalDistance,r.cameraService.getFocalDistance()),m(p,Jl.CameraPosition,r.cameraService.getCameraPosition()),m(p,Kl.CoordinateSystem,r.coordinateSystemService.getCoordinateSystem()),m(p,Kl.ViewportCenter,r.coordinateSystemService.getViewportCenter()),m(p,Kl.ViewportCenterProjection,r.coordinateSystemService.getViewportCenterProjection()),m(p,Kl.PixelsPerDegree,r.coordinateSystemService.getPixelsPerDegree()),m(p,Kl.PixelsPerDegree2,r.coordinateSystemService.getPixelsPerDegree2()),m(p,Kl.PixelsPerMeter,r.coordinateSystemService.getPixelsPerMeter()),m(p,Kl.Mvp,i),m(p,"u_SceneCenterMKT",o),m(p,"u_ViewportSize",[c,f]),m(p,"u_ModelMatrix",r.cameraService.getModelMatrix()),m(p,"u_DevicePixelRatio",Hn.devicePixelRatio),m(p,"u_PickingBuffer",n.getLayerConfig().pickingBuffer||0),m(p,"u_shaderPick",Number(n.getShaderPickStat())),p))})})}},{key:"getLayerCenter",value:function(n){var r=n.getSource();return r.center}}]),e}(),IM=Jt(gc.prototype,"cameraService",[AM],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),LM=Jt(gc.prototype,"coordinateSystemService",[OM],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),NM=Jt(gc.prototype,"rendererService",[MM],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),FM=Jt(gc.prototype,"mapService",[RM],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),gc))||PM),DM,BM,Ive=(DM=nn(),DM(BM=function(){function e(){Ae(this,e)}return Oe(e,[{key:"apply",value:function(n){n.hooks.beforeRender.tap("UpdateModelPlugin",function(){n.layerModel&&n.layerModel.needUpdate()})}}]),e}())||BM),zM,UM,Lve=(zM=nn(),zM(UM=function(){function e(){Ae(this,e)}return Oe(e,[{key:"apply",value:function(n,r){var a=this,i=r.styleAttributeService;n.hooks.init.tap("UpdateStyleAttributePlugin",function(){a.initStyleAttribute(n,{styleAttributeService:i})}),n.hooks.beforeRender.tap("UpdateStyleAttributePlugin",function(){n.layerModelNeedUpdate||a.updateStyleAtrribute(n,{styleAttributeService:i})})}},{key:"updateStyleAtrribute",value:function(n,r){var a=r.styleAttributeService,i=a.getLayerStyleAttributes()||[],o=a.getLayerStyleAttribute("filter");if(a.getLayerStyleAttribute("shape"),o&&o.needRegenerateVertices){n.layerModelNeedUpdate=!0,i.forEach(function(s){return s.needRegenerateVertices=!1});return}i.filter(function(s){return s.needRegenerateVertices}).forEach(function(s){a.updateAttributeByFeatureRange(s.name,n.getEncodedData(),s.featureRange.startIndex,s.featureRange.endIndex),s.needRegenerateVertices=!1})}},{key:"initStyleAttribute",value:function(n,r){var a=r.styleAttributeService,i=a.getLayerStyleAttributes()||[];i.filter(function(o){return o.needRegenerateVertices}).forEach(function(o){a.updateAttributeByFeatureRange(o.name,n.getEncodedData(),o.featureRange.startIndex,o.featureRange.endIndex),o.needRegenerateVertices=!1})}}]),e}())||UM);ka.bind(ye.ILayerPlugin).to(n0e).inRequestScope();ka.bind(ye.ILayerPlugin).to(Rve).inRequestScope();ka.bind(ye.ILayerPlugin).to(bve).inRequestScope();ka.bind(ye.ILayerPlugin).to(t0e).inRequestScope();ka.bind(ye.ILayerPlugin).to(_ve).inRequestScope();ka.bind(ye.ILayerPlugin).to(Lve).inRequestScope();ka.bind(ye.ILayerPlugin).to(Ive).inRequestScope();ka.bind(ye.ILayerPlugin).to(Ove).inRequestScope();ka.bind(ye.ILayerPlugin).to(Pve).inRequestScope();ka.bind(ye.ILayerPlugin).to(xve).inRequestScope();ka.bind(ye.ILayerPlugin).to(Ave).inRequestScope();ka.bind(ye.ILayerPlugin).to(Mve).inRequestScope();ka.bind(ye.ILayerPlugin).to(wve).inRequestScope();var T9={exports:{}},Ox={3:"abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile",5:"class enum extends super const export import",6:"enum",strict:"implements interface let package private protected public static yield",strictBind:"eval arguments"},Mx="break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this",Nve={5:Mx,"5module":Mx+" export import",6:Mx+" const class extends export import super"},Fve=/^in(stanceof)?$/,aE="\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u08A0-\u08B4\u08B6-\u08C7\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309B-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\u9FFC\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7BF\uA7C2-\uA7CA\uA7F5-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC",A9="\u200C\u200D\xB7\u0300-\u036F\u0387\u0483-\u0487\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u0669\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u06F0-\u06F9\u0711\u0730-\u074A\u07A6-\u07B0\u07C0-\u07C9\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u08D3-\u08E1\u08E3-\u0903\u093A-\u093C\u093E-\u094F\u0951-\u0957\u0962\u0963\u0966-\u096F\u0981-\u0983\u09BC\u09BE-\u09C4\u09C7\u09C8\u09CB-\u09CD\u09D7\u09E2\u09E3\u09E6-\u09EF\u09FE\u0A01-\u0A03\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A66-\u0A71\u0A75\u0A81-\u0A83\u0ABC\u0ABE-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AE2\u0AE3\u0AE6-\u0AEF\u0AFA-\u0AFF\u0B01-\u0B03\u0B3C\u0B3E-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B55-\u0B57\u0B62\u0B63\u0B66-\u0B6F\u0B82\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD7\u0BE6-\u0BEF\u0C00-\u0C04\u0C3E-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C66-\u0C6F\u0C81-\u0C83\u0CBC\u0CBE-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0CE6-\u0CEF\u0D00-\u0D03\u0D3B\u0D3C\u0D3E-\u0D44\u0D46-\u0D48\u0D4A-\u0D4D\u0D57\u0D62\u0D63\u0D66-\u0D6F\u0D81-\u0D83\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0E50-\u0E59\u0EB1\u0EB4-\u0EBC\u0EC8-\u0ECD\u0ED0-\u0ED9\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E\u0F3F\u0F71-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102B-\u103E\u1040-\u1049\u1056-\u1059\u105E-\u1060\u1062-\u1064\u1067-\u106D\u1071-\u1074\u1082-\u108D\u108F-\u109D\u135D-\u135F\u1369-\u1371\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17B4-\u17D3\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u18A9\u1920-\u192B\u1930-\u193B\u1946-\u194F\u19D0-\u19DA\u1A17-\u1A1B\u1A55-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AB0-\u1ABD\u1ABF\u1AC0\u1B00-\u1B04\u1B34-\u1B44\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1B82\u1BA1-\u1BAD\u1BB0-\u1BB9\u1BE6-\u1BF3\u1C24-\u1C37\u1C40-\u1C49\u1C50-\u1C59\u1CD0-\u1CD2\u1CD4-\u1CE8\u1CED\u1CF4\u1CF7-\u1CF9\u1DC0-\u1DF9\u1DFB-\u1DFF\u203F\u2040\u2054\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA620-\uA629\uA66F\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA823-\uA827\uA82C\uA880\uA881\uA8B4-\uA8C5\uA8D0-\uA8D9\uA8E0-\uA8F1\uA8FF-\uA909\uA926-\uA92D\uA947-\uA953\uA980-\uA983\uA9B3-\uA9C0\uA9D0-\uA9D9\uA9E5\uA9F0-\uA9F9\uAA29-\uAA36\uAA43\uAA4C\uAA4D\uAA50-\uAA59\uAA7B-\uAA7D\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEB-\uAAEF\uAAF5\uAAF6\uABE3-\uABEA\uABEC\uABED\uABF0-\uABF9\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFF10-\uFF19\uFF3F",Dve=new RegExp("["+aE+"]"),Bve=new RegExp("["+aE+A9+"]");aE=A9=null;var O9=[0,11,2,25,2,18,2,1,2,14,3,13,35,122,70,52,268,28,4,48,48,31,14,29,6,37,11,29,3,35,5,7,2,4,43,157,19,35,5,35,5,39,9,51,157,310,10,21,11,7,153,5,3,0,2,43,2,1,4,0,3,22,11,22,10,30,66,18,2,1,11,21,11,25,71,55,7,1,65,0,16,3,2,2,2,28,43,28,4,28,36,7,2,27,28,53,11,21,11,18,14,17,111,72,56,50,14,50,14,35,349,41,7,1,79,28,11,0,9,21,107,20,28,22,13,52,76,44,33,24,27,35,30,0,3,0,9,34,4,0,13,47,15,3,22,0,2,0,36,17,2,24,85,6,2,0,2,3,2,14,2,9,8,46,39,7,3,1,3,21,2,6,2,1,2,4,4,0,19,0,13,4,159,52,19,3,21,2,31,47,21,1,2,0,185,46,42,3,37,47,21,0,60,42,14,0,72,26,230,43,117,63,32,7,3,0,3,7,2,1,2,23,16,0,2,0,95,7,3,38,17,0,2,0,29,0,11,39,8,0,22,0,12,45,20,0,35,56,264,8,2,36,18,0,50,29,113,6,2,1,2,37,22,0,26,5,2,1,2,31,15,0,328,18,190,0,80,921,103,110,18,195,2749,1070,4050,582,8634,568,8,30,114,29,19,47,17,3,32,20,6,18,689,63,129,74,6,0,67,12,65,1,2,0,29,6135,9,1237,43,8,8952,286,50,2,18,3,9,395,2309,106,6,12,4,8,8,9,5991,84,2,70,2,1,3,0,3,1,3,3,2,11,2,0,2,6,2,64,2,3,3,7,2,6,2,27,2,3,2,4,2,0,4,6,2,339,3,24,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,7,2357,44,11,6,17,0,370,43,1301,196,60,67,8,0,1205,3,2,26,2,1,2,0,3,0,2,9,2,3,2,0,2,0,7,0,5,0,2,0,2,0,2,2,2,1,2,0,3,0,2,0,2,0,2,0,2,0,2,1,2,0,3,3,2,6,2,3,2,3,2,0,2,9,2,16,6,2,2,4,2,16,4421,42717,35,4148,12,221,3,5761,15,7472,3104,541,1507,4938],zve=[509,0,227,0,150,4,294,9,1368,2,2,1,6,3,41,2,5,0,166,1,574,3,9,9,370,1,154,10,176,2,54,14,32,9,16,3,46,10,54,9,7,2,37,13,2,9,6,1,45,0,13,2,49,13,9,3,2,11,83,11,7,0,161,11,6,9,7,3,56,1,2,6,3,1,3,2,10,0,11,1,3,6,4,4,193,17,10,9,5,0,82,19,13,9,214,6,3,8,28,1,83,16,16,9,82,12,9,9,84,14,5,9,243,14,166,9,71,5,2,1,3,3,2,0,2,1,13,9,120,6,3,6,4,0,29,9,41,6,2,3,9,0,10,10,47,15,406,7,2,7,17,9,57,21,2,13,123,5,4,0,2,1,2,6,2,0,9,9,49,4,2,1,2,4,9,9,330,3,19306,9,135,4,60,6,26,9,1014,0,2,54,8,3,82,0,12,1,19628,1,5319,4,4,5,9,7,3,6,31,3,149,2,1418,49,513,54,5,49,9,0,15,0,23,4,2,14,1361,6,2,16,3,6,2,1,2,4,262,6,10,9,419,13,1495,6,110,6,6,9,4759,9,787719,239];function Rw(e,t){for(var n=65536,r=0;r<t.length;r+=2){if(n+=t[r],n>e)return!1;if(n+=t[r+1],n>=e)return!0}}function Rl(e,t){return e<65?e===36:e<91?!0:e<97?e===95:e<123?!0:e<=65535?e>=170&&Dve.test(String.fromCharCode(e)):t===!1?!1:Rw(e,O9)}function kf(e,t){return e<48?e===36:e<58?!0:e<65?!1:e<91?!0:e<97?e===95:e<123?!0:e<=65535?e>=170&&Bve.test(String.fromCharCode(e)):t===!1?!1:Rw(e,O9)||Rw(e,zve)}var Nn=function(t,n){n===void 0&&(n={}),this.label=t,this.keyword=n.keyword,this.beforeExpr=!!n.beforeExpr,this.startsExpr=!!n.startsExpr,this.isLoop=!!n.isLoop,this.isAssign=!!n.isAssign,this.prefix=!!n.prefix,this.postfix=!!n.postfix,this.binop=n.binop||null,this.updateContext=null};function Ni(e,t){return new Nn(e,{beforeExpr:!0,binop:t})}var Fi={beforeExpr:!0},di={startsExpr:!0},iE={};function Tn(e,t){return t===void 0&&(t={}),t.keyword=e,iE[e]=new Nn(e,t)}var z={num:new Nn("num",di),regexp:new Nn("regexp",di),string:new Nn("string",di),name:new Nn("name",di),eof:new Nn("eof"),bracketL:new Nn("[",{beforeExpr:!0,startsExpr:!0}),bracketR:new Nn("]"),braceL:new Nn("{",{beforeExpr:!0,startsExpr:!0}),braceR:new Nn("}"),parenL:new Nn("(",{beforeExpr:!0,startsExpr:!0}),parenR:new Nn(")"),comma:new Nn(",",Fi),semi:new Nn(";",Fi),colon:new Nn(":",Fi),dot:new Nn("."),question:new Nn("?",Fi),questionDot:new Nn("?."),arrow:new Nn("=>",Fi),template:new Nn("template"),invalidTemplate:new Nn("invalidTemplate"),ellipsis:new Nn("...",Fi),backQuote:new Nn("`",di),dollarBraceL:new Nn("${",{beforeExpr:!0,startsExpr:!0}),eq:new Nn("=",{beforeExpr:!0,isAssign:!0}),assign:new Nn("_=",{beforeExpr:!0,isAssign:!0}),incDec:new Nn("++/--",{prefix:!0,postfix:!0,startsExpr:!0}),prefix:new Nn("!/~",{beforeExpr:!0,prefix:!0,startsExpr:!0}),logicalOR:Ni("||",1),logicalAND:Ni("&&",2),bitwiseOR:Ni("|",3),bitwiseXOR:Ni("^",4),bitwiseAND:Ni("&",5),equality:Ni("==/!=/===/!==",6),relational:Ni("</>/<=/>=",7),bitShift:Ni("<</>>/>>>",8),plusMin:new Nn("+/-",{beforeExpr:!0,binop:9,prefix:!0,startsExpr:!0}),modulo:Ni("%",10),star:Ni("*",10),slash:Ni("/",10),starstar:new Nn("**",{beforeExpr:!0}),coalesce:Ni("??",1),_break:Tn("break"),_case:Tn("case",Fi),_catch:Tn("catch"),_continue:Tn("continue"),_debugger:Tn("debugger"),_default:Tn("default",Fi),_do:Tn("do",{isLoop:!0,beforeExpr:!0}),_else:Tn("else",Fi),_finally:Tn("finally"),_for:Tn("for",{isLoop:!0}),_function:Tn("function",di),_if:Tn("if"),_return:Tn("return",Fi),_switch:Tn("switch"),_throw:Tn("throw",Fi),_try:Tn("try"),_var:Tn("var"),_const:Tn("const"),_while:Tn("while",{isLoop:!0}),_with:Tn("with"),_new:Tn("new",{beforeExpr:!0,startsExpr:!0}),_this:Tn("this",di),_super:Tn("super",di),_class:Tn("class",di),_extends:Tn("extends",Fi),_export:Tn("export"),_import:Tn("import",di),_null:Tn("null",di),_true:Tn("true",di),_false:Tn("false",di),_in:Tn("in",{beforeExpr:!0,binop:7}),_instanceof:Tn("instanceof",{beforeExpr:!0,binop:7}),_typeof:Tn("typeof",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_void:Tn("void",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_delete:Tn("delete",{beforeExpr:!0,prefix:!0,startsExpr:!0})},no=/\r\n?|\n|\u2028|\u2029/,fh=new RegExp(no.source,"g");function Nh(e,t){return e===10||e===13||!t&&(e===8232||e===8233)}var M9=/[\u1680\u2000-\u200a\u202f\u205f\u3000\ufeff]/,Wi=/(?:\s|\/\/.*|\/\*[^]*?\*\/)*/g,R9=Object.prototype,Uve=R9.hasOwnProperty,$ve=R9.toString;function zv(e,t){return Uve.call(e,t)}var $M=Array.isArray||function(e){return $ve.call(e)==="[object Array]"};function mu(e){return new RegExp("^(?:"+e.replace(/ /g,"|")+")$")}var dh=function(t,n){this.line=t,this.column=n};dh.prototype.offset=function(t){return new dh(this.line,this.column+t)};var Uv=function(t,n,r){this.start=n,this.end=r,t.sourceFile!==null&&(this.source=t.sourceFile)};function P9(e,t){for(var n=1,r=0;;){fh.lastIndex=r;var a=fh.exec(e);if(a&&a.index<t)++n,r=a.index+a[0].length;else return new dh(n,t-r)}}var Pw={ecmaVersion:10,sourceType:"script",onInsertedSemicolon:null,onTrailingComma:null,allowReserved:null,allowReturnOutsideFunction:!1,allowImportExportEverywhere:!1,allowAwaitOutsideFunction:!1,allowHashBang:!1,locations:!1,onToken:null,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null,preserveParens:!1};function Vve(e){var t={};for(var n in Pw)t[n]=e&&zv(e,n)?e[n]:Pw[n];if(t.ecmaVersion>=2015&&(t.ecmaVersion-=2009),t.allowReserved==null&&(t.allowReserved=t.ecmaVersion<5),$M(t.onToken)){var r=t.onToken;t.onToken=function(a){return r.push(a)}}return $M(t.onComment)&&(t.onComment=jve(t,t.onComment)),t}function jve(e,t){return function(n,r,a,i,o,s){var l={type:n?"Block":"Line",value:r,start:a,end:i};e.locations&&(l.loc=new Uv(this,o,s)),e.ranges&&(l.range=[a,i]),t.push(l)}}var ph=1,Fh=2,oE=ph|Fh,I9=4,L9=8,N9=16,F9=32,D9=64,B9=128;function sE(e,t){return Fh|(e?I9:0)|(t?L9:0)}var VM=0,lE=1,Ss=2,z9=3,U9=4,$9=5,jr=function(t,n,r){this.options=t=Vve(t),this.sourceFile=t.sourceFile,this.keywords=mu(Nve[t.ecmaVersion>=6?6:t.sourceType==="module"?"5module":5]);var a="";if(t.allowReserved!==!0){for(var i=t.ecmaVersion;!(a=Ox[i]);i--);t.sourceType==="module"&&(a+=" await")}this.reservedWords=mu(a);var o=(a?a+" ":"")+Ox.strict;this.reservedWordsStrict=mu(o),this.reservedWordsStrictBind=mu(o+" "+Ox.strictBind),this.input=String(n),this.containsEsc=!1,r?(this.pos=r,this.lineStart=this.input.lastIndexOf(`
`,r-1)+1,this.curLine=this.input.slice(0,this.lineStart).split(no).length):(this.pos=this.lineStart=0,this.curLine=1),this.type=z.eof,this.value=null,this.start=this.end=this.pos,this.startLoc=this.endLoc=this.curPosition(),this.lastTokEndLoc=this.lastTokStartLoc=null,this.lastTokStart=this.lastTokEnd=this.pos,this.context=this.initialContext(),this.exprAllowed=!0,this.inModule=t.sourceType==="module",this.strict=this.inModule||this.strictDirective(this.pos),this.potentialArrowAt=-1,this.yieldPos=this.awaitPos=this.awaitIdentPos=0,this.labels=[],this.undefinedExports={},this.pos===0&&t.allowHashBang&&this.input.slice(0,2)==="#!"&&this.skipLineComment(2),this.scopeStack=[],this.enterScope(ph),this.regexpState=null},Uu={inFunction:{configurable:!0},inGenerator:{configurable:!0},inAsync:{configurable:!0},allowSuper:{configurable:!0},allowDirectSuper:{configurable:!0},treatFunctionsAsVar:{configurable:!0}};jr.prototype.parse=function(){var t=this.options.program||this.startNode();return this.nextToken(),this.parseTopLevel(t)};Uu.inFunction.get=function(){return(this.currentVarScope().flags&Fh)>0};Uu.inGenerator.get=function(){return(this.currentVarScope().flags&L9)>0};Uu.inAsync.get=function(){return(this.currentVarScope().flags&I9)>0};Uu.allowSuper.get=function(){return(this.currentThisScope().flags&D9)>0};Uu.allowDirectSuper.get=function(){return(this.currentThisScope().flags&B9)>0};Uu.treatFunctionsAsVar.get=function(){return this.treatFunctionsAsVarInScope(this.currentScope())};jr.prototype.inNonArrowFunction=function(){return(this.currentThisScope().flags&Fh)>0};jr.extend=function(){for(var t=[],n=arguments.length;n--;)t[n]=arguments[n];for(var r=this,a=0;a<t.length;a++)r=t[a](r);return r};jr.parse=function(t,n){return new this(n,t).parse()};jr.parseExpressionAt=function(t,n,r){var a=new this(r,t,n);return a.nextToken(),a.parseExpression()};jr.tokenizer=function(t,n){return new this(n,t)};Object.defineProperties(jr.prototype,Uu);var qa=jr.prototype,Gve=/^(?:'((?:\\.|[^'\\])*?)'|"((?:\\.|[^"\\])*?)")/;qa.strictDirective=function(e){for(;;){Wi.lastIndex=e,e+=Wi.exec(this.input)[0].length;var t=Gve.exec(this.input.slice(e));if(!t)return!1;if((t[1]||t[2])==="use strict"){Wi.lastIndex=e+t[0].length;var n=Wi.exec(this.input),r=n.index+n[0].length,a=this.input.charAt(r);return a===";"||a==="}"||no.test(n[0])&&!(/[(`.[+\-/*%<>=,?^&]/.test(a)||a==="!"&&this.input.charAt(r+1)==="=")}e+=t[0].length,Wi.lastIndex=e,e+=Wi.exec(this.input)[0].length,this.input[e]===";"&&e++}};qa.eat=function(e){return this.type===e?(this.next(),!0):!1};qa.isContextual=function(e){return this.type===z.name&&this.value===e&&!this.containsEsc};qa.eatContextual=function(e){return this.isContextual(e)?(this.next(),!0):!1};qa.expectContextual=function(e){this.eatContextual(e)||this.unexpected()};qa.canInsertSemicolon=function(){return this.type===z.eof||this.type===z.braceR||no.test(this.input.slice(this.lastTokEnd,this.start))};qa.insertSemicolon=function(){if(this.canInsertSemicolon())return this.options.onInsertedSemicolon&&this.options.onInsertedSemicolon(this.lastTokEnd,this.lastTokEndLoc),!0};qa.semicolon=function(){!this.eat(z.semi)&&!this.insertSemicolon()&&this.unexpected()};qa.afterTrailingComma=function(e,t){if(this.type===e)return this.options.onTrailingComma&&this.options.onTrailingComma(this.lastTokStart,this.lastTokStartLoc),t||this.next(),!0};qa.expect=function(e){this.eat(e)||this.unexpected()};qa.unexpected=function(e){this.raise(e!=null?e:this.start,"Unexpected token")};function $v(){this.shorthandAssign=this.trailingComma=this.parenthesizedAssign=this.parenthesizedBind=this.doubleProto=-1}qa.checkPatternErrors=function(e,t){if(!!e){e.trailingComma>-1&&this.raiseRecoverable(e.trailingComma,"Comma is not permitted after the rest element");var n=t?e.parenthesizedAssign:e.parenthesizedBind;n>-1&&this.raiseRecoverable(n,"Parenthesized pattern")}};qa.checkExpressionErrors=function(e,t){if(!e)return!1;var n=e.shorthandAssign,r=e.doubleProto;if(!t)return n>=0||r>=0;n>=0&&this.raise(n,"Shorthand property assignments are valid only in destructuring patterns"),r>=0&&this.raiseRecoverable(r,"Redefinition of __proto__ property")};qa.checkYieldAwaitInDefaultParams=function(){this.yieldPos&&(!this.awaitPos||this.yieldPos<this.awaitPos)&&this.raise(this.yieldPos,"Yield expression cannot be a default value"),this.awaitPos&&this.raise(this.awaitPos,"Await expression cannot be a default value")};qa.isSimpleAssignTarget=function(e){return e.type==="ParenthesizedExpression"?this.isSimpleAssignTarget(e.expression):e.type==="Identifier"||e.type==="MemberExpression"};var gn=jr.prototype;gn.parseTopLevel=function(e){var t={};for(e.body||(e.body=[]);this.type!==z.eof;){var n=this.parseStatement(null,!0,t);e.body.push(n)}if(this.inModule)for(var r=0,a=Object.keys(this.undefinedExports);r<a.length;r+=1){var i=a[r];this.raiseRecoverable(this.undefinedExports[i].start,"Export '"+i+"' is not defined")}return this.adaptDirectivePrologue(e.body),this.next(),e.sourceType=this.options.sourceType,this.finishNode(e,"Program")};var uE={kind:"loop"},Hve={kind:"switch"};gn.isLet=function(e){if(this.options.ecmaVersion<6||!this.isContextual("let"))return!1;Wi.lastIndex=this.pos;var t=Wi.exec(this.input),n=this.pos+t[0].length,r=this.input.charCodeAt(n);if(r===91)return!0;if(e)return!1;if(r===123)return!0;if(Rl(r,!0)){for(var a=n+1;kf(this.input.charCodeAt(a),!0);)++a;var i=this.input.slice(n,a);if(!Fve.test(i))return!0}return!1};gn.isAsyncFunction=function(){if(this.options.ecmaVersion<8||!this.isContextual("async"))return!1;Wi.lastIndex=this.pos;var e=Wi.exec(this.input),t=this.pos+e[0].length;return!no.test(this.input.slice(this.pos,t))&&this.input.slice(t,t+8)==="function"&&(t+8===this.input.length||!kf(this.input.charAt(t+8)))};gn.parseStatement=function(e,t,n){var r=this.type,a=this.startNode(),i;switch(this.isLet(e)&&(r=z._var,i="let"),r){case z._break:case z._continue:return this.parseBreakContinueStatement(a,r.keyword);case z._debugger:return this.parseDebuggerStatement(a);case z._do:return this.parseDoStatement(a);case z._for:return this.parseForStatement(a);case z._function:return e&&(this.strict||e!=="if"&&e!=="label")&&this.options.ecmaVersion>=6&&this.unexpected(),this.parseFunctionStatement(a,!1,!e);case z._class:return e&&this.unexpected(),this.parseClass(a,!0);case z._if:return this.parseIfStatement(a);case z._return:return this.parseReturnStatement(a);case z._switch:return this.parseSwitchStatement(a);case z._throw:return this.parseThrowStatement(a);case z._try:return this.parseTryStatement(a);case z._const:case z._var:return i=i||this.value,e&&i!=="var"&&this.unexpected(),this.parseVarStatement(a,i);case z._while:return this.parseWhileStatement(a);case z._with:return this.parseWithStatement(a);case z.braceL:return this.parseBlock(!0,a);case z.semi:return this.parseEmptyStatement(a);case z._export:case z._import:if(this.options.ecmaVersion>10&&r===z._import){Wi.lastIndex=this.pos;var o=Wi.exec(this.input),s=this.pos+o[0].length,l=this.input.charCodeAt(s);if(l===40||l===46)return this.parseExpressionStatement(a,this.parseExpression())}return this.options.allowImportExportEverywhere||(t||this.raise(this.start,"'import' and 'export' may only appear at the top level"),this.inModule||this.raise(this.start,"'import' and 'export' may appear only with 'sourceType: module'")),r===z._import?this.parseImport(a):this.parseExport(a,n);default:if(this.isAsyncFunction())return e&&this.unexpected(),this.next(),this.parseFunctionStatement(a,!0,!e);var u=this.value,c=this.parseExpression();return r===z.name&&c.type==="Identifier"&&this.eat(z.colon)?this.parseLabeledStatement(a,u,c,e):this.parseExpressionStatement(a,c)}};gn.parseBreakContinueStatement=function(e,t){var n=t==="break";this.next(),this.eat(z.semi)||this.insertSemicolon()?e.label=null:this.type!==z.name?this.unexpected():(e.label=this.parseIdent(),this.semicolon());for(var r=0;r<this.labels.length;++r){var a=this.labels[r];if((e.label==null||a.name===e.label.name)&&(a.kind!=null&&(n||a.kind==="loop")||e.label&&n))break}return r===this.labels.length&&this.raise(e.start,"Unsyntactic "+t),this.finishNode(e,n?"BreakStatement":"ContinueStatement")};gn.parseDebuggerStatement=function(e){return this.next(),this.semicolon(),this.finishNode(e,"DebuggerStatement")};gn.parseDoStatement=function(e){return this.next(),this.labels.push(uE),e.body=this.parseStatement("do"),this.labels.pop(),this.expect(z._while),e.test=this.parseParenExpression(),this.options.ecmaVersion>=6?this.eat(z.semi):this.semicolon(),this.finishNode(e,"DoWhileStatement")};gn.parseForStatement=function(e){this.next();var t=this.options.ecmaVersion>=9&&(this.inAsync||!this.inFunction&&this.options.allowAwaitOutsideFunction)&&this.eatContextual("await")?this.lastTokStart:-1;if(this.labels.push(uE),this.enterScope(0),this.expect(z.parenL),this.type===z.semi)return t>-1&&this.unexpected(t),this.parseFor(e,null);var n=this.isLet();if(this.type===z._var||this.type===z._const||n){var r=this.startNode(),a=n?"let":this.value;return this.next(),this.parseVar(r,!0,a),this.finishNode(r,"VariableDeclaration"),(this.type===z._in||this.options.ecmaVersion>=6&&this.isContextual("of"))&&r.declarations.length===1?(this.options.ecmaVersion>=9&&(this.type===z._in?t>-1&&this.unexpected(t):e.await=t>-1),this.parseForIn(e,r)):(t>-1&&this.unexpected(t),this.parseFor(e,r))}var i=new $v,o=this.parseExpression(!0,i);return this.type===z._in||this.options.ecmaVersion>=6&&this.isContextual("of")?(this.options.ecmaVersion>=9&&(this.type===z._in?t>-1&&this.unexpected(t):e.await=t>-1),this.toAssignable(o,!1,i),this.checkLVal(o),this.parseForIn(e,o)):(this.checkExpressionErrors(i,!0),t>-1&&this.unexpected(t),this.parseFor(e,o))};gn.parseFunctionStatement=function(e,t,n){return this.next(),this.parseFunction(e,kp|(n?0:Iw),!1,t)};gn.parseIfStatement=function(e){return this.next(),e.test=this.parseParenExpression(),e.consequent=this.parseStatement("if"),e.alternate=this.eat(z._else)?this.parseStatement("if"):null,this.finishNode(e,"IfStatement")};gn.parseReturnStatement=function(e){return!this.inFunction&&!this.options.allowReturnOutsideFunction&&this.raise(this.start,"'return' outside of function"),this.next(),this.eat(z.semi)||this.insertSemicolon()?e.argument=null:(e.argument=this.parseExpression(),this.semicolon()),this.finishNode(e,"ReturnStatement")};gn.parseSwitchStatement=function(e){this.next(),e.discriminant=this.parseParenExpression(),e.cases=[],this.expect(z.braceL),this.labels.push(Hve),this.enterScope(0);for(var t,n=!1;this.type!==z.braceR;)if(this.type===z._case||this.type===z._default){var r=this.type===z._case;t&&this.finishNode(t,"SwitchCase"),e.cases.push(t=this.startNode()),t.consequent=[],this.next(),r?t.test=this.parseExpression():(n&&this.raiseRecoverable(this.lastTokStart,"Multiple default clauses"),n=!0,t.test=null),this.expect(z.colon)}else t||this.unexpected(),t.consequent.push(this.parseStatement(null));return this.exitScope(),t&&this.finishNode(t,"SwitchCase"),this.next(),this.labels.pop(),this.finishNode(e,"SwitchStatement")};gn.parseThrowStatement=function(e){return this.next(),no.test(this.input.slice(this.lastTokEnd,this.start))&&this.raise(this.lastTokEnd,"Illegal newline after throw"),e.argument=this.parseExpression(),this.semicolon(),this.finishNode(e,"ThrowStatement")};var Wve=[];gn.parseTryStatement=function(e){if(this.next(),e.block=this.parseBlock(),e.handler=null,this.type===z._catch){var t=this.startNode();if(this.next(),this.eat(z.parenL)){t.param=this.parseBindingAtom();var n=t.param.type==="Identifier";this.enterScope(n?F9:0),this.checkLVal(t.param,n?U9:Ss),this.expect(z.parenR)}else this.options.ecmaVersion<10&&this.unexpected(),t.param=null,this.enterScope(0);t.body=this.parseBlock(!1),this.exitScope(),e.handler=this.finishNode(t,"CatchClause")}return e.finalizer=this.eat(z._finally)?this.parseBlock():null,!e.handler&&!e.finalizer&&this.raise(e.start,"Missing catch or finally clause"),this.finishNode(e,"TryStatement")};gn.parseVarStatement=function(e,t){return this.next(),this.parseVar(e,!1,t),this.semicolon(),this.finishNode(e,"VariableDeclaration")};gn.parseWhileStatement=function(e){return this.next(),e.test=this.parseParenExpression(),this.labels.push(uE),e.body=this.parseStatement("while"),this.labels.pop(),this.finishNode(e,"WhileStatement")};gn.parseWithStatement=function(e){return this.strict&&this.raise(this.start,"'with' in strict mode"),this.next(),e.object=this.parseParenExpression(),e.body=this.parseStatement("with"),this.finishNode(e,"WithStatement")};gn.parseEmptyStatement=function(e){return this.next(),this.finishNode(e,"EmptyStatement")};gn.parseLabeledStatement=function(e,t,n,r){for(var a=0,i=this.labels;a<i.length;a+=1){var o=i[a];o.name===t&&this.raise(n.start,"Label '"+t+"' is already declared")}for(var s=this.type.isLoop?"loop":this.type===z._switch?"switch":null,l=this.labels.length-1;l>=0;l--){var u=this.labels[l];if(u.statementStart===e.start)u.statementStart=this.start,u.kind=s;else break}return this.labels.push({name:t,kind:s,statementStart:this.start}),e.body=this.parseStatement(r?r.indexOf("label")===-1?r+"label":r:"label"),this.labels.pop(),e.label=n,this.finishNode(e,"LabeledStatement")};gn.parseExpressionStatement=function(e,t){return e.expression=t,this.semicolon(),this.finishNode(e,"ExpressionStatement")};gn.parseBlock=function(e,t,n){for(e===void 0&&(e=!0),t===void 0&&(t=this.startNode()),t.body=[],this.expect(z.braceL),e&&this.enterScope(0);this.type!==z.braceR;){var r=this.parseStatement(null);t.body.push(r)}return n&&(this.strict=!1),this.next(),e&&this.exitScope(),this.finishNode(t,"BlockStatement")};gn.parseFor=function(e,t){return e.init=t,this.expect(z.semi),e.test=this.type===z.semi?null:this.parseExpression(),this.expect(z.semi),e.update=this.type===z.parenR?null:this.parseExpression(),this.expect(z.parenR),e.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(e,"ForStatement")};gn.parseForIn=function(e,t){var n=this.type===z._in;return this.next(),t.type==="VariableDeclaration"&&t.declarations[0].init!=null&&(!n||this.options.ecmaVersion<8||this.strict||t.kind!=="var"||t.declarations[0].id.type!=="Identifier")?this.raise(t.start,(n?"for-in":"for-of")+" loop variable declaration may not have an initializer"):t.type==="AssignmentPattern"&&this.raise(t.start,"Invalid left-hand side in for-loop"),e.left=t,e.right=n?this.parseExpression():this.parseMaybeAssign(),this.expect(z.parenR),e.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(e,n?"ForInStatement":"ForOfStatement")};gn.parseVar=function(e,t,n){for(e.declarations=[],e.kind=n;;){var r=this.startNode();if(this.parseVarId(r,n),this.eat(z.eq)?r.init=this.parseMaybeAssign(t):n==="const"&&!(this.type===z._in||this.options.ecmaVersion>=6&&this.isContextual("of"))?this.unexpected():r.id.type!=="Identifier"&&!(t&&(this.type===z._in||this.isContextual("of")))?this.raise(this.lastTokEnd,"Complex binding patterns require an initialization value"):r.init=null,e.declarations.push(this.finishNode(r,"VariableDeclarator")),!this.eat(z.comma))break}return e};gn.parseVarId=function(e,t){e.id=this.parseBindingAtom(),this.checkLVal(e.id,t==="var"?lE:Ss,!1)};var kp=1,Iw=2,V9=4;gn.parseFunction=function(e,t,n,r){this.initFunction(e),(this.options.ecmaVersion>=9||this.options.ecmaVersion>=6&&!r)&&(this.type===z.star&&t&Iw&&this.unexpected(),e.generator=this.eat(z.star)),this.options.ecmaVersion>=8&&(e.async=!!r),t&kp&&(e.id=t&V9&&this.type!==z.name?null:this.parseIdent(),e.id&&!(t&Iw)&&this.checkLVal(e.id,this.strict||e.generator||e.async?this.treatFunctionsAsVar?lE:Ss:z9));var a=this.yieldPos,i=this.awaitPos,o=this.awaitIdentPos;return this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(sE(e.async,e.generator)),t&kp||(e.id=this.type===z.name?this.parseIdent():null),this.parseFunctionParams(e),this.parseFunctionBody(e,n,!1),this.yieldPos=a,this.awaitPos=i,this.awaitIdentPos=o,this.finishNode(e,t&kp?"FunctionDeclaration":"FunctionExpression")};gn.parseFunctionParams=function(e){this.expect(z.parenL),e.params=this.parseBindingList(z.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams()};gn.parseClass=function(e,t){this.next();var n=this.strict;this.strict=!0,this.parseClassId(e,t),this.parseClassSuper(e);var r=this.startNode(),a=!1;for(r.body=[],this.expect(z.braceL);this.type!==z.braceR;){var i=this.parseClassElement(e.superClass!==null);i&&(r.body.push(i),i.type==="MethodDefinition"&&i.kind==="constructor"&&(a&&this.raise(i.start,"Duplicate constructor in the same class"),a=!0))}return this.strict=n,this.next(),e.body=this.finishNode(r,"ClassBody"),this.finishNode(e,t?"ClassDeclaration":"ClassExpression")};gn.parseClassElement=function(e){var t=this;if(this.eat(z.semi))return null;var n=this.startNode(),r=function(l,u){u===void 0&&(u=!1);var c=t.start,f=t.startLoc;return t.eatContextual(l)?t.type!==z.parenL&&(!u||!t.canInsertSemicolon())?!0:(n.key&&t.unexpected(),n.computed=!1,n.key=t.startNodeAt(c,f),n.key.name=l,t.finishNode(n.key,"Identifier"),!1):!1};n.kind="method",n.static=r("static");var a=this.eat(z.star),i=!1;a||(this.options.ecmaVersion>=8&&r("async",!0)?(i=!0,a=this.options.ecmaVersion>=9&&this.eat(z.star)):r("get")?n.kind="get":r("set")&&(n.kind="set")),n.key||this.parsePropertyName(n);var o=n.key,s=!1;return!n.computed&&!n.static&&(o.type==="Identifier"&&o.name==="constructor"||o.type==="Literal"&&o.value==="constructor")?(n.kind!=="method"&&this.raise(o.start,"Constructor can't have get/set modifier"),a&&this.raise(o.start,"Constructor can't be a generator"),i&&this.raise(o.start,"Constructor can't be an async method"),n.kind="constructor",s=e):n.static&&o.type==="Identifier"&&o.name==="prototype"&&this.raise(o.start,"Classes may not have a static property named prototype"),this.parseClassMethod(n,a,i,s),n.kind==="get"&&n.value.params.length!==0&&this.raiseRecoverable(n.value.start,"getter should have no params"),n.kind==="set"&&n.value.params.length!==1&&this.raiseRecoverable(n.value.start,"setter should have exactly one param"),n.kind==="set"&&n.value.params[0].type==="RestElement"&&this.raiseRecoverable(n.value.params[0].start,"Setter cannot use rest params"),n};gn.parseClassMethod=function(e,t,n,r){return e.value=this.parseMethod(t,n,r),this.finishNode(e,"MethodDefinition")};gn.parseClassId=function(e,t){this.type===z.name?(e.id=this.parseIdent(),t&&this.checkLVal(e.id,Ss,!1)):(t===!0&&this.unexpected(),e.id=null)};gn.parseClassSuper=function(e){e.superClass=this.eat(z._extends)?this.parseExprSubscripts():null};gn.parseExport=function(e,t){if(this.next(),this.eat(z.star))return this.options.ecmaVersion>=11&&(this.eatContextual("as")?(e.exported=this.parseIdent(!0),this.checkExport(t,e.exported.name,this.lastTokStart)):e.exported=null),this.expectContextual("from"),this.type!==z.string&&this.unexpected(),e.source=this.parseExprAtom(),this.semicolon(),this.finishNode(e,"ExportAllDeclaration");if(this.eat(z._default)){this.checkExport(t,"default",this.lastTokStart);var n;if(this.type===z._function||(n=this.isAsyncFunction())){var r=this.startNode();this.next(),n&&this.next(),e.declaration=this.parseFunction(r,kp|V9,!1,n)}else if(this.type===z._class){var a=this.startNode();e.declaration=this.parseClass(a,"nullableID")}else e.declaration=this.parseMaybeAssign(),this.semicolon();return this.finishNode(e,"ExportDefaultDeclaration")}if(this.shouldParseExportStatement())e.declaration=this.parseStatement(null),e.declaration.type==="VariableDeclaration"?this.checkVariableExport(t,e.declaration.declarations):this.checkExport(t,e.declaration.id.name,e.declaration.id.start),e.specifiers=[],e.source=null;else{if(e.declaration=null,e.specifiers=this.parseExportSpecifiers(t),this.eatContextual("from"))this.type!==z.string&&this.unexpected(),e.source=this.parseExprAtom();else{for(var i=0,o=e.specifiers;i<o.length;i+=1){var s=o[i];this.checkUnreserved(s.local),this.checkLocalExport(s.local)}e.source=null}this.semicolon()}return this.finishNode(e,"ExportNamedDeclaration")};gn.checkExport=function(e,t,n){!e||(zv(e,t)&&this.raiseRecoverable(n,"Duplicate export '"+t+"'"),e[t]=!0)};gn.checkPatternExport=function(e,t){var n=t.type;if(n==="Identifier")this.checkExport(e,t.name,t.start);else if(n==="ObjectPattern")for(var r=0,a=t.properties;r<a.length;r+=1){var i=a[r];this.checkPatternExport(e,i)}else if(n==="ArrayPattern")for(var o=0,s=t.elements;o<s.length;o+=1){var l=s[o];l&&this.checkPatternExport(e,l)}else n==="Property"?this.checkPatternExport(e,t.value):n==="AssignmentPattern"?this.checkPatternExport(e,t.left):n==="RestElement"?this.checkPatternExport(e,t.argument):n==="ParenthesizedExpression"&&this.checkPatternExport(e,t.expression)};gn.checkVariableExport=function(e,t){if(!!e)for(var n=0,r=t;n<r.length;n+=1){var a=r[n];this.checkPatternExport(e,a.id)}};gn.shouldParseExportStatement=function(){return this.type.keyword==="var"||this.type.keyword==="const"||this.type.keyword==="class"||this.type.keyword==="function"||this.isLet()||this.isAsyncFunction()};gn.parseExportSpecifiers=function(e){var t=[],n=!0;for(this.expect(z.braceL);!this.eat(z.braceR);){if(n)n=!1;else if(this.expect(z.comma),this.afterTrailingComma(z.braceR))break;var r=this.startNode();r.local=this.parseIdent(!0),r.exported=this.eatContextual("as")?this.parseIdent(!0):r.local,this.checkExport(e,r.exported.name,r.exported.start),t.push(this.finishNode(r,"ExportSpecifier"))}return t};gn.parseImport=function(e){return this.next(),this.type===z.string?(e.specifiers=Wve,e.source=this.parseExprAtom()):(e.specifiers=this.parseImportSpecifiers(),this.expectContextual("from"),e.source=this.type===z.string?this.parseExprAtom():this.unexpected()),this.semicolon(),this.finishNode(e,"ImportDeclaration")};gn.parseImportSpecifiers=function(){var e=[],t=!0;if(this.type===z.name){var n=this.startNode();if(n.local=this.parseIdent(),this.checkLVal(n.local,Ss),e.push(this.finishNode(n,"ImportDefaultSpecifier")),!this.eat(z.comma))return e}if(this.type===z.star){var r=this.startNode();return this.next(),this.expectContextual("as"),r.local=this.parseIdent(),this.checkLVal(r.local,Ss),e.push(this.finishNode(r,"ImportNamespaceSpecifier")),e}for(this.expect(z.braceL);!this.eat(z.braceR);){if(t)t=!1;else if(this.expect(z.comma),this.afterTrailingComma(z.braceR))break;var a=this.startNode();a.imported=this.parseIdent(!0),this.eatContextual("as")?a.local=this.parseIdent():(this.checkUnreserved(a.imported),a.local=a.imported),this.checkLVal(a.local,Ss),e.push(this.finishNode(a,"ImportSpecifier"))}return e};gn.adaptDirectivePrologue=function(e){for(var t=0;t<e.length&&this.isDirectiveCandidate(e[t]);++t)e[t].directive=e[t].expression.raw.slice(1,-1)};gn.isDirectiveCandidate=function(e){return e.type==="ExpressionStatement"&&e.expression.type==="Literal"&&typeof e.expression.value=="string"&&(this.input[e.start]==='"'||this.input[e.start]==="'")};var Is=jr.prototype;Is.toAssignable=function(e,t,n){if(this.options.ecmaVersion>=6&&e)switch(e.type){case"Identifier":this.inAsync&&e.name==="await"&&this.raise(e.start,"Cannot use 'await' as identifier inside an async function");break;case"ObjectPattern":case"ArrayPattern":case"RestElement":break;case"ObjectExpression":e.type="ObjectPattern",n&&this.checkPatternErrors(n,!0);for(var r=0,a=e.properties;r<a.length;r+=1){var i=a[r];this.toAssignable(i,t),i.type==="RestElement"&&(i.argument.type==="ArrayPattern"||i.argument.type==="ObjectPattern")&&this.raise(i.argument.start,"Unexpected token")}break;case"Property":e.kind!=="init"&&this.raise(e.key.start,"Object pattern can't contain getter or setter"),this.toAssignable(e.value,t);break;case"ArrayExpression":e.type="ArrayPattern",n&&this.checkPatternErrors(n,!0),this.toAssignableList(e.elements,t);break;case"SpreadElement":e.type="RestElement",this.toAssignable(e.argument,t),e.argument.type==="AssignmentPattern"&&this.raise(e.argument.start,"Rest elements cannot have a default value");break;case"AssignmentExpression":e.operator!=="="&&this.raise(e.left.end,"Only '=' operator can be used for specifying default value."),e.type="AssignmentPattern",delete e.operator,this.toAssignable(e.left,t);case"AssignmentPattern":break;case"ParenthesizedExpression":this.toAssignable(e.expression,t,n);break;case"ChainExpression":this.raiseRecoverable(e.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":if(!t)break;default:this.raise(e.start,"Assigning to rvalue")}else n&&this.checkPatternErrors(n,!0);return e};Is.toAssignableList=function(e,t){for(var n=e.length,r=0;r<n;r++){var a=e[r];a&&this.toAssignable(a,t)}if(n){var i=e[n-1];this.options.ecmaVersion===6&&t&&i&&i.type==="RestElement"&&i.argument.type!=="Identifier"&&this.unexpected(i.argument.start)}return e};Is.parseSpread=function(e){var t=this.startNode();return this.next(),t.argument=this.parseMaybeAssign(!1,e),this.finishNode(t,"SpreadElement")};Is.parseRestBinding=function(){var e=this.startNode();return this.next(),this.options.ecmaVersion===6&&this.type!==z.name&&this.unexpected(),e.argument=this.parseBindingAtom(),this.finishNode(e,"RestElement")};Is.parseBindingAtom=function(){if(this.options.ecmaVersion>=6)switch(this.type){case z.bracketL:var e=this.startNode();return this.next(),e.elements=this.parseBindingList(z.bracketR,!0,!0),this.finishNode(e,"ArrayPattern");case z.braceL:return this.parseObj(!0)}return this.parseIdent()};Is.parseBindingList=function(e,t,n){for(var r=[],a=!0;!this.eat(e);)if(a?a=!1:this.expect(z.comma),t&&this.type===z.comma)r.push(null);else{if(n&&this.afterTrailingComma(e))break;if(this.type===z.ellipsis){var i=this.parseRestBinding();this.parseBindingListItem(i),r.push(i),this.type===z.comma&&this.raise(this.start,"Comma is not permitted after the rest element"),this.expect(e);break}else{var o=this.parseMaybeDefault(this.start,this.startLoc);this.parseBindingListItem(o),r.push(o)}}return r};Is.parseBindingListItem=function(e){return e};Is.parseMaybeDefault=function(e,t,n){if(n=n||this.parseBindingAtom(),this.options.ecmaVersion<6||!this.eat(z.eq))return n;var r=this.startNodeAt(e,t);return r.left=n,r.right=this.parseMaybeAssign(),this.finishNode(r,"AssignmentPattern")};Is.checkLVal=function(e,t,n){switch(t===void 0&&(t=VM),e.type){case"Identifier":t===Ss&&e.name==="let"&&this.raiseRecoverable(e.start,"let is disallowed as a lexically bound name"),this.strict&&this.reservedWordsStrictBind.test(e.name)&&this.raiseRecoverable(e.start,(t?"Binding ":"Assigning to ")+e.name+" in strict mode"),n&&(zv(n,e.name)&&this.raiseRecoverable(e.start,"Argument name clash"),n[e.name]=!0),t!==VM&&t!==$9&&this.declareName(e.name,t,e.start);break;case"ChainExpression":this.raiseRecoverable(e.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":t&&this.raiseRecoverable(e.start,"Binding member expression");break;case"ObjectPattern":for(var r=0,a=e.properties;r<a.length;r+=1){var i=a[r];this.checkLVal(i,t,n)}break;case"Property":this.checkLVal(e.value,t,n);break;case"ArrayPattern":for(var o=0,s=e.elements;o<s.length;o+=1){var l=s[o];l&&this.checkLVal(l,t,n)}break;case"AssignmentPattern":this.checkLVal(e.left,t,n);break;case"RestElement":this.checkLVal(e.argument,t,n);break;case"ParenthesizedExpression":this.checkLVal(e.expression,t,n);break;default:this.raise(e.start,(t?"Binding":"Assigning to")+" rvalue")}};var xn=jr.prototype;xn.checkPropClash=function(e,t,n){if(!(this.options.ecmaVersion>=9&&e.type==="SpreadElement")&&!(this.options.ecmaVersion>=6&&(e.computed||e.method||e.shorthand))){var r=e.key,a;switch(r.type){case"Identifier":a=r.name;break;case"Literal":a=String(r.value);break;default:return}var i=e.kind;if(this.options.ecmaVersion>=6){a==="__proto__"&&i==="init"&&(t.proto&&(n?n.doubleProto<0&&(n.doubleProto=r.start):this.raiseRecoverable(r.start,"Redefinition of __proto__ property")),t.proto=!0);return}a="$"+a;var o=t[a];if(o){var s;i==="init"?s=this.strict&&o.init||o.get||o.set:s=o.init||o[i],s&&this.raiseRecoverable(r.start,"Redefinition of property")}else o=t[a]={init:!1,get:!1,set:!1};o[i]=!0}};xn.parseExpression=function(e,t){var n=this.start,r=this.startLoc,a=this.parseMaybeAssign(e,t);if(this.type===z.comma){var i=this.startNodeAt(n,r);for(i.expressions=[a];this.eat(z.comma);)i.expressions.push(this.parseMaybeAssign(e,t));return this.finishNode(i,"SequenceExpression")}return a};xn.parseMaybeAssign=function(e,t,n){if(this.isContextual("yield")){if(this.inGenerator)return this.parseYield(e);this.exprAllowed=!1}var r=!1,a=-1,i=-1;t?(a=t.parenthesizedAssign,i=t.trailingComma,t.parenthesizedAssign=t.trailingComma=-1):(t=new $v,r=!0);var o=this.start,s=this.startLoc;(this.type===z.parenL||this.type===z.name)&&(this.potentialArrowAt=this.start);var l=this.parseMaybeConditional(e,t);if(n&&(l=n.call(this,l,o,s)),this.type.isAssign){var u=this.startNodeAt(o,s);return u.operator=this.value,u.left=this.type===z.eq?this.toAssignable(l,!1,t):l,r||(t.parenthesizedAssign=t.trailingComma=t.doubleProto=-1),t.shorthandAssign>=u.left.start&&(t.shorthandAssign=-1),this.checkLVal(l),this.next(),u.right=this.parseMaybeAssign(e),this.finishNode(u,"AssignmentExpression")}else r&&this.checkExpressionErrors(t,!0);return a>-1&&(t.parenthesizedAssign=a),i>-1&&(t.trailingComma=i),l};xn.parseMaybeConditional=function(e,t){var n=this.start,r=this.startLoc,a=this.parseExprOps(e,t);if(this.checkExpressionErrors(t))return a;if(this.eat(z.question)){var i=this.startNodeAt(n,r);return i.test=a,i.consequent=this.parseMaybeAssign(),this.expect(z.colon),i.alternate=this.parseMaybeAssign(e),this.finishNode(i,"ConditionalExpression")}return a};xn.parseExprOps=function(e,t){var n=this.start,r=this.startLoc,a=this.parseMaybeUnary(t,!1);return this.checkExpressionErrors(t)||a.start===n&&a.type==="ArrowFunctionExpression"?a:this.parseExprOp(a,n,r,-1,e)};xn.parseExprOp=function(e,t,n,r,a){var i=this.type.binop;if(i!=null&&(!a||this.type!==z._in)&&i>r){var o=this.type===z.logicalOR||this.type===z.logicalAND,s=this.type===z.coalesce;s&&(i=z.logicalAND.binop);var l=this.value;this.next();var u=this.start,c=this.startLoc,f=this.parseExprOp(this.parseMaybeUnary(null,!1),u,c,i,a),d=this.buildBinary(t,n,e,f,l,o||s);return(o&&this.type===z.coalesce||s&&(this.type===z.logicalOR||this.type===z.logicalAND))&&this.raiseRecoverable(this.start,"Logical expressions and coalesce expressions cannot be mixed. Wrap either by parentheses"),this.parseExprOp(d,t,n,r,a)}return e};xn.buildBinary=function(e,t,n,r,a,i){var o=this.startNodeAt(e,t);return o.left=n,o.operator=a,o.right=r,this.finishNode(o,i?"LogicalExpression":"BinaryExpression")};xn.parseMaybeUnary=function(e,t){var n=this.start,r=this.startLoc,a;if(this.isContextual("await")&&(this.inAsync||!this.inFunction&&this.options.allowAwaitOutsideFunction))a=this.parseAwait(),t=!0;else if(this.type.prefix){var i=this.startNode(),o=this.type===z.incDec;i.operator=this.value,i.prefix=!0,this.next(),i.argument=this.parseMaybeUnary(null,!0),this.checkExpressionErrors(e,!0),o?this.checkLVal(i.argument):this.strict&&i.operator==="delete"&&i.argument.type==="Identifier"?this.raiseRecoverable(i.start,"Deleting local variable in strict mode"):t=!0,a=this.finishNode(i,o?"UpdateExpression":"UnaryExpression")}else{if(a=this.parseExprSubscripts(e),this.checkExpressionErrors(e))return a;for(;this.type.postfix&&!this.canInsertSemicolon();){var s=this.startNodeAt(n,r);s.operator=this.value,s.prefix=!1,s.argument=a,this.checkLVal(a),this.next(),a=this.finishNode(s,"UpdateExpression")}}return!t&&this.eat(z.starstar)?this.buildBinary(n,r,a,this.parseMaybeUnary(null,!1),"**",!1):a};xn.parseExprSubscripts=function(e){var t=this.start,n=this.startLoc,r=this.parseExprAtom(e);if(r.type==="ArrowFunctionExpression"&&this.input.slice(this.lastTokStart,this.lastTokEnd)!==")")return r;var a=this.parseSubscripts(r,t,n);return e&&a.type==="MemberExpression"&&(e.parenthesizedAssign>=a.start&&(e.parenthesizedAssign=-1),e.parenthesizedBind>=a.start&&(e.parenthesizedBind=-1)),a};xn.parseSubscripts=function(e,t,n,r){for(var a=this.options.ecmaVersion>=8&&e.type==="Identifier"&&e.name==="async"&&this.lastTokEnd===e.end&&!this.canInsertSemicolon()&&e.end-e.start===5&&this.potentialArrowAt===e.start,i=!1;;){var o=this.parseSubscript(e,t,n,r,a,i);if(o.optional&&(i=!0),o===e||o.type==="ArrowFunctionExpression"){if(i){var s=this.startNodeAt(t,n);s.expression=o,o=this.finishNode(s,"ChainExpression")}return o}e=o}};xn.parseSubscript=function(e,t,n,r,a,i){var o=this.options.ecmaVersion>=11,s=o&&this.eat(z.questionDot);r&&s&&this.raise(this.lastTokStart,"Optional chaining cannot appear in the callee of new expressions");var l=this.eat(z.bracketL);if(l||s&&this.type!==z.parenL&&this.type!==z.backQuote||this.eat(z.dot)){var u=this.startNodeAt(t,n);u.object=e,u.property=l?this.parseExpression():this.parseIdent(this.options.allowReserved!=="never"),u.computed=!!l,l&&this.expect(z.bracketR),o&&(u.optional=s),e=this.finishNode(u,"MemberExpression")}else if(!r&&this.eat(z.parenL)){var c=new $v,f=this.yieldPos,d=this.awaitPos,p=this.awaitIdentPos;this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0;var h=this.parseExprList(z.parenR,this.options.ecmaVersion>=8,!1,c);if(a&&!s&&!this.canInsertSemicolon()&&this.eat(z.arrow))return this.checkPatternErrors(c,!1),this.checkYieldAwaitInDefaultParams(),this.awaitIdentPos>0&&this.raise(this.awaitIdentPos,"Cannot use 'await' as identifier inside an async function"),this.yieldPos=f,this.awaitPos=d,this.awaitIdentPos=p,this.parseArrowExpression(this.startNodeAt(t,n),h,!0);this.checkExpressionErrors(c,!0),this.yieldPos=f||this.yieldPos,this.awaitPos=d||this.awaitPos,this.awaitIdentPos=p||this.awaitIdentPos;var g=this.startNodeAt(t,n);g.callee=e,g.arguments=h,o&&(g.optional=s),e=this.finishNode(g,"CallExpression")}else if(this.type===z.backQuote){(s||i)&&this.raise(this.start,"Optional chaining cannot appear in the tag of tagged template expressions");var v=this.startNodeAt(t,n);v.tag=e,v.quasi=this.parseTemplate({isTagged:!0}),e=this.finishNode(v,"TaggedTemplateExpression")}return e};xn.parseExprAtom=function(e){this.type===z.slash&&this.readRegexp();var t,n=this.potentialArrowAt===this.start;switch(this.type){case z._super:return this.allowSuper||this.raise(this.start,"'super' keyword outside a method"),t=this.startNode(),this.next(),this.type===z.parenL&&!this.allowDirectSuper&&this.raise(t.start,"super() call outside constructor of a subclass"),this.type!==z.dot&&this.type!==z.bracketL&&this.type!==z.parenL&&this.unexpected(),this.finishNode(t,"Super");case z._this:return t=this.startNode(),this.next(),this.finishNode(t,"ThisExpression");case z.name:var r=this.start,a=this.startLoc,i=this.containsEsc,o=this.parseIdent(!1);if(this.options.ecmaVersion>=8&&!i&&o.name==="async"&&!this.canInsertSemicolon()&&this.eat(z._function))return this.parseFunction(this.startNodeAt(r,a),0,!1,!0);if(n&&!this.canInsertSemicolon()){if(this.eat(z.arrow))return this.parseArrowExpression(this.startNodeAt(r,a),[o],!1);if(this.options.ecmaVersion>=8&&o.name==="async"&&this.type===z.name&&!i)return o=this.parseIdent(!1),(this.canInsertSemicolon()||!this.eat(z.arrow))&&this.unexpected(),this.parseArrowExpression(this.startNodeAt(r,a),[o],!0)}return o;case z.regexp:var s=this.value;return t=this.parseLiteral(s.value),t.regex={pattern:s.pattern,flags:s.flags},t;case z.num:case z.string:return this.parseLiteral(this.value);case z._null:case z._true:case z._false:return t=this.startNode(),t.value=this.type===z._null?null:this.type===z._true,t.raw=this.type.keyword,this.next(),this.finishNode(t,"Literal");case z.parenL:var l=this.start,u=this.parseParenAndDistinguishExpression(n);return e&&(e.parenthesizedAssign<0&&!this.isSimpleAssignTarget(u)&&(e.parenthesizedAssign=l),e.parenthesizedBind<0&&(e.parenthesizedBind=l)),u;case z.bracketL:return t=this.startNode(),this.next(),t.elements=this.parseExprList(z.bracketR,!0,!0,e),this.finishNode(t,"ArrayExpression");case z.braceL:return this.parseObj(!1,e);case z._function:return t=this.startNode(),this.next(),this.parseFunction(t,0);case z._class:return this.parseClass(this.startNode(),!1);case z._new:return this.parseNew();case z.backQuote:return this.parseTemplate();case z._import:return this.options.ecmaVersion>=11?this.parseExprImport():this.unexpected();default:this.unexpected()}};xn.parseExprImport=function(){var e=this.startNode();this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword import");var t=this.parseIdent(!0);switch(this.type){case z.parenL:return this.parseDynamicImport(e);case z.dot:return e.meta=t,this.parseImportMeta(e);default:this.unexpected()}};xn.parseDynamicImport=function(e){if(this.next(),e.source=this.parseMaybeAssign(),!this.eat(z.parenR)){var t=this.start;this.eat(z.comma)&&this.eat(z.parenR)?this.raiseRecoverable(t,"Trailing comma is not allowed in import()"):this.unexpected(t)}return this.finishNode(e,"ImportExpression")};xn.parseImportMeta=function(e){this.next();var t=this.containsEsc;return e.property=this.parseIdent(!0),e.property.name!=="meta"&&this.raiseRecoverable(e.property.start,"The only valid meta property for import is 'import.meta'"),t&&this.raiseRecoverable(e.start,"'import.meta' must not contain escaped characters"),this.options.sourceType!=="module"&&this.raiseRecoverable(e.start,"Cannot use 'import.meta' outside a module"),this.finishNode(e,"MetaProperty")};xn.parseLiteral=function(e){var t=this.startNode();return t.value=e,t.raw=this.input.slice(this.start,this.end),t.raw.charCodeAt(t.raw.length-1)===110&&(t.bigint=t.raw.slice(0,-1).replace(/_/g,"")),this.next(),this.finishNode(t,"Literal")};xn.parseParenExpression=function(){this.expect(z.parenL);var e=this.parseExpression();return this.expect(z.parenR),e};xn.parseParenAndDistinguishExpression=function(e){var t=this.start,n=this.startLoc,r,a=this.options.ecmaVersion>=8;if(this.options.ecmaVersion>=6){this.next();var i=this.start,o=this.startLoc,s=[],l=!0,u=!1,c=new $v,f=this.yieldPos,d=this.awaitPos,p;for(this.yieldPos=0,this.awaitPos=0;this.type!==z.parenR;)if(l?l=!1:this.expect(z.comma),a&&this.afterTrailingComma(z.parenR,!0)){u=!0;break}else if(this.type===z.ellipsis){p=this.start,s.push(this.parseParenItem(this.parseRestBinding())),this.type===z.comma&&this.raise(this.start,"Comma is not permitted after the rest element");break}else s.push(this.parseMaybeAssign(!1,c,this.parseParenItem));var h=this.start,g=this.startLoc;if(this.expect(z.parenR),e&&!this.canInsertSemicolon()&&this.eat(z.arrow))return this.checkPatternErrors(c,!1),this.checkYieldAwaitInDefaultParams(),this.yieldPos=f,this.awaitPos=d,this.parseParenArrowList(t,n,s);(!s.length||u)&&this.unexpected(this.lastTokStart),p&&this.unexpected(p),this.checkExpressionErrors(c,!0),this.yieldPos=f||this.yieldPos,this.awaitPos=d||this.awaitPos,s.length>1?(r=this.startNodeAt(i,o),r.expressions=s,this.finishNodeAt(r,"SequenceExpression",h,g)):r=s[0]}else r=this.parseParenExpression();if(this.options.preserveParens){var v=this.startNodeAt(t,n);return v.expression=r,this.finishNode(v,"ParenthesizedExpression")}else return r};xn.parseParenItem=function(e){return e};xn.parseParenArrowList=function(e,t,n){return this.parseArrowExpression(this.startNodeAt(e,t),n)};var Xve=[];xn.parseNew=function(){this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword new");var e=this.startNode(),t=this.parseIdent(!0);if(this.options.ecmaVersion>=6&&this.eat(z.dot)){e.meta=t;var n=this.containsEsc;return e.property=this.parseIdent(!0),e.property.name!=="target"&&this.raiseRecoverable(e.property.start,"The only valid meta property for new is 'new.target'"),n&&this.raiseRecoverable(e.start,"'new.target' must not contain escaped characters"),this.inNonArrowFunction()||this.raiseRecoverable(e.start,"'new.target' can only be used in functions"),this.finishNode(e,"MetaProperty")}var r=this.start,a=this.startLoc,i=this.type===z._import;return e.callee=this.parseSubscripts(this.parseExprAtom(),r,a,!0),i&&e.callee.type==="ImportExpression"&&this.raise(r,"Cannot use new with import()"),this.eat(z.parenL)?e.arguments=this.parseExprList(z.parenR,this.options.ecmaVersion>=8,!1):e.arguments=Xve,this.finishNode(e,"NewExpression")};xn.parseTemplateElement=function(e){var t=e.isTagged,n=this.startNode();return this.type===z.invalidTemplate?(t||this.raiseRecoverable(this.start,"Bad escape sequence in untagged template literal"),n.value={raw:this.value,cooked:null}):n.value={raw:this.input.slice(this.start,this.end).replace(/\r\n?/g,`
`),cooked:this.value},this.next(),n.tail=this.type===z.backQuote,this.finishNode(n,"TemplateElement")};xn.parseTemplate=function(e){e===void 0&&(e={});var t=e.isTagged;t===void 0&&(t=!1);var n=this.startNode();this.next(),n.expressions=[];var r=this.parseTemplateElement({isTagged:t});for(n.quasis=[r];!r.tail;)this.type===z.eof&&this.raise(this.pos,"Unterminated template literal"),this.expect(z.dollarBraceL),n.expressions.push(this.parseExpression()),this.expect(z.braceR),n.quasis.push(r=this.parseTemplateElement({isTagged:t}));return this.next(),this.finishNode(n,"TemplateLiteral")};xn.isAsyncProp=function(e){return!e.computed&&e.key.type==="Identifier"&&e.key.name==="async"&&(this.type===z.name||this.type===z.num||this.type===z.string||this.type===z.bracketL||this.type.keyword||this.options.ecmaVersion>=9&&this.type===z.star)&&!no.test(this.input.slice(this.lastTokEnd,this.start))};xn.parseObj=function(e,t){var n=this.startNode(),r=!0,a={};for(n.properties=[],this.next();!this.eat(z.braceR);){if(r)r=!1;else if(this.expect(z.comma),this.options.ecmaVersion>=5&&this.afterTrailingComma(z.braceR))break;var i=this.parseProperty(e,t);e||this.checkPropClash(i,a,t),n.properties.push(i)}return this.finishNode(n,e?"ObjectPattern":"ObjectExpression")};xn.parseProperty=function(e,t){var n=this.startNode(),r,a,i,o;if(this.options.ecmaVersion>=9&&this.eat(z.ellipsis))return e?(n.argument=this.parseIdent(!1),this.type===z.comma&&this.raise(this.start,"Comma is not permitted after the rest element"),this.finishNode(n,"RestElement")):(this.type===z.parenL&&t&&(t.parenthesizedAssign<0&&(t.parenthesizedAssign=this.start),t.parenthesizedBind<0&&(t.parenthesizedBind=this.start)),n.argument=this.parseMaybeAssign(!1,t),this.type===z.comma&&t&&t.trailingComma<0&&(t.trailingComma=this.start),this.finishNode(n,"SpreadElement"));this.options.ecmaVersion>=6&&(n.method=!1,n.shorthand=!1,(e||t)&&(i=this.start,o=this.startLoc),e||(r=this.eat(z.star)));var s=this.containsEsc;return this.parsePropertyName(n),!e&&!s&&this.options.ecmaVersion>=8&&!r&&this.isAsyncProp(n)?(a=!0,r=this.options.ecmaVersion>=9&&this.eat(z.star),this.parsePropertyName(n,t)):a=!1,this.parsePropertyValue(n,e,r,a,i,o,t,s),this.finishNode(n,"Property")};xn.parsePropertyValue=function(e,t,n,r,a,i,o,s){if((n||r)&&this.type===z.colon&&this.unexpected(),this.eat(z.colon))e.value=t?this.parseMaybeDefault(this.start,this.startLoc):this.parseMaybeAssign(!1,o),e.kind="init";else if(this.options.ecmaVersion>=6&&this.type===z.parenL)t&&this.unexpected(),e.kind="init",e.method=!0,e.value=this.parseMethod(n,r);else if(!t&&!s&&this.options.ecmaVersion>=5&&!e.computed&&e.key.type==="Identifier"&&(e.key.name==="get"||e.key.name==="set")&&this.type!==z.comma&&this.type!==z.braceR&&this.type!==z.eq){(n||r)&&this.unexpected(),e.kind=e.key.name,this.parsePropertyName(e),e.value=this.parseMethod(!1);var l=e.kind==="get"?0:1;if(e.value.params.length!==l){var u=e.value.start;e.kind==="get"?this.raiseRecoverable(u,"getter should have no params"):this.raiseRecoverable(u,"setter should have exactly one param")}else e.kind==="set"&&e.value.params[0].type==="RestElement"&&this.raiseRecoverable(e.value.params[0].start,"Setter cannot use rest params")}else this.options.ecmaVersion>=6&&!e.computed&&e.key.type==="Identifier"?((n||r)&&this.unexpected(),this.checkUnreserved(e.key),e.key.name==="await"&&!this.awaitIdentPos&&(this.awaitIdentPos=a),e.kind="init",t?e.value=this.parseMaybeDefault(a,i,e.key):this.type===z.eq&&o?(o.shorthandAssign<0&&(o.shorthandAssign=this.start),e.value=this.parseMaybeDefault(a,i,e.key)):e.value=e.key,e.shorthand=!0):this.unexpected()};xn.parsePropertyName=function(e){if(this.options.ecmaVersion>=6){if(this.eat(z.bracketL))return e.computed=!0,e.key=this.parseMaybeAssign(),this.expect(z.bracketR),e.key;e.computed=!1}return e.key=this.type===z.num||this.type===z.string?this.parseExprAtom():this.parseIdent(this.options.allowReserved!=="never")};xn.initFunction=function(e){e.id=null,this.options.ecmaVersion>=6&&(e.generator=e.expression=!1),this.options.ecmaVersion>=8&&(e.async=!1)};xn.parseMethod=function(e,t,n){var r=this.startNode(),a=this.yieldPos,i=this.awaitPos,o=this.awaitIdentPos;return this.initFunction(r),this.options.ecmaVersion>=6&&(r.generator=e),this.options.ecmaVersion>=8&&(r.async=!!t),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(sE(t,r.generator)|D9|(n?B9:0)),this.expect(z.parenL),r.params=this.parseBindingList(z.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams(),this.parseFunctionBody(r,!1,!0),this.yieldPos=a,this.awaitPos=i,this.awaitIdentPos=o,this.finishNode(r,"FunctionExpression")};xn.parseArrowExpression=function(e,t,n){var r=this.yieldPos,a=this.awaitPos,i=this.awaitIdentPos;return this.enterScope(sE(n,!1)|N9),this.initFunction(e),this.options.ecmaVersion>=8&&(e.async=!!n),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,e.params=this.toAssignableList(t,!0),this.parseFunctionBody(e,!0,!1),this.yieldPos=r,this.awaitPos=a,this.awaitIdentPos=i,this.finishNode(e,"ArrowFunctionExpression")};xn.parseFunctionBody=function(e,t,n){var r=t&&this.type!==z.braceL,a=this.strict,i=!1;if(r)e.body=this.parseMaybeAssign(),e.expression=!0,this.checkParams(e,!1);else{var o=this.options.ecmaVersion>=7&&!this.isSimpleParamList(e.params);(!a||o)&&(i=this.strictDirective(this.end),i&&o&&this.raiseRecoverable(e.start,"Illegal 'use strict' directive in function with non-simple parameter list"));var s=this.labels;this.labels=[],i&&(this.strict=!0),this.checkParams(e,!a&&!i&&!t&&!n&&this.isSimpleParamList(e.params)),this.strict&&e.id&&this.checkLVal(e.id,$9),e.body=this.parseBlock(!1,void 0,i&&!a),e.expression=!1,this.adaptDirectivePrologue(e.body.body),this.labels=s}this.exitScope()};xn.isSimpleParamList=function(e){for(var t=0,n=e;t<n.length;t+=1){var r=n[t];if(r.type!=="Identifier")return!1}return!0};xn.checkParams=function(e,t){for(var n={},r=0,a=e.params;r<a.length;r+=1){var i=a[r];this.checkLVal(i,lE,t?null:n)}};xn.parseExprList=function(e,t,n,r){for(var a=[],i=!0;!this.eat(e);){if(i)i=!1;else if(this.expect(z.comma),t&&this.afterTrailingComma(e))break;var o=void 0;n&&this.type===z.comma?o=null:this.type===z.ellipsis?(o=this.parseSpread(r),r&&this.type===z.comma&&r.trailingComma<0&&(r.trailingComma=this.start)):o=this.parseMaybeAssign(!1,r),a.push(o)}return a};xn.checkUnreserved=function(e){var t=e.start,n=e.end,r=e.name;if(this.inGenerator&&r==="yield"&&this.raiseRecoverable(t,"Cannot use 'yield' as identifier inside a generator"),this.inAsync&&r==="await"&&this.raiseRecoverable(t,"Cannot use 'await' as identifier inside an async function"),this.keywords.test(r)&&this.raise(t,"Unexpected keyword '"+r+"'"),!(this.options.ecmaVersion<6&&this.input.slice(t,n).indexOf("\\")!==-1)){var a=this.strict?this.reservedWordsStrict:this.reservedWords;a.test(r)&&(!this.inAsync&&r==="await"&&this.raiseRecoverable(t,"Cannot use keyword 'await' outside an async function"),this.raiseRecoverable(t,"The keyword '"+r+"' is reserved"))}};xn.parseIdent=function(e,t){var n=this.startNode();return this.type===z.name?n.name=this.value:this.type.keyword?(n.name=this.type.keyword,(n.name==="class"||n.name==="function")&&(this.lastTokEnd!==this.lastTokStart+1||this.input.charCodeAt(this.lastTokStart)!==46)&&this.context.pop()):this.unexpected(),this.next(!!e),this.finishNode(n,"Identifier"),e||(this.checkUnreserved(n),n.name==="await"&&!this.awaitIdentPos&&(this.awaitIdentPos=n.start)),n};xn.parseYield=function(e){this.yieldPos||(this.yieldPos=this.start);var t=this.startNode();return this.next(),this.type===z.semi||this.canInsertSemicolon()||this.type!==z.star&&!this.type.startsExpr?(t.delegate=!1,t.argument=null):(t.delegate=this.eat(z.star),t.argument=this.parseMaybeAssign(e)),this.finishNode(t,"YieldExpression")};xn.parseAwait=function(){this.awaitPos||(this.awaitPos=this.start);var e=this.startNode();return this.next(),e.argument=this.parseMaybeUnary(null,!1),this.finishNode(e,"AwaitExpression")};var Ug=jr.prototype;Ug.raise=function(e,t){var n=P9(this.input,e);t+=" ("+n.line+":"+n.column+")";var r=new SyntaxError(t);throw r.pos=e,r.loc=n,r.raisedAt=this.pos,r};Ug.raiseRecoverable=Ug.raise;Ug.curPosition=function(){if(this.options.locations)return new dh(this.curLine,this.pos-this.lineStart)};var Dl=jr.prototype,Yve=function(t){this.flags=t,this.var=[],this.lexical=[],this.functions=[]};Dl.enterScope=function(e){this.scopeStack.push(new Yve(e))};Dl.exitScope=function(){this.scopeStack.pop()};Dl.treatFunctionsAsVarInScope=function(e){return e.flags&Fh||!this.inModule&&e.flags&ph};Dl.declareName=function(e,t,n){var r=!1;if(t===Ss){var a=this.currentScope();r=a.lexical.indexOf(e)>-1||a.functions.indexOf(e)>-1||a.var.indexOf(e)>-1,a.lexical.push(e),this.inModule&&a.flags&ph&&delete this.undefinedExports[e]}else if(t===U9){var i=this.currentScope();i.lexical.push(e)}else if(t===z9){var o=this.currentScope();this.treatFunctionsAsVar?r=o.lexical.indexOf(e)>-1:r=o.lexical.indexOf(e)>-1||o.var.indexOf(e)>-1,o.functions.push(e)}else for(var s=this.scopeStack.length-1;s>=0;--s){var l=this.scopeStack[s];if(l.lexical.indexOf(e)>-1&&!(l.flags&F9&&l.lexical[0]===e)||!this.treatFunctionsAsVarInScope(l)&&l.functions.indexOf(e)>-1){r=!0;break}if(l.var.push(e),this.inModule&&l.flags&ph&&delete this.undefinedExports[e],l.flags&oE)break}r&&this.raiseRecoverable(n,"Identifier '"+e+"' has already been declared")};Dl.checkLocalExport=function(e){this.scopeStack[0].lexical.indexOf(e.name)===-1&&this.scopeStack[0].var.indexOf(e.name)===-1&&(this.undefinedExports[e.name]=e)};Dl.currentScope=function(){return this.scopeStack[this.scopeStack.length-1]};Dl.currentVarScope=function(){for(var e=this.scopeStack.length-1;;e--){var t=this.scopeStack[e];if(t.flags&oE)return t}};Dl.currentThisScope=function(){for(var e=this.scopeStack.length-1;;e--){var t=this.scopeStack[e];if(t.flags&oE&&!(t.flags&N9))return t}};var cE=function(t,n,r){this.type="",this.start=n,this.end=0,t.options.locations&&(this.loc=new Uv(t,r)),t.options.directSourceFile&&(this.sourceFile=t.options.directSourceFile),t.options.ranges&&(this.range=[n,0])},Vv=jr.prototype;Vv.startNode=function(){return new cE(this,this.start,this.startLoc)};Vv.startNodeAt=function(e,t){return new cE(this,e,t)};function j9(e,t,n,r){return e.type=t,e.end=n,this.options.locations&&(e.loc.end=r),this.options.ranges&&(e.range[1]=n),e}Vv.finishNode=function(e,t){return j9.call(this,e,t,this.lastTokEnd,this.lastTokEndLoc)};Vv.finishNodeAt=function(e,t,n,r){return j9.call(this,e,t,n,r)};var co=function(t,n,r,a,i){this.token=t,this.isExpr=!!n,this.preserveSpace=!!r,this.override=a,this.generator=!!i},Fr={b_stat:new co("{",!1),b_expr:new co("{",!0),b_tmpl:new co("${",!1),p_stat:new co("(",!1),p_expr:new co("(",!0),q_tmpl:new co("`",!0,!0,function(e){return e.tryReadTemplateToken()}),f_stat:new co("function",!1),f_expr:new co("function",!0),f_expr_gen:new co("function",!0,!1,null,!0),f_gen:new co("function",!1,!1,null,!0)},jv=jr.prototype;jv.initialContext=function(){return[Fr.b_stat]};jv.braceIsBlock=function(e){var t=this.curContext();return t===Fr.f_expr||t===Fr.f_stat?!0:e===z.colon&&(t===Fr.b_stat||t===Fr.b_expr)?!t.isExpr:e===z._return||e===z.name&&this.exprAllowed?no.test(this.input.slice(this.lastTokEnd,this.start)):e===z._else||e===z.semi||e===z.eof||e===z.parenR||e===z.arrow?!0:e===z.braceL?t===Fr.b_stat:e===z._var||e===z._const||e===z.name?!1:!this.exprAllowed};jv.inGeneratorContext=function(){for(var e=this.context.length-1;e>=1;e--){var t=this.context[e];if(t.token==="function")return t.generator}return!1};jv.updateContext=function(e){var t,n=this.type;n.keyword&&e===z.dot?this.exprAllowed=!1:(t=n.updateContext)?t.call(this,e):this.exprAllowed=n.beforeExpr};z.parenR.updateContext=z.braceR.updateContext=function(){if(this.context.length===1){this.exprAllowed=!0;return}var e=this.context.pop();e===Fr.b_stat&&this.curContext().token==="function"&&(e=this.context.pop()),this.exprAllowed=!e.isExpr};z.braceL.updateContext=function(e){this.context.push(this.braceIsBlock(e)?Fr.b_stat:Fr.b_expr),this.exprAllowed=!0};z.dollarBraceL.updateContext=function(){this.context.push(Fr.b_tmpl),this.exprAllowed=!0};z.parenL.updateContext=function(e){var t=e===z._if||e===z._for||e===z._with||e===z._while;this.context.push(t?Fr.p_stat:Fr.p_expr),this.exprAllowed=!0};z.incDec.updateContext=function(){};z._function.updateContext=z._class.updateContext=function(e){e.beforeExpr&&e!==z.semi&&e!==z._else&&!(e===z._return&&no.test(this.input.slice(this.lastTokEnd,this.start)))&&!((e===z.colon||e===z.braceL)&&this.curContext()===Fr.b_stat)?this.context.push(Fr.f_expr):this.context.push(Fr.f_stat),this.exprAllowed=!1};z.backQuote.updateContext=function(){this.curContext()===Fr.q_tmpl?this.context.pop():this.context.push(Fr.q_tmpl),this.exprAllowed=!1};z.star.updateContext=function(e){if(e===z._function){var t=this.context.length-1;this.context[t]===Fr.f_expr?this.context[t]=Fr.f_expr_gen:this.context[t]=Fr.f_gen}this.exprAllowed=!0};z.name.updateContext=function(e){var t=!1;this.options.ecmaVersion>=6&&e!==z.dot&&(this.value==="of"&&!this.exprAllowed||this.value==="yield"&&this.inGeneratorContext())&&(t=!0),this.exprAllowed=t};var G9="ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS",H9=G9+" Extended_Pictographic",Zve=H9,qve={9:G9,10:H9,11:Zve},jM="Cased_Letter LC Close_Punctuation Pe Connector_Punctuation Pc Control Cc cntrl Currency_Symbol Sc Dash_Punctuation Pd Decimal_Number Nd digit Enclosing_Mark Me Final_Punctuation Pf Format Cf Initial_Punctuation Pi Letter L Letter_Number Nl Line_Separator Zl Lowercase_Letter Ll Mark M Combining_Mark Math_Symbol Sm Modifier_Letter Lm Modifier_Symbol Sk Nonspacing_Mark Mn Number N Open_Punctuation Ps Other C Other_Letter Lo Other_Number No Other_Punctuation Po Other_Symbol So Paragraph_Separator Zp Private_Use Co Punctuation P punct Separator Z Space_Separator Zs Spacing_Mark Mc Surrogate Cs Symbol S Titlecase_Letter Lt Unassigned Cn Uppercase_Letter Lu",W9="Adlam Adlm Ahom Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb",X9=W9+" Dogra Dogr Gunjala_Gondi Gong Hanifi_Rohingya Rohg Makasar Maka Medefaidrin Medf Old_Sogdian Sogo Sogdian Sogd",Kve=X9+" Elymaic Elym Nandinagari Nand Nyiakeng_Puachue_Hmong Hmnp Wancho Wcho",Qve={9:W9,10:X9,11:Kve},Y9={};function fE(e){var t=Y9[e]={binary:mu(qve[e]+" "+jM),nonBinary:{General_Category:mu(jM),Script:mu(Qve[e])}};t.nonBinary.Script_Extensions=t.nonBinary.Script,t.nonBinary.gc=t.nonBinary.General_Category,t.nonBinary.sc=t.nonBinary.Script,t.nonBinary.scx=t.nonBinary.Script_Extensions}fE(9);fE(10);fE(11);var Xt=jr.prototype,Ls=function(t){this.parser=t,this.validFlags="gim"+(t.options.ecmaVersion>=6?"uy":"")+(t.options.ecmaVersion>=9?"s":""),this.unicodeProperties=Y9[t.options.ecmaVersion>=11?11:t.options.ecmaVersion],this.source="",this.flags="",this.start=0,this.switchU=!1,this.switchN=!1,this.pos=0,this.lastIntValue=0,this.lastStringValue="",this.lastAssertionIsQuantifiable=!1,this.numCapturingParens=0,this.maxBackReference=0,this.groupNames=[],this.backReferenceNames=[]};Ls.prototype.reset=function(t,n,r){var a=r.indexOf("u")!==-1;this.start=t|0,this.source=n+"",this.flags=r,this.switchU=a&&this.parser.options.ecmaVersion>=6,this.switchN=a&&this.parser.options.ecmaVersion>=9};Ls.prototype.raise=function(t){this.parser.raiseRecoverable(this.start,"Invalid regular expression: /"+this.source+"/: "+t)};Ls.prototype.at=function(t,n){n===void 0&&(n=!1);var r=this.source,a=r.length;if(t>=a)return-1;var i=r.charCodeAt(t);if(!(n||this.switchU)||i<=55295||i>=57344||t+1>=a)return i;var o=r.charCodeAt(t+1);return o>=56320&&o<=57343?(i<<10)+o-56613888:i};Ls.prototype.nextIndex=function(t,n){n===void 0&&(n=!1);var r=this.source,a=r.length;if(t>=a)return a;var i=r.charCodeAt(t),o;return!(n||this.switchU)||i<=55295||i>=57344||t+1>=a||(o=r.charCodeAt(t+1))<56320||o>57343?t+1:t+2};Ls.prototype.current=function(t){return t===void 0&&(t=!1),this.at(this.pos,t)};Ls.prototype.lookahead=function(t){return t===void 0&&(t=!1),this.at(this.nextIndex(this.pos,t),t)};Ls.prototype.advance=function(t){t===void 0&&(t=!1),this.pos=this.nextIndex(this.pos,t)};Ls.prototype.eat=function(t,n){return n===void 0&&(n=!1),this.current(n)===t?(this.advance(n),!0):!1};function $g(e){return e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode((e>>10)+55296,(e&1023)+56320))}Xt.validateRegExpFlags=function(e){for(var t=e.validFlags,n=e.flags,r=0;r<n.length;r++){var a=n.charAt(r);t.indexOf(a)===-1&&this.raise(e.start,"Invalid regular expression flag"),n.indexOf(a,r+1)>-1&&this.raise(e.start,"Duplicate regular expression flag")}};Xt.validateRegExpPattern=function(e){this.regexp_pattern(e),!e.switchN&&this.options.ecmaVersion>=9&&e.groupNames.length>0&&(e.switchN=!0,this.regexp_pattern(e))};Xt.regexp_pattern=function(e){e.pos=0,e.lastIntValue=0,e.lastStringValue="",e.lastAssertionIsQuantifiable=!1,e.numCapturingParens=0,e.maxBackReference=0,e.groupNames.length=0,e.backReferenceNames.length=0,this.regexp_disjunction(e),e.pos!==e.source.length&&(e.eat(41)&&e.raise("Unmatched ')'"),(e.eat(93)||e.eat(125))&&e.raise("Lone quantifier brackets")),e.maxBackReference>e.numCapturingParens&&e.raise("Invalid escape");for(var t=0,n=e.backReferenceNames;t<n.length;t+=1){var r=n[t];e.groupNames.indexOf(r)===-1&&e.raise("Invalid named capture referenced")}};Xt.regexp_disjunction=function(e){for(this.regexp_alternative(e);e.eat(124);)this.regexp_alternative(e);this.regexp_eatQuantifier(e,!0)&&e.raise("Nothing to repeat"),e.eat(123)&&e.raise("Lone quantifier brackets")};Xt.regexp_alternative=function(e){for(;e.pos<e.source.length&&this.regexp_eatTerm(e););};Xt.regexp_eatTerm=function(e){return this.regexp_eatAssertion(e)?(e.lastAssertionIsQuantifiable&&this.regexp_eatQuantifier(e)&&e.switchU&&e.raise("Invalid quantifier"),!0):(e.switchU?this.regexp_eatAtom(e):this.regexp_eatExtendedAtom(e))?(this.regexp_eatQuantifier(e),!0):!1};Xt.regexp_eatAssertion=function(e){var t=e.pos;if(e.lastAssertionIsQuantifiable=!1,e.eat(94)||e.eat(36))return!0;if(e.eat(92)){if(e.eat(66)||e.eat(98))return!0;e.pos=t}if(e.eat(40)&&e.eat(63)){var n=!1;if(this.options.ecmaVersion>=9&&(n=e.eat(60)),e.eat(61)||e.eat(33))return this.regexp_disjunction(e),e.eat(41)||e.raise("Unterminated group"),e.lastAssertionIsQuantifiable=!n,!0}return e.pos=t,!1};Xt.regexp_eatQuantifier=function(e,t){return t===void 0&&(t=!1),this.regexp_eatQuantifierPrefix(e,t)?(e.eat(63),!0):!1};Xt.regexp_eatQuantifierPrefix=function(e,t){return e.eat(42)||e.eat(43)||e.eat(63)||this.regexp_eatBracedQuantifier(e,t)};Xt.regexp_eatBracedQuantifier=function(e,t){var n=e.pos;if(e.eat(123)){var r=0,a=-1;if(this.regexp_eatDecimalDigits(e)&&(r=e.lastIntValue,e.eat(44)&&this.regexp_eatDecimalDigits(e)&&(a=e.lastIntValue),e.eat(125)))return a!==-1&&a<r&&!t&&e.raise("numbers out of order in {} quantifier"),!0;e.switchU&&!t&&e.raise("Incomplete quantifier"),e.pos=n}return!1};Xt.regexp_eatAtom=function(e){return this.regexp_eatPatternCharacters(e)||e.eat(46)||this.regexp_eatReverseSolidusAtomEscape(e)||this.regexp_eatCharacterClass(e)||this.regexp_eatUncapturingGroup(e)||this.regexp_eatCapturingGroup(e)};Xt.regexp_eatReverseSolidusAtomEscape=function(e){var t=e.pos;if(e.eat(92)){if(this.regexp_eatAtomEscape(e))return!0;e.pos=t}return!1};Xt.regexp_eatUncapturingGroup=function(e){var t=e.pos;if(e.eat(40)){if(e.eat(63)&&e.eat(58)){if(this.regexp_disjunction(e),e.eat(41))return!0;e.raise("Unterminated group")}e.pos=t}return!1};Xt.regexp_eatCapturingGroup=function(e){if(e.eat(40)){if(this.options.ecmaVersion>=9?this.regexp_groupSpecifier(e):e.current()===63&&e.raise("Invalid group"),this.regexp_disjunction(e),e.eat(41))return e.numCapturingParens+=1,!0;e.raise("Unterminated group")}return!1};Xt.regexp_eatExtendedAtom=function(e){return e.eat(46)||this.regexp_eatReverseSolidusAtomEscape(e)||this.regexp_eatCharacterClass(e)||this.regexp_eatUncapturingGroup(e)||this.regexp_eatCapturingGroup(e)||this.regexp_eatInvalidBracedQuantifier(e)||this.regexp_eatExtendedPatternCharacter(e)};Xt.regexp_eatInvalidBracedQuantifier=function(e){return this.regexp_eatBracedQuantifier(e,!0)&&e.raise("Nothing to repeat"),!1};Xt.regexp_eatSyntaxCharacter=function(e){var t=e.current();return Z9(t)?(e.lastIntValue=t,e.advance(),!0):!1};function Z9(e){return e===36||e>=40&&e<=43||e===46||e===63||e>=91&&e<=94||e>=123&&e<=125}Xt.regexp_eatPatternCharacters=function(e){for(var t=e.pos,n=0;(n=e.current())!==-1&&!Z9(n);)e.advance();return e.pos!==t};Xt.regexp_eatExtendedPatternCharacter=function(e){var t=e.current();return t!==-1&&t!==36&&!(t>=40&&t<=43)&&t!==46&&t!==63&&t!==91&&t!==94&&t!==124?(e.advance(),!0):!1};Xt.regexp_groupSpecifier=function(e){if(e.eat(63)){if(this.regexp_eatGroupName(e)){e.groupNames.indexOf(e.lastStringValue)!==-1&&e.raise("Duplicate capture group name"),e.groupNames.push(e.lastStringValue);return}e.raise("Invalid group")}};Xt.regexp_eatGroupName=function(e){if(e.lastStringValue="",e.eat(60)){if(this.regexp_eatRegExpIdentifierName(e)&&e.eat(62))return!0;e.raise("Invalid capture group name")}return!1};Xt.regexp_eatRegExpIdentifierName=function(e){if(e.lastStringValue="",this.regexp_eatRegExpIdentifierStart(e)){for(e.lastStringValue+=$g(e.lastIntValue);this.regexp_eatRegExpIdentifierPart(e);)e.lastStringValue+=$g(e.lastIntValue);return!0}return!1};Xt.regexp_eatRegExpIdentifierStart=function(e){var t=e.pos,n=this.options.ecmaVersion>=11,r=e.current(n);return e.advance(n),r===92&&this.regexp_eatRegExpUnicodeEscapeSequence(e,n)&&(r=e.lastIntValue),Jve(r)?(e.lastIntValue=r,!0):(e.pos=t,!1)};function Jve(e){return Rl(e,!0)||e===36||e===95}Xt.regexp_eatRegExpIdentifierPart=function(e){var t=e.pos,n=this.options.ecmaVersion>=11,r=e.current(n);return e.advance(n),r===92&&this.regexp_eatRegExpUnicodeEscapeSequence(e,n)&&(r=e.lastIntValue),ebe(r)?(e.lastIntValue=r,!0):(e.pos=t,!1)};function ebe(e){return kf(e,!0)||e===36||e===95||e===8204||e===8205}Xt.regexp_eatAtomEscape=function(e){return this.regexp_eatBackReference(e)||this.regexp_eatCharacterClassEscape(e)||this.regexp_eatCharacterEscape(e)||e.switchN&&this.regexp_eatKGroupName(e)?!0:(e.switchU&&(e.current()===99&&e.raise("Invalid unicode escape"),e.raise("Invalid escape")),!1)};Xt.regexp_eatBackReference=function(e){var t=e.pos;if(this.regexp_eatDecimalEscape(e)){var n=e.lastIntValue;if(e.switchU)return n>e.maxBackReference&&(e.maxBackReference=n),!0;if(n<=e.numCapturingParens)return!0;e.pos=t}return!1};Xt.regexp_eatKGroupName=function(e){if(e.eat(107)){if(this.regexp_eatGroupName(e))return e.backReferenceNames.push(e.lastStringValue),!0;e.raise("Invalid named reference")}return!1};Xt.regexp_eatCharacterEscape=function(e){return this.regexp_eatControlEscape(e)||this.regexp_eatCControlLetter(e)||this.regexp_eatZero(e)||this.regexp_eatHexEscapeSequence(e)||this.regexp_eatRegExpUnicodeEscapeSequence(e,!1)||!e.switchU&&this.regexp_eatLegacyOctalEscapeSequence(e)||this.regexp_eatIdentityEscape(e)};Xt.regexp_eatCControlLetter=function(e){var t=e.pos;if(e.eat(99)){if(this.regexp_eatControlLetter(e))return!0;e.pos=t}return!1};Xt.regexp_eatZero=function(e){return e.current()===48&&!Gv(e.lookahead())?(e.lastIntValue=0,e.advance(),!0):!1};Xt.regexp_eatControlEscape=function(e){var t=e.current();return t===116?(e.lastIntValue=9,e.advance(),!0):t===110?(e.lastIntValue=10,e.advance(),!0):t===118?(e.lastIntValue=11,e.advance(),!0):t===102?(e.lastIntValue=12,e.advance(),!0):t===114?(e.lastIntValue=13,e.advance(),!0):!1};Xt.regexp_eatControlLetter=function(e){var t=e.current();return q9(t)?(e.lastIntValue=t%32,e.advance(),!0):!1};function q9(e){return e>=65&&e<=90||e>=97&&e<=122}Xt.regexp_eatRegExpUnicodeEscapeSequence=function(e,t){t===void 0&&(t=!1);var n=e.pos,r=t||e.switchU;if(e.eat(117)){if(this.regexp_eatFixedHexDigits(e,4)){var a=e.lastIntValue;if(r&&a>=55296&&a<=56319){var i=e.pos;if(e.eat(92)&&e.eat(117)&&this.regexp_eatFixedHexDigits(e,4)){var o=e.lastIntValue;if(o>=56320&&o<=57343)return e.lastIntValue=(a-55296)*1024+(o-56320)+65536,!0}e.pos=i,e.lastIntValue=a}return!0}if(r&&e.eat(123)&&this.regexp_eatHexDigits(e)&&e.eat(125)&&tbe(e.lastIntValue))return!0;r&&e.raise("Invalid unicode escape"),e.pos=n}return!1};function tbe(e){return e>=0&&e<=1114111}Xt.regexp_eatIdentityEscape=function(e){if(e.switchU)return this.regexp_eatSyntaxCharacter(e)?!0:e.eat(47)?(e.lastIntValue=47,!0):!1;var t=e.current();return t!==99&&(!e.switchN||t!==107)?(e.lastIntValue=t,e.advance(),!0):!1};Xt.regexp_eatDecimalEscape=function(e){e.lastIntValue=0;var t=e.current();if(t>=49&&t<=57){do e.lastIntValue=10*e.lastIntValue+(t-48),e.advance();while((t=e.current())>=48&&t<=57);return!0}return!1};Xt.regexp_eatCharacterClassEscape=function(e){var t=e.current();if(nbe(t))return e.lastIntValue=-1,e.advance(),!0;if(e.switchU&&this.options.ecmaVersion>=9&&(t===80||t===112)){if(e.lastIntValue=-1,e.advance(),e.eat(123)&&this.regexp_eatUnicodePropertyValueExpression(e)&&e.eat(125))return!0;e.raise("Invalid property name")}return!1};function nbe(e){return e===100||e===68||e===115||e===83||e===119||e===87}Xt.regexp_eatUnicodePropertyValueExpression=function(e){var t=e.pos;if(this.regexp_eatUnicodePropertyName(e)&&e.eat(61)){var n=e.lastStringValue;if(this.regexp_eatUnicodePropertyValue(e)){var r=e.lastStringValue;return this.regexp_validateUnicodePropertyNameAndValue(e,n,r),!0}}if(e.pos=t,this.regexp_eatLoneUnicodePropertyNameOrValue(e)){var a=e.lastStringValue;return this.regexp_validateUnicodePropertyNameOrValue(e,a),!0}return!1};Xt.regexp_validateUnicodePropertyNameAndValue=function(e,t,n){zv(e.unicodeProperties.nonBinary,t)||e.raise("Invalid property name"),e.unicodeProperties.nonBinary[t].test(n)||e.raise("Invalid property value")};Xt.regexp_validateUnicodePropertyNameOrValue=function(e,t){e.unicodeProperties.binary.test(t)||e.raise("Invalid property name")};Xt.regexp_eatUnicodePropertyName=function(e){var t=0;for(e.lastStringValue="";K9(t=e.current());)e.lastStringValue+=$g(t),e.advance();return e.lastStringValue!==""};function K9(e){return q9(e)||e===95}Xt.regexp_eatUnicodePropertyValue=function(e){var t=0;for(e.lastStringValue="";rbe(t=e.current());)e.lastStringValue+=$g(t),e.advance();return e.lastStringValue!==""};function rbe(e){return K9(e)||Gv(e)}Xt.regexp_eatLoneUnicodePropertyNameOrValue=function(e){return this.regexp_eatUnicodePropertyValue(e)};Xt.regexp_eatCharacterClass=function(e){if(e.eat(91)){if(e.eat(94),this.regexp_classRanges(e),e.eat(93))return!0;e.raise("Unterminated character class")}return!1};Xt.regexp_classRanges=function(e){for(;this.regexp_eatClassAtom(e);){var t=e.lastIntValue;if(e.eat(45)&&this.regexp_eatClassAtom(e)){var n=e.lastIntValue;e.switchU&&(t===-1||n===-1)&&e.raise("Invalid character class"),t!==-1&&n!==-1&&t>n&&e.raise("Range out of order in character class")}}};Xt.regexp_eatClassAtom=function(e){var t=e.pos;if(e.eat(92)){if(this.regexp_eatClassEscape(e))return!0;if(e.switchU){var n=e.current();(n===99||eF(n))&&e.raise("Invalid class escape"),e.raise("Invalid escape")}e.pos=t}var r=e.current();return r!==93?(e.lastIntValue=r,e.advance(),!0):!1};Xt.regexp_eatClassEscape=function(e){var t=e.pos;if(e.eat(98))return e.lastIntValue=8,!0;if(e.switchU&&e.eat(45))return e.lastIntValue=45,!0;if(!e.switchU&&e.eat(99)){if(this.regexp_eatClassControlLetter(e))return!0;e.pos=t}return this.regexp_eatCharacterClassEscape(e)||this.regexp_eatCharacterEscape(e)};Xt.regexp_eatClassControlLetter=function(e){var t=e.current();return Gv(t)||t===95?(e.lastIntValue=t%32,e.advance(),!0):!1};Xt.regexp_eatHexEscapeSequence=function(e){var t=e.pos;if(e.eat(120)){if(this.regexp_eatFixedHexDigits(e,2))return!0;e.switchU&&e.raise("Invalid escape"),e.pos=t}return!1};Xt.regexp_eatDecimalDigits=function(e){var t=e.pos,n=0;for(e.lastIntValue=0;Gv(n=e.current());)e.lastIntValue=10*e.lastIntValue+(n-48),e.advance();return e.pos!==t};function Gv(e){return e>=48&&e<=57}Xt.regexp_eatHexDigits=function(e){var t=e.pos,n=0;for(e.lastIntValue=0;Q9(n=e.current());)e.lastIntValue=16*e.lastIntValue+J9(n),e.advance();return e.pos!==t};function Q9(e){return e>=48&&e<=57||e>=65&&e<=70||e>=97&&e<=102}function J9(e){return e>=65&&e<=70?10+(e-65):e>=97&&e<=102?10+(e-97):e-48}Xt.regexp_eatLegacyOctalEscapeSequence=function(e){if(this.regexp_eatOctalDigit(e)){var t=e.lastIntValue;if(this.regexp_eatOctalDigit(e)){var n=e.lastIntValue;t<=3&&this.regexp_eatOctalDigit(e)?e.lastIntValue=t*64+n*8+e.lastIntValue:e.lastIntValue=t*8+n}else e.lastIntValue=t;return!0}return!1};Xt.regexp_eatOctalDigit=function(e){var t=e.current();return eF(t)?(e.lastIntValue=t-48,e.advance(),!0):(e.lastIntValue=0,!1)};function eF(e){return e>=48&&e<=55}Xt.regexp_eatFixedHexDigits=function(e,t){var n=e.pos;e.lastIntValue=0;for(var r=0;r<t;++r){var a=e.current();if(!Q9(a))return e.pos=n,!1;e.lastIntValue=16*e.lastIntValue+J9(a),e.advance()}return!0};var dE=function(t){this.type=t.type,this.value=t.value,this.start=t.start,this.end=t.end,t.options.locations&&(this.loc=new Uv(t,t.startLoc,t.endLoc)),t.options.ranges&&(this.range=[t.start,t.end])},kn=jr.prototype;kn.next=function(e){!e&&this.type.keyword&&this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword "+this.type.keyword),this.options.onToken&&this.options.onToken(new dE(this)),this.lastTokEnd=this.end,this.lastTokStart=this.start,this.lastTokEndLoc=this.endLoc,this.lastTokStartLoc=this.startLoc,this.nextToken()};kn.getToken=function(){return this.next(),new dE(this)};typeof Symbol!="undefined"&&(kn[Symbol.iterator]=function(){var e=this;return{next:function(){var t=e.getToken();return{done:t.type===z.eof,value:t}}}});kn.curContext=function(){return this.context[this.context.length-1]};kn.nextToken=function(){var e=this.curContext();if((!e||!e.preserveSpace)&&this.skipSpace(),this.start=this.pos,this.options.locations&&(this.startLoc=this.curPosition()),this.pos>=this.input.length)return this.finishToken(z.eof);if(e.override)return e.override(this);this.readToken(this.fullCharCodeAtPos())};kn.readToken=function(e){return Rl(e,this.options.ecmaVersion>=6)||e===92?this.readWord():this.getTokenFromCode(e)};kn.fullCharCodeAtPos=function(){var e=this.input.charCodeAt(this.pos);if(e<=55295||e>=57344)return e;var t=this.input.charCodeAt(this.pos+1);return(e<<10)+t-56613888};kn.skipBlockComment=function(){var e=this.options.onComment&&this.curPosition(),t=this.pos,n=this.input.indexOf("*/",this.pos+=2);if(n===-1&&this.raise(this.pos-2,"Unterminated comment"),this.pos=n+2,this.options.locations){fh.lastIndex=t;for(var r;(r=fh.exec(this.input))&&r.index<this.pos;)++this.curLine,this.lineStart=r.index+r[0].length}this.options.onComment&&this.options.onComment(!0,this.input.slice(t+2,n),t,this.pos,e,this.curPosition())};kn.skipLineComment=function(e){for(var t=this.pos,n=this.options.onComment&&this.curPosition(),r=this.input.charCodeAt(this.pos+=e);this.pos<this.input.length&&!Nh(r);)r=this.input.charCodeAt(++this.pos);this.options.onComment&&this.options.onComment(!1,this.input.slice(t+e,this.pos),t,this.pos,n,this.curPosition())};kn.skipSpace=function(){e:for(;this.pos<this.input.length;){var e=this.input.charCodeAt(this.pos);switch(e){case 32:case 160:++this.pos;break;case 13:this.input.charCodeAt(this.pos+1)===10&&++this.pos;case 10:case 8232:case 8233:++this.pos,this.options.locations&&(++this.curLine,this.lineStart=this.pos);break;case 47:switch(this.input.charCodeAt(this.pos+1)){case 42:this.skipBlockComment();break;case 47:this.skipLineComment(2);break;default:break e}break;default:if(e>8&&e<14||e>=5760&&M9.test(String.fromCharCode(e)))++this.pos;else break e}}};kn.finishToken=function(e,t){this.end=this.pos,this.options.locations&&(this.endLoc=this.curPosition());var n=this.type;this.type=e,this.value=t,this.updateContext(n)};kn.readToken_dot=function(){var e=this.input.charCodeAt(this.pos+1);if(e>=48&&e<=57)return this.readNumber(!0);var t=this.input.charCodeAt(this.pos+2);return this.options.ecmaVersion>=6&&e===46&&t===46?(this.pos+=3,this.finishToken(z.ellipsis)):(++this.pos,this.finishToken(z.dot))};kn.readToken_slash=function(){var e=this.input.charCodeAt(this.pos+1);return this.exprAllowed?(++this.pos,this.readRegexp()):e===61?this.finishOp(z.assign,2):this.finishOp(z.slash,1)};kn.readToken_mult_modulo_exp=function(e){var t=this.input.charCodeAt(this.pos+1),n=1,r=e===42?z.star:z.modulo;return this.options.ecmaVersion>=7&&e===42&&t===42&&(++n,r=z.starstar,t=this.input.charCodeAt(this.pos+2)),t===61?this.finishOp(z.assign,n+1):this.finishOp(r,n)};kn.readToken_pipe_amp=function(e){var t=this.input.charCodeAt(this.pos+1);if(t===e){if(this.options.ecmaVersion>=12){var n=this.input.charCodeAt(this.pos+2);if(n===61)return this.finishOp(z.assign,3)}return this.finishOp(e===124?z.logicalOR:z.logicalAND,2)}return t===61?this.finishOp(z.assign,2):this.finishOp(e===124?z.bitwiseOR:z.bitwiseAND,1)};kn.readToken_caret=function(){var e=this.input.charCodeAt(this.pos+1);return e===61?this.finishOp(z.assign,2):this.finishOp(z.bitwiseXOR,1)};kn.readToken_plus_min=function(e){var t=this.input.charCodeAt(this.pos+1);return t===e?t===45&&!this.inModule&&this.input.charCodeAt(this.pos+2)===62&&(this.lastTokEnd===0||no.test(this.input.slice(this.lastTokEnd,this.pos)))?(this.skipLineComment(3),this.skipSpace(),this.nextToken()):this.finishOp(z.incDec,2):t===61?this.finishOp(z.assign,2):this.finishOp(z.plusMin,1)};kn.readToken_lt_gt=function(e){var t=this.input.charCodeAt(this.pos+1),n=1;return t===e?(n=e===62&&this.input.charCodeAt(this.pos+2)===62?3:2,this.input.charCodeAt(this.pos+n)===61?this.finishOp(z.assign,n+1):this.finishOp(z.bitShift,n)):t===33&&e===60&&!this.inModule&&this.input.charCodeAt(this.pos+2)===45&&this.input.charCodeAt(this.pos+3)===45?(this.skipLineComment(4),this.skipSpace(),this.nextToken()):(t===61&&(n=2),this.finishOp(z.relational,n))};kn.readToken_eq_excl=function(e){var t=this.input.charCodeAt(this.pos+1);return t===61?this.finishOp(z.equality,this.input.charCodeAt(this.pos+2)===61?3:2):e===61&&t===62&&this.options.ecmaVersion>=6?(this.pos+=2,this.finishToken(z.arrow)):this.finishOp(e===61?z.eq:z.prefix,1)};kn.readToken_question=function(){var e=this.options.ecmaVersion;if(e>=11){var t=this.input.charCodeAt(this.pos+1);if(t===46){var n=this.input.charCodeAt(this.pos+2);if(n<48||n>57)return this.finishOp(z.questionDot,2)}if(t===63){if(e>=12){var r=this.input.charCodeAt(this.pos+2);if(r===61)return this.finishOp(z.assign,3)}return this.finishOp(z.coalesce,2)}}return this.finishOp(z.question,1)};kn.getTokenFromCode=function(e){switch(e){case 46:return this.readToken_dot();case 40:return++this.pos,this.finishToken(z.parenL);case 41:return++this.pos,this.finishToken(z.parenR);case 59:return++this.pos,this.finishToken(z.semi);case 44:return++this.pos,this.finishToken(z.comma);case 91:return++this.pos,this.finishToken(z.bracketL);case 93:return++this.pos,this.finishToken(z.bracketR);case 123:return++this.pos,this.finishToken(z.braceL);case 125:return++this.pos,this.finishToken(z.braceR);case 58:return++this.pos,this.finishToken(z.colon);case 96:if(this.options.ecmaVersion<6)break;return++this.pos,this.finishToken(z.backQuote);case 48:var t=this.input.charCodeAt(this.pos+1);if(t===120||t===88)return this.readRadixNumber(16);if(this.options.ecmaVersion>=6){if(t===111||t===79)return this.readRadixNumber(8);if(t===98||t===66)return this.readRadixNumber(2)}case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.readNumber(!1);case 34:case 39:return this.readString(e);case 47:return this.readToken_slash();case 37:case 42:return this.readToken_mult_modulo_exp(e);case 124:case 38:return this.readToken_pipe_amp(e);case 94:return this.readToken_caret();case 43:case 45:return this.readToken_plus_min(e);case 60:case 62:return this.readToken_lt_gt(e);case 61:case 33:return this.readToken_eq_excl(e);case 63:return this.readToken_question();case 126:return this.finishOp(z.prefix,1)}this.raise(this.pos,"Unexpected character '"+pE(e)+"'")};kn.finishOp=function(e,t){var n=this.input.slice(this.pos,this.pos+t);return this.pos+=t,this.finishToken(e,n)};kn.readRegexp=function(){for(var e,t,n=this.pos;;){this.pos>=this.input.length&&this.raise(n,"Unterminated regular expression");var r=this.input.charAt(this.pos);if(no.test(r)&&this.raise(n,"Unterminated regular expression"),e)e=!1;else{if(r==="[")t=!0;else if(r==="]"&&t)t=!1;else if(r==="/"&&!t)break;e=r==="\\"}++this.pos}var a=this.input.slice(n,this.pos);++this.pos;var i=this.pos,o=this.readWord1();this.containsEsc&&this.unexpected(i);var s=this.regexpState||(this.regexpState=new Ls(this));s.reset(n,a,o),this.validateRegExpFlags(s),this.validateRegExpPattern(s);var l=null;try{l=new RegExp(a,o)}catch{}return this.finishToken(z.regexp,{pattern:a,flags:o,value:l})};kn.readInt=function(e,t,n){for(var r=this.options.ecmaVersion>=12&&t===void 0,a=n&&this.input.charCodeAt(this.pos)===48,i=this.pos,o=0,s=0,l=0,u=t==null?1/0:t;l<u;++l,++this.pos){var c=this.input.charCodeAt(this.pos),f=void 0;if(r&&c===95){a&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed in legacy octal numeric literals"),s===95&&this.raiseRecoverable(this.pos,"Numeric separator must be exactly one underscore"),l===0&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed at the first of digits"),s=c;continue}if(c>=97?f=c-97+10:c>=65?f=c-65+10:c>=48&&c<=57?f=c-48:f=1/0,f>=e)break;s=c,o=o*e+f}return r&&s===95&&this.raiseRecoverable(this.pos-1,"Numeric separator is not allowed at the last of digits"),this.pos===i||t!=null&&this.pos-i!==t?null:o};function abe(e,t){return t?parseInt(e,8):parseFloat(e.replace(/_/g,""))}function tF(e){return typeof BigInt!="function"?null:BigInt(e.replace(/_/g,""))}kn.readRadixNumber=function(e){var t=this.pos;this.pos+=2;var n=this.readInt(e);return n==null&&this.raise(this.start+2,"Expected number in radix "+e),this.options.ecmaVersion>=11&&this.input.charCodeAt(this.pos)===110?(n=tF(this.input.slice(t,this.pos)),++this.pos):Rl(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(z.num,n)};kn.readNumber=function(e){var t=this.pos;!e&&this.readInt(10,void 0,!0)===null&&this.raise(t,"Invalid number");var n=this.pos-t>=2&&this.input.charCodeAt(t)===48;n&&this.strict&&this.raise(t,"Invalid number");var r=this.input.charCodeAt(this.pos);if(!n&&!e&&this.options.ecmaVersion>=11&&r===110){var a=tF(this.input.slice(t,this.pos));return++this.pos,Rl(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(z.num,a)}n&&/[89]/.test(this.input.slice(t,this.pos))&&(n=!1),r===46&&!n&&(++this.pos,this.readInt(10),r=this.input.charCodeAt(this.pos)),(r===69||r===101)&&!n&&(r=this.input.charCodeAt(++this.pos),(r===43||r===45)&&++this.pos,this.readInt(10)===null&&this.raise(t,"Invalid number")),Rl(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number");var i=abe(this.input.slice(t,this.pos),n);return this.finishToken(z.num,i)};kn.readCodePoint=function(){var e=this.input.charCodeAt(this.pos),t;if(e===123){this.options.ecmaVersion<6&&this.unexpected();var n=++this.pos;t=this.readHexChar(this.input.indexOf("}",this.pos)-this.pos),++this.pos,t>1114111&&this.invalidStringToken(n,"Code point out of bounds")}else t=this.readHexChar(4);return t};function pE(e){return e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode((e>>10)+55296,(e&1023)+56320))}kn.readString=function(e){for(var t="",n=++this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated string constant");var r=this.input.charCodeAt(this.pos);if(r===e)break;r===92?(t+=this.input.slice(n,this.pos),t+=this.readEscapedChar(!1),n=this.pos):(Nh(r,this.options.ecmaVersion>=10)&&this.raise(this.start,"Unterminated string constant"),++this.pos)}return t+=this.input.slice(n,this.pos++),this.finishToken(z.string,t)};var nF={};kn.tryReadTemplateToken=function(){this.inTemplateElement=!0;try{this.readTmplToken()}catch(e){if(e===nF)this.readInvalidTemplateToken();else throw e}this.inTemplateElement=!1};kn.invalidStringToken=function(e,t){if(this.inTemplateElement&&this.options.ecmaVersion>=9)throw nF;this.raise(e,t)};kn.readTmplToken=function(){for(var e="",t=this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated template");var n=this.input.charCodeAt(this.pos);if(n===96||n===36&&this.input.charCodeAt(this.pos+1)===123)return this.pos===this.start&&(this.type===z.template||this.type===z.invalidTemplate)?n===36?(this.pos+=2,this.finishToken(z.dollarBraceL)):(++this.pos,this.finishToken(z.backQuote)):(e+=this.input.slice(t,this.pos),this.finishToken(z.template,e));if(n===92)e+=this.input.slice(t,this.pos),e+=this.readEscapedChar(!0),t=this.pos;else if(Nh(n)){switch(e+=this.input.slice(t,this.pos),++this.pos,n){case 13:this.input.charCodeAt(this.pos)===10&&++this.pos;case 10:e+=`
`;break;default:e+=String.fromCharCode(n);break}this.options.locations&&(++this.curLine,this.lineStart=this.pos),t=this.pos}else++this.pos}};kn.readInvalidTemplateToken=function(){for(;this.pos<this.input.length;this.pos++)switch(this.input[this.pos]){case"\\":++this.pos;break;case"$":if(this.input[this.pos+1]!=="{")break;case"`":return this.finishToken(z.invalidTemplate,this.input.slice(this.start,this.pos))}this.raise(this.start,"Unterminated template")};kn.readEscapedChar=function(e){var t=this.input.charCodeAt(++this.pos);switch(++this.pos,t){case 110:return`
`;case 114:return"\r";case 120:return String.fromCharCode(this.readHexChar(2));case 117:return pE(this.readCodePoint());case 116:return"	";case 98:return"\b";case 118:return"\v";case 102:return"\f";case 13:this.input.charCodeAt(this.pos)===10&&++this.pos;case 10:return this.options.locations&&(this.lineStart=this.pos,++this.curLine),"";case 56:case 57:if(e){var n=this.pos-1;return this.invalidStringToken(n,"Invalid escape sequence in template string"),null}default:if(t>=48&&t<=55){var r=this.input.substr(this.pos-1,3).match(/^[0-7]+/)[0],a=parseInt(r,8);return a>255&&(r=r.slice(0,-1),a=parseInt(r,8)),this.pos+=r.length-1,t=this.input.charCodeAt(this.pos),(r!=="0"||t===56||t===57)&&(this.strict||e)&&this.invalidStringToken(this.pos-1-r.length,e?"Octal literal in template string":"Octal literal in strict mode"),String.fromCharCode(a)}return Nh(t)?"":String.fromCharCode(t)}};kn.readHexChar=function(e){var t=this.pos,n=this.readInt(16,e);return n===null&&this.invalidStringToken(t,"Bad character escape sequence"),n};kn.readWord1=function(){this.containsEsc=!1;for(var e="",t=!0,n=this.pos,r=this.options.ecmaVersion>=6;this.pos<this.input.length;){var a=this.fullCharCodeAtPos();if(kf(a,r))this.pos+=a<=65535?1:2;else if(a===92){this.containsEsc=!0,e+=this.input.slice(n,this.pos);var i=this.pos;this.input.charCodeAt(++this.pos)!==117&&this.invalidStringToken(this.pos,"Expecting Unicode escape sequence \\uXXXX"),++this.pos;var o=this.readCodePoint();(t?Rl:kf)(o,r)||this.invalidStringToken(i,"Invalid Unicode escape"),e+=pE(o),n=this.pos}else break;t=!1}return e+this.input.slice(n,this.pos)};kn.readWord=function(){var e=this.readWord1(),t=z.name;return this.keywords.test(e)&&(t=iE[e]),this.finishToken(t,e)};var ibe="7.4.1";jr.acorn={Parser:jr,version:ibe,defaultOptions:Pw,Position:dh,SourceLocation:Uv,getLineInfo:P9,Node:cE,TokenType:Nn,tokTypes:z,keywordTypes:iE,TokContext:co,tokContexts:Fr,isIdentifierChar:kf,isIdentifierStart:Rl,Token:dE,isNewLine:Nh,lineBreak:no,lineBreakG:fh,nonASCIIwhitespace:M9};function obe(e,t){return jr.parse(e,t)}function $u(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}function Sf(e){var t=typeof Map=="function"?new Map:void 0;return Sf=function(r){if(r===null||!lbe(r))return r;if(typeof r!="function")throw new TypeError("Super expression must either be null or a function");if(typeof t!="undefined"){if(t.has(r))return t.get(r);t.set(r,a)}function a(){return F0(r,arguments,Lw(this).constructor)}return a.prototype=Object.create(r.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),Vg(a,r)},Sf(e)}function sbe(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function F0(e,t,n){return sbe()?F0=Reflect.construct:F0=function(a,i,o){var s=[null];s.push.apply(s,i);var l=Function.bind.apply(a,s),u=new l;return o&&Vg(u,o.prototype),u},F0.apply(null,arguments)}function lbe(e){return Function.toString.call(e).indexOf("[native code]")!==-1}function Vg(e,t){return Vg=Object.setPrototypeOf||function(r,a){return r.__proto__=a,r},Vg(e,t)}function Lw(e){return Lw=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},Lw(e)}var ube=function(e){$u(t,e);function t(){return e.apply(this,arguments)||this}return t}(Sf(Error)),cbe=function(e){$u(t,e);function t(){return e.apply(this,arguments)||this}return t}(Sf(SyntaxError)),Nw=function(e){$u(t,e);function t(){return e.apply(this,arguments)||this}return t}(Sf(ReferenceError)),fbe=function(e){$u(t,e);function t(){return e.apply(this,arguments)||this}return t}(Sf(TypeError)),Fw=function(e){$u(t,e);function t(){return e.apply(this,arguments)||this}return t}(ube),dbe=function(e){$u(t,e);function t(){return e.apply(this,arguments)||this}return t}(cbe),fo=function(e){$u(t,e);function t(){return e.apply(this,arguments)||this}return t}(Nw),Ma={UnknownError:[3001,"%0",Fw],ExecutionTimeOutError:[3002,"Script execution timed out after %0ms",Fw],NodeTypeSyntaxError:[1001,"Unknown node type: %0",fo],BinaryOperatorSyntaxError:[1002,"Unknown binary operator: %0",fo],LogicalOperatorSyntaxError:[1003,"Unknown logical operator: %0",fo],UnaryOperatorSyntaxError:[1004,"Unknown unary operator: %0",fo],UpdateOperatorSyntaxError:[1005,"Unknown update operator: %0",fo],ObjectStructureSyntaxError:[1006,"Unknown object structure: %0",fo],AssignmentExpressionSyntaxError:[1007,"Unknown assignment expression: %0",fo],VariableTypeSyntaxError:[1008,"Unknown variable type: %0",fo],ParamTypeSyntaxError:[1009,"Unknown param type: %0",fo],AssignmentTypeSyntaxError:[1010,"Unknown assignment type: %0",fo],FunctionUndefinedReferenceError:[2001,"%0 is not a function",Nw],VariableUndefinedReferenceError:[2002,"%0 is not defined",Nw],IsNotConstructor:[2003,"%0 is not a constructor",fbe]};function pbe(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function D0(e,t,n){return pbe()?D0=Reflect.construct:D0=function(a,i,o){var s=[null];s.push.apply(s,i);var l=Function.bind.apply(a,s),u=new l;return o&&Dw(u,o.prototype),u},D0.apply(null,arguments)}function Dw(e,t){return Dw=Object.setPrototypeOf||function(r,a){return r.__proto__=a,r},Dw(e,t)}var hbe="0.0.3";function GM(e,t){Object.defineProperty(e,"name",{value:t,writable:!1,enumerable:!1,configurable:!0})}var mbe=Object.prototype.hasOwnProperty,tu=Symbol("Break"),nu=Symbol("Continue"),HM=Symbol("DefaultCase"),ia=Symbol("EmptyStatementReturn"),WM=Symbol("WithScopeName"),XM=Symbol("SuperScopeName"),YM=Symbol("RootScopeName"),ZM=Symbol("GlobalScopeName");function Rx(e){return typeof e=="function"}var tl=function(){function e(n){this.interpreter=n}var t=e.prototype;return t.generator=function(){var r=this.interpreter;function a(){return this.getCurrentScope()}function i(){return this.getGlobalScope()}function o(){return this.getCurrentContext()}return{getOptions:r.getOptions.bind(r),getCurrentScope:a.bind(r),getGlobalScope:i.bind(r),getCurrentContext:o.bind(r),getExecStartTime:r.getExecStartTime.bind(r)}},e}();function hE(e,t,n){if(n===void 0&&(n=!0),!(e instanceof tl))throw new Error("Illegal call");if(typeof t!="string")return t;if(!!t){var r=e.generator(),a=r.getOptions(),i={timeout:a.timeout,_initEnv:function(){n||this.setCurrentContext(r.getCurrentContext()),this.execStartTime=r.getExecStartTime(),this.execEndTime=this.execStartTime}},o=n?r.getGlobalScope():r.getCurrentScope(),s=new To(o,i);return s.evaluate(t)}}Object.defineProperty(hE,"__IS_EVAL_FUNC",{value:!0,writable:!1,enumerable:!1,configurable:!1});function mE(e){if(!(e instanceof tl))throw new Error("Illegal call");for(var t=e.generator(),n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];var i=r.pop(),o=new To(t.getGlobalScope(),t.getOptions()),s=`
		    (function anonymous(`+r.join(",")+`){
		        `+i+`
		    });
		    `;return o.evaluate(s)}Object.defineProperty(mE,"__IS_FUNCTION_FUNC",{value:!0,writable:!1,enumerable:!1,configurable:!1});var Io=function(t){this.value=t},ru=function(t){this.value=t},Zs=function(t){this.value=t},Cc=function(t,n,r){n===void 0&&(n=null),this.name=r,this.parent=n,this.data=t,this.labelStack=[]};function e0(){}function gbe(e,t){return e===void 0&&(e=null),new Cc(Object.create(null),e,t)}function vbe(e){return Object.create(e)}var es={NaN:NaN,Infinity:1/0,undefined:void 0,Object,Array,String,Boolean,Number,Date,RegExp,Error,URIError,TypeError,RangeError,SyntaxError,ReferenceError,Float32Array,Float64Array,Uint32Array,Math,parseInt,parseFloat,isNaN,isFinite,decodeURI,decodeURIComponent,encodeURI,encodeURIComponent,escape,unescape,eval:hE,Function:mE};typeof JSON!="undefined"&&(es.JSON=JSON);typeof Promise!="undefined"&&(es.Promise=Promise);typeof Set!="undefined"&&(es.Set=Set);typeof Map!="undefined"&&(es.Map=Map);typeof Symbol!="undefined"&&(es.Symbol=Symbol);typeof Proxy!="undefined"&&(es.Proxy=Proxy);typeof WeakMap!="undefined"&&(es.WeakMap=WeakMap);typeof WeakSet!="undefined"&&(es.WeakSet=WeakSet);typeof Reflect!="undefined"&&(es.Reflect=Reflect);var To=function(){function e(n,r){n===void 0&&(n=e.global),r===void 0&&(r={}),this.sourceList=[],this.collectDeclVars=Object.create(null),this.collectDeclFuncs=Object.create(null),this.isVarDeclMode=!1,this.lastExecNode=null,this.isRunning=!1,this.options={ecmaVersion:r.ecmaVersion||e.ecmaVersion,timeout:r.timeout||0,rootContext:r.rootContext,globalContextInFunction:r.globalContextInFunction===void 0?e.globalContextInFunction:r.globalContextInFunction,_initEnv:r._initEnv},this.context=n||Object.create(null),this.callStack=[],this.initEnvironment(this.context)}var t=e.prototype;return t.initEnvironment=function(r){var a;if(r instanceof Cc)a=r;else{var i=null,o=this.createSuperScope(r);this.options.rootContext&&(i=new Cc(vbe(this.options.rootContext),o,YM)),a=new Cc(r,i||o,ZM)}this.globalScope=a,this.currentScope=this.globalScope,this.globalContext=a.data,this.currentContext=a.data,this.collectDeclVars=Object.create(null),this.collectDeclFuncs=Object.create(null),this.execStartTime=Date.now(),this.execEndTime=this.execStartTime;var s=this.options._initEnv;s&&s.call(this)},t.getExecStartTime=function(){return this.execStartTime},t.getExecutionTime=function(){return this.execEndTime-this.execStartTime},t.setExecTimeout=function(r){r===void 0&&(r=0),this.options.timeout=r},t.getOptions=function(){return this.options},t.getGlobalScope=function(){return this.globalScope},t.getCurrentScope=function(){return this.currentScope},t.getCurrentContext=function(){return this.currentContext},t.isInterruptThrow=function(r){return r instanceof Fw||r instanceof fo||r instanceof dbe},t.createSuperScope=function(r){var a=Object.assign({},es),i=Object.keys(a);return i.forEach(function(o){o in r&&delete a[o]}),new Cc(a,null,XM)},t.setCurrentContext=function(r){this.currentContext=r},t.setCurrentScope=function(r){this.currentScope=r},t.evaluate=function(r){r===void 0&&(r="");var a;if(!!r)return a=obe(r,{ranges:!0,locations:!0,ecmaVersion:this.options.ecmaVersion||e.ecmaVersion}),this.evaluateNode(a,r)},t.appendCode=function(r){return this.evaluate(r)},t.evaluateNode=function(r,a){var i=this;a===void 0&&(a=""),this.value=void 0,this.source=a,this.sourceList.push(a),this.isRunning=!0,this.execStartTime=Date.now(),this.execEndTime=this.execStartTime,this.collectDeclVars=Object.create(null),this.collectDeclFuncs=Object.create(null);var o=this.getCurrentScope(),s=this.getCurrentContext(),l=o.labelStack.concat([]),u=this.callStack.concat([]),c=function(){i.setCurrentScope(o),i.setCurrentContext(s),o.labelStack=l,i.callStack=u};try{var f=this.createClosure(r);this.addDeclarationsToScope(this.collectDeclVars,this.collectDeclFuncs,this.getCurrentScope()),f()}catch(d){throw d}finally{c(),this.execEndTime=Date.now()}return this.isRunning=!1,this.getValue()},t.createErrorMessage=function(r,a,i){var o=r[1].replace("%0",String(a));return i!==null&&(o+=this.getNodePosition(i||this.lastExecNode)),o},t.createError=function(r,a){return new a(r)},t.createThrowError=function(r,a){return this.createError(r,a)},t.createInternalThrowError=function(r,a,i){return this.createError(this.createErrorMessage(r,a,i),r[2])},t.checkTimeout=function(){if(!this.isRunning)return!1;var r=this.options.timeout||0,a=Date.now();return a-this.execStartTime>r},t.getNodePosition=function(r){if(r){var a="";return r.loc?" ["+r.loc.start.line+":"+r.loc.start.column+"]"+a:""}return""},t.createClosure=function(r){var a=this,i;switch(r.type){case"BinaryExpression":i=this.binaryExpressionHandler(r);break;case"LogicalExpression":i=this.logicalExpressionHandler(r);break;case"UnaryExpression":i=this.unaryExpressionHandler(r);break;case"UpdateExpression":i=this.updateExpressionHandler(r);break;case"ObjectExpression":i=this.objectExpressionHandler(r);break;case"ArrayExpression":i=this.arrayExpressionHandler(r);break;case"CallExpression":i=this.callExpressionHandler(r);break;case"NewExpression":i=this.newExpressionHandler(r);break;case"MemberExpression":i=this.memberExpressionHandler(r);break;case"ThisExpression":i=this.thisExpressionHandler(r);break;case"SequenceExpression":i=this.sequenceExpressionHandler(r);break;case"Literal":i=this.literalHandler(r);break;case"Identifier":i=this.identifierHandler(r);break;case"AssignmentExpression":i=this.assignmentExpressionHandler(r);break;case"FunctionDeclaration":i=this.functionDeclarationHandler(r);break;case"VariableDeclaration":i=this.variableDeclarationHandler(r);break;case"BlockStatement":case"Program":i=this.programHandler(r);break;case"ExpressionStatement":i=this.expressionStatementHandler(r);break;case"EmptyStatement":i=this.emptyStatementHandler(r);break;case"ReturnStatement":i=this.returnStatementHandler(r);break;case"FunctionExpression":i=this.functionExpressionHandler(r);break;case"IfStatement":i=this.ifStatementHandler(r);break;case"ConditionalExpression":i=this.conditionalExpressionHandler(r);break;case"ForStatement":i=this.forStatementHandler(r);break;case"WhileStatement":i=this.whileStatementHandler(r);break;case"DoWhileStatement":i=this.doWhileStatementHandler(r);break;case"ForInStatement":i=this.forInStatementHandler(r);break;case"WithStatement":i=this.withStatementHandler(r);break;case"ThrowStatement":i=this.throwStatementHandler(r);break;case"TryStatement":i=this.tryStatementHandler(r);break;case"ContinueStatement":i=this.continueStatementHandler(r);break;case"BreakStatement":i=this.breakStatementHandler(r);break;case"SwitchStatement":i=this.switchStatementHandler(r);break;case"LabeledStatement":i=this.labeledStatementHandler(r);break;case"DebuggerStatement":i=this.debuggerStatementHandler(r);break;default:throw this.createInternalThrowError(Ma.NodeTypeSyntaxError,r.type,r)}return function(){var o=a.options.timeout;if(o&&o>0&&a.checkTimeout())throw a.createInternalThrowError(Ma.ExecutionTimeOutError,o,null);return a.lastExecNode=r,i.apply(void 0,arguments)}},t.binaryExpressionHandler=function(r){var a=this,i=this.createClosure(r.left),o=this.createClosure(r.right);return function(){var s=i(),l=o();switch(r.operator){case"==":return s==l;case"!=":return s!=l;case"===":return s===l;case"!==":return s!==l;case"<":return s<l;case"<=":return s<=l;case">":return s>l;case">=":return s>=l;case"<<":return s<<l;case">>":return s>>l;case">>>":return s>>>l;case"+":return s+l;case"-":return s-l;case"*":return s*l;case"**":return Math.pow(s,l);case"/":return s/l;case"%":return s%l;case"|":return s|l;case"^":return s^l;case"&":return s&l;case"in":return s in l;case"instanceof":return s instanceof l;default:throw a.createInternalThrowError(Ma.BinaryOperatorSyntaxError,r.operator,r)}}},t.logicalExpressionHandler=function(r){var a=this,i=this.createClosure(r.left),o=this.createClosure(r.right);return function(){switch(r.operator){case"||":return i()||o();case"&&":return i()&&o();default:throw a.createInternalThrowError(Ma.LogicalOperatorSyntaxError,r.operator,r)}}},t.unaryExpressionHandler=function(r){var a=this;switch(r.operator){case"delete":var i=this.createObjectGetter(r.argument),o=this.createNameGetter(r.argument);return function(){var c=i(),f=o();return delete c[f]};default:var s;if(r.operator==="typeof"&&r.argument.type==="Identifier"){var l=this.createObjectGetter(r.argument),u=this.createNameGetter(r.argument);s=function(){return l()[u()]}}else s=this.createClosure(r.argument);return function(){var c=s();switch(r.operator){case"-":return-c;case"+":return+c;case"!":return!c;case"~":return~c;case"void":return;case"typeof":return typeof c;default:throw a.createInternalThrowError(Ma.UnaryOperatorSyntaxError,r.operator,r)}}}},t.updateExpressionHandler=function(r){var a=this,i=this.createObjectGetter(r.argument),o=this.createNameGetter(r.argument);return function(){var s=i(),l=o();switch(a.assertVariable(s,l,r),r.operator){case"++":return r.prefix?++s[l]:s[l]++;case"--":return r.prefix?--s[l]:s[l]--;default:throw a.createInternalThrowError(Ma.UpdateOperatorSyntaxError,r.operator,r)}}},t.objectExpressionHandler=function(r){var a=this,i=[];function o(l){return l.type==="Identifier"?l.name:l.type==="Literal"?l.value:this.throwError(Ma.ObjectStructureSyntaxError,l.type,l)}var s=Object.create(null);return r.properties.forEach(function(l){var u=l.kind,c=o(l.key);(!s[c]||u==="init")&&(s[c]={}),s[c][u]=a.createClosure(l.value),i.push({key:c,property:l})}),function(){for(var l={},u=i.length,c=0;c<u;c++){var f=i[c],d=f.key,p=s[d],h=p.init?p.init():void 0,g=p.get?p.get():function(){},v=p.set?p.set():function(E){};if("set"in p||"get"in p){var b={configurable:!0,enumerable:!0,get:g,set:v};Object.defineProperty(l,d,b)}else{var y=f.property,x=y.kind;y.key.type==="Identifier"&&y.value.type==="FunctionExpression"&&x==="init"&&!y.value.id&&GM(h,y.key.name),l[d]=h}}return l}},t.arrayExpressionHandler=function(r){var a=this,i=r.elements.map(function(o){return o&&a.createClosure(o)});return function(){for(var o=i.length,s=Array(o),l=0;l<o;l++){var u=i[l];u&&(s[l]=u())}return s}},t.safeObjectGet=function(r,a,i){return r[a]},t.createCallFunctionGetter=function(r){var a=this;switch(r.type){case"MemberExpression":var i=this.createClosure(r.object),o=this.createMemberKeyGetter(r),s=this.source;return function(){var u=i(),c=o(),f=a.safeObjectGet(u,c,r);if(!f||!Rx(f)){var d=s.slice(r.start,r.end);throw a.createInternalThrowError(Ma.FunctionUndefinedReferenceError,d,r)}return f.__IS_EVAL_FUNC?function(p){return f(new tl(a),p,!0)}:f.__IS_FUNCTION_FUNC?function(){for(var p=arguments.length,h=new Array(p),g=0;g<p;g++)h[g]=arguments[g];return f.apply(void 0,[new tl(a)].concat(h))}:f.bind(u)};default:var l=this.createClosure(r);return function(){var u="";r.type==="Identifier"&&(u=r.name);var c=l();if(!c||!Rx(c))throw a.createInternalThrowError(Ma.FunctionUndefinedReferenceError,u,r);if(r.type==="Identifier"&&c.__IS_EVAL_FUNC&&u==="eval")return function(p){var h=a.getScopeFromName(u,a.getCurrentScope()),g=h.name===XM||h.name===ZM||h.name===YM;return c(new tl(a),p,!g)};if(c.__IS_EVAL_FUNC)return function(p){return c(new tl(a),p,!0)};if(c.__IS_FUNCTION_FUNC)return function(){for(var p=arguments.length,h=new Array(p),g=0;g<p;g++)h[g]=arguments[g];return c.apply(void 0,[new tl(a)].concat(h))};var f=a.options.globalContextInFunction;if(r.type==="Identifier"){var d=a.getIdentifierScope(r);d.name===WM&&(f=d.data)}return c.bind(f)}}},t.callExpressionHandler=function(r){var a=this,i=this.createCallFunctionGetter(r.callee),o=r.arguments.map(function(s){return a.createClosure(s)});return function(){return i().apply(void 0,o.map(function(s){return s()}))}},t.functionExpressionHandler=function(r){var a=this,i=this,o=this.source,s=this.collectDeclVars,l=this.collectDeclFuncs;this.collectDeclVars=Object.create(null),this.collectDeclFuncs=Object.create(null);var u=r.id?r.id.name:"",c=r.params.length,f=r.params.map(function(g){return a.createParamNameGetter(g)}),d=this.createClosure(r.body),p=this.collectDeclVars,h=this.collectDeclFuncs;return this.collectDeclVars=s,this.collectDeclFuncs=l,function(){var g=i.getCurrentScope(),v=function b(){for(var y=arguments.length,x=new Array(y),E=0;E<y;E++)x[E]=arguments[E];i.callStack.push(""+u);var T=i.getCurrentScope(),C=gbe(g,"FunctionScope("+u+")");i.setCurrentScope(C),i.addDeclarationsToScope(p,h,C),u&&(C.data[u]=b),C.data.arguments=arguments,f.forEach(function(j,A){C.data[j()]=x[A]});var I=i.getCurrentContext();i.setCurrentContext(this);var P=d();if(i.setCurrentContext(I),i.setCurrentScope(T),i.callStack.pop(),P instanceof Io)return P.value};return GM(v,u),Object.defineProperty(v,"length",{value:c,writable:!1,enumerable:!1,configurable:!0}),Object.defineProperty(v,"toString",{value:function(){return o.slice(r.start,r.end)},writable:!0,configurable:!0,enumerable:!1}),Object.defineProperty(v,"valueOf",{value:function(){return o.slice(r.start,r.end)},writable:!0,configurable:!0,enumerable:!1}),v}},t.newExpressionHandler=function(r){var a=this,i=this.source,o=this.createClosure(r.callee),s=r.arguments.map(function(l){return a.createClosure(l)});return function(){var l=o();if(!Rx(l)||l.__IS_EVAL_FUNC){var u=r.callee,c=i.slice(u.start,u.end);throw a.createInternalThrowError(Ma.IsNotConstructor,c,r)}return l.__IS_FUNCTION_FUNC?l.apply(void 0,[new tl(a)].concat(s.map(function(f){return f()}))):D0(l,s.map(function(f){return f()}))}},t.memberExpressionHandler=function(r){var a=this.createClosure(r.object),i=this.createMemberKeyGetter(r);return function(){var o=a(),s=i();return o[s]}},t.thisExpressionHandler=function(r){var a=this;return function(){return a.getCurrentContext()}},t.sequenceExpressionHandler=function(r){var a=this,i=r.expressions.map(function(o){return a.createClosure(o)});return function(){for(var o,s=i.length,l=0;l<s;l++){var u=i[l];o=u()}return o}},t.literalHandler=function(r){return function(){return r.regex?new RegExp(r.regex.pattern,r.regex.flags):r.value}},t.identifierHandler=function(r){var a=this;return function(){var i=a.getCurrentScope(),o=a.getScopeDataFromName(r.name,i);return a.assertVariable(o,r.name,r),o[r.name]}},t.getIdentifierScope=function(r){var a=this.getCurrentScope(),i=this.getScopeFromName(r.name,a);return i},t.assignmentExpressionHandler=function(r){var a=this;r.left.type==="Identifier"&&r.right.type==="FunctionExpression"&&!r.right.id&&(r.right.id={type:"Identifier",name:r.left.name});var i=this.createObjectGetter(r.left),o=this.createNameGetter(r.left),s=this.createClosure(r.right);return function(){var l=i(),u=o(),c=s();switch(r.operator!=="="&&a.assertVariable(l,u,r),r.operator){case"=":return l[u]=c;case"+=":return l[u]+=c;case"-=":return l[u]-=c;case"*=":return l[u]*=c;case"**=":return l[u]=Math.pow(l[u],c);case"/=":return l[u]/=c;case"%=":return l[u]%=c;case"<<=":return l[u]<<=c;case">>=":return l[u]>>=c;case">>>=":return l[u]>>>=c;case"&=":return l[u]&=c;case"^=":return l[u]^=c;case"|=":return l[u]|=c;default:throw a.createInternalThrowError(Ma.AssignmentExpressionSyntaxError,r.type,r)}}},t.functionDeclarationHandler=function(r){if(r.id){var a=this.functionExpressionHandler(r);Object.defineProperty(a,"isFunctionDeclareClosure",{value:!0,writable:!1,configurable:!1,enumerable:!1}),this.funcDeclaration(r.id.name,a)}return function(){return ia}},t.getVariableName=function(r){if(r.type==="Identifier")return r.name;throw this.createInternalThrowError(Ma.VariableTypeSyntaxError,r.type,r)},t.variableDeclarationHandler=function(r){for(var a=this,i,o=[],s=0;s<r.declarations.length;s++){var l=r.declarations[s];this.varDeclaration(this.getVariableName(l.id)),l.init&&o.push({type:"AssignmentExpression",operator:"=",left:l.id,right:l.init})}return o.length&&(i=this.createClosure({type:"BlockStatement",body:o})),function(){if(i){var u=a.isVarDeclMode;a.isVarDeclMode=!0,i(),a.isVarDeclMode=u}return ia}},t.assertVariable=function(r,a,i){if(r===this.globalScope.data&&!(a in r))throw this.createInternalThrowError(Ma.VariableUndefinedReferenceError,a,i)},t.programHandler=function(r){var a=this,i=r.body.map(function(o){return a.createClosure(o)});return function(){for(var o=ia,s=0;s<i.length;s++){var l=i[s],u=a.setValue(l());if(u!==ia&&(o=u,o instanceof Io||o instanceof ru||o instanceof Zs||o===tu||o===nu))break}return o}},t.expressionStatementHandler=function(r){return this.createClosure(r.expression)},t.emptyStatementHandler=function(r){return function(){return ia}},t.returnStatementHandler=function(r){var a=r.argument?this.createClosure(r.argument):e0;return function(){return new Io(a())}},t.ifStatementHandler=function(r){var a=this.createClosure(r.test),i=this.createClosure(r.consequent),o=r.alternate?this.createClosure(r.alternate):function(){return ia};return function(){return a()?i():o()}},t.conditionalExpressionHandler=function(r){return this.ifStatementHandler(r)},t.forStatementHandler=function(r){var a=this,i=e0,o=r.test?this.createClosure(r.test):function(){return!0},s=e0,l=this.createClosure(r.body);return r.type==="ForStatement"&&(i=r.init?this.createClosure(r.init):i,s=r.update?this.createClosure(r.update):e0),function(u){var c,f=ia,d=r.type==="DoWhileStatement";for(u&&u.type==="LabeledStatement"&&(c=u.label.name),i();d||o();s()){d=!1;var p=a.setValue(l());if(!(p===ia||p===nu)){if(p===tu)break;if(f=p,f instanceof Zs&&f.value===c){f=ia;continue}if(f instanceof Io||f instanceof ru||f instanceof Zs)break}}return f}},t.whileStatementHandler=function(r){return this.forStatementHandler(r)},t.doWhileStatementHandler=function(r){return this.forStatementHandler(r)},t.forInStatementHandler=function(r){var a=this,i=r.left,o=this.createClosure(r.right),s=this.createClosure(r.body);return r.left.type==="VariableDeclaration"&&(this.createClosure(r.left)(),i=r.left.declarations[0].id),function(l){var u,c=ia,f;l&&l.type==="LabeledStatement"&&(u=l.label.name);var d=o();for(f in d){a.assignmentExpressionHandler({type:"AssignmentExpression",operator:"=",left:i,right:{type:"Literal",value:f}})();var p=a.setValue(s());if(!(p===ia||p===nu)){if(p===tu)break;if(c=p,c instanceof Zs&&c.value===u){c=ia;continue}if(c instanceof Io||c instanceof ru||c instanceof Zs)break}}return c}},t.withStatementHandler=function(r){var a=this,i=this.createClosure(r.object),o=this.createClosure(r.body);return function(){var s=i(),l=a.getCurrentScope(),u=new Cc(s,l,WM);a.setCurrentScope(u);var c=a.setValue(o());return a.setCurrentScope(l),c}},t.throwStatementHandler=function(r){var a=this,i=this.createClosure(r.argument);return function(){throw a.setValue(void 0),i()}},t.tryStatementHandler=function(r){var a=this,i=this.createClosure(r.block),o=r.handler?this.catchClauseHandler(r.handler):null,s=r.finalizer?this.createClosure(r.finalizer):null;return function(){var l=a.getCurrentScope(),u=a.getCurrentContext(),c=l.labelStack.concat([]),f=a.callStack.concat([]),d=ia,p,h,g=function(){a.setCurrentScope(l),a.setCurrentContext(u),l.labelStack=c,a.callStack=f};try{d=a.setValue(i()),d instanceof Io&&(p=d)}catch(v){if(g(),a.isInterruptThrow(v))throw v;if(o)try{d=a.setValue(o(v)),d instanceof Io&&(p=d)}catch(b){if(g(),a.isInterruptThrow(b))throw b;h=b}}if(s)try{d=s(),d instanceof Io&&(p=d)}catch(v){if(g(),a.isInterruptThrow(v))throw v;h=v}if(h)throw h;return p||d}},t.catchClauseHandler=function(r){var a=this,i=this.createParamNameGetter(r.param),o=this.createClosure(r.body);return function(s){var l,u=a.getCurrentScope(),c=u.data,f=i(),d=mbe.call(c,f),p=c[f];return c[f]=s,l=o(),d?c[f]=p:delete c[f],l}},t.continueStatementHandler=function(r){return function(){return r.label?new Zs(r.label.name):nu}},t.breakStatementHandler=function(r){return function(){return r.label?new ru(r.label.name):tu}},t.switchStatementHandler=function(r){var a=this,i=this.createClosure(r.discriminant),o=r.cases.map(function(s){return a.switchCaseHandler(s)});return function(){for(var s=i(),l=!1,u,c,f,d=0;d<o.length;d++){var p=o[d](),h=p.testClosure();if(h===HM){f=p;continue}if(l||h===s){if(l=!0,c=a.setValue(p.bodyClosure()),c===ia)continue;if(c===tu||(u=c,u instanceof Io||u instanceof ru||u instanceof Zs||u===nu))break}}if(!l&&f){c=a.setValue(f.bodyClosure());var g=c===ia||c===tu||c===nu;g||(u=c)}return u}},t.switchCaseHandler=function(r){var a=r.test?this.createClosure(r.test):function(){return HM},i=this.createClosure({type:"BlockStatement",body:r.consequent});return function(){return{testClosure:a,bodyClosure:i}}},t.labeledStatementHandler=function(r){var a=this,i=r.label.name,o=this.createClosure(r.body);return function(){var s,l=a.getCurrentScope();return l.labelStack.push(i),s=o(r),s instanceof ru&&s.value===i&&(s=ia),l.labelStack.pop(),s}},t.debuggerStatementHandler=function(r){return function(){debugger;return ia}},t.createParamNameGetter=function(r){if(r.type==="Identifier")return function(){return r.name};throw this.createInternalThrowError(Ma.ParamTypeSyntaxError,r.type,r)},t.createObjectKeyGetter=function(r){var a;return r.type==="Identifier"?a=function(){return r.name}:a=this.createClosure(r),function(){return a()}},t.createMemberKeyGetter=function(r){return r.computed?this.createClosure(r.property):this.createObjectKeyGetter(r.property)},t.createObjectGetter=function(r){var a=this;switch(r.type){case"Identifier":return function(){return a.getScopeDataFromName(r.name,a.getCurrentScope())};case"MemberExpression":return this.createClosure(r.object);default:throw this.createInternalThrowError(Ma.AssignmentTypeSyntaxError,r.type,r)}},t.createNameGetter=function(r){switch(r.type){case"Identifier":return function(){return r.name};case"MemberExpression":return this.createMemberKeyGetter(r);default:throw this.createInternalThrowError(Ma.AssignmentTypeSyntaxError,r.type,r)}},t.varDeclaration=function(r){var a=this.collectDeclVars;a[r]=void 0},t.funcDeclaration=function(r,a){var i=this.collectDeclFuncs;i[r]=a},t.addDeclarationsToScope=function(r,a,i){var o=i.data;for(var s in a){var l=a[s];o[s]=l&&l()}for(var u in r)u in o||(o[u]=void 0)},t.getScopeValue=function(r,a){var i=this.getScopeFromName(r,a);return i.data[r]},t.getScopeDataFromName=function(r,a){return this.getScopeFromName(r,a).data},t.getScopeFromName=function(r,a){var i=a;do if(r in i.data)return i;while(i=i.parent);return this.globalScope},t.setValue=function(r){var a=this.callStack.length;return this.isVarDeclMode||a||r===ia||r===tu||r===nu||r instanceof ru||r instanceof Zs||(this.value=r instanceof Io?r.value:r),r},t.getValue=function(){return this.value},e}();To.version=hbe;To.eval=hE;To.Function=mE;To.ecmaVersion=5;To.globalContextInFunction=void 0;To.global=Object.create(null);function bbe(e){return e===void 0&&(e=Object.create(null)),e}function rF(e,t,n){t===void 0&&(t=[]),n===void 0&&(n={});var r=n.parsingContext,a=n.timeout===void 0?0:n.timeout,i=`
    (function anonymous(`+t.join(",")+`){
         `+e+`
    });
    `,o=new To(r,{ecmaVersion:n.ecmaVersion,timeout:a,rootContext:n.rootContext,globalContextInFunction:n.globalContextInFunction});return o.evaluate(i)}function hh(e,t,n){var r=new To(t,n);return r.evaluate(e)}var ybe=hh,xbe=function(){function e(n){this._code=n}var t=e.prototype;return t.runInContext=function(r){return hh(this._code,r)},t.runInNewContext=function(r){return hh(this._code,r)},e}(),wbe=Object.freeze(Object.defineProperty({__proto__:null,createContext:bbe,compileFunction:rF,runInContext:hh,runInNewContext:ybe,Script:xbe},Symbol.toStringTag,{value:"Module"})),qM=function(e,t,n){return hh(e,t,n)};function _be(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t.pop();return rF(r||"",t)}var Ebe=Object.freeze(Object.defineProperty({__proto__:null,Interpreter:To,vm:wbe,evaluate:qM,Function:_be,default:qM},Symbol.toStringTag,{value:"Module"})),kbe=Zz(Ebe);(function(e,t){(function(n,r){e.exports=r(kbe)})(bs,function(n){var r=function(_){return _ instanceof Uint8Array||_ instanceof Uint16Array||_ instanceof Uint32Array||_ instanceof Int8Array||_ instanceof Int16Array||_ instanceof Int32Array||_ instanceof Float32Array||_ instanceof Float64Array||_ instanceof Uint8ClampedArray},a=function(_,F){for(var X=Object.keys(F),pe=0;pe<X.length;++pe)_[X[pe]]=F[X[pe]];return _},i=`
`;function o(_){return typeof atob!="undefined"?atob(_):"base64:"+_}function s(_){var F=new Error("(regl) "+_);throw console.error(F),F}function l(_,F){_||s(F)}function u(_){return _?": "+_:""}function c(_,F,X){_ in F||s("unknown parameter ("+_+")"+u(X)+". possible values: "+Object.keys(F).join())}function f(_,F){r(_)||s("invalid parameter type"+u(F)+". must be a typed array")}function d(_,F){switch(F){case"number":return typeof _=="number";case"object":return typeof _=="object";case"string":return typeof _=="string";case"boolean":return typeof _=="boolean";case"function":return typeof _=="function";case"undefined":return typeof _=="undefined";case"symbol":return typeof _=="symbol"}}function p(_,F,X){d(_,F)||s("invalid parameter type"+u(X)+". expected "+F+", got "+typeof _)}function h(_,F){_>=0&&(_|0)===_||s("invalid parameter type, ("+_+")"+u(F)+". must be a nonnegative integer")}function g(_,F,X){F.indexOf(_)<0&&s("invalid value"+u(X)+". must be one of: "+F)}var v=["gl","canvas","container","attributes","pixelRatio","extensions","optionalExtensions","profile","onDone"];function b(_){Object.keys(_).forEach(function(F){v.indexOf(F)<0&&s('invalid regl constructor argument "'+F+'". must be one of '+v)})}function y(_,F){for(_=_+"";_.length<F;)_=" "+_;return _}function x(){this.name="unknown",this.lines=[],this.index={},this.hasErrors=!1}function E(_,F){this.number=_,this.line=F,this.errors=[]}function T(_,F,X){this.file=_,this.line=F,this.message=X}function C(){var _=new Error,F=(_.stack||_).toString(),X=/compileProcedure.*\n\s*at.*\((.*)\)/.exec(F);if(X)return X[1];var pe=/compileProcedure.*\n\s*at\s+(.*)(\n|$)/.exec(F);return pe?pe[1]:"unknown"}function I(){var _=new Error,F=(_.stack||_).toString(),X=/at REGLCommand.*\n\s+at.*\((.*)\)/.exec(F);if(X)return X[1];var pe=/at REGLCommand.*\n\s+at\s+(.*)\n/.exec(F);return pe?pe[1]:"unknown"}function P(_,F){var X=_.split(`
`),pe=1,Se=0,de={unknown:new x,0:new x};de.unknown.name=de[0].name=F||C(),de.unknown.lines.push(new E(0,""));for(var _e=0;_e<X.length;++_e){var Me=X[_e],De=/^\s*#\s*(\w+)\s+(.+)\s*$/.exec(Me);if(De)switch(De[1]){case"line":var je=/(\d+)(\s+\d+)?/.exec(De[2]);je&&(pe=je[1]|0,je[2]&&(Se=je[2]|0,Se in de||(de[Se]=new x)));break;case"define":var He=/SHADER_NAME(_B64)?\s+(.*)$/.exec(De[2]);He&&(de[Se].name=He[1]?o(He[2]):He[2]);break}de[Se].lines.push(new E(pe++,Me))}return Object.keys(de).forEach(function(We){var Ke=de[We];Ke.lines.forEach(function(Be){Ke.index[Be.number]=Be})}),de}function j(_){var F=[];return _.split(`
`).forEach(function(X){if(!(X.length<5)){var pe=/^ERROR:\s+(\d+):(\d+):\s*(.*)$/.exec(X);pe?F.push(new T(pe[1]|0,pe[2]|0,pe[3].trim())):X.length>0&&F.push(new T("unknown",0,X))}}),F}function A(_,F){F.forEach(function(X){var pe=_[X.file];if(pe){var Se=pe.index[X.line];if(Se){Se.errors.push(X),pe.hasErrors=!0;return}}_.unknown.hasErrors=!0,_.unknown.lines[0].errors.push(X)})}function S(_,F,X,pe,Se){if(!_.getShaderParameter(F,_.COMPILE_STATUS)){var de=_.getShaderInfoLog(F),_e=pe===_.FRAGMENT_SHADER?"fragment":"vertex";Y(X,"string",_e+" shader source must be a string",Se);var Me=P(X,Se),De=j(de);A(Me,De),Object.keys(Me).forEach(function(je){var He=Me[je];if(!He.hasErrors)return;var We=[""],Ke=[""];function Be(Ge,ie){We.push(Ge),Ke.push(ie||"")}Be("file number "+je+": "+He.name+`
`,"color:red;text-decoration:underline;font-weight:bold"),He.lines.forEach(function(Ge){if(Ge.errors.length>0){Be(y(Ge.number,4)+"|  ","background-color:yellow; font-weight:bold"),Be(Ge.line+i,"color:red; background-color:yellow; font-weight:bold");var ie=0;Ge.errors.forEach(function(be){var $e=be.message,ct=/^\s*'(.*)'\s*:\s*(.*)$/.exec($e);if(ct){var Pe=ct[1];switch($e=ct[2],Pe){case"assign":Pe="=";break}ie=Math.max(Ge.line.indexOf(Pe,ie),0)}else ie=0;Be(y("| ",6)),Be(y("^^^",ie+3)+i,"font-weight:bold"),Be(y("| ",6)),Be($e+i,"font-weight:bold")}),Be(y("| ",6)+i)}else Be(y(Ge.number,4)+"|  "),Be(Ge.line+i,"color:red")}),typeof document!="undefined"&&!window.chrome?(Ke[0]=We.join("%c"),console.log.apply(console,Ke)):console.log(We.join(""))}),l.raise("Error compiling "+_e+" shader, "+Me[0].name)}}function M(_,F,X,pe,Se){if(!_.getProgramParameter(F,_.LINK_STATUS)){var de=_.getProgramInfoLog(F),_e=P(X,Se),Me=P(pe,Se),De='Error linking program with vertex shader, "'+Me[0].name+'", and fragment shader "'+_e[0].name+'"';typeof document!="undefined"?console.log("%c"+De+i+"%c"+de,"color:red;text-decoration:underline;font-weight:bold","color:red"):console.log(De+i+de),l.raise(De)}}function O(_){_._commandRef=C()}function R(_,F,X,pe){O(_);function Se(De){return De?pe.id(De):0}_._fragId=Se(_.static.frag),_._vertId=Se(_.static.vert);function de(De,je){Object.keys(je).forEach(function(He){De[pe.id(He)]=!0})}var _e=_._uniformSet={};de(_e,F.static),de(_e,F.dynamic);var Me=_._attributeSet={};de(Me,X.static),de(Me,X.dynamic),_._hasCount="count"in _.static||"count"in _.dynamic||"elements"in _.static||"elements"in _.dynamic}function H(_,F){var X=I();s(_+" in command "+(F||C())+(X==="unknown"?"":" called from "+X))}function ee(_,F,X){_||H(F,X||C())}function re(_,F,X,pe){_ in F||H("unknown parameter ("+_+")"+u(X)+". possible values: "+Object.keys(F).join(),pe||C())}function Y(_,F,X,pe){d(_,F)||H("invalid parameter type"+u(X)+". expected "+F+", got "+typeof _,pe||C())}function J(_){_()}function ae(_,F,X){_.texture?g(_.texture._texture.internalformat,F,"unsupported texture format for attachment"):g(_.renderbuffer._renderbuffer.format,X,"unsupported renderbuffer format for attachment")}var le=33071,fe=9728,ge=9984,we=9985,Ve=9986,Lt=9987,Nt=5120,Zt=5121,Fe=5122,Je=5123,tt=5124,ve=5125,pt=5126,kt=32819,wt=32820,At=33635,ht=34042,jt=36193,Gt={};Gt[Nt]=Gt[Zt]=1,Gt[Fe]=Gt[Je]=Gt[jt]=Gt[At]=Gt[kt]=Gt[wt]=2,Gt[tt]=Gt[ve]=Gt[pt]=Gt[ht]=4;function An(_,F){return _===wt||_===kt||_===At?2:_===ht?4:Gt[_]*F}function _r(_){return!(_&_-1)&&!!_}function er(_,F,X){var pe,Se=F.width,de=F.height,_e=F.channels;l(Se>0&&Se<=X.maxTextureSize&&de>0&&de<=X.maxTextureSize,"invalid texture shape"),(_.wrapS!==le||_.wrapT!==le)&&l(_r(Se)&&_r(de),"incompatible wrap mode for texture, both width and height must be power of 2"),F.mipmask===1?Se!==1&&de!==1&&l(_.minFilter!==ge&&_.minFilter!==Ve&&_.minFilter!==we&&_.minFilter!==Lt,"min filter requires mipmap"):(l(_r(Se)&&_r(de),"texture must be a square power of 2 to support mipmapping"),l(F.mipmask===(Se<<1)-1,"missing or incomplete mipmap data")),F.type===pt&&(X.extensions.indexOf("oes_texture_float_linear")<0&&l(_.minFilter===fe&&_.magFilter===fe,"filter not supported, must enable oes_texture_float_linear"),l(!_.genMipmaps,"mipmap generation not supported with float textures"));var Me=F.images;for(pe=0;pe<16;++pe)if(Me[pe]){var De=Se>>pe,je=de>>pe;l(F.mipmask&1<<pe,"missing mipmap data");var He=Me[pe];if(l(He.width===De&&He.height===je,"invalid shape for mip images"),l(He.format===F.format&&He.internalformat===F.internalformat&&He.type===F.type,"incompatible type for mip image"),!He.compressed)if(He.data){var We=Math.ceil(An(He.type,_e)*De/He.unpackAlignment)*He.unpackAlignment;l(He.data.byteLength===We*je,"invalid data for image, buffer size is inconsistent with image format")}else He.element||He.copy}else _.genMipmaps||l((F.mipmask&1<<pe)===0,"extra mipmap data");F.compressed&&l(!_.genMipmaps,"mipmap generation for compressed images not supported")}function tr(_,F,X,pe){var Se=_.width,de=_.height,_e=_.channels;l(Se>0&&Se<=pe.maxTextureSize&&de>0&&de<=pe.maxTextureSize,"invalid texture shape"),l(Se===de,"cube map must be square"),l(F.wrapS===le&&F.wrapT===le,"wrap mode not supported by cube map");for(var Me=0;Me<X.length;++Me){var De=X[Me];l(De.width===Se&&De.height===de,"inconsistent cube map face shape"),F.genMipmaps&&(l(!De.compressed,"can not generate mipmap for compressed textures"),l(De.mipmask===1,"can not specify mipmaps and generate mipmaps"));for(var je=De.images,He=0;He<16;++He){var We=je[He];if(We){var Ke=Se>>He,Be=de>>He;l(De.mipmask&1<<He,"missing mipmap data"),l(We.width===Ke&&We.height===Be,"invalid shape for mip images"),l(We.format===_.format&&We.internalformat===_.internalformat&&We.type===_.type,"incompatible type for mip image"),We.compressed||(We.data?l(We.data.byteLength===Ke*Be*Math.max(An(We.type,_e),We.unpackAlignment),"invalid data for image, buffer size is inconsistent with image format"):We.element||We.copy)}}}}var k=a(l,{optional:J,raise:s,commandRaise:H,command:ee,parameter:c,commandParameter:re,constructor:b,type:p,commandType:Y,isTypedArray:f,nni:h,oneOf:g,shaderError:S,linkError:M,callSite:I,saveCommandRef:O,saveDrawInfo:R,framebufferFormat:ae,guessCommand:C,texture2D:er,textureCube:tr}),Ce=0,Ie=0,lt=5,_t=6;function Yt(_,F){this.id=Ce++,this.type=_,this.data=F}function St(_){return _.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}function Rt(_){if(_.length===0)return[];var F=_.charAt(0),X=_.charAt(_.length-1);if(_.length>1&&F===X&&(F==='"'||F==="'"))return['"'+St(_.substr(1,_.length-2))+'"'];var pe=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(_);if(pe)return Rt(_.substr(0,pe.index)).concat(Rt(pe[1])).concat(Rt(_.substr(pe.index+pe[0].length)));var Se=_.split(".");if(Se.length===1)return['"'+St(_)+'"'];for(var de=[],_e=0;_e<Se.length;++_e)de=de.concat(Rt(Se[_e]));return de}function Tt(_){return"["+Rt(_).join("][")+"]"}function $t(_,F){return new Yt(_,Tt(F+""))}function Bt(_){return typeof _=="function"&&!_._reglType||_ instanceof Yt}function Sn(_,F){if(typeof _=="function")return new Yt(Ie,_);if(typeof _=="number"||typeof _=="boolean")return new Yt(lt,_);if(Array.isArray(_))return new Yt(_t,_.map(function(X,pe){return Sn(X,F+"["+pe+"]")}));if(_ instanceof Yt)return _;k(!1,"invalid option type in uniform "+F)}var Bn={DynamicVariable:Yt,define:$t,isDynamic:Bt,unbox:Sn,accessor:Tt},ca={next:typeof requestAnimationFrame=="function"?function(_){return requestAnimationFrame(_)}:function(_){return setTimeout(_,16)},cancel:typeof cancelAnimationFrame=="function"?function(_){return cancelAnimationFrame(_)}:clearTimeout},Da=typeof my!="undefined"&&!!my&&typeof my.showToast=="function"&&my.isFRM!==!0,Er=Da?function(){return+new Date}:typeof performance!="undefined"&&performance.now?function(){return performance.now()}:function(){return+new Date};function Ba(){var _={"":0},F=[""];return{id:function(X){var pe=_[X];return pe||(pe=_[X]=F.length,F.push(X),pe)},str:function(X){return F[X]}}}function Or(_,F,X){var pe=document.createElement("canvas");a(pe.style,{border:0,margin:0,padding:0,top:0,left:0,width:"100%",height:"100%"}),_.appendChild(pe),_===document.body&&(pe.style.position="absolute",a(_.style,{margin:0,padding:0}));function Se(){var Me=window.innerWidth,De=window.innerHeight;if(_!==document.body){var je=pe.getBoundingClientRect();Me=je.right-je.left,De=je.bottom-je.top}pe.width=X*Me,pe.height=X*De}var de;_!==document.body&&typeof ResizeObserver=="function"?(de=new ResizeObserver(function(){setTimeout(Se)}),de.observe(_)):window.addEventListener("resize",Se,!1);function _e(){de?de.disconnect():window.removeEventListener("resize",Se),_.removeChild(pe)}return Se(),{canvas:pe,onDestroy:_e}}function Ka(_,F){function X(pe){try{return _.getContext(pe,F)}catch{return null}}return X("webgl")||X("experimental-webgl")||X("webgl-experimental")}function Sa(_){return typeof _.nodeName=="string"&&typeof _.appendChild=="function"&&typeof _.getBoundingClientRect=="function"}function li(_){return typeof _.drawArrays=="function"||typeof _.drawElements=="function"}function fa(_){return typeof _=="string"?_.split():(k(Array.isArray(_),"invalid extension array"),_)}function Mr(_){return typeof _=="string"?(k(typeof document!="undefined","not supported outside of DOM"),document.querySelector(_)):_}function qt(_){var F=_||{},X,pe,Se,de,_e={},Me=[],De=[],je=typeof window=="undefined"?1:window.devicePixelRatio,He=!1,We=function(Ge){Ge&&k.raise(Ge)},Ke=function(){};if(typeof F=="string"?(k(typeof document!="undefined","selector queries only supported in DOM environments"),X=document.querySelector(F),k(X,"invalid query string for element")):typeof F=="object"?Sa(F)?X=F:li(F)?(de=F,Se=de.canvas):(k.constructor(F),"gl"in F?de=F.gl:"canvas"in F?Se=Mr(F.canvas):"container"in F&&(pe=Mr(F.container)),"attributes"in F&&(_e=F.attributes,k.type(_e,"object","invalid context attributes")),"extensions"in F&&(Me=fa(F.extensions)),"optionalExtensions"in F&&(De=fa(F.optionalExtensions)),"onDone"in F&&(k.type(F.onDone,"function","invalid or missing onDone callback"),We=F.onDone),"profile"in F&&(He=!!F.profile),"pixelRatio"in F&&(je=+F.pixelRatio,k(je>0,"invalid pixel ratio"))):k.raise("invalid arguments to regl"),X&&(X.nodeName.toLowerCase()==="canvas"?Se=X:pe=X),!de){if(!Se){k(typeof document!="undefined","must manually specify webgl context outside of DOM environments");var Be=Or(pe||document.body,We,je);if(!Be)return null;Se=Be.canvas,Ke=Be.onDestroy}_e.premultipliedAlpha===void 0&&(_e.premultipliedAlpha=!0),de=Ka(Se,_e)}return de?{gl:de,canvas:Se,container:pe,extensions:Me,optionalExtensions:De,pixelRatio:je,profile:He,onDone:We,onDestroy:Ke}:(Ke(),We("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}function un(_,F){var X={};function pe(Me){k.type(Me,"string","extension name must be string");var De=Me.toLowerCase(),je;try{je=X[De]=Se(Me)}catch{}return!!je}function Se(Me){return _.getExtension(Me)?_.getExtension(Me):_.getExtension(Me.toLowerCase())?_.getExtension(Me.toLowerCase()):null}for(var de=0;de<F.extensions.length;++de){var _e=F.extensions[de];if(!pe(_e))return F.onDestroy(),F.onDone('"'+_e+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}return F.optionalExtensions.forEach(pe),{extensions:X,restore:function(){Object.keys(X).forEach(function(Me){if(X[Me]&&!pe(Me))throw new Error("(regl): error restoring extension "+Me)})}}}function cn(_,F){for(var X=Array(_),pe=0;pe<_;++pe)X[pe]=F(pe);return X}var kr=5120,da=5121,ro=5122,ao=5123,Ti=5124,Yn=5125,fn=5126;function Qt(_){for(var F=16;F<=1<<28;F*=16)if(_<=F)return F;return 0}function Un(_){var F,X;return F=(_>65535)<<4,_>>>=F,X=(_>255)<<3,_>>>=X,F|=X,X=(_>15)<<2,_>>>=X,F|=X,X=(_>3)<<1,_>>>=X,F|=X,F|_>>1}function Mn(){var _=cn(8,function(){return[]});function F(de){var _e=Qt(de),Me=_[Un(_e)>>2];return Me.length>0?Me.pop():new ArrayBuffer(_e)}function X(de){_[Un(de.byteLength)>>2].push(de)}function pe(de,_e){var Me=null;switch(de){case kr:Me=new Int8Array(F(_e),0,_e);break;case da:Me=new Uint8Array(F(_e),0,_e);break;case ro:Me=new Int16Array(F(2*_e),0,_e);break;case ao:Me=new Uint16Array(F(2*_e),0,_e);break;case Ti:Me=new Int32Array(F(4*_e),0,_e);break;case Yn:Me=new Uint32Array(F(4*_e),0,_e);break;case fn:Me=new Float32Array(F(4*_e),0,_e);break;default:return null}return Me.length!==_e?Me.subarray(0,_e):Me}function Se(de){X(de.buffer)}return{alloc:F,free:X,allocType:pe,freeType:Se}}var dn=Mn();dn.zero=Mn();var Wr=3408,Xr=3410,za=3411,Ai=3412,bn=3413,tn=3414,Rn=3415,Sr=33901,pa=33902,Ua=3379,io=3386,Bl=34921,Ns=36347,oo=36348,na=35661,Oi=35660,wn=34930,mn=36349,Pn=34076,$n=34024,nr=7936,Mi=7937,Ao=7938,Fs=35724,ui=34047,ju=36063,Yf=34852,Ds=3553,Gu=34067,Zf=34069,Hu=33984,$a=6408,qf=5126,Kf=5121,zl=36160,jh=36053,db=36064,pb=16384,N=function(_,F){var X=1;F.ext_texture_filter_anisotropic&&(X=_.getParameter(ui));var pe=1,Se=1;F.webgl_draw_buffers&&(pe=_.getParameter(Yf),Se=_.getParameter(ju));var de=!!F.oes_texture_float;if(de){var _e=_.createTexture();_.bindTexture(Ds,_e),_.texImage2D(Ds,0,$a,1,1,0,$a,qf,null);var Me=_.createFramebuffer();if(_.bindFramebuffer(zl,Me),_.framebufferTexture2D(zl,db,Ds,_e,0),_.bindTexture(Ds,null),_.checkFramebufferStatus(zl)!==jh)de=!1;else{_.viewport(0,0,1,1),_.clearColor(1,0,0,1),_.clear(pb);var De=dn.allocType(qf,4);_.readPixels(0,0,1,1,$a,qf,De),_.getError()?de=!1:(_.deleteFramebuffer(Me),_.deleteTexture(_e),de=De[0]===1),dn.freeType(De)}}var je=typeof navigator!="undefined"&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent)),He=!0;if(!je){var We=_.createTexture(),Ke=dn.allocType(Kf,36);_.activeTexture(Hu),_.bindTexture(Gu,We),_.texImage2D(Zf,0,$a,3,3,0,$a,Kf,Ke),dn.freeType(Ke),_.bindTexture(Gu,null),_.deleteTexture(We),He=!_.getError()}return{colorBits:[_.getParameter(Xr),_.getParameter(za),_.getParameter(Ai),_.getParameter(bn)],depthBits:_.getParameter(tn),stencilBits:_.getParameter(Rn),subpixelBits:_.getParameter(Wr),extensions:Object.keys(F).filter(function(Be){return!!F[Be]}),maxAnisotropic:X,maxDrawbuffers:pe,maxColorAttachments:Se,pointSizeDims:_.getParameter(Sr),lineWidthDims:_.getParameter(pa),maxViewportDims:_.getParameter(io),maxCombinedTextureUnits:_.getParameter(na),maxCubeMapSize:_.getParameter(Pn),maxRenderbufferSize:_.getParameter($n),maxTextureUnits:_.getParameter(wn),maxTextureSize:_.getParameter(Ua),maxAttributes:_.getParameter(Bl),maxVertexUniforms:_.getParameter(Ns),maxVertexTextureUnits:_.getParameter(Oi),maxVaryingVectors:_.getParameter(oo),maxFragmentUniforms:_.getParameter(mn),glsl:_.getParameter(Fs),renderer:_.getParameter(Mi),vendor:_.getParameter(nr),version:_.getParameter(Ao),readFloat:de,npotTextureCube:He}};function U(_){return!!_&&typeof _=="object"&&Array.isArray(_.shape)&&Array.isArray(_.stride)&&typeof _.offset=="number"&&_.shape.length===_.stride.length&&(Array.isArray(_.data)||r(_.data))}var K=function(_){return Object.keys(_).map(function(F){return _[F]})},xe={shape:ha,flatten:Yr};function qe(_,F,X){for(var pe=0;pe<F;++pe)X[pe]=_[pe]}function Ot(_,F,X,pe){for(var Se=0,de=0;de<F;++de)for(var _e=_[de],Me=0;Me<X;++Me)pe[Se++]=_e[Me]}function yn(_,F,X,pe,Se,de){for(var _e=de,Me=0;Me<F;++Me)for(var De=_[Me],je=0;je<X;++je)for(var He=De[je],We=0;We<pe;++We)Se[_e++]=He[We]}function Rr(_,F,X,pe,Se){for(var de=1,_e=X+1;_e<F.length;++_e)de*=F[_e];var Me=F[X];if(F.length-X===4){var De=F[X+1],je=F[X+2],He=F[X+3];for(_e=0;_e<Me;++_e)yn(_[_e],De,je,He,pe,Se),Se+=de}else for(_e=0;_e<Me;++_e)Rr(_[_e],F,X+1,pe,Se),Se+=de}function Yr(_,F,X,pe){var Se=1;if(F.length)for(var de=0;de<F.length;++de)Se*=F[de];else Se=0;var _e=pe||dn.allocType(X,Se);switch(F.length){case 0:break;case 1:qe(_,F[0],_e);break;case 2:Ot(_,F[0],F[1],_e);break;case 3:yn(_,F[0],F[1],F[2],_e,0);break;default:Rr(_,F,0,_e,0)}return _e}function ha(_){for(var F=[],X=_;X.length;X=X[0])F.push(X.length);return F}var Qa={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121},BD=5120,zD=5122,UD=5124,$D=5121,VD=5123,jD=5125,GD=5126,HD=5126,Ul={int8:BD,int16:zD,int32:UD,uint8:$D,uint16:VD,uint32:jD,float:GD,float32:HD},WD=35048,XD=35040,Gh={dynamic:WD,stream:XD,static:35044},hb=xe.flatten,WE=xe.shape,XE=35044,YD=35040,mb=5121,gb=5126,Bs=[];Bs[5120]=1,Bs[5122]=2,Bs[5124]=4,Bs[5121]=1,Bs[5123]=2,Bs[5125]=4,Bs[5126]=4;function Hh(_){return Qa[Object.prototype.toString.call(_)]|0}function YE(_,F){for(var X=0;X<F.length;++X)_[X]=F[X]}function ZE(_,F,X,pe,Se,de,_e){for(var Me=0,De=0;De<X;++De)for(var je=0;je<pe;++je)_[Me++]=F[Se*De+de*je+_e]}function ZD(_,F,X,pe){var Se=0,de={};function _e(ie){this.id=Se++,this.buffer=_.createBuffer(),this.type=ie,this.usage=XE,this.byteLength=0,this.dimension=1,this.dtype=mb,this.persistentData=null,X.profile&&(this.stats={size:0})}_e.prototype.bind=function(){_.bindBuffer(this.type,this.buffer)},_e.prototype.destroy=function(){Ke(this)};var Me=[];function De(ie,be){var $e=Me.pop();return $e||($e=new _e(ie)),$e.bind(),We($e,be,YD,0,1,!1),$e}function je(ie){Me.push(ie)}function He(ie,be,$e){ie.byteLength=be.byteLength,_.bufferData(ie.type,be,$e)}function We(ie,be,$e,ct,Pe,st){var rt;if(ie.usage=$e,Array.isArray(be)){if(ie.dtype=ct||gb,be.length>0){var Pt;if(Array.isArray(be[0])){rt=WE(be);for(var Te=1,ke=1;ke<rt.length;++ke)Te*=rt[ke];ie.dimension=Te,Pt=hb(be,rt,ie.dtype),He(ie,Pt,$e),st?ie.persistentData=Pt:dn.freeType(Pt)}else if(typeof be[0]=="number"){ie.dimension=Pe;var mt=dn.allocType(ie.dtype,be.length);YE(mt,be),He(ie,mt,$e),st?ie.persistentData=mt:dn.freeType(mt)}else r(be[0])?(ie.dimension=be[0].length,ie.dtype=ct||Hh(be[0])||gb,Pt=hb(be,[be.length,be[0].length],ie.dtype),He(ie,Pt,$e),st?ie.persistentData=Pt:dn.freeType(Pt)):k.raise("invalid buffer data")}}else if(r(be))ie.dtype=ct||Hh(be),ie.dimension=Pe,He(ie,be,$e),st&&(ie.persistentData=new Uint8Array(new Uint8Array(be.buffer)));else if(U(be)){rt=be.shape;var Qe=be.stride,ze=be.offset,et=0,nt=0,Ht=0,Ut=0;rt.length===1?(et=rt[0],nt=1,Ht=Qe[0],Ut=0):rt.length===2?(et=rt[0],nt=rt[1],Ht=Qe[0],Ut=Qe[1]):k.raise("invalid shape"),ie.dtype=ct||Hh(be.data)||gb,ie.dimension=nt;var at=dn.allocType(ie.dtype,et*nt);ZE(at,be.data,et,nt,Ht,Ut,ze),He(ie,at,$e),st?ie.persistentData=at:dn.freeType(at)}else be instanceof ArrayBuffer?(ie.dtype=mb,ie.dimension=Pe,He(ie,be,$e),st&&(ie.persistentData=new Uint8Array(new Uint8Array(be)))):k.raise("invalid buffer data")}function Ke(ie){F.bufferCount--,pe(ie);var be=ie.buffer;k(be,"buffer must not be deleted already"),_.deleteBuffer(be),ie.buffer=null,delete de[ie.id]}function Be(ie,be,$e,ct){F.bufferCount++;var Pe=new _e(be);de[Pe.id]=Pe;function st(Te){var ke=XE,mt=null,Qe=0,ze=0,et=1;return Array.isArray(Te)||r(Te)||U(Te)||Te instanceof ArrayBuffer?mt=Te:typeof Te=="number"?Qe=Te|0:Te&&(k.type(Te,"object","buffer arguments must be an object, a number or an array"),"data"in Te&&(k(mt===null||Array.isArray(mt)||r(mt)||U(mt),"invalid data for buffer"),mt=Te.data),"usage"in Te&&(k.parameter(Te.usage,Gh,"invalid buffer usage"),ke=Gh[Te.usage]),"type"in Te&&(k.parameter(Te.type,Ul,"invalid buffer type"),ze=Ul[Te.type]),"dimension"in Te&&(k.type(Te.dimension,"number","invalid dimension"),et=Te.dimension|0),"length"in Te&&(k.nni(Qe,"buffer length must be a nonnegative integer"),Qe=Te.length|0)),Pe.bind(),mt?We(Pe,mt,ke,ze,et,ct):(Qe&&_.bufferData(Pe.type,Qe,ke),Pe.dtype=ze||mb,Pe.usage=ke,Pe.dimension=et,Pe.byteLength=Qe),X.profile&&(Pe.stats.size=Pe.byteLength*Bs[Pe.dtype]),st}function rt(Te,ke){k(ke+Te.byteLength<=Pe.byteLength,"invalid buffer subdata call, buffer is too small.  Can't write data of size "+Te.byteLength+" starting from offset "+ke+" to a buffer of size "+Pe.byteLength),_.bufferSubData(Pe.type,ke,Te)}function Pt(Te,ke){var mt=(ke||0)|0,Qe;if(Pe.bind(),r(Te)||Te instanceof ArrayBuffer)rt(Te,mt);else if(Array.isArray(Te)){if(Te.length>0)if(typeof Te[0]=="number"){var ze=dn.allocType(Pe.dtype,Te.length);YE(ze,Te),rt(ze,mt),dn.freeType(ze)}else if(Array.isArray(Te[0])||r(Te[0])){Qe=WE(Te);var et=hb(Te,Qe,Pe.dtype);rt(et,mt),dn.freeType(et)}else k.raise("invalid buffer data")}else if(U(Te)){Qe=Te.shape;var nt=Te.stride,Ht=0,Ut=0,at=0,ut=0;Qe.length===1?(Ht=Qe[0],Ut=1,at=nt[0],ut=0):Qe.length===2?(Ht=Qe[0],Ut=Qe[1],at=nt[0],ut=nt[1]):k.raise("invalid shape");var Ft=Array.isArray(Te.data)?Pe.dtype:Hh(Te.data),Vt=dn.allocType(Ft,Ht*Ut);ZE(Vt,Te.data,Ht,Ut,at,ut,Te.offset),rt(Vt,mt),dn.freeType(Vt)}else k.raise("invalid data for buffer subdata");return st}return $e||st(ie),st._reglType="buffer",st._buffer=Pe,st.subdata=Pt,X.profile&&(st.stats=Pe.stats),st.destroy=function(){Ke(Pe)},st}function Ge(){K(de).forEach(function(ie){ie.buffer=_.createBuffer(),_.bindBuffer(ie.type,ie.buffer),_.bufferData(ie.type,ie.persistentData||ie.byteLength,ie.usage)})}return X.profile&&(F.getTotalBufferSize=function(){var ie=0;return Object.keys(de).forEach(function(be){ie+=de[be].stats.size}),ie}),{create:Be,createStream:De,destroyStream:je,clear:function(){K(de).forEach(Ke),Me.forEach(Ke)},getBuffer:function(ie){return ie&&ie._buffer instanceof _e?ie._buffer:null},restore:Ge,_initBuffer:We}}var qD=0,KD=0,QD=1,JD=1,eB=4,tB=4,zs={points:qD,point:KD,lines:QD,line:JD,triangles:eB,triangle:tB,"line loop":2,"line strip":3,"triangle strip":5,"triangle fan":6},nB=0,rB=1,Qf=4,aB=5120,Wu=5121,qE=5122,Xu=5123,KE=5124,$l=5125,vb=34963,iB=35040,oB=35044;function sB(_,F,X,pe){var Se={},de=0,_e={uint8:Wu,uint16:Xu};F.oes_element_index_uint&&(_e.uint32=$l);function Me(Ge){this.id=de++,Se[this.id]=this,this.buffer=Ge,this.primType=Qf,this.vertCount=0,this.type=0}Me.prototype.bind=function(){this.buffer.bind()};var De=[];function je(Ge){var ie=De.pop();return ie||(ie=new Me(X.create(null,vb,!0,!1)._buffer)),We(ie,Ge,iB,-1,-1,0,0),ie}function He(Ge){De.push(Ge)}function We(Ge,ie,be,$e,ct,Pe,st){Ge.buffer.bind();var rt;if(ie){var Pt=st;!st&&(!r(ie)||U(ie)&&!r(ie.data))&&(Pt=F.oes_element_index_uint?$l:Xu),X._initBuffer(Ge.buffer,ie,be,Pt,3)}else _.bufferData(vb,Pe,be),Ge.buffer.dtype=rt||Wu,Ge.buffer.usage=be,Ge.buffer.dimension=3,Ge.buffer.byteLength=Pe;if(rt=st,!st){switch(Ge.buffer.dtype){case Wu:case aB:rt=Wu;break;case Xu:case qE:rt=Xu;break;case $l:case KE:rt=$l;break;default:k.raise("unsupported type for element array")}Ge.buffer.dtype=rt}Ge.type=rt,k(rt!==$l||!!F.oes_element_index_uint,"32 bit element buffers not supported, enable oes_element_index_uint first");var Te=ct;Te<0&&(Te=Ge.buffer.byteLength,rt===Xu?Te>>=1:rt===$l&&(Te>>=2)),Ge.vertCount=Te;var ke=$e;if($e<0){ke=Qf;var mt=Ge.buffer.dimension;mt===1&&(ke=nB),mt===2&&(ke=rB),mt===3&&(ke=Qf)}Ge.primType=ke}function Ke(Ge){pe.elementsCount--,k(Ge.buffer!==null,"must not double destroy elements"),delete Se[Ge.id],Ge.buffer.destroy(),Ge.buffer=null}function Be(Ge,ie){var be=X.create(null,vb,!0),$e=new Me(be._buffer);pe.elementsCount++;function ct(Pe){if(!Pe)be(),$e.primType=Qf,$e.vertCount=0,$e.type=Wu;else if(typeof Pe=="number")be(Pe),$e.primType=Qf,$e.vertCount=Pe|0,$e.type=Wu;else{var st=null,rt=oB,Pt=-1,Te=-1,ke=0,mt=0;Array.isArray(Pe)||r(Pe)||U(Pe)?st=Pe:(k.type(Pe,"object","invalid arguments for elements"),"data"in Pe&&(st=Pe.data,k(Array.isArray(st)||r(st)||U(st),"invalid data for element buffer")),"usage"in Pe&&(k.parameter(Pe.usage,Gh,"invalid element buffer usage"),rt=Gh[Pe.usage]),"primitive"in Pe&&(k.parameter(Pe.primitive,zs,"invalid element buffer primitive"),Pt=zs[Pe.primitive]),"count"in Pe&&(k(typeof Pe.count=="number"&&Pe.count>=0,"invalid vertex count for elements"),Te=Pe.count|0),"type"in Pe&&(k.parameter(Pe.type,_e,"invalid buffer type"),mt=_e[Pe.type]),"length"in Pe?ke=Pe.length|0:(ke=Te,mt===Xu||mt===qE?ke*=2:(mt===$l||mt===KE)&&(ke*=4))),We($e,st,rt,Pt,Te,ke,mt)}return ct}return ct(Ge),ct._reglType="elements",ct._elements=$e,ct.subdata=function(Pe,st){return be.subdata(Pe,st),ct},ct.destroy=function(){Ke($e)},ct}return{create:Be,createStream:je,destroyStream:He,getElements:function(Ge){return typeof Ge=="function"&&Ge._elements instanceof Me?Ge._elements:null},clear:function(){K(Se).forEach(Ke)}}}var QE=new Float32Array(1),lB=new Uint32Array(QE.buffer),uB=5123;function JE(_){for(var F=dn.allocType(uB,_.length),X=0;X<_.length;++X)if(isNaN(_[X]))F[X]=65535;else if(_[X]===1/0)F[X]=31744;else if(_[X]===-1/0)F[X]=64512;else{QE[0]=_[X];var pe=lB[0],Se=pe>>>31<<15,de=(pe<<1>>>24)-127,_e=pe>>13&(1<<10)-1;if(de<-24)F[X]=Se;else if(de<-14){var Me=-14-de;F[X]=Se+(_e+(1<<10)>>Me)}else de>15?F[X]=Se+31744:F[X]=Se+(de+15<<10)+_e}return F}function hr(_){return Array.isArray(_)||r(_)}var ek=function(_){return!(_&_-1)&&!!_},cB=34467,Oo=3553,bb=34067,Wh=34069,Vl=6408,yb=6406,Xh=6407,Jf=6409,Yh=6410,tk=32854,xb=32855,nk=36194,fB=32819,dB=32820,pB=33635,hB=34042,wb=6402,Zh=34041,_b=35904,Eb=35906,Yu=36193,kb=33776,Sb=33777,Cb=33778,Tb=33779,rk=35986,ak=35987,ik=34798,ok=35840,sk=35841,lk=35842,uk=35843,ck=36196,Zu=5121,Ab=5123,Ob=5125,ed=5126,mB=10242,gB=10243,vB=10497,Mb=33071,bB=33648,yB=10240,xB=10241,Rb=9728,wB=9729,Pb=9984,fk=9985,dk=9986,Ib=9987,_B=33170,qh=4352,EB=4353,kB=4354,SB=34046,CB=3317,TB=37440,AB=37441,OB=37443,pk=37444,td=33984,MB=[Pb,dk,fk,Ib],Kh=[0,Jf,Yh,Xh,Vl],Ri={};Ri[Jf]=Ri[yb]=Ri[wb]=1,Ri[Zh]=Ri[Yh]=2,Ri[Xh]=Ri[_b]=3,Ri[Vl]=Ri[Eb]=4;function qu(_){return"[object "+_+"]"}var hk=qu("HTMLCanvasElement"),mk=qu("OffscreenCanvas"),gk=qu("CanvasRenderingContext2D"),vk=qu("ImageBitmap"),bk=qu("HTMLImageElement"),yk=qu("HTMLVideoElement"),RB=Object.keys(Qa).concat([hk,mk,gk,vk,bk,yk]),Ku=[];Ku[Zu]=1,Ku[ed]=4,Ku[Yu]=2,Ku[Ab]=2,Ku[Ob]=4;var ra=[];ra[tk]=2,ra[xb]=2,ra[nk]=2,ra[Zh]=4,ra[kb]=.5,ra[Sb]=.5,ra[Cb]=1,ra[Tb]=1,ra[rk]=.5,ra[ak]=1,ra[ik]=1,ra[ok]=.5,ra[sk]=.25,ra[lk]=.5,ra[uk]=.25,ra[ck]=.5;function xk(_){return Array.isArray(_)&&(_.length===0||typeof _[0]=="number")}function wk(_){if(!Array.isArray(_))return!1;var F=_.length;return!(F===0||!hr(_[0]))}function jl(_){return Object.prototype.toString.call(_)}function _k(_){return jl(_)===hk}function Ek(_){return jl(_)===mk}function PB(_){return jl(_)===gk}function IB(_){return jl(_)===vk}function LB(_){return jl(_)===bk}function NB(_){return jl(_)===yk}function Lb(_){var F=typeof my!="undefined"&&!!my&&typeof my.showToast=="function"&&my.isFRM!==!0;return!!(F&&_&&_.getContext)}function kk(_){var F=typeof my!="undefined"&&!!my&&typeof my.showToast=="function"&&my.isFRM!==!0;return!!(F&&_&&"src"in _&&"crossOrigin"in _)}function Nb(_){if(!_)return!1;if(Lb(_)||kk(_))return!0;var F=jl(_);return RB.indexOf(F)>=0?!0:xk(_)||wk(_)||U(_)}function Sk(_){return Qa[Object.prototype.toString.call(_)]|0}function FB(_,F){var X=F.length;switch(_.type){case Zu:case Ab:case Ob:case ed:var pe=dn.allocType(_.type,X);pe.set(F),_.data=pe;break;case Yu:_.data=JE(F);break;default:k.raise("unsupported texture type, must specify a typed array")}}function Ck(_,F){return dn.allocType(_.type===Yu?ed:_.type,F)}function Tk(_,F){_.type===Yu?(_.data=JE(F),dn.freeType(F)):_.data=F}function DB(_,F,X,pe,Se,de){for(var _e=_.width,Me=_.height,De=_.channels,je=_e*Me*De,He=Ck(_,je),We=0,Ke=0;Ke<Me;++Ke)for(var Be=0;Be<_e;++Be)for(var Ge=0;Ge<De;++Ge)He[We++]=F[X*Be+pe*Ke+Se*Ge+de];Tk(_,He)}function Qh(_,F,X,pe,Se,de){var _e;if(typeof ra[_]!="undefined"?_e=ra[_]:_e=Ri[_]*Ku[F],de&&(_e*=6),Se){for(var Me=0,De=X;De>=1;)Me+=_e*De*De,De/=2;return Me}else return _e*X*pe}function BB(_,F,X,pe,Se,de,_e){var Me={"don't care":qh,"dont care":qh,nice:kB,fast:EB},De={repeat:vB,clamp:Mb,mirror:bB},je={nearest:Rb,linear:wB},He=a({mipmap:Ib,"nearest mipmap nearest":Pb,"linear mipmap nearest":fk,"nearest mipmap linear":dk,"linear mipmap linear":Ib},je),We={none:0,browser:pk},Ke={uint8:Zu,rgba4:fB,rgb565:pB,"rgb5 a1":dB},Be={alpha:yb,luminance:Jf,"luminance alpha":Yh,rgb:Xh,rgba:Vl,rgba4:tk,"rgb5 a1":xb,rgb565:nk},Ge={};F.ext_srgb&&(Be.srgb=_b,Be.srgba=Eb),F.oes_texture_float&&(Ke.float32=Ke.float=ed),F.oes_texture_half_float&&(Ke.float16=Ke["half float"]=Yu),F.webgl_depth_texture&&(a(Be,{depth:wb,"depth stencil":Zh}),a(Ke,{uint16:Ab,uint32:Ob,"depth stencil":hB})),F.webgl_compressed_texture_s3tc&&a(Ge,{"rgb s3tc dxt1":kb,"rgba s3tc dxt1":Sb,"rgba s3tc dxt3":Cb,"rgba s3tc dxt5":Tb}),F.webgl_compressed_texture_atc&&a(Ge,{"rgb atc":rk,"rgba atc explicit alpha":ak,"rgba atc interpolated alpha":ik}),F.webgl_compressed_texture_pvrtc&&a(Ge,{"rgb pvrtc 4bppv1":ok,"rgb pvrtc 2bppv1":sk,"rgba pvrtc 4bppv1":lk,"rgba pvrtc 2bppv1":uk}),F.webgl_compressed_texture_etc1&&(Ge["rgb etc1"]=ck);var ie=Array.prototype.slice.call(_.getParameter(cB)||new Uint32Array(0));Object.keys(Ge).forEach(function(W){var me=Ge[W];ie.indexOf(me)>=0&&(Be[W]=me)});var be=Object.keys(Be);X.textureFormats=be;var $e=[];Object.keys(Be).forEach(function(W){var me=Be[W];$e[me]=W});var ct=[];Object.keys(Ke).forEach(function(W){var me=Ke[W];ct[me]=W});var Pe=[];Object.keys(je).forEach(function(W){var me=je[W];Pe[me]=W});var st=[];Object.keys(He).forEach(function(W){var me=He[W];st[me]=W});var rt=[];Object.keys(De).forEach(function(W){var me=De[W];rt[me]=W});var Pt=be.reduce(function(W,me){var ce=Be[me];return ce===Jf||ce===yb||ce===Jf||ce===Yh||ce===wb||ce===Zh||F.ext_srgb&&(ce===_b||ce===Eb)?W[ce]=ce:ce===xb||me.indexOf("rgba")>=0?W[ce]=Vl:W[ce]=Xh,W},{});function Te(){this.internalformat=Vl,this.format=Vl,this.type=Zu,this.compressed=!1,this.premultiplyAlpha=!1,this.flipY=!1,this.unpackAlignment=1,this.colorSpace=pk,this.width=0,this.height=0,this.channels=0}function ke(W,me){W.internalformat=me.internalformat,W.format=me.format,W.type=me.type,W.compressed=me.compressed,W.premultiplyAlpha=me.premultiplyAlpha,W.flipY=me.flipY,W.unpackAlignment=me.unpackAlignment,W.colorSpace=me.colorSpace,W.width=me.width,W.height=me.height,W.channels=me.channels}function mt(W,me){if(!(typeof me!="object"||!me)){if("premultiplyAlpha"in me&&(k.type(me.premultiplyAlpha,"boolean","invalid premultiplyAlpha"),W.premultiplyAlpha=me.premultiplyAlpha),"flipY"in me&&(k.type(me.flipY,"boolean","invalid texture flip"),W.flipY=me.flipY),"alignment"in me&&(k.oneOf(me.alignment,[1,2,4,8],"invalid texture unpack alignment"),W.unpackAlignment=me.alignment),"colorSpace"in me&&(k.parameter(me.colorSpace,We,"invalid colorSpace"),W.colorSpace=We[me.colorSpace]),"type"in me){var ce=me.type;k(F.oes_texture_float||!(ce==="float"||ce==="float32"),"you must enable the OES_texture_float extension in order to use floating point textures."),k(F.oes_texture_half_float||!(ce==="half float"||ce==="float16"),"you must enable the OES_texture_half_float extension in order to use 16-bit floating point textures."),k(F.webgl_depth_texture||!(ce==="uint16"||ce==="uint32"||ce==="depth stencil"),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),k.parameter(ce,Ke,"invalid texture type"),W.type=Ke[ce]}var dt=W.width,sn=W.height,$=W.channels,L=!1;"shape"in me?(k(Array.isArray(me.shape)&&me.shape.length>=2,"shape must be an array"),dt=me.shape[0],sn=me.shape[1],me.shape.length===3&&($=me.shape[2],k($>0&&$<=4,"invalid number of channels"),L=!0),k(dt>=0&&dt<=X.maxTextureSize,"invalid width"),k(sn>=0&&sn<=X.maxTextureSize,"invalid height")):("radius"in me&&(dt=sn=me.radius,k(dt>=0&&dt<=X.maxTextureSize,"invalid radius")),"width"in me&&(dt=me.width,k(dt>=0&&dt<=X.maxTextureSize,"invalid width")),"height"in me&&(sn=me.height,k(sn>=0&&sn<=X.maxTextureSize,"invalid height")),"channels"in me&&($=me.channels,k($>0&&$<=4,"invalid number of channels"),L=!0)),W.width=dt|0,W.height=sn|0,W.channels=$|0;var q=!1;if("format"in me){var oe=me.format;k(F.webgl_depth_texture||!(oe==="depth"||oe==="depth stencil"),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),k.parameter(oe,Be,"invalid texture format");var he=W.internalformat=Be[oe];W.format=Pt[he],oe in Ke&&("type"in me||(W.type=Ke[oe])),oe in Ge&&(W.compressed=!0),q=!0}!L&&q?W.channels=Ri[W.format]:L&&!q?W.channels!==Kh[W.format]&&(W.format=W.internalformat=Kh[W.channels]):q&&L&&k(W.channels===Ri[W.format],"number of channels inconsistent with specified format")}}function Qe(W){_.pixelStorei(TB,W.flipY),_.pixelStorei(AB,W.premultiplyAlpha),_.pixelStorei(OB,W.colorSpace),_.pixelStorei(CB,W.unpackAlignment)}function ze(){Te.call(this),this.xOffset=0,this.yOffset=0,this.data=null,this.needsFree=!1,this.element=null,this.needsCopy=!1}function et(W,me){var ce=null;if(Nb(me)?ce=me:me&&(k.type(me,"object","invalid pixel data type"),mt(W,me),"x"in me&&(W.xOffset=me.x|0),"y"in me&&(W.yOffset=me.y|0),Nb(me.data)&&(ce=me.data)),k(!W.compressed||ce instanceof Uint8Array,"compressed texture data must be stored in a uint8array"),me.copy){k(!ce,"can not specify copy and data field for the same texture");var dt=Se.viewportWidth,sn=Se.viewportHeight;W.width=W.width||dt-W.xOffset,W.height=W.height||sn-W.yOffset,W.needsCopy=!0,k(W.xOffset>=0&&W.xOffset<dt&&W.yOffset>=0&&W.yOffset<sn&&W.width>0&&W.width<=dt&&W.height>0&&W.height<=sn,"copy texture read out of bounds")}else if(!ce)W.width=W.width||1,W.height=W.height||1,W.channels=W.channels||4;else if(r(ce))W.channels=W.channels||4,W.data=ce,!("type"in me)&&W.type===Zu&&(W.type=Sk(ce));else if(xk(ce))W.channels=W.channels||4,FB(W,ce),W.alignment=1,W.needsFree=!0;else if(U(ce)){var $=ce.data;!Array.isArray($)&&W.type===Zu&&(W.type=Sk($));var L=ce.shape,q=ce.stride,oe,he,te,Q,ne,B;L.length===3?(te=L[2],B=q[2]):(k(L.length===2,"invalid ndarray pixel data, must be 2 or 3D"),te=1,B=1),oe=L[0],he=L[1],Q=q[0],ne=q[1],W.alignment=1,W.width=oe,W.height=he,W.channels=te,W.format=W.internalformat=Kh[te],W.needsFree=!0,DB(W,$,Q,ne,B,ce.offset)}else if(Lb(ce)||_k(ce)||Ek(ce)||PB(ce))Lb(ce)||_k(ce)||Ek(ce)?W.element=ce:W.element=ce.canvas,W.width=W.element.width,W.height=W.element.height,W.channels=4;else if(IB(ce))W.element=ce,W.width=ce.width,W.height=ce.height,W.channels=4;else if(LB(ce))W.element=ce,W.width=ce.naturalWidth,W.height=ce.naturalHeight,W.channels=4;else if(kk(ce))W.element=ce,W.width=ce.width,W.height=ce.height,W.channels=4;else if(NB(ce))W.element=ce,W.width=ce.videoWidth,W.height=ce.videoHeight,W.channels=4;else if(wk(ce)){var Z=W.width||ce[0].length,G=W.height||ce.length,se=W.channels;hr(ce[0][0])?se=se||ce[0][0].length:se=se||1;for(var ue=xe.shape(ce),Re=1,Ye=0;Ye<ue.length;++Ye)Re*=ue[Ye];var Ze=Ck(W,Re);xe.flatten(ce,ue,"",Ze),Tk(W,Ze),W.alignment=1,W.width=Z,W.height=G,W.channels=se,W.format=W.internalformat=Kh[se],W.needsFree=!0}W.type===ed?k(X.extensions.indexOf("oes_texture_float")>=0,"oes_texture_float extension not enabled"):W.type===Yu&&k(X.extensions.indexOf("oes_texture_half_float")>=0,"oes_texture_half_float extension not enabled")}function nt(W,me,ce){var dt=W.element,sn=W.data,$=W.internalformat,L=W.format,q=W.type,oe=W.width,he=W.height;Qe(W),dt?_.texImage2D(me,ce,L,L,q,dt):W.compressed?_.compressedTexImage2D(me,ce,$,oe,he,0,sn):W.needsCopy?(pe(),_.copyTexImage2D(me,ce,L,W.xOffset,W.yOffset,oe,he,0)):_.texImage2D(me,ce,L,oe,he,0,L,q,sn||null)}function Ht(W,me,ce,dt,sn){var $=W.element,L=W.data,q=W.internalformat,oe=W.format,he=W.type,te=W.width,Q=W.height;Qe(W),$?_.texSubImage2D(me,sn,ce,dt,oe,he,$):W.compressed?_.compressedTexSubImage2D(me,sn,ce,dt,q,te,Q,L):W.needsCopy?(pe(),_.copyTexSubImage2D(me,sn,ce,dt,W.xOffset,W.yOffset,te,Q)):_.texSubImage2D(me,sn,ce,dt,te,Q,oe,he,L)}var Ut=[];function at(){return Ut.pop()||new ze}function ut(W){W.needsFree&&dn.freeType(W.data),ze.call(W),Ut.push(W)}function Ft(){Te.call(this),this.genMipmaps=!1,this.mipmapHint=qh,this.mipmask=0,this.images=Array(16)}function Vt(W,me,ce){var dt=W.images[0]=at();W.mipmask=1,dt.width=W.width=me,dt.height=W.height=ce,dt.channels=W.channels=4}function an(W,me){var ce=null;if(Nb(me))ce=W.images[0]=at(),ke(ce,W),et(ce,me),W.mipmask=1;else if(mt(W,me),Array.isArray(me.mipmap))for(var dt=me.mipmap,sn=0;sn<dt.length;++sn)ce=W.images[sn]=at(),ke(ce,W),ce.width>>=sn,ce.height>>=sn,et(ce,dt[sn]),W.mipmask|=1<<sn;else ce=W.images[0]=at(),ke(ce,W),et(ce,me),W.mipmask=1;ke(W,W.images[0]),W.compressed&&(W.internalformat===kb||W.internalformat===Sb||W.internalformat===Cb||W.internalformat===Tb)&&k(W.width%4===0&&W.height%4===0,"for compressed texture formats, mipmap level 0 must have width and height that are a multiple of 4")}function Kn(W,me){for(var ce=W.images,dt=0;dt<ce.length;++dt){if(!ce[dt])return;nt(ce[dt],me,dt)}}var rr=[];function on(){var W=rr.pop()||new Ft;Te.call(W),W.mipmask=0;for(var me=0;me<16;++me)W.images[me]=null;return W}function Zr(W){for(var me=W.images,ce=0;ce<me.length;++ce)me[ce]&&ut(me[ce]),me[ce]=null;rr.push(W)}function jn(){this.minFilter=Rb,this.magFilter=Rb,this.wrapS=Mb,this.wrapT=Mb,this.anisotropic=1,this.genMipmaps=!1,this.mipmapHint=qh}function Pr(W,me){if("min"in me){var ce=me.min;k.parameter(ce,He),W.minFilter=He[ce],MB.indexOf(W.minFilter)>=0&&!("faces"in me)&&(W.genMipmaps=!0)}if("mag"in me){var dt=me.mag;k.parameter(dt,je),W.magFilter=je[dt]}var sn=W.wrapS,$=W.wrapT;if("wrap"in me){var L=me.wrap;typeof L=="string"?(k.parameter(L,De),sn=$=De[L]):Array.isArray(L)&&(k.parameter(L[0],De),k.parameter(L[1],De),sn=De[L[0]],$=De[L[1]])}else{if("wrapS"in me){var q=me.wrapS;k.parameter(q,De),sn=De[q]}if("wrapT"in me){var oe=me.wrapT;k.parameter(oe,De),$=De[oe]}}if(W.wrapS=sn,W.wrapT=$,"anisotropic"in me){var he=me.anisotropic;k(typeof he=="number"&&he>=1&&he<=X.maxAnisotropic,"aniso samples must be between 1 and "),W.anisotropic=me.anisotropic}if("mipmap"in me){var te=!1;switch(typeof me.mipmap){case"string":k.parameter(me.mipmap,Me,"invalid mipmap hint"),W.mipmapHint=Me[me.mipmap],W.genMipmaps=!0,te=!0;break;case"boolean":te=W.genMipmaps=me.mipmap;break;case"object":k(Array.isArray(me.mipmap),"invalid mipmap type"),W.genMipmaps=!1,te=!0;break;default:k.raise("invalid mipmap type")}te&&!("min"in me)&&(W.minFilter=Pb)}}function mr(W,me){_.texParameteri(me,xB,W.minFilter),_.texParameteri(me,yB,W.magFilter),_.texParameteri(me,mB,W.wrapS),_.texParameteri(me,gB,W.wrapT),F.ext_texture_filter_anisotropic&&_.texParameteri(me,SB,W.anisotropic),W.genMipmaps&&(_.hint(_B,W.mipmapHint),_.generateMipmap(me))}var Br=0,qr={},aa=X.maxTextureUnits,gr=Array(aa).map(function(){return null});function Kt(W){Te.call(this),this.mipmask=0,this.internalformat=Vl,this.id=Br++,this.refCount=1,this.target=W,this.texture=_.createTexture(),this.unit=-1,this.bindCount=0,this.texInfo=new jn,_e.profile&&(this.stats={size:0})}function Kr(W){_.activeTexture(td),_.bindTexture(W.target,W.texture)}function Cn(){var W=gr[0];W?_.bindTexture(W.target,W.texture):_.bindTexture(Oo,null)}function zr(W){var me=W.texture;k(me,"must not double destroy texture");var ce=W.unit,dt=W.target;ce>=0&&(_.activeTexture(td+ce),_.bindTexture(dt,null),gr[ce]=null),_.deleteTexture(me),W.texture=null,W.params=null,W.pixels=null,W.refCount=0,delete qr[W.id],de.textureCount--}a(Kt.prototype,{bind:function(){var W=this;W.bindCount+=1;var me=W.unit;if(me<0){for(var ce=0;ce<aa;++ce){var dt=gr[ce];if(dt){if(dt.bindCount>0)continue;dt.unit=-1}gr[ce]=W,me=ce;break}me>=aa&&k.raise("insufficient number of texture units"),_e.profile&&de.maxTextureUnits<me+1&&(de.maxTextureUnits=me+1),W.unit=me,_.activeTexture(td+me),_.bindTexture(W.target,W.texture)}return me},unbind:function(){this.bindCount-=1},decRef:function(){--this.refCount<=0&&zr(this)}});function zt(W,me){var ce=new Kt(Oo);qr[ce.id]=ce,de.textureCount++;function dt(L,q){var oe=ce.texInfo;jn.call(oe);var he=on();return typeof L=="number"?typeof q=="number"?Vt(he,L|0,q|0):Vt(he,L|0,L|0):L?(k.type(L,"object","invalid arguments to regl.texture"),Pr(oe,L),an(he,L)):Vt(he,1,1),oe.genMipmaps&&(he.mipmask=(he.width<<1)-1),ce.mipmask=he.mipmask,ke(ce,he),k.texture2D(oe,he,X),ce.internalformat=he.internalformat,dt.width=he.width,dt.height=he.height,Kr(ce),Kn(he,Oo),mr(oe,Oo),Cn(),Zr(he),_e.profile&&(ce.stats.size=Qh(ce.internalformat,ce.type,he.width,he.height,oe.genMipmaps,!1)),dt.format=$e[ce.internalformat],dt.type=ct[ce.type],dt.mag=Pe[oe.magFilter],dt.min=st[oe.minFilter],dt.wrapS=rt[oe.wrapS],dt.wrapT=rt[oe.wrapT],dt}function sn(L,q,oe,he){k(!!L,"must specify image data");var te=q|0,Q=oe|0,ne=he|0,B=at();return ke(B,ce),B.width=0,B.height=0,et(B,L),B.width=B.width||(ce.width>>ne)-te,B.height=B.height||(ce.height>>ne)-Q,k(ce.type===B.type&&ce.format===B.format&&ce.internalformat===B.internalformat,"incompatible format for texture.subimage"),k(te>=0&&Q>=0&&te+B.width<=ce.width&&Q+B.height<=ce.height,"texture.subimage write out of bounds"),k(ce.mipmask&1<<ne,"missing mipmap data"),k(B.data||B.element||B.needsCopy,"missing image data"),Kr(ce),Ht(B,Oo,te,Q,ne),Cn(),ut(B),dt}function $(L,q){var oe=L|0,he=q|0||oe;if(oe===ce.width&&he===ce.height)return dt;dt.width=ce.width=oe,dt.height=ce.height=he,Kr(ce);for(var te=0;ce.mipmask>>te;++te){var Q=oe>>te,ne=he>>te;if(!Q||!ne)break;_.texImage2D(Oo,te,ce.format,Q,ne,0,ce.format,ce.type,null)}return Cn(),_e.profile&&(ce.stats.size=Qh(ce.internalformat,ce.type,oe,he,!1,!1)),dt}return dt(W,me),dt.subimage=sn,dt.resize=$,dt._reglType="texture2d",dt._texture=ce,_e.profile&&(dt.stats=ce.stats),dt.destroy=function(){ce.decRef()},dt}function rn(W,me,ce,dt,sn,$){var L=new Kt(bb);qr[L.id]=L,de.cubeCount++;var q=new Array(6);function oe(Q,ne,B,Z,G,se){var ue,Re=L.texInfo;for(jn.call(Re),ue=0;ue<6;++ue)q[ue]=on();if(typeof Q=="number"||!Q){var Ye=Q|0||1;for(ue=0;ue<6;++ue)Vt(q[ue],Ye,Ye)}else if(typeof Q=="object")if(ne)an(q[0],Q),an(q[1],ne),an(q[2],B),an(q[3],Z),an(q[4],G),an(q[5],se);else if(Pr(Re,Q),mt(L,Q),"faces"in Q){var Ze=Q.faces;for(k(Array.isArray(Ze)&&Ze.length===6,"cube faces must be a length 6 array"),ue=0;ue<6;++ue)k(typeof Ze[ue]=="object"&&!!Ze[ue],"invalid input for cube map face"),ke(q[ue],L),an(q[ue],Ze[ue])}else for(ue=0;ue<6;++ue)an(q[ue],Q);else k.raise("invalid arguments to cube map");for(ke(L,q[0]),k.optional(function(){X.npotTextureCube||k(ek(L.width)&&ek(L.height),"your browser does not support non power or two texture dimensions")}),Re.genMipmaps?L.mipmask=(q[0].width<<1)-1:L.mipmask=q[0].mipmask,k.textureCube(L,Re,q,X),L.internalformat=q[0].internalformat,oe.width=q[0].width,oe.height=q[0].height,Kr(L),ue=0;ue<6;++ue)Kn(q[ue],Wh+ue);for(mr(Re,bb),Cn(),_e.profile&&(L.stats.size=Qh(L.internalformat,L.type,oe.width,oe.height,Re.genMipmaps,!0)),oe.format=$e[L.internalformat],oe.type=ct[L.type],oe.mag=Pe[Re.magFilter],oe.min=st[Re.minFilter],oe.wrapS=rt[Re.wrapS],oe.wrapT=rt[Re.wrapT],ue=0;ue<6;++ue)Zr(q[ue]);return oe}function he(Q,ne,B,Z,G){k(!!ne,"must specify image data"),k(typeof Q=="number"&&Q===(Q|0)&&Q>=0&&Q<6,"invalid face");var se=B|0,ue=Z|0,Re=G|0,Ye=at();return ke(Ye,L),Ye.width=0,Ye.height=0,et(Ye,ne),Ye.width=Ye.width||(L.width>>Re)-se,Ye.height=Ye.height||(L.height>>Re)-ue,k(L.type===Ye.type&&L.format===Ye.format&&L.internalformat===Ye.internalformat,"incompatible format for texture.subimage"),k(se>=0&&ue>=0&&se+Ye.width<=L.width&&ue+Ye.height<=L.height,"texture.subimage write out of bounds"),k(L.mipmask&1<<Re,"missing mipmap data"),k(Ye.data||Ye.element||Ye.needsCopy,"missing image data"),Kr(L),Ht(Ye,Wh+Q,se,ue,Re),Cn(),ut(Ye),oe}function te(Q){var ne=Q|0;if(ne!==L.width){oe.width=L.width=ne,oe.height=L.height=ne,Kr(L);for(var B=0;B<6;++B)for(var Z=0;L.mipmask>>Z;++Z)_.texImage2D(Wh+B,Z,L.format,ne>>Z,ne>>Z,0,L.format,L.type,null);return Cn(),_e.profile&&(L.stats.size=Qh(L.internalformat,L.type,oe.width,oe.height,!1,!0)),oe}}return oe(W,me,ce,dt,sn,$),oe.subimage=he,oe.resize=te,oe._reglType="textureCube",oe._texture=L,_e.profile&&(oe.stats=L.stats),oe.destroy=function(){L.decRef()},oe}function Ln(){for(var W=0;W<aa;++W)_.activeTexture(td+W),_.bindTexture(Oo,null),gr[W]=null;K(qr).forEach(zr),de.cubeCount=0,de.textureCount=0}_e.profile&&(de.getTotalTextureSize=function(){var W=0;return Object.keys(qr).forEach(function(me){W+=qr[me].stats.size}),W});function Tr(){for(var W=0;W<aa;++W){var me=gr[W];me&&(me.bindCount=0,me.unit=-1,gr[W]=null)}K(qr).forEach(function(ce){ce.texture=_.createTexture(),_.bindTexture(ce.target,ce.texture);for(var dt=0;dt<32;++dt)if((ce.mipmask&1<<dt)!==0)if(ce.target===Oo)_.texImage2D(Oo,dt,ce.internalformat,ce.width>>dt,ce.height>>dt,0,ce.internalformat,ce.type,null);else for(var sn=0;sn<6;++sn)_.texImage2D(Wh+sn,dt,ce.internalformat,ce.width>>dt,ce.height>>dt,0,ce.internalformat,ce.type,null);mr(ce.texInfo,ce.target)})}function as(){for(var W=0;W<aa;++W){var me=gr[W];me&&(me.bindCount=0,me.unit=-1,gr[W]=null),_.activeTexture(td+W),_.bindTexture(Oo,null),_.bindTexture(bb,null)}}return{create2D:zt,createCube:rn,clear:Ln,getTexture:function(W){return null},restore:Tr,refresh:as}}var Us=36161,Jh=32854,Ak=32855,Ok=36194,Mk=33189,Rk=36168,Pk=34041,Ik=35907,Lk=34836,Nk=34842,Fk=34843,so=[];so[Jh]=2,so[Ak]=2,so[Ok]=2,so[Mk]=2,so[Rk]=1,so[Pk]=4,so[Ik]=4,so[Lk]=16,so[Nk]=8,so[Fk]=6;function Dk(_,F,X){return so[_]*F*X}var zB=function(_,F,X,pe,Se){var de={rgba4:Jh,rgb565:Ok,"rgb5 a1":Ak,depth:Mk,stencil:Rk,"depth stencil":Pk};F.ext_srgb&&(de.srgba=Ik),F.ext_color_buffer_half_float&&(de.rgba16f=Nk,de.rgb16f=Fk),F.webgl_color_buffer_float&&(de.rgba32f=Lk);var _e=[];Object.keys(de).forEach(function(Be){var Ge=de[Be];_e[Ge]=Be});var Me=0,De={};function je(Be){this.id=Me++,this.refCount=1,this.renderbuffer=Be,this.format=Jh,this.width=0,this.height=0,Se.profile&&(this.stats={size:0})}je.prototype.decRef=function(){--this.refCount<=0&&He(this)};function He(Be){var Ge=Be.renderbuffer;k(Ge,"must not double destroy renderbuffer"),_.bindRenderbuffer(Us,null),_.deleteRenderbuffer(Ge),Be.renderbuffer=null,Be.refCount=0,delete De[Be.id],pe.renderbufferCount--}function We(Be,Ge){var ie=new je(_.createRenderbuffer());De[ie.id]=ie,pe.renderbufferCount++;function be(ct,Pe){var st=0,rt=0,Pt=Jh;if(typeof ct=="object"&&ct){var Te=ct;if("shape"in Te){var ke=Te.shape;k(Array.isArray(ke)&&ke.length>=2,"invalid renderbuffer shape"),st=ke[0]|0,rt=ke[1]|0}else"radius"in Te&&(st=rt=Te.radius|0),"width"in Te&&(st=Te.width|0),"height"in Te&&(rt=Te.height|0);"format"in Te&&(k.parameter(Te.format,de,"invalid renderbuffer format"),Pt=de[Te.format])}else typeof ct=="number"?(st=ct|0,typeof Pe=="number"?rt=Pe|0:rt=st):ct?k.raise("invalid arguments to renderbuffer constructor"):st=rt=1;if(k(st>0&&rt>0&&st<=X.maxRenderbufferSize&&rt<=X.maxRenderbufferSize,"invalid renderbuffer size"),!(st===ie.width&&rt===ie.height&&Pt===ie.format))return be.width=ie.width=st,be.height=ie.height=rt,ie.format=Pt,_.bindRenderbuffer(Us,ie.renderbuffer),_.renderbufferStorage(Us,Pt,st,rt),k(_.getError()===0,"invalid render buffer format"),Se.profile&&(ie.stats.size=Dk(ie.format,ie.width,ie.height)),be.format=_e[ie.format],be}function $e(ct,Pe){var st=ct|0,rt=Pe|0||st;return st===ie.width&&rt===ie.height||(k(st>0&&rt>0&&st<=X.maxRenderbufferSize&&rt<=X.maxRenderbufferSize,"invalid renderbuffer size"),be.width=ie.width=st,be.height=ie.height=rt,_.bindRenderbuffer(Us,ie.renderbuffer),_.renderbufferStorage(Us,ie.format,st,rt),k(_.getError()===0,"invalid render buffer format"),Se.profile&&(ie.stats.size=Dk(ie.format,ie.width,ie.height))),be}return be(Be,Ge),be.resize=$e,be._reglType="renderbuffer",be._renderbuffer=ie,Se.profile&&(be.stats=ie.stats),be.destroy=function(){ie.decRef()},be}Se.profile&&(pe.getTotalRenderbufferSize=function(){var Be=0;return Object.keys(De).forEach(function(Ge){Be+=De[Ge].stats.size}),Be});function Ke(){K(De).forEach(function(Be){Be.renderbuffer=_.createRenderbuffer(),_.bindRenderbuffer(Us,Be.renderbuffer),_.renderbufferStorage(Us,Be.format,Be.width,Be.height)}),_.bindRenderbuffer(Us,null)}return{create:We,clear:function(){K(De).forEach(He)},restore:Ke}},ns=36160,Fb=36161,Gl=3553,em=34069,Bk=36064,zk=36096,Uk=36128,$k=33306,Vk=36053,UB=36054,$B=36055,VB=36057,jB=36061,GB=36193,HB=5121,WB=5126,jk=6407,Gk=6408,XB=6402,YB=[jk,Gk],Db=[];Db[Gk]=4,Db[jk]=3;var tm=[];tm[HB]=1,tm[WB]=4,tm[GB]=2;var ZB=32854,qB=32855,KB=36194,QB=33189,JB=36168,Hk=34041,ez=35907,tz=34836,nz=34842,rz=34843,az=[ZB,qB,KB,ez,nz,rz,tz],Qu={};Qu[Vk]="complete",Qu[UB]="incomplete attachment",Qu[VB]="incomplete dimensions",Qu[$B]="incomplete, missing attachment",Qu[jB]="unsupported";function iz(_,F,X,pe,Se,de){var _e={cur:null,next:null,dirty:!1,setFBO:null},Me=["rgba"],De=["rgba4","rgb565","rgb5 a1"];F.ext_srgb&&De.push("srgba"),F.ext_color_buffer_half_float&&De.push("rgba16f","rgb16f"),F.webgl_color_buffer_float&&De.push("rgba32f");var je=["uint8"];F.oes_texture_half_float&&je.push("half float","float16"),F.oes_texture_float&&je.push("float","float32");function He(ze,et,nt){this.target=ze,this.texture=et,this.renderbuffer=nt;var Ht=0,Ut=0;et?(Ht=et.width,Ut=et.height):nt&&(Ht=nt.width,Ut=nt.height),this.width=Ht,this.height=Ut}function We(ze){ze&&(ze.texture&&ze.texture._texture.decRef(),ze.renderbuffer&&ze.renderbuffer._renderbuffer.decRef())}function Ke(ze,et,nt){if(!!ze)if(ze.texture){var Ht=ze.texture._texture,Ut=Math.max(1,Ht.width),at=Math.max(1,Ht.height);k(Ut===et&&at===nt,"inconsistent width/height for supplied texture"),Ht.refCount+=1}else{var ut=ze.renderbuffer._renderbuffer;k(ut.width===et&&ut.height===nt,"inconsistent width/height for renderbuffer"),ut.refCount+=1}}function Be(ze,et){et&&(et.texture?_.framebufferTexture2D(ns,ze,et.target,et.texture._texture.texture,0):_.framebufferRenderbuffer(ns,ze,Fb,et.renderbuffer._renderbuffer.renderbuffer))}function Ge(ze){var et=Gl,nt=null,Ht=null,Ut=ze;typeof ze=="object"&&(Ut=ze.data,"target"in ze&&(et=ze.target|0)),k.type(Ut,"function","invalid attachment data");var at=Ut._reglType;return at==="texture2d"?(nt=Ut,k(et===Gl)):at==="textureCube"?(nt=Ut,k(et>=em&&et<em+6,"invalid cube map target")):at==="renderbuffer"?(Ht=Ut,et=Fb):k.raise("invalid regl object for attachment"),new He(et,nt,Ht)}function ie(ze,et,nt,Ht,Ut){if(nt){var at=pe.create2D({width:ze,height:et,format:Ht,type:Ut});return at._texture.refCount=0,new He(Gl,at,null)}else{var ut=Se.create({width:ze,height:et,format:Ht});return ut._renderbuffer.refCount=0,new He(Fb,null,ut)}}function be(ze){return ze&&(ze.texture||ze.renderbuffer)}function $e(ze,et,nt){ze&&(ze.texture?ze.texture.resize(et,nt):ze.renderbuffer&&ze.renderbuffer.resize(et,nt),ze.width=et,ze.height=nt)}var ct=0,Pe={};function st(){this.id=ct++,Pe[this.id]=this,this.framebuffer=_.createFramebuffer(),this.width=0,this.height=0,this.colorAttachments=[],this.depthAttachment=null,this.stencilAttachment=null,this.depthStencilAttachment=null}function rt(ze){ze.colorAttachments.forEach(We),We(ze.depthAttachment),We(ze.stencilAttachment),We(ze.depthStencilAttachment)}function Pt(ze){var et=ze.framebuffer;k(et,"must not double destroy framebuffer"),_.deleteFramebuffer(et),ze.framebuffer=null,de.framebufferCount--,delete Pe[ze.id]}function Te(ze){var et;_.bindFramebuffer(ns,ze.framebuffer);var nt=ze.colorAttachments;for(et=0;et<nt.length;++et)Be(Bk+et,nt[et]);for(et=nt.length;et<X.maxColorAttachments;++et)_.framebufferTexture2D(ns,Bk+et,Gl,null,0);_.framebufferTexture2D(ns,$k,Gl,null,0),_.framebufferTexture2D(ns,zk,Gl,null,0),_.framebufferTexture2D(ns,Uk,Gl,null,0),Be(zk,ze.depthAttachment),Be(Uk,ze.stencilAttachment),Be($k,ze.depthStencilAttachment);var Ht=_.checkFramebufferStatus(ns);!_.isContextLost()&&Ht!==Vk&&k.raise("framebuffer configuration not supported, status = "+Qu[Ht]),_.bindFramebuffer(ns,_e.next?_e.next.framebuffer:null),_e.cur=_e.next,_.getError()}function ke(ze,et){var nt=new st;de.framebufferCount++;function Ht(at,ut){var Ft;k(_e.next!==nt,"can not update framebuffer which is currently in use");var Vt=0,an=0,Kn=!0,rr=!0,on=null,Zr=!0,jn="rgba",Pr="uint8",mr=1,Br=null,qr=null,aa=null,gr=!1;if(typeof at=="number")Vt=at|0,an=ut|0||Vt;else if(!at)Vt=an=1;else{k.type(at,"object","invalid arguments for framebuffer");var Kt=at;if("shape"in Kt){var Kr=Kt.shape;k(Array.isArray(Kr)&&Kr.length>=2,"invalid shape for framebuffer"),Vt=Kr[0],an=Kr[1]}else"radius"in Kt&&(Vt=an=Kt.radius),"width"in Kt&&(Vt=Kt.width),"height"in Kt&&(an=Kt.height);("color"in Kt||"colors"in Kt)&&(on=Kt.color||Kt.colors,Array.isArray(on)&&k(on.length===1||F.webgl_draw_buffers,"multiple render targets not supported")),on||("colorCount"in Kt&&(mr=Kt.colorCount|0,k(mr>0,"invalid color buffer count")),"colorTexture"in Kt&&(Zr=!!Kt.colorTexture,jn="rgba4"),"colorType"in Kt&&(Pr=Kt.colorType,Zr?(k(F.oes_texture_float||!(Pr==="float"||Pr==="float32"),"you must enable OES_texture_float in order to use floating point framebuffer objects"),k(F.oes_texture_half_float||!(Pr==="half float"||Pr==="float16"),"you must enable OES_texture_half_float in order to use 16-bit floating point framebuffer objects")):Pr==="half float"||Pr==="float16"?(k(F.ext_color_buffer_half_float,"you must enable EXT_color_buffer_half_float to use 16-bit render buffers"),jn="rgba16f"):(Pr==="float"||Pr==="float32")&&(k(F.webgl_color_buffer_float,"you must enable WEBGL_color_buffer_float in order to use 32-bit floating point renderbuffers"),jn="rgba32f"),k.oneOf(Pr,je,"invalid color type")),"colorFormat"in Kt&&(jn=Kt.colorFormat,Me.indexOf(jn)>=0?Zr=!0:De.indexOf(jn)>=0?Zr=!1:k.optional(function(){Zr?k.oneOf(Kt.colorFormat,Me,"invalid color format for texture"):k.oneOf(Kt.colorFormat,De,"invalid color format for renderbuffer")}))),("depthTexture"in Kt||"depthStencilTexture"in Kt)&&(gr=!!(Kt.depthTexture||Kt.depthStencilTexture),k(!gr||F.webgl_depth_texture,"webgl_depth_texture extension not supported")),"depth"in Kt&&(typeof Kt.depth=="boolean"?Kn=Kt.depth:(Br=Kt.depth,rr=!1)),"stencil"in Kt&&(typeof Kt.stencil=="boolean"?rr=Kt.stencil:(qr=Kt.stencil,Kn=!1)),"depthStencil"in Kt&&(typeof Kt.depthStencil=="boolean"?Kn=rr=Kt.depthStencil:(aa=Kt.depthStencil,Kn=!1,rr=!1))}var Cn=null,zr=null,zt=null,rn=null;if(Array.isArray(on))Cn=on.map(Ge);else if(on)Cn=[Ge(on)];else for(Cn=new Array(mr),Ft=0;Ft<mr;++Ft)Cn[Ft]=ie(Vt,an,Zr,jn,Pr);k(F.webgl_draw_buffers||Cn.length<=1,"you must enable the WEBGL_draw_buffers extension in order to use multiple color buffers."),k(Cn.length<=X.maxColorAttachments,"too many color attachments, not supported"),Vt=Vt||Cn[0].width,an=an||Cn[0].height,Br?zr=Ge(Br):Kn&&!rr&&(zr=ie(Vt,an,gr,"depth","uint32")),qr?zt=Ge(qr):rr&&!Kn&&(zt=ie(Vt,an,!1,"stencil","uint8")),aa?rn=Ge(aa):!Br&&!qr&&rr&&Kn&&(rn=ie(Vt,an,gr,"depth stencil","depth stencil")),k(!!Br+!!qr+!!aa<=1,"invalid framebuffer configuration, can specify exactly one depth/stencil attachment");var Ln=null;for(Ft=0;Ft<Cn.length;++Ft)if(Ke(Cn[Ft],Vt,an),k(!Cn[Ft]||Cn[Ft].texture&&YB.indexOf(Cn[Ft].texture._texture.format)>=0||Cn[Ft].renderbuffer&&az.indexOf(Cn[Ft].renderbuffer._renderbuffer.format)>=0,"framebuffer color attachment "+Ft+" is invalid"),Cn[Ft]&&Cn[Ft].texture){var Tr=Db[Cn[Ft].texture._texture.format]*tm[Cn[Ft].texture._texture.type];Ln===null?Ln=Tr:k(Ln===Tr,"all color attachments much have the same number of bits per pixel.")}return Ke(zr,Vt,an),k(!zr||zr.texture&&zr.texture._texture.format===XB||zr.renderbuffer&&zr.renderbuffer._renderbuffer.format===QB,"invalid depth attachment for framebuffer object"),Ke(zt,Vt,an),k(!zt||zt.renderbuffer&&zt.renderbuffer._renderbuffer.format===JB,"invalid stencil attachment for framebuffer object"),Ke(rn,Vt,an),k(!rn||rn.texture&&rn.texture._texture.format===Hk||rn.renderbuffer&&rn.renderbuffer._renderbuffer.format===Hk,"invalid depth-stencil attachment for framebuffer object"),rt(nt),nt.width=Vt,nt.height=an,nt.colorAttachments=Cn,nt.depthAttachment=zr,nt.stencilAttachment=zt,nt.depthStencilAttachment=rn,Ht.color=Cn.map(be),Ht.depth=be(zr),Ht.stencil=be(zt),Ht.depthStencil=be(rn),Ht.width=nt.width,Ht.height=nt.height,Te(nt),Ht}function Ut(at,ut){k(_e.next!==nt,"can not resize a framebuffer which is currently in use");var Ft=Math.max(at|0,1),Vt=Math.max(ut|0||Ft,1);if(Ft===nt.width&&Vt===nt.height)return Ht;for(var an=nt.colorAttachments,Kn=0;Kn<an.length;++Kn)$e(an[Kn],Ft,Vt);return $e(nt.depthAttachment,Ft,Vt),$e(nt.stencilAttachment,Ft,Vt),$e(nt.depthStencilAttachment,Ft,Vt),nt.width=Ht.width=Ft,nt.height=Ht.height=Vt,Te(nt),Ht}return Ht(ze,et),a(Ht,{resize:Ut,_reglType:"framebuffer",_framebuffer:nt,destroy:function(){Pt(nt),rt(nt)},use:function(at){_e.setFBO({framebuffer:Ht},at)}})}function mt(ze){var et=Array(6);function nt(Ut){var at;k(et.indexOf(_e.next)<0,"can not update framebuffer which is currently in use");var ut={color:null},Ft=0,Vt=null,an="rgba",Kn="uint8",rr=1;if(typeof Ut=="number")Ft=Ut|0;else if(!Ut)Ft=1;else{k.type(Ut,"object","invalid arguments for framebuffer");var on=Ut;if("shape"in on){var Zr=on.shape;k(Array.isArray(Zr)&&Zr.length>=2,"invalid shape for framebuffer"),k(Zr[0]===Zr[1],"cube framebuffer must be square"),Ft=Zr[0]}else"radius"in on&&(Ft=on.radius|0),"width"in on?(Ft=on.width|0,"height"in on&&k(on.height===Ft,"must be square")):"height"in on&&(Ft=on.height|0);("color"in on||"colors"in on)&&(Vt=on.color||on.colors,Array.isArray(Vt)&&k(Vt.length===1||F.webgl_draw_buffers,"multiple render targets not supported")),Vt||("colorCount"in on&&(rr=on.colorCount|0,k(rr>0,"invalid color buffer count")),"colorType"in on&&(k.oneOf(on.colorType,je,"invalid color type"),Kn=on.colorType),"colorFormat"in on&&(an=on.colorFormat,k.oneOf(on.colorFormat,Me,"invalid color format for texture"))),"depth"in on&&(ut.depth=on.depth),"stencil"in on&&(ut.stencil=on.stencil),"depthStencil"in on&&(ut.depthStencil=on.depthStencil)}var jn;if(Vt)if(Array.isArray(Vt))for(jn=[],at=0;at<Vt.length;++at)jn[at]=Vt[at];else jn=[Vt];else{jn=Array(rr);var Pr={radius:Ft,format:an,type:Kn};for(at=0;at<rr;++at)jn[at]=pe.createCube(Pr)}for(ut.color=Array(jn.length),at=0;at<jn.length;++at){var mr=jn[at];k(typeof mr=="function"&&mr._reglType==="textureCube","invalid cube map"),Ft=Ft||mr.width,k(mr.width===Ft&&mr.height===Ft,"invalid cube map shape"),ut.color[at]={target:em,data:jn[at]}}for(at=0;at<6;++at){for(var Br=0;Br<jn.length;++Br)ut.color[Br].target=em+at;at>0&&(ut.depth=et[0].depth,ut.stencil=et[0].stencil,ut.depthStencil=et[0].depthStencil),et[at]?et[at](ut):et[at]=ke(ut)}return a(nt,{width:Ft,height:Ft,color:jn})}function Ht(Ut){var at,ut=Ut|0;if(k(ut>0&&ut<=X.maxCubeMapSize,"invalid radius for cube fbo"),ut===nt.width)return nt;var Ft=nt.color;for(at=0;at<Ft.length;++at)Ft[at].resize(ut);for(at=0;at<6;++at)et[at].resize(ut);return nt.width=nt.height=ut,nt}return nt(ze),a(nt,{faces:et,resize:Ht,_reglType:"framebufferCube",destroy:function(){et.forEach(function(Ut){Ut.destroy()})}})}function Qe(){_e.cur=null,_e.next=null,_e.dirty=!0,K(Pe).forEach(function(ze){ze.framebuffer=_.createFramebuffer(),Te(ze)})}return a(_e,{getFramebuffer:function(ze){if(typeof ze=="function"&&ze._reglType==="framebuffer"){var et=ze._framebuffer;if(et instanceof st)return et}return null},create:ke,createCube:mt,clear:function(){K(Pe).forEach(Pt)},restore:Qe})}var oz=5126,Wk=34962,nm=34963,Xk=["attributes","elements","offset","count","primitive","instances"];function Bb(){this.state=0,this.x=0,this.y=0,this.z=0,this.w=0,this.buffer=null,this.size=0,this.normalized=!1,this.type=oz,this.offset=0,this.stride=0,this.divisor=0}function sz(_,F,X,pe,Se,de,_e){for(var Me=X.maxAttributes,De=new Array(Me),je=0;je<Me;++je)De[je]=new Bb;var He=0,We={},Ke={Record:Bb,scope:{},state:De,currentVAO:null,targetVAO:null,restore:Ge()?rt:function(){},createVAO:Pt,getVAO:be,destroyBuffer:Be,setVAO:Ge()?$e:ct,clear:Ge()?Pe:function(){}};function Be(Te){for(var ke=0;ke<De.length;++ke){var mt=De[ke];mt.buffer===Te&&(_.disableVertexAttribArray(ke),mt.buffer=null)}}function Ge(){return F.oes_vertex_array_object}function ie(){return F.angle_instanced_arrays}function be(Te){return typeof Te=="function"&&Te._vao?Te._vao:null}function $e(Te){if(Te!==Ke.currentVAO){var ke=Ge();Te?ke.bindVertexArrayOES(Te.vao):ke.bindVertexArrayOES(null),Ke.currentVAO=Te}}function ct(Te){if(Te!==Ke.currentVAO){if(Te)Te.bindAttrs();else{for(var ke=ie(),mt=0;mt<De.length;++mt){var Qe=De[mt];Qe.buffer?(_.enableVertexAttribArray(mt),Qe.buffer.bind(),_.vertexAttribPointer(mt,Qe.size,Qe.type,Qe.normalized,Qe.stride,Qe.offfset),ke&&Qe.divisor&&ke.vertexAttribDivisorANGLE(mt,Qe.divisor)):(_.disableVertexAttribArray(mt),_.vertexAttrib4f(mt,Qe.x,Qe.y,Qe.z,Qe.w))}_e.elements?_.bindBuffer(nm,_e.elements.buffer.buffer):_.bindBuffer(nm,null)}Ke.currentVAO=Te}}function Pe(){K(We).forEach(function(Te){Te.destroy()})}function st(){this.id=++He,this.attributes=[],this.elements=null,this.ownsElements=!1,this.count=0,this.offset=0,this.instances=-1,this.primitive=4;var Te=Ge();Te?this.vao=Te.createVertexArrayOES():this.vao=null,We[this.id]=this,this.buffers=[]}st.prototype.bindAttrs=function(){for(var Te=ie(),ke=this.attributes,mt=0;mt<ke.length;++mt){var Qe=ke[mt];Qe.buffer?(_.enableVertexAttribArray(mt),_.bindBuffer(Wk,Qe.buffer.buffer),_.vertexAttribPointer(mt,Qe.size,Qe.type,Qe.normalized,Qe.stride,Qe.offset),Te&&Qe.divisor&&Te.vertexAttribDivisorANGLE(mt,Qe.divisor)):(_.disableVertexAttribArray(mt),_.vertexAttrib4f(mt,Qe.x,Qe.y,Qe.z,Qe.w))}for(var ze=ke.length;ze<Me;++ze)_.disableVertexAttribArray(ze);var et=de.getElements(this.elements);et?_.bindBuffer(nm,et.buffer.buffer):_.bindBuffer(nm,null)},st.prototype.refresh=function(){var Te=Ge();Te&&(Te.bindVertexArrayOES(this.vao),this.bindAttrs(),Ke.currentVAO=null,Te.bindVertexArrayOES(null))},st.prototype.destroy=function(){if(this.vao){var Te=Ge();this===Ke.currentVAO&&(Ke.currentVAO=null,Te.bindVertexArrayOES(null)),Te.deleteVertexArrayOES(this.vao),this.vao=null}this.ownsElements&&(this.elements.destroy(),this.elements=null,this.ownsElements=!1),We[this.id]&&(delete We[this.id],pe.vaoCount-=1)};function rt(){var Te=Ge();Te&&K(We).forEach(function(ke){ke.refresh()})}function Pt(Te){var ke=new st;pe.vaoCount+=1;function mt(Qe){var ze;if(Array.isArray(Qe))ze=Qe,ke.elements&&ke.ownsElements&&ke.elements.destroy(),ke.elements=null,ke.ownsElements=!1,ke.offset=0,ke.count=0,ke.instances=-1,ke.primitive=4;else{if(k(typeof Qe=="object","invalid arguments for create vao"),k("attributes"in Qe,"must specify attributes for vao"),Qe.elements){var et=Qe.elements;ke.ownsElements?typeof et=="function"&&et._reglType==="elements"?(ke.elements.destroy(),ke.ownsElements=!1):(ke.elements(et),ke.ownsElements=!1):de.getElements(Qe.elements)?(ke.elements=Qe.elements,ke.ownsElements=!1):(ke.elements=de.create(Qe.elements),ke.ownsElements=!0)}else ke.elements=null,ke.ownsElements=!1;ze=Qe.attributes,ke.offset=0,ke.count=-1,ke.instances=-1,ke.primitive=4,ke.elements&&(ke.count=ke.elements._elements.vertCount,ke.primitive=ke.elements._elements.primType),"offset"in Qe&&(ke.offset=Qe.offset|0),"count"in Qe&&(ke.count=Qe.count|0),"instances"in Qe&&(ke.instances=Qe.instances|0),"primitive"in Qe&&(k(Qe.primitive in zs,"bad primitive type: "+Qe.primitive),ke.primitive=zs[Qe.primitive]),k.optional(function(){for(var Kn=Object.keys(Qe),rr=0;rr<Kn.length;++rr)k(Xk.indexOf(Kn[rr])>=0,'invalid option for vao: "'+Kn[rr]+'" valid options are '+Xk)}),k(Array.isArray(ze),"attributes must be an array")}k(ze.length<Me,"too many attributes"),k(ze.length>0,"must specify at least one attribute");var nt={},Ht=ke.attributes;Ht.length=ze.length;for(var Ut=0;Ut<ze.length;++Ut){var at=ze[Ut],ut=Ht[Ut]=new Bb,Ft=at.data||at;if(Array.isArray(Ft)||r(Ft)||U(Ft)){var Vt;ke.buffers[Ut]&&(Vt=ke.buffers[Ut],r(Ft)&&Vt._buffer.byteLength>=Ft.byteLength?Vt.subdata(Ft):(Vt.destroy(),ke.buffers[Ut]=null)),ke.buffers[Ut]||(Vt=ke.buffers[Ut]=Se.create(at,Wk,!1,!0)),ut.buffer=Se.getBuffer(Vt),ut.size=ut.buffer.dimension|0,ut.normalized=!1,ut.type=ut.buffer.dtype,ut.offset=0,ut.stride=0,ut.divisor=0,ut.state=1,nt[Ut]=1}else Se.getBuffer(at)?(ut.buffer=Se.getBuffer(at),ut.size=ut.buffer.dimension|0,ut.normalized=!1,ut.type=ut.buffer.dtype,ut.offset=0,ut.stride=0,ut.divisor=0,ut.state=1):Se.getBuffer(at.buffer)?(ut.buffer=Se.getBuffer(at.buffer),ut.size=(+at.size||ut.buffer.dimension)|0,ut.normalized=!!at.normalized||!1,"type"in at?(k.parameter(at.type,Ul,"invalid buffer type"),ut.type=Ul[at.type]):ut.type=ut.buffer.dtype,ut.offset=(at.offset||0)|0,ut.stride=(at.stride||0)|0,ut.divisor=(at.divisor||0)|0,ut.state=1,k(ut.size>=1&&ut.size<=4,"size must be between 1 and 4"),k(ut.offset>=0,"invalid offset"),k(ut.stride>=0&&ut.stride<=255,"stride must be between 0 and 255"),k(ut.divisor>=0,"divisor must be positive"),k(!ut.divisor||!!F.angle_instanced_arrays,"ANGLE_instanced_arrays must be enabled to use divisor")):"x"in at?(k(Ut>0,"first attribute must not be a constant"),ut.x=+at.x||0,ut.y=+at.y||0,ut.z=+at.z||0,ut.w=+at.w||0,ut.state=2):k(!1,"invalid attribute spec for location "+Ut)}for(var an=0;an<ke.buffers.length;++an)!nt[an]&&ke.buffers[an]&&(ke.buffers[an].destroy(),ke.buffers[an]=null);return ke.refresh(),mt}return mt.destroy=function(){for(var Qe=0;Qe<ke.buffers.length;++Qe)ke.buffers[Qe]&&ke.buffers[Qe].destroy();ke.buffers.length=0,ke.ownsElements&&(ke.elements.destroy(),ke.elements=null,ke.ownsElements=!1),ke.destroy()},mt._vao=ke,mt._reglType="vao",mt(Te)}return Ke}var Yk=35632,lz=35633,uz=35718,cz=35721;function fz(_,F,X,pe){var Se={},de={};function _e(ie,be,$e,ct){this.name=ie,this.id=be,this.location=$e,this.info=ct}function Me(ie,be){for(var $e=0;$e<ie.length;++$e)if(ie[$e].id===be.id){ie[$e].location=be.location;return}ie.push(be)}function De(ie,be,$e){var ct=ie===Yk?Se:de,Pe=ct[be];if(!Pe){var st=F.str(be);Pe=_.createShader(ie),_.shaderSource(Pe,st),_.compileShader(Pe),k.shaderError(_,Pe,st,ie,$e),ct[be]=Pe}return Pe}var je={},He=[],We=0;function Ke(ie,be){this.id=We++,this.fragId=ie,this.vertId=be,this.program=null,this.uniforms=[],this.attributes=[],this.refCount=1,pe.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function Be(ie,be,$e){var ct,Pe,st=De(Yk,ie.fragId),rt=De(lz,ie.vertId),Pt=ie.program=_.createProgram();if(_.attachShader(Pt,st),_.attachShader(Pt,rt),$e)for(ct=0;ct<$e.length;++ct){var Te=$e[ct];_.bindAttribLocation(Pt,Te[0],Te[1])}_.linkProgram(Pt),k.linkError(_,Pt,F.str(ie.fragId),F.str(ie.vertId),be);var ke=_.getProgramParameter(Pt,uz);pe.profile&&(ie.stats.uniformsCount=ke);var mt=ie.uniforms;for(ct=0;ct<ke;++ct)if(Pe=_.getActiveUniform(Pt,ct),Pe)if(Pe.size>1)for(var Qe=0;Qe<Pe.size;++Qe){var ze=Pe.name.replace("[0]","["+Qe+"]");Me(mt,new _e(ze,F.id(ze),_.getUniformLocation(Pt,ze),Pe))}else Me(mt,new _e(Pe.name,F.id(Pe.name),_.getUniformLocation(Pt,Pe.name),Pe));var et=_.getProgramParameter(Pt,cz);pe.profile&&(ie.stats.attributesCount=et);var nt=ie.attributes;for(ct=0;ct<et;++ct)Pe=_.getActiveAttrib(Pt,ct),Pe&&Me(nt,new _e(Pe.name,F.id(Pe.name),_.getAttribLocation(Pt,Pe.name),Pe))}pe.profile&&(X.getMaxUniformsCount=function(){var ie=0;return He.forEach(function(be){be.stats.uniformsCount>ie&&(ie=be.stats.uniformsCount)}),ie},X.getMaxAttributesCount=function(){var ie=0;return He.forEach(function(be){be.stats.attributesCount>ie&&(ie=be.stats.attributesCount)}),ie});function Ge(){Se={},de={};for(var ie=0;ie<He.length;++ie)Be(He[ie],null,He[ie].attributes.map(function(be){return[be.location,be.name]}))}return{clear:function(){var ie=_.deleteShader.bind(_);K(Se).forEach(ie),Se={},K(de).forEach(ie),de={},He.forEach(function(be){_.deleteProgram(be.program)}),He.length=0,je={},X.shaderCount=0},program:function(ie,be,$e,ct){k.command(ie>=0,"missing vertex shader",$e),k.command(be>=0,"missing fragment shader",$e);var Pe=je[be];Pe||(Pe=je[be]={});var st=Pe[ie];if(st&&(st.refCount++,!ct))return st;var rt=new Ke(be,ie);return X.shaderCount++,Be(rt,$e,ct),st||(Pe[ie]=rt),He.push(rt),a(rt,{destroy:function(){if(rt.refCount--,rt.refCount<=0){_.deleteProgram(rt.program);var Pt=He.indexOf(rt);He.splice(Pt,1),X.shaderCount--}Pe[rt.vertId].refCount<=0&&(_.deleteShader(de[rt.vertId]),delete de[rt.vertId],delete je[rt.fragId][rt.vertId]),Object.keys(je[rt.fragId]).length||(_.deleteShader(Se[rt.fragId]),delete Se[rt.fragId],delete je[rt.fragId])}})},restore:Ge,shader:De,frag:-1,vert:-1}}var dz=6408,nd=5121,pz=3333,rm=5126;function hz(_,F,X,pe,Se,de,_e){function Me(He){var We;F.next===null?(k(Se.preserveDrawingBuffer,'you must create a webgl context with "preserveDrawingBuffer":true in order to read pixels from the drawing buffer'),We=nd):(k(F.next.colorAttachments[0].texture!==null,"You cannot read from a renderbuffer"),We=F.next.colorAttachments[0].texture._texture.type,k.optional(function(){de.oes_texture_float?(k(We===nd||We===rm,"Reading from a framebuffer is only allowed for the types 'uint8' and 'float'"),We===rm&&k(_e.readFloat,"Reading 'float' values is not permitted in your browser. For a fallback, please see: https://www.npmjs.com/package/glsl-read-float")):k(We===nd,"Reading from a framebuffer is only allowed for the type 'uint8'")}));var Ke=0,Be=0,Ge=pe.framebufferWidth,ie=pe.framebufferHeight,be=null;r(He)?be=He:He&&(k.type(He,"object","invalid arguments to regl.read()"),Ke=He.x|0,Be=He.y|0,k(Ke>=0&&Ke<pe.framebufferWidth,"invalid x offset for regl.read"),k(Be>=0&&Be<pe.framebufferHeight,"invalid y offset for regl.read"),Ge=(He.width||pe.framebufferWidth-Ke)|0,ie=(He.height||pe.framebufferHeight-Be)|0,be=He.data||null),be&&(We===nd?k(be instanceof Uint8Array,"buffer must be 'Uint8Array' when reading from a framebuffer of type 'uint8'"):We===rm&&k(be instanceof Float32Array,"buffer must be 'Float32Array' when reading from a framebuffer of type 'float'")),k(Ge>0&&Ge+Ke<=pe.framebufferWidth,"invalid width for read pixels"),k(ie>0&&ie+Be<=pe.framebufferHeight,"invalid height for read pixels"),X();var $e=Ge*ie*4;return be||(We===nd?be=new Uint8Array($e):We===rm&&(be=be||new Float32Array($e))),k.isTypedArray(be,"data buffer for regl.read() must be a typedarray"),k(be.byteLength>=$e,"data buffer for regl.read() too small"),_.pixelStorei(pz,4),_.readPixels(Ke,Be,Ge,ie,dz,We,be),be}function De(He){var We;return F.setFBO({framebuffer:He.framebuffer},function(){We=Me(He)}),We}function je(He){return!He||!("framebuffer"in He)?Me(He):De(He)}return je}function Ju(_){return Array.prototype.slice.call(_)}function ec(_){return Ju(_).join("")}function mz(){var _=0,F=[],X=[];function pe(We){for(var Ke=0;Ke<X.length;++Ke)if(X[Ke]===We)return F[Ke];var Be="g"+_++;return F.push(Be),X.push(We),Be}function Se(){var We=[];function Ke(){We.push.apply(We,Ju(arguments))}var Be=[];function Ge(){var ie="v"+_++;return Be.push(ie),arguments.length>0&&(We.push(ie,"="),We.push.apply(We,Ju(arguments)),We.push(";")),ie}return a(Ke,{def:Ge,toString:function(){return ec([Be.length>0?"var "+Be.join(",")+";":"",ec(We)])}})}function de(){var We=Se(),Ke=Se(),Be=We.toString,Ge=Ke.toString;function ie(be,$e){Ke(be,$e,"=",We.def(be,$e),";")}return a(function(){We.apply(We,Ju(arguments))},{def:We.def,entry:We,exit:Ke,save:ie,set:function(be,$e,ct){ie(be,$e),We(be,$e,"=",ct,";")},toString:function(){return Be()+Ge()}})}function _e(){var We=ec(arguments),Ke=de(),Be=de(),Ge=Ke.toString,ie=Be.toString;return a(Ke,{then:function(){return Ke.apply(Ke,Ju(arguments)),this},else:function(){return Be.apply(Be,Ju(arguments)),this},toString:function(){var be=ie();return be&&(be="else{"+be+"}"),ec(["if(",We,"){",Ge(),"}",be])}})}var Me=Se(),De={};function je(We,Ke){var Be=[];function Ge(){var Pe="a"+Be.length;return Be.push(Pe),Pe}Ke=Ke||0;for(var ie=0;ie<Ke;++ie)Ge();var be=de(),$e=be.toString,ct=De[We]=a(be,{arg:Ge,toString:function(){return ec(["function(",Be.join(),"){",$e(),"}"])}});return ct}function He(){var We=['"use strict";',Me,"return {"];Object.keys(De).forEach(function(ie){We.push('"',ie,'":',De[ie].toString(),",")}),We.push("}");var Ke=ec(We).replace(/;/g,`;
`).replace(/}/g,`}
`).replace(/{/g,`{
`),Be=typeof my!="undefined"&&!!my&&typeof my.showToast=="function"&&my.isFRM!==!0,Ge=Be?n.Function.apply(null,F.concat(Ke)):Function.apply(null,F.concat(Ke));return Ge.apply(null,X)}return{global:Me,link:pe,block:Se,proc:je,scope:de,cond:_e,compile:He}}var tc="xyzw".split(""),Zk=5121,nc=1,zb=2,Ub=0,$b=1,Vb=2,jb=3,am=4,qk=5,Kk=6,Qk="dither",Jk="blend.enable",e3="blend.color",Gb="blend.equation",Hb="blend.func",t3="depth.enable",n3="depth.func",r3="depth.range",a3="depth.mask",Wb="colorMask",i3="cull.enable",o3="cull.face",Xb="frontFace",Yb="lineWidth",s3="polygonOffset.enable",Zb="polygonOffset.offset",l3="sample.alpha",u3="sample.enable",qb="sample.coverage",c3="stencil.enable",f3="stencil.mask",Kb="stencil.func",Qb="stencil.opFront",rd="stencil.opBack",d3="scissor.enable",im="scissor.box",rs="viewport",ad="profile",Hl="framebuffer",id="vert",od="frag",Wl="elements",Xl="primitive",Yl="count",om="offset",sm="instances",sd="vao",Jb="Width",ey="Height",rc=Hl+Jb,ac=Hl+ey,gz=rs+Jb,vz=rs+ey,p3="drawingBuffer",h3=p3+Jb,m3=p3+ey,bz=[Hb,Gb,Kb,Qb,rd,qb,rs,im,Zb],ic=34962,ty=34963,yz=35632,xz=35633,g3=3553,wz=34067,_z=2884,Ez=3042,kz=3024,Sz=2960,Cz=2929,Tz=3089,Az=32823,Oz=32926,Mz=32928,ny=5126,lm=35664,um=35665,cm=35666,ry=5124,fm=35667,dm=35668,pm=35669,ay=35670,hm=35671,mm=35672,gm=35673,ld=35674,ud=35675,cd=35676,fd=35678,dd=35680,iy=4,pd=1028,Zl=1029,v3=2304,oy=2305,Rz=32775,Pz=32776,Iz=519,$s=7680,b3=0,y3=1,x3=32774,Lz=513,w3=36160,Nz=36064,Mo={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},_3=["constant color, constant alpha","one minus constant color, constant alpha","constant color, one minus constant alpha","one minus constant color, one minus constant alpha","constant alpha, constant color","constant alpha, one minus constant color","one minus constant alpha, constant color","one minus constant alpha, one minus constant color"],oc={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},Vs={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},E3={frag:yz,vert:xz},sy={cw:v3,ccw:oy};function vm(_){return Array.isArray(_)||r(_)||U(_)}function k3(_){return _.sort(function(F,X){return F===rs?-1:X===rs?1:F<X?-1:1})}function Dr(_,F,X,pe){this.thisDep=_,this.contextDep=F,this.propDep=X,this.append=pe}function js(_){return _&&!(_.thisDep||_.contextDep||_.propDep)}function Cr(_){return new Dr(!1,!1,!1,_)}function Ja(_,F){var X=_.type;if(X===Ub){var pe=_.data.length;return new Dr(!0,pe>=1,pe>=2,F)}else if(X===am){var Se=_.data;return new Dr(Se.thisDep,Se.contextDep,Se.propDep,F)}else{if(X===qk)return new Dr(!1,!1,!1,F);if(X===Kk){for(var de=!1,_e=!1,Me=!1,De=0;De<_.data.length;++De){var je=_.data[De];if(je.type===$b)Me=!0;else if(je.type===Vb)_e=!0;else if(je.type===jb)de=!0;else if(je.type===Ub){de=!0;var He=je.data;He>=1&&(_e=!0),He>=2&&(Me=!0)}else je.type===am&&(de=de||je.data.thisDep,_e=_e||je.data.contextDep,Me=Me||je.data.propDep)}return new Dr(de,_e,Me,F)}else return new Dr(X===jb,X===Vb,X===$b,F)}}var S3=new Dr(!1,!1,!1,function(){});function Fz(_,F,X,pe,Se,de,_e,Me,De,je,He,We,Ke,Be,Ge){var ie=je.Record,be={add:32774,subtract:32778,"reverse subtract":32779};X.ext_blend_minmax&&(be.min=Rz,be.max=Pz);var $e=X.angle_instanced_arrays,ct=X.webgl_draw_buffers,Pe=X.oes_vertex_array_object,st={dirty:!0,profile:Ge.profile},rt={},Pt=[],Te={},ke={};function mt($){return $.replace(".","_")}function Qe($,L,q){var oe=mt($);Pt.push($),rt[oe]=st[oe]=!!q,Te[oe]=L}function ze($,L,q){var oe=mt($);Pt.push($),Array.isArray(q)?(st[oe]=q.slice(),rt[oe]=q.slice()):st[oe]=rt[oe]=q,ke[oe]=L}Qe(Qk,kz),Qe(Jk,Ez),ze(e3,"blendColor",[0,0,0,0]),ze(Gb,"blendEquationSeparate",[x3,x3]),ze(Hb,"blendFuncSeparate",[y3,b3,y3,b3]),Qe(t3,Cz,!0),ze(n3,"depthFunc",Lz),ze(r3,"depthRange",[0,1]),ze(a3,"depthMask",!0),ze(Wb,Wb,[!0,!0,!0,!0]),Qe(i3,_z),ze(o3,"cullFace",Zl),ze(Xb,Xb,oy),ze(Yb,Yb,1),Qe(s3,Az),ze(Zb,"polygonOffset",[0,0]),Qe(l3,Oz),Qe(u3,Mz),ze(qb,"sampleCoverage",[1,!1]),Qe(c3,Sz),ze(f3,"stencilMask",-1),ze(Kb,"stencilFunc",[Iz,0,-1]),ze(Qb,"stencilOpSeparate",[pd,$s,$s,$s]),ze(rd,"stencilOpSeparate",[Zl,$s,$s,$s]),Qe(d3,Tz),ze(im,"scissor",[0,0,_.drawingBufferWidth,_.drawingBufferHeight]),ze(rs,rs,[0,0,_.drawingBufferWidth,_.drawingBufferHeight]);var et={gl:_,context:Ke,strings:F,next:rt,current:st,draw:We,elements:de,buffer:Se,shader:He,attributes:je.state,vao:je,uniforms:De,framebuffer:Me,extensions:X,timer:Be,isBufferArgs:vm},nt={primTypes:zs,compareFuncs:oc,blendFuncs:Mo,blendEquations:be,stencilOps:Vs,glTypes:Ul,orientationType:sy};k.optional(function(){et.isArrayLike=hr}),ct&&(nt.backBuffer=[Zl],nt.drawBuffer=cn(pe.maxDrawbuffers,function($){return $===0?[0]:cn($,function(L){return Nz+L})}));var Ht=0;function Ut(){var $=mz(),L=$.link,q=$.global;$.id=Ht++,$.batchId="0";var oe=L(et),he=$.shared={props:"a0"};Object.keys(et).forEach(function(Z){he[Z]=q.def(oe,".",Z)}),k.optional(function(){$.CHECK=L(k),$.commandStr=k.guessCommand(),$.command=L($.commandStr),$.assert=function(Z,G,se){Z("if(!(",G,"))",this.CHECK,".commandRaise(",L(se),",",this.command,");")},nt.invalidBlendCombinations=_3});var te=$.next={},Q=$.current={};Object.keys(ke).forEach(function(Z){Array.isArray(st[Z])&&(te[Z]=q.def(he.next,".",Z),Q[Z]=q.def(he.current,".",Z))});var ne=$.constants={};Object.keys(nt).forEach(function(Z){ne[Z]=q.def(JSON.stringify(nt[Z]))}),$.invoke=function(Z,G){switch(G.type){case Ub:var se=["this",he.context,he.props,$.batchId];return Z.def(L(G.data),".call(",se.slice(0,Math.max(G.data.length+1,4)),")");case $b:return Z.def(he.props,G.data);case Vb:return Z.def(he.context,G.data);case jb:return Z.def("this",G.data);case am:return G.data.append($,Z),G.data.ref;case qk:return G.data.toString();case Kk:return G.data.map(function(ue){return $.invoke(Z,ue)})}},$.attribCache={};var B={};return $.scopeAttrib=function(Z){var G=F.id(Z);if(G in B)return B[G];var se=je.scope[G];se||(se=je.scope[G]=new ie);var ue=B[G]=L(se);return ue},$}function at($){var L=$.static,q=$.dynamic,oe;if(ad in L){var he=!!L[ad];oe=Cr(function(Q,ne){return he}),oe.enable=he}else if(ad in q){var te=q[ad];oe=Ja(te,function(Q,ne){return Q.invoke(ne,te)})}return oe}function ut($,L){var q=$.static,oe=$.dynamic;if(Hl in q){var he=q[Hl];return he?(he=Me.getFramebuffer(he),k.command(he,"invalid framebuffer object"),Cr(function(Q,ne){var B=Q.link(he),Z=Q.shared;ne.set(Z.framebuffer,".next",B);var G=Z.context;return ne.set(G,"."+rc,B+".width"),ne.set(G,"."+ac,B+".height"),B})):Cr(function(Q,ne){var B=Q.shared;ne.set(B.framebuffer,".next","null");var Z=B.context;return ne.set(Z,"."+rc,Z+"."+h3),ne.set(Z,"."+ac,Z+"."+m3),"null"})}else if(Hl in oe){var te=oe[Hl];return Ja(te,function(Q,ne){var B=Q.invoke(ne,te),Z=Q.shared,G=Z.framebuffer,se=ne.def(G,".getFramebuffer(",B,")");k.optional(function(){Q.assert(ne,"!"+B+"||"+se,"invalid framebuffer object")}),ne.set(G,".next",se);var ue=Z.context;return ne.set(ue,"."+rc,se+"?"+se+".width:"+ue+"."+h3),ne.set(ue,"."+ac,se+"?"+se+".height:"+ue+"."+m3),se})}else return null}function Ft($,L,q){var oe=$.static,he=$.dynamic;function te(B){if(B in oe){var Z=oe[B];k.commandType(Z,"object","invalid "+B,q.commandStr);var G=!0,se=Z.x|0,ue=Z.y|0,Re,Ye;return"width"in Z?(Re=Z.width|0,k.command(Re>=0,"invalid "+B,q.commandStr)):G=!1,"height"in Z?(Ye=Z.height|0,k.command(Ye>=0,"invalid "+B,q.commandStr)):G=!1,new Dr(!G&&L&&L.thisDep,!G&&L&&L.contextDep,!G&&L&&L.propDep,function(Xe,bt){var ft=Xe.shared.context,gt=Re;"width"in Z||(gt=bt.def(ft,".",rc,"-",se));var vt=Ye;return"height"in Z||(vt=bt.def(ft,".",ac,"-",ue)),[se,ue,gt,vt]})}else if(B in he){var Ze=he[B],it=Ja(Ze,function(Xe,bt){var ft=Xe.invoke(bt,Ze);k.optional(function(){Xe.assert(bt,ft+"&&typeof "+ft+'==="object"',"invalid "+B)});var gt=Xe.shared.context,vt=bt.def(ft,".x|0"),yt=bt.def(ft,".y|0"),Dt=bt.def('"width" in ',ft,"?",ft,".width|0:","(",gt,".",rc,"-",vt,")"),Vn=bt.def('"height" in ',ft,"?",ft,".height|0:","(",gt,".",ac,"-",yt,")");return k.optional(function(){Xe.assert(bt,Dt+">=0&&"+Vn+">=0","invalid "+B)}),[vt,yt,Dt,Vn]});return L&&(it.thisDep=it.thisDep||L.thisDep,it.contextDep=it.contextDep||L.contextDep,it.propDep=it.propDep||L.propDep),it}else return L?new Dr(L.thisDep,L.contextDep,L.propDep,function(Xe,bt){var ft=Xe.shared.context;return[0,0,bt.def(ft,".",rc),bt.def(ft,".",ac)]}):null}var Q=te(rs);if(Q){var ne=Q;Q=new Dr(Q.thisDep,Q.contextDep,Q.propDep,function(B,Z){var G=ne.append(B,Z),se=B.shared.context;return Z.set(se,"."+gz,G[2]),Z.set(se,"."+vz,G[3]),G})}return{viewport:Q,scissor_box:te(im)}}function Vt($,L){var q=$.static,oe=typeof q[od]=="string"&&typeof q[id]=="string";if(oe){if(Object.keys(L.dynamic).length>0)return null;var he=L.static,te=Object.keys(he);if(te.length>0&&typeof he[te[0]]=="number"){for(var Q=[],ne=0;ne<te.length;++ne)k(typeof he[te[ne]]=="number","must specify all vertex attribute locations when using vaos"),Q.push([he[te[ne]]|0,te[ne]]);return Q}}return null}function an($,L,q){var oe=$.static,he=$.dynamic;function te(G){if(G in oe){var se=F.id(oe[G]);k.optional(function(){He.shader(E3[G],se,k.guessCommand())});var ue=Cr(function(){return se});return ue.id=se,ue}else if(G in he){var Re=he[G];return Ja(Re,function(Ye,Ze){var it=Ye.invoke(Ze,Re),Xe=Ze.def(Ye.shared.strings,".id(",it,")");return k.optional(function(){Ze(Ye.shared.shader,".shader(",E3[G],",",Xe,",",Ye.command,");")}),Xe})}return null}var Q=te(od),ne=te(id),B=null,Z;return js(Q)&&js(ne)?(B=He.program(ne.id,Q.id,null,q),Z=Cr(function(G,se){return G.link(B)})):Z=new Dr(Q&&Q.thisDep||ne&&ne.thisDep,Q&&Q.contextDep||ne&&ne.contextDep,Q&&Q.propDep||ne&&ne.propDep,function(G,se){var ue=G.shared.shader,Re;Q?Re=Q.append(G,se):Re=se.def(ue,".",od);var Ye;ne?Ye=ne.append(G,se):Ye=se.def(ue,".",id);var Ze=ue+".program("+Ye+","+Re;return k.optional(function(){Ze+=","+G.command}),se.def(Ze+")")}),{frag:Q,vert:ne,progVar:Z,program:B}}function Kn($,L){var q=$.static,oe=$.dynamic,he={},te=!1;function Q(){if(sd in q){var bt=q[sd];return bt!==null&&je.getVAO(bt)===null&&(bt=je.createVAO(bt)),te=!0,he.vao=bt,Cr(function(gt){var vt=je.getVAO(bt);return vt?gt.link(vt):"null"})}else if(sd in oe){te=!0;var ft=oe[sd];return Ja(ft,function(gt,vt){var yt=gt.invoke(vt,ft);return vt.def(gt.shared.vao+".getVAO("+yt+")")})}return null}var ne=Q(),B=!1;function Z(){if(Wl in q){var bt=q[Wl];if(he.elements=bt,vm(bt)){var ft=he.elements=de.create(bt,!0);bt=de.getElements(ft),B=!0}else bt&&(bt=de.getElements(bt),B=!0,k.command(bt,"invalid elements",L.commandStr));var gt=Cr(function(yt,Dt){if(bt){var Vn=yt.link(bt);return yt.ELEMENTS=Vn,Vn}return yt.ELEMENTS=null,null});return gt.value=bt,gt}else if(Wl in oe){B=!0;var vt=oe[Wl];return Ja(vt,function(yt,Dt){var Vn=yt.shared,Qr=Vn.isBufferArgs,is=Vn.elements,os=yt.invoke(Dt,vt),ss=Dt.def("null"),Ca=Dt.def(Qr,"(",os,")"),Ro=yt.cond(Ca).then(ss,"=",is,".createStream(",os,");").else(ss,"=",is,".getElements(",os,");");return k.optional(function(){yt.assert(Ro.else,"!"+os+"||"+ss,"invalid elements")}),Dt.entry(Ro),Dt.exit(yt.cond(Ca).then(is,".destroyStream(",ss,");")),yt.ELEMENTS=ss,ss})}else if(te)return new Dr(ne.thisDep,ne.contextDep,ne.propDep,function(yt,Dt){return Dt.def(yt.shared.vao+".currentVAO?"+yt.shared.elements+".getElements("+yt.shared.vao+".currentVAO.elements):null")});return null}var G=Z();function se(){if(Xl in q){var bt=q[Xl];return he.primitive=bt,k.commandParameter(bt,zs,"invalid primitve",L.commandStr),Cr(function(gt,vt){return zs[bt]})}else if(Xl in oe){var ft=oe[Xl];return Ja(ft,function(gt,vt){var yt=gt.constants.primTypes,Dt=gt.invoke(vt,ft);return k.optional(function(){gt.assert(vt,Dt+" in "+yt,"invalid primitive, must be one of "+Object.keys(zs))}),vt.def(yt,"[",Dt,"]")})}else{if(B)return js(G)?G.value?Cr(function(gt,vt){return vt.def(gt.ELEMENTS,".primType")}):Cr(function(){return iy}):new Dr(G.thisDep,G.contextDep,G.propDep,function(gt,vt){var yt=gt.ELEMENTS;return vt.def(yt,"?",yt,".primType:",iy)});if(te)return new Dr(ne.thisDep,ne.contextDep,ne.propDep,function(gt,vt){return vt.def(gt.shared.vao+".currentVAO?"+gt.shared.vao+".currentVAO.primitive:"+iy)})}return null}function ue(bt,ft){if(bt in q){var gt=q[bt]|0;return ft?he.offset=gt:he.instances=gt,k.command(!ft||gt>=0,"invalid "+bt,L.commandStr),Cr(function(yt,Dt){return ft&&(yt.OFFSET=gt),gt})}else if(bt in oe){var vt=oe[bt];return Ja(vt,function(yt,Dt){var Vn=yt.invoke(Dt,vt);return ft&&(yt.OFFSET=Vn,k.optional(function(){yt.assert(Dt,Vn+">=0","invalid "+bt)})),Vn})}else if(ft){if(B)return Cr(function(yt,Dt){return yt.OFFSET=0,0});if(te)return new Dr(ne.thisDep,ne.contextDep,ne.propDep,function(yt,Dt){return Dt.def(yt.shared.vao+".currentVAO?"+yt.shared.vao+".currentVAO.offset:0")})}else if(te)return new Dr(ne.thisDep,ne.contextDep,ne.propDep,function(yt,Dt){return Dt.def(yt.shared.vao+".currentVAO?"+yt.shared.vao+".currentVAO.instances:-1")});return null}var Re=ue(om,!0);function Ye(){if(Yl in q){var bt=q[Yl]|0;return he.count=bt,k.command(typeof bt=="number"&&bt>=0,"invalid vertex count",L.commandStr),Cr(function(){return bt})}else if(Yl in oe){var ft=oe[Yl];return Ja(ft,function(Dt,Vn){var Qr=Dt.invoke(Vn,ft);return k.optional(function(){Dt.assert(Vn,"typeof "+Qr+'==="number"&&'+Qr+">=0&&"+Qr+"===("+Qr+"|0)","invalid vertex count")}),Qr})}else if(B)if(js(G)){if(G)return Re?new Dr(Re.thisDep,Re.contextDep,Re.propDep,function(Dt,Vn){var Qr=Vn.def(Dt.ELEMENTS,".vertCount-",Dt.OFFSET);return k.optional(function(){Dt.assert(Vn,Qr+">=0","invalid vertex offset/element buffer too small")}),Qr}):Cr(function(Dt,Vn){return Vn.def(Dt.ELEMENTS,".vertCount")});var gt=Cr(function(){return-1});return k.optional(function(){gt.MISSING=!0}),gt}else{var vt=new Dr(G.thisDep||Re.thisDep,G.contextDep||Re.contextDep,G.propDep||Re.propDep,function(Dt,Vn){var Qr=Dt.ELEMENTS;return Dt.OFFSET?Vn.def(Qr,"?",Qr,".vertCount-",Dt.OFFSET,":-1"):Vn.def(Qr,"?",Qr,".vertCount:-1")});return k.optional(function(){vt.DYNAMIC=!0}),vt}else if(te){var yt=new Dr(ne.thisDep,ne.contextDep,ne.propDep,function(Dt,Vn){return Vn.def(Dt.shared.vao,".currentVAO?",Dt.shared.vao,".currentVAO.count:-1")});return yt}return null}var Ze=se(),it=Ye(),Xe=ue(sm,!1);return{elements:G,primitive:Ze,count:it,instances:Xe,offset:Re,vao:ne,vaoActive:te,elementsActive:B,static:he}}function rr($,L){var q=$.static,oe=$.dynamic,he={};return Pt.forEach(function(te){var Q=mt(te);function ne(B,Z){if(te in q){var G=B(q[te]);he[Q]=Cr(function(){return G})}else if(te in oe){var se=oe[te];he[Q]=Ja(se,function(ue,Re){return Z(ue,Re,ue.invoke(Re,se))})}}switch(te){case i3:case Jk:case Qk:case c3:case t3:case d3:case s3:case l3:case u3:case a3:return ne(function(B){return k.commandType(B,"boolean",te,L.commandStr),B},function(B,Z,G){return k.optional(function(){B.assert(Z,"typeof "+G+'==="boolean"',"invalid flag "+te,B.commandStr)}),G});case n3:return ne(function(B){return k.commandParameter(B,oc,"invalid "+te,L.commandStr),oc[B]},function(B,Z,G){var se=B.constants.compareFuncs;return k.optional(function(){B.assert(Z,G+" in "+se,"invalid "+te+", must be one of "+Object.keys(oc))}),Z.def(se,"[",G,"]")});case r3:return ne(function(B){return k.command(hr(B)&&B.length===2&&typeof B[0]=="number"&&typeof B[1]=="number"&&B[0]<=B[1],"depth range is 2d array",L.commandStr),B},function(B,Z,G){k.optional(function(){B.assert(Z,B.shared.isArrayLike+"("+G+")&&"+G+".length===2&&typeof "+G+'[0]==="number"&&typeof '+G+'[1]==="number"&&'+G+"[0]<="+G+"[1]","depth range must be a 2d array")});var se=Z.def("+",G,"[0]"),ue=Z.def("+",G,"[1]");return[se,ue]});case Hb:return ne(function(B){k.commandType(B,"object","blend.func",L.commandStr);var Z="srcRGB"in B?B.srcRGB:B.src,G="srcAlpha"in B?B.srcAlpha:B.src,se="dstRGB"in B?B.dstRGB:B.dst,ue="dstAlpha"in B?B.dstAlpha:B.dst;return k.commandParameter(Z,Mo,Q+".srcRGB",L.commandStr),k.commandParameter(G,Mo,Q+".srcAlpha",L.commandStr),k.commandParameter(se,Mo,Q+".dstRGB",L.commandStr),k.commandParameter(ue,Mo,Q+".dstAlpha",L.commandStr),k.command(_3.indexOf(Z+", "+se)===-1,"unallowed blending combination (srcRGB, dstRGB) = ("+Z+", "+se+")",L.commandStr),[Mo[Z],Mo[se],Mo[G],Mo[ue]]},function(B,Z,G){var se=B.constants.blendFuncs;k.optional(function(){B.assert(Z,G+"&&typeof "+G+'==="object"',"invalid blend func, must be an object")});function ue(ft,gt){var vt=Z.def('"',ft,gt,'" in ',G,"?",G,".",ft,gt,":",G,".",ft);return k.optional(function(){B.assert(Z,vt+" in "+se,"invalid "+te+"."+ft+gt+", must be one of "+Object.keys(Mo))}),vt}var Re=ue("src","RGB"),Ye=ue("dst","RGB");k.optional(function(){var ft=B.constants.invalidBlendCombinations;B.assert(Z,ft+".indexOf("+Re+'+", "+'+Ye+") === -1 ","unallowed blending combination for (srcRGB, dstRGB)")});var Ze=Z.def(se,"[",Re,"]"),it=Z.def(se,"[",ue("src","Alpha"),"]"),Xe=Z.def(se,"[",Ye,"]"),bt=Z.def(se,"[",ue("dst","Alpha"),"]");return[Ze,Xe,it,bt]});case Gb:return ne(function(B){if(typeof B=="string")return k.commandParameter(B,be,"invalid "+te,L.commandStr),[be[B],be[B]];if(typeof B=="object")return k.commandParameter(B.rgb,be,te+".rgb",L.commandStr),k.commandParameter(B.alpha,be,te+".alpha",L.commandStr),[be[B.rgb],be[B.alpha]];k.commandRaise("invalid blend.equation",L.commandStr)},function(B,Z,G){var se=B.constants.blendEquations,ue=Z.def(),Re=Z.def(),Ye=B.cond("typeof ",G,'==="string"');return k.optional(function(){function Ze(it,Xe,bt){B.assert(it,bt+" in "+se,"invalid "+Xe+", must be one of "+Object.keys(be))}Ze(Ye.then,te,G),B.assert(Ye.else,G+"&&typeof "+G+'==="object"',"invalid "+te),Ze(Ye.else,te+".rgb",G+".rgb"),Ze(Ye.else,te+".alpha",G+".alpha")}),Ye.then(ue,"=",Re,"=",se,"[",G,"];"),Ye.else(ue,"=",se,"[",G,".rgb];",Re,"=",se,"[",G,".alpha];"),Z(Ye),[ue,Re]});case e3:return ne(function(B){return k.command(hr(B)&&B.length===4,"blend.color must be a 4d array",L.commandStr),cn(4,function(Z){return+B[Z]})},function(B,Z,G){return k.optional(function(){B.assert(Z,B.shared.isArrayLike+"("+G+")&&"+G+".length===4","blend.color must be a 4d array")}),cn(4,function(se){return Z.def("+",G,"[",se,"]")})});case f3:return ne(function(B){return k.commandType(B,"number",Q,L.commandStr),B|0},function(B,Z,G){return k.optional(function(){B.assert(Z,"typeof "+G+'==="number"',"invalid stencil.mask")}),Z.def(G,"|0")});case Kb:return ne(function(B){k.commandType(B,"object",Q,L.commandStr);var Z=B.cmp||"keep",G=B.ref||0,se="mask"in B?B.mask:-1;return k.commandParameter(Z,oc,te+".cmp",L.commandStr),k.commandType(G,"number",te+".ref",L.commandStr),k.commandType(se,"number",te+".mask",L.commandStr),[oc[Z],G,se]},function(B,Z,G){var se=B.constants.compareFuncs;k.optional(function(){function Ze(){B.assert(Z,Array.prototype.join.call(arguments,""),"invalid stencil.func")}Ze(G+"&&typeof ",G,'==="object"'),Ze('!("cmp" in ',G,")||(",G,".cmp in ",se,")")});var ue=Z.def('"cmp" in ',G,"?",se,"[",G,".cmp]",":",$s),Re=Z.def(G,".ref|0"),Ye=Z.def('"mask" in ',G,"?",G,".mask|0:-1");return[ue,Re,Ye]});case Qb:case rd:return ne(function(B){k.commandType(B,"object",Q,L.commandStr);var Z=B.fail||"keep",G=B.zfail||"keep",se=B.zpass||"keep";return k.commandParameter(Z,Vs,te+".fail",L.commandStr),k.commandParameter(G,Vs,te+".zfail",L.commandStr),k.commandParameter(se,Vs,te+".zpass",L.commandStr),[te===rd?Zl:pd,Vs[Z],Vs[G],Vs[se]]},function(B,Z,G){var se=B.constants.stencilOps;k.optional(function(){B.assert(Z,G+"&&typeof "+G+'==="object"',"invalid "+te)});function ue(Re){return k.optional(function(){B.assert(Z,'!("'+Re+'" in '+G+")||("+G+"."+Re+" in "+se+")","invalid "+te+"."+Re+", must be one of "+Object.keys(Vs))}),Z.def('"',Re,'" in ',G,"?",se,"[",G,".",Re,"]:",$s)}return[te===rd?Zl:pd,ue("fail"),ue("zfail"),ue("zpass")]});case Zb:return ne(function(B){k.commandType(B,"object",Q,L.commandStr);var Z=B.factor|0,G=B.units|0;return k.commandType(Z,"number",Q+".factor",L.commandStr),k.commandType(G,"number",Q+".units",L.commandStr),[Z,G]},function(B,Z,G){k.optional(function(){B.assert(Z,G+"&&typeof "+G+'==="object"',"invalid "+te)});var se=Z.def(G,".factor|0"),ue=Z.def(G,".units|0");return[se,ue]});case o3:return ne(function(B){var Z=0;return B==="front"?Z=pd:B==="back"&&(Z=Zl),k.command(!!Z,Q,L.commandStr),Z},function(B,Z,G){return k.optional(function(){B.assert(Z,G+'==="front"||'+G+'==="back"',"invalid cull.face")}),Z.def(G,'==="front"?',pd,":",Zl)});case Yb:return ne(function(B){return k.command(typeof B=="number"&&B>=pe.lineWidthDims[0]&&B<=pe.lineWidthDims[1],"invalid line width, must be a positive number between "+pe.lineWidthDims[0]+" and "+pe.lineWidthDims[1],L.commandStr),B},function(B,Z,G){return k.optional(function(){B.assert(Z,"typeof "+G+'==="number"&&'+G+">="+pe.lineWidthDims[0]+"&&"+G+"<="+pe.lineWidthDims[1],"invalid line width")}),G});case Xb:return ne(function(B){return k.commandParameter(B,sy,Q,L.commandStr),sy[B]},function(B,Z,G){return k.optional(function(){B.assert(Z,G+'==="cw"||'+G+'==="ccw"',"invalid frontFace, must be one of cw,ccw")}),Z.def(G+'==="cw"?'+v3+":"+oy)});case Wb:return ne(function(B){return k.command(hr(B)&&B.length===4,"color.mask must be length 4 array",L.commandStr),B.map(function(Z){return!!Z})},function(B,Z,G){return k.optional(function(){B.assert(Z,B.shared.isArrayLike+"("+G+")&&"+G+".length===4","invalid color.mask")}),cn(4,function(se){return"!!"+G+"["+se+"]"})});case qb:return ne(function(B){k.command(typeof B=="object"&&B,Q,L.commandStr);var Z="value"in B?B.value:1,G=!!B.invert;return k.command(typeof Z=="number"&&Z>=0&&Z<=1,"sample.coverage.value must be a number between 0 and 1",L.commandStr),[Z,G]},function(B,Z,G){k.optional(function(){B.assert(Z,G+"&&typeof "+G+'==="object"',"invalid sample.coverage")});var se=Z.def('"value" in ',G,"?+",G,".value:1"),ue=Z.def("!!",G,".invert");return[se,ue]})}}),he}function on($,L){var q=$.static,oe=$.dynamic,he={};return Object.keys(q).forEach(function(te){var Q=q[te],ne;if(typeof Q=="number"||typeof Q=="boolean")ne=Cr(function(){return Q});else if(typeof Q=="function"){var B=Q._reglType;B==="texture2d"||B==="textureCube"?ne=Cr(function(Z){return Z.link(Q)}):B==="framebuffer"||B==="framebufferCube"?(k.command(Q.color.length>0,'missing color attachment for framebuffer sent to uniform "'+te+'"',L.commandStr),ne=Cr(function(Z){return Z.link(Q.color[0])})):k.commandRaise('invalid data for uniform "'+te+'"',L.commandStr)}else hr(Q)?ne=Cr(function(Z){var G=Z.global.def("[",cn(Q.length,function(se){return k.command(typeof Q[se]=="number"||typeof Q[se]=="boolean","invalid uniform "+te,Z.commandStr),Q[se]}),"]");return G}):k.commandRaise('invalid or missing data for uniform "'+te+'"',L.commandStr);ne.value=Q,he[te]=ne}),Object.keys(oe).forEach(function(te){var Q=oe[te];he[te]=Ja(Q,function(ne,B){return ne.invoke(B,Q)})}),he}function Zr($,L){var q=$.static,oe=$.dynamic,he={};return Object.keys(q).forEach(function(te){var Q=q[te],ne=F.id(te),B=new ie;if(vm(Q))B.state=nc,B.buffer=Se.getBuffer(Se.create(Q,ic,!1,!0)),B.type=0;else{var Z=Se.getBuffer(Q);if(Z)B.state=nc,B.buffer=Z,B.type=0;else if(k.command(typeof Q=="object"&&Q,"invalid data for attribute "+te,L.commandStr),"constant"in Q){var G=Q.constant;B.buffer="null",B.state=zb,typeof G=="number"?B.x=G:(k.command(hr(G)&&G.length>0&&G.length<=4,"invalid constant for attribute "+te,L.commandStr),tc.forEach(function(Xe,bt){bt<G.length&&(B[Xe]=G[bt])}))}else{vm(Q.buffer)?Z=Se.getBuffer(Se.create(Q.buffer,ic,!1,!0)):Z=Se.getBuffer(Q.buffer),k.command(!!Z,'missing buffer for attribute "'+te+'"',L.commandStr);var se=Q.offset|0;k.command(se>=0,'invalid offset for attribute "'+te+'"',L.commandStr);var ue=Q.stride|0;k.command(ue>=0&&ue<256,'invalid stride for attribute "'+te+'", must be integer betweeen [0, 255]',L.commandStr);var Re=Q.size|0;k.command(!("size"in Q)||Re>0&&Re<=4,'invalid size for attribute "'+te+'", must be 1,2,3,4',L.commandStr);var Ye=!!Q.normalized,Ze=0;"type"in Q&&(k.commandParameter(Q.type,Ul,"invalid type for attribute "+te,L.commandStr),Ze=Ul[Q.type]);var it=Q.divisor|0;k.optional(function(){"divisor"in Q&&(k.command(it===0||$e,'cannot specify divisor for attribute "'+te+'", instancing not supported',L.commandStr),k.command(it>=0,'invalid divisor for attribute "'+te+'"',L.commandStr));var Xe=L.commandStr,bt=["buffer","offset","divisor","normalized","type","size","stride"];Object.keys(Q).forEach(function(ft){k.command(bt.indexOf(ft)>=0,'unknown parameter "'+ft+'" for attribute pointer "'+te+'" (valid parameters are '+bt+")",Xe)})}),B.buffer=Z,B.state=nc,B.size=Re,B.normalized=Ye,B.type=Ze||Z.dtype,B.offset=se,B.stride=ue,B.divisor=it}}he[te]=Cr(function(Xe,bt){var ft=Xe.attribCache;if(ne in ft)return ft[ne];var gt={isStream:!1};return Object.keys(B).forEach(function(vt){gt[vt]=B[vt]}),B.buffer&&(gt.buffer=Xe.link(B.buffer),gt.type=gt.type||gt.buffer+".dtype"),ft[ne]=gt,gt})}),Object.keys(oe).forEach(function(te){var Q=oe[te];function ne(B,Z){var G=B.invoke(Z,Q),se=B.shared,ue=B.constants,Re=se.isBufferArgs,Ye=se.buffer;k.optional(function(){B.assert(Z,G+"&&(typeof "+G+'==="object"||typeof '+G+'==="function")&&('+Re+"("+G+")||"+Ye+".getBuffer("+G+")||"+Ye+".getBuffer("+G+".buffer)||"+Re+"("+G+'.buffer)||("constant" in '+G+"&&(typeof "+G+'.constant==="number"||'+se.isArrayLike+"("+G+".constant))))",'invalid dynamic attribute "'+te+'"')});var Ze={isStream:Z.def(!1)},it=new ie;it.state=nc,Object.keys(it).forEach(function(gt){Ze[gt]=Z.def(""+it[gt])});var Xe=Ze.buffer,bt=Ze.type;Z("if(",Re,"(",G,")){",Ze.isStream,"=true;",Xe,"=",Ye,".createStream(",ic,",",G,");",bt,"=",Xe,".dtype;","}else{",Xe,"=",Ye,".getBuffer(",G,");","if(",Xe,"){",bt,"=",Xe,".dtype;",'}else if("constant" in ',G,"){",Ze.state,"=",zb,";","if(typeof "+G+'.constant === "number"){',Ze[tc[0]],"=",G,".constant;",tc.slice(1).map(function(gt){return Ze[gt]}).join("="),"=0;","}else{",tc.map(function(gt,vt){return Ze[gt]+"="+G+".constant.length>"+vt+"?"+G+".constant["+vt+"]:0;"}).join(""),"}}else{","if(",Re,"(",G,".buffer)){",Xe,"=",Ye,".createStream(",ic,",",G,".buffer);","}else{",Xe,"=",Ye,".getBuffer(",G,".buffer);","}",bt,'="type" in ',G,"?",ue.glTypes,"[",G,".type]:",Xe,".dtype;",Ze.normalized,"=!!",G,".normalized;");function ft(gt){Z(Ze[gt],"=",G,".",gt,"|0;")}return ft("size"),ft("offset"),ft("stride"),ft("divisor"),Z("}}"),Z.exit("if(",Ze.isStream,"){",Ye,".destroyStream(",Xe,");","}"),Ze}he[te]=Ja(Q,ne)}),he}function jn($){var L=$.static,q=$.dynamic,oe={};return Object.keys(L).forEach(function(he){var te=L[he];oe[he]=Cr(function(Q,ne){return typeof te=="number"||typeof te=="boolean"?""+te:Q.link(te)})}),Object.keys(q).forEach(function(he){var te=q[he];oe[he]=Ja(te,function(Q,ne){return Q.invoke(ne,te)})}),oe}function Pr($,L,q,oe,he){var te=$.static,Q=$.dynamic;k.optional(function(){var ft=[Hl,id,od,Wl,Xl,om,Yl,sm,ad,sd].concat(Pt);function gt(vt){Object.keys(vt).forEach(function(yt){k.command(ft.indexOf(yt)>=0,'unknown parameter "'+yt+'"',he.commandStr)})}gt(te),gt(Q)});var ne=Vt($,L),B=ut($),Z=Ft($,B,he),G=Kn($,he),se=rr($,he),ue=an($,he,ne);function Re(ft){var gt=Z[ft];gt&&(se[ft]=gt)}Re(rs),Re(mt(im));var Ye=Object.keys(se).length>0,Ze={framebuffer:B,draw:G,shader:ue,state:se,dirty:Ye,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}};if(Ze.profile=at($),Ze.uniforms=on(q,he),Ze.drawVAO=Ze.scopeVAO=G.vao,!Ze.drawVAO&&ue.program&&!ne&&X.angle_instanced_arrays&&G.static.elements){var it=!0,Xe=ue.program.attributes.map(function(ft){var gt=L.static[ft];return it=it&&!!gt,gt});if(it&&Xe.length>0){var bt=je.getVAO(je.createVAO({attributes:Xe,elements:G.static.elements}));Ze.drawVAO=new Dr(null,null,null,function(ft,gt){return ft.link(bt)}),Ze.useVAO=!0}}return ne?Ze.useVAO=!0:Ze.attributes=Zr(L,he),Ze.context=jn(oe),Ze}function mr($,L,q){var oe=$.shared,he=oe.context,te=$.scope();Object.keys(q).forEach(function(Q){L.save(he,"."+Q);var ne=q[Q],B=ne.append($,L);Array.isArray(B)?te(he,".",Q,"=[",B.join(),"];"):te(he,".",Q,"=",B,";")}),L(te)}function Br($,L,q,oe){var he=$.shared,te=he.gl,Q=he.framebuffer,ne;ct&&(ne=L.def(he.extensions,".webgl_draw_buffers"));var B=$.constants,Z=B.drawBuffer,G=B.backBuffer,se;q?se=q.append($,L):se=L.def(Q,".next"),oe||L("if(",se,"!==",Q,".cur){"),L("if(",se,"){",te,".bindFramebuffer(",w3,",",se,".framebuffer);"),ct&&L(ne,".drawBuffersWEBGL(",Z,"[",se,".colorAttachments.length]);"),L("}else{",te,".bindFramebuffer(",w3,",null);"),ct&&L(ne,".drawBuffersWEBGL(",G,");"),L("}",Q,".cur=",se,";"),oe||L("}")}function qr($,L,q){var oe=$.shared,he=oe.gl,te=$.current,Q=$.next,ne=oe.current,B=oe.next,Z=$.cond(ne,".dirty");Pt.forEach(function(G){var se=mt(G);if(!(se in q.state)){var ue,Re;if(se in Q){ue=Q[se],Re=te[se];var Ye=cn(st[se].length,function(it){return Z.def(ue,"[",it,"]")});Z($.cond(Ye.map(function(it,Xe){return it+"!=="+Re+"["+Xe+"]"}).join("||")).then(he,".",ke[se],"(",Ye,");",Ye.map(function(it,Xe){return Re+"["+Xe+"]="+it}).join(";"),";"))}else{ue=Z.def(B,".",se);var Ze=$.cond(ue,"!==",ne,".",se);Z(Ze),se in Te?Ze($.cond(ue).then(he,".enable(",Te[se],");").else(he,".disable(",Te[se],");"),ne,".",se,"=",ue,";"):Ze(he,".",ke[se],"(",ue,");",ne,".",se,"=",ue,";")}}}),Object.keys(q.state).length===0&&Z(ne,".dirty=false;"),L(Z)}function aa($,L,q,oe){var he=$.shared,te=$.current,Q=he.current,ne=he.gl;k3(Object.keys(q)).forEach(function(B){var Z=q[B];if(!(oe&&!oe(Z))){var G=Z.append($,L);if(Te[B]){var se=Te[B];js(Z)?G?L(ne,".enable(",se,");"):L(ne,".disable(",se,");"):L($.cond(G).then(ne,".enable(",se,");").else(ne,".disable(",se,");")),L(Q,".",B,"=",G,";")}else if(hr(G)){var ue=te[B];L(ne,".",ke[B],"(",G,");",G.map(function(Re,Ye){return ue+"["+Ye+"]="+Re}).join(";"),";")}else L(ne,".",ke[B],"(",G,");",Q,".",B,"=",G,";")}})}function gr($,L){$e&&($.instancing=L.def($.shared.extensions,".angle_instanced_arrays"))}function Kt($,L,q,oe,he){var te=$.shared,Q=$.stats,ne=te.current,B=te.timer,Z=q.profile;function G(){var ft=typeof my!="undefined"&&!!my&&typeof my.showToast=="function"&&my.isFRM!==!0;return ft||typeof performance=="undefined"?"Date.now()":"performance.now()"}var se,ue;function Re(ft){se=L.def(),ft(se,"=",G(),";"),typeof he=="string"?ft(Q,".count+=",he,";"):ft(Q,".count++;"),Be&&(oe?(ue=L.def(),ft(ue,"=",B,".getNumPendingQueries();")):ft(B,".beginQuery(",Q,");"))}function Ye(ft){ft(Q,".cpuTime+=",G(),"-",se,";"),Be&&(oe?ft(B,".pushScopeStats(",ue,",",B,".getNumPendingQueries(),",Q,");"):ft(B,".endQuery();"))}function Ze(ft){var gt=L.def(ne,".profile");L(ne,".profile=",ft,";"),L.exit(ne,".profile=",gt,";")}var it;if(Z){if(js(Z)){Z.enable?(Re(L),Ye(L.exit),Ze("true")):Ze("false");return}it=Z.append($,L),Ze(it)}else it=L.def(ne,".profile");var Xe=$.block();Re(Xe),L("if(",it,"){",Xe,"}");var bt=$.block();Ye(bt),L.exit("if(",it,"){",bt,"}")}function Kr($,L,q,oe,he){var te=$.shared;function Q(B){switch(B){case lm:case fm:case hm:return 2;case um:case dm:case mm:return 3;case cm:case pm:case gm:return 4;default:return 1}}function ne(B,Z,G){var se=te.gl,ue=L.def(B,".location"),Re=L.def(te.attributes,"[",ue,"]"),Ye=G.state,Ze=G.buffer,it=[G.x,G.y,G.z,G.w],Xe=["buffer","normalized","offset","stride"];function bt(){L("if(!",Re,".buffer){",se,".enableVertexAttribArray(",ue,");}");var gt=G.type,vt;if(G.size?vt=L.def(G.size,"||",Z):vt=Z,L("if(",Re,".type!==",gt,"||",Re,".size!==",vt,"||",Xe.map(function(Dt){return Re+"."+Dt+"!=="+G[Dt]}).join("||"),"){",se,".bindBuffer(",ic,",",Ze,".buffer);",se,".vertexAttribPointer(",[ue,vt,gt,G.normalized,G.stride,G.offset],");",Re,".type=",gt,";",Re,".size=",vt,";",Xe.map(function(Dt){return Re+"."+Dt+"="+G[Dt]+";"}).join(""),"}"),$e){var yt=G.divisor;L("if(",Re,".divisor!==",yt,"){",$.instancing,".vertexAttribDivisorANGLE(",[ue,yt],");",Re,".divisor=",yt,";}")}}function ft(){L("if(",Re,".buffer){",se,".disableVertexAttribArray(",ue,");",Re,".buffer=null;","}if(",tc.map(function(gt,vt){return Re+"."+gt+"!=="+it[vt]}).join("||"),"){",se,".vertexAttrib4f(",ue,",",it,");",tc.map(function(gt,vt){return Re+"."+gt+"="+it[vt]+";"}).join(""),"}")}Ye===nc?bt():Ye===zb?ft():(L("if(",Ye,"===",nc,"){"),bt(),L("}else{"),ft(),L("}"))}oe.forEach(function(B){var Z=B.name,G=q.attributes[Z],se;if(G){if(!he(G))return;se=G.append($,L)}else{if(!he(S3))return;var ue=$.scopeAttrib(Z);k.optional(function(){$.assert(L,ue+".state","missing attribute "+Z)}),se={},Object.keys(new ie).forEach(function(Re){se[Re]=L.def(ue,".",Re)})}ne($.link(B),Q(B.info.type),se)})}function Cn($,L,q,oe,he,te){for(var Q=$.shared,ne=Q.gl,B,Z=0;Z<oe.length;++Z){var G=oe[Z],se=G.name,ue=G.info.type,Re=q.uniforms[se],Ye=$.link(G),Ze=Ye+".location",it;if(Re){if(!he(Re))continue;if(js(Re)){var Xe=Re.value;if(k.command(Xe!==null&&typeof Xe!="undefined",'missing uniform "'+se+'"',$.commandStr),ue===fd||ue===dd){k.command(typeof Xe=="function"&&(ue===fd&&(Xe._reglType==="texture2d"||Xe._reglType==="framebuffer")||ue===dd&&(Xe._reglType==="textureCube"||Xe._reglType==="framebufferCube")),"invalid texture for uniform "+se,$.commandStr);var bt=$.link(Xe._texture||Xe.color[0]._texture);L(ne,".uniform1i(",Ze,",",bt+".bind());"),L.exit(bt,".unbind();")}else if(ue===ld||ue===ud||ue===cd){k.optional(function(){k.command(hr(Xe),"invalid matrix for uniform "+se,$.commandStr),k.command(ue===ld&&Xe.length===4||ue===ud&&Xe.length===9||ue===cd&&Xe.length===16,"invalid length for matrix uniform "+se,$.commandStr)});var ft=$.global.def("new Float32Array(["+Array.prototype.slice.call(Xe)+"])"),gt=2;ue===ud?gt=3:ue===cd&&(gt=4),L(ne,".uniformMatrix",gt,"fv(",Ze,",false,",ft,");")}else{switch(ue){case ny:k.commandType(Xe,"number","uniform "+se,$.commandStr),B="1f";break;case lm:k.command(hr(Xe)&&Xe.length===2,"uniform "+se,$.commandStr),B="2f";break;case um:k.command(hr(Xe)&&Xe.length===3,"uniform "+se,$.commandStr),B="3f";break;case cm:k.command(hr(Xe)&&Xe.length===4,"uniform "+se,$.commandStr),B="4f";break;case ay:k.commandType(Xe,"boolean","uniform "+se,$.commandStr),B="1i";break;case ry:k.commandType(Xe,"number","uniform "+se,$.commandStr),B="1i";break;case hm:k.command(hr(Xe)&&Xe.length===2,"uniform "+se,$.commandStr),B="2i";break;case fm:k.command(hr(Xe)&&Xe.length===2,"uniform "+se,$.commandStr),B="2i";break;case mm:k.command(hr(Xe)&&Xe.length===3,"uniform "+se,$.commandStr),B="3i";break;case dm:k.command(hr(Xe)&&Xe.length===3,"uniform "+se,$.commandStr),B="3i";break;case gm:k.command(hr(Xe)&&Xe.length===4,"uniform "+se,$.commandStr),B="4i";break;case pm:k.command(hr(Xe)&&Xe.length===4,"uniform "+se,$.commandStr),B="4i";break}L(ne,".uniform",B,"(",Ze,",",hr(Xe)?Array.prototype.slice.call(Xe):Xe,");")}continue}else it=Re.append($,L)}else{if(!he(S3))continue;it=L.def(Q.uniforms,"[",F.id(se),"]")}ue===fd?(k(!Array.isArray(it),"must specify a scalar prop for textures"),L("if(",it,"&&",it,'._reglType==="framebuffer"){',it,"=",it,".color[0];","}")):ue===dd&&(k(!Array.isArray(it),"must specify a scalar prop for cube maps"),L("if(",it,"&&",it,'._reglType==="framebufferCube"){',it,"=",it,".color[0];","}")),k.optional(function(){function Ca(lo,P3){$.assert(L,lo,'bad data or missing for uniform "'+se+'".  '+P3)}function Ro(lo){k(!Array.isArray(it),"must not specify an array type for uniform"),Ca("typeof "+it+'==="'+lo+'"',"invalid type, expected "+lo)}function Pi(lo,P3){Array.isArray(it)?k(it.length===lo,"must have length "+lo):Ca(Q.isArrayLike+"("+it+")&&"+it+".length==="+lo,"invalid vector, should have length "+lo,$.commandStr)}function R3(lo){k(!Array.isArray(it),"must not specify a value type"),Ca("typeof "+it+'==="function"&&'+it+'._reglType==="texture'+(lo===g3?"2d":"Cube")+'"',"invalid texture type",$.commandStr)}switch(ue){case ry:Ro("number");break;case fm:Pi(2);break;case dm:Pi(3);break;case pm:Pi(4);break;case ny:Ro("number");break;case lm:Pi(2);break;case um:Pi(3);break;case cm:Pi(4);break;case ay:Ro("boolean");break;case hm:Pi(2);break;case mm:Pi(3);break;case gm:Pi(4);break;case ld:Pi(4);break;case ud:Pi(9);break;case cd:Pi(16);break;case fd:R3(g3);break;case dd:R3(wz);break}});var vt=1;switch(ue){case fd:case dd:var yt=L.def(it,"._texture");L(ne,".uniform1i(",Ze,",",yt,".bind());"),L.exit(yt,".unbind();");continue;case ry:case ay:B="1i";break;case fm:case hm:B="2i",vt=2;break;case dm:case mm:B="3i",vt=3;break;case pm:case gm:B="4i",vt=4;break;case ny:B="1f";break;case lm:B="2f",vt=2;break;case um:B="3f",vt=3;break;case cm:B="4f",vt=4;break;case ld:B="Matrix2fv";break;case ud:B="Matrix3fv";break;case cd:B="Matrix4fv";break}if(B.charAt(0)==="M"){L(ne,".uniform",B,"(",Ze,",");var Dt=Math.pow(ue-ld+2,2),Vn=$.global.def("new Float32Array(",Dt,")");Array.isArray(it)?L("false,(",cn(Dt,function(Ca){return Vn+"["+Ca+"]="+it[Ca]}),",",Vn,")"):L("false,(Array.isArray(",it,")||",it," instanceof Float32Array)?",it,":(",cn(Dt,function(Ca){return Vn+"["+Ca+"]="+it+"["+Ca+"]"}),",",Vn,")"),L(");")}else if(vt>1){for(var Qr=[],is=[],os=0;os<vt;++os)Array.isArray(it)?is.push(it[os]):is.push(L.def(it+"["+os+"]")),te&&Qr.push(L.def());te&&L("if(!",$.batchId,"||",Qr.map(function(Ca,Ro){return Ca+"!=="+is[Ro]}).join("||"),"){",Qr.map(function(Ca,Ro){return Ca+"="+is[Ro]+";"}).join("")),L(ne,".uniform",B,"(",Ze,",",is.join(","),");"),te&&L("}")}else{if(k(!Array.isArray(it),"uniform value must not be an array"),te){var ss=L.def();L("if(!",$.batchId,"||",ss,"!==",it,"){",ss,"=",it,";")}L(ne,".uniform",B,"(",Ze,",",it,");"),te&&L("}")}}}function zr($,L,q,oe){var he=$.shared,te=he.gl,Q=he.draw,ne=oe.draw;function B(){var vt=ne.elements,yt,Dt=L;return vt?((vt.contextDep&&oe.contextDynamic||vt.propDep)&&(Dt=q),yt=vt.append($,Dt),ne.elementsActive&&Dt("if("+yt+")"+te+".bindBuffer("+ty+","+yt+".buffer.buffer);")):(yt=Dt.def(),Dt(yt,"=",Q,".",Wl,";","if(",yt,"){",te,".bindBuffer(",ty,",",yt,".buffer.buffer);}","else if(",he.vao,".currentVAO){",yt,"=",$.shared.elements+".getElements("+he.vao,".currentVAO.elements);",Pe?"":"if("+yt+")"+te+".bindBuffer("+ty+","+yt+".buffer.buffer);","}")),yt}function Z(){var vt=ne.count,yt,Dt=L;return vt?((vt.contextDep&&oe.contextDynamic||vt.propDep)&&(Dt=q),yt=vt.append($,Dt),k.optional(function(){vt.MISSING&&$.assert(L,"false","missing vertex count"),vt.DYNAMIC&&$.assert(Dt,yt+">=0","missing vertex count")})):(yt=Dt.def(Q,".",Yl),k.optional(function(){$.assert(Dt,yt+">=0","missing vertex count")})),yt}var G=B();function se(vt){var yt=ne[vt];return yt?yt.contextDep&&oe.contextDynamic||yt.propDep?yt.append($,q):yt.append($,L):L.def(Q,".",vt)}var ue=se(Xl),Re=se(om),Ye=Z();if(typeof Ye=="number"){if(Ye===0)return}else q("if(",Ye,"){"),q.exit("}");var Ze,it;$e&&(Ze=se(sm),it=$.instancing);var Xe=G+".type",bt=ne.elements&&js(ne.elements)&&!ne.vaoActive;function ft(){function vt(){q(it,".drawElementsInstancedANGLE(",[ue,Ye,Xe,Re+"<<(("+Xe+"-"+Zk+")>>1)",Ze],");")}function yt(){q(it,".drawArraysInstancedANGLE(",[ue,Re,Ye,Ze],");")}G&&G!=="null"?bt?vt():(q("if(",G,"){"),vt(),q("}else{"),yt(),q("}")):yt()}function gt(){function vt(){q(te+".drawElements("+[ue,Ye,Xe,Re+"<<(("+Xe+"-"+Zk+")>>1)"]+");")}function yt(){q(te+".drawArrays("+[ue,Re,Ye]+");")}G&&G!=="null"?bt?vt():(q("if(",G,"){"),vt(),q("}else{"),yt(),q("}")):yt()}$e&&(typeof Ze!="number"||Ze>=0)?typeof Ze=="string"?(q("if(",Ze,">0){"),ft(),q("}else if(",Ze,"<0){"),gt(),q("}")):ft():gt()}function zt($,L,q,oe,he){var te=Ut(),Q=te.proc("body",he);return k.optional(function(){te.commandStr=L.commandStr,te.command=te.link(L.commandStr)}),$e&&(te.instancing=Q.def(te.shared.extensions,".angle_instanced_arrays")),$(te,Q,q,oe),te.compile().body}function rn($,L,q,oe){gr($,L),q.useVAO?q.drawVAO?L($.shared.vao,".setVAO(",q.drawVAO.append($,L),");"):L($.shared.vao,".setVAO(",$.shared.vao,".targetVAO);"):(L($.shared.vao,".setVAO(null);"),Kr($,L,q,oe.attributes,function(){return!0})),Cn($,L,q,oe.uniforms,function(){return!0},!1),zr($,L,L,q)}function Ln($,L){var q=$.proc("draw",1);gr($,q),mr($,q,L.context),Br($,q,L.framebuffer),qr($,q,L),aa($,q,L.state),Kt($,q,L,!1,!0);var oe=L.shader.progVar.append($,q);if(q($.shared.gl,".useProgram(",oe,".program);"),L.shader.program)rn($,q,L,L.shader.program);else{q($.shared.vao,".setVAO(null);");var he=$.global.def("{}"),te=q.def(oe,".id"),Q=q.def(he,"[",te,"]");q($.cond(Q).then(Q,".call(this,a0);").else(Q,"=",he,"[",te,"]=",$.link(function(ne){return zt(rn,$,L,ne,1)}),"(",oe,");",Q,".call(this,a0);"))}Object.keys(L.state).length>0&&q($.shared.current,".dirty=true;"),$.shared.vao&&q($.shared.vao,".setVAO(null);")}function Tr($,L,q,oe){$.batchId="a1",gr($,L);function he(){return!0}Kr($,L,q,oe.attributes,he),Cn($,L,q,oe.uniforms,he,!1),zr($,L,L,q)}function as($,L,q,oe){gr($,L);var he=q.contextDep,te=L.def(),Q="a0",ne="a1",B=L.def();$.shared.props=B,$.batchId=te;var Z=$.scope(),G=$.scope();L(Z.entry,"for(",te,"=0;",te,"<",ne,";++",te,"){",B,"=",Q,"[",te,"];",G,"}",Z.exit);function se(Xe){return Xe.contextDep&&he||Xe.propDep}function ue(Xe){return!se(Xe)}if(q.needsContext&&mr($,G,q.context),q.needsFramebuffer&&Br($,G,q.framebuffer),aa($,G,q.state,se),q.profile&&se(q.profile)&&Kt($,G,q,!1,!0),oe)q.useVAO?q.drawVAO?se(q.drawVAO)?G($.shared.vao,".setVAO(",q.drawVAO.append($,G),");"):Z($.shared.vao,".setVAO(",q.drawVAO.append($,Z),");"):Z($.shared.vao,".setVAO(",$.shared.vao,".targetVAO);"):(Z($.shared.vao,".setVAO(null);"),Kr($,Z,q,oe.attributes,ue),Kr($,G,q,oe.attributes,se)),Cn($,Z,q,oe.uniforms,ue,!1),Cn($,G,q,oe.uniforms,se,!0),zr($,Z,G,q);else{var Re=$.global.def("{}"),Ye=q.shader.progVar.append($,G),Ze=G.def(Ye,".id"),it=G.def(Re,"[",Ze,"]");G($.shared.gl,".useProgram(",Ye,".program);","if(!",it,"){",it,"=",Re,"[",Ze,"]=",$.link(function(Xe){return zt(Tr,$,q,Xe,2)}),"(",Ye,");}",it,".call(this,a0[",te,"],",te,");")}}function W($,L){var q=$.proc("batch",2);$.batchId="0",gr($,q);var oe=!1,he=!0;Object.keys(L.context).forEach(function(Re){oe=oe||L.context[Re].propDep}),oe||(mr($,q,L.context),he=!1);var te=L.framebuffer,Q=!1;te?(te.propDep?oe=Q=!0:te.contextDep&&oe&&(Q=!0),Q||Br($,q,te)):Br($,q,null),L.state.viewport&&L.state.viewport.propDep&&(oe=!0);function ne(Re){return Re.contextDep&&oe||Re.propDep}qr($,q,L),aa($,q,L.state,function(Re){return!ne(Re)}),(!L.profile||!ne(L.profile))&&Kt($,q,L,!1,"a1"),L.contextDep=oe,L.needsContext=he,L.needsFramebuffer=Q;var B=L.shader.progVar;if(B.contextDep&&oe||B.propDep)as($,q,L,null);else{var Z=B.append($,q);if(q($.shared.gl,".useProgram(",Z,".program);"),L.shader.program)as($,q,L,L.shader.program);else{q($.shared.vao,".setVAO(null);");var G=$.global.def("{}"),se=q.def(Z,".id"),ue=q.def(G,"[",se,"]");q($.cond(ue).then(ue,".call(this,a0,a1);").else(ue,"=",G,"[",se,"]=",$.link(function(Re){return zt(as,$,L,Re,2)}),"(",Z,");",ue,".call(this,a0,a1);"))}}Object.keys(L.state).length>0&&q($.shared.current,".dirty=true;"),$.shared.vao&&q($.shared.vao,".setVAO(null);")}function me($,L){var q=$.proc("scope",3);$.batchId="a2";var oe=$.shared,he=oe.current;mr($,q,L.context),L.framebuffer&&L.framebuffer.append($,q),k3(Object.keys(L.state)).forEach(function(Q){var ne=L.state[Q],B=ne.append($,q);hr(B)?B.forEach(function(Z,G){q.set($.next[Q],"["+G+"]",Z)}):q.set(oe.next,"."+Q,B)}),Kt($,q,L,!0,!0),[Wl,om,Yl,sm,Xl].forEach(function(Q){var ne=L.draw[Q];!ne||q.set(oe.draw,"."+Q,""+ne.append($,q))}),Object.keys(L.uniforms).forEach(function(Q){var ne=L.uniforms[Q].append($,q);Array.isArray(ne)&&(ne="["+ne.join()+"]"),q.set(oe.uniforms,"["+F.id(Q)+"]",ne)}),Object.keys(L.attributes).forEach(function(Q){var ne=L.attributes[Q].append($,q),B=$.scopeAttrib(Q);Object.keys(new ie).forEach(function(Z){q.set(B,"."+Z,ne[Z])})}),L.scopeVAO&&q.set(oe.vao,".targetVAO",L.scopeVAO.append($,q));function te(Q){var ne=L.shader[Q];ne&&q.set(oe.shader,"."+Q,ne.append($,q))}te(id),te(od),Object.keys(L.state).length>0&&(q(he,".dirty=true;"),q.exit(he,".dirty=true;")),q("a1(",$.shared.context,",a0,",$.batchId,");")}function ce($){if(!(typeof $!="object"||hr($))){for(var L=Object.keys($),q=0;q<L.length;++q)if(Bn.isDynamic($[L[q]]))return!0;return!1}}function dt($,L,q){var oe=L.static[q];if(!oe||!ce(oe))return;var he=$.global,te=Object.keys(oe),Q=!1,ne=!1,B=!1,Z=$.global.def("{}");te.forEach(function(se){var ue=oe[se];if(Bn.isDynamic(ue)){typeof ue=="function"&&(ue=oe[se]=Bn.unbox(ue));var Re=Ja(ue,null);Q=Q||Re.thisDep,B=B||Re.propDep,ne=ne||Re.contextDep}else{switch(he(Z,".",se,"="),typeof ue){case"number":he(ue);break;case"string":he('"',ue,'"');break;case"object":Array.isArray(ue)&&he("[",ue.join(),"]");break;default:he($.link(ue));break}he(";")}});function G(se,ue){te.forEach(function(Re){var Ye=oe[Re];if(!!Bn.isDynamic(Ye)){var Ze=se.invoke(ue,Ye);ue(Z,".",Re,"=",Ze,";")}})}L.dynamic[q]=new Bn.DynamicVariable(am,{thisDep:Q,contextDep:ne,propDep:B,ref:Z,append:G}),delete L.static[q]}function sn($,L,q,oe,he){var te=Ut();te.stats=te.link(he),Object.keys(L.static).forEach(function(ne){dt(te,L,ne)}),bz.forEach(function(ne){dt(te,$,ne)});var Q=Pr($,L,q,oe,te);return Ln(te,Q),me(te,Q),W(te,Q),a(te.compile(),{destroy:function(){Q.shader.program.destroy()}})}return{next:rt,current:st,procs:function(){var $=Ut(),L=$.proc("poll"),q=$.proc("refresh"),oe=$.block();L(oe),q(oe);var he=$.shared,te=he.gl,Q=he.next,ne=he.current;oe(ne,".dirty=false;"),Br($,L),Br($,q,null,!0);var B;$e&&(B=$.link($e)),X.oes_vertex_array_object&&q($.link(X.oes_vertex_array_object),".bindVertexArrayOES(null);");for(var Z=0;Z<pe.maxAttributes;++Z){var G=q.def(he.attributes,"[",Z,"]"),se=$.cond(G,".buffer");se.then(te,".enableVertexAttribArray(",Z,");",te,".bindBuffer(",ic,",",G,".buffer.buffer);",te,".vertexAttribPointer(",Z,",",G,".size,",G,".type,",G,".normalized,",G,".stride,",G,".offset);").else(te,".disableVertexAttribArray(",Z,");",te,".vertexAttrib4f(",Z,",",G,".x,",G,".y,",G,".z,",G,".w);",G,".buffer=null;"),q(se),$e&&q(B,".vertexAttribDivisorANGLE(",Z,",",G,".divisor);")}return q($.shared.vao,".currentVAO=null;",$.shared.vao,".setVAO(",$.shared.vao,".targetVAO);"),Object.keys(Te).forEach(function(ue){var Re=Te[ue],Ye=oe.def(Q,".",ue),Ze=$.block();Ze("if(",Ye,"){",te,".enable(",Re,")}else{",te,".disable(",Re,")}",ne,".",ue,"=",Ye,";"),q(Ze),L("if(",Ye,"!==",ne,".",ue,"){",Ze,"}")}),Object.keys(ke).forEach(function(ue){var Re=ke[ue],Ye=st[ue],Ze,it,Xe=$.block();if(Xe(te,".",Re,"("),hr(Ye)){var bt=Ye.length;Ze=$.global.def(Q,".",ue),it=$.global.def(ne,".",ue),Xe(cn(bt,function(ft){return Ze+"["+ft+"]"}),");",cn(bt,function(ft){return it+"["+ft+"]="+Ze+"["+ft+"];"}).join("")),L("if(",cn(bt,function(ft){return Ze+"["+ft+"]!=="+it+"["+ft+"]"}).join("||"),"){",Xe,"}")}else Ze=oe.def(Q,".",ue),it=oe.def(ne,".",ue),Xe(Ze,");",ne,".",ue,"=",Ze,";"),L("if(",Ze,"!==",it,"){",Xe,"}");q(Xe)}),$.compile()}(),compile:sn}}function Dz(){return{vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0}}var Bz=34918,zz=34919,C3=35007,Uz=function(_,F){if(!F.ext_disjoint_timer_query)return null;var X=[];function pe(){return X.pop()||F.ext_disjoint_timer_query.createQueryEXT()}function Se($e){X.push($e)}var de=[];function _e($e){var ct=pe();F.ext_disjoint_timer_query.beginQueryEXT(C3,ct),de.push(ct),Be(de.length-1,de.length,$e)}function Me(){F.ext_disjoint_timer_query.endQueryEXT(C3)}function De(){this.startQueryIndex=-1,this.endQueryIndex=-1,this.sum=0,this.stats=null}var je=[];function He(){return je.pop()||new De}function We($e){je.push($e)}var Ke=[];function Be($e,ct,Pe){var st=He();st.startQueryIndex=$e,st.endQueryIndex=ct,st.sum=0,st.stats=Pe,Ke.push(st)}var Ge=[],ie=[];function be(){var $e,ct,Pe=de.length;if(Pe!==0){ie.length=Math.max(ie.length,Pe+1),Ge.length=Math.max(Ge.length,Pe+1),Ge[0]=0,ie[0]=0;var st=0;for($e=0,ct=0;ct<de.length;++ct){var rt=de[ct];F.ext_disjoint_timer_query.getQueryObjectEXT(rt,zz)?(st+=F.ext_disjoint_timer_query.getQueryObjectEXT(rt,Bz),Se(rt)):de[$e++]=rt,Ge[ct+1]=st,ie[ct+1]=$e}for(de.length=$e,$e=0,ct=0;ct<Ke.length;++ct){var Pt=Ke[ct],Te=Pt.startQueryIndex,ke=Pt.endQueryIndex;Pt.sum+=Ge[ke]-Ge[Te];var mt=ie[Te],Qe=ie[ke];Qe===mt?(Pt.stats.gpuTime+=Pt.sum/1e6,We(Pt)):(Pt.startQueryIndex=mt,Pt.endQueryIndex=Qe,Ke[$e++]=Pt)}Ke.length=$e}}return{beginQuery:_e,endQuery:Me,pushScopeStats:Be,update:be,getNumPendingQueries:function(){return de.length},clear:function(){X.push.apply(X,de);for(var $e=0;$e<X.length;$e++)F.ext_disjoint_timer_query.deleteQueryEXT(X[$e]);de.length=0,X.length=0},restore:function(){de.length=0,X.length=0}}},$z=16384,Vz=256,jz=1024,Gz=34962,T3="webglcontextlost",A3="webglcontextrestored",O3=1,Hz=2,Wz=3;function M3(_,F){for(var X=0;X<_.length;++X)if(_[X]===F)return X;return-1}function Xz(_){var F=qt(_);if(!F)return null;var X=F.gl,pe=X.getContextAttributes(),Se=X.isContextLost(),de=un(X,F);if(!de)return null;var _e=Ba(),Me=Dz(),De=de.extensions,je=Uz(X,De),He=Er(),We=X.drawingBufferWidth,Ke=X.drawingBufferHeight,Be={tick:0,time:0,viewportWidth:We,viewportHeight:Ke,framebufferWidth:We,framebufferHeight:Ke,drawingBufferWidth:We,drawingBufferHeight:Ke,pixelRatio:F.pixelRatio},Ge={},ie={elements:null,primitive:4,count:-1,offset:0,instances:-1},be=N(X,De),$e=ZD(X,Me,F,st),ct=sB(X,De,$e,Me),Pe=sz(X,De,be,Me,$e,ct,ie);function st(zt){return Pe.destroyBuffer(zt)}var rt=fz(X,_e,Me,F),Pt=BB(X,De,be,function(){mt.procs.poll()},Be,Me,F),Te=zB(X,De,be,Me,F),ke=iz(X,De,be,Pt,Te,Me),mt=Fz(X,_e,De,be,$e,ct,Pt,ke,Ge,Pe,rt,ie,Be,je,F),Qe=hz(X,ke,mt.procs.poll,Be,pe,De,be),ze=mt.next,et=X.canvas,nt=[],Ht=[],Ut=[],at=[F.onDestroy],ut=null;function Ft(){if(nt.length===0){je&&je.update(),ut=null;return}ut=ca.next(Ft),gr();for(var zt=nt.length-1;zt>=0;--zt){var rn=nt[zt];rn&&rn(Be,null,0)}X.flush(),je&&je.update()}function Vt(){!ut&&nt.length>0&&(ut=ca.next(Ft))}function an(){ut&&(ca.cancel(Ft),ut=null)}function Kn(zt){zt.preventDefault(),Se=!0,an(),Ht.forEach(function(rn){rn()})}function rr(zt){X.getError(),Se=!1,de.restore(),rt.restore(),$e.restore(),Pt.restore(),Te.restore(),ke.restore(),Pe.restore(),je&&je.restore(),mt.procs.refresh(),Vt(),Ut.forEach(function(rn){rn()})}var on=typeof my!="undefined"&&!!my&&typeof my.showToast=="function"&&my.isFRM!==!0;!on&&et&&(et.addEventListener(T3,Kn,!1),et.addEventListener(A3,rr,!1));function Zr(){nt.length=0,an(),!on&&et&&(et.removeEventListener(T3,Kn),et.removeEventListener(A3,rr)),rt.clear(),ke.clear(),Te.clear(),Pe.clear(),Pt.clear(),ct.clear(),$e.clear(),je&&je.clear(),at.forEach(function(zt){zt()})}function jn(zt){k(!!zt,"invalid args to regl({...})"),k.type(zt,"object","invalid args to regl({...})");function rn(te){var Q=a({},te);delete Q.uniforms,delete Q.attributes,delete Q.context,delete Q.vao,"stencil"in Q&&Q.stencil.op&&(Q.stencil.opBack=Q.stencil.opFront=Q.stencil.op,delete Q.stencil.op);function ne(B){if(B in Q){var Z=Q[B];delete Q[B],Object.keys(Z).forEach(function(G){Q[B+"."+G]=Z[G]})}}return ne("blend"),ne("depth"),ne("cull"),ne("stencil"),ne("polygonOffset"),ne("scissor"),ne("sample"),"vao"in te&&(Q.vao=te.vao),Q}function Ln(te,Q){var ne={},B={};return Object.keys(te).forEach(function(Z){var G=te[Z];if(Bn.isDynamic(G)){B[Z]=Bn.unbox(G,Z);return}else if(Q&&Array.isArray(G)){for(var se=0;se<G.length;++se)if(Bn.isDynamic(G[se])){B[Z]=Bn.unbox(G,Z);return}}ne[Z]=G}),{dynamic:B,static:ne}}var Tr=Ln(zt.context||{},!0),as=Ln(zt.uniforms||{},!0),W=Ln(zt.attributes||{},!1),me=Ln(rn(zt),!1),ce={gpuTime:0,cpuTime:0,count:0},dt=mt.compile(me,W,as,Tr,ce),sn=dt.draw,$=dt.batch,L=dt.scope,q=[];function oe(te){for(;q.length<te;)q.push(null);return q}function he(te,Q){var ne;if(Se&&k.raise("context lost"),typeof te=="function")return L.call(this,null,te,0);if(typeof Q=="function")if(typeof te=="number")for(ne=0;ne<te;++ne)L.call(this,null,Q,ne);else if(Array.isArray(te))for(ne=0;ne<te.length;++ne)L.call(this,te[ne],Q,ne);else return L.call(this,te,Q,0);else if(typeof te=="number"){if(te>0)return $.call(this,oe(te|0),te|0)}else if(Array.isArray(te)){if(te.length)return $.call(this,te,te.length)}else return sn.call(this,te)}return a(he,{stats:ce,destroy:function(){dt.destroy()}})}var Pr=ke.setFBO=jn({framebuffer:Bn.define.call(null,O3,"framebuffer")});function mr(zt,rn){var Ln=0;mt.procs.poll();var Tr=rn.color;Tr&&(X.clearColor(+Tr[0]||0,+Tr[1]||0,+Tr[2]||0,+Tr[3]||0),Ln|=$z),"depth"in rn&&(X.clearDepth(+rn.depth),Ln|=Vz),"stencil"in rn&&(X.clearStencil(rn.stencil|0),Ln|=jz),k(!!Ln,"called regl.clear with no buffer specified"),X.clear(Ln)}function Br(zt){if(k(typeof zt=="object"&&zt,"regl.clear() takes an object as input"),"framebuffer"in zt)if(zt.framebuffer&&zt.framebuffer_reglType==="framebufferCube")for(var rn=0;rn<6;++rn)Pr(a({framebuffer:zt.framebuffer.faces[rn]},zt),mr);else Pr(zt,mr);else mr(null,zt)}function qr(zt){k.type(zt,"function","regl.frame() callback must be a function"),nt.push(zt);function rn(){var Ln=M3(nt,zt);k(Ln>=0,"cannot cancel a frame twice");function Tr(){var as=M3(nt,Tr);nt[as]=nt[nt.length-1],nt.length-=1,nt.length<=0&&an()}nt[Ln]=Tr}return Vt(),{cancel:rn}}function aa(){var zt=ze.viewport,rn=ze.scissor_box;zt[0]=zt[1]=rn[0]=rn[1]=0,Be.viewportWidth=Be.framebufferWidth=Be.drawingBufferWidth=zt[2]=rn[2]=X.drawingBufferWidth,Be.viewportHeight=Be.framebufferHeight=Be.drawingBufferHeight=zt[3]=rn[3]=X.drawingBufferHeight}function gr(){Be.tick+=1,Be.time=Kr(),aa(),mt.procs.poll()}function Kt(){Pt.refresh(),aa(),mt.procs.refresh(),je&&je.update()}function Kr(){return(Er()-He)/1e3}Kt();function Cn(zt,rn){k.type(rn,"function","listener callback must be a function");var Ln;switch(zt){case"frame":return qr(rn);case"lost":Ln=Ht;break;case"restore":Ln=Ut;break;case"destroy":Ln=at;break;default:k.raise("invalid event, must be one of frame,lost,restore,destroy")}return Ln.push(rn),{cancel:function(){for(var Tr=0;Tr<Ln.length;++Tr)if(Ln[Tr]===rn){Ln[Tr]=Ln[Ln.length-1],Ln.pop();return}}}}var zr=a(jn,{clear:Br,prop:Bn.define.bind(null,O3),context:Bn.define.bind(null,Hz),this:Bn.define.bind(null,Wz),draw:jn({}),buffer:function(zt){return $e.create(zt,Gz,!1,!1)},elements:function(zt){return ct.create(zt,!1)},texture:Pt.create2D,cube:Pt.createCube,renderbuffer:Te.create,framebuffer:ke.create,framebufferCube:ke.createCube,vao:Pe.createVAO,attributes:pe,frame:qr,on:Cn,limits:be,hasExtension:function(zt){return be.extensions.indexOf(zt.toLowerCase())>=0},read:Qe,destroy:Zr,_gl:X,_refresh:Kt,poll:function(){gr(),je&&je.update()},now:Kr,stats:Me});return F.onDone(null,zr),zr}return Xz})})(T9);var Sbe=T9.exports,Cbe=function(){function e(t,n){Ae(this,e),m(this,"attribute",void 0),m(this,"buffer",void 0);var r=n.buffer,a=n.offset,i=n.stride,o=n.normalized,s=n.size,l=n.divisor;this.buffer=r,this.attribute={buffer:r.get(),offset:a||0,stride:i||0,normalized:o||!1,divisor:l||0},s&&(this.attribute.size=s)}return Oe(e,[{key:"get",value:function(){return this.attribute}},{key:"updateBuffer",value:function(n){this.buffer.subData(n)}},{key:"destroy",value:function(){this.buffer.destroy()}}]),e}(),us,jd,cs,Di,Gd,qs,Hd,t0,Lo,au,ga,No,Fo,n0,Tbe=(us={},m(us,V.POINTS,"points"),m(us,V.LINES,"lines"),m(us,V.LINE_LOOP,"line loop"),m(us,V.LINE_STRIP,"line strip"),m(us,V.TRIANGLES,"triangles"),m(us,V.TRIANGLE_FAN,"triangle fan"),m(us,V.TRIANGLE_STRIP,"triangle strip"),us),aF=(jd={},m(jd,V.STATIC_DRAW,"static"),m(jd,V.DYNAMIC_DRAW,"dynamic"),m(jd,V.STREAM_DRAW,"stream"),jd),gE=(cs={},m(cs,V.BYTE,"int8"),m(cs,V.UNSIGNED_INT,"int16"),m(cs,V.INT,"int32"),m(cs,V.UNSIGNED_BYTE,"uint8"),m(cs,V.UNSIGNED_SHORT,"uint16"),m(cs,V.UNSIGNED_INT,"uint32"),m(cs,V.FLOAT,"float"),cs),Abe=(Di={},m(Di,V.ALPHA,"alpha"),m(Di,V.LUMINANCE,"luminance"),m(Di,V.LUMINANCE_ALPHA,"luminance alpha"),m(Di,V.RGB,"rgb"),m(Di,V.RGBA,"rgba"),m(Di,V.RGBA4,"rgba4"),m(Di,V.RGB5_A1,"rgb5 a1"),m(Di,V.RGB565,"rgb565"),m(Di,V.DEPTH_COMPONENT,"depth"),m(Di,V.DEPTH_STENCIL,"depth stencil"),Di),Obe=(Gd={},m(Gd,V.DONT_CARE,"dont care"),m(Gd,V.NICEST,"nice"),m(Gd,V.FASTEST,"fast"),Gd),KM=(qs={},m(qs,V.NEAREST,"nearest"),m(qs,V.LINEAR,"linear"),m(qs,V.LINEAR_MIPMAP_LINEAR,"mipmap"),m(qs,V.NEAREST_MIPMAP_LINEAR,"nearest mipmap linear"),m(qs,V.LINEAR_MIPMAP_NEAREST,"linear mipmap nearest"),m(qs,V.NEAREST_MIPMAP_NEAREST,"nearest mipmap nearest"),qs),QM=(Hd={},m(Hd,V.REPEAT,"repeat"),m(Hd,V.CLAMP_TO_EDGE,"clamp"),m(Hd,V.MIRRORED_REPEAT,"mirror"),Hd),Mbe=(t0={},m(t0,V.NONE,"none"),m(t0,V.BROWSER_DEFAULT_WEBGL,"browser"),t0),Rbe=(Lo={},m(Lo,V.NEVER,"never"),m(Lo,V.ALWAYS,"always"),m(Lo,V.LESS,"less"),m(Lo,V.LEQUAL,"lequal"),m(Lo,V.GREATER,"greater"),m(Lo,V.GEQUAL,"gequal"),m(Lo,V.EQUAL,"equal"),m(Lo,V.NOTEQUAL,"notequal"),Lo),JM=(au={},m(au,V.FUNC_ADD,"add"),m(au,V.MIN_EXT,"min"),m(au,V.MAX_EXT,"max"),m(au,V.FUNC_SUBTRACT,"subtract"),m(au,V.FUNC_REVERSE_SUBTRACT,"reverse subtract"),au),r0=(ga={},m(ga,V.ZERO,"zero"),m(ga,V.ONE,"one"),m(ga,V.SRC_COLOR,"src color"),m(ga,V.ONE_MINUS_SRC_COLOR,"one minus src color"),m(ga,V.SRC_ALPHA,"src alpha"),m(ga,V.ONE_MINUS_SRC_ALPHA,"one minus src alpha"),m(ga,V.DST_COLOR,"dst color"),m(ga,V.ONE_MINUS_DST_COLOR,"one minus dst color"),m(ga,V.DST_ALPHA,"dst alpha"),m(ga,V.ONE_MINUS_DST_ALPHA,"one minus dst alpha"),m(ga,V.CONSTANT_COLOR,"constant color"),m(ga,V.ONE_MINUS_CONSTANT_COLOR,"one minus constant color"),m(ga,V.CONSTANT_ALPHA,"constant alpha"),m(ga,V.ONE_MINUS_CONSTANT_ALPHA,"one minus constant alpha"),m(ga,V.SRC_ALPHA_SATURATE,"src alpha saturate"),ga),Pbe=(No={},m(No,V.NEVER,"never"),m(No,V.ALWAYS,"always"),m(No,V.LESS,"less"),m(No,V.LEQUAL,"lequal"),m(No,V.GREATER,"greater"),m(No,V.GEQUAL,"gequal"),m(No,V.EQUAL,"equal"),m(No,V.NOTEQUAL,"notequal"),No),vc=(Fo={},m(Fo,V.ZERO,"zero"),m(Fo,V.KEEP,"keep"),m(Fo,V.REPLACE,"replace"),m(Fo,V.INVERT,"invert"),m(Fo,V.INCR,"increment"),m(Fo,V.DECR,"decrement"),m(Fo,V.INCR_WRAP,"increment wrap"),m(Fo,V.DECR_WRAP,"decrement wrap"),Fo),Ibe=(n0={},m(n0,V.FRONT,"front"),m(n0,V.BACK,"back"),n0),Lbe=function(){function e(t,n){Ae(this,e),m(this,"buffer",void 0);var r=n.data,a=n.usage,i=n.type;this.buffer=t.buffer({data:r,usage:aF[a||V.STATIC_DRAW],type:gE[i||V.UNSIGNED_BYTE]})}return Oe(e,[{key:"get",value:function(){return this.buffer}},{key:"destroy",value:function(){this.buffer.destroy()}},{key:"subData",value:function(n){var r=n.data,a=n.offset;this.buffer.subdata(r,a)}}]),e}(),Nbe=function(){function e(t,n){Ae(this,e),m(this,"elements",void 0);var r=n.data,a=n.usage,i=n.type,o=n.count;this.elements=t.elements({data:r,usage:aF[a||V.STATIC_DRAW],type:gE[i||V.UNSIGNED_BYTE],count:o})}return Oe(e,[{key:"get",value:function(){return this.elements}},{key:"subData",value:function(n){var r=n.data;this.elements.subdata(r)}},{key:"destroy",value:function(){}}]),e}(),Fbe=function(){function e(t,n){Ae(this,e),m(this,"framebuffer",void 0);var r=n.width,a=n.height,i=n.color,o=n.colors;n.depth,n.stencil;var s={width:r,height:a};Array.isArray(o)&&(s.colors=o.map(function(l){return l.get()})),i&&typeof i!="boolean"&&(s.color=i.get()),this.framebuffer=t.framebuffer(s)}return Oe(e,[{key:"get",value:function(){return this.framebuffer}},{key:"destroy",value:function(){this.framebuffer.destroy()}},{key:"resize",value:function(n){var r=n.width,a=n.height;this.framebuffer.resize(r,a)}}]),e}();function eR(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Bi(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?eR(Object(n),!0).forEach(function(r){m(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):eR(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var Dbe=function(){function e(t,n){Ae(this,e),m(this,"reGl",void 0),m(this,"destroyed",!1),m(this,"drawCommand",void 0),m(this,"drawPickCommand",void 0),m(this,"drawParams",void 0),m(this,"options",void 0),m(this,"uniforms",{}),this.reGl=t;var r=n.vs,a=n.fs,i=n.attributes,o=n.uniforms,s=n.primitive,l=n.count,u=n.elements,c=n.depth,f=n.blend,d=n.stencil,p=n.cull,h=n.instances,g={};this.options=n,o&&(this.uniforms=this.extractUniforms(o),Object.keys(o).forEach(function(x){g[x]=t.prop(x)}));var v={};Object.keys(i).forEach(function(x){v[x]=i[x].get()});var b={attributes:v,frag:a,uniforms:g,vert:r,blend:{},primitive:Tbe[s===void 0?V.TRIANGLES:s]};h&&(b.instances=h),l&&(b.count=l),u&&(b.elements=u.get()),this.initDepthDrawParams({depth:c},b),this.initBlendDrawParams({blend:f},b),this.initStencilDrawParams({stencil:d},b),this.initCullDrawParams({cull:p},b),this.drawCommand=t(b);var y=rf(b);y.blend=Bi(Bi({},y.blend),{},{enable:!1}),this.drawPickCommand=t(y),this.drawParams=b}return Oe(e,[{key:"updateAttributesAndElements",value:function(n,r){var a={};Object.keys(n).forEach(function(o){a[o]=n[o].get()}),this.drawParams.attributes=a,this.drawParams.elements=r.get(),this.drawCommand=this.reGl(this.drawParams);var i=rf(this.drawParams);i.blend=Bi(Bi({},i.blend),{},{enable:!1}),this.drawPickCommand=this.reGl(i)}},{key:"updateAttributes",value:function(n){var r={};Object.keys(n).forEach(function(i){r[i]=n[i].get()}),this.drawParams.attributes=r,this.drawCommand=this.reGl(this.drawParams);var a=rf(this.drawParams);a.blend=Bi(Bi({},a.blend),{},{enable:!1}),this.drawPickCommand=this.reGl(a)}},{key:"addUniforms",value:function(n){this.uniforms=Bi(Bi({},this.uniforms),this.extractUniforms(n))}},{key:"draw",value:function(n,r){if(!(this.drawParams.attributes&&Object.keys(this.drawParams.attributes).length===0)){var a=Bi(Bi({},this.uniforms),this.extractUniforms(n.uniforms||{})),i={};Object.keys(a).forEach(function(o){var s=sr(a[o]);s==="boolean"||s==="number"||Array.isArray(a[o])||a[o].BYTES_PER_ELEMENT?i[o]=a[o]:i[o]=a[o].get()}),r?this.drawPickCommand(i):this.drawCommand(i)}}},{key:"destroy",value:function(){this.drawParams.elements.destroy(),this.options.attributes&&Object.values(this.options.attributes).forEach(function(n){n.destroy()}),this.destroyed=!0}},{key:"initDepthDrawParams",value:function(n,r){var a=n.depth;a&&(r.depth={enable:a.enable===void 0?!0:!!a.enable,mask:a.mask===void 0?!0:!!a.mask,func:Rbe[a.func||V.LESS],range:a.range||[0,1]})}},{key:"initBlendDrawParams",value:function(n,r){var a=n.blend;if(a){var i=a.enable,o=a.func,s=a.equation,l=a.color,u=l===void 0?[0,0,0,0]:l;r.blend={enable:!!i,func:{srcRGB:r0[o&&o.srcRGB||V.SRC_ALPHA],srcAlpha:r0[o&&o.srcAlpha||V.SRC_ALPHA],dstRGB:r0[o&&o.dstRGB||V.ONE_MINUS_SRC_ALPHA],dstAlpha:r0[o&&o.dstAlpha||V.ONE_MINUS_SRC_ALPHA]},equation:{rgb:JM[s&&s.rgb||V.FUNC_ADD],alpha:JM[s&&s.alpha||V.FUNC_ADD]},color:u}}}},{key:"initStencilDrawParams",value:function(n,r){var a=n.stencil;if(a){var i=a.enable,o=a.mask,s=o===void 0?-1:o,l=a.func,u=l===void 0?{cmp:V.ALWAYS,ref:0,mask:-1}:l,c=a.opFront,f=c===void 0?{fail:V.KEEP,zfail:V.KEEP,zpass:V.KEEP}:c,d=a.opBack,p=d===void 0?{fail:V.KEEP,zfail:V.KEEP,zpass:V.KEEP}:d;r.stencil={enable:!!i,mask:s,func:Bi(Bi({},u),{},{cmp:Pbe[u.cmp]}),opFront:{fail:vc[f.fail],zfail:vc[f.zfail],zpass:vc[f.zpass]},opBack:{fail:vc[p.fail],zfail:vc[p.zfail],zpass:vc[p.zpass]}}}}},{key:"initCullDrawParams",value:function(n,r){var a=n.cull;if(a){var i=a.enable,o=a.face,s=o===void 0?V.BACK:o;r.cull={enable:!!i,face:Ibe[s]}}}},{key:"extractUniforms",value:function(n){var r=this,a={};return Object.keys(n).forEach(function(i){r.extractUniformsRecursively(i,n[i],a,"")}),a}},{key:"extractUniformsRecursively",value:function(n,r,a,i){var o=this;if(r===null||typeof r=="number"||typeof r=="boolean"||Array.isArray(r)&&typeof r[0]=="number"||_v(r)||r===""||"resize"in r){a["".concat(i&&i+".").concat(n)]=r;return}O7(r)&&Object.keys(r).forEach(function(s){o.extractUniformsRecursively(s,r[s],a,"".concat(i&&i+".").concat(n))}),Array.isArray(r)&&r.forEach(function(s,l){Object.keys(s).forEach(function(u){o.extractUniformsRecursively(u,s[u],a,"".concat(i&&i+".").concat(n,"[").concat(l,"]"))})})}}]),e}(),Bbe=function(){function e(t,n){Ae(this,e),m(this,"texture",void 0),m(this,"width",void 0),m(this,"height",void 0),m(this,"isDistroy",!1);var r=n.data,a=n.type,i=a===void 0?V.UNSIGNED_BYTE:a,o=n.width,s=n.height,l=n.flipY,u=l===void 0?!1:l,c=n.format,f=c===void 0?V.RGBA:c,d=n.mipmap,p=d===void 0?!1:d,h=n.wrapS,g=h===void 0?V.CLAMP_TO_EDGE:h,v=n.wrapT,b=v===void 0?V.CLAMP_TO_EDGE:v,y=n.aniso,x=y===void 0?0:y,E=n.alignment,T=E===void 0?1:E,C=n.premultiplyAlpha,I=C===void 0?!1:C,P=n.mag,j=P===void 0?V.NEAREST:P,A=n.min,S=A===void 0?V.NEAREST:A,M=n.colorSpace,O=M===void 0?V.BROWSER_DEFAULT_WEBGL:M,R=n.x,H=R===void 0?0:R,ee=n.y,re=ee===void 0?0:ee,Y=n.copy,J=Y===void 0?!1:Y;this.width=o,this.height=s;var ae={width:o,height:s,type:gE[i],format:Abe[f],wrapS:QM[g],wrapT:QM[b],mag:KM[j],min:KM[S],alignment:T,flipY:u,colorSpace:Mbe[O],premultiplyAlpha:I,aniso:x,x:H,y:re,copy:J};r&&(ae.data=r),typeof p=="number"?ae.mipmap=Obe[p]:typeof p=="boolean"&&(ae.mipmap=p),this.texture=t.texture(ae)}return Oe(e,[{key:"get",value:function(){return this.texture}},{key:"update",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.texture(n)}},{key:"bind",value:function(){this.texture._texture.bind()}},{key:"resize",value:function(n){var r=n.width,a=n.height;this.texture.resize(r,a),this.width=r,this.height=a}},{key:"destroy",value:function(){if(!this.isDistroy){var n;(n=this.texture)===null||n===void 0||n.destroy()}this.isDistroy=!0}}]),e}(),tR,nR,zbe=(tR=nn(),tR(nR=function(){function e(){var t=this;Ae(this,e),m(this,"extensionObject",void 0),m(this,"gl",void 0),m(this,"$container",void 0),m(this,"canvas",void 0),m(this,"width",void 0),m(this,"height",void 0),m(this,"isDirty",void 0),m(this,"createModel",function(n){return new Dbe(t.gl,n)}),m(this,"createAttribute",function(n){return new Cbe(t.gl,n)}),m(this,"createBuffer",function(n){return new Lbe(t.gl,n)}),m(this,"createElements",function(n){return new Nbe(t.gl,n)}),m(this,"createTexture2D",function(n){return new Bbe(t.gl,n)}),m(this,"createFramebuffer",function(n){return new Fbe(t.gl,n)}),m(this,"useFramebuffer",function(n,r){t.gl({framebuffer:n?n.get():null})(r)}),m(this,"clear",function(n){var r,a=n.color,i=n.depth,o=n.stencil,s=n.framebuffer,l=s===void 0?null:s,u={color:a,depth:i,stencil:o};u.framebuffer=l===null?l:l.get(),(r=t.gl)===null||r===void 0||r.clear(u)}),m(this,"viewport",function(n){var r=n.x,a=n.y,i=n.width,o=n.height;t.gl._gl.viewport(r,a,i,o),t.width=i,t.height=o,t.gl._refresh()}),m(this,"readPixels",function(n){var r=n.framebuffer,a=n.x,i=n.y,o=n.width,s=n.height,l={x:a,y:i,width:o,height:s};return r&&(l.framebuffer=r.get()),t.gl.read(l)}),m(this,"getViewportSize",function(){return{width:t.gl._gl.drawingBufferWidth,height:t.gl._gl.drawingBufferHeight}}),m(this,"getContainer",function(){if(bi)return t.canvas;var n;return(n=t.canvas)===null||n===void 0?void 0:n.parentElement}),m(this,"getCanvas",function(){return t.canvas}),m(this,"getGLContext",function(){return t.gl._gl}),m(this,"destroy",function(){t.canvas=null,t.gl.destroy(),t.gl=null})}return Oe(e,[{key:"init",value:function(){var t=qn(pn.mark(function r(a,i){var o=this;return pn.wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return this.canvas=a,l.next=3,new Promise(function(u,c){Sbe({canvas:o.canvas,attributes:{alpha:!0,antialias:i.antialias,premultipliedAlpha:!0,preserveDrawingBuffer:i.preserveDrawingBuffer,stencil:i.stencil},extensions:["OES_element_index_uint","OES_standard_derivatives","ANGLE_instanced_arrays"],optionalExtensions:["oes_texture_float_linear","OES_texture_float","EXT_texture_filter_anisotropic","EXT_blend_minmax","WEBGL_depth_texture"],profile:!0,onDone:function(d,p){(d||!p)&&c(d),u(p)}})});case 3:this.gl=l.sent,this.extensionObject={OES_texture_float:this.testExtension("OES_texture_float")};case 5:case"end":return l.stop()}},r,this)}));function n(r,a){return t.apply(this,arguments)}return n}()},{key:"getPointSizeRange",value:function(){return this.gl._gl.getParameter(this.gl._gl.ALIASED_POINT_SIZE_RANGE)}},{key:"testExtension",value:function(n){return!!this.getGLContext().getExtension(n)}},{key:"setState",value:function(){this.gl({cull:{enable:!1,face:"back"},viewport:{x:0,y:0,height:this.width,width:this.height},blend:{enable:!0,equation:"add"},framebuffer:null}),this.gl._refresh()}},{key:"setBaseState",value:function(){this.gl({cull:{enable:!1,face:"back"},viewport:{x:0,y:0,height:this.width,width:this.height},blend:{enable:!1,equation:"add"},framebuffer:null}),this.gl._refresh()}},{key:"setCustomLayerDefaults",value:function(){var n=this.getGLContext();n.disable(n.CULL_FACE)}},{key:"setDirty",value:function(n){this.isDirty=n}},{key:"getDirty",value:function(){return this.isDirty}}]),e}())||nR);function rR(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function aR(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?rR(Object(n),!0).forEach(function(r){m(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rR(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var Ube=function(){function e(t){Ae(this,e),m(this,"sceneService",void 0),m(this,"mapService",void 0),m(this,"controlService",void 0),m(this,"layerService",void 0),m(this,"iconService",void 0),m(this,"markerService",void 0),m(this,"popupService",void 0),m(this,"fontService",void 0),m(this,"interactionService",void 0),m(this,"container",void 0);var n=t.id,r=t.map,a=t.canvas,i=t.hasBaseMap,o=Bce();this.container=o,r.setContainer(o,n,a,i),o.bind(ye.IRendererService).to(zbe).inSingletonScope(),this.sceneService=o.get(ye.ISceneService),this.mapService=o.get(ye.IMapService),this.iconService=o.get(ye.IIconService),this.fontService=o.get(ye.IFontService),this.controlService=o.get(ye.IControlService),this.layerService=o.get(ye.ILayerService),this.markerService=o.get(ye.IMarkerService),this.interactionService=o.get(ye.IInteractionService),this.popupService=o.get(ye.IPopupService),bi?this.sceneService.initMiniScene(t):(this.initComponent(n),this.sceneService.init(t),this.initControl())}return Oe(e,[{key:"map",get:function(){return this.mapService.map}},{key:"loaded",get:function(){return this.sceneService.loaded}},{key:"getServiceContainer",value:function(){return this.container}},{key:"getSize",value:function(){return this.mapService.getSize()}},{key:"getMinZoom",value:function(){return this.mapService.getMinZoom()}},{key:"getMaxZoom",value:function(){return this.mapService.getMaxZoom()}},{key:"getType",value:function(){return this.mapService.getType()}},{key:"getMapContainer",value:function(){return this.mapService.getMapContainer()}},{key:"getMapCanvasContainer",value:function(){return this.mapService.getMapCanvasContainer()}},{key:"getMapService",value:function(){return this.mapService}},{key:"exportPng",value:function(n){return this.sceneService.exportPng(n)}},{key:"exportMap",value:function(n){return this.sceneService.exportPng(n)}},{key:"registerRenderService",value:function(n){var r=this;if(this.sceneService.loaded){var a=new n(this);a.init()}else this.on("loaded",function(){var i=new n(r);i.init()})}},{key:"setBgColor",value:function(n){this.mapService.setBgColor(n)}},{key:"addLayer",value:function(n){var r=hw(this.container);n.setContainer(r,this.container),this.sceneService.addLayer(n);var a=n.getLayerConfig();if(a){var i=a.mask,o=a.maskfence,s=a.maskColor,l=s===void 0?"#000":s,u=a.maskOpacity,c=u===void 0?0:u;if(i&&o){var f=new NN().source(o).shape("fill").color(l).style({opacity:c});this.addMask(f,n.id)}}else console.warn("addLayer should run after scene loaded!")}},{key:"addMask",value:function(n,r){var a=this.getLayer(r);if(a){var i=hw(this.container);n.setContainer(i,this.container),a.addMaskLayer(n),this.sceneService.addLayer(n)}else console.warn("parent layer not find!")}},{key:"getPickedLayer",value:function(){return this.layerService.pickedLayerId}},{key:"getLayers",value:function(){return this.layerService.getLayers()}},{key:"getLayer",value:function(n){return this.layerService.getLayer(n)}},{key:"getLayerByName",value:function(n){return this.layerService.getLayerByName(n)}},{key:"removeLayer",value:function(n,r){this.layerService.remove(n,r)}},{key:"removeAllLayer",value:function(){this.layerService.removeAllLayers()}},{key:"render",value:function(){this.sceneService.render()}},{key:"setEnableRender",value:function(n){this.layerService.setEnableRender(n)}},{key:"addIconFont",value:function(n,r){this.fontService.addIconFont(n,r)}},{key:"addIconFonts",value:function(n){var r=this;n.forEach(function(a){var i=Le(a,2),o=i[0],s=i[1];r.fontService.addIconFont(o,s)})}},{key:"addFontFace",value:function(n,r){this.sceneService.addFontFace(n,r)}},{key:"addImage",value:function(n,r){bi?this.iconService.addImageMini(n,r,this.sceneService):this.iconService.addImage(n,r)}},{key:"hasImage",value:function(n){return this.iconService.hasImage(n)}},{key:"removeImage",value:function(n){this.iconService.removeImage(n)}},{key:"addIconFontGlyphs",value:function(n,r){this.fontService.addIconGlyphs(r)}},{key:"addControl",value:function(n){this.controlService.addControl(n,this.container)}},{key:"removeControl",value:function(n){this.controlService.removeControl(n)}},{key:"getControlByName",value:function(n){return this.controlService.getControlByName(n)}},{key:"addMarker",value:function(n){this.markerService.addMarker(n)}},{key:"addMarkerLayer",value:function(n){this.markerService.addMarkerLayer(n)}},{key:"removeMarkerLayer",value:function(n){this.markerService.removeMarkerLayer(n)}},{key:"removeAllMakers",value:function(){this.markerService.removeAllMarkers()}},{key:"addPopup",value:function(n){this.popupService.addPopup(n)}},{key:"on",value:function(n,r){sx.indexOf(n)===-1?this.mapService.on(n,r):this.sceneService.on(n,r)}},{key:"once",value:function(n,r){sx.indexOf(n)===-1?this.mapService.once(n,r):this.sceneService.once(n,r)}},{key:"off",value:function(n,r){sx.indexOf(n)===-1?this.mapService.off(n,r):this.sceneService.off(n,r)}},{key:"getZoom",value:function(){return this.mapService.getZoom()}},{key:"getCenter",value:function(n){return this.mapService.getCenter(n)}},{key:"setCenter",value:function(n,r){return this.mapService.setCenter(n,r)}},{key:"getPitch",value:function(){return this.mapService.getPitch()}},{key:"setPitch",value:function(n){return this.mapService.setPitch(n)}},{key:"getRotation",value:function(){return this.mapService.getRotation()}},{key:"getBounds",value:function(){return this.mapService.getBounds()}},{key:"setRotation",value:function(n){this.mapService.setRotation(n)}},{key:"zoomIn",value:function(){this.mapService.zoomIn()}},{key:"zoomOut",value:function(){this.mapService.zoomOut()}},{key:"panTo",value:function(n){this.mapService.panTo(n)}},{key:"panBy",value:function(n,r){this.mapService.panBy(n,r)}},{key:"getContainer",value:function(){return this.mapService.getContainer()}},{key:"setZoom",value:function(n){this.mapService.setZoom(n)}},{key:"fitBounds",value:function(n,r){var a=this.sceneService.getSceneConfig(),i=a.fitBoundsOptions,o=a.animate;this.mapService.fitBounds(n,r||aR(aR({},i),{},{animate:o}))}},{key:"setZoomAndCenter",value:function(n,r){this.mapService.setZoomAndCenter(n,r)}},{key:"setMapStyle",value:function(n){this.mapService.setMapStyle(n)}},{key:"setMapStatus",value:function(n){this.mapService.setMapStatus(n)}},{key:"pixelToLngLat",value:function(n){return this.mapService.pixelToLngLat(n)}},{key:"lngLatToPixel",value:function(n){return this.mapService.lngLatToPixel(n)}},{key:"containerToLngLat",value:function(n){return this.mapService.containerToLngLat(n)}},{key:"lngLatToContainer",value:function(n){return this.mapService.lngLatToContainer(n)}},{key:"destroy",value:function(){this.sceneService.destroy()}},{key:"registerPostProcessingPass",value:function(n,r){this.container.bind(ye.IPostProcessingPass).to(n).whenTargetNamed(r)}},{key:"enableShaderPick",value:function(){this.layerService.enableShaderPick()}},{key:"diasbleShaderPick",value:function(){this.layerService.disableShaderPick()}},{key:"getPointSizeRange",value:function(){return this.sceneService.getPointSizeRange()}},{key:"initComponent",value:function(n){this.controlService.init({container:Fj(n)},this.container),this.markerService.init(this.container),this.popupService.init(this.container)}},{key:"initControl",value:function(){var n=this.sceneService.getSceneConfig(),r=n.logoVisible,a=n.logoPosition;r&&this.addControl(new Wce({position:a}))}}]),e}(),$be=function(t){return typeof t=="number"};function Vbe(e){var t=w.exports.useRef(e);return t.current=e,t}var jbe=function(t){w.exports.useEffect(function(){t==null||t()},[])},Gbe=jbe;function Hbe(e,t,n){var r=n==null?void 0:n.immediate,a=Vbe(e),i=w.exports.useRef();w.exports.useEffect(function(){if(!(!$be(t)||t<0))return r&&a.current(),i.current=setInterval(function(){a.current()},t),function(){i.current&&clearInterval(i.current)}},[t]);var o=w.exports.useCallback(function(){i.current&&clearInterval(i.current)},[]);return o}var iF=function(){if(typeof Map!="undefined")return Map;function e(t,n){var r=-1;return t.some(function(a,i){return a[0]===n?(r=i,!0):!1}),r}return function(){function t(){this.__entries__=[]}return Object.defineProperty(t.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),t.prototype.get=function(n){var r=e(this.__entries__,n),a=this.__entries__[r];return a&&a[1]},t.prototype.set=function(n,r){var a=e(this.__entries__,n);~a?this.__entries__[a][1]=r:this.__entries__.push([n,r])},t.prototype.delete=function(n){var r=this.__entries__,a=e(r,n);~a&&r.splice(a,1)},t.prototype.has=function(n){return!!~e(this.__entries__,n)},t.prototype.clear=function(){this.__entries__.splice(0)},t.prototype.forEach=function(n,r){r===void 0&&(r=null);for(var a=0,i=this.__entries__;a<i.length;a++){var o=i[a];n.call(r,o[1],o[0])}},t}()}(),Bw=typeof window!="undefined"&&typeof document!="undefined"&&window.document===document,jg=function(){return typeof global!="undefined"&&global.Math===Math?global:typeof self!="undefined"&&self.Math===Math?self:typeof window!="undefined"&&window.Math===Math?window:Function("return this")()}(),Wbe=function(){return typeof requestAnimationFrame=="function"?requestAnimationFrame.bind(jg):function(e){return setTimeout(function(){return e(Date.now())},1e3/60)}}(),Xbe=2;function Ybe(e,t){var n=!1,r=!1,a=0;function i(){n&&(n=!1,e()),r&&s()}function o(){Wbe(i)}function s(){var l=Date.now();if(n){if(l-a<Xbe)return;r=!0}else n=!0,r=!1,setTimeout(o,t);a=l}return s}var Zbe=20,qbe=["top","right","bottom","left","width","height","size","weight"],Kbe=typeof MutationObserver!="undefined",Qbe=function(){function e(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=Ybe(this.refresh.bind(this),Zbe)}return e.prototype.addObserver=function(t){~this.observers_.indexOf(t)||this.observers_.push(t),this.connected_||this.connect_()},e.prototype.removeObserver=function(t){var n=this.observers_,r=n.indexOf(t);~r&&n.splice(r,1),!n.length&&this.connected_&&this.disconnect_()},e.prototype.refresh=function(){var t=this.updateObservers_();t&&this.refresh()},e.prototype.updateObservers_=function(){var t=this.observers_.filter(function(n){return n.gatherActive(),n.hasActive()});return t.forEach(function(n){return n.broadcastActive()}),t.length>0},e.prototype.connect_=function(){!Bw||this.connected_||(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),Kbe?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},e.prototype.disconnect_=function(){!Bw||!this.connected_||(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},e.prototype.onTransitionEnd_=function(t){var n=t.propertyName,r=n===void 0?"":n,a=qbe.some(function(i){return!!~r.indexOf(i)});a&&this.refresh()},e.getInstance=function(){return this.instance_||(this.instance_=new e),this.instance_},e.instance_=null,e}(),oF=function(e,t){for(var n=0,r=Object.keys(t);n<r.length;n++){var a=r[n];Object.defineProperty(e,a,{value:t[a],enumerable:!1,writable:!1,configurable:!0})}return e},Cf=function(e){var t=e&&e.ownerDocument&&e.ownerDocument.defaultView;return t||jg},sF=Hv(0,0,0,0);function Gg(e){return parseFloat(e)||0}function iR(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return t.reduce(function(r,a){var i=e["border-"+a+"-width"];return r+Gg(i)},0)}function Jbe(e){for(var t=["top","right","bottom","left"],n={},r=0,a=t;r<a.length;r++){var i=a[r],o=e["padding-"+i];n[i]=Gg(o)}return n}function eye(e){var t=e.getBBox();return Hv(0,0,t.width,t.height)}function tye(e){var t=e.clientWidth,n=e.clientHeight;if(!t&&!n)return sF;var r=Cf(e).getComputedStyle(e),a=Jbe(r),i=a.left+a.right,o=a.top+a.bottom,s=Gg(r.width),l=Gg(r.height);if(r.boxSizing==="border-box"&&(Math.round(s+i)!==t&&(s-=iR(r,"left","right")+i),Math.round(l+o)!==n&&(l-=iR(r,"top","bottom")+o)),!rye(e)){var u=Math.round(s+i)-t,c=Math.round(l+o)-n;Math.abs(u)!==1&&(s-=u),Math.abs(c)!==1&&(l-=c)}return Hv(a.left,a.top,s,l)}var nye=function(){return typeof SVGGraphicsElement!="undefined"?function(e){return e instanceof Cf(e).SVGGraphicsElement}:function(e){return e instanceof Cf(e).SVGElement&&typeof e.getBBox=="function"}}();function rye(e){return e===Cf(e).document.documentElement}function aye(e){return Bw?nye(e)?eye(e):tye(e):sF}function iye(e){var t=e.x,n=e.y,r=e.width,a=e.height,i=typeof DOMRectReadOnly!="undefined"?DOMRectReadOnly:Object,o=Object.create(i.prototype);return oF(o,{x:t,y:n,width:r,height:a,top:n,right:t+r,bottom:a+n,left:t}),o}function Hv(e,t,n,r){return{x:e,y:t,width:n,height:r}}var oye=function(){function e(t){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=Hv(0,0,0,0),this.target=t}return e.prototype.isActive=function(){var t=aye(this.target);return this.contentRect_=t,t.width!==this.broadcastWidth||t.height!==this.broadcastHeight},e.prototype.broadcastRect=function(){var t=this.contentRect_;return this.broadcastWidth=t.width,this.broadcastHeight=t.height,t},e}(),sye=function(){function e(t,n){var r=iye(n);oF(this,{target:t,contentRect:r})}return e}(),lye=function(){function e(t,n,r){if(this.activeObservations_=[],this.observations_=new iF,typeof t!="function")throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=t,this.controller_=n,this.callbackCtx_=r}return e.prototype.observe=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element=="undefined"||!(Element instanceof Object))){if(!(t instanceof Cf(t).Element))throw new TypeError('parameter 1 is not of type "Element".');var n=this.observations_;n.has(t)||(n.set(t,new oye(t)),this.controller_.addObserver(this),this.controller_.refresh())}},e.prototype.unobserve=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element=="undefined"||!(Element instanceof Object))){if(!(t instanceof Cf(t).Element))throw new TypeError('parameter 1 is not of type "Element".');var n=this.observations_;!n.has(t)||(n.delete(t),n.size||this.controller_.removeObserver(this))}},e.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},e.prototype.gatherActive=function(){var t=this;this.clearActive(),this.observations_.forEach(function(n){n.isActive()&&t.activeObservations_.push(n)})},e.prototype.broadcastActive=function(){if(!!this.hasActive()){var t=this.callbackCtx_,n=this.activeObservations_.map(function(r){return new sye(r.target,r.broadcastRect())});this.callback_.call(t,n,t),this.clearActive()}},e.prototype.clearActive=function(){this.activeObservations_.splice(0)},e.prototype.hasActive=function(){return this.activeObservations_.length>0},e}(),lF=typeof WeakMap!="undefined"?new WeakMap:new iF,uF=function(){function e(t){if(!(this instanceof e))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var n=Qbe.getInstance(),r=new lye(t,n,this);lF.set(this,r)}return e}();["observe","unobserve","disconnect"].forEach(function(e){uF.prototype[e]=function(){var t;return(t=lF.get(this))[e].apply(t,arguments)}});var cF=function(){return typeof jg.ResizeObserver!="undefined"?jg.ResizeObserver:uF}();function xt(){return xt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},xt.apply(this,arguments)}function Dh(e){var t=QI();return function(){var r=Ee(e),a;if(t){var i=Ee(this).constructor;a=Reflect.construct(r,arguments,i)}else a=r.apply(this,arguments);return Mt(this,a)}}var fF={exports:{}};/*!
  Copyright (c) 2018 Jed Watson.
  Licensed under the MIT License (MIT), see
  http://jedwatson.github.io/classnames
*/(function(e){(function(){var t={}.hasOwnProperty;function n(){for(var r=[],a=0;a<arguments.length;a++){var i=arguments[a];if(!!i){var o=typeof i;if(o==="string"||o==="number")r.push(i);else if(Array.isArray(i)){if(i.length){var s=n.apply(null,i);s&&r.push(s)}}else if(o==="object")if(i.toString===Object.prototype.toString)for(var l in i)t.call(i,l)&&i[l]&&r.push(l);else r.push(i.toString())}}return r.join(" ")}e.exports?(n.default=n,e.exports=n):window.classNames=n})()})(fF);var Wt=fF.exports,vE={exports:{}},Xn={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ua=typeof Symbol=="function"&&Symbol.for,bE=ua?Symbol.for("react.element"):60103,yE=ua?Symbol.for("react.portal"):60106,Wv=ua?Symbol.for("react.fragment"):60107,Xv=ua?Symbol.for("react.strict_mode"):60108,Yv=ua?Symbol.for("react.profiler"):60114,Zv=ua?Symbol.for("react.provider"):60109,qv=ua?Symbol.for("react.context"):60110,xE=ua?Symbol.for("react.async_mode"):60111,Kv=ua?Symbol.for("react.concurrent_mode"):60111,Qv=ua?Symbol.for("react.forward_ref"):60112,Jv=ua?Symbol.for("react.suspense"):60113,uye=ua?Symbol.for("react.suspense_list"):60120,eb=ua?Symbol.for("react.memo"):60115,tb=ua?Symbol.for("react.lazy"):60116,cye=ua?Symbol.for("react.block"):60121,fye=ua?Symbol.for("react.fundamental"):60117,dye=ua?Symbol.for("react.responder"):60118,pye=ua?Symbol.for("react.scope"):60119;function Ci(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case bE:switch(e=e.type,e){case xE:case Kv:case Wv:case Yv:case Xv:case Jv:return e;default:switch(e=e&&e.$$typeof,e){case qv:case Qv:case tb:case eb:case Zv:return e;default:return t}}case yE:return t}}}function dF(e){return Ci(e)===Kv}Xn.AsyncMode=xE;Xn.ConcurrentMode=Kv;Xn.ContextConsumer=qv;Xn.ContextProvider=Zv;Xn.Element=bE;Xn.ForwardRef=Qv;Xn.Fragment=Wv;Xn.Lazy=tb;Xn.Memo=eb;Xn.Portal=yE;Xn.Profiler=Yv;Xn.StrictMode=Xv;Xn.Suspense=Jv;Xn.isAsyncMode=function(e){return dF(e)||Ci(e)===xE};Xn.isConcurrentMode=dF;Xn.isContextConsumer=function(e){return Ci(e)===qv};Xn.isContextProvider=function(e){return Ci(e)===Zv};Xn.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===bE};Xn.isForwardRef=function(e){return Ci(e)===Qv};Xn.isFragment=function(e){return Ci(e)===Wv};Xn.isLazy=function(e){return Ci(e)===tb};Xn.isMemo=function(e){return Ci(e)===eb};Xn.isPortal=function(e){return Ci(e)===yE};Xn.isProfiler=function(e){return Ci(e)===Yv};Xn.isStrictMode=function(e){return Ci(e)===Xv};Xn.isSuspense=function(e){return Ci(e)===Jv};Xn.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===Wv||e===Kv||e===Yv||e===Xv||e===Jv||e===uye||typeof e=="object"&&e!==null&&(e.$$typeof===tb||e.$$typeof===eb||e.$$typeof===Zv||e.$$typeof===qv||e.$$typeof===Qv||e.$$typeof===fye||e.$$typeof===dye||e.$$typeof===pye||e.$$typeof===cye)};Xn.typeOf=Ci;vE.exports=Xn;function Tf(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=[];return Lr.Children.forEach(e,function(r){r==null&&!t.keepEmpty||(Array.isArray(r)?n=n.concat(Tf(r)):vE.exports.isFragment(r)&&r.props?n=n.concat(Tf(r.props.children,t)):n.push(r))}),n}var oR={};function hye(e,t){}function mye(e,t,n){!t&&!oR[n]&&(e(!1,n),oR[n]=!0)}function wo(e,t){mye(hye,e,t)}function sR(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function Ne(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?sR(Object(n),!0).forEach(function(r){m(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):sR(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function gye(e,t,n){var r=w.exports.useRef({});return(!("value"in r.current)||n(r.current.condition,t))&&(r.current.value=e(),r.current.condition=t),r.current.value}function pF(e,t){typeof e=="function"?e(t):sr(e)==="object"&&e&&"current"in e&&(e.current=t)}function nb(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t.filter(function(a){return a});return r.length<=1?r[0]:function(a){t.forEach(function(i){pF(i,a)})}}function wE(e){var t,n,r=vE.exports.isMemo(e)?e.type.type:e.type;return!(typeof r=="function"&&!(!((t=r.prototype)===null||t===void 0)&&t.render)||typeof e=="function"&&!(!((n=e.prototype)===null||n===void 0)&&n.render))}function Hg(e){return e instanceof HTMLElement?e:Xp.findDOMNode(e)}var cl=new Map;function vye(e){e.forEach(function(t){var n,r=t.target;(n=cl.get(r))===null||n===void 0||n.forEach(function(a){return a(r)})})}var hF=new cF(vye);function bye(e,t){cl.has(e)||(cl.set(e,new Set),hF.observe(e)),cl.get(e).add(t)}function yye(e,t){cl.has(e)&&(cl.get(e).delete(t),cl.get(e).size||(hF.unobserve(e),cl.delete(e)))}var xye=function(e){Ct(n,e);var t=Dh(n);function n(){return Ae(this,n),t.apply(this,arguments)}return Oe(n,[{key:"render",value:function(){return this.props.children}}]),n}(w.exports.Component),zw=w.exports.createContext(null);function wye(e){var t=e.children,n=e.onBatchResize,r=w.exports.useRef(0),a=w.exports.useRef([]),i=w.exports.useContext(zw),o=w.exports.useCallback(function(s,l,u){r.current+=1;var c=r.current;a.current.push({size:s,element:l,data:u}),Promise.resolve().then(function(){c===r.current&&(n==null||n(a.current),a.current=[])}),i==null||i(s,l,u)},[n,i]);return w.exports.createElement(zw.Provider,{value:o},t)}function _ye(e){var t=e.children,n=e.disabled,r=w.exports.useRef(null),a=w.exports.useRef(null),i=w.exports.useContext(zw),o=typeof t=="function",s=o?t(r):t,l=w.exports.useRef({width:-1,height:-1,offsetWidth:-1,offsetHeight:-1}),u=!o&&w.exports.isValidElement(s)&&wE(s),c=u?s.ref:null,f=w.exports.useMemo(function(){return nb(c,r)},[c,r]),d=w.exports.useRef(e);d.current=e;var p=w.exports.useCallback(function(h){var g=d.current,v=g.onResize,b=g.data,y=h.getBoundingClientRect(),x=y.width,E=y.height,T=h.offsetWidth,C=h.offsetHeight,I=Math.floor(x),P=Math.floor(E);if(l.current.width!==I||l.current.height!==P||l.current.offsetWidth!==T||l.current.offsetHeight!==C){var j={width:I,height:P,offsetWidth:T,offsetHeight:C};l.current=j;var A=T===Math.round(x)?x:T,S=C===Math.round(E)?E:C,M=Ne(Ne({},j),{},{offsetWidth:A,offsetHeight:S});i==null||i(M,h,b),v&&Promise.resolve().then(function(){v(M,h)})}},[]);return w.exports.useEffect(function(){var h=Hg(r.current)||Hg(a.current);return h&&!n&&bye(h,p),function(){return yye(h,p)}},[r.current,n]),w.exports.createElement(xye,{ref:a},u?w.exports.cloneElement(s,{ref:f}):s)}var Eye="rc-observer-key";function mh(e){var t=e.children,n=typeof t=="function"?[t]:Tf(t);return n.map(function(r,a){var i=(r==null?void 0:r.key)||"".concat(Eye,"-").concat(a);return w.exports.createElement(_ye,xt({},e,{key:i}),r)})}mh.Collection=wye;function Hf(e,t){var n=Ne({},e);return Array.isArray(t)&&t.forEach(function(r){delete n[r]}),n}var kye=w.exports.createContext({}),mF=kye,gu="RC_FORM_INTERNAL_HOOKS",Zn=function(){wo(!1,"Can not find FormContext. Please make sure you wrap Field under Form.")},Af=w.exports.createContext({getFieldValue:Zn,getFieldsValue:Zn,getFieldError:Zn,getFieldWarning:Zn,getFieldsError:Zn,isFieldsTouched:Zn,isFieldTouched:Zn,isFieldValidating:Zn,isFieldsValidating:Zn,resetFields:Zn,setFields:Zn,setFieldsValue:Zn,validateFields:Zn,submit:Zn,getInternalHooks:function(){return Zn(),{dispatch:Zn,initEntityValue:Zn,registerField:Zn,useSubscribe:Zn,setInitialValues:Zn,destroyForm:Zn,setCallbacks:Zn,registerWatch:Zn,getFields:Zn,setValidateMessages:Zn,setPreserve:Zn,getInitialValue:Zn}}});function Uw(e){return e==null?[]:Array.isArray(e)?e:[e]}function ko(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */ko=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=typeof Symbol=="function"?Symbol:{},a=r.iterator||"@@iterator",i=r.asyncIterator||"@@asyncIterator",o=r.toStringTag||"@@toStringTag";function s(A,S,M){return Object.defineProperty(A,S,{value:M,enumerable:!0,configurable:!0,writable:!0}),A[S]}try{s({},"")}catch{s=function(M,O,R){return M[O]=R}}function l(A,S,M,O){var R=S&&S.prototype instanceof f?S:f,H=Object.create(R.prototype),ee=new I(O||[]);return H._invoke=function(re,Y,J){var ae="suspendedStart";return function(le,fe){if(ae==="executing")throw new Error("Generator is already running");if(ae==="completed"){if(le==="throw")throw fe;return j()}for(J.method=le,J.arg=fe;;){var ge=J.delegate;if(ge){var we=E(ge,J);if(we){if(we===c)continue;return we}}if(J.method==="next")J.sent=J._sent=J.arg;else if(J.method==="throw"){if(ae==="suspendedStart")throw ae="completed",J.arg;J.dispatchException(J.arg)}else J.method==="return"&&J.abrupt("return",J.arg);ae="executing";var Ve=u(re,Y,J);if(Ve.type==="normal"){if(ae=J.done?"completed":"suspendedYield",Ve.arg===c)continue;return{value:Ve.arg,done:J.done}}Ve.type==="throw"&&(ae="completed",J.method="throw",J.arg=Ve.arg)}}}(A,M,ee),H}function u(A,S,M){try{return{type:"normal",arg:A.call(S,M)}}catch(O){return{type:"throw",arg:O}}}e.wrap=l;var c={};function f(){}function d(){}function p(){}var h={};s(h,a,function(){return this});var g=Object.getPrototypeOf,v=g&&g(g(P([])));v&&v!==t&&n.call(v,a)&&(h=v);var b=p.prototype=f.prototype=Object.create(h);function y(A){["next","throw","return"].forEach(function(S){s(A,S,function(M){return this._invoke(S,M)})})}function x(A,S){function M(R,H,ee,re){var Y=u(A[R],A,H);if(Y.type!=="throw"){var J=Y.arg,ae=J.value;return ae&&sr(ae)=="object"&&n.call(ae,"__await")?S.resolve(ae.__await).then(function(le){M("next",le,ee,re)},function(le){M("throw",le,ee,re)}):S.resolve(ae).then(function(le){J.value=le,ee(J)},function(le){return M("throw",le,ee,re)})}re(Y.arg)}var O;this._invoke=function(R,H){function ee(){return new S(function(re,Y){M(R,H,re,Y)})}return O=O?O.then(ee,ee):ee()}}function E(A,S){var M=A.iterator[S.method];if(M===void 0){if(S.delegate=null,S.method==="throw"){if(A.iterator.return&&(S.method="return",S.arg=void 0,E(A,S),S.method==="throw"))return c;S.method="throw",S.arg=new TypeError("The iterator does not provide a 'throw' method")}return c}var O=u(M,A.iterator,S.arg);if(O.type==="throw")return S.method="throw",S.arg=O.arg,S.delegate=null,c;var R=O.arg;return R?R.done?(S[A.resultName]=R.value,S.next=A.nextLoc,S.method!=="return"&&(S.method="next",S.arg=void 0),S.delegate=null,c):R:(S.method="throw",S.arg=new TypeError("iterator result is not an object"),S.delegate=null,c)}function T(A){var S={tryLoc:A[0]};1 in A&&(S.catchLoc=A[1]),2 in A&&(S.finallyLoc=A[2],S.afterLoc=A[3]),this.tryEntries.push(S)}function C(A){var S=A.completion||{};S.type="normal",delete S.arg,A.completion=S}function I(A){this.tryEntries=[{tryLoc:"root"}],A.forEach(T,this),this.reset(!0)}function P(A){if(A){var S=A[a];if(S)return S.call(A);if(typeof A.next=="function")return A;if(!isNaN(A.length)){var M=-1,O=function R(){for(;++M<A.length;)if(n.call(A,M))return R.value=A[M],R.done=!1,R;return R.value=void 0,R.done=!0,R};return O.next=O}}return{next:j}}function j(){return{value:void 0,done:!0}}return d.prototype=p,s(b,"constructor",p),s(p,"constructor",d),d.displayName=s(p,o,"GeneratorFunction"),e.isGeneratorFunction=function(A){var S=typeof A=="function"&&A.constructor;return!!S&&(S===d||(S.displayName||S.name)==="GeneratorFunction")},e.mark=function(A){return Object.setPrototypeOf?Object.setPrototypeOf(A,p):(A.__proto__=p,s(A,o,"GeneratorFunction")),A.prototype=Object.create(b),A},e.awrap=function(A){return{__await:A}},y(x.prototype),s(x.prototype,i,function(){return this}),e.AsyncIterator=x,e.async=function(A,S,M,O,R){R===void 0&&(R=Promise);var H=new x(l(A,S,M,O),R);return e.isGeneratorFunction(S)?H:H.next().then(function(ee){return ee.done?ee.value:H.next()})},y(b),s(b,o,"Generator"),s(b,a,function(){return this}),s(b,"toString",function(){return"[object Generator]"}),e.keys=function(A){var S=[];for(var M in A)S.push(M);return S.reverse(),function O(){for(;S.length;){var R=S.pop();if(R in A)return O.value=R,O.done=!1,O}return O.done=!0,O}},e.values=P,I.prototype={constructor:I,reset:function(S){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(C),!S)for(var M in this)M.charAt(0)==="t"&&n.call(this,M)&&!isNaN(+M.slice(1))&&(this[M]=void 0)},stop:function(){this.done=!0;var S=this.tryEntries[0].completion;if(S.type==="throw")throw S.arg;return this.rval},dispatchException:function(S){if(this.done)throw S;var M=this;function O(J,ae){return ee.type="throw",ee.arg=S,M.next=J,ae&&(M.method="next",M.arg=void 0),!!ae}for(var R=this.tryEntries.length-1;R>=0;--R){var H=this.tryEntries[R],ee=H.completion;if(H.tryLoc==="root")return O("end");if(H.tryLoc<=this.prev){var re=n.call(H,"catchLoc"),Y=n.call(H,"finallyLoc");if(re&&Y){if(this.prev<H.catchLoc)return O(H.catchLoc,!0);if(this.prev<H.finallyLoc)return O(H.finallyLoc)}else if(re){if(this.prev<H.catchLoc)return O(H.catchLoc,!0)}else{if(!Y)throw new Error("try statement without catch or finally");if(this.prev<H.finallyLoc)return O(H.finallyLoc)}}}},abrupt:function(S,M){for(var O=this.tryEntries.length-1;O>=0;--O){var R=this.tryEntries[O];if(R.tryLoc<=this.prev&&n.call(R,"finallyLoc")&&this.prev<R.finallyLoc){var H=R;break}}H&&(S==="break"||S==="continue")&&H.tryLoc<=M&&M<=H.finallyLoc&&(H=null);var ee=H?H.completion:{};return ee.type=S,ee.arg=M,H?(this.method="next",this.next=H.finallyLoc,c):this.complete(ee)},complete:function(S,M){if(S.type==="throw")throw S.arg;return S.type==="break"||S.type==="continue"?this.next=S.arg:S.type==="return"?(this.rval=this.arg=S.arg,this.method="return",this.next="end"):S.type==="normal"&&M&&(this.next=M),c},finish:function(S){for(var M=this.tryEntries.length-1;M>=0;--M){var O=this.tryEntries[M];if(O.finallyLoc===S)return this.complete(O.completion,O.afterLoc),C(O),c}},catch:function(S){for(var M=this.tryEntries.length-1;M>=0;--M){var O=this.tryEntries[M];if(O.tryLoc===S){var R=O.completion;if(R.type==="throw"){var H=R.arg;C(O)}return H}}throw new Error("illegal catch attempt")},delegateYield:function(S,M,O){return this.delegate={iterator:P(S),resultName:M,nextLoc:O},this.method==="next"&&(this.arg=void 0),c}},e}function vu(){return vu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},vu.apply(this,arguments)}function Sye(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,gh(e,t)}function $w(e){return $w=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},$w(e)}function gh(e,t){return gh=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,a){return r.__proto__=a,r},gh(e,t)}function Cye(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function B0(e,t,n){return Cye()?B0=Reflect.construct.bind():B0=function(a,i,o){var s=[null];s.push.apply(s,i);var l=Function.bind.apply(a,s),u=new l;return o&&gh(u,o.prototype),u},B0.apply(null,arguments)}function Tye(e){return Function.toString.call(e).indexOf("[native code]")!==-1}function Vw(e){var t=typeof Map=="function"?new Map:void 0;return Vw=function(r){if(r===null||!Tye(r))return r;if(typeof r!="function")throw new TypeError("Super expression must either be null or a function");if(typeof t!="undefined"){if(t.has(r))return t.get(r);t.set(r,a)}function a(){return B0(r,arguments,$w(this).constructor)}return a.prototype=Object.create(r.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),gh(a,r)},Vw(e)}var Aye=/%[sdj%]/g,Oye=function(){};typeof process!="undefined"&&process.env;function jw(e){if(!e||!e.length)return null;var t={};return e.forEach(function(n){var r=n.field;t[r]=t[r]||[],t[r].push(n)}),t}function yi(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var a=0,i=n.length;if(typeof e=="function")return e.apply(null,n);if(typeof e=="string"){var o=e.replace(Aye,function(s){if(s==="%%")return"%";if(a>=i)return s;switch(s){case"%s":return String(n[a++]);case"%d":return Number(n[a++]);case"%j":try{return JSON.stringify(n[a++])}catch{return"[Circular]"}break;default:return s}});return o}return e}function Mye(e){return e==="string"||e==="url"||e==="hex"||e==="email"||e==="date"||e==="pattern"}function ta(e,t){return!!(e==null||t==="array"&&Array.isArray(e)&&!e.length||Mye(t)&&typeof e=="string"&&!e)}function Rye(e,t,n){var r=[],a=0,i=e.length;function o(s){r.push.apply(r,s||[]),a++,a===i&&n(r)}e.forEach(function(s){t(s,o)})}function lR(e,t,n){var r=0,a=e.length;function i(o){if(o&&o.length){n(o);return}var s=r;r=r+1,s<a?t(e[s],i):n([])}i([])}function Pye(e){var t=[];return Object.keys(e).forEach(function(n){t.push.apply(t,e[n]||[])}),t}var uR=function(e){Sye(t,e);function t(n,r){var a;return a=e.call(this,"Async Validation Error")||this,a.errors=n,a.fields=r,a}return t}(Vw(Error));function Iye(e,t,n,r,a){if(t.first){var i=new Promise(function(d,p){var h=function(b){return r(b),b.length?p(new uR(b,jw(b))):d(a)},g=Pye(e);lR(g,n,h)});return i.catch(function(d){return d}),i}var o=t.firstFields===!0?Object.keys(e):t.firstFields||[],s=Object.keys(e),l=s.length,u=0,c=[],f=new Promise(function(d,p){var h=function(v){if(c.push.apply(c,v),u++,u===l)return r(c),c.length?p(new uR(c,jw(c))):d(a)};s.length||(r(c),d(a)),s.forEach(function(g){var v=e[g];o.indexOf(g)!==-1?lR(v,n,h):Rye(v,n,h)})});return f.catch(function(d){return d}),f}function Lye(e){return!!(e&&e.message!==void 0)}function Nye(e,t){for(var n=e,r=0;r<t.length;r++){if(n==null)return n;n=n[t[r]]}return n}function cR(e,t){return function(n){var r;return e.fullFields?r=Nye(t,e.fullFields):r=t[n.field||e.fullField],Lye(n)?(n.field=n.field||e.fullField,n.fieldValue=r,n):{message:typeof n=="function"?n():n,fieldValue:r,field:n.field||e.fullField}}}function fR(e,t){if(t){for(var n in t)if(t.hasOwnProperty(n)){var r=t[n];typeof r=="object"&&typeof e[n]=="object"?e[n]=vu({},e[n],r):e[n]=r}}return e}var gF=function(t,n,r,a,i,o){t.required&&(!r.hasOwnProperty(t.field)||ta(n,o||t.type))&&a.push(yi(i.messages.required,t.fullField))},Fye=function(t,n,r,a,i){(/^\s+$/.test(n)||n==="")&&a.push(yi(i.messages.whitespace,t.fullField))},a0,Dye=function(){if(a0)return a0;var e="[a-fA-F\\d:]",t=function(E){return E&&E.includeBoundaries?"(?:(?<=\\s|^)(?="+e+")|(?<="+e+")(?=\\s|$))":""},n="(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}",r="[a-fA-F\\d]{1,4}",a=(`
(?:
(?:`+r+":){7}(?:"+r+`|:)|                                    // 1:2:3:4:5:6:7::  1:2:3:4:5:6:7:8
(?:`+r+":){6}(?:"+n+"|:"+r+`|:)|                             // 1:2:3:4:5:6::    1:2:3:4:5:6::8   1:2:3:4:5:6::8  1:2:3:4:5:6::1.2.3.4
(?:`+r+":){5}(?::"+n+"|(?::"+r+`){1,2}|:)|                   // 1:2:3:4:5::      1:2:3:4:5::7:8   1:2:3:4:5::8    1:2:3:4:5::7:1.2.3.4
(?:`+r+":){4}(?:(?::"+r+"){0,1}:"+n+"|(?::"+r+`){1,3}|:)| // 1:2:3:4::        1:2:3:4::6:7:8   1:2:3:4::8      1:2:3:4::6:7:1.2.3.4
(?:`+r+":){3}(?:(?::"+r+"){0,2}:"+n+"|(?::"+r+`){1,4}|:)| // 1:2:3::          1:2:3::5:6:7:8   1:2:3::8        1:2:3::5:6:7:1.2.3.4
(?:`+r+":){2}(?:(?::"+r+"){0,3}:"+n+"|(?::"+r+`){1,5}|:)| // 1:2::            1:2::4:5:6:7:8   1:2::8          1:2::4:5:6:7:1.2.3.4
(?:`+r+":){1}(?:(?::"+r+"){0,4}:"+n+"|(?::"+r+`){1,6}|:)| // 1::              1::3:4:5:6:7:8   1::8            1::3:4:5:6:7:1.2.3.4
(?::(?:(?::`+r+"){0,5}:"+n+"|(?::"+r+`){1,7}|:))             // ::2:3:4:5:6:7:8  ::2:3:4:5:6:7:8  ::8             ::1.2.3.4
)(?:%[0-9a-zA-Z]{1,})?                                             // %eth0            %1
`).replace(/\s*\/\/.*$/gm,"").replace(/\n/g,"").trim(),i=new RegExp("(?:^"+n+"$)|(?:^"+a+"$)"),o=new RegExp("^"+n+"$"),s=new RegExp("^"+a+"$"),l=function(E){return E&&E.exact?i:new RegExp("(?:"+t(E)+n+t(E)+")|(?:"+t(E)+a+t(E)+")","g")};l.v4=function(x){return x&&x.exact?o:new RegExp(""+t(x)+n+t(x),"g")},l.v6=function(x){return x&&x.exact?s:new RegExp(""+t(x)+a+t(x),"g")};var u="(?:(?:[a-z]+:)?//)",c="(?:\\S+(?::\\S*)?@)?",f=l.v4().source,d=l.v6().source,p="(?:(?:[a-z\\u00a1-\\uffff0-9][-_]*)*[a-z\\u00a1-\\uffff0-9]+)",h="(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*",g="(?:\\.(?:[a-z\\u00a1-\\uffff]{2,}))",v="(?::\\d{2,5})?",b='(?:[/?#][^\\s"]*)?',y="(?:"+u+"|www\\.)"+c+"(?:localhost|"+f+"|"+d+"|"+p+h+g+")"+v+b;return a0=new RegExp("(?:^"+y+"$)","i"),a0},dR={email:/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+\.)+[a-zA-Z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]{2,}))$/,hex:/^#?([a-f0-9]{6}|[a-f0-9]{3})$/i},sp={integer:function(t){return sp.number(t)&&parseInt(t,10)===t},float:function(t){return sp.number(t)&&!sp.integer(t)},array:function(t){return Array.isArray(t)},regexp:function(t){if(t instanceof RegExp)return!0;try{return!!new RegExp(t)}catch{return!1}},date:function(t){return typeof t.getTime=="function"&&typeof t.getMonth=="function"&&typeof t.getYear=="function"&&!isNaN(t.getTime())},number:function(t){return isNaN(t)?!1:typeof t=="number"},object:function(t){return typeof t=="object"&&!sp.array(t)},method:function(t){return typeof t=="function"},email:function(t){return typeof t=="string"&&t.length<=320&&!!t.match(dR.email)},url:function(t){return typeof t=="string"&&t.length<=2048&&!!t.match(Dye())},hex:function(t){return typeof t=="string"&&!!t.match(dR.hex)}},Bye=function(t,n,r,a,i){if(t.required&&n===void 0){gF(t,n,r,a,i);return}var o=["integer","float","array","regexp","object","method","email","number","date","url","hex"],s=t.type;o.indexOf(s)>-1?sp[s](n)||a.push(yi(i.messages.types[s],t.fullField,t.type)):s&&typeof n!==t.type&&a.push(yi(i.messages.types[s],t.fullField,t.type))},zye=function(t,n,r,a,i){var o=typeof t.len=="number",s=typeof t.min=="number",l=typeof t.max=="number",u=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,c=n,f=null,d=typeof n=="number",p=typeof n=="string",h=Array.isArray(n);if(d?f="number":p?f="string":h&&(f="array"),!f)return!1;h&&(c=n.length),p&&(c=n.replace(u,"_").length),o?c!==t.len&&a.push(yi(i.messages[f].len,t.fullField,t.len)):s&&!l&&c<t.min?a.push(yi(i.messages[f].min,t.fullField,t.min)):l&&!s&&c>t.max?a.push(yi(i.messages[f].max,t.fullField,t.max)):s&&l&&(c<t.min||c>t.max)&&a.push(yi(i.messages[f].range,t.fullField,t.min,t.max))},bc="enum",Uye=function(t,n,r,a,i){t[bc]=Array.isArray(t[bc])?t[bc]:[],t[bc].indexOf(n)===-1&&a.push(yi(i.messages[bc],t.fullField,t[bc].join(", ")))},$ye=function(t,n,r,a,i){if(t.pattern){if(t.pattern instanceof RegExp)t.pattern.lastIndex=0,t.pattern.test(n)||a.push(yi(i.messages.pattern.mismatch,t.fullField,n,t.pattern));else if(typeof t.pattern=="string"){var o=new RegExp(t.pattern);o.test(n)||a.push(yi(i.messages.pattern.mismatch,t.fullField,n,t.pattern))}}},_n={required:gF,whitespace:Fye,type:Bye,range:zye,enum:Uye,pattern:$ye},Vye=function(t,n,r,a,i){var o=[],s=t.required||!t.required&&a.hasOwnProperty(t.field);if(s){if(ta(n,"string")&&!t.required)return r();_n.required(t,n,a,o,i,"string"),ta(n,"string")||(_n.type(t,n,a,o,i),_n.range(t,n,a,o,i),_n.pattern(t,n,a,o,i),t.whitespace===!0&&_n.whitespace(t,n,a,o,i))}r(o)},jye=function(t,n,r,a,i){var o=[],s=t.required||!t.required&&a.hasOwnProperty(t.field);if(s){if(ta(n)&&!t.required)return r();_n.required(t,n,a,o,i),n!==void 0&&_n.type(t,n,a,o,i)}r(o)},Gye=function(t,n,r,a,i){var o=[],s=t.required||!t.required&&a.hasOwnProperty(t.field);if(s){if(n===""&&(n=void 0),ta(n)&&!t.required)return r();_n.required(t,n,a,o,i),n!==void 0&&(_n.type(t,n,a,o,i),_n.range(t,n,a,o,i))}r(o)},Hye=function(t,n,r,a,i){var o=[],s=t.required||!t.required&&a.hasOwnProperty(t.field);if(s){if(ta(n)&&!t.required)return r();_n.required(t,n,a,o,i),n!==void 0&&_n.type(t,n,a,o,i)}r(o)},Wye=function(t,n,r,a,i){var o=[],s=t.required||!t.required&&a.hasOwnProperty(t.field);if(s){if(ta(n)&&!t.required)return r();_n.required(t,n,a,o,i),ta(n)||_n.type(t,n,a,o,i)}r(o)},Xye=function(t,n,r,a,i){var o=[],s=t.required||!t.required&&a.hasOwnProperty(t.field);if(s){if(ta(n)&&!t.required)return r();_n.required(t,n,a,o,i),n!==void 0&&(_n.type(t,n,a,o,i),_n.range(t,n,a,o,i))}r(o)},Yye=function(t,n,r,a,i){var o=[],s=t.required||!t.required&&a.hasOwnProperty(t.field);if(s){if(ta(n)&&!t.required)return r();_n.required(t,n,a,o,i),n!==void 0&&(_n.type(t,n,a,o,i),_n.range(t,n,a,o,i))}r(o)},Zye=function(t,n,r,a,i){var o=[],s=t.required||!t.required&&a.hasOwnProperty(t.field);if(s){if(n==null&&!t.required)return r();_n.required(t,n,a,o,i,"array"),n!=null&&(_n.type(t,n,a,o,i),_n.range(t,n,a,o,i))}r(o)},qye=function(t,n,r,a,i){var o=[],s=t.required||!t.required&&a.hasOwnProperty(t.field);if(s){if(ta(n)&&!t.required)return r();_n.required(t,n,a,o,i),n!==void 0&&_n.type(t,n,a,o,i)}r(o)},Kye="enum",Qye=function(t,n,r,a,i){var o=[],s=t.required||!t.required&&a.hasOwnProperty(t.field);if(s){if(ta(n)&&!t.required)return r();_n.required(t,n,a,o,i),n!==void 0&&_n[Kye](t,n,a,o,i)}r(o)},Jye=function(t,n,r,a,i){var o=[],s=t.required||!t.required&&a.hasOwnProperty(t.field);if(s){if(ta(n,"string")&&!t.required)return r();_n.required(t,n,a,o,i),ta(n,"string")||_n.pattern(t,n,a,o,i)}r(o)},exe=function(t,n,r,a,i){var o=[],s=t.required||!t.required&&a.hasOwnProperty(t.field);if(s){if(ta(n,"date")&&!t.required)return r();if(_n.required(t,n,a,o,i),!ta(n,"date")){var l;n instanceof Date?l=n:l=new Date(n),_n.type(t,l,a,o,i),l&&_n.range(t,l.getTime(),a,o,i)}}r(o)},txe=function(t,n,r,a,i){var o=[],s=Array.isArray(n)?"array":typeof n;_n.required(t,n,a,o,i,s),r(o)},Px=function(t,n,r,a,i){var o=t.type,s=[],l=t.required||!t.required&&a.hasOwnProperty(t.field);if(l){if(ta(n,o)&&!t.required)return r();_n.required(t,n,a,s,i,o),ta(n,o)||_n.type(t,n,a,s,i)}r(s)},nxe=function(t,n,r,a,i){var o=[],s=t.required||!t.required&&a.hasOwnProperty(t.field);if(s){if(ta(n)&&!t.required)return r();_n.required(t,n,a,o,i)}r(o)},Sp={string:Vye,method:jye,number:Gye,boolean:Hye,regexp:Wye,integer:Xye,float:Yye,array:Zye,object:qye,enum:Qye,pattern:Jye,date:exe,url:Px,hex:Px,email:Px,required:txe,any:nxe};function Gw(){return{default:"Validation error on field %s",required:"%s is required",enum:"%s must be one of %s",whitespace:"%s cannot be empty",date:{format:"%s date %s is invalid for format %s",parse:"%s date could not be parsed, %s is invalid ",invalid:"%s date %s is invalid"},types:{string:"%s is not a %s",method:"%s is not a %s (function)",array:"%s is not an %s",object:"%s is not an %s",number:"%s is not a %s",date:"%s is not a %s",boolean:"%s is not a %s",integer:"%s is not an %s",float:"%s is not a %s",regexp:"%s is not a valid %s",email:"%s is not a valid %s",url:"%s is not a valid %s",hex:"%s is not a valid %s"},string:{len:"%s must be exactly %s characters",min:"%s must be at least %s characters",max:"%s cannot be longer than %s characters",range:"%s must be between %s and %s characters"},number:{len:"%s must equal %s",min:"%s cannot be less than %s",max:"%s cannot be greater than %s",range:"%s must be between %s and %s"},array:{len:"%s must be exactly %s in length",min:"%s cannot be less than %s in length",max:"%s cannot be greater than %s in length",range:"%s must be between %s and %s in length"},pattern:{mismatch:"%s value %s does not match pattern %s"},clone:function(){var t=JSON.parse(JSON.stringify(this));return t.clone=this.clone,t}}}var Hw=Gw(),Bh=function(){function e(n){this.rules=null,this._messages=Hw,this.define(n)}var t=e.prototype;return t.define=function(r){var a=this;if(!r)throw new Error("Cannot configure a schema with no rules");if(typeof r!="object"||Array.isArray(r))throw new Error("Rules must be an object");this.rules={},Object.keys(r).forEach(function(i){var o=r[i];a.rules[i]=Array.isArray(o)?o:[o]})},t.messages=function(r){return r&&(this._messages=fR(Gw(),r)),this._messages},t.validate=function(r,a,i){var o=this;a===void 0&&(a={}),i===void 0&&(i=function(){});var s=r,l=a,u=i;if(typeof l=="function"&&(u=l,l={}),!this.rules||Object.keys(this.rules).length===0)return u&&u(null,s),Promise.resolve(s);function c(g){var v=[],b={};function y(E){if(Array.isArray(E)){var T;v=(T=v).concat.apply(T,E)}else v.push(E)}for(var x=0;x<g.length;x++)y(g[x]);v.length?(b=jw(v),u(v,b)):u(null,s)}if(l.messages){var f=this.messages();f===Hw&&(f=Gw()),fR(f,l.messages),l.messages=f}else l.messages=this.messages();var d={},p=l.keys||Object.keys(this.rules);p.forEach(function(g){var v=o.rules[g],b=s[g];v.forEach(function(y){var x=y;typeof x.transform=="function"&&(s===r&&(s=vu({},s)),b=s[g]=x.transform(b)),typeof x=="function"?x={validator:x}:x=vu({},x),x.validator=o.getValidationMethod(x),x.validator&&(x.field=g,x.fullField=x.fullField||g,x.type=o.getType(x),d[g]=d[g]||[],d[g].push({rule:x,value:b,source:s,field:g}))})});var h={};return Iye(d,l,function(g,v){var b=g.rule,y=(b.type==="object"||b.type==="array")&&(typeof b.fields=="object"||typeof b.defaultField=="object");y=y&&(b.required||!b.required&&g.value),b.field=g.field;function x(C,I){return vu({},I,{fullField:b.fullField+"."+C,fullFields:b.fullFields?[].concat(b.fullFields,[C]):[C]})}function E(C){C===void 0&&(C=[]);var I=Array.isArray(C)?C:[C];!l.suppressWarning&&I.length&&e.warning("async-validator:",I),I.length&&b.message!==void 0&&(I=[].concat(b.message));var P=I.map(cR(b,s));if(l.first&&P.length)return h[b.field]=1,v(P);if(!y)v(P);else{if(b.required&&!g.value)return b.message!==void 0?P=[].concat(b.message).map(cR(b,s)):l.error&&(P=[l.error(b,yi(l.messages.required,b.field))]),v(P);var j={};b.defaultField&&Object.keys(g.value).map(function(M){j[M]=b.defaultField}),j=vu({},j,g.rule.fields);var A={};Object.keys(j).forEach(function(M){var O=j[M],R=Array.isArray(O)?O:[O];A[M]=R.map(x.bind(null,M))});var S=new e(A);S.messages(l.messages),g.rule.options&&(g.rule.options.messages=l.messages,g.rule.options.error=l.error),S.validate(g.value,g.rule.options||l,function(M){var O=[];P&&P.length&&O.push.apply(O,P),M&&M.length&&O.push.apply(O,M),v(O.length?O:null)})}}var T;if(b.asyncValidator)T=b.asyncValidator(b,g.value,E,g.source,l);else if(b.validator){try{T=b.validator(b,g.value,E,g.source,l)}catch(C){console.error==null||console.error(C),l.suppressValidatorError||setTimeout(function(){throw C},0),E(C.message)}T===!0?E():T===!1?E(typeof b.message=="function"?b.message(b.fullField||b.field):b.message||(b.fullField||b.field)+" fails"):T instanceof Array?E(T):T instanceof Error&&E(T.message)}T&&T.then&&T.then(function(){return E()},function(C){return E(C)})},function(g){c(g)},s)},t.getType=function(r){if(r.type===void 0&&r.pattern instanceof RegExp&&(r.type="pattern"),typeof r.validator!="function"&&r.type&&!Sp.hasOwnProperty(r.type))throw new Error(yi("Unknown rule type %s",r.type));return r.type||"string"},t.getValidationMethod=function(r){if(typeof r.validator=="function")return r.validator;var a=Object.keys(r),i=a.indexOf("message");return i!==-1&&a.splice(i,1),a.length===1&&a[0]==="required"?Sp.required:Sp[this.getType(r)]||void 0},e}();Bh.register=function(t,n){if(typeof n!="function")throw new Error("Cannot register a validator by type, validator is not a function");Sp[t]=n};Bh.warning=Oye;Bh.messages=Hw;Bh.validators=Sp;var pi="'${name}' is not a valid ${type}",vF={default:"Validation error on field '${name}'",required:"'${name}' is required",enum:"'${name}' must be one of [${enum}]",whitespace:"'${name}' cannot be empty",date:{format:"'${name}' is invalid for format date",parse:"'${name}' could not be parsed as date",invalid:"'${name}' is invalid date"},types:{string:pi,method:pi,array:pi,object:pi,number:pi,date:pi,boolean:pi,integer:pi,float:pi,regexp:pi,email:pi,url:pi,hex:pi},string:{len:"'${name}' must be exactly ${len} characters",min:"'${name}' must be at least ${min} characters",max:"'${name}' cannot be longer than ${max} characters",range:"'${name}' must be between ${min} and ${max} characters"},number:{len:"'${name}' must equal ${len}",min:"'${name}' cannot be less than ${min}",max:"'${name}' cannot be greater than ${max}",range:"'${name}' must be between ${min} and ${max}"},array:{len:"'${name}' must be exactly ${len} in length",min:"'${name}' cannot be less than ${min} in length",max:"'${name}' cannot be greater than ${max} in length",range:"'${name}' must be between ${min} and ${max} in length"},pattern:{mismatch:"'${name}' does not match pattern ${pattern}"}};function bF(e,t){for(var n=e,r=0;r<t.length;r+=1){if(n==null)return;n=n[t[r]]}return n}function rxe(e){return NI(e)||RI(e)||i2(e)||FI()}function yF(e,t,n,r){if(!t.length)return n;var a=rxe(t),i=a[0],o=a.slice(1),s;return!e&&typeof i=="number"?s=[]:Array.isArray(e)?s=Ue(e):s=Ne({},e),r&&n===void 0&&o.length===1?delete s[i][o[0]]:s[i]=yF(s[i],o,n,r),s}function axe(e,t,n){var r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;return t.length&&r&&n===void 0&&!bF(e,t.slice(0,-1))?e:yF(e,t,n,r)}function rb(e){return Array.isArray(e)?oxe(e):sr(e)==="object"&&e!==null?ixe(e):e}function ixe(e){if(Object.getPrototypeOf(e)===Object.prototype){var t={};for(var n in e)t[n]=rb(e[n]);return t}return e}function oxe(e){return e.map(function(t){return rb(t)})}function Ir(e){return Uw(e)}function fl(e,t){var n=bF(e,t);return n}function Ks(e,t,n){var r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,a=axe(e,t,n,r);return a}function pR(e,t){var n={};return t.forEach(function(r){var a=fl(e,r);n=Ks(n,r,a)}),n}function Cp(e,t){return e&&e.some(function(n){return wF(n,t)})}function hR(e){return sr(e)==="object"&&e!==null&&Object.getPrototypeOf(e)===Object.prototype}function xF(e,t){var n=Array.isArray(e)?Ue(e):Ne({},e);return t&&Object.keys(t).forEach(function(r){var a=n[r],i=t[r],o=hR(a)&&hR(i);n[r]=o?xF(a,i||{}):rb(i)}),n}function z0(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return n.reduce(function(a,i){return xF(a,i)},e)}function wF(e,t){return!e||!t||e.length!==t.length?!1:e.every(function(n,r){return t[r]===n})}function sxe(e,t){if(e===t)return!0;if(!e&&t||e&&!t||!e||!t||sr(e)!=="object"||sr(t)!=="object")return!1;var n=Object.keys(e),r=Object.keys(t),a=new Set([].concat(Ue(n),Ue(r)));return Ue(a).every(function(i){var o=e[i],s=t[i];return typeof o=="function"&&typeof s=="function"?!0:o===s})}function lxe(e){var t=arguments.length<=1?void 0:arguments[1];return t&&t.target&&sr(t.target)==="object"&&e in t.target?t.target[e]:t}function mR(e,t,n){var r=e.length;if(t<0||t>=r||n<0||n>=r)return e;var a=e[t],i=t-n;return i>0?[].concat(Ue(e.slice(0,n)),[a],Ue(e.slice(n,t)),Ue(e.slice(t+1,r))):i<0?[].concat(Ue(e.slice(0,t)),Ue(e.slice(t+1,n+1)),[a],Ue(e.slice(n+1,r))):e}var uxe=Bh;function cxe(e,t){return e.replace(/\$\{\w+\}/g,function(n){var r=n.slice(2,-1);return t[r]})}var gR="CODE_LOGIC_ERROR";function Ww(e,t,n,r,a){return Xw.apply(this,arguments)}function Xw(){return Xw=qn(ko().mark(function e(t,n,r,a,i){var o,s,l,u,c,f,d,p,h;return ko().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return o=Ne({},r),delete o.ruleIndex,o.validator&&(s=o.validator,o.validator=function(){try{return s.apply(void 0,arguments)}catch(b){return console.error(b),Promise.reject(gR)}}),l=null,o&&o.type==="array"&&o.defaultField&&(l=o.defaultField,delete o.defaultField),u=new uxe(m({},t,[o])),c=z0({},vF,a.validateMessages),u.messages(c),f=[],v.prev=9,v.next=12,Promise.resolve(u.validate(m({},t,n),Ne({},a)));case 12:v.next=17;break;case 14:v.prev=14,v.t0=v.catch(9),v.t0.errors&&(f=v.t0.errors.map(function(b,y){var x=b.message,E=x===gR?c.default:x;return w.exports.isValidElement(E)?w.exports.cloneElement(E,{key:"error_".concat(y)}):E}));case 17:if(!(!f.length&&l)){v.next=22;break}return v.next=20,Promise.all(n.map(function(b,y){return Ww("".concat(t,".").concat(y),b,l,a,i)}));case 20:return d=v.sent,v.abrupt("return",d.reduce(function(b,y){return[].concat(Ue(b),Ue(y))},[]));case 22:return p=Ne(Ne({},r),{},{name:t,enum:(r.enum||[]).join(", ")},i),h=f.map(function(b){return typeof b=="string"?cxe(b,p):b}),v.abrupt("return",h);case 25:case"end":return v.stop()}},e,null,[[9,14]])})),Xw.apply(this,arguments)}function fxe(e,t,n,r,a,i){var o=e.join("."),s=n.map(function(c,f){var d=c.validator,p=Ne(Ne({},c),{},{ruleIndex:f});return d&&(p.validator=function(h,g,v){var b=!1,y=function(){for(var T=arguments.length,C=new Array(T),I=0;I<T;I++)C[I]=arguments[I];Promise.resolve().then(function(){wo(!b,"Your validator function has already return a promise. `callback` will be ignored."),b||v.apply(void 0,C)})},x=d(h,g,y);b=x&&typeof x.then=="function"&&typeof x.catch=="function",wo(b,"`callback` is deprecated. Please return a promise instead."),b&&x.then(function(){v()}).catch(function(E){v(E||" ")})}),p}).sort(function(c,f){var d=c.warningOnly,p=c.ruleIndex,h=f.warningOnly,g=f.ruleIndex;return!!d==!!h?p-g:d?1:-1}),l;if(a===!0)l=new Promise(function(){var c=qn(ko().mark(function f(d,p){var h,g,v;return ko().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:h=0;case 1:if(!(h<s.length)){y.next=12;break}return g=s[h],y.next=5,Ww(o,t,g,r,i);case 5:if(v=y.sent,!v.length){y.next=9;break}return p([{errors:v,rule:g}]),y.abrupt("return");case 9:h+=1,y.next=1;break;case 12:d([]);case 13:case"end":return y.stop()}},f)}));return function(f,d){return c.apply(this,arguments)}}());else{var u=s.map(function(c){return Ww(o,t,c,r,i).then(function(f){return{errors:f,rule:c}})});l=(a?pxe(u):dxe(u)).then(function(c){return Promise.reject(c)})}return l.catch(function(c){return c}),l}function dxe(e){return Yw.apply(this,arguments)}function Yw(){return Yw=qn(ko().mark(function e(t){return ko().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",Promise.all(t).then(function(a){var i,o=(i=[]).concat.apply(i,Ue(a));return o}));case 1:case"end":return r.stop()}},e)})),Yw.apply(this,arguments)}function pxe(e){return Zw.apply(this,arguments)}function Zw(){return Zw=qn(ko().mark(function e(t){var n;return ko().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return n=0,a.abrupt("return",new Promise(function(i){t.forEach(function(o){o.then(function(s){s.errors.length&&i([s]),n+=1,n===t.length&&i([])})})}));case 2:case"end":return a.stop()}},e)})),Zw.apply(this,arguments)}var hxe=["name"],zi=[];function vR(e,t,n,r,a,i){return typeof e=="function"?e(t,n,"source"in i?{source:i.source}:{}):r!==a}var _E=function(e){Ct(n,e);var t=Dh(n);function n(r){var a;if(Ae(this,n),a=t.call(this,r),a.state={resetCount:0},a.cancelRegisterFunc=null,a.mounted=!1,a.touched=!1,a.dirty=!1,a.validatePromise=null,a.prevValidating=void 0,a.errors=zi,a.warnings=zi,a.cancelRegister=function(){var l=a.props,u=l.preserve,c=l.isListField,f=l.name;a.cancelRegisterFunc&&a.cancelRegisterFunc(c,u,Ir(f)),a.cancelRegisterFunc=null},a.getNamePath=function(){var l=a.props,u=l.name,c=l.fieldContext,f=c.prefixName,d=f===void 0?[]:f;return u!==void 0?[].concat(Ue(d),Ue(u)):[]},a.getRules=function(){var l=a.props,u=l.rules,c=u===void 0?[]:u,f=l.fieldContext;return c.map(function(d){return typeof d=="function"?d(f):d})},a.refresh=function(){!a.mounted||a.setState(function(l){var u=l.resetCount;return{resetCount:u+1}})},a.triggerMetaEvent=function(l){var u=a.props.onMetaChange;u==null||u(Ne(Ne({},a.getMeta()),{},{destroy:l}))},a.onStoreChange=function(l,u,c){var f=a.props,d=f.shouldUpdate,p=f.dependencies,h=p===void 0?[]:p,g=f.onReset,v=c.store,b=a.getNamePath(),y=a.getValue(l),x=a.getValue(v),E=u&&Cp(u,b);switch(c.type==="valueUpdate"&&c.source==="external"&&y!==x&&(a.touched=!0,a.dirty=!0,a.validatePromise=null,a.errors=zi,a.warnings=zi,a.triggerMetaEvent()),c.type){case"reset":if(!u||E){a.touched=!1,a.dirty=!1,a.validatePromise=null,a.errors=zi,a.warnings=zi,a.triggerMetaEvent(),g==null||g(),a.refresh();return}break;case"remove":{if(d){a.reRender();return}break}case"setField":{if(E){var T=c.data;"touched"in T&&(a.touched=T.touched),"validating"in T&&!("originRCField"in T)&&(a.validatePromise=T.validating?Promise.resolve([]):null),"errors"in T&&(a.errors=T.errors||zi),"warnings"in T&&(a.warnings=T.warnings||zi),a.dirty=!0,a.triggerMetaEvent(),a.reRender();return}if(d&&!b.length&&vR(d,l,v,y,x,c)){a.reRender();return}break}case"dependenciesUpdate":{var C=h.map(Ir);if(C.some(function(I){return Cp(c.relatedFields,I)})){a.reRender();return}break}default:if(E||(!h.length||b.length||d)&&vR(d,l,v,y,x,c)){a.reRender();return}break}d===!0&&a.reRender()},a.validateRules=function(l){var u=a.getNamePath(),c=a.getValue(),f=Promise.resolve().then(function(){if(!a.mounted)return[];var d=a.props,p=d.validateFirst,h=p===void 0?!1:p,g=d.messageVariables,v=l||{},b=v.triggerName,y=a.getRules();b&&(y=y.filter(function(E){var T=E.validateTrigger;if(!T)return!0;var C=Uw(T);return C.includes(b)}));var x=fxe(u,c,y,l,h,g);return x.catch(function(E){return E}).then(function(){var E=arguments.length>0&&arguments[0]!==void 0?arguments[0]:zi;if(a.validatePromise===f){a.validatePromise=null;var T=[],C=[];E.forEach(function(I){var P=I.rule.warningOnly,j=I.errors,A=j===void 0?zi:j;P?C.push.apply(C,Ue(A)):T.push.apply(T,Ue(A))}),a.errors=T,a.warnings=C,a.triggerMetaEvent(),a.reRender()}}),x});return a.validatePromise=f,a.dirty=!0,a.errors=zi,a.warnings=zi,a.triggerMetaEvent(),a.reRender(),f},a.isFieldValidating=function(){return!!a.validatePromise},a.isFieldTouched=function(){return a.touched},a.isFieldDirty=function(){if(a.dirty||a.props.initialValue!==void 0)return!0;var l=a.props.fieldContext,u=l.getInternalHooks(gu),c=u.getInitialValue;return c(a.getNamePath())!==void 0},a.getErrors=function(){return a.errors},a.getWarnings=function(){return a.warnings},a.isListField=function(){return a.props.isListField},a.isList=function(){return a.props.isList},a.isPreserve=function(){return a.props.preserve},a.getMeta=function(){a.prevValidating=a.isFieldValidating();var l={touched:a.isFieldTouched(),validating:a.prevValidating,errors:a.errors,warnings:a.warnings,name:a.getNamePath()};return l},a.getOnlyChild=function(l){if(typeof l=="function"){var u=a.getMeta();return Ne(Ne({},a.getOnlyChild(l(a.getControlled(),u,a.props.fieldContext))),{},{isFunction:!0})}var c=Tf(l);return c.length!==1||!w.exports.isValidElement(c[0])?{child:c,isFunction:!1}:{child:c[0],isFunction:!1}},a.getValue=function(l){var u=a.props.fieldContext.getFieldsValue,c=a.getNamePath();return fl(l||u(!0),c)},a.getControlled=function(){var l=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},u=a.props,c=u.trigger,f=u.validateTrigger,d=u.getValueFromEvent,p=u.normalize,h=u.valuePropName,g=u.getValueProps,v=u.fieldContext,b=f!==void 0?f:v.validateTrigger,y=a.getNamePath(),x=v.getInternalHooks,E=v.getFieldsValue,T=x(gu),C=T.dispatch,I=a.getValue(),P=g||function(M){return m({},h,M)},j=l[c],A=Ne(Ne({},l),P(I));A[c]=function(){a.touched=!0,a.dirty=!0,a.triggerMetaEvent();for(var M,O=arguments.length,R=new Array(O),H=0;H<O;H++)R[H]=arguments[H];d?M=d.apply(void 0,R):M=lxe.apply(void 0,[h].concat(R)),p&&(M=p(M,I,E(!0))),C({type:"updateValue",namePath:y,value:M}),j&&j.apply(void 0,R)};var S=Uw(b||[]);return S.forEach(function(M){var O=A[M];A[M]=function(){O&&O.apply(void 0,arguments);var R=a.props.rules;R&&R.length&&C({type:"validateField",namePath:y,triggerName:M})}}),A},r.fieldContext){var i=r.fieldContext.getInternalHooks,o=i(gu),s=o.initEntityValue;s(D(a))}return a}return Oe(n,[{key:"componentDidMount",value:function(){var a=this.props,i=a.shouldUpdate,o=a.fieldContext;if(this.mounted=!0,o){var s=o.getInternalHooks,l=s(gu),u=l.registerField;this.cancelRegisterFunc=u(this)}i===!0&&this.reRender()}},{key:"componentWillUnmount",value:function(){this.cancelRegister(),this.triggerMetaEvent(!0),this.mounted=!1}},{key:"reRender",value:function(){!this.mounted||this.forceUpdate()}},{key:"render",value:function(){var a=this.state.resetCount,i=this.props.children,o=this.getOnlyChild(i),s=o.child,l=o.isFunction,u;return l?u=s:w.exports.isValidElement(s)?u=w.exports.cloneElement(s,this.getControlled(s.props)):(wo(!s,"`children` of Field is not validate ReactElement."),u=s),w.exports.createElement(w.exports.Fragment,{key:a},u)}}]),n}(w.exports.Component);_E.contextType=Af;_E.defaultProps={trigger:"onChange",valuePropName:"value"};function _F(e){var t=e.name,n=On(e,hxe),r=w.exports.useContext(Af),a=t!==void 0?Ir(t):void 0,i="keep";return n.isListField||(i="_".concat((a||[]).join("_"))),w.exports.createElement(_E,xt({key:i,name:a},n,{fieldContext:r}))}var mxe=w.exports.createContext(null),gxe=function(t){var n=t.name,r=t.initialValue,a=t.children,i=t.rules,o=t.validateTrigger,s=w.exports.useContext(Af),l=w.exports.useRef({keys:[],id:0}),u=l.current,c=w.exports.useMemo(function(){var h=Ir(s.prefixName)||[];return[].concat(Ue(h),Ue(Ir(n)))},[s.prefixName,n]),f=w.exports.useMemo(function(){return Ne(Ne({},s),{},{prefixName:c})},[s,c]),d=w.exports.useMemo(function(){return{getKey:function(g){var v=c.length,b=g[v];return[u.keys[b],g.slice(v+1)]}}},[c]);if(typeof a!="function")return wo(!1,"Form.List only accepts function as children."),null;var p=function(g,v,b){var y=b.source;return y==="internal"?!1:g!==v};return w.exports.createElement(mxe.Provider,{value:d},w.exports.createElement(Af.Provider,{value:f},w.exports.createElement(_F,{name:[],shouldUpdate:p,rules:i,validateTrigger:o,initialValue:r,isList:!0},function(h,g){var v=h.value,b=v===void 0?[]:v,y=h.onChange,x=s.getFieldValue,E=function(){var P=x(c||[]);return P||[]},T={add:function(P,j){var A=E();j>=0&&j<=A.length?(u.keys=[].concat(Ue(u.keys.slice(0,j)),[u.id],Ue(u.keys.slice(j))),y([].concat(Ue(A.slice(0,j)),[P],Ue(A.slice(j))))):(u.keys=[].concat(Ue(u.keys),[u.id]),y([].concat(Ue(A),[P]))),u.id+=1},remove:function(P){var j=E(),A=new Set(Array.isArray(P)?P:[P]);A.size<=0||(u.keys=u.keys.filter(function(S,M){return!A.has(M)}),y(j.filter(function(S,M){return!A.has(M)})))},move:function(P,j){if(P!==j){var A=E();P<0||P>=A.length||j<0||j>=A.length||(u.keys=mR(u.keys,P,j),y(mR(A,P,j)))}}},C=b||[];return Array.isArray(C)||(C=[]),a(C.map(function(I,P){var j=u.keys[P];return j===void 0&&(u.keys[P]=u.id,j=u.keys[P],u.id+=1),{name:P,key:j,isListField:!0}}),T,g)})))};function vxe(e){var t=!1,n=e.length,r=[];return e.length?new Promise(function(a,i){e.forEach(function(o,s){o.catch(function(l){return t=!0,l}).then(function(l){n-=1,r[s]=l,!(n>0)&&(t&&i(r),a(r))})})}):Promise.resolve([])}var EF="__@field_split__";function Ix(e){return e.map(function(t){return"".concat(sr(t),":").concat(t)}).join(EF)}var yc=function(){function e(){Ae(this,e),this.kvs=new Map}return Oe(e,[{key:"set",value:function(n,r){this.kvs.set(Ix(n),r)}},{key:"get",value:function(n){return this.kvs.get(Ix(n))}},{key:"update",value:function(n,r){var a=this.get(n),i=r(a);i?this.set(n,i):this.delete(n)}},{key:"delete",value:function(n){this.kvs.delete(Ix(n))}},{key:"map",value:function(n){return Ue(this.kvs.entries()).map(function(r){var a=Le(r,2),i=a[0],o=a[1],s=i.split(EF);return n({key:s.map(function(l){var u=l.match(/^([^:]*):(.*)$/),c=Le(u,3),f=c[1],d=c[2];return f==="number"?Number(d):d}),value:o})})}},{key:"toJSON",value:function(){var n={};return this.map(function(r){var a=r.key,i=r.value;return n[a.join(".")]=i,null}),n}}]),e}(),bxe=["name","errors"],yxe=Oe(function e(t){var n=this;Ae(this,e),this.formHooked=!1,this.forceRootUpdate=void 0,this.subscribable=!0,this.store={},this.fieldEntities=[],this.initialValues={},this.callbacks={},this.validateMessages=null,this.preserve=null,this.lastValidatePromise=null,this.getForm=function(){return{getFieldValue:n.getFieldValue,getFieldsValue:n.getFieldsValue,getFieldError:n.getFieldError,getFieldWarning:n.getFieldWarning,getFieldsError:n.getFieldsError,isFieldsTouched:n.isFieldsTouched,isFieldTouched:n.isFieldTouched,isFieldValidating:n.isFieldValidating,isFieldsValidating:n.isFieldsValidating,resetFields:n.resetFields,setFields:n.setFields,setFieldsValue:n.setFieldsValue,validateFields:n.validateFields,submit:n.submit,_init:!0,getInternalHooks:n.getInternalHooks}},this.getInternalHooks=function(r){return r===gu?(n.formHooked=!0,{dispatch:n.dispatch,initEntityValue:n.initEntityValue,registerField:n.registerField,useSubscribe:n.useSubscribe,setInitialValues:n.setInitialValues,destroyForm:n.destroyForm,setCallbacks:n.setCallbacks,setValidateMessages:n.setValidateMessages,getFields:n.getFields,setPreserve:n.setPreserve,getInitialValue:n.getInitialValue,registerWatch:n.registerWatch}):(wo(!1,"`getInternalHooks` is internal usage. Should not call directly."),null)},this.useSubscribe=function(r){n.subscribable=r},this.prevWithoutPreserves=null,this.setInitialValues=function(r,a){if(n.initialValues=r||{},a){var i,o=z0({},r,n.store);(i=n.prevWithoutPreserves)===null||i===void 0||i.map(function(s){var l=s.key;o=Ks(o,l,fl(r,l))}),n.prevWithoutPreserves=null,n.updateStore(o)}},this.destroyForm=function(){var r=new yc;n.getFieldEntities(!0).forEach(function(a){n.isMergedPreserve(a.isPreserve())||r.set(a.getNamePath(),!0)}),n.prevWithoutPreserves=r},this.getInitialValue=function(r){var a=fl(n.initialValues,r);return r.length?rb(a):a},this.setCallbacks=function(r){n.callbacks=r},this.setValidateMessages=function(r){n.validateMessages=r},this.setPreserve=function(r){n.preserve=r},this.watchList=[],this.registerWatch=function(r){return n.watchList.push(r),function(){n.watchList=n.watchList.filter(function(a){return a!==r})}},this.notifyWatch=function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];if(n.watchList.length){var a=n.getFieldsValue();n.watchList.forEach(function(i){i(a,r)})}},this.timeoutId=null,this.warningUnhooked=function(){},this.updateStore=function(r){n.store=r},this.getFieldEntities=function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return r?n.fieldEntities.filter(function(a){return a.getNamePath().length}):n.fieldEntities},this.getFieldsMap=function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,a=new yc;return n.getFieldEntities(r).forEach(function(i){var o=i.getNamePath();a.set(o,i)}),a},this.getFieldEntitiesForNamePathList=function(r){if(!r)return n.getFieldEntities(!0);var a=n.getFieldsMap(!0);return r.map(function(i){var o=Ir(i);return a.get(o)||{INVALIDATE_NAME_PATH:Ir(i)}})},this.getFieldsValue=function(r,a){if(n.warningUnhooked(),r===!0&&!a)return n.store;var i=n.getFieldEntitiesForNamePathList(Array.isArray(r)?r:null),o=[];return i.forEach(function(s){var l,u="INVALIDATE_NAME_PATH"in s?s.INVALIDATE_NAME_PATH:s.getNamePath();if(!(!r&&((l=s.isListField)===null||l===void 0?void 0:l.call(s))))if(!a)o.push(u);else{var c="getMeta"in s?s.getMeta():null;a(c)&&o.push(u)}}),pR(n.store,o.map(Ir))},this.getFieldValue=function(r){n.warningUnhooked();var a=Ir(r);return fl(n.store,a)},this.getFieldsError=function(r){n.warningUnhooked();var a=n.getFieldEntitiesForNamePathList(r);return a.map(function(i,o){return i&&!("INVALIDATE_NAME_PATH"in i)?{name:i.getNamePath(),errors:i.getErrors(),warnings:i.getWarnings()}:{name:Ir(r[o]),errors:[],warnings:[]}})},this.getFieldError=function(r){n.warningUnhooked();var a=Ir(r),i=n.getFieldsError([a])[0];return i.errors},this.getFieldWarning=function(r){n.warningUnhooked();var a=Ir(r),i=n.getFieldsError([a])[0];return i.warnings},this.isFieldsTouched=function(){n.warningUnhooked();for(var r=arguments.length,a=new Array(r),i=0;i<r;i++)a[i]=arguments[i];var o=a[0],s=a[1],l,u=!1;a.length===0?l=null:a.length===1?Array.isArray(o)?(l=o.map(Ir),u=!1):(l=null,u=o):(l=o.map(Ir),u=s);var c=n.getFieldEntities(!0),f=function(v){return v.isFieldTouched()};if(!l)return u?c.every(f):c.some(f);var d=new yc;l.forEach(function(g){d.set(g,[])}),c.forEach(function(g){var v=g.getNamePath();l.forEach(function(b){b.every(function(y,x){return v[x]===y})&&d.update(b,function(y){return[].concat(Ue(y),[g])})})});var p=function(v){return v.some(f)},h=d.map(function(g){var v=g.value;return v});return u?h.every(p):h.some(p)},this.isFieldTouched=function(r){return n.warningUnhooked(),n.isFieldsTouched([r])},this.isFieldsValidating=function(r){n.warningUnhooked();var a=n.getFieldEntities();if(!r)return a.some(function(o){return o.isFieldValidating()});var i=r.map(Ir);return a.some(function(o){var s=o.getNamePath();return Cp(i,s)&&o.isFieldValidating()})},this.isFieldValidating=function(r){return n.warningUnhooked(),n.isFieldsValidating([r])},this.resetWithFieldInitialValue=function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},a=new yc,i=n.getFieldEntities(!0);i.forEach(function(l){var u=l.props.initialValue,c=l.getNamePath();if(u!==void 0){var f=a.get(c)||new Set;f.add({entity:l,value:u}),a.set(c,f)}});var o=function(u){u.forEach(function(c){var f=c.props.initialValue;if(f!==void 0){var d=c.getNamePath(),p=n.getInitialValue(d);if(p!==void 0)wo(!1,"Form already set 'initialValues' with path '".concat(d.join("."),"'. Field can not overwrite it."));else{var h=a.get(d);if(h&&h.size>1)wo(!1,"Multiple Field with path '".concat(d.join("."),"' set 'initialValue'. Can not decide which one to pick."));else if(h){var g=n.getFieldValue(d);(!r.skipExist||g===void 0)&&n.updateStore(Ks(n.store,d,Ue(h)[0].value))}}}})},s;r.entities?s=r.entities:r.namePathList?(s=[],r.namePathList.forEach(function(l){var u=a.get(l);if(u){var c;(c=s).push.apply(c,Ue(Ue(u).map(function(f){return f.entity})))}})):s=i,o(s)},this.resetFields=function(r){n.warningUnhooked();var a=n.store;if(!r){n.updateStore(z0({},n.initialValues)),n.resetWithFieldInitialValue(),n.notifyObservers(a,null,{type:"reset"}),n.notifyWatch();return}var i=r.map(Ir);i.forEach(function(o){var s=n.getInitialValue(o);n.updateStore(Ks(n.store,o,s))}),n.resetWithFieldInitialValue({namePathList:i}),n.notifyObservers(a,i,{type:"reset"}),n.notifyWatch(i)},this.setFields=function(r){n.warningUnhooked();var a=n.store,i=[];r.forEach(function(o){var s=o.name;o.errors;var l=On(o,bxe),u=Ir(s);i.push(u),"value"in l&&n.updateStore(Ks(n.store,u,l.value)),n.notifyObservers(a,[u],{type:"setField",data:o})}),n.notifyWatch(i)},this.getFields=function(){var r=n.getFieldEntities(!0),a=r.map(function(i){var o=i.getNamePath(),s=i.getMeta(),l=Ne(Ne({},s),{},{name:o,value:n.getFieldValue(o)});return Object.defineProperty(l,"originRCField",{value:!0}),l});return a},this.initEntityValue=function(r){var a=r.props.initialValue;if(a!==void 0){var i=r.getNamePath(),o=fl(n.store,i);o===void 0&&n.updateStore(Ks(n.store,i,a))}},this.isMergedPreserve=function(r){var a=r!==void 0?r:n.preserve;return a!=null?a:!0},this.registerField=function(r){n.fieldEntities.push(r);var a=r.getNamePath();if(n.notifyWatch([a]),r.props.initialValue!==void 0){var i=n.store;n.resetWithFieldInitialValue({entities:[r],skipExist:!0}),n.notifyObservers(i,[r.getNamePath()],{type:"valueUpdate",source:"internal"})}return function(o,s){var l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];if(n.fieldEntities=n.fieldEntities.filter(function(f){return f!==r}),!n.isMergedPreserve(s)&&(!o||l.length>1)){var u=o?void 0:n.getInitialValue(a);if(a.length&&n.getFieldValue(a)!==u&&n.fieldEntities.every(function(f){return!wF(f.getNamePath(),a)})){var c=n.store;n.updateStore(Ks(c,a,u,!0)),n.notifyObservers(c,[a],{type:"remove"}),n.triggerDependenciesUpdate(c,a)}}n.notifyWatch([a])}},this.dispatch=function(r){switch(r.type){case"updateValue":{var a=r.namePath,i=r.value;n.updateValue(a,i);break}case"validateField":{var o=r.namePath,s=r.triggerName;n.validateFields([o],{triggerName:s});break}}},this.notifyObservers=function(r,a,i){if(n.subscribable){var o=Ne(Ne({},i),{},{store:n.getFieldsValue(!0)});n.getFieldEntities().forEach(function(s){var l=s.onStoreChange;l(r,a,o)})}else n.forceRootUpdate()},this.triggerDependenciesUpdate=function(r,a){var i=n.getDependencyChildrenFields(a);return i.length&&n.validateFields(i),n.notifyObservers(r,i,{type:"dependenciesUpdate",relatedFields:[a].concat(Ue(i))}),i},this.updateValue=function(r,a){var i=Ir(r),o=n.store;n.updateStore(Ks(n.store,i,a)),n.notifyObservers(o,[i],{type:"valueUpdate",source:"internal"}),n.notifyWatch([i]);var s=n.triggerDependenciesUpdate(o,i),l=n.callbacks.onValuesChange;if(l){var u=pR(n.store,[i]);l(u,n.getFieldsValue())}n.triggerOnFieldsChange([i].concat(Ue(s)))},this.setFieldsValue=function(r){n.warningUnhooked();var a=n.store;if(r){var i=z0(n.store,r);n.updateStore(i)}n.notifyObservers(a,null,{type:"valueUpdate",source:"external"}),n.notifyWatch()},this.getDependencyChildrenFields=function(r){var a=new Set,i=[],o=new yc;n.getFieldEntities().forEach(function(l){var u=l.props.dependencies;(u||[]).forEach(function(c){var f=Ir(c);o.update(f,function(){var d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:new Set;return d.add(l),d})})});var s=function l(u){var c=o.get(u)||new Set;c.forEach(function(f){if(!a.has(f)){a.add(f);var d=f.getNamePath();f.isFieldDirty()&&d.length&&(i.push(d),l(d))}})};return s(r),i},this.triggerOnFieldsChange=function(r,a){var i=n.callbacks.onFieldsChange;if(i){var o=n.getFields();if(a){var s=new yc;a.forEach(function(u){var c=u.name,f=u.errors;s.set(c,f)}),o.forEach(function(u){u.errors=s.get(u.name)||u.errors})}var l=o.filter(function(u){var c=u.name;return Cp(r,c)});i(l,o)}},this.validateFields=function(r,a){n.warningUnhooked();var i=!!r,o=i?r.map(Ir):[],s=[];n.getFieldEntities(!0).forEach(function(c){if(i||o.push(c.getNamePath()),(a==null?void 0:a.recursive)&&i){var f=c.getNamePath();f.every(function(h,g){return r[g]===h||r[g]===void 0})&&o.push(f)}if(!(!c.props.rules||!c.props.rules.length)){var d=c.getNamePath();if(!i||Cp(o,d)){var p=c.validateRules(Ne({validateMessages:Ne(Ne({},vF),n.validateMessages)},a));s.push(p.then(function(){return{name:d,errors:[],warnings:[]}}).catch(function(h){var g=[],v=[];return h.forEach(function(b){var y=b.rule.warningOnly,x=b.errors;y?v.push.apply(v,Ue(x)):g.push.apply(g,Ue(x))}),g.length?Promise.reject({name:d,errors:g,warnings:v}):{name:d,errors:g,warnings:v}}))}}});var l=vxe(s);n.lastValidatePromise=l,l.catch(function(c){return c}).then(function(c){var f=c.map(function(d){var p=d.name;return p});n.notifyObservers(n.store,f,{type:"validateFinish"}),n.triggerOnFieldsChange(f,c)});var u=l.then(function(){return n.lastValidatePromise===l?Promise.resolve(n.getFieldsValue(o)):Promise.reject([])}).catch(function(c){var f=c.filter(function(d){return d&&d.errors.length});return Promise.reject({values:n.getFieldsValue(o),errorFields:f,outOfDate:n.lastValidatePromise!==l})});return u.catch(function(c){return c}),u},this.submit=function(){n.warningUnhooked(),n.validateFields().then(function(r){var a=n.callbacks.onFinish;if(a)try{a(r)}catch(i){console.error(i)}}).catch(function(r){var a=n.callbacks.onFinishFailed;a&&a(r)})},this.forceRootUpdate=t});function kF(e){var t=w.exports.useRef(),n=w.exports.useState({}),r=Le(n,2),a=r[1];if(!t.current)if(e)t.current=e;else{var i=function(){a({})},o=new yxe(i);t.current=o.getForm()}return[t.current]}var qw=w.exports.createContext({triggerFormChange:function(){},triggerFormFinish:function(){},registerForm:function(){},unregisterForm:function(){}}),xxe=function(t){var n=t.validateMessages,r=t.onFormChange,a=t.onFormFinish,i=t.children,o=w.exports.useContext(qw),s=w.exports.useRef({});return w.exports.createElement(qw.Provider,{value:Ne(Ne({},o),{},{validateMessages:Ne(Ne({},o.validateMessages),n),triggerFormChange:function(u,c){r&&r(u,{changedFields:c,forms:s.current}),o.triggerFormChange(u,c)},triggerFormFinish:function(u,c){a&&a(u,{values:c,forms:s.current}),o.triggerFormFinish(u,c)},registerForm:function(u,c){u&&(s.current=Ne(Ne({},s.current),{},m({},u,c))),o.registerForm(u,c)},unregisterForm:function(u){var c=Ne({},s.current);delete c[u],s.current=c,o.unregisterForm(u)}})},i)},wxe=["name","initialValues","fields","form","preserve","children","component","validateMessages","validateTrigger","onValuesChange","onFieldsChange","onFinish","onFinishFailed"],_xe=function(t,n){var r=t.name,a=t.initialValues,i=t.fields,o=t.form,s=t.preserve,l=t.children,u=t.component,c=u===void 0?"form":u,f=t.validateMessages,d=t.validateTrigger,p=d===void 0?"onChange":d,h=t.onValuesChange,g=t.onFieldsChange,v=t.onFinish,b=t.onFinishFailed,y=On(t,wxe),x=w.exports.useContext(qw),E=kF(o),T=Le(E,1),C=T[0],I=C.getInternalHooks(gu),P=I.useSubscribe,j=I.setInitialValues,A=I.setCallbacks,S=I.setValidateMessages,M=I.setPreserve,O=I.destroyForm;w.exports.useImperativeHandle(n,function(){return C}),w.exports.useEffect(function(){return x.registerForm(r,C),function(){x.unregisterForm(r)}},[x,C,r]),S(Ne(Ne({},x.validateMessages),f)),A({onValuesChange:h,onFieldsChange:function(fe){if(x.triggerFormChange(r,fe),g){for(var ge=arguments.length,we=new Array(ge>1?ge-1:0),Ve=1;Ve<ge;Ve++)we[Ve-1]=arguments[Ve];g.apply(void 0,[fe].concat(we))}},onFinish:function(fe){x.triggerFormFinish(r,fe),v&&v(fe)},onFinishFailed:b}),M(s);var R=w.exports.useRef(null);j(a,!R.current),R.current||(R.current=!0),w.exports.useEffect(function(){return O},[]);var H,ee=typeof l=="function";if(ee){var re=C.getFieldsValue(!0);H=l(re,C)}else H=l;P(!ee);var Y=w.exports.useRef();w.exports.useEffect(function(){sxe(Y.current||[],i||[])||C.setFields(i||[]),Y.current=i},[i,C]);var J=w.exports.useMemo(function(){return Ne(Ne({},C),{},{validateTrigger:p})},[C,p]),ae=w.exports.createElement(Af.Provider,{value:J},H);return c===!1?ae:w.exports.createElement(c,xt({},y,{onSubmit:function(fe){fe.preventDefault(),fe.stopPropagation(),C.submit()},onReset:function(fe){var ge;fe.preventDefault(),C.resetFields(),(ge=y.onReset)===null||ge===void 0||ge.call(y,fe)}}),ae)};function bR(e){try{return JSON.stringify(e)}catch{return Math.random()}}function Exe(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,n=w.exports.useState(),r=Le(n,2),a=r[0],i=r[1],o=w.exports.useMemo(function(){return bR(a)},[a]),s=w.exports.useRef(o);s.current=o;var l=w.exports.useContext(Af),u=t||l,c=u&&u._init,f=Ir(e),d=w.exports.useRef(f);return d.current=f,w.exports.useEffect(function(){if(!!c){var p=u.getFieldsValue,h=u.getInternalHooks,g=h(gu),v=g.registerWatch,b=v(function(x){var E=fl(x,d.current),T=bR(E);s.current!==T&&(s.current=T,i(E))}),y=fl(p(),d.current);return i(y),b}},[]),a}var kxe=w.exports.forwardRef(_xe),zh=kxe;zh.FormProvider=xxe;zh.Field=_F;zh.List=gxe;zh.useForm=kF;zh.useWatch=Exe;function Ki(e,t){Sxe(e)&&(e="100%");var n=Cxe(e);return e=t===360?e:Math.min(t,Math.max(0,parseFloat(e))),n&&(e=parseInt(String(e*t),10)/100),Math.abs(e-t)<1e-6?1:(t===360?e=(e<0?e%t+t:e%t)/parseFloat(String(t)):e=e%t/parseFloat(String(t)),e)}function Sxe(e){return typeof e=="string"&&e.indexOf(".")!==-1&&parseFloat(e)===1}function Cxe(e){return typeof e=="string"&&e.indexOf("%")!==-1}function Txe(e){return e=parseFloat(e),(isNaN(e)||e<0||e>1)&&(e=1),e}function i0(e){return e<=1?"".concat(Number(e)*100,"%"):e}function Lx(e){return e.length===1?"0"+e:String(e)}function Axe(e,t,n){return{r:Ki(e,255)*255,g:Ki(t,255)*255,b:Ki(n,255)*255}}function Nx(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*(6*n):n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function Oxe(e,t,n){var r,a,i;if(e=Ki(e,360),t=Ki(t,100),n=Ki(n,100),t===0)a=n,i=n,r=n;else{var o=n<.5?n*(1+t):n+t-n*t,s=2*n-o;r=Nx(s,o,e+1/3),a=Nx(s,o,e),i=Nx(s,o,e-1/3)}return{r:r*255,g:a*255,b:i*255}}function Mxe(e,t,n){e=Ki(e,255),t=Ki(t,255),n=Ki(n,255);var r=Math.max(e,t,n),a=Math.min(e,t,n),i=0,o=r,s=r-a,l=r===0?0:s/r;if(r===a)i=0;else{switch(r){case e:i=(t-n)/s+(t<n?6:0);break;case t:i=(n-e)/s+2;break;case n:i=(e-t)/s+4;break}i/=6}return{h:i,s:l,v:o}}function Rxe(e,t,n){e=Ki(e,360)*6,t=Ki(t,100),n=Ki(n,100);var r=Math.floor(e),a=e-r,i=n*(1-t),o=n*(1-a*t),s=n*(1-(1-a)*t),l=r%6,u=[n,o,i,i,s,n][l],c=[s,n,n,o,i,i][l],f=[i,i,s,n,n,o][l];return{r:u*255,g:c*255,b:f*255}}function Pxe(e,t,n,r){var a=[Lx(Math.round(e).toString(16)),Lx(Math.round(t).toString(16)),Lx(Math.round(n).toString(16))];return r&&a[0].startsWith(a[0].charAt(1))&&a[1].startsWith(a[1].charAt(1))&&a[2].startsWith(a[2].charAt(1))?a[0].charAt(0)+a[1].charAt(0)+a[2].charAt(0):a.join("")}function yR(e){return hi(e)/255}function hi(e){return parseInt(e,16)}var xR={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",goldenrod:"#daa520",gold:"#ffd700",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavenderblush:"#fff0f5",lavender:"#e6e6fa",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};function Wd(e){var t={r:0,g:0,b:0},n=1,r=null,a=null,i=null,o=!1,s=!1;return typeof e=="string"&&(e=Nxe(e)),typeof e=="object"&&(fs(e.r)&&fs(e.g)&&fs(e.b)?(t=Axe(e.r,e.g,e.b),o=!0,s=String(e.r).substr(-1)==="%"?"prgb":"rgb"):fs(e.h)&&fs(e.s)&&fs(e.v)?(r=i0(e.s),a=i0(e.v),t=Rxe(e.h,r,a),o=!0,s="hsv"):fs(e.h)&&fs(e.s)&&fs(e.l)&&(r=i0(e.s),i=i0(e.l),t=Oxe(e.h,r,i),o=!0,s="hsl"),Object.prototype.hasOwnProperty.call(e,"a")&&(n=e.a)),n=Txe(n),{ok:o,format:e.format||s,r:Math.min(255,Math.max(t.r,0)),g:Math.min(255,Math.max(t.g,0)),b:Math.min(255,Math.max(t.b,0)),a:n}}var Ixe="[-\\+]?\\d+%?",Lxe="[-\\+]?\\d*\\.\\d+%?",dl="(?:".concat(Lxe,")|(?:").concat(Ixe,")"),Fx="[\\s|\\(]+(".concat(dl,")[,|\\s]+(").concat(dl,")[,|\\s]+(").concat(dl,")\\s*\\)?"),Dx="[\\s|\\(]+(".concat(dl,")[,|\\s]+(").concat(dl,")[,|\\s]+(").concat(dl,")[,|\\s]+(").concat(dl,")\\s*\\)?"),po={CSS_UNIT:new RegExp(dl),rgb:new RegExp("rgb"+Fx),rgba:new RegExp("rgba"+Dx),hsl:new RegExp("hsl"+Fx),hsla:new RegExp("hsla"+Dx),hsv:new RegExp("hsv"+Fx),hsva:new RegExp("hsva"+Dx),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/};function Nxe(e){if(e=e.trim().toLowerCase(),e.length===0)return!1;var t=!1;if(xR[e])e=xR[e],t=!0;else if(e==="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var n=po.rgb.exec(e);return n?{r:n[1],g:n[2],b:n[3]}:(n=po.rgba.exec(e),n?{r:n[1],g:n[2],b:n[3],a:n[4]}:(n=po.hsl.exec(e),n?{h:n[1],s:n[2],l:n[3]}:(n=po.hsla.exec(e),n?{h:n[1],s:n[2],l:n[3],a:n[4]}:(n=po.hsv.exec(e),n?{h:n[1],s:n[2],v:n[3]}:(n=po.hsva.exec(e),n?{h:n[1],s:n[2],v:n[3],a:n[4]}:(n=po.hex8.exec(e),n?{r:hi(n[1]),g:hi(n[2]),b:hi(n[3]),a:yR(n[4]),format:t?"name":"hex8"}:(n=po.hex6.exec(e),n?{r:hi(n[1]),g:hi(n[2]),b:hi(n[3]),format:t?"name":"hex"}:(n=po.hex4.exec(e),n?{r:hi(n[1]+n[1]),g:hi(n[2]+n[2]),b:hi(n[3]+n[3]),a:yR(n[4]+n[4]),format:t?"name":"hex8"}:(n=po.hex3.exec(e),n?{r:hi(n[1]+n[1]),g:hi(n[2]+n[2]),b:hi(n[3]+n[3]),format:t?"name":"hex"}:!1)))))))))}function fs(e){return Boolean(po.CSS_UNIT.exec(String(e)))}var o0=2,wR=.16,Fxe=.05,Dxe=.05,Bxe=.15,SF=5,CF=4,zxe=[{index:7,opacity:.15},{index:6,opacity:.25},{index:5,opacity:.3},{index:5,opacity:.45},{index:5,opacity:.65},{index:5,opacity:.85},{index:4,opacity:.9},{index:3,opacity:.95},{index:2,opacity:.97},{index:1,opacity:.98}];function _R(e){var t=e.r,n=e.g,r=e.b,a=Mxe(t,n,r);return{h:a.h*360,s:a.s,v:a.v}}function s0(e){var t=e.r,n=e.g,r=e.b;return"#".concat(Pxe(t,n,r,!1))}function Uxe(e,t,n){var r=n/100,a={r:(t.r-e.r)*r+e.r,g:(t.g-e.g)*r+e.g,b:(t.b-e.b)*r+e.b};return a}function ER(e,t,n){var r;return Math.round(e.h)>=60&&Math.round(e.h)<=240?r=n?Math.round(e.h)-o0*t:Math.round(e.h)+o0*t:r=n?Math.round(e.h)+o0*t:Math.round(e.h)-o0*t,r<0?r+=360:r>=360&&(r-=360),r}function kR(e,t,n){if(e.h===0&&e.s===0)return e.s;var r;return n?r=e.s-wR*t:t===CF?r=e.s+wR:r=e.s+Fxe*t,r>1&&(r=1),n&&t===SF&&r>.1&&(r=.1),r<.06&&(r=.06),Number(r.toFixed(2))}function SR(e,t,n){var r;return n?r=e.v+Dxe*t:r=e.v-Bxe*t,r>1&&(r=1),Number(r.toFixed(2))}function Kw(e){for(var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=[],r=Wd(e),a=SF;a>0;a-=1){var i=_R(r),o=s0(Wd({h:ER(i,a,!0),s:kR(i,a,!0),v:SR(i,a,!0)}));n.push(o)}n.push(s0(r));for(var s=1;s<=CF;s+=1){var l=_R(r),u=s0(Wd({h:ER(l,s),s:kR(l,s),v:SR(l,s)}));n.push(u)}return t.theme==="dark"?zxe.map(function(c){var f=c.index,d=c.opacity,p=s0(Uxe(Wd(t.backgroundColor||"#141414"),Wd(n[f]),d*100));return p}):n}var Bx={red:"#F5222D",volcano:"#FA541C",orange:"#FA8C16",gold:"#FAAD14",yellow:"#FADB14",lime:"#A0D911",green:"#52C41A",cyan:"#13C2C2",blue:"#1890FF",geekblue:"#2F54EB",purple:"#722ED1",magenta:"#EB2F96",grey:"#666666"},zx={},Ux={};Object.keys(Bx).forEach(function(e){zx[e]=Kw(Bx[e]),zx[e].primary=zx[e][5],Ux[e]=Kw(Bx[e],{theme:"dark",backgroundColor:"#141414"}),Ux[e].primary=Ux[e][5]});function Wf(){return!!(typeof window!="undefined"&&window.document&&window.document.createElement)}var $xe="rc-util-key";function TF(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=e.mark;return t?t.startsWith("data-")?t:"data-".concat(t):$xe}function EE(e){if(e.attachTo)return e.attachTo;var t=document.querySelector("head");return t||document.body}function CR(e){var t,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!Wf())return null;var r=document.createElement("style");if(!((t=n.csp)===null||t===void 0)&&t.nonce){var a;r.nonce=(a=n.csp)===null||a===void 0?void 0:a.nonce}r.innerHTML=e;var i=EE(n),o=i.firstChild;return n.prepend&&i.prepend?i.prepend(r):n.prepend&&o?i.insertBefore(r,o):i.appendChild(r),r}var Qw=new Map;function Vxe(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=EE(t);return Array.from(Qw.get(n).children).find(function(r){return r.tagName==="STYLE"&&r.getAttribute(TF(t))===e})}function jxe(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r=EE(n);if(!Qw.has(r)){var a=CR("",n),i=a.parentNode;Qw.set(r,i),i.removeChild(a)}var o=Vxe(t,n);if(o){var s,l;if(((s=n.csp)===null||s===void 0?void 0:s.nonce)&&o.nonce!==((l=n.csp)===null||l===void 0?void 0:l.nonce)){var u;o.nonce=(u=n.csp)===null||u===void 0?void 0:u.nonce}return o.innerHTML!==e&&(o.innerHTML=e),o}var c=CR(e,n);return c.setAttribute(TF(n),t),c}function Gxe(e,t){wo(e,"[@ant-design/icons] ".concat(t))}function TR(e){return sr(e)==="object"&&typeof e.name=="string"&&typeof e.theme=="string"&&(sr(e.icon)==="object"||typeof e.icon=="function")}function AR(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Object.keys(e).reduce(function(t,n){var r=e[n];switch(n){case"class":t.className=r,delete t.class;break;default:t[n]=r}return t},{})}function Jw(e,t,n){return n?Lr.createElement(e.tag,Ne(Ne({key:t},AR(e.attrs)),n),(e.children||[]).map(function(r,a){return Jw(r,"".concat(t,"-").concat(e.tag,"-").concat(a))})):Lr.createElement(e.tag,Ne({key:t},AR(e.attrs)),(e.children||[]).map(function(r,a){return Jw(r,"".concat(t,"-").concat(e.tag,"-").concat(a))}))}function AF(e){return Kw(e)[0]}function OF(e){return e?Array.isArray(e)?e:[e]:[]}var Hxe=`
.anticon {
  display: inline-block;
  color: inherit;
  font-style: normal;
  line-height: 0;
  text-align: center;
  text-transform: none;
  vertical-align: -0.125em;
  text-rendering: optimizeLegibility;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

.anticon > * {
  line-height: 1;
}

.anticon svg {
  display: inline-block;
}

.anticon::before {
  display: none;
}

.anticon .anticon-icon {
  display: block;
}

.anticon[tabindex] {
  cursor: pointer;
}

.anticon-spin::before,
.anticon-spin {
  display: inline-block;
  -webkit-animation: loadingCircle 1s infinite linear;
  animation: loadingCircle 1s infinite linear;
}

@-webkit-keyframes loadingCircle {
  100% {
    -webkit-transform: rotate(360deg);
    transform: rotate(360deg);
  }
}

@keyframes loadingCircle {
  100% {
    -webkit-transform: rotate(360deg);
    transform: rotate(360deg);
  }
}
`,Wxe=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Hxe,n=w.exports.useContext(mF),r=n.csp;w.exports.useEffect(function(){jxe(t,"@ant-design-icons",{prepend:!0,csp:r})},[])},Xxe=["icon","className","onClick","style","primaryColor","secondaryColor"],Tp={primaryColor:"#333",secondaryColor:"#E6E6E6",calculated:!1};function Yxe(e){var t=e.primaryColor,n=e.secondaryColor;Tp.primaryColor=t,Tp.secondaryColor=n||AF(t),Tp.calculated=!!n}function Zxe(){return Ne({},Tp)}var ab=function(t){var n=t.icon,r=t.className,a=t.onClick,i=t.style,o=t.primaryColor,s=t.secondaryColor,l=On(t,Xxe),u=Tp;if(o&&(u={primaryColor:o,secondaryColor:s||AF(o)}),Wxe(),Gxe(TR(n),"icon should be icon definiton, but got ".concat(n)),!TR(n))return null;var c=n;return c&&typeof c.icon=="function"&&(c=Ne(Ne({},c),{},{icon:c.icon(u.primaryColor,u.secondaryColor)})),Jw(c.icon,"svg-".concat(c.name),Ne({className:r,onClick:a,style:i,"data-icon":c.name,width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true"},l))};ab.displayName="IconReact";ab.getTwoToneColors=Zxe;ab.setTwoToneColors=Yxe;var kE=ab;function MF(e){var t=OF(e),n=Le(t,2),r=n[0],a=n[1];return kE.setTwoToneColors({primaryColor:r,secondaryColor:a})}function qxe(){var e=kE.getTwoToneColors();return e.calculated?[e.primaryColor,e.secondaryColor]:e.primaryColor}var Kxe=["className","icon","spin","rotate","tabIndex","onClick","twoToneColor"];MF("#1890ff");var ib=w.exports.forwardRef(function(e,t){var n,r=e.className,a=e.icon,i=e.spin,o=e.rotate,s=e.tabIndex,l=e.onClick,u=e.twoToneColor,c=On(e,Kxe),f=w.exports.useContext(mF),d=f.prefixCls,p=d===void 0?"anticon":d,h=Wt(p,(n={},m(n,"".concat(p,"-").concat(a.name),!!a.name),m(n,"".concat(p,"-spin"),!!i||a.name==="loading"),n),r),g=s;g===void 0&&l&&(g=-1);var v=o?{msTransform:"rotate(".concat(o,"deg)"),transform:"rotate(".concat(o,"deg)")}:void 0,b=OF(u),y=Le(b,2),x=y[0],E=y[1];return w.exports.createElement("span",Ne(Ne({role:"img","aria-label":a.name},c),{},{ref:t,tabIndex:g,onClick:l,className:h}),w.exports.createElement(kE,{icon:a,primaryColor:x,secondaryColor:E,style:v}))});ib.displayName="AntdIcon";ib.getTwoToneColor=qxe;ib.setTwoToneColor=MF;var SE=ib;function OR(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit".concat(e)]="webkit".concat(t),n["Moz".concat(e)]="moz".concat(t),n["ms".concat(e)]="MS".concat(t),n["O".concat(e)]="o".concat(t.toLowerCase()),n}function Qxe(e,t){var n={animationend:OR("Animation","AnimationEnd"),transitionend:OR("Transition","TransitionEnd")};return e&&("AnimationEvent"in t||delete n.animationend.animation,"TransitionEvent"in t||delete n.transitionend.transition),n}var Jxe=Qxe(Wf(),typeof window!="undefined"?window:{}),RF={};if(Wf()){var e1e=document.createElement("div");RF=e1e.style}var l0={};function PF(e){if(l0[e])return l0[e];var t=Jxe[e];if(t)for(var n=Object.keys(t),r=n.length,a=0;a<r;a+=1){var i=n[a];if(Object.prototype.hasOwnProperty.call(t,i)&&i in RF)return l0[e]=t[i],l0[e]}return""}var IF=PF("animationend"),LF=PF("transitionend"),t1e=!!(IF&&LF),MR=IF||"animationend",RR=LF||"transitionend";function PR(e,t){if(!e)return null;if(sr(e)==="object"){var n=t.replace(/-\w/g,function(r){return r[1].toUpperCase()});return e[n]}return"".concat(e,"-").concat(t)}var Tc="none",u0="appear",c0="enter",f0="leave",IR="none",vs="prepare",Gc="start",Hc="active",CE="end";function Eu(e){var t=w.exports.useRef(!1),n=w.exports.useState(e),r=Le(n,2),a=r[0],i=r[1];w.exports.useEffect(function(){return t.current=!1,function(){t.current=!0}},[]);function o(s,l){l&&t.current||i(s)}return[a,o]}var NF=function(t){return+setTimeout(t,16)},FF=function(t){return clearTimeout(t)};typeof window!="undefined"&&"requestAnimationFrame"in window&&(NF=function(t){return window.requestAnimationFrame(t)},FF=function(t){return window.cancelAnimationFrame(t)});var LR=0,TE=new Map;function DF(e){TE.delete(e)}function pr(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;LR+=1;var n=LR;function r(a){if(a===0)DF(n),e();else{var i=NF(function(){r(a-1)});TE.set(n,i)}}return r(t),n}pr.cancel=function(e){var t=TE.get(e);return DF(t),FF(t)};var n1e=function(){var e=w.exports.useRef(null);function t(){pr.cancel(e.current)}function n(r){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2;t();var i=pr(function(){a<=1?r({isCanceled:function(){return i!==e.current}}):n(r,a-1)});e.current=i}return w.exports.useEffect(function(){return function(){t()}},[]),[n,t]},BF=Wf()?w.exports.useLayoutEffect:w.exports.useEffect,NR=[vs,Gc,Hc,CE],zF=!1,r1e=!0;function UF(e){return e===Hc||e===CE}var a1e=function(e,t){var n=Eu(IR),r=Le(n,2),a=r[0],i=r[1],o=n1e(),s=Le(o,2),l=s[0],u=s[1];function c(){i(vs,!0)}return BF(function(){if(a!==IR&&a!==CE){var f=NR.indexOf(a),d=NR[f+1],p=t(a);p===zF?i(d,!0):l(function(h){function g(){h.isCanceled()||i(d,!0)}p===!0?g():Promise.resolve(p).then(g)})}},[e,a]),w.exports.useEffect(function(){return function(){u()}},[]),[c,a]},i1e=function(e){var t=w.exports.useRef(),n=w.exports.useRef(e);n.current=e;var r=w.exports.useCallback(function(o){n.current(o)},[]);function a(o){o&&(o.removeEventListener(RR,r),o.removeEventListener(MR,r))}function i(o){t.current&&t.current!==o&&a(t.current),o&&o!==t.current&&(o.addEventListener(RR,r),o.addEventListener(MR,r),t.current=o)}return w.exports.useEffect(function(){return function(){a(t.current)}},[]),[i,a]};function o1e(e,t,n,r){var a=r.motionEnter,i=a===void 0?!0:a,o=r.motionAppear,s=o===void 0?!0:o,l=r.motionLeave,u=l===void 0?!0:l,c=r.motionDeadline,f=r.motionLeaveImmediately,d=r.onAppearPrepare,p=r.onEnterPrepare,h=r.onLeavePrepare,g=r.onAppearStart,v=r.onEnterStart,b=r.onLeaveStart,y=r.onAppearActive,x=r.onEnterActive,E=r.onLeaveActive,T=r.onAppearEnd,C=r.onEnterEnd,I=r.onLeaveEnd,P=r.onVisibleChanged,j=Eu(),A=Le(j,2),S=A[0],M=A[1],O=Eu(Tc),R=Le(O,2),H=R[0],ee=R[1],re=Eu(null),Y=Le(re,2),J=Y[0],ae=Y[1],le=w.exports.useRef(!1),fe=w.exports.useRef(null);function ge(){return n()}var we=w.exports.useRef(!1);function Ve(At){var ht=ge();if(!(At&&!At.deadline&&At.target!==ht)){var jt=we.current,Gt;H===u0&&jt?Gt=T==null?void 0:T(ht,At):H===c0&&jt?Gt=C==null?void 0:C(ht,At):H===f0&&jt&&(Gt=I==null?void 0:I(ht,At)),H!==Tc&&jt&&Gt!==!1&&(ee(Tc,!0),ae(null,!0))}}var Lt=i1e(Ve),Nt=Le(Lt,1),Zt=Nt[0],Fe=w.exports.useMemo(function(){var At,ht,jt;switch(H){case u0:return At={},m(At,vs,d),m(At,Gc,g),m(At,Hc,y),At;case c0:return ht={},m(ht,vs,p),m(ht,Gc,v),m(ht,Hc,x),ht;case f0:return jt={},m(jt,vs,h),m(jt,Gc,b),m(jt,Hc,E),jt;default:return{}}},[H]),Je=a1e(H,function(At){if(At===vs){var ht=Fe[vs];return ht?ht(ge()):zF}if(pt in Fe){var jt;ae(((jt=Fe[pt])===null||jt===void 0?void 0:jt.call(Fe,ge(),null))||null)}return pt===Hc&&(Zt(ge()),c>0&&(clearTimeout(fe.current),fe.current=setTimeout(function(){Ve({deadline:!0})},c))),r1e}),tt=Le(Je,2),ve=tt[0],pt=tt[1],kt=UF(pt);we.current=kt,BF(function(){M(t);var At=le.current;if(le.current=!0,!!e){var ht;!At&&t&&s&&(ht=u0),At&&t&&i&&(ht=c0),(At&&!t&&u||!At&&f&&!t&&u)&&(ht=f0),ht&&(ee(ht),ve())}},[t]),w.exports.useEffect(function(){(H===u0&&!s||H===c0&&!i||H===f0&&!u)&&ee(Tc)},[s,i,u]),w.exports.useEffect(function(){return function(){le.current=!1,clearTimeout(fe.current)}},[]),w.exports.useEffect(function(){S!==void 0&&H===Tc&&(P==null||P(S))},[S,H]);var wt=J;return Fe[vs]&&pt===Gc&&(wt=Ne({transition:"none"},wt)),[H,pt,wt,S!=null?S:t]}var s1e=function(e){Ct(n,e);var t=Dh(n);function n(){return Ae(this,n),t.apply(this,arguments)}return Oe(n,[{key:"render",value:function(){return this.props.children}}]),n}(w.exports.Component);function l1e(e){var t=e;sr(e)==="object"&&(t=e.transitionSupport);function n(a){return!!(a.motionName&&t)}var r=w.exports.forwardRef(function(a,i){var o=a.visible,s=o===void 0?!0:o,l=a.removeOnLeave,u=l===void 0?!0:l,c=a.forceRender,f=a.children,d=a.motionName,p=a.leavedClassName,h=a.eventProps,g=n(a),v=w.exports.useRef(),b=w.exports.useRef();function y(){try{return v.current instanceof HTMLElement?v.current:Hg(b.current)}catch{return null}}var x=o1e(g,s,y,a),E=Le(x,4),T=E[0],C=E[1],I=E[2],P=E[3],j=w.exports.useRef(P);P&&(j.current=!0);var A=w.exports.useCallback(function(re){v.current=re,pF(i,re)},[i]),S,M=Ne(Ne({},h),{},{visible:s});if(!f)S=null;else if(T===Tc||!n(a))P?S=f(Ne({},M),A):!u&&j.current?S=f(Ne(Ne({},M),{},{className:p}),A):c?S=f(Ne(Ne({},M),{},{style:{display:"none"}}),A):S=null;else{var O,R;C===vs?R="prepare":UF(C)?R="active":C===Gc&&(R="start"),S=f(Ne(Ne({},M),{},{className:Wt(PR(d,T),(O={},m(O,PR(d,"".concat(T,"-").concat(R)),R),m(O,d,typeof d=="string"),O)),style:I}),A)}if(w.exports.isValidElement(S)&&wE(S)){var H=S,ee=H.ref;ee||(S=w.exports.cloneElement(S,{ref:A}))}return w.exports.createElement(s1e,{ref:b},S)});return r.displayName="CSSMotion",r}var ob=l1e(t1e),u1e={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M563.8 512l262.5-312.9c4.4-5.2.7-13.1-6.1-13.1h-79.8c-4.7 0-9.2 2.1-12.3 5.7L511.6 449.8 295.1 191.7c-3-3.6-7.5-5.7-12.3-5.7H203c-6.8 0-10.5 7.9-6.1 13.1L459.4 512 196.9 824.9A7.95 7.95 0 00203 838h79.8c4.7 0 9.2-2.1 12.3-5.7l216.5-258.1 216.5 258.1c3 3.6 7.5 5.7 12.3 5.7h79.8c6.8 0 10.5-7.9 6.1-13.1L563.8 512z"}}]},name:"close",theme:"outlined"},c1e=u1e,$F=function(t,n){return w.exports.createElement(SE,Ne(Ne({},t),{},{ref:n,icon:c1e}))};$F.displayName="CloseOutlined";var f1e=w.exports.forwardRef($F),d1e=function(t,n){return n||(t?"ant-".concat(t):"ant")},ts=w.exports.createContext({getPrefixCls:d1e}),VF=ts.Consumer,p1e=w.exports.createContext(void 0),jF=p1e;function lp(e,t,n,r){var a=Xp.unstable_batchedUpdates?function(o){Xp.unstable_batchedUpdates(n,o)}:n;return e.addEventListener&&e.addEventListener(t,a,r),{remove:function(){e.removeEventListener&&e.removeEventListener(t,a,r)}}}var GF=w.exports.isValidElement;function h1e(e,t,n){return GF(e)?w.exports.cloneElement(e,typeof n=="function"?n(e.props||{}):n):t}function HF(e,t){return h1e(e,e,t)}function FR(e){var t=w.exports.useRef();t.current=e;var n=w.exports.useCallback(function(){for(var r,a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return(r=t.current)===null||r===void 0?void 0:r.call.apply(r,[t].concat(i))},[]);return n}var Of=Wf()?w.exports.useLayoutEffect:w.exports.useEffect,hs;(function(e){e[e.INNER=0]="INNER",e[e.PROP=1]="PROP"})(hs||(hs={}));var m1e=function(t,n){var r=w.exports.useRef(!0);Of(function(){if(!r.current)return t()},n),Of(function(){return r.current=!1,function(){r.current=!0}},[])};function $x(e){return e!==void 0}function _l(e,t){var n=t||{},r=n.defaultValue,a=n.value,i=n.onChange,o=n.postState,s=Eu(function(){var v=void 0,b;return $x(a)?(v=a,b=hs.PROP):$x(r)?(v=typeof r=="function"?r():r,b=hs.PROP):(v=typeof e=="function"?e():e,b=hs.INNER),[v,b,v]}),l=Le(s,2),u=l[0],c=l[1],f=$x(a)?a:u[0],d=o?o(f):f;m1e(function(){c(function(v){var b=Le(v,1),y=b[0];return[a,hs.PROP,y]})},[a]);var p=w.exports.useRef(),h=FR(function(v,b){c(function(y){var x=Le(y,3),E=x[0],T=x[1],C=x[2],I=typeof v=="function"?v(E):v;if(I===E)return y;var P=T===hs.INNER&&p.current!==C?C:E;return[I,hs.INNER,P]},b)}),g=FR(i);return Of(function(){var v=Le(u,3),b=v[0],y=v[1],x=v[2];b!==x&&y===hs.INNER&&(g(b,x),p.current=x)},[u]),[d,h]}var Et={MAC_ENTER:3,BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,QUESTION_MARK:63,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,META:91,WIN_KEY_RIGHT:92,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUMLOCK:144,SEMICOLON:186,DASH:189,EQUALS:187,COMMA:188,PERIOD:190,SLASH:191,APOSTROPHE:192,SINGLE_QUOTE:222,OPEN_SQUARE_BRACKET:219,BACKSLASH:220,CLOSE_SQUARE_BRACKET:221,WIN_KEY:224,MAC_FF_META:224,WIN_IME:229,isTextModifyingKeyEvent:function(t){var n=t.keyCode;if(t.altKey&&!t.ctrlKey||t.metaKey||n>=Et.F1&&n<=Et.F12)return!1;switch(n){case Et.ALT:case Et.CAPS_LOCK:case Et.CONTEXT_MENU:case Et.CTRL:case Et.DOWN:case Et.END:case Et.ESC:case Et.HOME:case Et.INSERT:case Et.LEFT:case Et.MAC_FF_META:case Et.META:case Et.NUMLOCK:case Et.NUM_CENTER:case Et.PAGE_DOWN:case Et.PAGE_UP:case Et.PAUSE:case Et.PRINT_SCREEN:case Et.RIGHT:case Et.SHIFT:case Et.UP:case Et.WIN_KEY:case Et.WIN_KEY_RIGHT:return!1;default:return!0}},isCharacterKey:function(t){if(t>=Et.ZERO&&t<=Et.NINE||t>=Et.NUM_ZERO&&t<=Et.NUM_MULTIPLY||t>=Et.A&&t<=Et.Z||window.navigator.userAgent.indexOf("WebKit")!==-1&&t===0)return!0;switch(t){case Et.SPACE:case Et.QUESTION_MARK:case Et.NUM_PLUS:case Et.NUM_MINUS:case Et.NUM_PERIOD:case Et.NUM_DIVISION:case Et.SEMICOLON:case Et.DASH:case Et.EQUALS:case Et.COMMA:case Et.PERIOD:case Et.SLASH:case Et.APOSTROPHE:case Et.SINGLE_QUOTE:case Et.OPEN_SQUARE_BRACKET:case Et.BACKSLASH:case Et.CLOSE_SQUARE_BRACKET:return!0;default:return!1}}},WF=function(){if(typeof navigator=="undefined"||typeof window=="undefined")return!1;var e=navigator.userAgent||navigator.vendor||window.opera;return!!(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw-(n|u)|c55\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|g560|gene|gf-5|g-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c(-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac( |-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel(i|m)|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i.test(e==null?void 0:e.substr(0,4)))};function U0(e,t){return e?e.contains(t):!1}var g1e=w.exports.forwardRef(function(e,t){var n=e.didUpdate,r=e.getContainer,a=e.children,i=w.exports.useRef(),o=w.exports.useRef();w.exports.useImperativeHandle(t,function(){return{}});var s=w.exports.useRef(!1);return!s.current&&Wf()&&(o.current=r(),i.current=o.current.parentNode,s.current=!0),w.exports.useEffect(function(){n==null||n(e)}),w.exports.useEffect(function(){return o.current.parentNode===null&&i.current!==null&&i.current.appendChild(o.current),function(){var l,u;(l=o.current)===null||l===void 0||(u=l.parentNode)===null||u===void 0||u.removeChild(o.current)}},[]),o.current?Xp.createPortal(a,o.current):null});function v1e(e,t,n){return n?e[0]===t[0]:e[0]===t[0]&&e[1]===t[1]}function b1e(e,t,n){var r=e[t]||{};return Ne(Ne({},r),n)}function y1e(e,t,n,r){for(var a=n.points,i=Object.keys(e),o=0;o<i.length;o+=1){var s=i[o];if(v1e(e[s].points,a,r))return"".concat(t,"-placement-").concat(s)}return""}function XF(e){var t=e.prefixCls,n=e.motion,r=e.animation,a=e.transitionName;return n||(r?{motionName:"".concat(t,"-").concat(r)}:a?{motionName:a}:null)}function x1e(e){var t=e.prefixCls,n=e.visible,r=e.zIndex,a=e.mask,i=e.maskMotion,o=e.maskAnimation,s=e.maskTransitionName;if(!a)return null;var l={};return(i||s||o)&&(l=Ne({motionAppear:!0},XF({motion:i,prefixCls:t,transitionName:s,animation:o}))),w.exports.createElement(ob,xt({},l,{visible:n,removeOnLeave:!0}),function(u){var c=u.className;return w.exports.createElement("div",{style:{zIndex:r},className:Wt("".concat(t,"-mask"),c)})})}var YF=function(e){if(!e)return!1;if(e.offsetParent)return!0;if(e.getBBox){var t=e.getBBox();if(t.width||t.height)return!0}if(e.getBoundingClientRect){var n=e.getBoundingClientRect();if(n.width||n.height)return!0}return!1};function DR(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function BR(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?DR(Object(n),!0).forEach(function(r){w1e(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):DR(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function $0(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?$0=function(t){return typeof t}:$0=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$0(e)}function w1e(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Xd,_1e={Webkit:"-webkit-",Moz:"-moz-",ms:"-ms-",O:"-o-"};function Wg(){if(Xd!==void 0)return Xd;Xd="";var e=document.createElement("p").style,t="Transform";for(var n in _1e)n+t in e&&(Xd=n);return Xd}function ZF(){return Wg()?"".concat(Wg(),"TransitionProperty"):"transitionProperty"}function sb(){return Wg()?"".concat(Wg(),"Transform"):"transform"}function zR(e,t){var n=ZF();n&&(e.style[n]=t,n!=="transitionProperty"&&(e.style.transitionProperty=t))}function Vx(e,t){var n=sb();n&&(e.style[n]=t,n!=="transform"&&(e.style.transform=t))}function E1e(e){return e.style.transitionProperty||e.style[ZF()]}function k1e(e){var t=window.getComputedStyle(e,null),n=t.getPropertyValue("transform")||t.getPropertyValue(sb());if(n&&n!=="none"){var r=n.replace(/[^0-9\-.,]/g,"").split(",");return{x:parseFloat(r[12]||r[4],0),y:parseFloat(r[13]||r[5],0)}}return{x:0,y:0}}var S1e=/matrix\((.*)\)/,C1e=/matrix3d\((.*)\)/;function T1e(e,t){var n=window.getComputedStyle(e,null),r=n.getPropertyValue("transform")||n.getPropertyValue(sb());if(r&&r!=="none"){var a,i=r.match(S1e);if(i)i=i[1],a=i.split(",").map(function(s){return parseFloat(s,10)}),a[4]=t.x,a[5]=t.y,Vx(e,"matrix(".concat(a.join(","),")"));else{var o=r.match(C1e)[1];a=o.split(",").map(function(s){return parseFloat(s,10)}),a[12]=t.x,a[13]=t.y,Vx(e,"matrix3d(".concat(a.join(","),")"))}}else Vx(e,"translateX(".concat(t.x,"px) translateY(").concat(t.y,"px) translateZ(0)"))}var A1e=/[\-+]?(?:\d*\.|)\d+(?:[eE][\-+]?\d+|)/.source,Uh;function UR(e){var t=e.style.display;e.style.display="none",e.offsetHeight,e.style.display=t}function sf(e,t,n){var r=n;if($0(t)==="object"){for(var a in t)t.hasOwnProperty(a)&&sf(e,a,t[a]);return}if(typeof r!="undefined"){typeof r=="number"&&(r="".concat(r,"px")),e.style[t]=r;return}return Uh(e,t)}function O1e(e){var t,n,r,a=e.ownerDocument,i=a.body,o=a&&a.documentElement;return t=e.getBoundingClientRect(),n=Math.floor(t.left),r=Math.floor(t.top),n-=o.clientLeft||i.clientLeft||0,r-=o.clientTop||i.clientTop||0,{left:n,top:r}}function qF(e,t){var n=e["page".concat(t?"Y":"X","Offset")],r="scroll".concat(t?"Top":"Left");if(typeof n!="number"){var a=e.document;n=a.documentElement[r],typeof n!="number"&&(n=a.body[r])}return n}function KF(e){return qF(e)}function QF(e){return qF(e,!0)}function vh(e){var t=O1e(e),n=e.ownerDocument,r=n.defaultView||n.parentWindow;return t.left+=KF(r),t.top+=QF(r),t}function AE(e){return e!=null&&e==e.window}function JF(e){return AE(e)?e.document:e.nodeType===9?e:e.ownerDocument}function M1e(e,t,n){var r=n,a="",i=JF(e);return r=r||i.defaultView.getComputedStyle(e,null),r&&(a=r.getPropertyValue(t)||r[t]),a}var R1e=new RegExp("^(".concat(A1e,")(?!px)[a-z%]+$"),"i"),P1e=/^(top|right|bottom|left)$/,jx="currentStyle",Gx="runtimeStyle",iu="left",I1e="px";function L1e(e,t){var n=e[jx]&&e[jx][t];if(R1e.test(n)&&!P1e.test(t)){var r=e.style,a=r[iu],i=e[Gx][iu];e[Gx][iu]=e[jx][iu],r[iu]=t==="fontSize"?"1em":n||0,n=r.pixelLeft+I1e,r[iu]=a,e[Gx][iu]=i}return n===""?"auto":n}typeof window!="undefined"&&(Uh=window.getComputedStyle?M1e:L1e);function d0(e,t){return e==="left"?t.useCssRight?"right":e:t.useCssBottom?"bottom":e}function $R(e){if(e==="left")return"right";if(e==="right")return"left";if(e==="top")return"bottom";if(e==="bottom")return"top"}function VR(e,t,n){sf(e,"position")==="static"&&(e.style.position="relative");var r=-999,a=-999,i=d0("left",n),o=d0("top",n),s=$R(i),l=$R(o);i!=="left"&&(r=999),o!=="top"&&(a=999);var u="",c=vh(e);("left"in t||"top"in t)&&(u=E1e(e)||"",zR(e,"none")),"left"in t&&(e.style[s]="",e.style[i]="".concat(r,"px")),"top"in t&&(e.style[l]="",e.style[o]="".concat(a,"px")),UR(e);var f=vh(e),d={};for(var p in t)if(t.hasOwnProperty(p)){var h=d0(p,n),g=p==="left"?r:a,v=c[p]-f[p];h===p?d[h]=g+v:d[h]=g-v}sf(e,d),UR(e),("left"in t||"top"in t)&&zR(e,u);var b={};for(var y in t)if(t.hasOwnProperty(y)){var x=d0(y,n),E=t[y]-c[y];y===x?b[x]=d[x]+E:b[x]=d[x]-E}sf(e,b)}function N1e(e,t){var n=vh(e),r=k1e(e),a={x:r.x,y:r.y};"left"in t&&(a.x=r.x+t.left-n.left),"top"in t&&(a.y=r.y+t.top-n.top),T1e(e,a)}function F1e(e,t,n){if(n.ignoreShake){var r=vh(e),a=r.left.toFixed(0),i=r.top.toFixed(0),o=t.left.toFixed(0),s=t.top.toFixed(0);if(a===o&&i===s)return}n.useCssRight||n.useCssBottom?VR(e,t,n):n.useCssTransform&&sb()in document.body.style?N1e(e,t):VR(e,t,n)}function OE(e,t){for(var n=0;n<e.length;n++)t(e[n])}function eD(e){return Uh(e,"boxSizing")==="border-box"}var D1e=["margin","border","padding"],e_=-1,B1e=2,t_=1,z1e=0;function U1e(e,t,n){var r={},a=e.style,i;for(i in t)t.hasOwnProperty(i)&&(r[i]=a[i],a[i]=t[i]);n.call(e);for(i in t)t.hasOwnProperty(i)&&(a[i]=r[i])}function up(e,t,n){var r=0,a,i,o;for(i=0;i<t.length;i++)if(a=t[i],a)for(o=0;o<n.length;o++){var s=void 0;a==="border"?s="".concat(a).concat(n[o],"Width"):s=a+n[o],r+=parseFloat(Uh(e,s))||0}return r}var Wo={getParent:function(t){var n=t;do n.nodeType===11&&n.host?n=n.host:n=n.parentNode;while(n&&n.nodeType!==1&&n.nodeType!==9);return n}};OE(["Width","Height"],function(e){Wo["doc".concat(e)]=function(t){var n=t.document;return Math.max(n.documentElement["scroll".concat(e)],n.body["scroll".concat(e)],Wo["viewport".concat(e)](n))},Wo["viewport".concat(e)]=function(t){var n="client".concat(e),r=t.document,a=r.body,i=r.documentElement,o=i[n];return r.compatMode==="CSS1Compat"&&o||a&&a[n]||o}});function jR(e,t,n){var r=n;if(AE(e))return t==="width"?Wo.viewportWidth(e):Wo.viewportHeight(e);if(e.nodeType===9)return t==="width"?Wo.docWidth(e):Wo.docHeight(e);var a=t==="width"?["Left","Right"]:["Top","Bottom"],i=Math.floor(t==="width"?e.getBoundingClientRect().width:e.getBoundingClientRect().height),o=eD(e),s=0;(i==null||i<=0)&&(i=void 0,s=Uh(e,t),(s==null||Number(s)<0)&&(s=e.style[t]||0),s=parseFloat(s)||0),r===void 0&&(r=o?t_:e_);var l=i!==void 0||o,u=i||s;return r===e_?l?u-up(e,["border","padding"],a):s:l?r===t_?u:u+(r===B1e?-up(e,["border"],a):up(e,["margin"],a)):s+up(e,D1e.slice(r),a)}var $1e={position:"absolute",visibility:"hidden",display:"block"};function GR(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r,a=t[0];return a.offsetWidth!==0?r=jR.apply(void 0,t):U1e(a,$1e,function(){r=jR.apply(void 0,t)}),r}OE(["width","height"],function(e){var t=e.charAt(0).toUpperCase()+e.slice(1);Wo["outer".concat(t)]=function(r,a){return r&&GR(r,e,a?z1e:t_)};var n=e==="width"?["Left","Right"]:["Top","Bottom"];Wo[e]=function(r,a){var i=a;if(i!==void 0){if(r){var o=eD(r);return o&&(i+=up(r,["padding","border"],n)),sf(r,e,i)}return}return r&&GR(r,e,e_)}});function tD(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}var hn={getWindow:function(t){if(t&&t.document&&t.setTimeout)return t;var n=t.ownerDocument||t;return n.defaultView||n.parentWindow},getDocument:JF,offset:function(t,n,r){if(typeof n!="undefined")F1e(t,n,r||{});else return vh(t)},isWindow:AE,each:OE,css:sf,clone:function(t){var n,r={};for(n in t)t.hasOwnProperty(n)&&(r[n]=t[n]);var a=t.overflow;if(a)for(n in t)t.hasOwnProperty(n)&&(r.overflow[n]=t.overflow[n]);return r},mix:tD,getWindowScrollLeft:function(t){return KF(t)},getWindowScrollTop:function(t){return QF(t)},merge:function(){for(var t={},n=0;n<arguments.length;n++)hn.mix(t,n<0||arguments.length<=n?void 0:arguments[n]);return t},viewportWidth:0,viewportHeight:0};tD(hn,Wo);var Hx=hn.getParent;function n_(e){if(hn.isWindow(e)||e.nodeType===9)return null;var t=hn.getDocument(e),n=t.body,r,a=hn.css(e,"position"),i=a==="fixed"||a==="absolute";if(!i)return e.nodeName.toLowerCase()==="html"?null:Hx(e);for(r=Hx(e);r&&r!==n&&r.nodeType!==9;r=Hx(r))if(a=hn.css(r,"position"),a!=="static")return r;return null}var HR=hn.getParent;function V1e(e){if(hn.isWindow(e)||e.nodeType===9)return!1;var t=hn.getDocument(e),n=t.body,r=null;for(r=HR(e);r&&r!==n&&r!==t;r=HR(r)){var a=hn.css(r,"position");if(a==="fixed")return!0}return!1}function ME(e,t){for(var n={left:0,right:1/0,top:0,bottom:1/0},r=n_(e),a=hn.getDocument(e),i=a.defaultView||a.parentWindow,o=a.body,s=a.documentElement;r;){if((navigator.userAgent.indexOf("MSIE")===-1||r.clientWidth!==0)&&r!==o&&r!==s&&hn.css(r,"overflow")!=="visible"){var l=hn.offset(r);l.left+=r.clientLeft,l.top+=r.clientTop,n.top=Math.max(n.top,l.top),n.right=Math.min(n.right,l.left+r.clientWidth),n.bottom=Math.min(n.bottom,l.top+r.clientHeight),n.left=Math.max(n.left,l.left)}else if(r===o||r===s)break;r=n_(r)}var u=null;if(!hn.isWindow(e)&&e.nodeType!==9){u=e.style.position;var c=hn.css(e,"position");c==="absolute"&&(e.style.position="fixed")}var f=hn.getWindowScrollLeft(i),d=hn.getWindowScrollTop(i),p=hn.viewportWidth(i),h=hn.viewportHeight(i),g=s.scrollWidth,v=s.scrollHeight,b=window.getComputedStyle(o);if(b.overflowX==="hidden"&&(g=i.innerWidth),b.overflowY==="hidden"&&(v=i.innerHeight),e.style&&(e.style.position=u),t||V1e(e))n.left=Math.max(n.left,f),n.top=Math.max(n.top,d),n.right=Math.min(n.right,f+p),n.bottom=Math.min(n.bottom,d+h);else{var y=Math.max(g,f+p);n.right=Math.min(n.right,y);var x=Math.max(v,d+h);n.bottom=Math.min(n.bottom,x)}return n.top>=0&&n.left>=0&&n.bottom>n.top&&n.right>n.left?n:null}function j1e(e,t,n,r){var a=hn.clone(e),i={width:t.width,height:t.height};return r.adjustX&&a.left<n.left&&(a.left=n.left),r.resizeWidth&&a.left>=n.left&&a.left+i.width>n.right&&(i.width-=a.left+i.width-n.right),r.adjustX&&a.left+i.width>n.right&&(a.left=Math.max(n.right-i.width,n.left)),r.adjustY&&a.top<n.top&&(a.top=n.top),r.resizeHeight&&a.top>=n.top&&a.top+i.height>n.bottom&&(i.height-=a.top+i.height-n.bottom),r.adjustY&&a.top+i.height>n.bottom&&(a.top=Math.max(n.bottom-i.height,n.top)),hn.mix(a,i)}function RE(e){var t,n,r;if(!hn.isWindow(e)&&e.nodeType!==9)t=hn.offset(e),n=hn.outerWidth(e),r=hn.outerHeight(e);else{var a=hn.getWindow(e);t={left:hn.getWindowScrollLeft(a),top:hn.getWindowScrollTop(a)},n=hn.viewportWidth(a),r=hn.viewportHeight(a)}return t.width=n,t.height=r,t}function WR(e,t){var n=t.charAt(0),r=t.charAt(1),a=e.width,i=e.height,o=e.left,s=e.top;return n==="c"?s+=i/2:n==="b"&&(s+=i),r==="c"?o+=a/2:r==="r"&&(o+=a),{left:o,top:s}}function p0(e,t,n,r,a){var i=WR(t,n[1]),o=WR(e,n[0]),s=[o.left-i.left,o.top-i.top];return{left:Math.round(e.left-s[0]+r[0]-a[0]),top:Math.round(e.top-s[1]+r[1]-a[1])}}function XR(e,t,n){return e.left<n.left||e.left+t.width>n.right}function YR(e,t,n){return e.top<n.top||e.top+t.height>n.bottom}function G1e(e,t,n){return e.left>n.right||e.left+t.width<n.left}function H1e(e,t,n){return e.top>n.bottom||e.top+t.height<n.top}function h0(e,t,n){var r=[];return hn.each(e,function(a){r.push(a.replace(t,function(i){return n[i]}))}),r}function m0(e,t){return e[t]=-e[t],e}function ZR(e,t){var n;return/%$/.test(e)?n=parseInt(e.substring(0,e.length-1),10)/100*t:n=parseInt(e,10),n||0}function qR(e,t){e[0]=ZR(e[0],t.width),e[1]=ZR(e[1],t.height)}function nD(e,t,n,r){var a=n.points,i=n.offset||[0,0],o=n.targetOffset||[0,0],s=n.overflow,l=n.source||e;i=[].concat(i),o=[].concat(o),s=s||{};var u={},c=0,f=!!(s&&s.alwaysByViewport),d=ME(l,f),p=RE(l);qR(i,p),qR(o,t);var h=p0(p,t,a,i,o),g=hn.merge(p,h);if(d&&(s.adjustX||s.adjustY)&&r){if(s.adjustX&&XR(h,p,d)){var v=h0(a,/[lr]/gi,{l:"r",r:"l"}),b=m0(i,0),y=m0(o,0),x=p0(p,t,v,b,y);G1e(x,p,d)||(c=1,a=v,i=b,o=y)}if(s.adjustY&&YR(h,p,d)){var E=h0(a,/[tb]/gi,{t:"b",b:"t"}),T=m0(i,1),C=m0(o,1),I=p0(p,t,E,T,C);H1e(I,p,d)||(c=1,a=E,i=T,o=C)}c&&(h=p0(p,t,a,i,o),hn.mix(g,h));var P=XR(h,p,d),j=YR(h,p,d);if(P||j){var A=a;P&&(A=h0(a,/[lr]/gi,{l:"r",r:"l"})),j&&(A=h0(a,/[tb]/gi,{t:"b",b:"t"})),a=A,i=n.offset||[0,0],o=n.targetOffset||[0,0]}u.adjustX=s.adjustX&&P,u.adjustY=s.adjustY&&j,(u.adjustX||u.adjustY)&&(g=j1e(h,p,d,u))}return g.width!==p.width&&hn.css(l,"width",hn.width(l)+g.width-p.width),g.height!==p.height&&hn.css(l,"height",hn.height(l)+g.height-p.height),hn.offset(l,{left:g.left,top:g.top},{useCssRight:n.useCssRight,useCssBottom:n.useCssBottom,useCssTransform:n.useCssTransform,ignoreShake:n.ignoreShake}),{points:a,offset:i,targetOffset:o,overflow:u}}function W1e(e,t){var n=ME(e,t),r=RE(e);return!n||r.left+r.width<=n.left||r.top+r.height<=n.top||r.left>=n.right||r.top>=n.bottom}function PE(e,t,n){var r=n.target||t,a=RE(r),i=!W1e(r,n.overflow&&n.overflow.alwaysByViewport);return nD(e,a,n,i)}PE.__getOffsetParent=n_;PE.__getVisibleRectForElement=ME;function X1e(e,t,n){var r,a,i=hn.getDocument(e),o=i.defaultView||i.parentWindow,s=hn.getWindowScrollLeft(o),l=hn.getWindowScrollTop(o),u=hn.viewportWidth(o),c=hn.viewportHeight(o);"pageX"in t?r=t.pageX:r=s+t.clientX,"pageY"in t?a=t.pageY:a=l+t.clientY;var f={left:r,top:a,width:0,height:0},d=r>=0&&r<=s+u&&a>=0&&a<=l+c,p=[n.points[0],"cc"];return nD(e,f,BR(BR({},n),{},{points:p}),d)}function Y1e(e,t){return e===t?!0:!e||!t?!1:"pageX"in t&&"pageY"in t?e.pageX===t.pageX&&e.pageY===t.pageY:"clientX"in t&&"clientY"in t?e.clientX===t.clientX&&e.clientY===t.clientY:!1}function Z1e(e,t){e!==document.activeElement&&U0(t,e)&&typeof e.focus=="function"&&e.focus()}function KR(e,t){var n=null,r=null;function a(o){var s=Le(o,1),l=s[0].target;if(!!document.documentElement.contains(l)){var u=l.getBoundingClientRect(),c=u.width,f=u.height,d=Math.floor(c),p=Math.floor(f);(n!==d||r!==p)&&Promise.resolve().then(function(){t({width:d,height:p})}),n=d,r=p}}var i=new cF(a);return e&&i.observe(e),function(){i.disconnect()}}var q1e=function(e,t){var n=Lr.useRef(!1),r=Lr.useRef(null);function a(){window.clearTimeout(r.current)}function i(o){if(a(),!n.current||o===!0){if(e()===!1)return;n.current=!0,r.current=window.setTimeout(function(){n.current=!1},t)}else r.current=window.setTimeout(function(){n.current=!1,i()},t)}return[i,function(){n.current=!1,a()}]};function QR(e){return typeof e!="function"?null:e()}function JR(e){return sr(e)!=="object"||!e?null:e}var K1e=function(t,n){var r=t.children,a=t.disabled,i=t.target,o=t.align,s=t.onAlign,l=t.monitorWindowResize,u=t.monitorBufferTime,c=u===void 0?0:u,f=Lr.useRef({}),d=Lr.useRef(),p=Lr.Children.only(r),h=Lr.useRef({});h.current.disabled=a,h.current.target=i,h.current.align=o,h.current.onAlign=s;var g=q1e(function(){var C=h.current,I=C.disabled,P=C.target,j=C.align,A=C.onAlign;if(!I&&P){var S=d.current,M,O=QR(P),R=JR(P);f.current.element=O,f.current.point=R,f.current.align=j;var H=document,ee=H.activeElement;return O&&YF(O)?M=PE(S,O,j):R&&(M=X1e(S,R,j)),Z1e(ee,S),A&&M&&A(S,M),!0}return!1},c),v=Le(g,2),b=v[0],y=v[1],x=Lr.useRef({cancel:function(){}}),E=Lr.useRef({cancel:function(){}});Lr.useEffect(function(){var C=QR(i),I=JR(i);d.current!==E.current.element&&(E.current.cancel(),E.current.element=d.current,E.current.cancel=KR(d.current,b)),(f.current.element!==C||!Y1e(f.current.point,I)||!gs(f.current.align,o))&&(b(),x.current.element!==C&&(x.current.cancel(),x.current.element=C,x.current.cancel=KR(C,b)))}),Lr.useEffect(function(){a?y():b()},[a]);var T=Lr.useRef(null);return Lr.useEffect(function(){l?T.current||(T.current=lp(window,"resize",b)):T.current&&(T.current.remove(),T.current=null)},[l]),Lr.useEffect(function(){return function(){x.current.cancel(),E.current.cancel(),T.current&&T.current.remove(),y()}},[]),Lr.useImperativeHandle(n,function(){return{forceAlign:function(){return b(!0)}}}),Lr.isValidElement(p)&&(p=Lr.cloneElement(p,{ref:nb(p.ref,d)})),p},rD=Lr.forwardRef(K1e);rD.displayName="Align";var e8=["measure","alignPre","align",null,"motion"],Q1e=function(e,t){var n=Eu(null),r=Le(n,2),a=r[0],i=r[1],o=w.exports.useRef();function s(c){i(c,!0)}function l(){pr.cancel(o.current)}function u(c){l(),o.current=pr(function(){s(function(f){switch(a){case"align":return"motion";case"motion":return"stable"}return f}),c==null||c()})}return w.exports.useEffect(function(){s("measure")},[e]),w.exports.useEffect(function(){switch(a){case"measure":t();break}a&&(o.current=pr(qn(ko().mark(function c(){var f,d;return ko().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:f=e8.indexOf(a),d=e8[f+1],d&&f!==-1&&s(d);case 3:case"end":return h.stop()}},c)}))))},[a]),w.exports.useEffect(function(){return function(){l()}},[]),[a,u]},J1e=function(e){var t=w.exports.useState({width:0,height:0}),n=Le(t,2),r=n[0],a=n[1];function i(s){a({width:s.offsetWidth,height:s.offsetHeight})}var o=w.exports.useMemo(function(){var s={};if(e){var l=r.width,u=r.height;e.indexOf("height")!==-1&&u?s.height=u:e.indexOf("minHeight")!==-1&&u&&(s.minHeight=u),e.indexOf("width")!==-1&&l?s.width=l:e.indexOf("minWidth")!==-1&&l&&(s.minWidth=l)}return s},[e,r]);return[o,i]},aD=w.exports.forwardRef(function(e,t){var n=e.visible,r=e.prefixCls,a=e.className,i=e.style,o=e.children,s=e.zIndex,l=e.stretch,u=e.destroyPopupOnHide,c=e.forceRender,f=e.align,d=e.point,p=e.getRootDomNode,h=e.getClassNameFromAlign,g=e.onAlign,v=e.onMouseEnter,b=e.onMouseLeave,y=e.onMouseDown,x=e.onTouchStart,E=e.onClick,T=w.exports.useRef(),C=w.exports.useRef(),I=w.exports.useState(),P=Le(I,2),j=P[0],A=P[1],S=J1e(l),M=Le(S,2),O=M[0],R=M[1];function H(){l&&R(p())}var ee=Q1e(n,H),re=Le(ee,2),Y=re[0],J=re[1],ae=w.exports.useState(0),le=Le(ae,2),fe=le[0],ge=le[1],we=w.exports.useRef();Of(function(){Y==="alignPre"&&ge(0)},[Y]);function Ve(){return d||p}function Lt(){var pt;(pt=T.current)===null||pt===void 0||pt.forceAlign()}function Nt(pt,kt){var wt=h(kt);j!==wt&&A(wt),ge(function(At){return At+1}),Y==="align"&&(g==null||g(pt,kt))}Of(function(){Y==="align"&&(fe<2?Lt():J(function(){var pt;(pt=we.current)===null||pt===void 0||pt.call(we)}))},[fe]);var Zt=Ne({},XF(e));["onAppearEnd","onEnterEnd","onLeaveEnd"].forEach(function(pt){var kt=Zt[pt];Zt[pt]=function(wt,At){return J(),kt==null?void 0:kt(wt,At)}});function Fe(){return new Promise(function(pt){we.current=pt})}w.exports.useEffect(function(){!Zt.motionName&&Y==="motion"&&J()},[Zt.motionName,Y]),w.exports.useImperativeHandle(t,function(){return{forceAlign:Lt,getElement:function(){return C.current}}});var Je=Ne(Ne({},O),{},{zIndex:s,opacity:Y==="motion"||Y==="stable"||!n?void 0:0,pointerEvents:!n&&Y!=="stable"?"none":void 0},i),tt=!0;(f==null?void 0:f.points)&&(Y==="align"||Y==="stable")&&(tt=!1);var ve=o;return w.exports.Children.count(o)>1&&(ve=w.exports.createElement("div",{className:"".concat(r,"-content")},o)),w.exports.createElement(ob,xt({visible:n,ref:C,leavedClassName:"".concat(r,"-hidden")},Zt,{onAppearPrepare:Fe,onEnterPrepare:Fe,removeOnLeave:u,forceRender:c}),function(pt,kt){var wt=pt.className,At=pt.style,ht=Wt(r,a,j,wt);return w.exports.createElement(rD,{target:Ve(),key:"popup",ref:T,monitorWindowResize:!0,disabled:tt,align:f,onAlign:Nt},w.exports.createElement("div",{ref:kt,className:ht,onMouseEnter:v,onMouseLeave:b,onMouseDownCapture:y,onTouchStartCapture:x,onClick:E,style:Ne(Ne({},At),Je)},ve))})});aD.displayName="PopupInner";var iD=w.exports.forwardRef(function(e,t){var n=e.prefixCls,r=e.visible,a=e.zIndex,i=e.children,o=e.mobile;o=o===void 0?{}:o;var s=o.popupClassName,l=o.popupStyle,u=o.popupMotion,c=u===void 0?{}:u,f=o.popupRender,d=e.onClick,p=w.exports.useRef();w.exports.useImperativeHandle(t,function(){return{forceAlign:function(){},getElement:function(){return p.current}}});var h=Ne({zIndex:a},l),g=i;return w.exports.Children.count(i)>1&&(g=w.exports.createElement("div",{className:"".concat(n,"-content")},i)),f&&(g=f(g)),w.exports.createElement(ob,xt({visible:r,ref:p,removeOnLeave:!0},c),function(v,b){var y=v.className,x=v.style,E=Wt(n,s,y);return w.exports.createElement("div",{ref:b,className:E,onClick:d,style:Ne(Ne({},x),h)},g)})});iD.displayName="MobilePopupInner";var ewe=["visible","mobile"],oD=w.exports.forwardRef(function(e,t){var n=e.visible,r=e.mobile,a=On(e,ewe),i=w.exports.useState(n),o=Le(i,2),s=o[0],l=o[1],u=w.exports.useState(!1),c=Le(u,2),f=c[0],d=c[1],p=Ne(Ne({},a),{},{visible:s});w.exports.useEffect(function(){l(n),n&&r&&d(WF())},[n,r]);var h=f?w.exports.createElement(iD,xt({},p,{mobile:r,ref:t})):w.exports.createElement(aD,xt({},p,{ref:t}));return w.exports.createElement("div",null,w.exports.createElement(x1e,p),h)});oD.displayName="Popup";var t8=w.exports.createContext(null);function Wx(){}function twe(){return""}function nwe(e){return e?e.ownerDocument:window.document}var rwe=["onClick","onMouseDown","onTouchStart","onMouseEnter","onMouseLeave","onFocus","onBlur","onContextMenu"];function awe(e){var t=function(n){Ct(a,n);var r=Dh(a);function a(i){var o;Ae(this,a),o=r.call(this,i),o.popupRef=w.exports.createRef(),o.triggerRef=w.exports.createRef(),o.portalContainer=void 0,o.attachId=void 0,o.clickOutsideHandler=void 0,o.touchOutsideHandler=void 0,o.contextMenuOutsideHandler1=void 0,o.contextMenuOutsideHandler2=void 0,o.mouseDownTimeout=void 0,o.focusTime=void 0,o.preClickTime=void 0,o.preTouchTime=void 0,o.delayTimer=void 0,o.hasPopupMouseDown=void 0,o.onMouseEnter=function(l){var u=o.props.mouseEnterDelay;o.fireEvents("onMouseEnter",l),o.delaySetPopupVisible(!0,u,u?null:l)},o.onMouseMove=function(l){o.fireEvents("onMouseMove",l),o.setPoint(l)},o.onMouseLeave=function(l){o.fireEvents("onMouseLeave",l),o.delaySetPopupVisible(!1,o.props.mouseLeaveDelay)},o.onPopupMouseEnter=function(){o.clearDelayTimer()},o.onPopupMouseLeave=function(l){var u;l.relatedTarget&&!l.relatedTarget.setTimeout&&U0((u=o.popupRef.current)===null||u===void 0?void 0:u.getElement(),l.relatedTarget)||o.delaySetPopupVisible(!1,o.props.mouseLeaveDelay)},o.onFocus=function(l){o.fireEvents("onFocus",l),o.clearDelayTimer(),o.isFocusToShow()&&(o.focusTime=Date.now(),o.delaySetPopupVisible(!0,o.props.focusDelay))},o.onMouseDown=function(l){o.fireEvents("onMouseDown",l),o.preClickTime=Date.now()},o.onTouchStart=function(l){o.fireEvents("onTouchStart",l),o.preTouchTime=Date.now()},o.onBlur=function(l){o.fireEvents("onBlur",l),o.clearDelayTimer(),o.isBlurToHide()&&o.delaySetPopupVisible(!1,o.props.blurDelay)},o.onContextMenu=function(l){l.preventDefault(),o.fireEvents("onContextMenu",l),o.setPopupVisible(!0,l)},o.onContextMenuClose=function(){o.isContextMenuToShow()&&o.close()},o.onClick=function(l){if(o.fireEvents("onClick",l),o.focusTime){var u;if(o.preClickTime&&o.preTouchTime?u=Math.min(o.preClickTime,o.preTouchTime):o.preClickTime?u=o.preClickTime:o.preTouchTime&&(u=o.preTouchTime),Math.abs(u-o.focusTime)<20)return;o.focusTime=0}o.preClickTime=0,o.preTouchTime=0,o.isClickToShow()&&(o.isClickToHide()||o.isBlurToHide())&&l&&l.preventDefault&&l.preventDefault();var c=!o.state.popupVisible;(o.isClickToHide()&&!c||c&&o.isClickToShow())&&o.setPopupVisible(!o.state.popupVisible,l)},o.onPopupMouseDown=function(){if(o.hasPopupMouseDown=!0,clearTimeout(o.mouseDownTimeout),o.mouseDownTimeout=window.setTimeout(function(){o.hasPopupMouseDown=!1},0),o.context){var l;(l=o.context).onPopupMouseDown.apply(l,arguments)}},o.onDocumentClick=function(l){if(!(o.props.mask&&!o.props.maskClosable)){var u=l.target,c=o.getRootDomNode(),f=o.getPopupDomNode();(!U0(c,u)||o.isContextMenuOnly())&&!U0(f,u)&&!o.hasPopupMouseDown&&o.close()}},o.getRootDomNode=function(){var l=o.props.getTriggerDOMNode;if(l)return l(o.triggerRef.current);try{var u=Hg(o.triggerRef.current);if(u)return u}catch{}return Xp.findDOMNode(D(o))},o.getPopupClassNameFromAlign=function(l){var u=[],c=o.props,f=c.popupPlacement,d=c.builtinPlacements,p=c.prefixCls,h=c.alignPoint,g=c.getPopupClassNameFromAlign;return f&&d&&u.push(y1e(d,p,l,h)),g&&u.push(g(l)),u.join(" ")},o.getComponent=function(){var l=o.props,u=l.prefixCls,c=l.destroyPopupOnHide,f=l.popupClassName,d=l.onPopupAlign,p=l.popupMotion,h=l.popupAnimation,g=l.popupTransitionName,v=l.popupStyle,b=l.mask,y=l.maskAnimation,x=l.maskTransitionName,E=l.maskMotion,T=l.zIndex,C=l.popup,I=l.stretch,P=l.alignPoint,j=l.mobile,A=l.forceRender,S=l.onPopupClick,M=o.state,O=M.popupVisible,R=M.point,H=o.getPopupAlign(),ee={};return o.isMouseEnterToShow()&&(ee.onMouseEnter=o.onPopupMouseEnter),o.isMouseLeaveToHide()&&(ee.onMouseLeave=o.onPopupMouseLeave),ee.onMouseDown=o.onPopupMouseDown,ee.onTouchStart=o.onPopupMouseDown,w.exports.createElement(oD,xt({prefixCls:u,destroyPopupOnHide:c,visible:O,point:P&&R,className:f,align:H,onAlign:d,animation:h,getClassNameFromAlign:o.getPopupClassNameFromAlign},ee,{stretch:I,getRootDomNode:o.getRootDomNode,style:v,mask:b,zIndex:T,transitionName:g,maskAnimation:y,maskTransitionName:x,maskMotion:E,ref:o.popupRef,motion:p,mobile:j,forceRender:A,onClick:S}),typeof C=="function"?C():C)},o.attachParent=function(l){pr.cancel(o.attachId);var u=o.props,c=u.getPopupContainer,f=u.getDocument,d=o.getRootDomNode(),p;c?(d||c.length===0)&&(p=c(d)):p=f(o.getRootDomNode()).body,p?p.appendChild(l):o.attachId=pr(function(){o.attachParent(l)})},o.getContainer=function(){if(!o.portalContainer){var l=o.props.getDocument,u=l(o.getRootDomNode()).createElement("div");u.style.position="absolute",u.style.top="0",u.style.left="0",u.style.width="100%",o.portalContainer=u}return o.attachParent(o.portalContainer),o.portalContainer},o.setPoint=function(l){var u=o.props.alignPoint;!u||!l||o.setState({point:{pageX:l.pageX,pageY:l.pageY}})},o.handlePortalUpdate=function(){o.state.prevPopupVisible!==o.state.popupVisible&&o.props.afterPopupVisibleChange(o.state.popupVisible)},o.triggerContextValue={onPopupMouseDown:o.onPopupMouseDown};var s;return"popupVisible"in i?s=!!i.popupVisible:s=!!i.defaultPopupVisible,o.state={prevPopupVisible:s,popupVisible:s},rwe.forEach(function(l){o["fire".concat(l)]=function(u){o.fireEvents(l,u)}}),o}return Oe(a,[{key:"componentDidMount",value:function(){this.componentDidUpdate()}},{key:"componentDidUpdate",value:function(){var o=this.props,s=this.state;if(s.popupVisible){var l;!this.clickOutsideHandler&&(this.isClickToHide()||this.isContextMenuToShow())&&(l=o.getDocument(this.getRootDomNode()),this.clickOutsideHandler=lp(l,"mousedown",this.onDocumentClick)),this.touchOutsideHandler||(l=l||o.getDocument(this.getRootDomNode()),this.touchOutsideHandler=lp(l,"touchstart",this.onDocumentClick)),!this.contextMenuOutsideHandler1&&this.isContextMenuToShow()&&(l=l||o.getDocument(this.getRootDomNode()),this.contextMenuOutsideHandler1=lp(l,"scroll",this.onContextMenuClose)),!this.contextMenuOutsideHandler2&&this.isContextMenuToShow()&&(this.contextMenuOutsideHandler2=lp(window,"blur",this.onContextMenuClose));return}this.clearOutsideHandler()}},{key:"componentWillUnmount",value:function(){this.clearDelayTimer(),this.clearOutsideHandler(),clearTimeout(this.mouseDownTimeout),pr.cancel(this.attachId)}},{key:"getPopupDomNode",value:function(){var o;return((o=this.popupRef.current)===null||o===void 0?void 0:o.getElement())||null}},{key:"getPopupAlign",value:function(){var o=this.props,s=o.popupPlacement,l=o.popupAlign,u=o.builtinPlacements;return s&&u?b1e(u,s,l):l}},{key:"setPopupVisible",value:function(o,s){var l=this.props.alignPoint,u=this.state.popupVisible;this.clearDelayTimer(),u!==o&&("popupVisible"in this.props||this.setState({popupVisible:o,prevPopupVisible:u}),this.props.onPopupVisibleChange(o)),l&&s&&o&&this.setPoint(s)}},{key:"delaySetPopupVisible",value:function(o,s,l){var u=this,c=s*1e3;if(this.clearDelayTimer(),c){var f=l?{pageX:l.pageX,pageY:l.pageY}:null;this.delayTimer=window.setTimeout(function(){u.setPopupVisible(o,f),u.clearDelayTimer()},c)}else this.setPopupVisible(o,l)}},{key:"clearDelayTimer",value:function(){this.delayTimer&&(clearTimeout(this.delayTimer),this.delayTimer=null)}},{key:"clearOutsideHandler",value:function(){this.clickOutsideHandler&&(this.clickOutsideHandler.remove(),this.clickOutsideHandler=null),this.contextMenuOutsideHandler1&&(this.contextMenuOutsideHandler1.remove(),this.contextMenuOutsideHandler1=null),this.contextMenuOutsideHandler2&&(this.contextMenuOutsideHandler2.remove(),this.contextMenuOutsideHandler2=null),this.touchOutsideHandler&&(this.touchOutsideHandler.remove(),this.touchOutsideHandler=null)}},{key:"createTwoChains",value:function(o){var s=this.props.children.props,l=this.props;return s[o]&&l[o]?this["fire".concat(o)]:s[o]||l[o]}},{key:"isClickToShow",value:function(){var o=this.props,s=o.action,l=o.showAction;return s.indexOf("click")!==-1||l.indexOf("click")!==-1}},{key:"isContextMenuOnly",value:function(){var o=this.props.action;return o==="contextMenu"||o.length===1&&o[0]==="contextMenu"}},{key:"isContextMenuToShow",value:function(){var o=this.props,s=o.action,l=o.showAction;return s.indexOf("contextMenu")!==-1||l.indexOf("contextMenu")!==-1}},{key:"isClickToHide",value:function(){var o=this.props,s=o.action,l=o.hideAction;return s.indexOf("click")!==-1||l.indexOf("click")!==-1}},{key:"isMouseEnterToShow",value:function(){var o=this.props,s=o.action,l=o.showAction;return s.indexOf("hover")!==-1||l.indexOf("mouseEnter")!==-1}},{key:"isMouseLeaveToHide",value:function(){var o=this.props,s=o.action,l=o.hideAction;return s.indexOf("hover")!==-1||l.indexOf("mouseLeave")!==-1}},{key:"isFocusToShow",value:function(){var o=this.props,s=o.action,l=o.showAction;return s.indexOf("focus")!==-1||l.indexOf("focus")!==-1}},{key:"isBlurToHide",value:function(){var o=this.props,s=o.action,l=o.hideAction;return s.indexOf("focus")!==-1||l.indexOf("blur")!==-1}},{key:"forcePopupAlign",value:function(){if(this.state.popupVisible){var o;(o=this.popupRef.current)===null||o===void 0||o.forceAlign()}}},{key:"fireEvents",value:function(o,s){var l=this.props.children.props[o];l&&l(s);var u=this.props[o];u&&u(s)}},{key:"close",value:function(){this.setPopupVisible(!1)}},{key:"render",value:function(){var o=this.state.popupVisible,s=this.props,l=s.children,u=s.forceRender,c=s.alignPoint,f=s.className,d=s.autoDestroy,p=w.exports.Children.only(l),h={key:"trigger"};this.isContextMenuToShow()?h.onContextMenu=this.onContextMenu:h.onContextMenu=this.createTwoChains("onContextMenu"),this.isClickToHide()||this.isClickToShow()?(h.onClick=this.onClick,h.onMouseDown=this.onMouseDown,h.onTouchStart=this.onTouchStart):(h.onClick=this.createTwoChains("onClick"),h.onMouseDown=this.createTwoChains("onMouseDown"),h.onTouchStart=this.createTwoChains("onTouchStart")),this.isMouseEnterToShow()?(h.onMouseEnter=this.onMouseEnter,c&&(h.onMouseMove=this.onMouseMove)):h.onMouseEnter=this.createTwoChains("onMouseEnter"),this.isMouseLeaveToHide()?h.onMouseLeave=this.onMouseLeave:h.onMouseLeave=this.createTwoChains("onMouseLeave"),this.isFocusToShow()||this.isBlurToHide()?(h.onFocus=this.onFocus,h.onBlur=this.onBlur):(h.onFocus=this.createTwoChains("onFocus"),h.onBlur=this.createTwoChains("onBlur"));var g=Wt(p&&p.props&&p.props.className,f);g&&(h.className=g);var v=Ne({},h);wE(p)&&(v.ref=nb(this.triggerRef,p.ref));var b=w.exports.cloneElement(p,v),y;return(o||this.popupRef.current||u)&&(y=w.exports.createElement(e,{key:"portal",getContainer:this.getContainer,didUpdate:this.handlePortalUpdate},this.getComponent())),!o&&d&&(y=null),w.exports.createElement(t8.Provider,{value:this.triggerContextValue},b,y)}}],[{key:"getDerivedStateFromProps",value:function(o,s){var l=o.popupVisible,u={};return l!==void 0&&s.popupVisible!==l&&(u.popupVisible=l,u.prevPopupVisible=s.popupVisible),u}}]),a}(w.exports.Component);return t.contextType=t8,t.defaultProps={prefixCls:"rc-trigger-popup",getPopupClassNameFromAlign:twe,getDocument:nwe,onPopupVisibleChange:Wx,afterPopupVisibleChange:Wx,onPopupAlign:Wx,popupClassName:"",mouseEnterDelay:0,mouseLeaveDelay:.1,focusDelay:0,blurDelay:.15,popupStyle:{},destroyPopupOnHide:!1,popupAlign:{},defaultPopupVisible:!1,mask:!1,maskClosable:!0,action:[],showAction:[],hideAction:[],autoDestroy:!1},t}var IE=awe(g1e),iwe=["prefixCls","invalidate","item","renderItem","responsive","responsiveDisabled","registerSize","itemKey","className","style","children","display","order","component"],xc=void 0;function owe(e,t){var n=e.prefixCls,r=e.invalidate,a=e.item,i=e.renderItem,o=e.responsive,s=e.responsiveDisabled,l=e.registerSize,u=e.itemKey,c=e.className,f=e.style,d=e.children,p=e.display,h=e.order,g=e.component,v=g===void 0?"div":g,b=On(e,iwe),y=o&&!p;function x(P){l(u,P)}w.exports.useEffect(function(){return function(){x(null)}},[]);var E=i&&a!==xc?i(a):d,T;r||(T={opacity:y?0:1,height:y?0:xc,overflowY:y?"hidden":xc,order:o?h:xc,pointerEvents:y?"none":xc,position:y?"absolute":xc});var C={};y&&(C["aria-hidden"]=!0);var I=w.exports.createElement(v,xt({className:Wt(!r&&n,c),style:Ne(Ne({},T),f)},C,b,{ref:t}),E);return o&&(I=w.exports.createElement(mh,{onResize:function(j){var A=j.offsetWidth;x(A)},disabled:s},I)),I}var Ap=w.exports.forwardRef(owe);Ap.displayName="Item";function swe(){var e=Eu({}),t=Le(e,2),n=t[1],r=w.exports.useRef([]),a=0,i=0;function o(s){var l=a;a+=1,r.current.length<l+1&&(r.current[l]=s);var u=r.current[l];function c(f){r.current[l]=typeof f=="function"?f(r.current[l]):f,pr.cancel(i),i=pr(function(){n({},!0)})}return[u,c]}return o}var lwe=["component"],uwe=["className"],cwe=["className"],fwe=function(t,n){var r=w.exports.useContext(Xg);if(!r){var a=t.component,i=a===void 0?"div":a,o=On(t,lwe);return w.exports.createElement(i,xt({},o,{ref:n}))}var s=r.className,l=On(r,uwe),u=t.className,c=On(t,cwe);return w.exports.createElement(Xg.Provider,{value:null},w.exports.createElement(Ap,xt({ref:n,className:Wt(s,u)},l,c)))},sD=w.exports.forwardRef(fwe);sD.displayName="RawItem";var dwe=["prefixCls","data","renderItem","renderRawItem","itemKey","itemWidth","ssr","style","className","maxCount","renderRest","renderRawRest","suffix","component","itemComponent","onVisibleChange"],Xg=w.exports.createContext(null),lD="responsive",uD="invalidate";function pwe(e){return"+ ".concat(e.length," ...")}function hwe(e,t){var n=e.prefixCls,r=n===void 0?"rc-overflow":n,a=e.data,i=a===void 0?[]:a,o=e.renderItem,s=e.renderRawItem,l=e.itemKey,u=e.itemWidth,c=u===void 0?10:u,f=e.ssr,d=e.style,p=e.className,h=e.maxCount,g=e.renderRest,v=e.renderRawRest,b=e.suffix,y=e.component,x=y===void 0?"div":y,E=e.itemComponent,T=e.onVisibleChange,C=On(e,dwe),I=swe(),P=f==="full",j=I(null),A=Le(j,2),S=A[0],M=A[1],O=S||0,R=I(new Map),H=Le(R,2),ee=H[0],re=H[1],Y=I(0),J=Le(Y,2),ae=J[0],le=J[1],fe=I(0),ge=Le(fe,2),we=ge[0],Ve=ge[1],Lt=I(0),Nt=Le(Lt,2),Zt=Nt[0],Fe=Nt[1],Je=w.exports.useState(null),tt=Le(Je,2),ve=tt[0],pt=tt[1],kt=w.exports.useState(null),wt=Le(kt,2),At=wt[0],ht=wt[1],jt=w.exports.useMemo(function(){return At===null&&P?Number.MAX_SAFE_INTEGER:At||0},[At,S]),Gt=w.exports.useState(!1),An=Le(Gt,2),_r=An[0],er=An[1],tr="".concat(r,"-item"),k=Math.max(ae,we),Ce=h===lD,Ie=i.length&&Ce,lt=h===uD,_t=Ie||typeof h=="number"&&i.length>h,Yt=w.exports.useMemo(function(){var qt=i;return Ie?S===null&&P?qt=i:qt=i.slice(0,Math.min(i.length,O/c)):typeof h=="number"&&(qt=i.slice(0,h)),qt},[i,c,S,h,Ie]),St=w.exports.useMemo(function(){return Ie?i.slice(jt+1):i.slice(Yt.length)},[i,Yt,Ie,jt]),Rt=w.exports.useCallback(function(qt,un){var cn;return typeof l=="function"?l(qt):(cn=l&&(qt==null?void 0:qt[l]))!==null&&cn!==void 0?cn:un},[l]),Tt=w.exports.useCallback(o||function(qt){return qt},[o]);function $t(qt,un){ht(qt),un||(er(qt<i.length-1),T==null||T(qt))}function Bt(qt,un){M(un.clientWidth)}function Sn(qt,un){re(function(cn){var kr=new Map(cn);return un===null?kr.delete(qt):kr.set(qt,un),kr})}function Bn(qt,un){Ve(un),le(we)}function ca(qt,un){Fe(un)}function Da(qt){return ee.get(Rt(Yt[qt],qt))}Of(function(){if(O&&k&&Yt){var qt=Zt,un=Yt.length,cn=un-1;if(!un){$t(0),pt(null);return}for(var kr=0;kr<un;kr+=1){var da=Da(kr);if(P&&(da=da||0),da===void 0){$t(kr-1,!0);break}if(qt+=da,cn===0&&qt<=O||kr===cn-1&&qt+Da(cn)<=O){$t(cn),pt(null);break}else if(qt+k>O){$t(kr-1),pt(qt-da-Zt+we);break}}b&&Da(0)+Zt>O&&pt(null)}},[O,ee,we,Zt,Rt,Yt]);var Er=_r&&!!St.length,Ba={};ve!==null&&Ie&&(Ba={position:"absolute",left:ve,top:0});var Or={prefixCls:tr,responsive:Ie,component:E,invalidate:lt},Ka=s?function(qt,un){var cn=Rt(qt,un);return w.exports.createElement(Xg.Provider,{key:cn,value:Ne(Ne({},Or),{},{order:un,item:qt,itemKey:cn,registerSize:Sn,display:un<=jt})},s(qt,un))}:function(qt,un){var cn=Rt(qt,un);return w.exports.createElement(Ap,xt({},Or,{order:un,key:cn,item:qt,renderItem:Tt,itemKey:cn,registerSize:Sn,display:un<=jt}))},Sa,li={order:Er?jt:Number.MAX_SAFE_INTEGER,className:"".concat(tr,"-rest"),registerSize:Bn,display:Er};if(v)v&&(Sa=w.exports.createElement(Xg.Provider,{value:Ne(Ne({},Or),li)},v(St)));else{var fa=g||pwe;Sa=w.exports.createElement(Ap,xt({},Or,li),typeof fa=="function"?fa(St):fa)}var Mr=w.exports.createElement(x,xt({className:Wt(!lt&&r,p),style:d,ref:t},C),Yt.map(Ka),_t?Sa:null,b&&w.exports.createElement(Ap,xt({},Or,{responsive:Ce,responsiveDisabled:!Ie,order:jt,className:"".concat(tr,"-suffix"),registerSize:ca,display:!0,style:Ba}),b));return Ce&&(Mr=w.exports.createElement(mh,{onResize:Bt,disabled:!Ie},Mr)),Mr}var Cs=w.exports.forwardRef(hwe);Cs.displayName="Overflow";Cs.Item=sD;Cs.RESPONSIVE=lD;Cs.INVALIDATE=uD;var LE=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return n};LE("bottomLeft","bottomRight","topLeft","topRight");var mwe=function(t,n,r){return r!==void 0?r:"".concat(t,"-").concat(n)},Ui={adjustX:1,adjustY:1},$i=[0,0],cD={left:{points:["cr","cl"],overflow:Ui,offset:[-4,0],targetOffset:$i},right:{points:["cl","cr"],overflow:Ui,offset:[4,0],targetOffset:$i},top:{points:["bc","tc"],overflow:Ui,offset:[0,-4],targetOffset:$i},bottom:{points:["tc","bc"],overflow:Ui,offset:[0,4],targetOffset:$i},topLeft:{points:["bl","tl"],overflow:Ui,offset:[0,-4],targetOffset:$i},leftTop:{points:["tr","tl"],overflow:Ui,offset:[-4,0],targetOffset:$i},topRight:{points:["br","tr"],overflow:Ui,offset:[0,-4],targetOffset:$i},rightTop:{points:["tl","tr"],overflow:Ui,offset:[4,0],targetOffset:$i},bottomRight:{points:["tr","br"],overflow:Ui,offset:[0,4],targetOffset:$i},rightBottom:{points:["bl","br"],overflow:Ui,offset:[4,0],targetOffset:$i},bottomLeft:{points:["tl","bl"],overflow:Ui,offset:[0,4],targetOffset:$i},leftBottom:{points:["br","bl"],overflow:Ui,offset:[-4,0],targetOffset:$i}},gwe=function(t){var n=t.overlay,r=t.prefixCls,a=t.id,i=t.overlayInnerStyle;return w.exports.createElement("div",{className:"".concat(r,"-inner"),id:a,role:"tooltip",style:i},typeof n=="function"?n():n)},vwe=function(t,n){var r=t.overlayClassName,a=t.trigger,i=a===void 0?["hover"]:a,o=t.mouseEnterDelay,s=o===void 0?0:o,l=t.mouseLeaveDelay,u=l===void 0?.1:l,c=t.overlayStyle,f=t.prefixCls,d=f===void 0?"rc-tooltip":f,p=t.children,h=t.onVisibleChange,g=t.afterVisibleChange,v=t.transitionName,b=t.animation,y=t.motion,x=t.placement,E=x===void 0?"right":x,T=t.align,C=T===void 0?{}:T,I=t.destroyTooltipOnHide,P=I===void 0?!1:I,j=t.defaultVisible,A=t.getTooltipContainer,S=t.overlayInnerStyle,M=On(t,["overlayClassName","trigger","mouseEnterDelay","mouseLeaveDelay","overlayStyle","prefixCls","children","onVisibleChange","afterVisibleChange","transitionName","animation","motion","placement","align","destroyTooltipOnHide","defaultVisible","getTooltipContainer","overlayInnerStyle"]),O=w.exports.useRef(null);w.exports.useImperativeHandle(n,function(){return O.current});var R=Ne({},M);"visible"in t&&(R.popupVisible=t.visible);var H=function(){var ae=t.arrowContent,le=ae===void 0?null:ae,fe=t.overlay,ge=t.id;return[w.exports.createElement("div",{className:"".concat(d,"-arrow"),key:"arrow"},le),w.exports.createElement(gwe,{key:"content",prefixCls:d,id:ge,overlay:fe,overlayInnerStyle:S})]},ee=!1,re=!1;if(typeof P=="boolean")ee=P;else if(P&&sr(P)==="object"){var Y=P.keepParent;ee=Y===!0,re=Y===!1}return w.exports.createElement(IE,xt({popupClassName:r,prefixCls:d,popup:H,action:i,builtinPlacements:cD,popupPlacement:E,ref:O,popupAlign:C,getPopupContainer:A,onPopupVisibleChange:h,afterPopupVisibleChange:g,popupTransitionName:v,popupAnimation:b,popupMotion:y,defaultPopupVisible:j,destroyPopupOnHide:ee,autoDestroy:re,mouseLeaveDelay:u,popupStyle:c,mouseEnterDelay:s},R),p)},bwe=w.exports.forwardRef(vwe);LE("success","processing","error","default","warning");var ywe=LE("pink","red","yellow","orange","cyan","green","blue","purple","geekblue","magenta","volcano","gold","lime"),xwe={adjustX:1,adjustY:1},n8={adjustX:0,adjustY:0},wwe=[0,0];function r8(e){return typeof e=="boolean"?e?xwe:n8:xt(xt({},n8),e)}function _we(e){var t=e.arrowWidth,n=t===void 0?4:t,r=e.horizontalArrowShift,a=r===void 0?16:r,i=e.verticalArrowShift,o=i===void 0?8:i,s=e.autoAdjustOverflow,l=e.arrowPointAtCenter,u={left:{points:["cr","cl"],offset:[-4,0]},right:{points:["cl","cr"],offset:[4,0]},top:{points:["bc","tc"],offset:[0,-4]},bottom:{points:["tc","bc"],offset:[0,4]},topLeft:{points:["bl","tc"],offset:[-(a+n),-4]},leftTop:{points:["tr","cl"],offset:[-4,-(o+n)]},topRight:{points:["br","tc"],offset:[a+n,-4]},rightTop:{points:["tl","cr"],offset:[4,-(o+n)]},bottomRight:{points:["tr","bc"],offset:[a+n,4]},rightBottom:{points:["bl","cr"],offset:[4,o+n]},bottomLeft:{points:["tl","bc"],offset:[-(a+n),4]},leftBottom:{points:["br","cl"],offset:[-4,o+n]}};return Object.keys(u).forEach(function(c){u[c]=l?xt(xt({},u[c]),{overflow:r8(s),targetOffset:wwe}):xt(xt({},cD[c]),{overflow:r8(s)}),u[c].ignoreShake=!0}),u}var Ewe=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]]);return n},kwe=function(t,n){var r={},a=xt({},t);return n.forEach(function(i){t&&i in t&&(r[i]=t[i],delete a[i])}),{picked:r,omitted:a}},a8=new RegExp("^(".concat(ywe.join("|"),")(-inverse)?$"));function Swe(e,t){var n=e.type;if((n.__ANT_BUTTON===!0||e.type==="button")&&e.props.disabled||n.__ANT_SWITCH===!0&&(e.props.disabled||e.props.loading)){var r=kwe(e.props.style,["position","left","right","top","bottom","float","display","zIndex"]),a=r.picked,i=r.omitted,o=xt(xt({display:"inline-block"},a),{cursor:"not-allowed",width:e.props.block?"100%":null}),s=xt(xt({},i),{pointerEvents:"none"}),l=HF(e,{style:s,className:null});return w.exports.createElement("span",{style:o,className:Wt(e.props.className,"".concat(t,"-disabled-compatible-wrapper"))},l)}return e}var fD=w.exports.forwardRef(function(e,t){var n,r=w.exports.useContext(ts),a=r.getPopupContainer,i=r.getPrefixCls,o=r.direction,s=_l(!1,{value:e.visible,defaultValue:e.defaultVisible}),l=Le(s,2),u=l[0],c=l[1],f=function(){var J=e.title,ae=e.overlay;return!J&&!ae&&J!==0},d=function(J){var ae;c(f()?!1:J),f()||(ae=e.onVisibleChange)===null||ae===void 0||ae.call(e,J)},p=function(){var J=e.builtinPlacements,ae=e.arrowPointAtCenter,le=e.autoAdjustOverflow;return J||_we({arrowPointAtCenter:ae,autoAdjustOverflow:le})},h=function(J,ae){var le=p(),fe=Object.keys(le).find(function(Ve){return le[Ve].points[0]===ae.points[0]&&le[Ve].points[1]===ae.points[1]});if(!!fe){var ge=J.getBoundingClientRect(),we={top:"50%",left:"50%"};fe.indexOf("top")>=0||fe.indexOf("Bottom")>=0?we.top="".concat(ge.height-ae.offset[1],"px"):(fe.indexOf("Top")>=0||fe.indexOf("bottom")>=0)&&(we.top="".concat(-ae.offset[1],"px")),fe.indexOf("left")>=0||fe.indexOf("Right")>=0?we.left="".concat(ge.width-ae.offset[0],"px"):(fe.indexOf("right")>=0||fe.indexOf("Left")>=0)&&(we.left="".concat(-ae.offset[0],"px")),J.style.transformOrigin="".concat(we.left," ").concat(we.top)}},g=function(){var J=e.title,ae=e.overlay;return J===0?J:ae||J||""},v=e.getPopupContainer,b=Ewe(e,["getPopupContainer"]),y=e.prefixCls,x=e.openClassName,E=e.getTooltipContainer,T=e.overlayClassName,C=e.color,I=e.overlayInnerStyle,P=e.children,j=i("tooltip",y),A=i(),S=u;!("visible"in e)&&f()&&(S=!1);var M=Swe(GF(P)?P:w.exports.createElement("span",null,P),j),O=M.props,R=Wt(O.className,m({},x||"".concat(j,"-open"),!0)),H=Wt(T,(n={},m(n,"".concat(j,"-rtl"),o==="rtl"),m(n,"".concat(j,"-").concat(C),C&&a8.test(C)),n)),ee=I,re;return C&&!a8.test(C)&&(ee=xt(xt({},I),{background:C}),re={"--antd-arrow-background-color":C}),w.exports.createElement(bwe,xt({},b,{prefixCls:j,overlayClassName:H,getTooltipContainer:v||E||a,ref:t,builtinPlacements:p(),overlay:g(),visible:S,onVisibleChange:d,onPopupAlign:h,overlayInnerStyle:ee,arrowContent:w.exports.createElement("span",{className:"".concat(j,"-arrow-content"),style:re}),motion:{motionName:mwe(A,"zoom-big-fast",e.transitionName),motionDeadline:1e3}}),S?HF(M,{className:R}):M)});fD.defaultProps={placement:"top",mouseEnterDelay:.1,mouseLeaveDelay:.1,arrowPointAtCenter:!1,autoAdjustOverflow:!0};var Cwe=fD,Twe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M176 511a56 56 0 10112 0 56 56 0 10-112 0zm280 0a56 56 0 10112 0 56 56 0 10-112 0zm280 0a56 56 0 10112 0 56 56 0 10-112 0z"}}]},name:"ellipsis",theme:"outlined"},Awe=Twe,dD=function(t,n){return w.exports.createElement(SE,Ne(Ne({},t),{},{ref:n,icon:Awe}))};dD.displayName="EllipsisOutlined";var Owe=w.exports.forwardRef(dD),NE=function(t,n,r,a){var i=r?r.call(a,t,n):void 0;if(i!==void 0)return!!i;if(t===n)return!0;if(typeof t!="object"||!t||typeof n!="object"||!n)return!1;var o=Object.keys(t),s=Object.keys(n);if(o.length!==s.length)return!1;for(var l=Object.prototype.hasOwnProperty.bind(n),u=0;u<o.length;u++){var c=o[u];if(!l(c))return!1;var f=t[c],d=n[c];if(i=r?r.call(a,f,d,c):void 0,i===!1||i===void 0&&f!==d)return!1}return!0},Mwe=["children","locked"],So=w.exports.createContext(null);function Rwe(e,t){var n=Ne({},e);return Object.keys(t).forEach(function(r){var a=t[r];a!==void 0&&(n[r]=a)}),n}function bh(e){var t=e.children,n=e.locked,r=On(e,Mwe),a=w.exports.useContext(So),i=gye(function(){return Rwe(a,r)},[a,r],function(o,s){return!n&&(o[0]!==s[0]||!NE(o[1],s[1]))});return w.exports.createElement(So.Provider,{value:i},t)}function pD(e,t,n,r){var a=w.exports.useContext(So),i=a.activeKey,o=a.onActive,s=a.onInactive,l={active:i===e};return t||(l.onMouseEnter=function(u){n==null||n({key:e,domEvent:u}),o(e)},l.onMouseLeave=function(u){r==null||r({key:e,domEvent:u}),s(e)}),l}var Pwe=["item"];function Yg(e){var t=e.item,n=On(e,Pwe);return Object.defineProperty(n,"item",{get:function(){return wo(!1,"`info.item` is deprecated since we will move to function component that not provides React Node instance in future."),t}}),n}function hD(e){var t=e.icon,n=e.props,r=e.children,a;return typeof t=="function"?a=w.exports.createElement(t,Ne({},n)):a=t,a||r||null}function mD(e){var t=w.exports.useContext(So),n=t.mode,r=t.rtl,a=t.inlineIndent;if(n!=="inline")return null;var i=e;return r?{paddingRight:i*a}:{paddingLeft:i*a}}var Iwe=[],gD=w.exports.createContext(null);function lb(){return w.exports.useContext(gD)}var vD=w.exports.createContext(Iwe);function $h(e){var t=w.exports.useContext(vD);return w.exports.useMemo(function(){return e!==void 0?[].concat(Ue(t),[e]):t},[t,e])}var bD=w.exports.createContext(null),yD=w.exports.createContext(null);function FE(e,t){return e===void 0?null:"".concat(e,"-").concat(t)}function xD(e){var t=w.exports.useContext(yD);return FE(t,e)}var DE=w.exports.createContext({}),Lwe=["title","attribute","elementRef"],Nwe=["style","className","eventKey","warnKey","disabled","itemIcon","children","role","onMouseEnter","onMouseLeave","onClick","onKeyDown","onFocus"],Fwe=["active"],Dwe=function(e){Ct(n,e);var t=Dh(n);function n(){return Ae(this,n),t.apply(this,arguments)}return Oe(n,[{key:"render",value:function(){var a=this.props,i=a.title,o=a.attribute,s=a.elementRef,l=On(a,Lwe),u=Hf(l,["eventKey"]);return wo(!o,"`attribute` of Menu.Item is deprecated. Please pass attribute directly."),w.exports.createElement(Cs.Item,xt({},o,{title:typeof i=="string"?i:void 0},u,{ref:s}))}}]),n}(w.exports.Component),Bwe=function(t){var n,r=t.style,a=t.className,i=t.eventKey;t.warnKey;var o=t.disabled,s=t.itemIcon,l=t.children,u=t.role,c=t.onMouseEnter,f=t.onMouseLeave,d=t.onClick,p=t.onKeyDown,h=t.onFocus,g=On(t,Nwe),v=xD(i),b=w.exports.useContext(So),y=b.prefixCls,x=b.onItemClick,E=b.disabled,T=b.overflowDisabled,C=b.itemIcon,I=b.selectedKeys,P=b.onActive,j=w.exports.useContext(DE),A=j._internalRenderMenuItem,S="".concat(y,"-item"),M=w.exports.useRef(),O=w.exports.useRef(),R=E||o,H=$h(i),ee=function(Fe){return{key:i,keyPath:Ue(H).reverse(),item:M.current,domEvent:Fe}},re=s||C,Y=pD(i,R,c,f),J=Y.active,ae=On(Y,Fwe),le=I.includes(i),fe=mD(H.length),ge=function(Fe){if(!R){var Je=ee(Fe);d==null||d(Yg(Je)),x(Je)}},we=function(Fe){if(p==null||p(Fe),Fe.which===Et.ENTER){var Je=ee(Fe);d==null||d(Yg(Je)),x(Je)}},Ve=function(Fe){P(i),h==null||h(Fe)},Lt={};t.role==="option"&&(Lt["aria-selected"]=le);var Nt=w.exports.createElement(Dwe,xt({ref:M,elementRef:O,role:u===null?"none":u||"menuitem",tabIndex:o?null:-1,"data-menu-id":T&&v?null:v},g,ae,Lt,{component:"li","aria-disabled":o,style:Ne(Ne({},fe),r),className:Wt(S,(n={},m(n,"".concat(S,"-active"),J),m(n,"".concat(S,"-selected"),le),m(n,"".concat(S,"-disabled"),R),n),a),onClick:ge,onKeyDown:we,onFocus:Ve}),l,w.exports.createElement(hD,{props:Ne(Ne({},t),{},{isSelected:le}),icon:re}));return A&&(Nt=A(Nt,t,{selected:le})),Nt};function ub(e){var t=e.eventKey,n=lb(),r=$h(t);return w.exports.useEffect(function(){if(n)return n.registerPath(t,r),function(){n.unregisterPath(t,r)}},[r]),n?null:w.exports.createElement(Bwe,e)}var zwe=["label","children","key","type"];function BE(e,t){return Tf(e).map(function(n,r){if(w.exports.isValidElement(n)){var a,i,o=n.key,s=(a=(i=n.props)===null||i===void 0?void 0:i.eventKey)!==null&&a!==void 0?a:o,l=s==null;l&&(s="tmp_key-".concat([].concat(Ue(t),[r]).join("-")));var u={key:s,eventKey:s};return w.exports.cloneElement(n,u)}return n})}function r_(e){return(e||[]).map(function(t,n){if(t&&sr(t)==="object"){var r=t.label,a=t.children,i=t.key,o=t.type,s=On(t,zwe),l=i!=null?i:"tmp-".concat(n);return a||o==="group"?o==="group"?w.exports.createElement(SD,xt({key:l},s,{title:r}),r_(a)):w.exports.createElement(UE,xt({key:l},s,{title:r}),r_(a)):o==="divider"?w.exports.createElement(CD,xt({key:l},s)):w.exports.createElement(ub,xt({key:l},s),r)}return null}).filter(function(t){return t})}function Uwe(e,t,n){var r=e;return t&&(r=r_(t)),BE(r,n)}function Ac(e){var t=w.exports.useRef(e);t.current=e;var n=w.exports.useCallback(function(){for(var r,a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return(r=t.current)===null||r===void 0?void 0:r.call.apply(r,[t].concat(i))},[]);return e?n:void 0}var $we=["className","children"],Vwe=function(t,n){var r=t.className,a=t.children,i=On(t,$we),o=w.exports.useContext(So),s=o.prefixCls,l=o.mode,u=o.rtl;return w.exports.createElement("ul",xt({className:Wt(s,u&&"".concat(s,"-rtl"),"".concat(s,"-sub"),"".concat(s,"-").concat(l==="inline"?"inline":"vertical"),r)},i,{"data-menu-list":!0,ref:n}),a)},zE=w.exports.forwardRef(Vwe);zE.displayName="SubMenuList";var pl={adjustX:1,adjustY:1},jwe={topLeft:{points:["bl","tl"],overflow:pl,offset:[0,-7]},bottomLeft:{points:["tl","bl"],overflow:pl,offset:[0,7]},leftTop:{points:["tr","tl"],overflow:pl,offset:[-4,0]},rightTop:{points:["tl","tr"],overflow:pl,offset:[4,0]}},Gwe={topLeft:{points:["bl","tl"],overflow:pl,offset:[0,-7]},bottomLeft:{points:["tl","bl"],overflow:pl,offset:[0,7]},rightTop:{points:["tr","tl"],overflow:pl,offset:[-4,0]},leftTop:{points:["tl","tr"],overflow:pl,offset:[4,0]}};function wD(e,t,n){if(t)return t;if(n)return n[e]||n.other}var Hwe={horizontal:"bottomLeft",vertical:"rightTop","vertical-left":"rightTop","vertical-right":"leftTop"};function Wwe(e){var t=e.prefixCls,n=e.visible,r=e.children,a=e.popup,i=e.popupClassName,o=e.popupOffset,s=e.disabled,l=e.mode,u=e.onVisibleChange,c=w.exports.useContext(So),f=c.getPopupContainer,d=c.rtl,p=c.subMenuOpenDelay,h=c.subMenuCloseDelay,g=c.builtinPlacements,v=c.triggerSubMenuAction,b=c.forceSubMenuRender,y=c.rootClassName,x=c.motion,E=c.defaultMotions,T=w.exports.useState(!1),C=Le(T,2),I=C[0],P=C[1],j=Ne(d?Ne({},Gwe):Ne({},jwe),g),A=Hwe[l],S=wD(l,x,E),M=Ne(Ne({},S),{},{leavedClassName:"".concat(t,"-hidden"),removeOnLeave:!1,motionAppear:!0}),O=w.exports.useRef();return w.exports.useEffect(function(){return O.current=pr(function(){P(n)}),function(){pr.cancel(O.current)}},[n]),w.exports.createElement(IE,{prefixCls:t,popupClassName:Wt("".concat(t,"-popup"),m({},"".concat(t,"-rtl"),d),i,y),stretch:l==="horizontal"?"minWidth":null,getPopupContainer:f,builtinPlacements:j,popupPlacement:A,popupVisible:I,popup:a,popupAlign:o&&{offset:o},action:s?[]:[v],mouseEnterDelay:p,mouseLeaveDelay:h,onPopupVisibleChange:u,forceRender:b,popupMotion:M},r)}function Xwe(e){var t=e.id,n=e.open,r=e.keyPath,a=e.children,i="inline",o=w.exports.useContext(So),s=o.prefixCls,l=o.forceSubMenuRender,u=o.motion,c=o.defaultMotions,f=o.mode,d=w.exports.useRef(!1);d.current=f===i;var p=w.exports.useState(!d.current),h=Le(p,2),g=h[0],v=h[1],b=d.current?n:!1;w.exports.useEffect(function(){d.current&&v(!1)},[f]);var y=Ne({},wD(i,u,c));r.length>1&&(y.motionAppear=!1);var x=y.onVisibleChanged;return y.onVisibleChanged=function(E){return!d.current&&!E&&v(!0),x==null?void 0:x(E)},g?null:w.exports.createElement(bh,{mode:i,locked:!d.current},w.exports.createElement(ob,xt({visible:b},y,{forceRender:l,removeOnLeave:!1,leavedClassName:"".concat(s,"-hidden")}),function(E){var T=E.className,C=E.style;return w.exports.createElement(zE,{id:t,className:T,style:C},a)}))}var Ywe=["style","className","title","eventKey","warnKey","disabled","internalPopupClose","children","itemIcon","expandIcon","popupClassName","popupOffset","onClick","onMouseEnter","onMouseLeave","onTitleClick","onTitleMouseEnter","onTitleMouseLeave"],Zwe=["active"],qwe=function(t){var n,r=t.style,a=t.className,i=t.title,o=t.eventKey;t.warnKey;var s=t.disabled,l=t.internalPopupClose,u=t.children,c=t.itemIcon,f=t.expandIcon,d=t.popupClassName,p=t.popupOffset,h=t.onClick,g=t.onMouseEnter,v=t.onMouseLeave,b=t.onTitleClick,y=t.onTitleMouseEnter,x=t.onTitleMouseLeave,E=On(t,Ywe),T=xD(o),C=w.exports.useContext(So),I=C.prefixCls,P=C.mode,j=C.openKeys,A=C.disabled,S=C.overflowDisabled,M=C.activeKey,O=C.selectedKeys,R=C.itemIcon,H=C.expandIcon,ee=C.onItemClick,re=C.onOpenChange,Y=C.onActive,J=w.exports.useContext(DE),ae=J._internalRenderSubMenuItem,le=w.exports.useContext(bD),fe=le.isSubPathKey,ge=$h(),we="".concat(I,"-submenu"),Ve=A||s,Lt=w.exports.useRef(),Nt=w.exports.useRef(),Zt=c||R,Fe=f||H,Je=j.includes(o),tt=!S&&Je,ve=fe(O,o),pt=pD(o,Ve,y,x),kt=pt.active,wt=On(pt,Zwe),At=w.exports.useState(!1),ht=Le(At,2),jt=ht[0],Gt=ht[1],An=function(Sn){Ve||Gt(Sn)},_r=function(Sn){An(!0),g==null||g({key:o,domEvent:Sn})},er=function(Sn){An(!1),v==null||v({key:o,domEvent:Sn})},tr=w.exports.useMemo(function(){return kt||(P!=="inline"?jt||fe([M],o):!1)},[P,kt,M,jt,o,fe]),k=mD(ge.length),Ce=function(Sn){Ve||(b==null||b({key:o,domEvent:Sn}),P==="inline"&&re(o,!Je))},Ie=Ac(function(Bt){h==null||h(Yg(Bt)),ee(Bt)}),lt=function(Sn){P!=="inline"&&re(o,Sn)},_t=function(){Y(o)},Yt=T&&"".concat(T,"-popup"),St=w.exports.createElement("div",xt({role:"menuitem",style:k,className:"".concat(we,"-title"),tabIndex:Ve?null:-1,ref:Lt,title:typeof i=="string"?i:null,"data-menu-id":S&&T?null:T,"aria-expanded":tt,"aria-haspopup":!0,"aria-controls":Yt,"aria-disabled":Ve,onClick:Ce,onFocus:_t},wt),i,w.exports.createElement(hD,{icon:P!=="horizontal"?Fe:null,props:Ne(Ne({},t),{},{isOpen:tt,isSubMenu:!0})},w.exports.createElement("i",{className:"".concat(we,"-arrow")}))),Rt=w.exports.useRef(P);if(P!=="inline"&&(Rt.current=ge.length>1?"vertical":P),!S){var Tt=Rt.current;St=w.exports.createElement(Wwe,{mode:Tt,prefixCls:we,visible:!l&&tt&&P!=="inline",popupClassName:d,popupOffset:p,popup:w.exports.createElement(bh,{mode:Tt==="horizontal"?"vertical":Tt},w.exports.createElement(zE,{id:Yt,ref:Nt},u)),disabled:Ve,onVisibleChange:lt},St)}var $t=w.exports.createElement(Cs.Item,xt({role:"none"},E,{component:"li",style:r,className:Wt(we,"".concat(we,"-").concat(P),a,(n={},m(n,"".concat(we,"-open"),tt),m(n,"".concat(we,"-active"),tr),m(n,"".concat(we,"-selected"),ve),m(n,"".concat(we,"-disabled"),Ve),n)),onMouseEnter:_r,onMouseLeave:er}),St,!S&&w.exports.createElement(Xwe,{id:Yt,open:tt,keyPath:ge},u));return ae&&($t=ae($t,t,{selected:ve,active:tr,open:tt,disabled:Ve})),w.exports.createElement(bh,{onItemClick:Ie,mode:P==="horizontal"?"vertical":P,itemIcon:Zt,expandIcon:Fe},$t)};function UE(e){var t=e.eventKey,n=e.children,r=$h(t),a=BE(n,r),i=lb();w.exports.useEffect(function(){if(i)return i.registerPath(t,r),function(){i.unregisterPath(t,r)}},[r]);var o;return i?o=a:o=w.exports.createElement(qwe,e,a),w.exports.createElement(vD.Provider,{value:r},o)}function i8(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(YF(e)){var n=e.nodeName.toLowerCase(),r=["input","select","textarea","button"].includes(n)||e.isContentEditable||n==="a"&&!!e.getAttribute("href"),a=e.getAttribute("tabindex"),i=Number(a),o=null;return a&&!Number.isNaN(i)?o=i:r&&o===null&&(o=0),r&&e.disabled&&(o=null),o!==null&&(o>=0||t&&o<0)}return!1}function _D(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,n=Ue(e.querySelectorAll("*")).filter(function(r){return i8(r,t)});return i8(e,t)&&n.unshift(e),n}var a_=Et.LEFT,i_=Et.RIGHT,o_=Et.UP,V0=Et.DOWN,j0=Et.ENTER,ED=Et.ESC,Yd=Et.HOME,Zd=Et.END,o8=[o_,V0,a_,i_];function Kwe(e,t,n,r){var a,i,o,s,l="prev",u="next",c="children",f="parent";if(e==="inline"&&r===j0)return{inlineTrigger:!0};var d=(a={},m(a,o_,l),m(a,V0,u),a),p=(i={},m(i,a_,n?u:l),m(i,i_,n?l:u),m(i,V0,c),m(i,j0,c),i),h=(o={},m(o,o_,l),m(o,V0,u),m(o,j0,c),m(o,ED,f),m(o,a_,n?c:f),m(o,i_,n?f:c),o),g={inline:d,horizontal:p,vertical:h,inlineSub:d,horizontalSub:h,verticalSub:h},v=(s=g["".concat(e).concat(t?"":"Sub")])===null||s===void 0?void 0:s[r];switch(v){case l:return{offset:-1,sibling:!0};case u:return{offset:1,sibling:!0};case f:return{offset:-1,sibling:!1};case c:return{offset:1,sibling:!1};default:return null}}function Qwe(e){for(var t=e;t;){if(t.getAttribute("data-menu-list"))return t;t=t.parentElement}return null}function Jwe(e,t){for(var n=e||document.activeElement;n;){if(t.has(n))return n;n=n.parentElement}return null}function kD(e,t){var n=_D(e,!0);return n.filter(function(r){return t.has(r)})}function s8(e,t,n){var r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1;if(!e)return null;var a=kD(e,t),i=a.length,o=a.findIndex(function(s){return n===s});return r<0?o===-1?o=i-1:o-=1:r>0&&(o+=1),o=(o+i)%i,a[o]}function e_e(e,t,n,r,a,i,o,s,l,u){var c=w.exports.useRef(),f=w.exports.useRef();f.current=t;var d=function(){pr.cancel(c.current)};return w.exports.useEffect(function(){return function(){d()}},[]),function(p){var h=p.which;if([].concat(o8,[j0,ED,Yd,Zd]).includes(h)){var g,v,b,y=function(){g=new Set,v=new Map,b=new Map;var H=i();return H.forEach(function(ee){var re=document.querySelector("[data-menu-id='".concat(FE(r,ee),"']"));re&&(g.add(re),b.set(re,ee),v.set(ee,re))}),g};y();var x=v.get(t),E=Jwe(x,g),T=b.get(E),C=Kwe(e,o(T,!0).length===1,n,h);if(!C&&h!==Yd&&h!==Zd)return;(o8.includes(h)||[Yd,Zd].includes(h))&&p.preventDefault();var I=function(H){if(H){var ee=H,re=H.querySelector("a");re!=null&&re.getAttribute("href")&&(ee=re);var Y=b.get(H);s(Y),d(),c.current=pr(function(){f.current===Y&&ee.focus()})}};if([Yd,Zd].includes(h)||C.sibling||!E){var P;!E||e==="inline"?P=a.current:P=Qwe(E);var j,A=kD(P,g);h===Yd?j=A[0]:h===Zd?j=A[A.length-1]:j=s8(P,g,E,C.offset),I(j)}else if(C.inlineTrigger)l(T);else if(C.offset>0)l(T,!0),d(),c.current=pr(function(){y();var R=E.getAttribute("aria-controls"),H=document.getElementById(R),ee=s8(H,g);I(ee)},5);else if(C.offset<0){var S=o(T,!0),M=S[S.length-2],O=v.get(M);l(M,!1),I(O)}}u==null||u(p)}}var t_e=Math.random().toFixed(5).toString().slice(2),l8=0;function n_e(e){var t=_l(e,{value:e}),n=Le(t,2),r=n[0],a=n[1];return w.exports.useEffect(function(){l8+=1;var i="".concat(t_e,"-").concat(l8);a("rc-menu-uuid-".concat(i))},[]),r}function r_e(e){Promise.resolve().then(e)}var $E="__RC_UTIL_PATH_SPLIT__",u8=function(t){return t.join($E)},a_e=function(t){return t.split($E)},s_="rc-menu-more";function i_e(){var e=w.exports.useState({}),t=Le(e,2),n=t[1],r=w.exports.useRef(new Map),a=w.exports.useRef(new Map),i=w.exports.useState([]),o=Le(i,2),s=o[0],l=o[1],u=w.exports.useRef(0),c=w.exports.useRef(!1),f=function(){c.current||n({})},d=w.exports.useCallback(function(x,E){var T=u8(E);a.current.set(T,x),r.current.set(x,T),u.current+=1;var C=u.current;r_e(function(){C===u.current&&f()})},[]),p=w.exports.useCallback(function(x,E){var T=u8(E);a.current.delete(T),r.current.delete(x)},[]),h=w.exports.useCallback(function(x){l(x)},[]),g=w.exports.useCallback(function(x,E){var T=r.current.get(x)||"",C=a_e(T);return E&&s.includes(C[0])&&C.unshift(s_),C},[s]),v=w.exports.useCallback(function(x,E){return x.some(function(T){var C=g(T,!0);return C.includes(E)})},[g]),b=function(){var E=Ue(r.current.keys());return s.length&&E.push(s_),E},y=w.exports.useCallback(function(x){var E="".concat(r.current.get(x)).concat($E),T=new Set;return Ue(a.current.keys()).forEach(function(C){C.startsWith(E)&&T.add(a.current.get(C))}),T},[]);return w.exports.useEffect(function(){return function(){c.current=!0}},[]),{registerPath:d,unregisterPath:p,refreshOverflowKeys:h,isSubPathKey:v,getKeyPath:g,getKeys:b,getSubPathKeys:y}}var o_e=["prefixCls","rootClassName","style","className","tabIndex","items","children","direction","id","mode","inlineCollapsed","disabled","disabledOverflow","subMenuOpenDelay","subMenuCloseDelay","forceSubMenuRender","defaultOpenKeys","openKeys","activeKey","defaultActiveFirst","selectable","multiple","defaultSelectedKeys","selectedKeys","onSelect","onDeselect","inlineIndent","motion","defaultMotions","triggerSubMenuAction","builtinPlacements","itemIcon","expandIcon","overflowedIndicator","overflowedIndicatorPopupClassName","getPopupContainer","onClick","onOpenChange","onKeyDown","openAnimation","openTransitionName","_internalRenderMenuItem","_internalRenderSubMenuItem"],wc=[],s_e=w.exports.forwardRef(function(e,t){var n,r,a=e.prefixCls,i=a===void 0?"rc-menu":a,o=e.rootClassName,s=e.style,l=e.className,u=e.tabIndex,c=u===void 0?0:u,f=e.items,d=e.children,p=e.direction,h=e.id,g=e.mode,v=g===void 0?"vertical":g,b=e.inlineCollapsed,y=e.disabled,x=e.disabledOverflow,E=e.subMenuOpenDelay,T=E===void 0?.1:E,C=e.subMenuCloseDelay,I=C===void 0?.1:C,P=e.forceSubMenuRender,j=e.defaultOpenKeys,A=e.openKeys,S=e.activeKey,M=e.defaultActiveFirst,O=e.selectable,R=O===void 0?!0:O,H=e.multiple,ee=H===void 0?!1:H,re=e.defaultSelectedKeys,Y=e.selectedKeys,J=e.onSelect,ae=e.onDeselect,le=e.inlineIndent,fe=le===void 0?24:le,ge=e.motion,we=e.defaultMotions,Ve=e.triggerSubMenuAction,Lt=Ve===void 0?"hover":Ve,Nt=e.builtinPlacements,Zt=e.itemIcon,Fe=e.expandIcon,Je=e.overflowedIndicator,tt=Je===void 0?"...":Je,ve=e.overflowedIndicatorPopupClassName,pt=e.getPopupContainer,kt=e.onClick,wt=e.onOpenChange,At=e.onKeyDown;e.openAnimation,e.openTransitionName;var ht=e._internalRenderMenuItem,jt=e._internalRenderSubMenuItem,Gt=On(e,o_e),An=w.exports.useMemo(function(){return Uwe(d,f,wc)},[d,f]),_r=w.exports.useState(!1),er=Le(_r,2),tr=er[0],k=er[1],Ce=w.exports.useRef(),Ie=n_e(h),lt=p==="rtl",_t=w.exports.useMemo(function(){return(v==="inline"||v==="vertical")&&b?["vertical",b]:[v,!1]},[v,b]),Yt=Le(_t,2),St=Yt[0],Rt=Yt[1],Tt=w.exports.useState(0),$t=Le(Tt,2),Bt=$t[0],Sn=$t[1],Bn=Bt>=An.length-1||St!=="horizontal"||x,ca=_l(j,{value:A,postState:function(mn){return mn||wc}}),Da=Le(ca,2),Er=Da[0],Ba=Da[1],Or=function(mn){Ba(mn),wt==null||wt(mn)},Ka=w.exports.useState(Er),Sa=Le(Ka,2),li=Sa[0],fa=Sa[1],Mr=St==="inline",qt=w.exports.useRef(!1);w.exports.useEffect(function(){Mr&&fa(Er)},[Er]),w.exports.useEffect(function(){if(!qt.current){qt.current=!0;return}Mr?Ba(li):Or(wc)},[Mr]);var un=i_e(),cn=un.registerPath,kr=un.unregisterPath,da=un.refreshOverflowKeys,ro=un.isSubPathKey,ao=un.getKeyPath,Ti=un.getKeys,Yn=un.getSubPathKeys,fn=w.exports.useMemo(function(){return{registerPath:cn,unregisterPath:kr}},[cn,kr]),Qt=w.exports.useMemo(function(){return{isSubPathKey:ro}},[ro]);w.exports.useEffect(function(){da(Bn?wc:An.slice(Bt+1).map(function(wn){return wn.key}))},[Bt,Bn]);var Un=_l(S||M&&((n=An[0])===null||n===void 0?void 0:n.key),{value:S}),Mn=Le(Un,2),dn=Mn[0],Wr=Mn[1],Xr=Ac(function(wn){Wr(wn)}),za=Ac(function(){Wr(void 0)});w.exports.useImperativeHandle(t,function(){return{list:Ce.current,focus:function(mn){var Pn,$n=dn!=null?dn:(Pn=An.find(function(Fs){return!Fs.props.disabled}))===null||Pn===void 0?void 0:Pn.key;if($n){var nr,Mi,Ao;(nr=Ce.current)===null||nr===void 0||(Mi=nr.querySelector("li[data-menu-id='".concat(FE(Ie,$n),"']")))===null||Mi===void 0||(Ao=Mi.focus)===null||Ao===void 0||Ao.call(Mi,mn)}}}});var Ai=_l(re||[],{value:Y,postState:function(mn){return Array.isArray(mn)?mn:mn==null?wc:[mn]}}),bn=Le(Ai,2),tn=bn[0],Rn=bn[1],Sr=function(mn){if(R){var Pn=mn.key,$n=tn.includes(Pn),nr;ee?$n?nr=tn.filter(function(Ao){return Ao!==Pn}):nr=[].concat(Ue(tn),[Pn]):nr=[Pn],Rn(nr);var Mi=Ne(Ne({},mn),{},{selectedKeys:nr});$n?ae==null||ae(Mi):J==null||J(Mi)}!ee&&Er.length&&St!=="inline"&&Or(wc)},pa=Ac(function(wn){kt==null||kt(Yg(wn)),Sr(wn)}),Ua=Ac(function(wn,mn){var Pn=Er.filter(function(nr){return nr!==wn});if(mn)Pn.push(wn);else if(St!=="inline"){var $n=Yn(wn);Pn=Pn.filter(function(nr){return!$n.has(nr)})}NE(Er,Pn)||Or(Pn)}),io=Ac(pt),Bl=function(mn,Pn){var $n=Pn!=null?Pn:!Er.includes(mn);Ua(mn,$n)},Ns=e_e(St,dn,lt,Ie,Ce,Ti,ao,Wr,Bl,At);w.exports.useEffect(function(){k(!0)},[]);var oo=w.exports.useMemo(function(){return{_internalRenderMenuItem:ht,_internalRenderSubMenuItem:jt}},[ht,jt]),na=St!=="horizontal"||x?An:An.map(function(wn,mn){return w.exports.createElement(bh,{key:wn.key,overflowDisabled:mn>Bt},wn)}),Oi=w.exports.createElement(Cs,xt({id:h,ref:Ce,prefixCls:"".concat(i,"-overflow"),component:"ul",itemComponent:ub,className:Wt(i,"".concat(i,"-root"),"".concat(i,"-").concat(St),l,(r={},m(r,"".concat(i,"-inline-collapsed"),Rt),m(r,"".concat(i,"-rtl"),lt),r),o),dir:p,style:s,role:"menu",tabIndex:c,data:na,renderRawItem:function(mn){return mn},renderRawRest:function(mn){var Pn=mn.length,$n=Pn?An.slice(-Pn):null;return w.exports.createElement(UE,{eventKey:s_,title:tt,disabled:Bn,internalPopupClose:Pn===0,popupClassName:ve},$n)},maxCount:St!=="horizontal"||x?Cs.INVALIDATE:Cs.RESPONSIVE,ssr:"full","data-menu-list":!0,onVisibleChange:function(mn){Sn(mn)},onKeyDown:Ns},Gt));return w.exports.createElement(DE.Provider,{value:oo},w.exports.createElement(yD.Provider,{value:Ie},w.exports.createElement(bh,{prefixCls:i,rootClassName:o,mode:St,openKeys:Er,rtl:lt,disabled:y,motion:tr?ge:null,defaultMotions:tr?we:null,activeKey:dn,onActive:Xr,onInactive:za,selectedKeys:tn,inlineIndent:fe,subMenuOpenDelay:T,subMenuCloseDelay:I,forceSubMenuRender:P,builtinPlacements:Nt,triggerSubMenuAction:Lt,getPopupContainer:io,itemIcon:Zt,expandIcon:Fe,onItemClick:pa,onOpenChange:Ua},w.exports.createElement(bD.Provider,{value:Qt},Oi),w.exports.createElement("div",{style:{display:"none"},"aria-hidden":!0},w.exports.createElement(gD.Provider,{value:fn},An)))))}),l_e=["className","title","eventKey","children"],u_e=["children"],c_e=function(t){var n=t.className,r=t.title;t.eventKey;var a=t.children,i=On(t,l_e),o=w.exports.useContext(So),s=o.prefixCls,l="".concat(s,"-item-group");return w.exports.createElement("li",xt({},i,{onClick:function(c){return c.stopPropagation()},className:Wt(l,n)}),w.exports.createElement("div",{className:"".concat(l,"-title"),title:typeof r=="string"?r:void 0},r),w.exports.createElement("ul",{className:"".concat(l,"-list")},a))};function SD(e){var t=e.children,n=On(e,u_e),r=$h(n.eventKey),a=BE(t,r),i=lb();return i?a:w.exports.createElement(c_e,Hf(n,["warnKey"]),a)}function CD(e){var t=e.className,n=e.style,r=w.exports.useContext(So),a=r.prefixCls,i=lb();return i?null:w.exports.createElement("li",{className:Wt("".concat(a,"-item-divider"),t),style:n})}var Vh=s_e;Vh.Item=ub;Vh.SubMenu=UE;Vh.ItemGroup=SD;Vh.Divider=CD;var _c={adjustX:1,adjustY:1},Ec=[0,0],f_e={topLeft:{points:["bl","tl"],overflow:_c,offset:[0,-4],targetOffset:Ec},topCenter:{points:["bc","tc"],overflow:_c,offset:[0,-4],targetOffset:Ec},topRight:{points:["br","tr"],overflow:_c,offset:[0,-4],targetOffset:Ec},bottomLeft:{points:["tl","bl"],overflow:_c,offset:[0,4],targetOffset:Ec},bottomCenter:{points:["tc","bc"],overflow:_c,offset:[0,4],targetOffset:Ec},bottomRight:{points:["tr","br"],overflow:_c,offset:[0,4],targetOffset:Ec}},d_e=Et.ESC,p_e=Et.TAB;function h_e(e){var t=e.visible,n=e.setTriggerVisible,r=e.triggerRef,a=e.onVisibleChange,i=e.autoFocus,o=w.exports.useRef(!1),s=function(){if(t&&r.current){var f,d,p,h;(f=r.current)===null||f===void 0||(d=f.triggerRef)===null||d===void 0||(p=d.current)===null||p===void 0||(h=p.focus)===null||h===void 0||h.call(p),n(!1),typeof a=="function"&&a(!1)}},l=function(){var f,d,p,h,g=_D((f=r.current)===null||f===void 0||(d=f.popupRef)===null||d===void 0||(p=d.current)===null||p===void 0||(h=p.getElement)===null||h===void 0?void 0:h.call(p)),v=g[0];return v!=null&&v.focus?(v.focus(),o.current=!0,!0):!1},u=function(f){switch(f.keyCode){case d_e:s();break;case p_e:{var d=!1;o.current||(d=l()),d?f.preventDefault():s();break}}};w.exports.useEffect(function(){return t?(window.addEventListener("keydown",u),i&&pr(l,3),function(){window.removeEventListener("keydown",u),o.current=!1}):function(){o.current=!1}},[t])}var m_e=["arrow","prefixCls","transitionName","animation","align","placement","placements","getPopupContainer","showAction","hideAction","overlayClassName","overlayStyle","visible","trigger","autoFocus"];function g_e(e,t){var n=e.arrow,r=n===void 0?!1:n,a=e.prefixCls,i=a===void 0?"rc-dropdown":a,o=e.transitionName,s=e.animation,l=e.align,u=e.placement,c=u===void 0?"bottomLeft":u,f=e.placements,d=f===void 0?f_e:f,p=e.getPopupContainer,h=e.showAction,g=e.hideAction,v=e.overlayClassName,b=e.overlayStyle,y=e.visible,x=e.trigger,E=x===void 0?["hover"]:x,T=e.autoFocus,C=On(e,m_e),I=w.exports.useState(),P=Le(I,2),j=P[0],A=P[1],S="visible"in e?y:j,M=w.exports.useRef(null);w.exports.useImperativeHandle(t,function(){return M.current}),h_e({visible:S,setTriggerVisible:A,triggerRef:M,onVisibleChange:e.onVisibleChange,autoFocus:T});var O=function(){var ge=e.overlay,we;return typeof ge=="function"?we=ge():we=ge,we},R=function(ge){var we=e.onOverlayClick;A(!1),we&&we(ge)},H=function(ge){var we=e.onVisibleChange;A(ge),typeof we=="function"&&we(ge)},ee=function(){var ge=O();return w.exports.createElement(w.exports.Fragment,null,r&&w.exports.createElement("div",{className:"".concat(i,"-arrow")}),ge)},re=function(){var ge=e.overlay;return typeof ge=="function"?ee:ee()},Y=function(){var ge=e.minOverlayWidthMatchTrigger,we=e.alignPoint;return"minOverlayWidthMatchTrigger"in e?ge:!we},J=function(){var ge=e.openClassName;return ge!==void 0?ge:"".concat(i,"-open")},ae=function(){var ge=e.children,we=ge.props?ge.props:{},Ve=Wt(we.className,J());return S&&ge?w.exports.cloneElement(ge,{className:Ve}):ge},le=g;return!le&&E.indexOf("contextMenu")!==-1&&(le=["click"]),w.exports.createElement(IE,Ne(Ne({builtinPlacements:d},C),{},{prefixCls:i,ref:M,popupClassName:Wt(v,m({},"".concat(i,"-show-arrow"),r)),popupStyle:b,action:E,showAction:h,hideAction:le||[],popupPlacement:c,popupAlign:l,popupTransitionName:o,popupAnimation:s,popupVisible:S,stretch:Y()?"minWidth":"",popup:re(),onPopupVisibleChange:H,onPopupClick:R,getPopupContainer:p}),ae())}var v_e=w.exports.forwardRef(g_e),VE={exports:{}},cb={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var b_e=w.exports,y_e=Symbol.for("react.element"),x_e=Symbol.for("react.fragment"),w_e=Object.prototype.hasOwnProperty,__e=b_e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,E_e={key:!0,ref:!0,__self:!0,__source:!0};function TD(e,t,n){var r,a={},i=null,o=null;n!==void 0&&(i=""+n),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(o=t.ref);for(r in t)w_e.call(t,r)&&!E_e.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)a[r]===void 0&&(a[r]=t[r]);return{$$typeof:y_e,type:e,key:i,ref:o,props:a,_owner:__e.current}}cb.Fragment=x_e;cb.jsx=TD;cb.jsxs=TD;VE.exports=cb;const Op=VE.exports.jsx,k_e=VE.exports.jsxs;var S_e=function(t){var n,r,a=t.prefixCls,i=t.className,o=t.style,s=t.size,l=t.shape,u=Wt((n={},m(n,"".concat(a,"-lg"),s==="large"),m(n,"".concat(a,"-sm"),s==="small"),n)),c=Wt((r={},m(r,"".concat(a,"-circle"),l==="circle"),m(r,"".concat(a,"-square"),l==="square"),m(r,"".concat(a,"-round"),l==="round"),r)),f=typeof s=="number"?{width:s,height:s,lineHeight:"".concat(s,"px")}:{};return w.exports.createElement("span",{className:Wt(a,u,c,i),style:xt(xt({},f),o)})},fb=S_e,AD=function(t){var n=t.prefixCls,r=t.className,a=t.active,i=w.exports.useContext(ts),o=i.getPrefixCls,s=o("skeleton",n),l=Hf(t,["prefixCls","className"]),u=Wt(s,"".concat(s,"-element"),m({},"".concat(s,"-active"),a),r);return w.exports.createElement("div",{className:u},w.exports.createElement(fb,xt({prefixCls:"".concat(s,"-avatar")},l)))};AD.defaultProps={size:"default",shape:"circle"};var C_e=AD,OD=function(t){var n,r=t.prefixCls,a=t.className,i=t.active,o=t.block,s=o===void 0?!1:o,l=w.exports.useContext(ts),u=l.getPrefixCls,c=u("skeleton",r),f=Hf(t,["prefixCls"]),d=Wt(c,"".concat(c,"-element"),(n={},m(n,"".concat(c,"-active"),i),m(n,"".concat(c,"-block"),s),n),a);return w.exports.createElement("div",{className:d},w.exports.createElement(fb,xt({prefixCls:"".concat(c,"-button")},f)))};OD.defaultProps={size:"default"};var T_e=OD,A_e="M365.714286 329.142857q0 45.714286-32.036571 77.677714t-77.677714 32.036571-77.677714-32.036571-32.036571-77.677714 32.036571-77.677714 77.677714-32.036571 77.677714 32.036571 32.036571 77.677714zM950.857143 548.571429l0 256-804.571429 0 0-109.714286 182.857143-182.857143 91.428571 91.428571 292.571429-292.571429zM1005.714286 146.285714l-914.285714 0q-7.460571 0-12.873143 5.412571t-5.412571 12.873143l0 694.857143q0 7.460571 5.412571 12.873143t12.873143 5.412571l914.285714 0q7.460571 0 12.873143-5.412571t5.412571-12.873143l0-694.857143q0-7.460571-5.412571-12.873143t-12.873143-5.412571zM1097.142857 164.571429l0 694.857143q0 37.741714-26.843429 64.585143t-64.585143 26.843429l-914.285714 0q-37.741714 0-64.585143-26.843429t-26.843429-64.585143l0-694.857143q0-37.741714 26.843429-64.585143t64.585143-26.843429l914.285714 0q37.741714 0 64.585143 26.843429t26.843429 64.585143z",O_e=function(t){var n=t.prefixCls,r=t.className,a=t.style,i=w.exports.useContext(ts),o=i.getPrefixCls,s=o("skeleton",n),l=Wt(s,"".concat(s,"-element"),r);return w.exports.createElement("div",{className:l},w.exports.createElement("div",{className:Wt("".concat(s,"-image"),r),style:a},w.exports.createElement("svg",{viewBox:"0 0 1098 1024",xmlns:"http://www.w3.org/2000/svg",className:"".concat(s,"-image-svg")},w.exports.createElement("path",{d:A_e,className:"".concat(s,"-image-path")}))))},M_e=O_e,MD=function(t){var n,r=t.prefixCls,a=t.className,i=t.active,o=t.block,s=w.exports.useContext(ts),l=s.getPrefixCls,u=l("skeleton",r),c=Hf(t,["prefixCls"]),f=Wt(u,"".concat(u,"-element"),(n={},m(n,"".concat(u,"-active"),i),m(n,"".concat(u,"-block"),o),n),a);return w.exports.createElement("div",{className:f},w.exports.createElement(fb,xt({prefixCls:"".concat(u,"-input")},c)))};MD.defaultProps={size:"default"};var R_e=MD,P_e=function(t){var n=function(u){var c=t.width,f=t.rows,d=f===void 0?2:f;if(Array.isArray(c))return c[u];if(d-1===u)return c},r=t.prefixCls,a=t.className,i=t.style,o=t.rows,s=Ue(Array(o)).map(function(l,u){return w.exports.createElement("li",{key:u,style:{width:n(u)}})});return w.exports.createElement("ul",{className:Wt(r,a),style:i},s)},I_e=P_e,L_e=function(t){var n=t.prefixCls,r=t.className,a=t.width,i=t.style;return w.exports.createElement("h3",{className:Wt(n,r),style:xt({width:a},i)})},N_e=L_e;function Xx(e){return e&&sr(e)==="object"?e:{}}function F_e(e,t){return e&&!t?{size:"large",shape:"square"}:{size:"large",shape:"circle"}}function D_e(e,t){return!e&&t?{width:"38%"}:e&&t?{width:"50%"}:{}}function B_e(e,t){var n={};return(!e||!t)&&(n.width="61%"),!e&&t?n.rows=3:n.rows=2,n}var Xf=function(t){var n=t.prefixCls,r=t.loading,a=t.className,i=t.style,o=t.children,s=t.avatar,l=t.title,u=t.paragraph,c=t.active,f=t.round,d=w.exports.useContext(ts),p=d.getPrefixCls,h=d.direction,g=p("skeleton",n);if(r||!("loading"in t)){var v,b=!!s,y=!!l,x=!!u,E;if(b){var T=xt(xt({prefixCls:"".concat(g,"-avatar")},F_e(y,x)),Xx(s));E=w.exports.createElement("div",{className:"".concat(g,"-header")},w.exports.createElement(fb,xt({},T)))}var C;if(y||x){var I;if(y){var P=xt(xt({prefixCls:"".concat(g,"-title")},D_e(b,x)),Xx(l));I=w.exports.createElement(N_e,xt({},P))}var j;if(x){var A=xt(xt({prefixCls:"".concat(g,"-paragraph")},B_e(b,y)),Xx(u));j=w.exports.createElement(I_e,xt({},A))}C=w.exports.createElement("div",{className:"".concat(g,"-content")},I,j)}var S=Wt(g,(v={},m(v,"".concat(g,"-with-avatar"),b),m(v,"".concat(g,"-active"),c),m(v,"".concat(g,"-rtl"),h==="rtl"),m(v,"".concat(g,"-round"),f),v),a);return w.exports.createElement("div",{className:S,style:i},E,C)}return typeof o!="undefined"?o:null};Xf.defaultProps={avatar:!1,title:!0,paragraph:!0};Xf.Button=T_e;Xf.Avatar=C_e;Xf.Input=R_e;Xf.Image=M_e;var z_e=Xf,U_e={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M482 152h60q8 0 8 8v704q0 8-8 8h-60q-8 0-8-8V160q0-8 8-8z"}},{tag:"path",attrs:{d:"M176 474h672q8 0 8 8v60q0 8-8 8H176q-8 0-8-8v-60q0-8 8-8z"}}]},name:"plus",theme:"outlined"},$_e=U_e,RD=function(t,n){return w.exports.createElement(SE,Ne(Ne({},t),{},{ref:n,icon:$_e}))};RD.displayName="PlusOutlined";var V_e=w.exports.forwardRef(RD);function PD(e){var t=w.exports.useRef(),n=w.exports.useRef(!1);function r(){for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];n.current||(pr.cancel(t.current),t.current=pr(function(){e.apply(void 0,i)}))}return w.exports.useEffect(function(){return n.current=!1,function(){n.current=!0,pr.cancel(t.current)}},[]),r}function j_e(e){var t=w.exports.useRef([]),n=w.exports.useState({}),r=Le(n,2),a=r[1],i=w.exports.useRef(typeof e=="function"?e():e),o=PD(function(){var l=i.current;t.current.forEach(function(u){l=u(l)}),t.current=[],i.current=l,a({})});function s(l){t.current.push(l),o()}return[i.current,s]}function G_e(e,t){var n,r=e.prefixCls,a=e.id,i=e.active,o=e.tab,s=o.key,l=o.tab,u=o.disabled,c=o.closeIcon,f=e.closable,d=e.renderWrapper,p=e.removeAriaLabel,h=e.editable,g=e.onClick,v=e.onRemove,b=e.onFocus,y=e.style,x="".concat(r,"-tab");w.exports.useEffect(function(){return v},[]);var E=h&&f!==!1&&!u;function T(P){u||g(P)}function C(P){P.preventDefault(),P.stopPropagation(),h.onEdit("remove",{key:s,event:P})}var I=w.exports.createElement("div",{key:s,ref:t,className:Wt(x,(n={},m(n,"".concat(x,"-with-remove"),E),m(n,"".concat(x,"-active"),i),m(n,"".concat(x,"-disabled"),u),n)),style:y,onClick:T},w.exports.createElement("div",{role:"tab","aria-selected":i,id:a&&"".concat(a,"-tab-").concat(s),className:"".concat(x,"-btn"),"aria-controls":a&&"".concat(a,"-panel-").concat(s),"aria-disabled":u,tabIndex:u?null:0,onClick:function(j){j.stopPropagation(),T(j)},onKeyDown:function(j){[Et.SPACE,Et.ENTER].includes(j.which)&&(j.preventDefault(),T(j))},onFocus:b},l),E&&w.exports.createElement("button",{type:"button","aria-label":p||"remove",tabIndex:0,className:"".concat(x,"-remove"),onClick:function(j){j.stopPropagation(),C(j)}},c||h.removeIcon||"\xD7"));return d?d(I):I}var H_e=w.exports.forwardRef(G_e),c8={width:0,height:0,left:0,top:0};function W_e(e,t,n){return w.exports.useMemo(function(){for(var r,a=new Map,i=t.get((r=e[0])===null||r===void 0?void 0:r.key)||c8,o=i.left+i.width,s=0;s<e.length;s+=1){var l=e[s].key,u=t.get(l);if(!u){var c;u=t.get((c=e[s-1])===null||c===void 0?void 0:c.key)||c8}var f=a.get(l)||Ne({},u);f.right=o-f.left-f.width,a.set(l,f)}return a},[e.map(function(r){return r.key}).join("_"),t,n])}var f8={width:0,height:0,left:0,top:0,right:0};function X_e(e,t,n,r,a){var i=a.tabs,o=a.tabPosition,s=a.rtl,l,u,c;["top","bottom"].includes(o)?(l="width",u=s?"right":"left",c=Math.abs(t.left)):(l="height",u="top",c=-t.top);var f=t[l],d=n[l],p=r[l],h=f;return d+p>f&&d<f&&(h=f-p),w.exports.useMemo(function(){if(!i.length)return[0,0];for(var g=i.length,v=g,b=0;b<g;b+=1){var y=e.get(i[b].key)||f8;if(y[u]+y[l]>c+h){v=b-1;break}}for(var x=0,E=g-1;E>=0;E-=1){var T=e.get(i[E].key)||f8;if(T[u]<c){x=E+1;break}}return[x,v]},[e,c,h,o,i.map(function(g){return g.key}).join("_"),s])}function Y_e(e,t){var n=e.prefixCls,r=e.editable,a=e.locale,i=e.style;return!r||r.showAdd===!1?null:w.exports.createElement("button",{ref:t,type:"button",className:"".concat(n,"-nav-add"),style:i,"aria-label":(a==null?void 0:a.addAriaLabel)||"Add tab",onClick:function(s){r.onEdit("add",{event:s})}},r.addIcon||"+")}var ID=w.exports.forwardRef(Y_e);function Z_e(e,t){var n=e.prefixCls,r=e.id,a=e.tabs,i=e.locale,o=e.mobile,s=e.moreIcon,l=s===void 0?"More":s,u=e.moreTransitionName,c=e.style,f=e.className,d=e.editable,p=e.tabBarGutter,h=e.rtl,g=e.removeAriaLabel,v=e.onTabClick,b=e.popupClassName,y=w.exports.useState(!1),x=Le(y,2),E=x[0],T=x[1],C=w.exports.useState(null),I=Le(C,2),P=I[0],j=I[1],A="".concat(r,"-more-popup"),S="".concat(n,"-dropdown"),M=P!==null?"".concat(A,"-").concat(P):null,O=i==null?void 0:i.dropdownAriaLabel;function R(le,fe){le.preventDefault(),le.stopPropagation(),d.onEdit("remove",{key:fe,event:le})}var H=w.exports.createElement(Vh,{onClick:function(fe){var ge=fe.key,we=fe.domEvent;v(ge,we),T(!1)},prefixCls:"".concat(S,"-menu"),id:A,tabIndex:-1,role:"listbox","aria-activedescendant":M,selectedKeys:[P],"aria-label":O!==void 0?O:"expanded dropdown"},a.map(function(le){var fe=d&&le.closable!==!1&&!le.disabled;return w.exports.createElement(ub,{key:le.key,id:"".concat(A,"-").concat(le.key),role:"option","aria-controls":r&&"".concat(r,"-panel-").concat(le.key),disabled:le.disabled},w.exports.createElement("span",null,le.tab),fe&&w.exports.createElement("button",{type:"button","aria-label":g||"remove",tabIndex:0,className:"".concat(S,"-menu-item-remove"),onClick:function(we){we.stopPropagation(),R(we,le.key)}},le.closeIcon||d.removeIcon||"\xD7"))}));function ee(le){for(var fe=a.filter(function(Nt){return!Nt.disabled}),ge=fe.findIndex(function(Nt){return Nt.key===P})||0,we=fe.length,Ve=0;Ve<we;Ve+=1){ge=(ge+le+we)%we;var Lt=fe[ge];if(!Lt.disabled){j(Lt.key);return}}}function re(le){var fe=le.which;if(!E){[Et.DOWN,Et.SPACE,Et.ENTER].includes(fe)&&(T(!0),le.preventDefault());return}switch(fe){case Et.UP:ee(-1),le.preventDefault();break;case Et.DOWN:ee(1),le.preventDefault();break;case Et.ESC:T(!1);break;case Et.SPACE:case Et.ENTER:P!==null&&v(P,le);break}}w.exports.useEffect(function(){var le=document.getElementById(M);le&&le.scrollIntoView&&le.scrollIntoView(!1)},[P]),w.exports.useEffect(function(){E||j(null)},[E]);var Y=m({},h?"marginRight":"marginLeft",p);a.length||(Y.visibility="hidden",Y.order=1);var J=Wt(m({},"".concat(S,"-rtl"),h)),ae=o?null:w.exports.createElement(v_e,{prefixCls:S,overlay:H,trigger:["hover"],visible:E,transitionName:u,onVisibleChange:T,overlayClassName:Wt(J,b),mouseEnterDelay:.1,mouseLeaveDelay:.1},w.exports.createElement("button",{type:"button",className:"".concat(n,"-nav-more"),style:Y,tabIndex:-1,"aria-hidden":"true","aria-haspopup":"listbox","aria-controls":A,id:"".concat(r,"-more"),"aria-expanded":E,onKeyDown:re},l));return w.exports.createElement("div",{className:Wt("".concat(n,"-nav-operations"),f),style:c,ref:t},ae,w.exports.createElement(ID,{prefixCls:n,locale:i,editable:d}))}var q_e=w.exports.memo(w.exports.forwardRef(Z_e),function(e,t){return t.tabMoving}),jE=w.exports.createContext(null),K_e=.1,d8=.01,G0=20,p8=Math.pow(.995,G0);function Q_e(e,t){var n=w.exports.useState(),r=Le(n,2),a=r[0],i=r[1],o=w.exports.useState(0),s=Le(o,2),l=s[0],u=s[1],c=w.exports.useState(0),f=Le(c,2),d=f[0],p=f[1],h=w.exports.useState(),g=Le(h,2),v=g[0],b=g[1],y=w.exports.useRef();function x(j){var A=j.touches[0],S=A.screenX,M=A.screenY;i({x:S,y:M}),window.clearInterval(y.current)}function E(j){if(!!a){j.preventDefault();var A=j.touches[0],S=A.screenX,M=A.screenY;i({x:S,y:M});var O=S-a.x,R=M-a.y;t(O,R);var H=Date.now();u(H),p(H-l),b({x:O,y:R})}}function T(){if(!!a&&(i(null),b(null),v)){var j=v.x/d,A=v.y/d,S=Math.abs(j),M=Math.abs(A);if(Math.max(S,M)<K_e)return;var O=j,R=A;y.current=window.setInterval(function(){if(Math.abs(O)<d8&&Math.abs(R)<d8){window.clearInterval(y.current);return}O*=p8,R*=p8,t(O*G0,R*G0)},G0)}}var C=w.exports.useRef();function I(j){var A=j.deltaX,S=j.deltaY,M=0,O=Math.abs(A),R=Math.abs(S);O===R?M=C.current==="x"?A:S:O>R?(M=A,C.current="x"):(M=S,C.current="y"),t(-M,-M)&&j.preventDefault()}var P=w.exports.useRef(null);P.current={onTouchStart:x,onTouchMove:E,onTouchEnd:T,onWheel:I},w.exports.useEffect(function(){function j(O){P.current.onTouchStart(O)}function A(O){P.current.onTouchMove(O)}function S(O){P.current.onTouchEnd(O)}function M(O){P.current.onWheel(O)}return document.addEventListener("touchmove",A,{passive:!1}),document.addEventListener("touchend",S,{passive:!1}),e.current.addEventListener("touchstart",j,{passive:!1}),e.current.addEventListener("wheel",M),function(){document.removeEventListener("touchmove",A),document.removeEventListener("touchend",S)}},[])}function J_e(){var e=w.exports.useRef(new Map);function t(r){return e.current.has(r)||e.current.set(r,w.exports.createRef()),e.current.get(r)}function n(r){e.current.delete(r)}return[t,n]}function h8(e,t){var n=w.exports.useRef(e),r=w.exports.useState({}),a=Le(r,2),i=a[1];function o(s){var l=typeof s=="function"?s(n.current):s;l!==n.current&&t(l,n.current),n.current=l,i({})}return[n.current,o]}var m8=function(t){var n=t.position,r=t.prefixCls,a=t.extra;if(!a)return null;var i,o={};return a&&sr(a)==="object"&&!w.exports.isValidElement(a)?o=a:o.right=a,n==="right"&&(i=o.right),n==="left"&&(i=o.left),i?w.exports.createElement("div",{className:"".concat(r,"-extra-content")},i):null};function e2e(e,t){var n,r=w.exports.useContext(jE),a=r.prefixCls,i=r.tabs,o=e.className,s=e.style,l=e.id,u=e.animated,c=e.activeKey,f=e.rtl,d=e.extra,p=e.editable,h=e.locale,g=e.tabPosition,v=e.tabBarGutter,b=e.children,y=e.onTabClick,x=e.onTabScroll,E=w.exports.useRef(),T=w.exports.useRef(),C=w.exports.useRef(),I=w.exports.useRef(),P=J_e(),j=Le(P,2),A=j[0],S=j[1],M=g==="top"||g==="bottom",O=h8(0,function(bn,tn){M&&x&&x({direction:bn>tn?"left":"right"})}),R=Le(O,2),H=R[0],ee=R[1],re=h8(0,function(bn,tn){!M&&x&&x({direction:bn>tn?"top":"bottom"})}),Y=Le(re,2),J=Y[0],ae=Y[1],le=w.exports.useState(0),fe=Le(le,2),ge=fe[0],we=fe[1],Ve=w.exports.useState(0),Lt=Le(Ve,2),Nt=Lt[0],Zt=Lt[1],Fe=w.exports.useState(null),Je=Le(Fe,2),tt=Je[0],ve=Je[1],pt=w.exports.useState(null),kt=Le(pt,2),wt=kt[0],At=kt[1],ht=w.exports.useState(0),jt=Le(ht,2),Gt=jt[0],An=jt[1],_r=w.exports.useState(0),er=Le(_r,2),tr=er[0],k=er[1],Ce=j_e(new Map),Ie=Le(Ce,2),lt=Ie[0],_t=Ie[1],Yt=W_e(i,lt,ge),St="".concat(a,"-nav-operations-hidden"),Rt=0,Tt=0;M?f?(Rt=0,Tt=Math.max(0,ge-tt)):(Rt=Math.min(0,tt-ge),Tt=0):(Rt=Math.min(0,wt-Nt),Tt=0);function $t(bn){return bn<Rt?Rt:bn>Tt?Tt:bn}var Bt=w.exports.useRef(),Sn=w.exports.useState(),Bn=Le(Sn,2),ca=Bn[0],Da=Bn[1];function Er(){Da(Date.now())}function Ba(){window.clearTimeout(Bt.current)}Q_e(E,function(bn,tn){function Rn(Sr,pa){Sr(function(Ua){var io=$t(Ua+pa);return io})}if(M){if(tt>=ge)return!1;Rn(ee,bn)}else{if(wt>=Nt)return!1;Rn(ae,tn)}return Ba(),Er(),!0}),w.exports.useEffect(function(){return Ba(),ca&&(Bt.current=window.setTimeout(function(){Da(0)},100)),Ba},[ca]);function Or(){var bn=arguments.length>0&&arguments[0]!==void 0?arguments[0]:c,tn=Yt.get(bn)||{width:0,height:0,left:0,right:0,top:0};if(M){var Rn=H;f?tn.right<H?Rn=tn.right:tn.right+tn.width>H+tt&&(Rn=tn.right+tn.width-tt):tn.left<-H?Rn=-tn.left:tn.left+tn.width>-H+tt&&(Rn=-(tn.left+tn.width-tt)),ae(0),ee($t(Rn))}else{var Sr=J;tn.top<-J?Sr=-tn.top:tn.top+tn.height>-J+wt&&(Sr=-(tn.top+tn.height-wt)),ee(0),ae($t(Sr))}}var Ka=X_e(Yt,{width:tt,height:wt,left:H,top:J},{width:ge,height:Nt},{width:Gt,height:tr},Ne(Ne({},e),{},{tabs:i})),Sa=Le(Ka,2),li=Sa[0],fa=Sa[1],Mr={};g==="top"||g==="bottom"?Mr[f?"marginRight":"marginLeft"]=v:Mr.marginTop=v;var qt=i.map(function(bn,tn){var Rn=bn.key;return w.exports.createElement(H_e,{id:l,prefixCls:a,key:Rn,tab:bn,style:tn===0?void 0:Mr,closable:bn.closable,editable:p,active:Rn===c,renderWrapper:b,removeAriaLabel:h==null?void 0:h.removeAriaLabel,ref:A(Rn),onClick:function(pa){y(Rn,pa)},onRemove:function(){S(Rn)},onFocus:function(){Or(Rn),Er(),E.current&&(f||(E.current.scrollLeft=0),E.current.scrollTop=0)}})}),un=PD(function(){var bn,tn,Rn,Sr,pa,Ua,io=((bn=E.current)===null||bn===void 0?void 0:bn.offsetWidth)||0,Bl=((tn=E.current)===null||tn===void 0?void 0:tn.offsetHeight)||0,Ns=((Rn=I.current)===null||Rn===void 0?void 0:Rn.offsetWidth)||0,oo=((Sr=I.current)===null||Sr===void 0?void 0:Sr.offsetHeight)||0;ve(io),At(Bl),An(Ns),k(oo);var na=(((pa=T.current)===null||pa===void 0?void 0:pa.offsetWidth)||0)-Ns,Oi=(((Ua=T.current)===null||Ua===void 0?void 0:Ua.offsetHeight)||0)-oo;we(na),Zt(Oi),_t(function(){var wn=new Map;return i.forEach(function(mn){var Pn=mn.key,$n=A(Pn).current;$n&&wn.set(Pn,{width:$n.offsetWidth,height:$n.offsetHeight,left:$n.offsetLeft,top:$n.offsetTop})}),wn})}),cn=i.slice(0,li),kr=i.slice(fa+1),da=[].concat(Ue(cn),Ue(kr)),ro=w.exports.useState(),ao=Le(ro,2),Ti=ao[0],Yn=ao[1],fn=Yt.get(c),Qt=w.exports.useRef();function Un(){pr.cancel(Qt.current)}w.exports.useEffect(function(){var bn={};return fn&&(M?(f?bn.right=fn.right:bn.left=fn.left,bn.width=fn.width):(bn.top=fn.top,bn.height=fn.height)),Un(),Qt.current=pr(function(){Yn(bn)}),Un},[fn,M,f]),w.exports.useEffect(function(){Or()},[c,fn,Yt,M]),w.exports.useEffect(function(){un()},[f,v,c,i.map(function(bn){return bn.key}).join("_")]);var Mn=!!da.length,dn="".concat(a,"-nav-wrap"),Wr,Xr,za,Ai;return M?f?(Xr=H>0,Wr=H+tt<ge):(Wr=H<0,Xr=-H+tt<ge):(za=J<0,Ai=-J+wt<Nt),w.exports.createElement("div",{ref:t,role:"tablist",className:Wt("".concat(a,"-nav"),o),style:s,onKeyDown:function(){Er()}},w.exports.createElement(m8,{position:"left",extra:d,prefixCls:a}),w.exports.createElement(mh,{onResize:un},w.exports.createElement("div",{className:Wt(dn,(n={},m(n,"".concat(dn,"-ping-left"),Wr),m(n,"".concat(dn,"-ping-right"),Xr),m(n,"".concat(dn,"-ping-top"),za),m(n,"".concat(dn,"-ping-bottom"),Ai),n)),ref:E},w.exports.createElement(mh,{onResize:un},w.exports.createElement("div",{ref:T,className:"".concat(a,"-nav-list"),style:{transform:"translate(".concat(H,"px, ").concat(J,"px)"),transition:ca?"none":void 0}},qt,w.exports.createElement(ID,{ref:I,prefixCls:a,locale:h,editable:p,style:Ne(Ne({},qt.length===0?void 0:Mr),{},{visibility:Mn?"hidden":null})}),w.exports.createElement("div",{className:Wt("".concat(a,"-ink-bar"),m({},"".concat(a,"-ink-bar-animated"),u.inkBar)),style:Ti}))))),w.exports.createElement(q_e,xt({},e,{removeAriaLabel:h==null?void 0:h.removeAriaLabel,ref:C,prefixCls:a,tabs:da,className:!Mn&&St,tabMoving:!!ca})),w.exports.createElement(m8,{position:"right",extra:d,prefixCls:a}))}var g8=w.exports.forwardRef(e2e);function t2e(e){var t=e.id,n=e.activeKey,r=e.animated,a=e.tabPosition,i=e.rtl,o=e.destroyInactiveTabPane,s=w.exports.useContext(jE),l=s.prefixCls,u=s.tabs,c=r.tabPane,f=u.findIndex(function(d){return d.key===n});return w.exports.createElement("div",{className:Wt("".concat(l,"-content-holder"))},w.exports.createElement("div",{className:Wt("".concat(l,"-content"),"".concat(l,"-content-").concat(a),m({},"".concat(l,"-content-animated"),c)),style:f&&c?m({},i?"marginRight":"marginLeft","-".concat(f,"00%")):null},u.map(function(d){return w.exports.cloneElement(d.node,{key:d.key,prefixCls:l,tabKey:d.key,id:t,animated:c,active:d.key===n,destroyInactiveTabPane:o})})))}function LD(e){var t=e.prefixCls,n=e.forceRender,r=e.className,a=e.style,i=e.id,o=e.active,s=e.animated,l=e.destroyInactiveTabPane,u=e.tabKey,c=e.children,f=w.exports.useState(n),d=Le(f,2),p=d[0],h=d[1];w.exports.useEffect(function(){o?h(!0):l&&h(!1)},[o,l]);var g={};return o||(s?(g.visibility="hidden",g.height=0,g.overflowY="hidden"):g.display="none"),w.exports.createElement("div",{id:i&&"".concat(i,"-panel-").concat(u),role:"tabpanel",tabIndex:o?0:-1,"aria-labelledby":i&&"".concat(i,"-tab-").concat(u),"aria-hidden":!o,style:Ne(Ne({},g),a),className:Wt("".concat(t,"-tabpane"),o&&"".concat(t,"-tabpane-active"),r)},(o||p||n)&&c)}var n2e=["id","prefixCls","className","children","direction","activeKey","defaultActiveKey","editable","animated","tabPosition","tabBarGutter","tabBarStyle","tabBarExtraContent","locale","moreIcon","moreTransitionName","destroyInactiveTabPane","renderTabBar","onChange","onTabClick","onTabScroll","popupClassName"],v8=0;function r2e(e){return Tf(e).map(function(t){if(w.exports.isValidElement(t)){var n=t.key!==void 0?String(t.key):void 0;return Ne(Ne({key:n},t.props),{},{node:t})}return null}).filter(function(t){return t})}function a2e(e,t){var n,r=e.id,a=e.prefixCls,i=a===void 0?"rc-tabs":a,o=e.className,s=e.children,l=e.direction,u=e.activeKey,c=e.defaultActiveKey,f=e.editable,d=e.animated,p=d===void 0?{inkBar:!0,tabPane:!1}:d,h=e.tabPosition,g=h===void 0?"top":h,v=e.tabBarGutter,b=e.tabBarStyle,y=e.tabBarExtraContent,x=e.locale,E=e.moreIcon,T=e.moreTransitionName,C=e.destroyInactiveTabPane,I=e.renderTabBar,P=e.onChange,j=e.onTabClick,A=e.onTabScroll,S=e.popupClassName,M=On(e,n2e),O=r2e(s),R=l==="rtl",H;p===!1?H={inkBar:!1,tabPane:!1}:p===!0?H={inkBar:!0,tabPane:!0}:H=Ne({inkBar:!0,tabPane:!1},sr(p)==="object"?p:{});var ee=w.exports.useState(!1),re=Le(ee,2),Y=re[0],J=re[1];w.exports.useEffect(function(){J(WF())},[]);var ae=_l(function(){var ht;return(ht=O[0])===null||ht===void 0?void 0:ht.key},{value:u,defaultValue:c}),le=Le(ae,2),fe=le[0],ge=le[1],we=w.exports.useState(function(){return O.findIndex(function(ht){return ht.key===fe})}),Ve=Le(we,2),Lt=Ve[0],Nt=Ve[1];w.exports.useEffect(function(){var ht=O.findIndex(function(Gt){return Gt.key===fe});if(ht===-1){var jt;ht=Math.max(0,Math.min(Lt,O.length-1)),ge((jt=O[ht])===null||jt===void 0?void 0:jt.key)}Nt(ht)},[O.map(function(ht){return ht.key}).join("_"),fe,Lt]);var Zt=_l(null,{value:r}),Fe=Le(Zt,2),Je=Fe[0],tt=Fe[1],ve=g;Y&&!["left","right"].includes(g)&&(ve="top"),w.exports.useEffect(function(){r||(tt("rc-tabs-".concat(v8)),v8+=1)},[]);function pt(ht,jt){j==null||j(ht,jt);var Gt=ht!==fe;ge(ht),Gt&&(P==null||P(ht))}var kt={id:Je,activeKey:fe,animated:H,tabPosition:ve,rtl:R,mobile:Y},wt,At=Ne(Ne({},kt),{},{editable:f,locale:x,moreIcon:E,moreTransitionName:T,tabBarGutter:v,onTabClick:pt,onTabScroll:A,extra:y,style:b,panes:s,popupClassName:S});return I?wt=I(At,g8):wt=w.exports.createElement(g8,At),w.exports.createElement(jE.Provider,{value:{tabs:O,prefixCls:i}},w.exports.createElement("div",xt({ref:t,id:r,className:Wt(i,"".concat(i,"-").concat(ve),(n={},m(n,"".concat(i,"-mobile"),Y),m(n,"".concat(i,"-editable"),f),m(n,"".concat(i,"-rtl"),R),n),o)},M),wt,w.exports.createElement(t2e,xt({destroyInactiveTabPane:C},kt,{animated:H}))))}var ND=w.exports.forwardRef(a2e);ND.TabPane=LD;var i2e=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]]);return n};function l_(e){var t=e.type,n=e.className,r=e.size,a=e.onEdit,i=e.hideAdd,o=e.centered,s=e.addIcon,l=i2e(e,["type","className","size","onEdit","hideAdd","centered","addIcon"]),u=l.prefixCls,c=l.moreIcon,f=c===void 0?w.exports.createElement(Owe,null):c,d=w.exports.useContext(ts),p=d.getPrefixCls,h=d.direction,g=p("tabs",u),v;t==="editable-card"&&(v={onEdit:function(x,E){var T=E.key,C=E.event;a==null||a(x==="add"?C:T,x)},removeIcon:w.exports.createElement(f1e,null),addIcon:s||w.exports.createElement(V_e,null),showAdd:i!==!0});var b=p();return w.exports.createElement(jF.Consumer,null,function(y){var x,E=r!==void 0?r:y;return w.exports.createElement(ND,xt({direction:h,moreTransitionName:"".concat(b,"-slide-up")},l,{className:Wt((x={},m(x,"".concat(g,"-").concat(E),E),m(x,"".concat(g,"-card"),["card","editable-card"].includes(t)),m(x,"".concat(g,"-editable-card"),t==="editable-card"),m(x,"".concat(g,"-centered"),o),x),n),editable:v,moreIcon:f,prefixCls:g}))})}l_.TabPane=LD;var o2e=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]]);return n},s2e=function(t){var n=t.prefixCls,r=t.className,a=t.hoverable,i=a===void 0?!0:a,o=o2e(t,["prefixCls","className","hoverable"]);return w.exports.createElement(VF,null,function(s){var l=s.getPrefixCls,u=l("card",n),c=Wt("".concat(u,"-grid"),r,m({},"".concat(u,"-grid-hoverable"),i));return w.exports.createElement("div",xt({},o,{className:c}))})},FD=s2e,l2e=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]]);return n};function u2e(e){var t=e.map(function(n,r){return w.exports.createElement("li",{style:{width:"".concat(100/e.length,"%")},key:"action-".concat(r)},w.exports.createElement("span",null,n))});return t}var c2e=w.exports.forwardRef(function(e,t){var n,r,a=w.exports.useContext(ts),i=a.getPrefixCls,o=a.direction,s=w.exports.useContext(jF),l=function(tt){var ve;(ve=e.onTabChange)===null||ve===void 0||ve.call(e,tt)},u=function(){var tt;return w.exports.Children.forEach(e.children,function(ve){ve&&ve.type&&ve.type===FD&&(tt=!0)}),tt},c=e.prefixCls,f=e.className,d=e.extra,p=e.headStyle,h=p===void 0?{}:p,g=e.bodyStyle,v=g===void 0?{}:g,b=e.title,y=e.loading,x=e.bordered,E=x===void 0?!0:x,T=e.size,C=e.type,I=e.cover,P=e.actions,j=e.tabList,A=e.children,S=e.activeTabKey,M=e.defaultActiveTabKey,O=e.tabBarExtraContent,R=e.hoverable,H=e.tabProps,ee=H===void 0?{}:H,re=l2e(e,["prefixCls","className","extra","headStyle","bodyStyle","title","loading","bordered","size","type","cover","actions","tabList","children","activeTabKey","defaultActiveTabKey","tabBarExtraContent","hoverable","tabProps"]),Y=i("card",c),J=w.exports.createElement(z_e,{loading:!0,active:!0,paragraph:{rows:4},title:!1},A),ae=S!==void 0,le=xt(xt({},ee),(n={},m(n,ae?"activeKey":"defaultActiveKey",ae?S:M),m(n,"tabBarExtraContent",O),n)),fe,ge=j&&j.length?w.exports.createElement(l_,xt({size:"large"},le,{className:"".concat(Y,"-head-tabs"),onChange:l}),j.map(function(Je){return w.exports.createElement(l_.TabPane,{tab:Je.tab,disabled:Je.disabled,key:Je.key})})):null;(b||d||ge)&&(fe=w.exports.createElement("div",{className:"".concat(Y,"-head"),style:h},w.exports.createElement("div",{className:"".concat(Y,"-head-wrapper")},b&&w.exports.createElement("div",{className:"".concat(Y,"-head-title")},b),d&&w.exports.createElement("div",{className:"".concat(Y,"-extra")},d)),ge));var we=I?w.exports.createElement("div",{className:"".concat(Y,"-cover")},I):null,Ve=w.exports.createElement("div",{className:"".concat(Y,"-body"),style:v},y?J:A),Lt=P&&P.length?w.exports.createElement("ul",{className:"".concat(Y,"-actions")},u2e(P)):null,Nt=Hf(re,["onTabChange"]),Zt=T||s,Fe=Wt(Y,(r={},m(r,"".concat(Y,"-loading"),y),m(r,"".concat(Y,"-bordered"),E),m(r,"".concat(Y,"-hoverable"),R),m(r,"".concat(Y,"-contain-grid"),u()),m(r,"".concat(Y,"-contain-tabs"),j&&j.length),m(r,"".concat(Y,"-").concat(Zt),Zt),m(r,"".concat(Y,"-type-").concat(C),!!C),m(r,"".concat(Y,"-rtl"),o==="rtl"),r),f);return w.exports.createElement("div",xt({ref:t},Nt,{className:Fe}),fe,we,Ve,Lt)}),f2e=c2e,d2e=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]]);return n},p2e=function(t){return w.exports.createElement(VF,null,function(n){var r=n.getPrefixCls,a=t.prefixCls,i=t.className,o=t.avatar,s=t.title,l=t.description,u=d2e(t,["prefixCls","className","avatar","title","description"]),c=r("card",a),f=Wt("".concat(c,"-meta"),i),d=o?w.exports.createElement("div",{className:"".concat(c,"-meta-avatar")},o):null,p=s?w.exports.createElement("div",{className:"".concat(c,"-meta-title")},s):null,h=l?w.exports.createElement("div",{className:"".concat(c,"-meta-description")},l):null,g=p||h?w.exports.createElement("div",{className:"".concat(c,"-meta-detail")},p,h):null;return w.exports.createElement("div",xt({},u,{className:f}),d,g)})},h2e=p2e,GE=f2e;GE.Grid=FD;GE.Meta=h2e;var m2e=GE,Vu=w.exports.createContext({min:0,max:0,direction:"ltr",step:1,includedStart:0,includedEnd:0,tabIndex:0});function u_(e,t,n){return(e-t)/(n-t)}function HE(e,t,n,r){var a=u_(t,n,r),i={};switch(e){case"rtl":i.right="".concat(a*100,"%"),i.transform="translateX(50%)";break;case"btt":i.bottom="".concat(a*100,"%"),i.transform="translateY(50%)";break;case"ttb":i.top="".concat(a*100,"%"),i.transform="translateY(-50%)";break;default:i.left="".concat(a*100,"%"),i.transform="translateX(-50%)";break}return i}function Wc(e,t){return Array.isArray(e)?e[t]:e}var g2e=["prefixCls","value","valueIndex","onStartMove","style","render","dragging","onOffsetChange"],v2e=w.exports.forwardRef(function(e,t){var n,r,a=e.prefixCls,i=e.value,o=e.valueIndex,s=e.onStartMove,l=e.style,u=e.render,c=e.dragging,f=e.onOffsetChange,d=On(e,g2e),p=w.exports.useContext(Vu),h=p.min,g=p.max,v=p.direction,b=p.disabled,y=p.range,x=p.tabIndex,E=p.ariaLabelForHandle,T=p.ariaLabelledByForHandle,C=p.ariaValueTextFormatterForHandle,I="".concat(a,"-handle"),P=function(O){b||s(O,o)},j=function(O){if(!b){var R=null;switch(O.which||O.keyCode){case Et.LEFT:R=v==="ltr"||v==="btt"?-1:1;break;case Et.RIGHT:R=v==="ltr"||v==="btt"?1:-1;break;case Et.UP:R=v!=="ttb"?1:-1;break;case Et.DOWN:R=v!=="ttb"?-1:1;break;case Et.HOME:R="min";break;case Et.END:R="max";break;case Et.PAGE_UP:R=2;break;case Et.PAGE_DOWN:R=-2;break}R!==null&&(O.preventDefault(),f(R,o))}},A=HE(v,i,h,g),S=w.exports.createElement("div",xt({ref:t,className:Wt(I,(n={},m(n,"".concat(I,"-").concat(o+1),y),m(n,"".concat(I,"-dragging"),c),n)),style:Ne(Ne({},A),l),onMouseDown:P,onTouchStart:P,onKeyDown:j,tabIndex:b?null:Wc(x,o),role:"slider","aria-valuemin":h,"aria-valuemax":g,"aria-valuenow":i,"aria-disabled":b,"aria-label":Wc(E,o),"aria-labelledby":Wc(T,o),"aria-valuetext":(r=Wc(C,o))===null||r===void 0?void 0:r(i)},d));return u&&(S=u(S,{index:o,prefixCls:a,value:i,dragging:c})),S}),b2e=["prefixCls","style","onStartMove","onOffsetChange","values","handleRender","draggingIndex"],y2e=w.exports.forwardRef(function(e,t){var n=e.prefixCls,r=e.style,a=e.onStartMove,i=e.onOffsetChange,o=e.values,s=e.handleRender,l=e.draggingIndex,u=On(e,b2e),c=w.exports.useRef({});return w.exports.useImperativeHandle(t,function(){return{focus:function(d){var p;(p=c.current[d])===null||p===void 0||p.focus()}}}),w.exports.createElement(w.exports.Fragment,null,o.map(function(f,d){return w.exports.createElement(v2e,xt({ref:function(h){h?c.current[d]=h:delete c.current[d]},dragging:l===d,prefixCls:n,style:Wc(r,d),key:d,value:f,valueIndex:d,onStartMove:a,onOffsetChange:i,render:s},u))}))});function b8(e){var t="touches"in e?e.touches[0]:e;return{pageX:t.pageX,pageY:t.pageY}}function x2e(e,t,n,r,a,i,o,s,l){var u=w.exports.useState(null),c=Le(u,2),f=c[0],d=c[1],p=w.exports.useState(-1),h=Le(p,2),g=h[0],v=h[1],b=w.exports.useState(n),y=Le(b,2),x=y[0],E=y[1],T=w.exports.useState(n),C=Le(T,2),I=C[0],P=C[1],j=w.exports.useRef(null),A=w.exports.useRef(null);w.exports.useEffect(function(){g===-1&&E(n)},[n,g]),w.exports.useEffect(function(){return function(){document.removeEventListener("mousemove",j.current),document.removeEventListener("mouseup",A.current),document.removeEventListener("touchmove",j.current),document.removeEventListener("touchend",A.current)}},[]);var S=function(re,Y){x.some(function(J,ae){return J!==re[ae]})&&(Y!==void 0&&d(Y),E(re),o(re))},M=function(re,Y){if(re===-1){var J=I[0],ae=I[I.length-1],le=r-J,fe=a-ae,ge=Y*(a-r);ge=Math.max(ge,le),ge=Math.min(ge,fe);var we=i(J+ge);ge=we-J;var Ve=I.map(function(Fe){return Fe+ge});S(Ve)}else{var Lt=(a-r)*Y,Nt=Ue(x);Nt[re]=I[re];var Zt=l(Nt,Lt,re,"dist");S(Zt.values,Zt.value)}},O=w.exports.useRef(M);O.current=M;var R=function(re,Y){re.stopPropagation();var J=n[Y];v(Y),d(J),P(n);var ae=b8(re),le=ae.pageX,fe=ae.pageY,ge=function(Lt){Lt.preventDefault();var Nt=b8(Lt),Zt=Nt.pageX,Fe=Nt.pageY,Je=Zt-le,tt=Fe-fe,ve=e.current.getBoundingClientRect(),pt=ve.width,kt=ve.height,wt;switch(t){case"btt":wt=-tt/kt;break;case"ttb":wt=tt/kt;break;case"rtl":wt=-Je/pt;break;default:wt=Je/pt}O.current(Y,wt)},we=function Ve(Lt){Lt.preventDefault(),document.removeEventListener("mouseup",Ve),document.removeEventListener("mousemove",ge),document.removeEventListener("touchend",Ve),document.removeEventListener("touchmove",ge),j.current=null,A.current=null,v(-1),s()};document.addEventListener("mouseup",we),document.addEventListener("mousemove",ge),document.addEventListener("touchend",we),document.addEventListener("touchmove",ge),j.current=ge,A.current=we},H=w.exports.useMemo(function(){var ee=Ue(n).sort(function(Y,J){return Y-J}),re=Ue(x).sort(function(Y,J){return Y-J});return ee.every(function(Y,J){return Y===re[J]})?x:n},[n,x]);return[g,f,H,R]}function w2e(e){var t=e.prefixCls,n=e.style,r=e.start,a=e.end,i=e.index,o=e.onStartMove,s=w.exports.useContext(Vu),l=s.direction,u=s.min,c=s.max,f=s.disabled,d=s.range,p="".concat(t,"-track"),h=u_(r,u,c),g=u_(a,u,c),v=function(x){!f&&o&&o(x,-1)},b={};switch(l){case"rtl":b.right="".concat(h*100,"%"),b.width="".concat(g*100-h*100,"%");break;case"btt":b.bottom="".concat(h*100,"%"),b.height="".concat(g*100-h*100,"%");break;case"ttb":b.top="".concat(h*100,"%"),b.height="".concat(g*100-h*100,"%");break;default:b.left="".concat(h*100,"%"),b.width="".concat(g*100-h*100,"%")}return w.exports.createElement("div",{className:Wt(p,d&&"".concat(p,"-").concat(i+1)),style:Ne(Ne({},b),n),onMouseDown:v,onTouchStart:v})}function _2e(e){var t=e.prefixCls,n=e.style,r=e.values,a=e.startPoint,i=e.onStartMove,o=w.exports.useContext(Vu),s=o.included,l=o.range,u=o.min,c=w.exports.useMemo(function(){if(!l){if(r.length===0)return[];var f=a!=null?a:u,d=r[0];return[{start:Math.min(f,d),end:Math.max(f,d)}]}for(var p=[],h=0;h<r.length-1;h+=1)p.push({start:r[h],end:r[h+1]});return p},[r,l,a,u]);return s?c.map(function(f,d){var p=f.start,h=f.end;return w.exports.createElement(w2e,{index:d,prefixCls:t,style:Wc(n,d),start:p,end:h,key:d,onStartMove:i})}):null}function E2e(e){var t=e.prefixCls,n=e.style,r=e.children,a=e.value,i=e.onClick,o=w.exports.useContext(Vu),s=o.min,l=o.max,u=o.direction,c=o.includedStart,f=o.includedEnd,d=o.included,p="".concat(t,"-text"),h=HE(u,a,s,l);return w.exports.createElement("span",{className:Wt(p,m({},"".concat(p,"-active"),d&&c<=a&&a<=f)),style:Ne(Ne({},h),n),onMouseDown:function(v){v.stopPropagation()},onClick:function(){i(a)}},r)}function k2e(e){var t=e.prefixCls,n=e.marks,r=e.onClick,a="".concat(t,"-mark");return n.length?w.exports.createElement("div",{className:a},n.map(function(i){var o=i.value,s=i.style,l=i.label;return w.exports.createElement(E2e,{key:o,prefixCls:a,style:s,value:o,onClick:r},l)})):null}function S2e(e){var t=e.prefixCls,n=e.value,r=e.style,a=e.activeStyle,i=w.exports.useContext(Vu),o=i.min,s=i.max,l=i.direction,u=i.included,c=i.includedStart,f=i.includedEnd,d="".concat(t,"-dot"),p=u&&c<=n&&n<=f,h=Ne(Ne({},HE(l,n,o,s)),r);return p&&(h=Ne(Ne({},h),a)),w.exports.createElement("span",{className:Wt(d,m({},"".concat(d,"-active"),p)),style:h})}function C2e(e){var t=e.prefixCls,n=e.marks,r=e.dots,a=e.style,i=e.activeStyle,o=w.exports.useContext(Vu),s=o.min,l=o.max,u=o.step,c=w.exports.useMemo(function(){var f=new Set;if(n.forEach(function(p){f.add(p.value)}),r)for(var d=s;d<=l;)f.add(d),d+=u;return Array.from(f)},[s,l,u,r,n]);return w.exports.createElement("div",{className:"".concat(t,"-step")},c.map(function(f){return w.exports.createElement(S2e,{prefixCls:t,key:f,value:f,style:a,activeStyle:i})}))}function T2e(e,t,n,r,a,i){var o=w.exports.useCallback(function(p){var h=isFinite(p)?p:e;return h=Math.min(t,p),h=Math.max(e,h),h},[e,t]),s=w.exports.useCallback(function(p){if(n!==null){var h=e+Math.round((o(p)-e)/n)*n,g=function(x){return(String(x).split(".")[1]||"").length},v=Math.max(g(n),g(t),g(e)),b=Number(h.toFixed(v));return e<=b&&b<=t?b:null}return null},[n,e,t,o]),l=w.exports.useCallback(function(p){var h=o(p),g=r.map(function(y){return y.value});n!==null&&g.push(s(p)),g.push(e,t);var v=g[0],b=t-e;return g.forEach(function(y){var x=Math.abs(h-y);x<=b&&(v=y,b=x)}),v},[e,t,r,n,o,s]),u=function p(h,g,v){var b=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"unit";if(typeof g=="number"){var y,x=h[v],E=x+g,T=[];r.forEach(function(A){T.push(A.value)}),T.push(e,t),T.push(s(x));var C=g>0?1:-1;b==="unit"?T.push(s(x+C*n)):T.push(s(E)),T=T.filter(function(A){return A!==null}).filter(function(A){return g<0?A<=x:A>=x}),b==="unit"&&(T=T.filter(function(A){return A!==x}));var I=b==="unit"?x:E;y=T[0];var P=Math.abs(y-I);if(T.forEach(function(A){var S=Math.abs(A-I);S<P&&(y=A,P=S)}),y===void 0)return g<0?e:t;if(b==="dist")return y;if(Math.abs(g)>1){var j=Ue(h);return j[v]=y,p(j,g-C,v,b)}return y}else{if(g==="min")return e;if(g==="max")return t}},c=function(h,g,v){var b=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"unit",y=h[v],x=u(h,g,v,b);return{value:x,changed:x!==y}},f=function(h){return i===null&&h===0||typeof i=="number"&&h<i},d=function(h,g,v){var b=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"unit",y=h.map(l),x=y[v],E=u(y,g,v,b);if(y[v]=E,a===!1){var T=i||0;v>0&&y[v-1]!==x&&(y[v]=Math.max(y[v],y[v-1]+T)),v<y.length-1&&y[v+1]!==x&&(y[v]=Math.min(y[v],y[v+1]-T))}else if(typeof i=="number"||i===null){for(var C=v+1;C<y.length;C+=1)for(var I=!0;f(y[C]-y[C-1])&&I;){var P=c(y,1,C);y[C]=P.value,I=P.changed}for(var j=v;j>0;j-=1)for(var A=!0;f(y[j]-y[j-1])&&A;){var S=c(y,-1,j-1);y[j-1]=S.value,A=S.changed}for(var M=y.length-1;M>0;M-=1)for(var O=!0;f(y[M]-y[M-1])&&O;){var R=c(y,-1,M-1);y[M-1]=R.value,O=R.changed}for(var H=0;H<y.length-1;H+=1)for(var ee=!0;f(y[H+1]-y[H])&&ee;){var re=c(y,1,H+1);y[H+1]=re.value,ee=re.changed}}return{value:y[v],values:y}};return[l,d]}var A2e=w.exports.forwardRef(function(e,t){var n,r=e.prefixCls,a=r===void 0?"rc-slider":r,i=e.className,o=e.style,s=e.disabled,l=s===void 0?!1:s,u=e.autoFocus,c=e.onFocus,f=e.onBlur,d=e.min,p=d===void 0?0:d,h=e.max,g=h===void 0?100:h,v=e.step,b=v===void 0?1:v,y=e.value,x=e.defaultValue,E=e.range,T=e.count,C=e.onChange,I=e.onBeforeChange,P=e.onAfterChange,j=e.allowCross,A=j===void 0?!0:j,S=e.pushable,M=S===void 0?!1:S,O=e.draggableTrack,R=e.reverse,H=e.vertical,ee=e.included,re=ee===void 0?!0:ee,Y=e.startPoint,J=e.trackStyle,ae=e.handleStyle,le=e.railStyle,fe=e.dotStyle,ge=e.activeDotStyle,we=e.marks,Ve=e.dots,Lt=e.handleRender,Nt=e.tabIndex,Zt=Nt===void 0?0:Nt,Fe=e.ariaLabelForHandle,Je=e.ariaLabelledByForHandle,tt=e.ariaValueTextFormatterForHandle,ve=w.exports.useRef(),pt=w.exports.useRef(),kt=w.exports.useMemo(function(){return H?R?"ttb":"btt":R?"rtl":"ltr"},[R,H]),wt=w.exports.useMemo(function(){return isFinite(p)?p:0},[p]),At=w.exports.useMemo(function(){return isFinite(g)?g:100},[g]),ht=w.exports.useMemo(function(){return b!==null&&b<=0?1:b},[b]),jt=w.exports.useMemo(function(){return M===!0?ht:M>=0?M:!1},[M,ht]),Gt=w.exports.useMemo(function(){var Yn=Object.keys(we||{});return Yn.map(function(fn){var Qt=we[fn],Un={value:Number(fn)};return Qt&&sr(Qt)==="object"&&!w.exports.isValidElement(Qt)&&("label"in Qt||"style"in Qt)?(Un.style=Qt.style,Un.label=Qt.label):Un.label=Qt,Un}).filter(function(fn){var Qt=fn.label;return Qt||typeof Qt=="number"}).sort(function(fn,Qt){return fn.value-Qt.value})},[we]),An=T2e(wt,At,ht,Gt,A,jt),_r=Le(An,2),er=_r[0],tr=_r[1],k=_l(x,{value:y}),Ce=Le(k,2),Ie=Ce[0],lt=Ce[1],_t=w.exports.useMemo(function(){var Yn=Ie==null?[]:Array.isArray(Ie)?Ie:[Ie],fn=Le(Yn,1),Qt=fn[0],Un=Qt===void 0?wt:Qt,Mn=Ie===null?[]:[Un];if(E){if(Mn=Ue(Yn),T||Ie===void 0){var dn=T>=0?T+1:2;for(Mn=Mn.slice(0,dn);Mn.length<dn;){var Wr;Mn.push((Wr=Mn[Mn.length-1])!==null&&Wr!==void 0?Wr:wt)}}Mn.sort(function(Xr,za){return Xr-za})}return Mn.forEach(function(Xr,za){Mn[za]=er(Xr)}),Mn},[Ie,E,wt,T,er]),Yt=w.exports.useRef(_t);Yt.current=_t;var St=function(fn){return E?fn:fn[0]},Rt=function(fn){var Qt=Ue(fn).sort(function(Un,Mn){return Un-Mn});C&&!NE(Qt,Yt.current)&&C(St(Qt)),lt(Qt)},Tt=function(fn){if(!l){var Qt=0,Un=At-wt;_t.forEach(function(dn,Wr){var Xr=Math.abs(fn-dn);Xr<=Un&&(Un=Xr,Qt=Wr)});var Mn=Ue(_t);Mn[Qt]=fn,E&&!_t.length&&T===void 0&&Mn.push(fn),I==null||I(St(Mn)),Rt(Mn),P==null||P(St(Mn))}},$t=function(fn){fn.preventDefault();var Qt=pt.current.getBoundingClientRect(),Un=Qt.width,Mn=Qt.height,dn=Qt.left,Wr=Qt.top,Xr=Qt.bottom,za=Qt.right,Ai=fn.clientX,bn=fn.clientY,tn;switch(kt){case"btt":tn=(Xr-bn)/Mn;break;case"ttb":tn=(bn-Wr)/Mn;break;case"rtl":tn=(za-Ai)/Un;break;default:tn=(Ai-dn)/Un}var Rn=wt+tn*(At-wt);Tt(er(Rn))},Bt=w.exports.useState(null),Sn=Le(Bt,2),Bn=Sn[0],ca=Sn[1],Da=function(fn,Qt){if(!l){var Un=tr(_t,fn,Qt);I==null||I(St(_t)),Rt(Un.values),P==null||P(St(Un.values)),ca(Un.value)}};w.exports.useEffect(function(){if(Bn!==null){var Yn=_t.indexOf(Bn);Yn>=0&&ve.current.focus(Yn)}ca(null)},[Bn]);var Er=w.exports.useMemo(function(){return O&&ht===null?!1:O},[O,ht]),Ba=function(){P==null||P(St(Yt.current))},Or=x2e(pt,kt,_t,wt,At,er,Rt,Ba,tr),Ka=Le(Or,4),Sa=Ka[0],li=Ka[1],fa=Ka[2],Mr=Ka[3],qt=function(fn,Qt){Mr(fn,Qt),I==null||I(St(Yt.current))},un=Sa!==-1;w.exports.useEffect(function(){if(!un){var Yn=_t.lastIndexOf(li);ve.current.focus(Yn)}},[un]);var cn=w.exports.useMemo(function(){return Ue(fa).sort(function(Yn,fn){return Yn-fn})},[fa]),kr=w.exports.useMemo(function(){return E?[cn[0],cn[cn.length-1]]:[wt,cn[0]]},[cn,E,wt]),da=Le(kr,2),ro=da[0],ao=da[1];w.exports.useImperativeHandle(t,function(){return{focus:function(){ve.current.focus(0)},blur:function(){var fn=document,Qt=fn.activeElement;pt.current.contains(Qt)&&(Qt==null||Qt.blur())}}}),w.exports.useEffect(function(){u&&ve.current.focus(0)},[]);var Ti=w.exports.useMemo(function(){return{min:wt,max:At,direction:kt,disabled:l,step:ht,included:re,includedStart:ro,includedEnd:ao,range:E,tabIndex:Zt,ariaLabelForHandle:Fe,ariaLabelledByForHandle:Je,ariaValueTextFormatterForHandle:tt}},[wt,At,kt,l,ht,re,ro,ao,E,Zt,Fe,Je,tt]);return w.exports.createElement(Vu.Provider,{value:Ti},w.exports.createElement("div",{ref:pt,className:Wt(a,i,(n={},m(n,"".concat(a,"-disabled"),l),m(n,"".concat(a,"-vertical"),H),m(n,"".concat(a,"-horizontal"),!H),m(n,"".concat(a,"-with-marks"),Gt.length),n)),style:o,onMouseDown:$t},w.exports.createElement("div",{className:"".concat(a,"-rail"),style:le}),w.exports.createElement(_2e,{prefixCls:a,style:J,values:cn,startPoint:Y,onStartMove:Er?qt:null}),w.exports.createElement(C2e,{prefixCls:a,marks:Gt,dots:Ve,style:fe,activeStyle:ge}),w.exports.createElement(y2e,{ref:ve,prefixCls:a,style:ae,values:fa,draggingIndex:Sa,onStartMove:qt,onOffsetChange:Da,onFocus:c,onBlur:f,handleRender:Lt}),w.exports.createElement(k2e,{prefixCls:a,marks:Gt,onClick:Tt})))}),O2e=w.exports.forwardRef(function(e,t){var n=e.visible,r=w.exports.useRef(null),a=w.exports.useRef(null);function i(){pr.cancel(a.current),a.current=null}function o(){a.current=pr(function(){var s;(s=r.current)===null||s===void 0||s.forcePopupAlign(),a.current=null})}return w.exports.useEffect(function(){return n?o():i(),i},[n,e.title]),w.exports.createElement(Cwe,xt({ref:nb(r,t)},e))}),M2e=O2e,R2e=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(n[r[a]]=e[r[a]]);return n},DD=w.exports.forwardRef(function(e,t){var n=w.exports.useContext(ts),r=n.getPrefixCls,a=n.direction,i=n.getPopupContainer,o=w.exports.useState({}),s=Le(o,2),l=s[0],u=s[1],c=function(A,S){u(function(M){return xt(xt({},M),m({},A,S))})},f=function(A,S){return A||(S?a==="rtl"?"left":"right":"top")},d=e.prefixCls,p=e.tooltipPrefixCls,h=e.range,g=e.className,v=R2e(e,["prefixCls","tooltipPrefixCls","range","className"]),b=r("slider",d),y=r("tooltip",p),x=Wt(g,m({},"".concat(b,"-rtl"),a==="rtl"));a==="rtl"&&!v.vertical&&(v.reverse=!v.reverse);var E=w.exports.useMemo(function(){return h?sr(h)==="object"?[!0,h.draggableTrack]:[!0,!1]:[!1]},[h]),T=Le(E,2),C=T[0],I=T[1],P=function(A,S){var M=S.index,O=S.dragging,R=r(),H=e.tipFormatter,ee=e.tooltipVisible,re=e.tooltipPlacement,Y=e.getTooltipPopupContainer,J=e.vertical,ae=H?l[M]||O:!1,le=ee||ee===void 0&&ae,fe=xt(xt({},A.props),{onMouseEnter:function(){return c(M,!0)},onMouseLeave:function(){return c(M,!1)}});return w.exports.createElement(M2e,{prefixCls:y,title:H?H(S.value):"",visible:le,placement:f(re,J),transitionName:"".concat(R,"-zoom-down"),key:M,overlayClassName:"".concat(b,"-tooltip"),getPopupContainer:Y||i},w.exports.cloneElement(A,fe))};return w.exports.createElement(A2e,xt({},v,{step:v.step,range:C,draggableTrack:I,className:x,ref:t,prefixCls:b,handleRender:P}))});DD.defaultProps={tipFormatter:function(t){return typeof t=="number"?t.toString():""}};var P2e=DD;function I2e(){const[e,t]=w.exports.useState([]),[n,r]=w.exports.useState(0),[a,i]=w.exports.useState(null);return Gbe(async()=>{const o=new Ube({id:"map",map:new Cfe({pitch:0,type:"amap",style:"dark",center:[120.22613525390624,36.14896463588831],zoom:10})}),s=new Jme;s.source([],{parser:{type:"json",x:"lon",y:"lat"}}).shape("circle").size("value",[1,30]).color("value",["#34B6B7","#4AC5AF","#5FD3A6","#7BE39E","#A1EDB8","#CEF8D6"]).style({opacity:.5,strokeWidth:0}),o.addLayer(s),i(s);const l=await(await fetch("https://gw.alipayobjects.com/os/bmw-prod/2644525e-7d09-4f05-8254-99ac2e540686.json")).json();t(l.map(u=>({time:Math.floor(u.time/100)*2+u.time%100/30,data:u.data})))}),w.exports.useEffect(()=>{var s;const o=(s=e.find(l=>l.time===n))==null?void 0:s.data;a==null||a.setData(o,{parser:{type:"json",x:"lon",y:"lat"}})},[e,n,a]),Hbe(()=>{r(o=>o>=47?0:o+1)},100),k_e("div",{className:"App",children:[Op("div",{id:"map"}),Op(m2e,{bodyStyle:{padding:"8px 16px"},style:{position:"absolute",bottom:50,width:300,left:"calc(50% - 150px)",zIndex:10,background:"#fff"},children:Op(P2e,{value:n,min:0,max:47,step:1,onChange:r})})]})}Yx.createRoot(document.getElementById("root")).render(Op(Lr.StrictMode,{children:Op(I2e,{})}));
